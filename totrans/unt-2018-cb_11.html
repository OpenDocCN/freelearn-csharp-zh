<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Webserver Communication and Online Version-Control</h1>
                </header>
            
            <article>
                
<p>In this chapter, we will cover:</p>
<ul>
<li>Setting up a leaderboard using PHP and a database</li>
<li>Unity game communication with a web-server leaderboard</li>
<li>Creating and cloning a GitHub repository</li>
<li>Adding a Unity project to a Git repository, and pushing it up to GitHub</li>
<li>Unity project version-control using GitHub for Unity</li>
<li>Preventing your game from running on unknown servers</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Introduction</h1>
                </header>
            
            <article>
                
<p>A <strong><span class="KeyWordPACKT">Server</span></strong> waits for messages requesting something for a <strong><span class="KeyWordPACKT">Client</span></strong>, and when one is received, it attempts to interpret and act upon the message, and send back an appropriate response to the <strong><span class="KeyWordPACKT">Client</span></strong>. A <strong><span class="KeyWordPACKT">Client</span></strong> is a computer program that can communicate with other <strong><span class="KeyWordPACKT">Clients</span></strong> and/or <span class="KeyWordPACKT">Servers</span>. <strong><span class="KeyWordPACKT">Clients</span></strong> send <strong><span class="KeyWordPACKT">Requests</span></strong>, and receive <strong><span class="KeyWordPACKT">Responses</span></strong>.</p>
<p>It us useful to keep these concepts of <span class="KeyWordPACKT"><strong>Client</strong>/<strong>Server</strong>/<strong>Request</strong>/<strong>Response</strong></span> in mind when thinking about and working with <span class="KeyWordPACKT"><strong>Client</strong>-<strong>Server</strong></span> achitectures.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The Big Picture</h1>
                </header>
            
            <article>
                
<p>The world is networked, which involves many different <strong><span class="KeyWordPACKT">Clients</span></strong> communicating with other <strong><span class="KeyWordPACKT">Clients</span></strong>, and also with <strong><span class="KeyWordPACKT">Servers</span></strong>.</p>
<p class="mce-root"/>
<p>Each of the Unity deployment platforms illustrates an example of a <strong><span class="KeyWordPACKT">Client</span></strong>:</p>
<ul>
<li>WebGL (running in a web browser)</li>
<li>Windows and Mac applications</li>
<li>Nintendo Switch</li>
<li>Microsoft Xbox</li>
<li>Sony Playstation</li>
</ul>
<p>The <strong><span class="KeyWordPACKT">Servers</span></strong> that these games can communicate with include dedicated multiplayer <strong><span class="KeyWordPACKT">Game Servers</span></strong>, regular webservers, and online database servers. Multiplayer game development is the topic for a whole book of its own.</p>
<p>Web and database servers can play many roles with game development and Runtime interaction. One form of Unity game interaction with web servers involves a game communicating with an online <strong><span class="KeyWordPACKT">Server</span></strong> for data, such as high scores, inventories, player profiles, and chat forums.</p>
<p>Another kind of <span class="KeyWordPACKT"><strong>Client</strong></span>-<strong><span class="KeyWordPACKT">Server</span></strong> relationship is for <span class="KeyWordPACKT"><strong>Distributed Version Control Systems</strong> (<strong>DVCS</strong>)</span>, where content on a local computer (laptop or desktop) can be synchronized with an online server, both for backup and historical change purposes, and also to allow the sharing, and collaborative authoring, of code projects with other people. Private repositories are used within commercial game companies, and public repositories are used for <strong><span class="KeyWordPACKT">Open Source</span></strong> projects, allowing anyone access to the contents.</p>
<p>The recipes in this chapter explore a range of these <strong><span class="KeyWordPACKT">Client-Server</span></strong> communication scenarios in relation to the Unity game development, online <span class="KeyWordPACKT">Run-Time</span> communication, and cloud code version-control and sharing.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Setting up a leaderboard using PHP and a database</h1>
                </header>
            
            <article>
                
<p>Games are more fun when there is a leaderboard of high scores that the players have achieved. Even single-player games can communicate with a shared web-based leaderboard. This recipe creates the web <strong><span class="KeyWordPACKT">Server-Side</span></strong> (PHP) scripts to set and get player scores from a SQL database. The recipe after this one then creates a Unity game <strong><span class="KeyWordPACKT">Client</span></strong> that can communicate with this web leaderboard <strong><span class="KeyWordPACKT">Server</span></strong>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes that you either have your own web hosting, or are running a local web server. You could use the built-in PHP web <strong><span class="KeyWordPACKT">Server</span></strong>, or a web <strong><span class="KeyWordPACKT">Server</span></strong> such as Apache or Nginx. For the database, you could use a SQL database <span class="KeyWordPACKT">Server</span> such as MySQL or MariaDB, however, we've tried to keep things simple using SQLLite—a file-based database system. So all you actually need on your computer is PHP 7, since it has a built-in web <strong><span class="KeyWordPACKT">Server</span></strong> and can talk to SQLite databases, which is the setup on which this recipe was tested.</p>
<p>All the PHP scripts for this recipe, and the SQLLite database file, can be found in the <kbd>12_01</kbd> folder.</p>
<div class="packt_infobox">If you do want to install a web server and database server application, a great choice is XAMPP. It is a free, cross-platform collection of everything you need to set up a database and web server on your local computer. The download page also contains FAQs and installation instructions for Windows, Mac, and Linux: <a href="https://www.apachefriends.org/download.html">https://www.apachefriends.org/download.html</a>.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>To set up a leaderboard using PHP and a database, do the following:</p>
<ol>
<li>Copy the provided PHP project to where you will be running your webserver:
<ul>
<li><span class="ScreenTextPACKT"><strong>Live website hosting</strong>:</span> Copy the files to the live web folder on your server (often <kbd>www</kbd> or <kbd>httdocs)</kbd></li>
<li><span class="ScreenTextPACKT"><strong>Running on local machine</strong>:</span> At the comment line, you can use the Composer script shortcut to run the PHP built-in web server by typing <strong><span class="ScreenTextPACKT">composer run:</span></strong></li>
</ul>
</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/63c43c18-90f0-48e8-9547-da18b99140d5.png"/></p>
<p class="mce-root"/>
<ol start="2">
<li>Open a web browser to your website location:
<ul>
<li><span class="ScreenTextPACKT"><strong>Live website hosting</strong>:</span> Visit the URL for your hosted domain</li>
<li><span class="ScreenTextPACKT"><strong>Running on local machine</strong>:</span> Visit the <kbd><span class="URLPACKT">localhost:8000</span></kbd> URL:</li>
</ul>
</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/38fc311f-1c1e-48ca-b739-5c14d4594fa9.png" style="width:20.00em;height:15.00em;"/></p>
<ol start="3">
<li>Create/reset the database by clicking the last bulleted link: <span class="URLPACKT"><span class="packt_screen">reset database</span></span>. You should see a page with message <span class="packt_screen">database has been reset</span>, and a link back to the <span class="packt_screen">home</span> page (click that link).</li>
<li>To view the leaderboard scores as a web page in your web browser, click the second link: <span class="URLPACKT"><span class="packt_screen">list players (HTML):</span></span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/56f76b73-e922-461d-9860-4e954bba3aef.png" style="width:27.42em;height:10.50em;"/></p>
<ol start="5">
<li>Try the fifth link <span>–</span> <span class="URLPACKT"><span class="packt_screen">list players (TXT)</span></span> <span>–</span> to retrieve the leaderboard data as a text file. Note how it looks different viewed in the web browser (which ignores line breaks), than when you view the actual source file returned from the server:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/a455da29-6ebc-4653-84b1-01af528919ae.png"/></p>
<ol start="6">
<li>Do the same with the JSON and XML options <span>–</span> to see how our <strong><span class="KeyWordPACKT">Server</span></strong> can return the contents of the database wrapped up as HTML, plain text (TXT), XML, or JSON.</li>
<li>Click the sixth link <span>–</span> <span class="URLPACKT"><span class="packt_screen">create (username = mattilda, score=800)</span></span>. When you next retrieve the contents, you'll see that there is a new database record for player mattilda with a score of 800. This shows that our server can receive data and change the contents of the database, as a well as just returning values from it.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>The player's scores are stored in a SQLLite database. Access to the database is facilitated through the PHP scripts provided. In our example, all the PHP scripts were placed in a folder on our local machine, from which we'll run the <span class="KeyWordPACKT">Server</span> (it can be anywhere when using the PHP built-in server). So, the scripts are accessed via <kbd><span class="URLPACKT">http://localhost:8000</span></kbd>.</p>
<p>All the access is through the PHP filem called <kbd>index.php</kbd>. This is called a <span class="KeyWordPACKT">Front Controller</span>, acting like a receptionist in a building, interpreting <span class="KeyWordPACKT">Requests</span> and asking the appropriate function to execute some actions and return a result in <strong><span class="KeyWordPACKT">Response</span></strong> to the <strong><span class="KeyWordPACKT">Request</span></strong>.</p>
<p>There are five actions implemented, and each is indicated by adding the action name at the end of the URL (this is the GET HTTP method, which is sometimes used for web forms. Take a look at the address bar of your browser next time you search Google for example). The actions and their parameters (if any) are as follows:</p>
<ul>
<li><strong><span class="ScreenTextPACKT">action = list &amp; format = HTML / TXT / XML / JSON</span></strong>: This action asks for a listing all player scores to be returned. Depending on the value of second variable format (html/txt/xml/json), the list of users and their scores is returned in different text file formats.</li>
</ul>
<ul>
<li><strong><span class="ScreenTextPACKT">action = reset</span></strong>: This action asks for a set of default player names and score values to replace the current contents of the database table. This action takes no argument. It returns some HTML stating that the database has been reset, and a link to the homepage.</li>
</ul>
<ul>
<li><strong><span class="ScreenTextPACKT">action = get &amp; username = &amp; format = HTML / TXT</span></strong>: This action asks for the integer score of the named player that  is to be found. It returns the  score integer. There are two formats: HTML, for a webpage giving the player's score, and TXT, where the numeric value is the only content in the HTTP message returned.</li>
</ul>
<ul>
<li><strong><span class="ScreenTextPACKT">action = update &amp; username = &lt;usermame&gt; &amp; score = &lt;score&gt;</span></strong>: This action asks for the provided score of the named player to be stored in the database (but only if this new score is greater than the currently-stored score). It returns the word success (if the database update was successful), otherwise -1  (to indicate that no update took place).</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>Here are some ways to go further with this recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">SQLite, PHP, and database servers</h1>
                </header>
            
            <article>
                
<p>The PHP code in this recipe used the PDO data objects functions to communicate with a SQLite local file-based database. Learn more about PHP and SQLite at <a href="http://www.sqlitetutorial.net/sqlite-php/" target="_blank"><span class="URLPACKT">http://www.sqlitetutorial.net/sqlite-php/</span></a>.</p>
<p>When SQLite isn't a solution (not suported by a web-hosting package), you may need to develop locally with a SQL <span class="KeyWordPACKT">Server,</span> such as MySQL Community Edition or MariaDB, and then deploy with a live database <strong><span class="KeyWordPACKT">Server</span></strong> from your hosting company.</p>
<p>A good solution to try things out on your local machine can be a combined web application collection, such as XAMP/WAMP/MAMP. Your web <strong><span class="KeyWordPACKT">Server</span></strong> needs to support PHP, and you also need to be able to create the MySQL databases.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">PHPLiteAdmin</h1>
                </header>
            
            <article>
                
<p>When writing code that talks to database files and database <strong><span class="KeyWordPACKT">Servers</span></strong>, it can be frustrating when things are not working to not be able to see <span class="ItalicsPACKT">inside</span> the database. Therefore, database <strong><span class="KeyWordPACKT">Clients</span></strong> exist to allow you to interact with database <strong><span class="KeyWordPACKT">Servers</span></strong> without having to use code.</p>
<p>A lightweight (single file!) solution when using PHP and SQLLite is PHPLiteAdmin, which is free to use (although you may consider donating if you use it a lot). It is included in the <kbd><span class="ScreenTextPACKT">phpLiteAdmin</span></kbd> folder with this recipe's PHP scripts. It can be run using the Composer script shortcut command—<strong><span class="ScreenTextPACKT">composer dbadmin—</span></strong>and will run locally at <kbd><span class="URLPACKT">localhost:8001</span>.</kbd> Once running, just click on the link for the players table to see the data for each player's score in the database file:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/2f8a200b-1125-4b41-81db-aac4559b85c1.png"/></p>
<p>Learn more about PHPLiteAdmin at the project's GitHub repository and website:</p>
<ul>
<li><a href="https://github.com/phpLiteAdmin/pla" target="_blank"><span class="URLPACKT">https://github.com/phpLiteAdmin/pla</span></a></li>
<li><a href="https://www.phpliteadmin.org/" target="_blank"><span class="URLPACKT">https://www.phpliteadmin.org/</span></a></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Unity game communication with web-server leaderboard</h1>
                </header>
            
            <article>
                
<p>In this recipe, we create a Unity game <strong><span class="KeyWordPACKT">Client</span></strong> that can communicate, via UI buttons, with our web server leaderboard from the previous recipe:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/c95c4897-97eb-476b-a2d0-05220b91c7e5.png" style="width:51.33em;height:23.75em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Since the scene contains several UI elements and the code of the recipe is the communication with the PHP scripts and SQL database, in the <kbd>12_02</kbd> folder, we have provided a Unity package called <kbd><span class="ScreenTextPACKT">UnityLeaderboardClient</span></kbd>, containing a scene with everything set up for the Unity project.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>To create a Unity game that communicates with the web-server leaderboard, do the following:</p>
<ol>
<li>Import the provided Unity package, <kbd><span class="ScreenTextPACKT">UnityLeaderboardClient</span></kbd>.</li>
<li>Run the provided <strong><span class="KeyWordPACKT">Scene</span></strong>.</li>
<li>Ensure your PHP leaderboard is up and running.</li>
</ol>
<ol start="4">
<li>If you are not running locally (<kbd><span class="URLPACKT">localhost:8000</span></kbd>), you'll need to update the URL by selecting the <strong><span class="ScreenTextPACKT">Main Camera</span></strong> in the <span class="KeyWordPACKT">Hierarchy</span>, and then editing the <strong><span class="ScreenTextPACKT">Leader Board URL</span></strong> text for the <strong><span class="ScreenTextPACKT">Web Leaderboard (Script)</span></strong> component in the <strong><span class="KeyWordPACKT">Inspector</span></strong>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/b5dc80ae-de0f-4cc5-9995-657d839dd1d7.png" style="width:40.17em;height:12.58em;"/></p>
<ol start="5">
<li>Click on the <strong><span class="ScreenTextPACKT">UI</span> <span class="ScreenTextPACKT">Buttons</span></strong> to make Unity communicate with the PHP scripts that have access to the highscore database.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>The player's scores are stored in an SQL database. Access to the database is facilitated through the PHP scripts provided by the web server project that was set up in the previous recipe.</p>
<p>In our example, all the PHP scripts were placed in a web <strong><span class="KeyWordPACKT">Server</span></strong> folder for a local webserver. So, the scripts are accessed via <kbd><span class="URLPACKT">http://localhost:8000/</span></kbd>. However, since the URL is a public string variable, this can be set before running to the location of your <span class="KeyWordPACKT">Server</span> and site code.</p>
<p>There are buttons in the Unity scene (corresponding to the actions the web leaderboard understands) that set up the corresponding action and the parameters to be added to the URL, for the next call to the web <strong><span class="KeyWordPACKT">Server</span></strong>, via the <kbd><span class="CodeInTextPACKT">LoadWWW()</span></kbd> method. The <kbd><span class="ScreenTextPACKT">OnClick()</span></kbd> actions have been set up for each button  to call the corresponding methods of the <kbd><span class="ScreenTextPACKT">WebLeaderBoard</span></kbd> C# script of the <strong><span class="ScreenTextPACKT">Main Camera</span></strong>.</p>
<p>There are also several <strong><span class="ScreenTextPACKT">UI Text</span></strong> objects. One displays the most recent URL string sent to the server. Another displays the integer value that was extracted from the response message that was received from the server (or a message as <strong><span class="ScreenTextPACKT">not an integer</span></strong> if some other data was received).</p>
<p>The third <strong><span class="ScreenTextPACKT">UI Text</span></strong> object is inside a <strong><span class="ScreenTextPACKT">UI Panel</span></strong>, and has been made large enough to display a full, multiline text string received from the <span class="KeyWordPACKT">Server</span> (which is stored inside the <span class="ScreenTextPACKT">textFileContents</span> variable).</p>
<p>We can see that the contents of the HTTP text <span class="KeyWordPACKT">Reponse</span> message are simply an integer when a random score is set for player Matt, when the <span class="ScreenTextPACKT">Get score for player 'matt' (TXT)</span> button is clicked, and a text file containing <kbd><span class="ScreenTextPACKT">505</span></kbd> is returned:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/65f17bea-2f99-4c8a-b0aa-040e1854cb91.png"/></p>
<p>The <strong><span class="ScreenTextPACKT">UI Text</span></strong> objects have been assigned to public variables of the <kbd><span class="ScreenTextPACKT">WebLeaderBoard</span></kbd> C# script for the <span class="ScreenTextPACKT">Main Camera</span>. When any of the <span class="ScreenTextPACKT">UI Buttons</span> are clicked, the corresponding method of the <kbd><span class="ScreenTextPACKT">WebLeaderBoard</span></kbd> method is called, which builds the URL string with parameters, and then calls the <kbd><span class="CodeInTextPACKT">LoadWWW()</span></kbd> method. This method sends the <span class="KeyWordPACKT">Request</span> to the URL, and waits (by virtue of being a coroutine) until a <span class="KeyWordPACKT">Response</span> is received. It then stores the content, received in the <kbd><span class="ScreenTextPACKT">textFileContents</span></kbd> variable, and calls the <kbd><span class="ScreenTextPACKT">UpdateUI()</span></kbd> method. There is a prettification of the text received, inserting newline characters to make the JSON, HTML, and XML easier to read.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>Here are some ways to go further with this recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Extracting the full leaderboard data for display within Unity</h1>
                </header>
            
            <article>
                
<p>The XML/JSON text that can be retrieved from the PHP web server provides a useful method for allowing a Unity game to retrieve the full set of the leaderboard data from the database. Then, the leaderboard can be displayed to the user in the Unity game (perhaps, in a nice 3D fashion, or through a game-consistent UI).</p>
<p>See Chapter <a href="https://cdp.packtpub.com/unity_2017_cookbook/wp-admin/post.php?post=490&amp;action=edit">Working with Plain Text, XML, and JSON Text Files</a> in this cookbook to learn how to process data in XML and JSON formats.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using the secret game codes to secure your leaderboard scripts</h1>
                </header>
            
            <article>
                
<p>The Unity and PHP code that is presented illustrates a simple, unsecured web-based leaderboard. To prevent players hacking into the board with false scores, we should encode some form of secret game code (or key) into the communications. Only update requests that include the correct code will actually cause a change to the database.</p>
<p>The Unity code will combine the secret key (in this example, the <strong><span class="ScreenTextPACKT">harrypotter </span></strong><span class="ScreenTextPACKT">string</span>) with something related to the communication <span>–</span> for example, the same MySQL/PHP leaderboard may have different database records for different games that are identified with a game ID:</p>
<pre>    // Unity Csharp code<br/>     string key = "harrypotter"<br/>     string gameId = 21;<br/>     string gameCode = Utility.Md5Sum(key + gameId); </pre>
<p>The server-side PHP code will receive both the encrypted game code, and the piece  of game data that is used to create that encrypted code. In this example, it is the game ID and MD5 hashing function, which is available in both Unity and in PHP. You can learn more about MD5 hashing on Wikipedia: <a href="https://en.wikipedia.org/wiki/MD5">https://en.wikipedia.org/wiki/MD5</a>.</p>
<p>The secret key (<strong><span class="ScreenTextPACKT">harrypotter</span></strong>) is used with the game ID to create an encrypted code that can be compared with the code received from the Unity game (or whatever user agent or browser is attempting to communicate with the leaderboard <strong><span class="KeyWordPACKT">Server</span></strong> scripts). The database actions will only be executed if the game code created on the <strong><span class="KeyWordPACKT">Server</span></strong> matches that sent along with the request for a database action:</p>
<pre>    // PHP - security code<br/>     $key = "harrypotter"<br/>     $game_id =  $_GET['game_id'];<br/>     $provided_game_code =  $_GET['game_code'];<br/>     $server_game_code = md5($key.$game_id);<br/>     <br/>     if( $server_game_code == $provided_game_code ) {<br/>       // codes match - do processing here<br/>     } </pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating and cloning a GitHub repository</h1>
                </header>
            
            <article>
                
<p><span class="KeyWordPACKT"><strong>Distributed Version Control Systems</strong> (<strong>DVCS</strong>)</span> are becoming a bread-and-butter everyday tool for software developers. An issue with Unity projects can be the many binary files in each project. There are also many files in a local system's Unity project directory that are not needed for archiving/sharing, such as OS-specific thumbnail files and trash files. Finally, some Unity project folders themselves do not need to be archived, such as Temp and Library.</p>
<p>While Unity provides its own <strong><span class="KeyWordPACKT">Unity Teams</span></strong> online collaboration, many small game developers chose not to pay for this extra feature. Also, Git and Mercurial (the most common DVCSs) are free, and work with any set of documents that are to be maintained (programs in any programming language, text-files, and so on). So, it makes sense to learn how to work with a third-party, industry-standard DVCS for the Unity projects. In fact, the documents for this very book were all archived and version-controlled using a private <strong><span class="KeyWordPACKT">GitHub</span></strong> repository!</p>
<p>In this project, we'll create a new online project repository using the free <strong><span class="KeyWordPACKT">GitHub</span></strong> server, and then clone (duplicate) a copy onto a local computer. The recipe that follows will then transfer a Unity project into the local project repository, and use the stored link from the cloning to push the changed files back up to the <strong><span class="KeyWordPACKT">GitHub</span></strong> online server.</p>
<p>NOTE: <strong>All</strong> the projects from this Cookbook have been archived on <strong><span class="KeyWordPACKT">GitHub</span></strong> in public repositories for you to read, download, edit, and run on your computer. Depsite a hard disk crash during the authoring of this book, no code was lost, since the steps of this recipe were being followed for every part of this book.</p>
<p>NOTE: <strong><span class="KeyWordPACKT">Git</span></strong> is a version-control system, <strong><span class="KeyWordPACKT">GitHub</span></strong> is one of several online systems that host projects archived in the <strong><span class="KeyWordPACKT">Git</span></strong> format. A popular alternative to <strong><span class="KeyWordPACKT">GitHub</span></strong> is <strong><span class="KeyWordPACKT">BitBucket</span></strong>, which can host both <strong><span class="KeyWordPACKT">Git</span></strong> and <strong><span class="KeyWordPACKT">Mercurial</span></strong> version-control project formats.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Since this recipe illustrates hosting code on <strong><span class="KeyWordPACKT">GitHub</span></strong>, you'll need to create a (free) <strong><span class="KeyWordPACKT">GitHub</span></strong> account at <span class="URLPACKT">GitHub.com</span> if you do not already have one.</p>
<p>If not already installed, you'll need to install <strong><span class="KeyWordPACKT">Git</span></strong> on your local computer as part of this recipe. Learn how, and download the client from the following links:</p>
<ul>
<li><a href="http://git-scm.com/book/en/Getting-Started-Installing-Git" target="_blank"><span class="URLPACKT">http://git-scm.com/book/en/Getting-Started-Installing-Git</span></a></li>
<li><a href="http://git-scm.com/downloads/guis" target="_blank"><span class="URLPACKT">http://git-scm.com/downloads/guis</span></a></li>
</ul>
<div class="packt_infobox">The screenshots for this recipe were created on a Mac. On Windows, you would use the Git BASH (see <a href="https://gitforwindows.org/">https://gitforwindows.org/</a>) or Powershell (see <a href="https://docs.microsoft.com/en-us/powershell/">https://docs.microsoft.com/en-us/powershell/</a>) Terminal windows for command-line Git operations.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>To create and clone a <strong><span class="KeyWordPACKT">GitHub</span></strong> repository, do the following:</p>
<ol>
<li>Install <strong><span class="KeyWordPACKT">Git</span></strong> for the command line on your computer. As usual, it is good practice to do a system backup before installing any new application: <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" target="_blank"><span class="URLPACKT">https://git-scm.com/book/en/v2/Getting-Started-Installing-Git</span></a>.</li>
<li>Test that you have <strong><span class="KeyWordPACKT">Git</span></strong> installed, by typing <strong><span class="ScreenTextPACKT">git</span></strong> at the command line in a terminal window. You should see text help displayed, showing a list of possible command options:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/0acf7549-4a4b-4a80-8193-ac96380b222f.png" style="width:30.17em;height:14.58em;"/></p>
<ol start="3">
<li>Open a web browser and nagivate to your <strong><span class="KeyWordPACKT">GitHub</span></strong> repositories page:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/bdd9dc78-c86f-4879-a8e7-3c59d79b1c71.png"/></p>
<ol start="4">
<li>Click the green button to start creating a new repository (such as <span class="ScreenTextPACKT">my-github-demo</span>):
<ul>
<li>Enter a name for the new repository, such as <strong><span class="ScreenTextPACKT">my-github-demo</span></strong></li>
<li>Click the option to create a <strong><span class="ScreenTextPACKT">README</span></strong> (important, so you can <span class="ItalicsPACKT">clone</span> the files to a local computer)</li>
<li>Add a <kbd><span class="ScreenTextPACKT">.gitignore</span></kbd> file <span>–</span> choose the Unity one:</li>
</ul>
</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/73601e73-1d55-4b9e-b2ca-e71f5e8fadf5.png"/></p>
<div class="packt_infobox">The <kbd><span class="ScreenTextPACKT">.gitignore</span></kbd> file is a special file; it tells the version control system which files do not need to be archived. For example, we don't need to record the Windows or Mac image thumbnail files (<kbd><span class="ScreenTextPACKT">DS_STORE</span></kbd> or <kbd><span class="ScreenTextPACKT">Thumbs.db</span></kbd>).</div>
<ol start="5">
<li>With the options selected, click the green <span class="ScreenTextPACKT"><span class="packt_screen">Create Repository</span></span> button.</li>
<li>You should now be taken to the repository contents page. Click the green dropdown named <span class="ScreenTextPACKT"><span class="packt_screen">Clone or download</span></span>, and then click the URL copy-to-clipboard tool button. This has copied the special <strong><span class="KeyWordPACKT">GitHub</span></strong> URL needed for connecting to <span class="KeyWordPACKT">GitHub</span> and copying the files to your local computer:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/22ee34b0-6bb5-4576-864e-03b9e0e31ec1.png"/></p>
<ol start="7">
<li>Open a command-line <strong>T<span class="KeyWordPACKT">erminal</span></strong> window, and navigate to the location where you wish to clone your <strong><span class="KeyWordPACKT">GitHub</span></strong> project repository (such as Desktop or Unity-projects).</li>
<li>At the CLI (Command-Line Interface), type <kbd><strong><span class="ScreenTextPACKT">git clone</span></strong></kbd>, and then paste the URL from your clipboard, it will be something like <a href="https://github.com/dr-matt-smith/my-unity-github-demo.git" target="_blank"><span class="ScreenTextPACKT">https://github.com/dr-matt-smith/my-unity-github-demo.git</span></a>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/cd7109d1-5911-4fb2-8930-199c5c07c249.png"/></p>
<ol start="9">
<li>Change into your cloned directory, such as <kbd><span class="ScreenTextPACKT">cd my-unity-github-demo</span></kbd>.</li>
<li>List the files. You should see your <kbd>README.md</kbd>, and if you have the option to see hidden folders and files, you'll also see <kbd><span class="ScreenTextPACKT">.git</span></kbd> and <kbd><span class="ScreenTextPACKT">.gitignore</span></kbd>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/092753d4-3335-4e26-8d65-038ae7238032.png" style="width:28.25em;height:11.50em;"/></p>
<ol start="11">
<li>Use the <kbd><span class="ScreenTextPACKT">git remote -v</span></kbd> command to see the stored link from this copy of the project files on your computer, then back up to the <span class="KeyWordPACKT">GitHub</span> online repository:</li>
</ol>
<pre style="padding-left: 60px"><strong>    $ git remote -v</strong><br/><strong>     origin  https://github.com/dr-matt-smith/my-unity-github-demo.git (fetch)</strong><br/><strong>     origin  https://github.com/dr-matt-smith/my-unity-github-demo.git (push)</strong> </pre>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>You learned how to create a new empty repository on the <span class="KeyWordPACKT"><strong>GitHub</strong></span> web server. You then <span class="ItalicsPACKT">cloned</span> it to your local computer.</p>
<p>You also checked to see that this clone had a link back to its remote <span class="ItalicsPACKT">origin</span>.</p>
<div class="packt_infobox">If you have simply downloaded and decompressed the ZIP file, you would not have the <kbd><span class="ScreenTextPACKT">.git</span></kbd> folder, nor would you have the remote links back to its <span class="KeyWordPACKT">GitHub</span> origin.</div>
<p>The <span class="ScreenTextPACKT">.git</span> file actually contains the entire history of changes to the project repository files <span>–</span> and using different <span class="KeyWordPACKT">Git</span> commands, you can update the folder to re-instance any of the committed snapshots for the project repository contents.</p>
<p>The special file called <kbd><span class="ScreenTextPACKT">.gitignore</span></kbd> lists all the files and directories that are <strong>not</strong>  to be archived. At the time of writing, here are the contents of files that do not need to be archived (they are either unnecessary or can be regenerated when a project is loaded into Unity):</p>
<pre>         [Ll]ibrary/<br/>     [Tt]emp/<br/>     [Oo]bj/<br/>     [Bb]uild/<br/>     [Bb]uilds/<br/>     Assets/AssetStoreTools*<br/>     <br/>     # Visual Studio cache directory<br/>     .vs/<br/>     <br/>     # Autogenerated VS/MD/Consulo solution and project files<br/>     ExportedObj/<br/>     .consulo/<br/>     *.csproj<br/>     *.unityproj<br/>     *.sln<br/>     *.suo<br/>     *.tmp<br/>     *.user<br/>     *.userprefs<br/>     *.pidb<br/>     *.booproj<br/>     *.svd<br/>     *.pdb<br/>     *.opendb<br/>     <br/>     # Unity3D generated meta files<br/>     *.pidb.meta<br/>     *.pdb.meta<br/>     <br/>     # Unity3D Generated File On Crash Reports<br/>     sysinfo.txt<br/>     <br/>     # Builds<br/>     *.apk<br/>     *.unitypackage  </pre>
<p>As we can see, folders such as <strong><span class="ScreenTextPACKT">Library</span></strong> and <strong><span class="ScreenTextPACKT">Temp</span></strong> are not to be archived. Note that if you have a project with a lot of resources (such as those using the 2D or 3D Gamekits), rebuilding the <strong><span class="ScreenTextPACKT">Library</span></strong> may take some minutes depending on the speed of your computer.</p>
<p>Note that the recommended files to ignore for <strong><span class="KeyWordPACKT">Git</span></strong> change from time to time as Unity changes its project folder structure. <strong><span class="KeyWordPACKT">GitHub</span></strong> has a master recommended <kbd><span class="ScreenTextPACKT">.gitignore</span></kbd> for <span class="KeyWordPACKT">Unity</span>, and it is recommended you review it from time to time, especially when upgrading to a new version of the Unity editor: <a href="https://github.com/github/gitignore/blob/master/Unity.gitignore" target="_blank"><span class="URLPACKT">https://github.com/github/gitignore/blob/master/Unity.gitignore</span></a>.</p>
<div class="packt_infobox">If you are using an older (pre-2018) version of Unity, you may need to look up what the appropriate <kbd><span class="ScreenTextPACKT">.gitignore</span></kbd> contents should be. The details given in this recipe were up to date for the 2018.2 version of the Unity editor.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>Here are some ways to go further with this recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Learn more about DVCS</h1>
                </header>
            
            <article>
                
<p>Here is a short video introduction to DVCS: <a href="http://youtu.be/1BbK9o5fQD4" target="_blank"><span class="URLPACKT">http://youtu.be/1BbK9o5fQD4</span></a>.</p>
<p>Note that the Fogcreek Kiln "harmony" feature now allows seamless work between <strong><span class="KeyWordPACKT">Git</span></strong> and <strong><span class="KeyWordPACKT">Mercurial</span></strong> with the same Kiln repository: <a href="http://blog.fogcreek.com/kiln-harmony-internals-the-basics/" target="_blank"><span class="URLPACKT">http://blog.fogcreek.com/kiln-harmony-internals-the-basics/</span></a>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Learn more about Git at the command line</h1>
                </header>
            
            <article>
                
<p>If you are new to working with a <span class="KeyWordPACKT"><strong><span>CLI</span></strong></span>, it is well worth following up some online resources to improve your skills. Any serious software development will probably involve some work at a command line at some point.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>Since both <strong><span class="KeyWordPACKT">Git</span></strong> and <strong><span class="KeyWordPACKT">Mercurial</span></strong> are open source, there are lots of great, free online resources available. The following are some good sources to get you started:</p>
<ul>
<li>Learn all about Git, download free GUI clients, and even get free online access to  The Pro Git book (by Scott Chacon), available through Creative Commons license: <a href="http://git-scm.com/book" target="_blank"><span class="URLPACKT">http://git-scm.com/book</span></a>.</li>
<li>You will find an online interactive Git command line to practice in: <a href="https://try.github.io/levels/1/challenges/1" target="_blank"><span class="URLPACKT">https://try.github.io/levels/1/challenges/1</span></a>.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using Bitbucket and SourceTree visual applications</h1>
                </header>
            
            <article>
                
<p>Unity offers a good tutorial on version-control using the Bitbucket website and the SourceTree application:</p>
<ul>
<li><a href="https://unity3d.com/learn/tutorials/topics/cloud-build/creating-your-first-source-control-repository" target="_blank"><span class="URLPACKT">https://unity3d.com/learn/tutorials/topics/cloud-build/creating-your-first-source-control-repository</span></a></li>
</ul>
<p>SourceTree is a free Mercurial and Git GUI client, available at:</p>
<ul>
<li><a href="http://www.sourcetreeapp.com/" target="_blank"><span class="URLPACKT">http://www.sourcetreeapp.com/</span></a></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Learning about Mercurial rather than Git</h1>
                </header>
            
            <article>
                
<p>The main Mercurial website, including free online access to <span class="ItalicsPACKT"><em>Mercurial</em>:  <em>The Definitive Guide</em></span> <em>(by Bryan O'Sullivan)</em> is available through the Open Publication License at <a href="http://mercurial.selenic.com/" target="_blank"><span class="URLPACKT">http://mercurial.selenic.com/</span></a>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Adding a Unity project to a local Git repository, and pushing files up to GitHub</h1>
                </header>
            
            <article>
                
<p>In the previous recipe, you created a new online project repository using the free <strong><span class="KeyWordPACKT">GitHub</span> <span class="KeyWordPACKT">Server</span></strong>, and then cloned (duplicate) a copy onto a local computer.</p>
<p>In this recipe, we will transfer a Unity project into the local project repository, and use the stored link from the cloning to push the changed files back up to the Guthub online <strong><span class="KeyWordPACKT">Server</span></strong>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe follows on from the previous one, so ensure you've completed that receipe before beginning this one.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>To add a Unity project to a <strong><span class="KeyWordPACKT">Git</span></strong> repository, and push it up to <strong><span class="KeyWordPACKT">GitHub</span></strong>, do the following:</p>
<ol>
<li>Create a new Unity project (or make use of an old one), save the <strong><span class="KeyWordPACKT">Scene</span></strong>, and quit Unity. For example, we created a project named <strong><span class="ScreenTextPACKT">project-for-version-control</span></strong> that contains the default <kbd><span class="ScreenTextPACKT">SampleScene</span></kbd> and a <span class="KeyWordPACKT">Material</span> named <kbd><span class="ScreenTextPACKT">m_red</span></kbd>. It is the asset files in the <span class="KeyWordPACKT">Project</span> panel that are the files that are stored on disk, and are the ones you'll be version controlling with <strong><span class="KeyWordPACKT">Git</span></strong> and <strong><span class="KeyWordPACKT">GitHub</span></strong>.</li>
</ol>
<div class="packt_infobox">It is important that all work has been saved and the Unity application is not running when you are archiving your Unity project, since if Unity is open there may be unsaved changes that will not get correctly recorded.</div>
<ol start="2">
<li>On your computer, copy the following folders into the folder of your cloned <strong><span class="KeyWordPACKT">GitHub</span></strong> repository:</li>
</ol>
<pre style="padding-left: 30px">     /Assets<br/>     /Plugins (if this folder exists - it may not)<br/>     /ProjectSettings    <br/>     /Packages </pre>
<ol start="3">
<li>The folder after copying these contents is illustrated below:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/300f8fcf-197e-4d50-ad51-cfcc125c6c6a.png"/></p>
<ol start="4">
<li>At the <strong><span>CLI</span></strong><span>,</span> type git status to see a list of folders/files that have changed and need to be committed to the next snapshot of project contents for out <strong><span class="KeyWordPACKT">Git</span></strong> version-control system.</li>
<li>Add all these files by typing <span class="ScreenTextPACKT"><kbd>git add</kbd>.</span></li>
<li>Commit our new snapshot with the <kbd><span class="ScreenTextPACKT">git commit -m "files added to project"</span></kbd> command:</li>
</ol>
<pre style="padding-left: 60px"><strong>    matt$ git commit -m "files added to project"</strong><br/> <br/><strong>     [master 1f415a3] files added to project</strong><br/><strong>      23 files changed, 1932 insertions(+)</strong><br/><strong>      create mode 100644 Assets/Scenes.meta</strong><br/><strong>      create mode 100644 Assets/Scenes/SampleScene.unity</strong><br/>      ...         </pre>
<ol start="7">
<li>We have created a snapshop of the new files and folders, so now we can push this new committed snapshot up to the GitHub cloud servers. Type <kbd><span class="ScreenTextPACKT">git push origin master</span></kbd>:</li>
</ol>
<pre style="padding-left: 60px"><strong>    matt$ git push origin master</strong><br/> <br/><strong>     Counting objects: 29, done.</strong><br/><strong>     Delta compression using up to 4 threads.</strong><br/><strong>     Compressing objects: 100% (27/27), done.</strong><br/><strong>     Writing objects: 100% (29/29), 15.37 KiB | 0 bytes/s, done.</strong><br/><strong>     Total 29 (delta 0), reused 0 (delta 0)</strong><br/><strong>     To https://github.com/dr-matt-smith/my-unity-github-demo.git</strong><br/><strong>        1b27686..1f415a3  master -&gt; master</strong><br/><strong>     matt$ </strong> </pre>
<div class="packt_infobox"><br/>
NOTE: The first time you do this, you'll be asked for your <strong><span class="KeyWordPACKT">GitHub</span></strong> username and password.</div>
<ol start="8">
<li>Visit <strong>GitHub</strong>, you should see that there is a new commit, and that your Unity files and folders have been uploaded to the <strong><span class="KeyWordPACKT">GitHub</span></strong> online repository:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/bbf22bda-2a24-403b-8947-d02d98f1c773.png"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In the previous recipe, you had created a project repository on the <strong><span class="KeyWordPACKT">GitHub</span></strong> cloud <strong><span class="KeyWordPACKT">Server</span></strong>, and then cloned it to your local machine. You then added the files from a (closed) Unity application to the <span>cloned project repository folder</span><span>. These new files were added and committed to a new</span> <strong>snapshot</strong> <span>of the folder, and the updated contents</span> <span class="ItalicsPACKT">pushed</span> <span>up to the</span> <strong><span class="KeyWordPACKT">GitHu</span><span class="KeyWordPACKT">b</span> <span class="KeyWordPACKT">Server</span></strong><span>.</span></p>
<p>Due to the way Unity works, it creates a new folder when a new project is created. Therefore, we had to turn the contents of this the Unity project folder into a <strong><span class="KeyWordPACKT">Git</span></strong> repository. There are two ways to do this:</p>
<ol>
<li>Copy the files from the Unity project to a cloned <strong><span class="KeyWordPACKT">GitHub</span></strong> repository (so it has remote links set up for pushing back to the <strong><span class="KeyWordPACKT">GitHub</span></strong> server).</li>
<li>Make the Unity project folder into a <strong><span class="KeyWordPACKT">Git</span></strong> repository, and then either link it to a remote <strong><span class="KeyWordPACKT">GitHub</span></strong> repository, or push the folder contents to the <strong><span class="KeyWordPACKT">GitHub</span></strong> server and create a new online repository at that point in time</li>
</ol>
<p>For people new to Git and GitHub, the first procedure, which we followed in this recipe, is probably the simplest to understand. Also, it is the easiest to fix if something goes wrong <span>–</span> since a new GitHub repo can be created, cloned to the local machine, and the Unity project files copied there, and then pushed up to GitHub (and the old repo deleted), by pretty much following the same set of steps.</p>
<p>Interestingly, the second approach is recommended when using the <strong><span class="KeyWordPACKT">Open Source</span> <span class="ScreenTextPACKT">GitHub</span> <span class="ScreenTextPACKT">for Unity</span></strong> package <span>–</span> which is explored in the next recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Unity project version-control using GitHub for Unity</h1>
                </header>
            
            <article>
                
<p><strong><span class="KeyWordPACKT">GitHub</span></strong> has released an <strong><span class="KeyWordPACKT">Open Source</span></strong> tool integrating <strong><span class="KeyWordPACKT">Git</span></strong> and <strong><span class="KeyWordPACKT">GitHub</span></strong> into Unity, which we'll explore in this recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You will need <strong><span class="KeyWordPACKT">Git</span></strong> installed at the command line on your computer:</p>
<ul>
<li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" target="_blank"><span class="URLPACKT">https://git-scm.com/book/en/v2/Getting-Started-Installing-Git</span></a></li>
</ul>
<p>You may need to install <span class="KeyWordPACKT">Git LFS</span> (Large File Storage) for the <span class="ScreenTextPACKT">GitHub for Unity</span> package to work correctly:</p>
<ul>
<li><a href="https://git-lfs.github.com/" target="_blank"><span class="URLPACKT">https://git-lfs.github.com/</span></a></li>
</ul>
<div class="packt_infobox">You may wish to create a .gitattributes file to specify which files should be used with Git <strong><span>Large File Storage</span></strong><span> (<strong>LFS)</strong>. For some guidance, check out Rob Reilly's useful article, <em>How to Git With Unity</em>: </span><a href="https://robots.thoughtbot.com/how-to-git-with-unity">https://robots.thoughtbot.com/how-to-git-with-unity</a>.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>To manage Unity project version-control using GitHUb for Unity, do the following:</p>
<ol>
<li>Start a new Unity project.</li>
<li>Open the <span class="packt_screen">Asset Store</span> panel, choose menu: <span class="ScreenTextPACKT"><span class="packt_screen">Window</span> | <span class="packt_screen">General</span> | <span class="packt_screen">Asset Store</span></span>.</li>
</ol>
<ol start="3">
<li>In the <span class="KeyWordPACKT"><span class="packt_screen">Asset Store</span></span>, search for <span class="ScreenTextPACKT"><span class="packt_screen">GitHub for Unity</span></span>, download and import this into your project:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/0b96b117-9240-46e5-8557-9cbd4d0926d2.png" style="width:33.00em;height:6.00em;"/></p>
<ol start="4">
<li>If there is a popup about a newer version, accept it and download the newer version. This will download as a Unity package (probably in your <span class="ScreenTextPACKT"><span class="packt_screen">Downloads</span></span> folder), which you can then import into your Unity project.</li>
<li>Once imported, you should see a <span class="ScreenTextPACKT"><span class="packt_screen">Plugins</span> | <span class="packt_screen">GitHub</span></span> folder in your <span class="KeyWordPACKT"><span class="packt_screen">Project</span></span> panel. You will also now see two new items on your <span class="KeyWordPACKT">Window</span> menu, for <span class="ScreenTextPACKT"><span class="packt_screen">GitHub</span></span> and <span class="ScreenTextPACKT"><span class="packt_screen">GitHub Command Line</span></span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/79ae288e-f6f7-4110-b7cf-b31f544d7342.png" style="width:39.17em;height:10.67em;"/></p>
<ol start="6">
<li>Choosing the <span class="ScreenTextPACKT"><span class="packt_screen">Window</span> | <span class="packt_screen">GitHub Command Line</span></span> allows you to use the <span class="KeyWordPACKT"><span class="packt_screen">Git</span></span> commands listed in the previous two recipes (it will open at the directory of your Unity project).</li>
<li>Choosing the <span class="ScreenTextPACKT"><span class="packt_screen">Window</span> | <span class="packt_screen">GitHub</span></span> menu item will result in a <span class="packt_screen"><span class="KeyWordPACKT">GitHub</span></span> panel being displayed. Initially this project is not a <strong><span class="KeyWordPACKT">Git</span></strong> repository, so it will need to be initialized as a new <strong><span class="KeyWordPACKT">Git</span></strong> project, which can be performed by clicking the <span class="ScreenTextPACKT"><span class="packt_screen">Initialize as a git repository for this project</span></span> button:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/72052137-e4b6-425b-ac20-bd79eda27d15.png" style="width:19.33em;height:10.92em;"/></p>
<ol start="8">
<li>You will be able to see that there is one <span class="ItalicsPACKT">commit</span>, for the snapshot for this initialization of the <span class="KeyWordPACKT"><span class="packt_screen">Git</span></span> version-control-tracking for this project:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/b4670f6e-6197-43b0-89f5-2c8629907734.png" style="width:23.33em;height:12.00em;"/></p>
<ol start="9">
<li>Sign in with your <strong><span class="KeyWordPACKT">GitHub</span></strong> username and password:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/2bdadd82-34f2-4aac-9c67-c1420cd3e117.png" style="width:21.33em;height:9.92em;"/></p>
<ol start="10">
<li>Open a web browser, log in to your <strong><span class="KeyWordPACKT">GitHub</span></strong> account, and create a new empty repository (with no extra files,<span> that is,</span> no <kbd><span class="ScreenTextPACKT">README</span></kbd>, <kbd><span class="ScreenTextPACKT">.gitignore</span></kbd>, or <kbd><span class="ScreenTextPACKT">Licence</span></kbd>):</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/75622bc4-371c-4f7e-9d58-b54b988d880a.png" style="width:29.33em;height:5.50em;"/></p>
<ol start="11">
<li>Copy the URL for the new repository onto your clipboard:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/88730c9a-09ed-43cd-853e-f95af23dd5eb.png"/></p>
<ol start="12">
<li>Back in Unity, for the <strong><span class="KeyWordPACKT">GitHub</span></strong> panel, click the <span class="ScreenTextPACKT"><span class="packt_screen">Settings</span></span> button, paste the URL for the <kbd><span class="ScreenTextPACKT">Remote: origin</span></kbd> property, and click the <span class="ScreenTextPACKT"><span class="packt_screen">Save</span></span> <span class="packt_screen">Repository</span> button to save this change. Your Unity project is now linked to the remote <strong><span class="KeyWordPACKT">GitHub</span></strong> cloud repository:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/e2d33ec0-d421-44e5-a526-d2aa31f6bcca.png" style="width:35.08em;height:14.58em;"/></p>
<ol start="13">
<li>You may now <span class="ItalicsPACKT">commit</span> and <span class="ItalicsPACKT">push</span> changes from your Unity project up to <strong><span class="KeyWordPACKT">GitHub</span></strong>.</li>
<li>Add some new assets (such as a new C# script and a <strong><span class="KeyWordPACKT">Material</span></strong> named <strong><span class="ScreenTextPACKT">m_red</span></strong>). Click the <span class="ScreenTextPACKT"><span class="packt_screen">Changes</span></span> tab in the <span class="KeyWordPACKT"><span class="packt_screen">GitHu</span>b</span> panel, ensure the complete <kbd><span class="KeyWordPACKT">Assets</span></kbd> folder is checked (and all its contents), write a brief summary of the changes, and click the <span class="ScreenTextPACKT"><span class="packt_screen">Commit to [master]</span></span> button:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/e1083a39-f50d-43be-aa50-5ab836d1f5bc.png" style="width:36.33em;height:20.92em;"/></p>
<p class="mce-root"/>
<ol start="15">
<li>You now have a commited snapshot of the new Unity project contents on your computer. Push this new committed snapshot up to the <strong><span class="KeyWordPACKT">GitHub</span></strong> server by clicking the <span class="ScreenTextPACKT"><span class="packt_screen">Push (1)</span></span> button. The (1) indicates that there is one new commited snapshot locally that has not yet been pushed, that is, the local machine is 1 commit ahead of the master on the <strong><span class="KeyWordPACKT">GitHub</span> <span class="KeyWordPACKT">Server</span></strong>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/ae7cd615-2616-4ad0-ac0f-bb2869dfc75e.png" style="width:32.25em;height:13.50em;"/></p>
<ol start="16">
<li>Visit the repository on <strong><span class="KeyWordPACKT">GitHub</span></strong> in your web browser, and you'll see the new committed snapshot of the Unity project contents have been pushed up from your computer to the <span class="KeyWordPACKT"><strong>GitHub</strong></span> cloud <strong><span class="KeyWordPACKT">Servers</span></strong>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/5aef0fb7-796c-48d4-9559-34a0bc770be6.png"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>The <strong><span class="ScreenTextPACKT">GitHub for Unity</span></strong> package adds a special panel with functionality for the following <strong><span class="KeyWordPACKT">Git</span></strong>/<strong><span class="KeyWordPACKT">GitHub</span></strong> actions:</p>
<ul>
<li>Initializing a new <strong><span class="KeyWordPACKT">Git</span></strong> project repository for the current Unity Project</li>
<li>Signing in with your <strong><span class="KeyWordPACKT">GitHub</span></strong> username and password credentials</li>
<li>Linking your Unity project's <strong><span class="KeyWordPACKT">Git</span></strong> history to a remote <strong><span class="KeyWordPACKT">GitHub</span></strong> online repository</li>
<li>Committing a snapshot of the changes in the Unity project you wish to record</li>
<li>Pushing committed changes to the remove <strong><span class="KeyWordPACKT">GitHub</span></strong> online repository</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>Here are some ways to go further with this recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Further reading about GitHub for Unity</h1>
                </header>
            
            <article>
                
<p>Check out the following links for more information:</p>
<ul>
<li>The project website: <a href="https://unity.github.com/" target="_blank"><span class="URLPACKT">https://unity.github.com/</span></a></li>
<li>The Quick Start guide: <a href="https://github.com/github-for-unity/Unity/blob/master/docs/using/quick-guide.md" target="_blank"><span class="URLPACKT">https://github.com/github-for-unity/Unity/blob/master/docs/using/quick-guide.md</span></a></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Pulling down updates from other developers</h1>
                </header>
            
            <article>
                
<p>The <strong><span class="KeyWordPACKT">GitHub</span></strong> plugin also provides the feature of being able to <span class="ItalicsPACKT">pull</span> down changes from the remote <strong><span class="KeyWordPACKT">GitHub</span></strong> repository to your computer (useful if you are working on multiple computers, or a fellow game developer is helping add features to your game).</p>
<div class="packt_infobox">If you are working with other game developers, it is very useful to learn about <span class="KeyWordPACKT">Git</span> branches. Also, before starting work on a new feature, perform a <span class="ItalicsPACKT">pull</span> to ensure you are then working with the most up-to-date version of the project.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Unity Collaborate from Unity Technologies</h1>
                </header>
            
            <article>
                
<p>Although <strong><span class="KeyWordPACKT">Git</span></strong> and <strong><span class="KeyWordPACKT">GitHub</span></strong> are used for many Unity projects, they are general-purpose version-control technologies. Unity Technologies offers its own online system for developers and teams to collaboratively work on the same Unity projects, however this is a feature that is no longer in the free Unity licence plan.</p>
<p class="mce-root"/>
<p>Learn more about <strong><span class="KeyWordPACKT">Unity Collaborate</span></strong> and <strong><span class="KeyWordPACKT">Unity Teams</span></strong> on the Unity website:</p>
<ul>
<li><a href="https://unity3d.com/unity/features/collaborate" target="_blank"><span class="ScreenTextPACKT">https://unity3d.com/unity/features/collaborate</span></a></li>
<li><a href="https://unity3d.com/teams" target="_blank"><span class="ScreenTextPACKT">https://unity3d.com/teams</span></a></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Preventing your game from running on unknown servers</h1>
                </header>
            
            <article>
                
<p>After all the hard work you've had to go through to complete your web game project, it wouldn't be fair if it ended up generating traffic and income on someone else's website. In this recipe, we will create a script that prevents the main game menu from showing up unless it's hosted by an authorized <strong><span class="KeyWordPACKT">Server</span></strong>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>For this recipe, you will need access to a webspace provider where you can host the game. However, you can test locally using a localhost web <strong><span class="KeyWordPACKT">Server</span></strong>, such as the built-in PHP one, or an AMP Apache or Nginx web server.</p>
<p>You also will need to have installed the Unity <strong><span class="KeyWordPACKT">WebGL</span></strong> build target.</p>
<p>NOTE: At the time of writing (summer 2018), for macOS computers, there is still an issue adding the <strong><span class="KeyWordPACKT">WebGL</span></strong> package if it is not included at the time of original installation via Unity Hub. The macOS WebGL package requires the Unity application to be in the Applications | Unity folder. When installed via Unity Hub, it is actually in <span class="ScreenTextPACKT"><span class="packt_screen">Applications</span> | <span class="packt_screen">Unity</span> | <span class="packt_screen">Hub</span> | <span class="packt_screen">Editor</span> | <span class="packt_screen">2018.2.2f1</span></span>. If you have multiple versions, they will each be in the Editor folder. The solution for installing WebGL for a particular Unity version is to temporarily move the <span class="packt_screen">Applications</span> | <span class="packt_screen">Unity</span> | <span class="packt_screen">Hub</span> folder somewhere else (such as the desktop), and then to copy (or temporarily move) the contents of your Unity version folder (for me it was <span class="ScreenTextPACKT">2018 .2.2f1</span>) into <span class="ScreenTextPACKT">Applications | Unity.</span> Then you can run the <span class="KeyWordPACKT">WebGL</span> package installer successfully and it will add to the <kbd><span class="ScreenTextPACKT">PlaybackEngines</span></kbd> folder in <span class="ScreenTextPACKT">Applications | Unity</span>. Finally, you can move the Unity applications back where they were for <strong><span class="ScreenTextPACKT">Unity Hub</span></strong> to continue working.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>To prevent your web game from being pirated, follow these steps:</p>
<ol>
<li>From the <span class="KeyWordPACKT"><span class="packt_screen">Hierarchy</span></span>, create a <strong><span class="ScreenTextPACKT">UI Text</span></strong> GameObject named <span class="ScreenTextPACKT"><span class="packt_screen">Text-loading-warning</span></span>, choosing menu: <span class="packt_screen">Create</span> <span class="ScreenTextPACKT">| <span class="packt_screen">UI</span> | <span class="packt_screen">Text</span></span>.</li>
<li>In the Inspector for the <strong><span class="ScreenTextPACKT">Text</span></strong> component enter <span class="ScreenTextPACKT"><span class="packt_screen">Loading...</span></span></li>
<li>Set the properties for the <strong><span class="ScreenTextPACKT">Text (Script)</span></strong> component in the <strong><span class="KeyWordPACKT">Inspector</span></strong> set the <strong><span class="ScreenTextPACKT">Horizontal</span></strong> and <strong><span class="ScreenTextPACKT">Vertical Overflow</span></strong> to <strong><span class="ScreenTextPACKT">Overflow</span></strong>, and use the <span class="ScreenTextPACKT">Rect Transform</span> to align the object in the center of the <strong><span class="KeyWordPACKT">Scene</span></strong>. Make the font size nice and big (50).</li>
<li>Create a new C# script class named <kbd><span class="ScreenTextPACKT">BlockAccess</span></kbd>, and add an instance object as a component to the <strong><span class="ScreenTextPACKT">Text-loading-warning</span></strong> GameObject:</li>
</ol>
<pre class="SourceCode" style="padding-left: 30px">    using UnityEngine;<br/>     using System.Collections;<br/>     using UnityEngine.UI;<br/>     using UnityEngine.SceneManagement;<br/> <br/>     public class BlockAccess : MonoBehaviour {<br/>         public Text textUI;<br/>         public string warning;<br/>         public bool fullURL = true;<br/>         public string[] domainList;<br/> <br/>         private void Start() {<br/>             Text scoreText = GetComponent&lt;Text&gt;();<br/>             if (Application.platform == RuntimePlatform.WebGLPlayer)<br/>             {<br/>                 string url = Application.absoluteURL;<br/>                 if (LegalCopy(url))<br/>                     LoadNextScene();<br/>                 else<br/>                     textUI.text = warning;<br/>             }<br/>         }<br/> <br/>         private bool LegalCopy(string Url) {<br/>            if (Application.isEditor)<br/>             return true;<br/> <br/>             for (int i = 0; i &lt; domainList.Length; i++){<br/>                 if (Application.absoluteURL == domainList[i])<br/>                     return true;<br/> <br/>                 if (Application.absoluteURL.Contains(domainList[i]) &amp;&amp; !fullURL)<br/>                     return true;<br/>             }<br/> <br/>             return false;<br/>         }<br/> <br/>         private void LoadNextScene() {<br/>             int currentSceneIndex = SceneManager.GetActiveScene().buildIndex;<br/>             int nextSceneIndex = currentSceneIndex + 1;<br/>             SceneManager.LoadScene(nextSceneIndex);<br/>         }<br/>    }</pre>
<ol start="5">
<li>From the <span class="packt_screen">Inspector</span>, leave the <span class="ScreenTextPACKT"><span class="packt_screen">Full URL</span></span> option checked, increase <span class="ScreenTextPACKT"><span class="packt_screen">Size</span></span> of <span class="packt_screen"><span class="ScreenTextPACKT">Domain</span> <span class="ScreenTextPACKT">List</span></span> to <kbd>1</kbd>, and fill out <span class="ScreenTextPACKT">Element 0</span> with the complete URL for your game. In the <span class="ScreenTextPACKT">Warning</span> field, type in "<span class="ScreenTextPACKT">This is not a valid game copy":</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/c255da69-1d7c-416a-8c5a-b856de5fa159.png"/></p>
<ol start="6">
<li>Save your <span class="KeyWordPACKT"><span class="packt_screen">Scene</span></span> as <kbd><span class="ScreenTextPACKT">scene0-loading</span></kbd>. Add this <span class="KeyWordPACKT"><span class="packt_screen">Scene</span></span> to the Build (menu: <span class="ScreenTextPACKT"><span class="packt_screen">File</span> | <span class="packt_screen">Build Settings...</span></span>). It should be the first one, with index 0.</li>
<li>Create a new <span class="KeyWordPACKT">Scene,</span> change its <span class="ScreenTextPACKT">Main Camera</span> background color to black, and add a <span class="ScreenTextPACKT">UI Text</span> message saying <span class="ScreenTextPACKT">Game would play now</span>.</li>
<li>Save this second <span class="ScreenTextPACKT"><span class="packt_screen">Scene</span></span> as <kbd><span class="ScreenTextPACKT">scene1-gamePlaying</span></kbd>. Add this <span class="KeyWordPACKT">Scene</span> to the Build <span>–</span> it should be the second one, with index 1.</li>
</ol>
<ol start="9">
<li>Let's build our <strong><span class="KeyWordPACKT">WebGL</span></strong> files. Again, open the <span class="ScreenTextPACKT"><span class="packt_screen">Build Settings</span></span> panel, and this time ensure that the deployment platform is <span class="KeyWordPACKT">WebGL</span>. Click the <span class="ScreenTextPACKT">Build</span> button, and choose the name and folder to be the location for your built files:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/1315da9d-4162-4abe-b3ea-df0b2981d554.png"/></p>
<ol start="10">
<li>You should now have a folder containing an HTML file (<kbd><span class="ScreenTextPACKT">index.html</span></kbd>) and the <kbd><span class="ScreenTextPACKT">Build</span></kbd> and <kbd><span class="ScreenTextPACKT">TemplateData</span></kbd> folders:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/cdccb393-a549-4fe7-a2da-4b2f22b63848.png"/></p>
<ol start="11">
<li>Copy these folder contents to the public folder on your web <strong><span class="KeyWordPACKT">Server</span></strong>, and use the browser to access the web page through the web <strong><span class="KeyWordPACKT">Server</span></strong>.</li>
<li>If your URL is in the list, you'll see the game play (possible with a short view of the <strong><span class="ScreenTextPACKT">Loading...</span> <span class="KeyWordPACKT">Scene</span> message</strong>). If your URL is not in the list, you'll see the <strong><span class="ScreenTextPACKT">This is not a valid game copy</span></strong> message, and the game will not start playing.</li>
</ol>
<div class="packt_infobox">If you try to open the file using your web browser, you will probably get a <span class="KeyWordPACKT">WebGL</span> not working error. You must be visiting the HTML page through a web server (such as <kbd><span class="URLPACKT">localhost:8000</span></kbd> or from your publicly-hosted page).</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>As soon as the <strong><span class="KeyWordPACKT">Scene</span></strong> starts, the script compares the actual URL of the location of the running Unity-generated <strong><span class="KeyWordPACKT">WebGL</span></strong> webpage to the ones listed in the <strong><span class="ScreenTextPACKT">BlockAccess</span></strong> scripted component. If they don't match, the next level in the build is not loaded and a message appears on the screen. If they do match, the next scene from the build list will be loaded.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>Here are some ways to go further with this recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Enabling WebGL in Google Chrome</h1>
                </header>
            
            <article>
                
<p>For this recipe, you'll need <strong><span class="KeyWordPACKT">WebGL</span></strong> enabled in your web browser. At present, our test browser (Google Chrome) has WebGL disabled by default. To enabled <strong><span class="KeyWordPACKT">WebGL</span></strong> in Google Chrome, do the following:</p>
<ol>
<li>Open Google Chrome and enter the <kbd><span class="URLPACKT">chrome://flags</span></kbd> URL.</li>
<li>Locate the <strong><span class="ScreenTextPACKT">Web GL Draft Extensions</span></strong> (search for <strong><span class="ScreenTextPACKT">WebGL</span></strong>).</li>
<li>Use the drop-down menu to change from <strong><span class="ScreenTextPACKT">Disabled</span></strong> to <strong><span class="ScreenTextPACKT">Enabled.</span></strong></li>
<li>Click the <strong><span class="ScreenTextPACKT">RELAUNCH NOW</span></strong> button to restart the application with the new settings as active:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/45b908bc-2706-44a3-913c-b7916b7dc7d6.png" style="width:29.58em;height:17.92em;"/></p>
<ol start="5">
<li>You should now be able to use web pages with embedded <strong><span class="KeyWordPACKT">WebGL</span></strong> content.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Improving security by using full URLs in your domain list</h1>
                </header>
            
            <article>
                
<p>Your game will be more secure if you fill out the domain list with complete URLs, such as <a href="http://www.myDomain.com/unitygame/index.html">http://www.myDomain.com/unitygame/index.html</a>, rather than just the main domain, such as <span class="URLPACKT">www.myDomain.com</span>. In fact, it's recommended that you leave the Full URL option selected so that your game won't be stolen and published under a URL such as <span class="URLPACKT">www.stolenGames.com/yourgame.html?www.myDomain.com</span>.</p>


            </article>

            
        </section>
    </body></html>