<html><head></head><body>
  <div><h1 class="chapterNumber">3</h1>
    <h1 id="_idParaDest-42" class="chapterTitle">Grayboxing with Terrain and ProBuilder</h1>
    <p class="normal">Now that we’ve grasped all the necessary concepts to use Unity, let’s start designing our first level. The idea in this chapter is to learn how to use Terrain Tools to create the landscape of our game and then use ProBuilder to create the 3D mesh of the base with greater detail than using cubes. At the end of the chapter, you will be able to create a prototype of any kind of scene and try out your idea before actually implementing it with final graphics.</p>
    <p class="normal">Specifically, we will examine the following concepts in this chapter: </p>
    <ul>
      <li class="bulletList">Defining our game concept</li>
      <li class="bulletList">Creating a landscape with Terrain </li>
      <li class="bulletList">Creating shapes with ProBuilder</li>
    </ul>
    <p class="normal">Let’s start by talking about our game concept, which will help us draft the first level environment.</p>
    <h1 id="_idParaDest-43" class="heading-1">Defining our game concept</h1>
    <p class="normal">Before even adding the first cube to our scene, it is good to have an idea of what we are going to create, as we <a id="_idIndexMarker114"/>will need a basic concept of our game to start designing the first level. Throughout this book, we will be creating a shooter game, in which the player will be fighting against waves of enemies trying to destroy the player’s base. </p>
    <p class="normal">This base will be a complex in a (not so) secret location bordered by mountains:</p>
    <figure class="mediaobject"><img src="img/B18585_03_01.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.1: Our finished game</p>
    <p class="normal">We will be defining the mechanics of our game as we progress through the book, but with this <a id="_idIndexMarker115"/>basic high-level concept of the game we can start thinking about how to create a mountainous landscape and a placeholder player’s base to start.</p>
    <p class="normal">With that in mind, in the next section of this chapter we will learn how to use Unity’s Terrain Tools to create our scene’s landscape.</p>
    <h1 id="_idParaDest-44" class="heading-1">Creating a landscape with Terrain</h1>
    <p class="normal">So far, we have used cubes to generate our level prototype, but we also learned that those shapes <a id="_idIndexMarker116"/>sometimes cannot represent all possible objects we could need. Imagine something irregular, such as a full terrain with hills, canyons, and rivers. This would be a nightmare to create using cubes given the irregular shapes you find in the terrain. Another option would be to use 3D modeling software, but the problem with that is that the generated model will be so big and so detailed that it won’t perform well, even on high-end PCs. In this scenario, we need to learn how to use Unity’s Terrain system, which we will do in this first section of the chapter.</p>
    <p class="normal">In this section, we will cover the following concepts related to terrains:</p>
    <ul>
      <li class="bulletList">Discussing Height Maps</li>
      <li class="bulletList">Creating and configuring Height Maps</li>
      <li class="bulletList">Authoring Height Maps</li>
      <li class="bulletList">Adding Height Map details</li>
    </ul>
    <p class="normal">Let’s start by talking about Height Maps, whose textures help us define the heights of our terrain.</p>
    <h2 id="_idParaDest-45" class="heading-2">Discussing Height Maps</h2>
    <p class="normal">If we create a giant area of the game with hills, canyons, craters, valleys, and rivers using regular 3D <a id="_idIndexMarker117"/>modeling tools, we will have a problem in that we will use fully detailed models for objects at all possible distances, thus wasting resources on rendering details that we won’t see when the object is far away. We will see lots of parts of the terrain from a great distance, so this is a serious issue.</p>
    <p class="normal">Unity Terrain Tools uses a technique <a id="_idIndexMarker118"/>called Height Maps to generate the terrain in a performant and dynamic way. Instead of generating large 3D models for the whole terrain, it uses an image called a <strong class="keyWord">Height Map</strong>, which looks like a top-down black and white photo of the terrain.</p>
    <p class="normal">In the following image, you can see a black and white top-down view of a region of Scotland, with white being higher and black being lower:</p>
    <figure class="mediaobject"><img src="img/B18585_03_02.png" alt="Image result for height map"/></figure>
    <p class="packt_figref">Figure 3.2: Scotland’s Height Map</p>
    <p class="normal">In the preceding image, you can easily spot the peaks of the mountains by looking for the whitest areas of the image. Everything below sea level becomes black, while anything in the middle uses gradients of gray, representing different heights between the minimum and maximum heights. The idea is that each pixel of the image determines the height of that specific area of the terrain.</p>
    <p class="normal">Unity Terrain Tools can automatically generate a 3D mesh from that image, saving us the hard drive space of having full 3D models of that terrain. Also, Unity will create the terrain as we move, generating high-detail models for nearby areas and low-detail models for faraway areas, making it a performant solution.</p>
    <p class="normal">In the following image, you can see the mesh that was generated for the terrain. You can appreciate <a id="_idIndexMarker119"/>that the nearer parts of the terrain have more polygons than further away parts:</p>
    <figure class="mediaobject"><img src="img/B18585_03_03.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.3: Height Map generated mesh</p>
    <p class="normal">Take into account that this <a id="_idIndexMarker120"/>technology has its cons, such as the time it takes for Unity to generate those 3D models while we play and the inability to create caves, but for now, that’s not a problem for us.</p>
    <p class="normal">Now that we know what a Height Map is, let’s see how we can use Unity Terrain Tools to create our own Height Maps.</p>
    <h2 id="_idParaDest-46" class="heading-2">Creating and configuring Height Maps</h2>
    <p class="normal">If you <a id="_idIndexMarker121"/>click on <strong class="screenText">GameObject | 3D Object | Terrain</strong>, you will <a id="_idIndexMarker122"/>see a giant plane appear on your <a id="_idIndexMarker123"/>scene, and a <strong class="screenText">Terrain</strong> object appears on your Hierarchy window. That’s <a id="_idIndexMarker124"/>our terrain, and it is plain because its Height Map starts all black, so no height whatsoever is in its initial state. </p>
    <p class="normal">In the following image, you can see what a brand-new <strong class="screenText">Terrain</strong> object looks like:</p>
    <figure class="mediaobject"><img src="img/B18585_03_04.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.4: Terrain with no heights painted yet</p>
    <p class="normal">Before you start editing this Terrain, you must configure different settings such as the size and <a id="_idIndexMarker125"/>resolution of the Terrain’s Height Map, and that <a id="_idIndexMarker126"/>depends on what you are going to <a id="_idIndexMarker127"/>do with it. This is not the same as generating a whole world. Our <a id="_idIndexMarker128"/>game will feature the player’s base, which they will defend, so the terrain will be small. In this case, an area that’s 200 x 200 meters in size surrounded by mountains will be enough.</p>
    <p class="normal">In order to configure our terrain for those requirements, we need to do the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Select <strong class="screenText">Terrain</strong> from the <strong class="screenText">Hierarchy</strong> or <strong class="screenText">Scene</strong> window.</li>
      <li class="numberedList">Look at the <strong class="screenText">Inspector</strong> for the <strong class="screenText">Terrain</strong> component and expand it if it is collapsed.</li>
      <li class="numberedList">Click on the mountain and gear icon (the furthest right option) to switch to configuration mode. In the following screenshot, you can see where that button is located:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_05.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.5: Terrain Settings button</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Look <a id="_idIndexMarker129"/>for the <strong class="screenText">Mesh Resolution</strong> (<strong class="screenText">On Terrain Data</strong>) section.</li>
      <li class="numberedList">Change <strong class="screenText">Terrain Width</strong> and <strong class="screenText">Terrain Length</strong> to <code class="inlineCode">200</code> in both settings. This will say that <a id="_idIndexMarker130"/>the size of our terrain is going to be 200 x 200 meters.</li>
      <li class="numberedList"><strong class="screenText">Terrain Height</strong> determines the maximum height possible. The white areas of our Height <a id="_idIndexMarker131"/>Map are going to be that size. We can <a id="_idIndexMarker132"/>reduce it to <code class="inlineCode">500</code> just to limit the maximum peak of our mountains:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_06.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.6: Terrain resolution settings</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">Look for the <strong class="screenText">Texture Resolutions </strong>(<strong class="screenText">On Terrain Data</strong>) section.</li>
      <li class="numberedList">Change <strong class="screenText">Heightmap Resolution</strong> to <strong class="screenText">257 x 257</strong>:</li>
    </ol>
    <p class="packt_figref"><img src="img/B18585_03_07.png" alt=""/></p>
    <p class="packt_figref">Figure 3.7: Height Map resolution settings</p>
    <div><p class="normal"><strong class="screenText">Heightmap Resolution</strong> is the size of the Height Map image that will hold the heights of the different parts of the terrain. Using a resolution of 257 x 257 in our 200 x 200-meter terrain means that each square meter in the terrain will be covered by a little bit more than 1 pixel of the Height Map. The higher the resolution per square meter, the greater detail you can draw in that area size. Usually, terrain features are big, so having more than 1 pixel per square meter is generally a waste of resources. Find the smallest resolution you can have that allows you to create the details you need.</p>
    </div>
    <p class="normal">Another initial setting you will want to set is the initial terrain height. By default, this is 0, so you <a id="_idIndexMarker133"/>can start painting heights from the bottom part, but <a id="_idIndexMarker134"/>this way, you can’t make holes in the <a id="_idIndexMarker135"/>terrain because it’s already at its lowest point. Setting up <a id="_idIndexMarker136"/>a little initial height allows you to paint river paths and pits in case you need them. </p>
    <p class="normal">In order to do so, do the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Select our <strong class="screenText">Terrain</strong> in the <strong class="screenText">Hierarchy</strong> panel.</li>
      <li class="numberedList">Click on the <strong class="screenText">Paint Terrain</strong> button (the second button).</li>
      <li class="numberedList">Set the dropdown to <strong class="screenText">Set Height</strong> if it’s not already there.</li>
      <li class="numberedList">Set the <strong class="screenText">Height</strong> property to <code class="inlineCode">50</code>. This will state we want all the terrain to start at <code class="inlineCode">50</code> meters in height, allowing us to make holes with a maximum depth of <code class="inlineCode">50</code> meters:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_08.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.8: Set Height Terrain tool location</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Click the <strong class="screenText">Flatten All</strong> button. You will see all the terrain has been raised to the <code class="inlineCode">50</code> meters <a id="_idIndexMarker137"/>we specified. This leaves <a id="_idIndexMarker138"/>us with 450 more meters <a id="_idIndexMarker139"/>to go up, based on the maximum of 500 meters <a id="_idIndexMarker140"/>we specified earlier.</li>
    </ol>
    <p class="normal">Now that we have properly configured our Height Map, let’s start editing it.</p>
    <h2 id="_idParaDest-47" class="heading-2">Authoring Height Maps</h2>
    <p class="normal">Remember that the Height Map is just an image of the heights, so in order to edit it, we need <a id="_idIndexMarker141"/>to paint the heights in that image. Luckily, Unity has <a id="_idIndexMarker142"/>tools that allow us to edit the terrain directly in the editor and see the results of the modified heights directly. In order to do this, we must follow these steps:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Select our <strong class="screenText">Terrain</strong> in the <strong class="screenText">Hierarchy</strong> panel.</li>
      <li class="numberedList">Click the <strong class="screenText">Paint Terrain</strong> button (the second button, the same as in the previous section).</li>
      <li class="numberedList">Set the dropdown to <strong class="screenText">Raise or Lower Terrain</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_09.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.9: Raise or Lower Terrain tool location</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Select the second brush in the Brushes selector. This brush has blurred borders <a id="_idIndexMarker143"/>to allow us to create softer heights.</li>
      <li class="numberedList">Set <strong class="screenText">Brush Size</strong> to <strong class="screenText">30</strong> so that we can create heights that span 30-meter areas. If you <a id="_idIndexMarker144"/>want to create subtler details, you can reduce this number.</li>
      <li class="numberedList">Set <strong class="screenText">Opacity</strong> to <strong class="screenText">10</strong> to reduce the amount of height we paint per second or click:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_10.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.10: Smooth edges brush</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">Now, if you move the mouse in the <strong class="screenText">Scene</strong> view, you will see a little preview of the height you will paint if you click on that area. Maybe you will need to navigate closer to the terrain to see it in detail:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_11.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.11: Previsualization of the area to raise the terrain</p>
    <div><p class="normal">That checked pattern you can see allows you to see the actual size of the objects you are editing. Each cell represents a square meter. Remember that having a reference to see the actual size of the objects you are editing helps to prevent you from creating terrain features that are too big or too small. Maybe you can put in other kinds of references, such as a big cube with accurate sizes representing a building to get a notion of the size of the mountain or lake you are creating. Remember that the cube has a default size of 1 x 1 x 1 meters, so scaling to 10,10,10 will give you a cube of 10 x 10 x 10 meters.</p>
    </div>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="8">Hold, left-click, and <a id="_idIndexMarker145"/>drag the cursor over the terrain to <a id="_idIndexMarker146"/>start painting your terrain heights. Remember that you can press <em class="keystroke">Ctrl</em> + <em class="keystroke">Z</em> (<em class="keystroke">Command</em><em class="italic"> </em>+ <em class="keystroke">Z</em> on Mac) to reverse any undesired change.</li>
      <li class="numberedList">Try to paint the mountains all around the borders of our area, which will represent the background hills of our base:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_12.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.12: Painted mountains around the edges of the terrain</p>
    <p class="normal">We now <a id="_idIndexMarker147"/>have decent starter hills around our future base. We can <a id="_idIndexMarker148"/>also draw a moat around our future base. To do so, follow these steps:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Place a cube with a scale of <code class="inlineCode">50,10,50</code> in the middle of the terrain. This will act as a placeholder for the base we are going to create:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_13.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.13: Placeholder cube for the base area</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Select <strong class="screenText">Terrain</strong> and the <strong class="screenText">Brush</strong> button once more.</li>
      <li class="numberedList">Reduce <strong class="screenText">Brush Size</strong> to <code class="inlineCode">10</code>.</li>
      <li class="numberedList">Holding the <em class="keystroke">Shift</em> key, left-click and drag the mouse over the terrain to paint the basin around our base placeholder. Doing this will lower the terrain instead of raising it:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_14.png" alt=""/> </figure>
    <p class="packt_figref">Figure 3.14: Moat around our placeholder base</p>
    <p class="normal">Now, we have <a id="_idIndexMarker149"/>a simple but good starter terrain that gives us a basic <a id="_idIndexMarker150"/>idea of how our base and its surroundings will look. Before moving on, we will apply some finer details to make our terrain look a little bit better. In the next section, we will discuss how to simulate terrain erosion with different tools.</p>
    <h2 id="_idParaDest-48" class="heading-2">Adding Height Map details</h2>
    <p class="normal">In the previous section, we created a rough outline of the terrain. If you want to make it look a <a id="_idIndexMarker151"/>little bit more realistic, then you need to <a id="_idIndexMarker152"/>start painting lots of tiny details here and there. Usually, this is done later in the level design process, but let’s take a look now since we are exploring Terrain Tools. Right now, our mountains look very smooth. In real life, they are generally sharper, so let’s improve that:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Select the <strong class="screenText">Terrain</strong> and click the <strong class="screenText">Brush</strong> button as in the previous sections.</li>
      <li class="numberedList">Set the dropdown to <strong class="screenText">Raise or Lower Terrain</strong> if it’s not already set.</li>
      <li class="numberedList">Pick the fifth brush, as shown in <em class="italic">Figure 3.15</em>. This brush has an irregular shape so that we can paint a little bit of noise here and there.</li>
      <li class="numberedList">Set <strong class="screenText">Brush Size</strong> to <code class="inlineCode">50</code> so that we can cover a greater area:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_15.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.15: Cloud pattern brush for randomness</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Hold <em class="keystroke">Shift</em> and do small clicks over the hills of the terrain without dragging the <a id="_idIndexMarker153"/>mouse. Remember to zoom <a id="_idIndexMarker154"/>in to the areas you are applying finer details to because they can’t be seen at great distances:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_16.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.16: Erosion generated with the aforementioned brush</p>
    <p class="normal">This has added some irregularity to our hills. Now, let’s imagine we want to have a flat area on the hills to put a decorative observatory or antenna. Follow these steps to do so:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Select <strong class="screenText">Terrain</strong>, <strong class="screenText">Brush Tool</strong>, and <strong class="screenText">Set Height</strong> from the dropdown.</li>
      <li class="numberedList">Set <strong class="screenText">Height</strong> to <code class="inlineCode">60</code>.</li>
      <li class="numberedList">Select the full circle brush (the first one).</li>
      <li class="numberedList">Paint an area over the hills. You will see that the terrain will rise if it’s lower than 60 meters or drop in areas higher than 60 meters:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_17.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.17: Flattened hill</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">You can <a id="_idIndexMarker155"/>see that the borders <a id="_idIndexMarker156"/>have some rough corners that need to be smoothed:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_18.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.18: Non-smoothed terrain edges</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Change the dropdown to <strong class="screenText">Smooth Height</strong>.</li>
      <li class="numberedList">Select the second brush, as shown in <em class="italic">Figure 3.19</em>, with a size of <code class="inlineCode">5</code> and an opacity of <code class="inlineCode">10</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_19.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.19: Smooth Height brush selected</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="8">Click and <a id="_idIndexMarker157"/>drag over the borders <a id="_idIndexMarker158"/>of our flat area to make them smoother:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_20.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.20: Smoothed terrain edges</p>
    <p class="normal">We could keep adding details here and there, but we can settle with this for now. The next step is to create our player’s base, but first, let’s explore ProBuilder in order to generate our geometry.</p>
    <h1 id="_idParaDest-49" class="heading-1">Creating shapes with ProBuilder</h1>
    <p class="normal">So far, we have created simple scenes using cubes and primitive shapes, and that’s enough for <a id="_idIndexMarker159"/>most of the prototypes you will create, but sometimes, you will have tricky areas of the game that would be difficult to model with <a id="_idIndexMarker160"/>regular cubes, or maybe you want to have some deeper details in certain parts of your game to get an idea of how the player will experience that area. </p>
    <p class="normal">In this case, we can use any 3D modeling tool for this, such as 3D Studio Max, Maya, or Blender, but they can be difficult to learn and you probably won’t need all their power at this stage in your development. Luckily, Unity has a simple 3D model creator called ProBuilder, so let’s explore it.</p>
    <p class="normal">In this section, we will cover the following concepts related to ProBuilder:</p>
    <ul>
      <li class="bulletList">Installing ProBuilder</li>
      <li class="bulletList">Creating a shape</li>
      <li class="bulletList">Manipulating the mesh</li>
      <li class="bulletList">Adding details</li>
    </ul>
    <p class="normal">ProBuilder is not included by default in our Unity project, so let’s start by learning how to install it.</p>
    <h2 id="_idParaDest-50" class="heading-2">Installing ProBuilder</h2>
    <p class="normal">Unity is a powerful engine full of features, but adding all those tools to our project if we are not using <a id="_idIndexMarker161"/>all of them can make the engine run more slowly, so we need to manually specify which Unity tools we are using. To do so, we will use <strong class="keyWord">Package Manager</strong>, a tool that we can use to select which Unity Packages we are going to need. As you may recall, earlier, we talked about the <code class="inlineCode">Packages</code> folder. This is basically what Package Manager is modifying.</p>
    <p class="normal">In order to install ProBuilder in our project with this tool, we need to do the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Click the <strong class="screenText">Window | Package Manager</strong> option:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_21.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.21: Package Manager option</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">In the window that just opened, ensure the <strong class="screenText">Packages</strong> mode is in <strong class="screenText">Unity Registry</strong> mode by clicking on the button saying <strong class="screenText">Packages</strong> in the top-left part of the window and selecting <strong class="screenText">Unity Registry</strong>. Unlike the <strong class="screenText">In Project</strong> option, which will <a id="_idIndexMarker162"/>show only the packages our project already has, <strong class="screenText">Unity Registry</strong> will show all the official Unity packages you can install:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_22.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.22: Showing all packages</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Wait a moment for the left list of packages to fill. Make sure you are connected to the internet to download and install the packages.</li>
      <li class="numberedList">Look at the <strong class="screenText">ProBuilder</strong> package in that list and select it. You can also use the search box in the top-right corner of the <strong class="screenText">Package Manager</strong> window:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_23.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.23: ProBuilder in the packages list</p>
    <div><p class="normal">I’m using ProBuilder version 5.0.6, the newest version available at the time of writing this book. While you can use a newer version, the process of using it may differ. You can look at older versions using the arrow to the left of the title. </p>
    </div>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Click <a id="_idIndexMarker163"/>on the <strong class="screenText">Install</strong> button in the bottom-right-hand corner of the <strong class="screenText">Package Manager</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_24.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.24: Install button</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Wait for the package to install; this can take a while. You can tell that the process has ended when the <strong class="screenText">Install</strong> button has been replaced with the <strong class="screenText">Remove</strong> label, after the <strong class="screenText">Importing</strong> popup finishes. If for some reason Unity freezes or takes more than 10 minutes, feel free to restart it.</li>
      <li class="numberedList">Go to <strong class="screenText">Edit</strong> | <strong class="screenText">Preferences</strong> on Windows (<strong class="screenText">Unity</strong> | <strong class="screenText">Preferences</strong> on Mac).</li>
      <li class="numberedList">Select the <strong class="screenText">ProBuilder</strong> option from the left list.</li>
      <li class="numberedList">Set <strong class="screenText">Vertex Size</strong> to <code class="inlineCode">2</code> and <strong class="screenText">Line Size</strong> to <code class="inlineCode">1</code>. This will help you to better visualize the 3D model we are going to create while editing its different parts: </li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_25.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.25: Configuring ProBuilder</p>
    <div><p class="normal">The <strong class="screenText">Vertex Size</strong> and <strong class="screenText">Line Size</strong> values are big (<code class="inlineCode">2</code> and <code class="inlineCode">1</code> meters respectively) due to the fact we are not going to edit little details of a model, but big features like walls. Consider you might want to modify it later depending on what you are editing.</p>
    </div>
    <p class="normal">Although this <a id="_idIndexMarker164"/>is all we need to know about <strong class="screenText">Package Manager</strong> to install ProBuilder, if you want to know more about it, you can review its documentation here: <a href="https://docs.unity3d.com/Manual/upm-ui.html">https://docs.unity3d.com/Manual/upm-ui.html</a>. Now that we have installed ProBuilder in our project, let’s use it!</p>
    <h2 id="_idParaDest-51" class="heading-2">Creating a shape</h2>
    <p class="normal">We will <a id="_idIndexMarker165"/>start the player’s base by creating a plane for our floor. We will do this by doing the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Delete the cube we placed as the base placeholder. You can do that by right-clicking on the cube in the Hierarchy and then pressing <strong class="screenText">Delete</strong>.</li>
      <li class="numberedList">Open ProBuilder and go to <strong class="screenText">Tools | ProBuilder | ProBuilder Window</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_26.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.26: ProBuilder Window option</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">In the window that has opened, click the <strong class="screenText">New Shape</strong> button:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_27.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.27: New Shape option</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">In the <strong class="screenText">Create Shape</strong> panel that appears in the bottom-right corner of the Scene View, select the <strong class="screenText">Plane</strong> icon (the first icon on the second row).</li>
      <li class="numberedList">Expand <strong class="screenText">Shape Properties</strong> and<strong class="screenText"> Plane Settings</strong>.</li>
      <li class="numberedList">Set <strong class="screenText">Width Cuts</strong> and <strong class="screenText">Height Cuts</strong> to <code class="inlineCode">2</code>. We will need those subdivisions later.</li>
      <li class="numberedList">Click and <a id="_idIndexMarker166"/>drag over the terrain to draw the plane. While you do that, check how the <strong class="screenText">Size</strong> value in the <strong class="screenText">Create Shape</strong> panel changes, and try to make it have <em class="italic">x</em> and <em class="italic">z </em>values of approximately <code class="inlineCode">50</code>.</li>
      <li class="numberedList">Release the mouse button and see the resulting plane:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_28.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.28: New shape created</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="9">Select the newly-created <strong class="screenText">Plane</strong> object in the Hierarchy and drag it a little bit upwards using the <strong class="screenText">Transform </strong>tool.</li>
    </ol>
    <div><p class="normal">We needed to move the plane upwards because it was created at exactly the same height as the terrain. That <a id="_idIndexMarker167"/>caused an effect called <strong class="keyWord">Z-Fighting</strong>, where the pixels that are positioned in the same position are fighting to determine which one will be rendered and which won’t.</p>
    </div>
    <p class="normal">Now that <a id="_idIndexMarker168"/>we have created the floor, let’s learn how we can manipulate its vertices to change its shape.</p>
    <h2 id="_idParaDest-52" class="heading-2">Manipulating the mesh</h2>
    <p class="normal">If you select the plane, you will see that it is subdivided into a 3 x 3 grid because we set up the <a id="_idIndexMarker169"/>width and height cuts to <code class="inlineCode">2</code>. We did that because we will use the outer cells to create our walls, thus raising them. The idea is to modify the size of those cells to outline the wall length and width before creating the walls. In order to do so, we will do the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Select the plane in the Hierarchy.</li>
      <li class="numberedList">Open ProBuilder if it’s not already open, and go to the <strong class="screenText">Tools | ProBuilder | ProBuilder Window</strong> option.</li>
      <li class="numberedList">Select the second button (vertex) from the four new buttons that appear in the Scene View:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_29.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.29: Select vertices tool</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Click the <strong class="screenText">Select Hidden</strong> option until it says <strong class="screenText">On</strong>, as shown in the following image. This will make selecting vertices easier:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_30.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.30: Enabling Select Hidden</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Click and drag the mouse to create a selection box that picks the four vertices on the second row of vertices:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_31.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.31: Vertex selection</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Click on <a id="_idIndexMarker170"/>the second button in the top-left of the buttons of the Unity Editor to enable the <strong class="screenText">Move Tool</strong>, which will allow us to move vertices. Like the <strong class="screenText">Transform Tool</strong>, this can be used to move any object, but to move vertices, this is our only option. Remember to do this once you have selected the vertices. You can also press the <em class="keystroke">W </em>key to enable the <strong class="screenText">Move Tool</strong>.</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_32.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.32: Move Tool</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">Move the <a id="_idIndexMarker171"/>row of vertices to make the subdivision of the plane thinner. You can use the checker pattern on the terrain to get a notion of the size of the wall in meters (remember, each square is one square meter):</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_33.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.33: Moved vertices</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="8">Repeat <em class="italic">steps 3</em> to <em class="italic">5</em> for each row of vertices until you get wall outlines with similar sizes:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_34.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.34: Moved vertices to reduce edges cell width</p>
    <p class="normal">Now that <a id="_idIndexMarker172"/>we have created the outline for our walls, let’s add new faces to our mesh to create them. In order to use the subdivisions, or <strong class="keyWord">faces</strong>, we have created to make our walls; we must pick and extrude them. Follow these steps to do so:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Select the plane.</li>
      <li class="numberedList">Select the fourth button of the <strong class="screenText">ProBuilder</strong> buttons in the Scene View:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_35.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.35: Select Face tool</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">While holding <em class="keystroke">Ctrl</em> (<em class="keystroke">Command</em> on Mac), click on each of the faces of the wall outlines:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_36.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.36: Edge faces being selected</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">In the <strong class="screenText">ProBuilder</strong> window, look for the <strong class="screenText">plus (+)</strong> icon to the right of the <strong class="screenText">Extrude Faces</strong> button. It is located in the red section of the window:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_37.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.37: Extrude Faces option</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Set <strong class="screenText">Distance</strong> to <code class="inlineCode">5</code> in <a id="_idIndexMarker173"/>the window that appears after we click the plus button.</li>
      <li class="numberedList">Click the <strong class="screenText">Extrude Faces</strong> button in that window:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_38.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.38: Extrude distance option</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">Now, you should see that the outline of the walls has just raised from the ground:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_39.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.39: Extruded grid edges</p>
    <p class="normal">Now, if you pay <a id="_idIndexMarker174"/>attention to how the base floor and walls touch the terrain, there’s a little gap. We can try to move the base downward, but the floor will probably disappear because it will be buried under the terrain. A little trick we can do here is to push the walls downward, without moving the floor, so that the walls will be buried in the terrain but our floor will stay a little distance from it. You can see an example of how it would look in the following image:</p>
    <figure class="mediaobject"><img src="img/B18585_03_40.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.40: Slice of the expected result</p>
    <p class="normal">In order to do this, we need to do the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Select the third <strong class="screenText">ProBuilder</strong> button in the Scene View to enable edge selection:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_41.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.41: Select edges tool</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">While holding <em class="keystroke">Ctrl</em> (<em class="keystroke">Command</em> on Mac), select all the bottom edges of the walls.</li>
      <li class="numberedList">If you selected <a id="_idIndexMarker175"/>undesired edges, just click them again while holding <em class="keystroke">Ctrl</em> (<em class="keystroke">Command</em><em class="italic"> </em>on Mac) to deselect them, while keeping the current selection:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_42.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.42: Selecting floor edges</p>
    <div><p class="normal">If you want to use <strong class="screenText">Wireframe</strong> mode in the <strong class="screenText">sphere</strong> icon, go to the left of the 2D button in the top-right corner of the Scene View and select the <strong class="screenText">Wireframe</strong> option from the drop-down menu, as shown in the following image. You can get back to normal by selecting <strong class="screenText">Shaded</strong>.</p>
    </div>
    <figure class="mediaobject"><img src="img/B18585_03_43.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.43: Enabling Wireframe mode</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Enable the <strong class="screenText">Move</strong> tool by pressing the second button (or the <em class="keystroke">W</em> key on the keyboard) in the top-left corner of the <strong class="screenText">Scene</strong> panel:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_44.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.44: Object Move tool</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Move the <a id="_idIndexMarker176"/>edges down until they are fully buried in the terrain:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_45.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.45: Overlapping faces</p>
    <p class="normal">Now that we have a base mesh, we can start adding details to it using several other ProBuilder tools. </p>
    <h2 id="_idParaDest-53" class="heading-2">Adding details</h2>
    <p class="normal">Let’s start <a id="_idIndexMarker177"/>adding details to the base by applying a little bevel to the walls, a little cut in the corners so they are not so sharp. To do so, follow these steps:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Using the edge selection tool (the third of the <strong class="screenText">ProBuilder</strong> buttons), select the top edges of our model:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_46.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.46: Top wall edges being selected</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">In the <strong class="screenText">ProBuilder</strong> window, press the plus (+) icon to the right of the <strong class="screenText">Bevel</strong> button.</li>
      <li class="numberedList">Set a distance of <code class="inlineCode">0.5</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_47.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.47: Bevel distance to generate</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Click on <strong class="screenText">Bevel Edges</strong>. Now you can see the top parts of our walls have a little bevel:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_48.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.48: Result of the bevel process</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Optionally, you <a id="_idIndexMarker178"/>can do that with the bottom part of the inner walls:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_49.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.49: Bevel being applied to floor-wall edges</p>
    <p class="normal">Another detail to add could be a pit in the middle of the ground as a hazard we need to avoid falling into and to make the enemies avoid it using AI. In order to do that, follow these steps:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Enable the <strong class="screenText">Face</strong> selection mode by clicking the fourth ProBuilder Scene view button.</li>
      <li class="numberedList">Select the floor.</li>
      <li class="numberedList">Click the <strong class="screenText">Subdivide Faces</strong> option in the <strong class="screenText">ProBuilder</strong> window. You will end up with the floor split into four.</li>
      <li class="numberedList">Click that button again to end up with a 4 x 4 grid:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_50.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.50: Subdividing the floor</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Select the <a id="_idIndexMarker179"/>four inner floor tiles while holding <em class="keystroke">Ctrl</em> (<em class="keystroke">Command</em><em class="italic"> </em>on Mac) using the <strong class="screenText">Select Face</strong> tool (the third of the ProBuilder buttons in the top part of the Scene View).</li>
      <li class="numberedList">Enable the <strong class="screenText">Scale</strong> tool by clicking the fourth button in the top-left part of the Scene View, or pressing the <em class="italic">R</em> key on the keyboard. As with the <strong class="screenText">Move</strong> tool, this can be used to scale any object, not only vertices:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_51.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.51: Scale tool</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">Using the gray cube at the center of the gizmo, scale down the center tiles:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_52.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.52: Inner cells being scaled down</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="8">Click the <strong class="screenText">Extrude Faces</strong> button in the <strong class="screenText">ProBuilder</strong> window.</li>
      <li class="numberedList">Push the <a id="_idIndexMarker180"/>extruded faces downward with the <strong class="screenText">Move Tool</strong>.</li>
      <li class="numberedList">Right-click on the <strong class="screenText">ProBuilder</strong> window tab and select <strong class="screenText">Close Tab</strong>. We need to get back to terrain editing and having <strong class="screenText">ProBuilder</strong> open won’t allow us to do that comfortably:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_53.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.53: Close Tab option</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="11">Select the <a id="_idIndexMarker181"/>terrain and lower it so that we can see the pit:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B18585_03_54.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.54: Terrain being lowered for the pit to be visible</p>
    <h1 id="_idParaDest-54" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, we learned how to create large terrain meshes using Height Maps and Unity Terrain Tools such as <strong class="screenText">Paint Height</strong> and <strong class="screenText">Set Height</strong> to create hills and rivers. Also, we saw how to create our own 3D meshes using ProBuilder, as well as how to manipulate the vertices, edges, and faces of a model to create a prototype base model for our game. We didn’t discuss any performance optimizations we can apply to our meshes or advanced 3D modeling concepts as that would require entire chapters and is beyond the scope of this book. Right now, our main focus is prototyping, so we are fine with our level’s current status.</p>
    <p class="normal">In the next chapter, we will learn how to download and replace these prototyping models with final art by integrating assets (files) we have created with external tools. This is the first step to improving the graphics quality of our game, which we will finish by the end of <em class="italic">Part 3</em>, <em class="italic">Improving Graphics</em>.</p>
  </div>
  <div><h1 class="heading-1">Join us on Discord!</h1>
    <p class="normal">Read this book alongside other users, Unity game development experts, and the author himself. </p>
    <p class="normal">Ask questions, provide solutions to other readers, chat with the author via Ask Me Anything sessions, and much more. </p>
    <p class="normal">Scan the QR code or visit the link to join the community.</p>
    <p class="normal"><img src="img/Nicolas_QR_Code.png" alt=""/></p>
    <p class="normal"><a href="Chapter_3.xhtml">https://packt.link/handsonunity22</a></p>
  </div>
</body></html>