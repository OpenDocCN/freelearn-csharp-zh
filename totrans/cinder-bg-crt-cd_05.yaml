- en: Chapter 5. Making Use of Images – Loading and Displaying
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this chapter we will learn the following:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: How to load an image
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to display it on the screen
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: About general asset handling in Cinder
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You might make use of photographs, illustrations, or different image databases
    in your applications. To do so, you will need a way to load an image into your
    application and most importantly, to display it on the screen.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter we will learn the basics of Cinder file loading features and
    learn to load an image from the Web and local storage.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: Loading an image
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Open TinderBox and create a new project with the name `BasicImages`. Open `xcode/BasicImages.xcodeproj`
    project file. Windows users should open the project file `vc10\BasicImages.sln`.
    Open `BasicImagesApp.cpp` in the editor.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: First we are going to include some header files that declare functionality that
    is required to perform the things we want to get done.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: 'Navigate to a point in the code where there are `#include` statements and add
    the following lines of code just after `#include "cinder/gl/gl.h"`:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The first include statement loads code header that is responsible for the Cinder
    image input/output functionality, the second code header include allows us to
    use OpenGL textures for drawing images on the screen.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: 'Next we need to declare a variable of type `gl::Texture` that will contain
    the actual image data. You can chose your own name for that, but I will call it
    `imgTexture`:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Add the highlighted line of code just after `void draw();` in the `BasicImagesApp`
    class declaration:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Next, we need to select an image to be loaded into the application. So we are
    going to use some random image from the internet as it is the fastest way to get
    a visible image on the screen if you have an internet connection.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Before compiling and running the following example, try to open this URL [http://rijnieks.lv/projects/cinder_begin_creative_coding/images/image.png](http://rijnieks.lv/projects/cinder_begin_creative_coding/images/image.png)
    in your browser. If you do not see an image, please find any other `*.png` or
    `*.jpg` image on the internet.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
- en: 'Add the following highlighted line of code in the setup method declaration:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The reason why we load it in the `setup()` is that we need to load the image
    just once. As loading images from the net takes some time, we don't want to delay
    our `draw()` or `update()` operations because the image is still loading. Cinder
    is about speed and we don't want to sacrifice it.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
- en: 'Now we need to add some code that will take care of displaying the image. Go
    to the implementation of the `draw()` method and add this code just after the
    `gl::clear( Color( 0, 0, 0 ) );` function:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Here we tell Cinder that we want to draw our `imgTexture` within the application
    window bounds (the image will be stretched so its width equals the window's width
    and its height equals the window's height). Try to compile and run the application.
    After a short delay an image should appear. If you try to resize the window, you
    can see that the image is being resized with it.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
- en: 'The member function `getWindowBounds()` returns an `Area` object and instead
    of using this function we can define the drawing area by ourselves. Try this:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: If you try to resize the window now, you will see that it does not affect the
    image as now it's display position and size is hardcoded in `Area(100,100,540,380)`.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: Handling assets
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now let's see what we need to create an application that will be used on a computer
    without an internet connection. We have to store our image somewhere on the computer.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: Cinder has a predefined way of handling images and similar assets. If you created
    your project with TinderBox, you may have noticed that you have an **assets**
    directory in your project folder. If not, create one.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: '![Handling assets](img/9564_05_01.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
- en: 'Now copy your image file into the assets directory and change the `loadImage`
    code in the `setup()` implementation to the following:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: As you can see we changed `loadUrl()` to `loadAsset()` and it actually seems
    simpler than the `loadUrl( Url( "http://..." ) )` approach. It's just that we
    do need to take care of our assets by ourselves.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: 'Now try to move the assets directory one level up in the filesystem so it is
    next to the `BasicImages` folder as shown in the following screenshot:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: '![Handling assets](img/9564_05_02.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
- en: Try to compile and run our project and you will be surprised that the image
    still loads! Some people may think that this is the magic of caching or something
    similar but no, Cinder just automatically searches for the `assets` directory
    up to five levels above the executable. So you can choose at what level you want
    to store your assets, but in a way the default way may be the best as it allows
    you to use the same assets for your Mac OS X and Windows projects. If you are
    working on more than one project with the same assets, then you may move your
    `assets` directory to the projects folder level as we just did.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: 'There is one small detail to it—if your image uses alpha transparency, you
    might get strange results. To draw images with alpha transparency, we have to
    enable alpha blending before drawing the image and disable it after it is drawn
    by adding the following code snippet:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'There is also a way of adding additional asset directories in case you have
    more than one group of projects using the same assets. The following line of code
    takes care of that:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Note that you have to use an absolute path here, so this is not too good for
    cross-platform projects. In windows you might write something similar to the following:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: If you use assets, you have to remember to deploy the assets directory with
    your application.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: There is a way that tells you how to include assets inside the application,
    but this topic is a bit outside the scope of this book. You should search the
    Internet for "Cinder resource management" if you want to know more about it.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 有一种方法可以告诉你如何在应用程序中包含资源，但这个主题略超出了本书的范围。如果你想了解更多关于这个话题的信息，你应该在互联网上搜索“Cinder资源管理”。
- en: 'The following is the full code of the application that we made in this chapter:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们在本章中制作的应用程序的完整代码：
- en: '[PRE10]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Not a lot of code!
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 代码并不多！
- en: Summary
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter we learned how to load an image from the Internet as well as
    from local storage, assign it to an OpenGL texture, and draw it on the screen.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了如何从互联网以及本地存储加载图像，将其分配给OpenGL纹理，并在屏幕上绘制它。
- en: We gained a basic understanding on how asset management works in Cinder and
    that we don't have to worry about the location of the `assets` directory as long
    as it is less than five levels up from our application.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对Cinder中资源管理的工作原理有了基本的了解，并且只要`assets`目录位于我们的应用程序上方不超过五级，我们就不必担心其位置。
- en: We also understood that we can use the `loadUrl()` and `loadAsset()` functions
    in the same way on Mac OS X and Windows.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还了解到，在Mac OS X和Windows上，我们可以以相同的方式使用`loadUrl()`和`loadAsset()`函数。
