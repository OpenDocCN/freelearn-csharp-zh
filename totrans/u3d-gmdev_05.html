<html><head></head><body>
<div id="sbo-rt-content"><div class="Basic-Text-Frame" id="_idContainer110">
<h1 class="chapterNumber">5</h1>
<h1 class="chapterTitle" id="_idParaDest-107">Environment</h1>
<p class="normal">When a player enters a game where the narrative is mostly driven by the environment, you need to ensure that most of the questions they may ask are answered. We will spend time in three major structures of environmental development – environmental design, blocking, and iteration. This should sound familiar from the character work we did previously in <em class="chapterRef">Chapter 4</em>! Fortunately, there are differences involved in the environment regarding characters that we will cover quite extensively in this chapter. By the end of this chapter, you will have worked through enough environment questions to know how we designed our narrative, but also to work on your own. Let’s break down the topics so that you can get a glimpse of the chapter:</p>
<ul>
<li class="bulletList">Design – sketching, mood boards, and staging</li>
<li class="bulletList">Blocking out – Mesh Blocking, Unity Terrain, Unity Probuilder</li>
<li class="bulletList">Working through the iteration process</li>
<li class="bulletList">Environmental design</li>
</ul>
<p class="normal">The environment in a game is just as important as the character. We need to think deeply about our choices in terms of how the environment is in keeping with the theme and narrative of the gameplay. This is where we sit down with concept artists and designers to ask the difficult questions. Work through as much detail as possible to develop the purpose for the pieces of the environment.</p>
<p class="normal">Conceptualizing an environment needs to start somewhere. We started with sketching. We had an idea of what we wanted the environment to feel like from the beginning, so we decided to sketch up some quick concepts. After sketching, we put together some mood boards for a better definition of the style. </p>
<p class="normal">Once we are happy with the style and general concept, we then want to work in the following three stages to set the tone for the key points:</p>
<ul>
<li class="bulletList">Sketching</li>
<li class="bulletList">Mood boards</li>
<li class="bulletList">Staging</li>
</ul>
<p class="normal">Let’s look at these stages in detail, starting with sketching.</p>
<h2 class="heading-2" id="_idParaDest-108">Sketching</h2>
<p class="normal">You may have some strong ideas on what you want the environment to look like. Just as in the other concept phases, you need to spend a large amount of time asking “why?”. This question will help define the context of your environment, so the experience fits together.</p>
<p class="normal">To perform<a id="_idIndexMarker282"/> sketching, you could employ several methods. Pen and paper work great for this to get sketches out quickly. Someone might have a great idea and draw on some napkins at a restaurant! If you’re in front of a computer, you can use Photoshop if you have a subscription, or try alternatives such as Krita or GIMP for free. Take some time to sketch out the architecture, broad shapes, and feeling. Each sketch will give you a closer look at what the final product could be. After each quick sketch, have a small conversation with yourself or the team to determine whether you need to ask more “why” questions in relation to the environment. The amount of sketching required will vary depending on how confident you are with conveying the emotion you want the player to experience. If you cannot fully describe the reasoning for each piece, then continue sketching and continue asking “why?”. Over time, the granularity will be enough to move on.</p>
<p class="normal">Below, in <em class="italic">Figure 5.1</em>, is a series of images, and I will briefly explain what they brought to the design of the environment for our vertical slice of the game. We really wanted to paint broad strokes of the environment type, meaning we’re developing without worrying about the subtle definitions. We were not looking for the architecture of the ruins or the flora of the environment. Initially, we were 100% certain of how we would put together a ruin in the mountains, but we needed to search through our sketches to figure out what felt right. We discovered that we wanted a remote mountainous region that was overgrown far enough that it almost felt cave-like in nature the entire time. This built up to a feeling that you weren’t actually on Earth, but on a planet similar enough to Earth to feel comfort in the shapes of nature.</p>
<figure class="mediaobject"><img alt="" height="414" src="../Images/B17304_05_01.png" width="710"/></figure>
<p class="packt_figref">Figure 5.1: Examples of sketches</p>
<p class="normal">While you are <a id="_idIndexMarker283"/>working your way through the tutorial, we wanted the last section when you reveal Myvari’s past to come with a drastic change to the feel of the area. This is initially shown in the bottom-right concept sketch in <em class="italic">Figure 5.1</em>. From this point, we knew we needed to push the architecture question and get the medium shapes defined. </p>
<figure class="mediaobject"><img alt="" height="426" src="../Images/B17304_05_02.png" width="710"/></figure>
<p class="packt_figref">Figure 5.2: Last puzzle area</p>
<p class="normal">By furthering the<a id="_idIndexMarker284"/> development of the last section, we knew we would need to have a stark contrast in terms of thematic visuals when the world shifted into Myvari’s realm. Looking at the differences in the images in the preceding <em class="italic">Figure 5.2</em>, the major difference is daytime versus nighttime. That’s a large change in itself, but we also wanted to make the ground and trees disappear while growing the architecture back to its old glory and bringing up reflective still water that reflects the stars in the sky, thereby really opening up this place as a new dimension.</p>
<p class="normal">After you get to a good point of sketching out your environment concepts, you want to then take what you’ve learned from the sketches and build out a <strong class="keyWord">mood board</strong>. Here, you can solidify references for the creation of your pieces in the future.</p>
<h2 class="heading-2" id="_idParaDest-109">Mood boards</h2>
<p class="normal">A <strong class="keyWord">mood board</strong> is a<a id="_idIndexMarker285"/> collage of images that draw out the style and mood of an area. There are hundreds of thousands of images on the internet that people have drawn, rendered, sketched, or even photographed that may be close enough to your style and tone that you can pull them together to inspire a little bit more of the experience you’re looking to provide to the player.</p>
<p class="normal">If you have definitive sketches, then this is your time to shine with mood boards. Take some time to search out similar features and feelings of architecture to make a collage of what the environment mood should feel like. This will define the palette of colors for you to work with on the modeling portion of this environment journey.</p>
<p class="normal">For our project, we had <a id="_idIndexMarker286"/>several major requirements. We wanted a mountainous jungle that brought an ancient magical fantasy civilization feeling to the game. Even if you were to search for “magical fantasy ancient jungle ruin,” there is a large chance that you wouldn’t be able to find exactly what you needed by way of reference. Instead, you break down the primary functions of each area and come up with a mood board. For our two examples, we will go over the cave and ruins mood boards.</p>
<figure class="mediaobject"><img alt="" height="217" src="../Images/B17304_05_03.png" width="813"/></figure>
<p class="packt_figref">Figure 5.3: Cave mood board example</p>
<p class="normal">In <em class="italic">Figure 5.3</em> above, we focused on the primary function of the caves. What does it feel like to be small? What are the atmospheric tendencies for fog and lighting? This gives that sense of an alien environment even though you are still on Earth, perhaps in an unexplored area of our Earth.</p>
<figure class="mediaobject"><img alt="" height="258" src="../Images/B17304_05_04.png" width="832"/></figure>
<p class="packt_figref">Figure 5.4: Ruins mood board example</p>
<p class="normal">In <em class="italic">Figure 5.4</em>, we wanted to break down the function of ruins in a magical, fantastical civilization. What shapes would a nature-focused magical being want to strive for? How do the colors blend with one another? </p>
<p class="normal">Mood boards need to <a id="_idIndexMarker287"/>answer for mood and tone. You will know when you’ve completed your searching for mood when each of your key areas has a collage that best suits the mood that area needs to convey. In our case, we needed to feel out the caves versus the ruins. You’ll notice that both are drastically different in mood without even seeing all the finer details of the images.</p>
<p class="normal">Starting this after sketching makes sense if you can get questions answered through that step. However, if you find that sketching is only raising more questions overall, and muddling up the style that you want instead of defining it, then mood boards should come first. Searching for imagery of architecture tends to add a lot of clarity in terms of what is conceived.</p>
<h2 class="heading-2" id="_idParaDest-110">Staging</h2>
<p class="normal">After quickly sketching ideas and feelings to define the questions of “why,” you then built a mood board to further solidify the feeling of the environment. The next step is to take the previously defined shaping and mood and use it to push your narrative and mechanics into the<a id="_idIndexMarker288"/> stages of the game. The first location you bring your players to needs to answer a lot of questions rather quickly. Luckily, you took the time to answer as many questions as possible before this stage. You can now stage your narrative design with confidence. For our project, we knew we would need to explain as much of Myvari’s past as possible in each area you progress through. </p>
<p class="normal">When you’re building a stage, place yourself on the stage as best you can. Take your time going through the stage and ensure your primary questions were answered the way you expected in previous sections. Now, let’s try a new experiment: imagine the experience you’ve created through the lens of a new player. Try to feel what they might feel as a new player of 3D games. Are there enough hints to describe the experience for them? Then look at it from the point of view of an experienced player; would adding anything else take away from these power users?</p>
<p class="normal">This could take several iterations. Be patient with this step, and go through the stage to make sure you can explain the character’s assumed movements. </p>
<p class="normal">This is a good time to show someone else your designs and see what unprompted questions they have to offer you as well; it is amazing what we answer for ourselves without giving it much thought. Having a fresh set of eyes at each stage will reveal areas where a little more detail is required.</p>
<p class="normal">After some time, a picture of what you need at each stage will be clearer, and you can then take your stages into a blocking-out phase. </p>
<h1 class="heading-1" id="_idParaDest-111">Blocking it out</h1>
<p class="normal">Now that you have<a id="_idIndexMarker289"/> worked through as many of the concepts as you can, you should have a very strong idea of what would make your environment appropriate to the narrative and the characters. At this point, the next step would be to work through “<strong class="keyWord">blocking out</strong>” as much as possible; the point of blocking out is to put all the pieces together within Unity to fulfill the experience we worked so hard to define in the previous stages. </p>
<p class="normal">Now that you are aware of, and comfortable with, what goes into each portion of the entire level, you can speak to the mood and tone in each portion and become attuned to the general shaping from the concepts. To block a level out, we will use a few of the tools at our disposal; Unity Terrain, Basic Shapes, and Unity Probuilder will set us up to put down the basic environment pieces.</p>
<h2 class="heading-2" id="_idParaDest-112">Unity terrain</h2>
<p class="normal">Working<a id="_idIndexMarker290"/> with the <strong class="keyWord">Terrain</strong> tool in Unity is empowering. It’s very easy to get going and make a beautiful landscape quickly. To get started, let’s create a terrain entity. After creating the terrain entity, we will go through the settings, painting, and foliage that Unity provides us with as tools to create the terrain. </p>
<h3 class="heading-3" id="_idParaDest-113">Creating a terrain</h3>
<p class="normal">The first step to working with<a id="_idIndexMarker291"/> terrain is to create one. There are two main methods for doing so.</p>
<p class="normal">One way is to click on the <strong class="screenText">GameObject</strong> menu, then <strong class="screenText">3D Object</strong>, and then <strong class="screenText">Terrain</strong>, as shown in <em class="italic">Figure 5.5</em>. </p>
<p class="normal">Another way to start is by right-clicking an open area in the hierarchy and then selecting <strong class="screenText">3D Object</strong>, followed by <strong class="screenText">Terrain</strong>.</p>
<figure class="mediaobject"><img alt="Graphical user interface, application  Description automatically generated" height="709" src="../Images/B17304_05_05.png" width="667"/></figure>
<p class="packt_figref">Figure 5.5: Creating a terrain entity</p>
<p class="normal">Either of these options<a id="_idIndexMarker292"/> will create a terrain GameObject in the scene at the global coordinates of <em class="italic">0</em>, <em class="italic">0</em>, <em class="italic">0</em>, sprawling positively in the <em class="italic">x</em> and <em class="italic">z</em> planes by 1,000 units, each by default. This value may not be what you need, so let’s go over the terrain settings.</p>
<h3 class="heading-3" id="_idParaDest-114">Terrain settings</h3>
<p class="normal">In our vertical slice, we will be <a id="_idIndexMarker293"/>using the default units as these are what we ended up needing for a sense of scale. This may not be the case for your game. One nice thing about the terrain is that it can be connected to neighboring terrain tiles easily. </p>
<p class="packt_figref"><img alt="" height="331" src="../Images/B17304_05_06.png" width="825"/></p>
<p class="packt_figref">Figure 5.6: Creating a neighboring terrain</p>
<p class="normal">The first option <a id="_idIndexMarker294"/>in the <strong class="screenText">Terrain</strong> component is the <strong class="screenText">Create Neighboring Terrain</strong> button. When this is selected, you will see an outline of the adjacent tiles, as seen in <em class="italic">Figure 5.6</em>. If you were to click on any of these squares, the terrain will create a new terrain asset that is linked to the primary terrain asset. </p>
<p class="normal">Now that you understand how the <strong class="screenText">Terrain</strong> tool can connect to other terrains quite easily, you can now think about your terrain settings in terms of the size of each tile. It may be the case that your terrain only ever needs to be 500 units in length, and 200 in width. A common denominator of those is 100 units, so you could set your settings as in <em class="italic">Figure 5.7 </em>below.</p>
<figure class="mediaobject"><img alt="" height="173" src="../Images/B17304_05_07.png" width="825"/></figure>
<p class="packt_figref">Figure 5.7: Mesh resolution settings</p>
<p class="normal">If you plan on using grass or details on your terrain, make sure your terrain is square. If the width is different from the length, the <strong class="screenText">Details Brush</strong> will have a hard time placing the billboards in an orderly way.</p>
<p class="normal">Clicking on the open <a id="_idIndexMarker295"/>squares will fill them in with another terrain tile. Clicking several may result in a terrain that looks similar to <em class="italic">Figure 5.8</em>.</p>
<figure class="mediaobject"><img alt="" height="491" src="../Images/B17304_05_08.png" width="500"/></figure>
<p class="packt_figref">Figure 5.8: Adding neighboring tiles</p>
<p class="normal">This gives you the freedom to add small offshoots that aren’t too large if you only need a little bit more terrain where you didn’t expect to need it.</p>
<p class="normal">In our case, we knew we only needed one block of 1000x1000, so we stuck with the default sizing. Our entire vertical slice will take place in a single scene with this default size for ease of setup.</p>
<p class="normal">Once you have your terrain scaled and set to the sizing that you will need, you may then need to add some detail to your terrain. Even though a stretching plane of infinite flatness is interesting in its own way, there is a good chance that your concept does have some hills or mountains in it. Let’s get to painting those in there. </p>
<h3 class="heading-3" id="_idParaDest-115">Terrain painting</h3>
<p class="normal">To get all those beautiful <a id="_idIndexMarker296"/>mountains and hills, we need to affect the terrain’s geometry. The <strong class="screenText">Paint Terrain</strong> tool allows<a id="_idIndexMarker297"/> just this. You can find the tool button in the second available option in the <strong class="screenText">Terrain Objects</strong> Inspector, which is shown in <em class="italic">Figure 5.9</em>.</p>
<figure class="mediaobject"><img alt="" height="411" src="../Images/B17304_05_09.png" width="751"/></figure>
<p class="packt_figref">Figure 5.9: Brush options</p>
<p class="normal">Your <strong class="screenText">Brush</strong> option, which is <a id="_idIndexMarker298"/>located directly under the <strong class="screenText">Tool</strong> options, is a dropdown that will change the functionality of the brush. To look at a list of brush options, click the dropdown as seen in <em class="italic">Figure 5.10</em>.</p>
<figure class="mediaobject"><img alt="" height="197" src="../Images/B17304_05_10.png" width="750"/></figure>
<p class="packt_figref">Figure 5.10: Painting options</p>
<p class="normal">We will go over their exact functions, but I suggest you take a bit of time to make a terrain you’re comfortable with by playing with the different brushes. There’s nothing like experience to get a feel for how they act on the terrain.</p>
<h4 class="heading-4">Raising or lowering the terrain</h4>
<p class="normal">This tool will be your<a id="_idIndexMarker299"/> bread and butter while making a terrain. Depending on the size of your terrain and the scale that you need to make changes to the terrain, your brush size will be unique to your needs. Fortunately, there is a nice indicator, shown in <em class="italic">Figure 5.11</em>, to let you know the size and shape of your changes before you commit to the change and click. </p>
<figure class="mediaobject"><img alt="" height="394" src="../Images/B17304_05_11.png" width="676"/></figure>
<p class="packt_figref">Figure 5.11: Visualization of brush on different heights</p>
<p class="normal">When you <a id="_idIndexMarker300"/>select the <strong class="screenText">Raising or Lowering Terrain</strong> brush, it shows a description box that explains if you<a id="_idIndexMarker301"/> click on the terrain, the brush will raise the terrain according to your brush shape, and if you hold down the <em class="italic">Shift</em> key while clicking the brush, this will lower the terrain according to your brush shape. If you attempt to lower your terrain on the flat parts, you’ll notice that it will not go below 0. This could be a problem if you’re planning on making indentions in the terrain to possibly put water in; there is a way to work around this, which we will go over later in the <em class="italic">Setting the Height</em> section.</p>
<h4 class="heading-4">Paint holes</h4>
<p class="normal">After selecting the <strong class="screenText">Paint Holes</strong> tool<a id="_idIndexMarker302"/> and taking a moment to click around with paint holes, this tool may not jump out as the most useful tool relating to terrain as it just erases the terrain. In addition to it just making a hole, it makes jagged edges, which don’t fit well with the rest of the terrain being nice and smooth!</p>
<p class="normal">But all is not lost! This tool is <a id="_idIndexMarker303"/>fantastic for you if you need to have a cave built as a terrain that is not designed to deal with concave shapes that would force an overlap in the terrain vertex. </p>
<p class="normal">It is common to design 3D meshes that encompass your needed cave system and then place it below the terrain and cut a hole in the terrain to access it. </p>
<div class="note">
<p class="normal">We’ll cover 3D meshes in more detail in a later section, but here’s a rough and ready explanation: a 3D mesh is a set of vertices, creating polygons, that we use to visualize a 3D space. </p>
</div>
<p class="normal">The terrain is just a flat section being manipulated; it isn’t ground you can just dig into with a shovel. If you want a cave in the ground, you will need to make a hole, and then build a mesh below the terrain. This will leave some jagged edges, which you can see in <em class="italic">Figure 5.12</em>. </p>
<figure class="mediaobject"><img alt="" height="690" src="../Images/B17304_05_12.png" width="750"/></figure>
<p class="packt_figref">Figure 5.12: Example of paint holes before and after in the terrain</p>
<p class="normal">You can cover up those jagged edges with rocks, or other meshes that lead into the cave system.</p>
<h4 class="heading-4">Paint texture</h4>
<p class="normal">Now you have most<a id="_idIndexMarker304"/> likely played enough that you have some hills, plateaus, and other various gray terrain-related material. You may want some color in your life, and luckily, there is an easy way to add some! You can search for a tileable texture online, or you can use one of the textures provided in the project to set this up. </p>
<p class="normal">When you first select the paint textures tool, there is nothing to paint as you need to create layers to paint with. Your terrain layers will be blank until you create one, so let’s do that first.</p>
<figure class="mediaobject"><img alt="" height="295" src="../Images/B17304_05_13.png" width="723"/></figure>
<p class="packt_figref">Figure 5.13: Editing terrain layers for painting</p>
<p class="normal">On the bottom right of the<a id="_idIndexMarker305"/> terrain layers, seen in <em class="italic">Figure 5.13</em>, there is a button labeled <strong class="screenText">Edit Terrain Layers</strong>. If you select this, you can either create or add a layer. If you haven’t made a layer previously, you can click on the <strong class="screenText">Add Layer</strong> option, but there will not be any options to fill that. Instead, let’s click on <strong class="screenText">Create Layer</strong>. This will bring up a dialog box to select a texture. A tip here would be to name your texture something that you can search for easily, just in case you have a large number of textures to sift through. An example of this could be to name your terrain textures with a prefix of <code class="inlineCode">TT_</code>, such as <code class="inlineCode">TT_Grass</code> for grass. Then, when the dialog box is up, you can type <code class="inlineCode">TT</code> in the search bar and it will only show the terrain textures. This trick can be used all over the project as there are search bars in most available options to select an asset to fill a role.</p>
<p class="normal">When you choose your texture, it will create a <strong class="screenText">Terrain Layer</strong> asset that contains the texture you chose and some material options. </p>
<p class="normal"><em class="italic">Figure 5.14</em> shows an example of a <strong class="screenText">Terrain Layer</strong>.</p>
<p class="packt_figref"><img alt="" height="502" src="../Images/B17304_05_14.png" width="750"/></p>
<p class="packt_figref">Figure 5.14: Terrain Layer example</p>
<p class="normal">The primary property<a id="_idIndexMarker306"/> you will want to see here is the <strong class="screenText">Tiling Settings</strong>. Depending on the scale of the game, you may need to increase or decrease the scaling to avoid seeing the tiles of the texture. If you look below at <em class="italic">Figure 5.15</em>, you can see where the texture tiles over and over. This looks bad from the camera’s current location, but in-game, it will be much closer, which allows us to prevent tiling from being as visible. The most interesting part of this is that it’s not connected to the terrain, so if you make a change to the layer asset, it will update the terrain right away. This makes it nice in terms of working quickly and getting an idea of what you want the terrain to look like while you can add normal maps and the metallic or smoothness elements later on.</p>
<p class="normal">The second thing that will happen is that the entire terrain will be painted with this texture. When you add another layer, you will then be able to utilize the same brush shapes and sizes to paint other layers onto the terrain. </p>
<div class="note">
<p class="normal">Technically Interesting!</p>
<p class="normal">The way that terrain layers work is that Unity creates a texture map for each texture painted on the terrain. If you have four layers, each layer corresponds to the four channels in a texture: <strong class="keyWord">Red</strong> (<strong class="keyWord">R</strong>), <strong class="keyWord">Green</strong> (<strong class="keyWord">G</strong>), <strong class="keyWord">Blue</strong> (<strong class="keyWord">B</strong>), and <strong class="keyWord">Alpha </strong>(<strong class="keyWord">A</strong>). If you have five, the terrain gains a new texture, and it adds it to another R channel of another texture. Since this is the case, limit each tile to four textures for reasons of performance!</p>
</div>
<p class="normal">After you get the<a id="_idIndexMarker307"/> hang of working through the layers, it’s good to test small sections with your character to ensure that the scaling on the layer makes sense for the game scale itself, while keeping in mind that there will be other noisy factors to break up the texture tiling, such as grass, rocks, trees, or anything else that will be placed in your environment.</p>
<figure class="mediaobject"><img alt="" height="384" src="../Images/B17304_05_15.png" width="750"/></figure>
<p class="packt_figref">Figure 5.15: Testing brush strength when painting</p>
<p class="normal">If the character looks good at this point regarding the textures in respect to scale, let’s move on to the next option.</p>
<h4 class="heading-4">Setting the height</h4>
<p class="normal">When working with the<a id="_idIndexMarker308"/> lower height tool, you may have noticed that it doesn’t go below the zero point. If you know you will be working below zero, which is very common, then the workflow to start is: before making any changes, set the height of the terrain to what might seem appropriate for the height you would need to go below zero in units. </p>
<p class="normal">Do you need to go 200 units down? If so, set the terrain GameObject to <em class="italic">-200</em> in the position <em class="italic">y</em>, <em class="italic">Figure 5.16</em> highlighted as step <em class="italic">1</em> in red. Then select the <strong class="screenText">Paint Terrain</strong> option while also selecting the <strong class="screenText">Set Height</strong> dropdown as shown in <em class="italic">Figure 5.16</em> marked as <em class="italic">2</em> in red. After that, the value will be <code class="inlineCode">-200</code>, so set it to <code class="inlineCode">0</code>, then flatten it with the <strong class="screenText">Flatten</strong> button in <em class="italic">Figure 5.16</em> marked as red<em class="italic"> 3</em>.</p>
<figure class="mediaobject"><img alt="Graphical user interface, application  Description automatically generated" height="520" src="../Images/B17304_05_16.png" width="466"/></figure>
<p class="packt_figref">Figure 5.16: Setting Height to allow for lower than world 0</p>
<p class="normal">This will set the <a id="_idIndexMarker309"/>terrain visually back to <em class="italic">0</em>, <em class="italic">0</em>, <em class="italic">0</em> as its location and keep the offset in place so that you can lower the terrain below that mark. This is very effective for making swamps, caverns, and rivers.</p>
<h4 class="heading-4">Smoothing the height</h4>
<p class="normal"><strong class="keyWord">Smoothing</strong> is a<a id="_idIndexMarker310"/> straightforward tool. Sometimes, you may need to just smooth out the terrain <a id="_idIndexMarker311"/>slightly as the noise placed on it could have gotten out of hand, or you needed to smooth a path for the player character to walk on to help guide the character’s movement. </p>
<p class="normal">As a simple example, look at <em class="italic">Figure 5.17</em> below. </p>
<figure class="mediaobject"><img alt="" height="474" src="../Images/B17304_05_17.png" width="825"/></figure>
<p class="packt_figref">Figure 5.17: Smoothed terrain</p>
<p class="normal">This is a <a id="_idIndexMarker312"/>somewhat extreme version of smoothing, but both looked the same prior to<a id="_idIndexMarker313"/> smoothing. You can also apply smoothing with a noisy brush to smooth in a non-uniform way to give a look of erosion to the terrain.</p>
<h4 class="heading-4">Stamping the terrain</h4>
<p class="normal">The <strong class="keyWord">stamp</strong> tool is <a id="_idIndexMarker314"/>used as a 3D stamp! If you need a specific terrain feature, you author a <a id="_idIndexMarker315"/>height map to stamp the terrain with. You add the heightmap to the brushes and then you use it on the terrain. </p>
<p class="normal">One of the main use cases for this tool is that you can get pre-authored heightmaps that have already been proven to look good on terrain. If you want to find nice mountains and hills, you can search for them in the asset store and there will be examples for you to start with. This will speed up the process drastically. It may not be what you need exactly, but every step is progress.</p>
<h3 class="heading-3" id="_idParaDest-116">Painting trees</h3>
<p class="normal">When you <a id="_idIndexMarker316"/>select the <strong class="screenText">Paint Trees</strong> tool, it will have the options as seen in <em class="italic">Figure 5.18</em>.</p>
<figure class="mediaobject"><img alt="" height="534" src="../Images/B17304_05_18.png" width="825"/></figure>
<p class="packt_figref">Figure 5.18: Paint Trees terrain mode</p>
<p class="normal">To get started, click the <strong class="screenText">Edit Trees</strong> button, and add trees. You’ll be able to add whatever mesh you like even if it isn’t a tree! There is a warning, seen in <em class="italic">Figure 5.19</em>, that pops up if your mesh isn’t built correctly for the tree placement on the terrain. It looks like this:</p>
<figure class="mediaobject"><img alt="" height="886" src="../Images/B17304_05_19.png" width="600"/></figure>
<p class="packt_figref">Figure 5.19: Defined Tree and LOD group warning</p>
<p class="normal">Luckily, there is a <a id="_idIndexMarker317"/>free asset on the asset store by <em class="italic">SpeedTree</em> that you can download to get a great example of how to properly put together a tree for the <strong class="keyWord">Paint Tree</strong> tool. </p>
<h3 class="heading-3" id="_idParaDest-117">Painting details</h3>
<p class="normal">Lastly, we have painting<a id="_idIndexMarker318"/> details. Here, you can either add a detail texture, which will get rendered on a quad, or you can use a detail mesh to create your own mesh. Here is an example of a simple grass texture being used and painted on a flat terrain:</p>
<p class="packt_figref"><img alt="" height="413" src="../Images/B17304_05_20.png" width="750"/></p>
<p class="packt_figref">Figure 5.20: Grass as a detail</p>
<p class="normal">Painting details such <a id="_idIndexMarker319"/>as grass helps to break up the ground texture, shown above in <em class="italic">Figure 5.20</em>. These items can also be affected by <strong class="keyWord">wind zones</strong>, which are another component that could be added to the terrain object. If you wish to push this further, please investigate <em class="chapterRef">Chapter 10</em>, <em class="italic">Sound Effects</em>, where we will add ambient sounds and other small polishing details, and <em class="chapterRef">Chapter 12</em>, <em class="italic">Finishing Touches</em>, to breathe life into the terrain.</p>
<h2 class="heading-2" id="_idParaDest-118">3D geometry</h2>
<p class="normal">Now that you’ve set up<a id="_idIndexMarker320"/> your terrain, you will need to augment the terrain for architecture or building out a cave system. You will need to utilize a <strong class="keyWord">3D Digital Content Creation </strong>(<strong class="keyWord">3D DCC</strong>) tool to build out the meshes for your environment. There is another option to build out the block-out phase, which is Unity’s ProBuilder. In our case, we will be using both ProBuilder as well as creating our own geometry for custom shape definition to denote specific architectural portions of the environment. </p>
<p class="normal">Let’s dig into what ProBuilder and custom meshes mean for your environment blockout.</p>
<figure class="mediaobject"><img alt="" height="692" src="../Images/B17304_05_21.png" width="750"/></figure>
<p class="packt_figref">Figure 5.21: Examples of Unity’s ProBuilder and custom meshes from our 3D DCC</p>
<h3 class="heading-3" id="_idParaDest-119">ProBuilder</h3>
<p class="normal">From the Unity documentation, ProBuilder <a id="_idIndexMarker321"/>is defined as follows:</p>
<p class="quote">You can build, edit, and texture custom geometry in Unity with the actions and tools available in the ProBuilder package. You can also use ProBuilder to help with in-scene level design, prototyping, collision meshes, and play-testing.</p>
<p class="normal">ProBuilder <a id="_idIndexMarker322"/>can quickly set up your scene with collidable surfaces to quickly visualize your environment with ease. To get started with the tool, we will go over some starting steps where you can create your own scene for ease of familiarity. We will go over the installation, creation of the ProBuilder shapes, editing, and then some commonly used tools in ProBuilder.</p>
<h4 class="heading-4">Installing ProBuilder</h4>
<p class="normal">To install ProBuilder, open the <a id="_idIndexMarker323"/>package manager and go to the <strong class="screenText">Unity Registry</strong>, shown in <em class="italic">Figure 5.22</em>. Select <strong class="screenText">ProBuilder</strong>, and then download and install it.</p>
<figure class="mediaobject"><img alt="" height="609" src="../Images/B17304_05_22.png" width="749"/></figure>
<p class="packt_figref">Figure 5.22: Unity Registry Package Manager</p>
<p class="normal">After you install it, you will <a id="_idIndexMarker324"/>need to access the <strong class="screenText">Tools</strong> menu to open the <strong class="screenText">ProBuilder Window</strong>, as seen in <em class="italic">Figure 5.23</em> below.</p>
<figure class="mediaobject"><img alt="" height="427" src="../Images/B17304_05_23.png" width="451"/></figure>
<p class="packt_figref">Figure 5.23: Probuilder Window path</p>
<p class="normal">This will open a floating <a id="_idIndexMarker325"/>window with a lot of options. To get started, let’s dock the window to the left of the scene window. This is a personal preference, but we like to be able to work with ProBuilder and still be able to select the items in the hierarchy with ease. Now that we’re set up, let’s go over the colors in the menu. </p>
<figure class="mediaobject"><img alt="" height="750" src="../Images/B17304_05_24.png" width="286"/></figure>
<p class="packt_figref">Figure 5.24: Probuilder Object mode</p>
<p class="normal">In <em class="italic">Figure 5.24 </em>above, we are<a id="_idIndexMarker326"/> currently looking at the <strong class="screenText">Object</strong> mode of ProBuilder and there are only three colors available in this menu, but there is a fourth color, which we will go over in the <em class="italic">Common ProBuilder Tools</em> section. The three colors we currently see are used in specific ways to help work through all the options easily. They work like this:</p>
<ul>
<li class="bulletList"><strong class="keyWord">Orange</strong>: Object and windowed tools</li>
<li class="bulletList"><strong class="keyWord">Blue</strong>: Selection-based functions</li>
<li class="bulletList"><strong class="keyWord">Green</strong>: Mesh editing tools that affect the entire shape that’s selected</li>
</ul>
<p class="normal">Now that we have an idea of what these are for, let’s get to building our first shape.</p>
<h4 class="heading-4">Creation of ProBuilder shapes</h4>
<p class="normal">Open a new scene and let’s <a id="_idIndexMarker327"/>create a new shape from the ProBuilder menu. This will reveal a small window in the bottom right of the <strong class="screenText">Scene</strong> viewport, seen in <em class="italic">Figure 5.23</em>. You will have several options in terms of the type of shape you want to create. We’re going to select the <strong class="screenText">Plane</strong> option so that we can have something for our shapes to attach to. You can find this located in <em class="italic">Figure 5.25</em> below.</p>
<figure class="mediaobject"><img alt="" height="355" src="../Images/B17304_05_25.png" width="297"/></figure>
<p class="packt_figref">Figure 5.25: Create Shape submenu</p>
<p class="normal">After you select the plane, left-click and drag in the scene to create a plane. Don’t worry about the size of it for the time being; just create the plane and we will make edits next.</p>
<p class="normal">Now, in the hierarchy, if the plane isn’t selected, go ahead and select it. In the Inspector, let’s set the transform to <em class="italic">0</em>, <em class="italic">0</em>, <em class="italic">0</em> so it is centered in our scene at <em class="italic">0</em>. Then, go down to the ProBuilder script and change the size to <em class="italic">80</em>, <em class="italic">0</em>, <em class="italic">80</em>. This will give us a sufficient size to play with whatever shape we want to in the scene. The Inspector should look similar to <em class="italic">Figure 5.26</em> when you’ve finished these steps.</p>
<figure class="mediaobject"><img alt="" height="684" src="../Images/B17304_05_26.png" width="825"/></figure>
<p class="packt_figref">Figure 5.26: Position and shape properties Inspector window</p>
<p class="normal">After the plane is <a id="_idIndexMarker328"/>created, let’s make a cube. Create a new shape and choose a cube shape in the interactive tool in the scene. Left-click and drag to make the base whatever shape you wish. Release the left-click and then you will be able to drag up to give the cube its height. Finish making the cube by clicking again at the height you’d like it to be for now. Once you have that, let’s add one more shape, stairs, to the cube. The goal is to make a set of stairs that would allow a character to be able to climb up to the top of your cube. If your stairs turn out strange, don’t worry; just delete them and try again until you get it close enough. Don’t worry about getting it perfect; we will go into the editing of shapes next.</p>
<h4 class="heading-4">Editing the shapes</h4>
<p class="normal">It’s possible that when <a id="_idIndexMarker329"/>you made your stairs, they turned out something like <em class="italic">Figure 5.27 </em>below.</p>
<figure class="mediaobject"><img alt="" height="560" src="../Images/B17304_05_27.png" width="618"/></figure>
<p class="packt_figref">Figure 5.27: Stair placement problem</p>
<p class="normal">Not that you wanted that, but<a id="_idIndexMarker330"/> it just turned out this way. Luckily, the editing portion of ProBuilder is very strong. If you hover your mouse over the face of the stairs, there should be a blue arrow facing up, down, left, and right respective to the center square of that face, as shown in the preceding figure. </p>
<p class="normal">If you do not have this when you hover over, this means that you may have deselected the stairs and ProBuilder thinks you don’t need to edit the base shape anymore. This can easily be fixed by selecting another item in the scene and then reselecting the stairs. Then, in the Inspector and the ProBuilder script, there is an <strong class="screenText">Edit Shape</strong> button. Selecting this will give you access to the basic editing features again.</p>
<p class="normal">Clicking and dragging the middle square will allow you to move that face of the shape. Clicking the arrow will reorient the entire shape. This is very useful for our stairs. The yellow arrow highlighted in <em class="italic">Figure 5.27</em> will orient the shape to the back of the stairs, which will make the topmost stair be against the cube. This is what we wanted, so we selected it and then used the middle squares to redefine the shape to how we thought the stairs would look the best in this example.</p>
<p class="normal">Even though these tools are quite powerful for blocking out, we can go a bit further and talk about the component manipulation tools.</p>
<h4 class="heading-4">Common ProBuilder tools</h4>
<p class="normal">We’ve created some shapes<a id="_idIndexMarker331"/> and edited their overall state and shape to get the basic building blocks of a structure. To get some more medium shapes, we need to work on the components of these shapes. Looking back to <em class="chapterRef">Chapter 1</em>, <em class="italic">A Primer to the Third Dimension</em>, the component structure of 3D objects are the vertex, edge, and face. These are denoted by a small icon shape at the top of the scene viewport when ProBuilder is installed, seen in <em class="italic">Figure 5.28</em>.</p>
<figure class="mediaobject"><img alt="" height="80" src="../Images/B17304_05_28.png" width="275"/></figure>
<p class="packt_figref">Figure 5.28: Component Selection tool</p>
<p class="normal">From the left to the right, we have <strong class="screenText">Object</strong>, <strong class="screenText">Vertices</strong>, <strong class="screenText">Edges</strong>, and then finally, the <strong class="screenText">Faces</strong> selection. If you select one of them, you will then be able to select those component types of the ProBuilder shape that you have selected in the hierarchy. This will also change the available options in the ProBuilder toolset. Compare this to <em class="italic">Figure 5.29</em>, with the options from <em class="italic">Figure 5.24</em>, and you will see we added red to our available options and the other colors have had changes in their options as well.</p>
<figure class="mediaobject"><img alt="" height="577" src="../Images/B17304_05_29.png" width="625"/></figure>
<p class="packt_figref">Figure 5.29: Component Menu options</p>
<p class="normal">The red options that are <a id="_idIndexMarker332"/>available are per component. In this case, we’ve selected the vertices manipulator; the options for component tools relate to the vertices. The same would be true regarding the selection of edges or faces. Take some time and cycle through them to see the available options for each component. When you get to <a id="_idIndexMarker333"/>faces, let’s stop for a moment as there is one tool that is used very often – the <strong class="screenText">Extrude</strong> tool. </p>
<p class="normal">Extruding a face will duplicate the vertices and keep the faces connected to extrude your geometry out from the selected faces. This is an incredibly powerful and fast tool to build many shapes or add detail. We<a id="_idIndexMarker334"/> will perform two versions of this to give an idea of how this works. These are <strong class="keyWord">extrusions</strong> and <strong class="keyWord">insets</strong>.</p>
<p class="normal">To make an <strong class="keyWord">extrusion</strong>, select the<a id="_idIndexMarker335"/> <strong class="screenText">face</strong> component option at the top of the scene window, and then select a face of the box we have next to the stairs. Press the <em class="keystroke">W</em> key to get to the transform tool. While holding the <em class="keystroke">Shift</em> key, left-click and drag the arrow facing up. You should get an extrusion going up! It should look like <em class="italic">Figure 5.30</em> below.</p>
<figure class="mediaobject"><img alt="" height="395" src="../Images/B17304_05_30.png" width="538"/></figure>
<p class="packt_figref">Figure 5.30: Extrude tool</p>
<p class="normal">The extrusion is <a id="_idIndexMarker336"/>the top box that was pulled out from the selected face. You can now manipulate the face to make it into any shape you would like. We aren’t big fans of all 90-degree angles, so we pressed <em class="keystroke">R</em> and scaled it in from the middle to give it a little bit of personality.</p>
<p class="normal">Now, <strong class="keyWord">insets</strong> are interesting as <a id="_idIndexMarker337"/>they are a specific set of extrusion to bring the face back into the current shape. This is great for adding quick details. How we are going to perform this is by selecting the face that is on the side of the box facing the camera, hitting the letter <em class="keystroke">R</em> for the scale tool, and, while holding down the <em class="keystroke">Shift</em> key, left-clicking the gray box in the center to scale from all sides. After doing that, we will hit the <em class="keystroke">W</em> key to get back to the transform tool, and, while holding the shift key down again, pull the blue arrow to bring in the inset. <em class="italic">Figure 5.31</em> below includes both steps for creating the inset on the same face as suggested.</p>
<figure class="mediaobject"><img alt="" height="337" src="../Images/B17304_05_31.png" width="712"/></figure>
<p class="packt_figref">Figure 5.31: Inset example</p>
<p class="normal">Play around with the<a id="_idIndexMarker338"/> tools for each of the components. You will find that they are there to help speed up the workflow so you can get to blocking out as much as possible, as quickly as possible. There may be a time when you know a specific shape is needed, but you cannot achieve it with ProBuilder tools. In this case, you may need to get into an external tool such as Autodesk Maya or Blender to achieve the look that is needed. We tend to call these objects <strong class="keyWord">premade shapes</strong>. </p>
<h3 class="heading-3" id="_idParaDest-120">Premade basic shapes</h3>
<p class="normal">If you have a<a id="_idIndexMarker339"/> good idea of the shaping that you need for your environment, you may already have set up environment pieces that link together at the right scale. ProBuilder is very good with basic shapes, but you may need some architecture that is specific to your game. If you have the availability, it may be easier to just create that and use the mesh instead of using ProBuilder. </p>
<p class="normal">In some cases, you may have shapes already created previously that would work just as well as ProBuilder, and all you would need to do is import them into Unity and place them where you’d like. This could prove useful for speeding up the block-out phase.</p>
<p class="normal">In our scenes, you will see that we use all three (Terrain, ProBuilder, and premade shapes) to put together a cohesive integrated scene. This is primarily due to the speed at which our artist could create certain models in a DCC versus ProBuilder. Sometimes, however, a basic block that’s been extruded is all we need to make the scene make sense for blocking in.</p>
<p class="normal">Iteration</p>
<p class="normal">The process of <strong class="keyWord">iteration</strong> is looping<a id="_idIndexMarker340"/> through portions of the work to get to a refined enough state to move on to other parts of the game. We will follow <em class="italic">Figure 5.32</em> below as a simple track. This is a high level of the process and after you go through it a few times, you will create more steps for yourself and your team to follow. For now, let’s work through the highlights.</p>
<figure class="mediaobject"><img alt="Diagram  Description automatically generated" height="228" src="../Images/B17304_05_32.png" width="825"/></figure>
<p class="packt_figref">Figure 5.32: Iteration process</p>
<p class="normal">We’ve already gone through several blocks in the process above, such as conceiving and blocking. We just need to go through refining and testing. Refining is the action you take to get as close to answering an action as you can on a granular level. An example of this in relation to our project is asking how close to Myvari’s culture each puzzle is. We needed to refine this from blocks to architecture and ensure the puzzle itself makes sense to the style in mechanics, which we will go over in <em class="chapterRef">Chapter 6</em>,<em class="italic"> Interactions</em> <em class="italic">and</em> <em class="italic">Mechanics</em>. If the granular level answer makes sense, extend your scope to testing. In testing, you will take a broad stroke of the game. If you can, test the feel of the game by walking around and see whether there are any other questions on a high level that may have emerged through the refinement process.</p>
<p class="normal">This is where time can easily go out the window. You will need to have a firm grasp of what “good enough” means for your game. One of the hardest parts of game development is where you must realize that shipping the game is more important than making everything perfect. Be vigilant in your cause to release and get it looking and feeling good enough, and then move on. You have a lot more to get through!</p>
<p class="normal">We’ve only talked about the block-out phase in this environment chapter. This is because of how important it is to block it out and take some time to feel it through play. Fail fast and make changes according to your feedback from either you playing the game yourself or one of your friends playing it. After you get to the point where you think each section is good enough, then you can start importing final meshes that are in the shape or in the place that you’ve decided was the correct space. Once this is complete, make another run with the game as you may see changes from the final meshes coming in that weren’t apparent previously with the block-out meshes.</p>
<p class="normal">Moving around the level and throughout multiple parts of the scene, look carefully at cohesion. Once moving around the level feels good, then you need to push more into the mechanics of the game itself and get into more development, beyond just the art. There will be more questions that pop up in the future. Taking these iterations seriously first will lay a strong foundation to work through when you get into the next portions of your game.</p>
<h1 class="heading-1" id="_idParaDest-121">Summary</h1>
<p class="normal">We’ve gone through a large number of Unity tools in this chapter. Take your time to work through the Terrain tools and the ProBuilder tools to get a good understanding of how they work.</p>
<p class="normal">From this chapter, you gained knowledge of multiple tools to build out an environment. We took time to explain how to iterate through this whole process to gain a strong sense of structure in your environment. You learned how to start with design thinking to build out a concept. Then, you took the concept and started staging each section of the concept, before finally putting the environment together and iterating on it to get a clear view holistically.</p>
<p class="normal">Next up, we will go over the mechanics of your game to fit it within your environment. Keep this chapter in mind when placing the interactions for the mechanics as there will be more iteration throughout the development process. </p>
</div>
</div></body></html>