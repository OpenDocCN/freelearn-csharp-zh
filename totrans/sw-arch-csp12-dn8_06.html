<html><head></head><body>
<div class="Basic-Text-Frame" id="_idContainer129">
<h1 class="chapterNumber"><span class="koboSpan" id="kobo.1.1">6</span></h1>
<h1 class="chapterTitle" id="_idParaDest-124"><span class="koboSpan" id="kobo.2.1">Design Patterns and .NET 8 Implementation</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">Design patterns can be defined as ready-to-use architectural solutions for common problems you encounter during software development. </span><span class="koboSpan" id="kobo.3.2">They are essential for understanding the .NET architecture and useful for solving ordinary problems that we face when designing any piece of software. </span><span class="koboSpan" id="kobo.3.3">In this chapter, we will look at the implementation of some design patterns. </span><span class="koboSpan" id="kobo.3.4">It is worth mentioning that this book does not explain all the known patterns we can use. </span><span class="koboSpan" id="kobo.3.5">The focus here is to explain the importance of studying and applying them.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4.1">In this chapter, we will cover the following topics:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.5.1">Understanding design patterns and their purpose</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.6.1">Understanding the design patterns available in .NET</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.7.1">By the end of this chapter, you will have learned about some of the use cases that you can implement with design patterns.</span></p>
<h1 class="heading-1" id="_idParaDest-125"><span class="koboSpan" id="kobo.8.1">Technical requirements</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.9.1">To complete this chapter, you will need the free Visual Studio 2022 Community Edition or better.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.10.1">You can find the sample code for this chapter at </span><a href="https://github.com/PacktPublishing/Software-Architecture-with-C-Sharp-12-and-.NET-8-4E"><span class="url"><span class="koboSpan" id="kobo.11.1">https://github.com/PacktPublishing/Software-Architecture-with-C-Sharp-12-and-.NET-8-4E</span></span></a><span class="url"><span class="koboSpan" id="kobo.12.1">/tree/main/ch06</span></span><span class="koboSpan" id="kobo.13.1">.</span></p>
<h1 class="heading-1" id="_idParaDest-126"><span class="koboSpan" id="kobo.14.1">Understanding design patterns and their purpose</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.15.1">Deciding on the </span><a id="_idIndexMarker355"/><span class="koboSpan" id="kobo.16.1">design of a system is challenging, and the responsibility associated with this task is enormous. </span><span class="koboSpan" id="kobo.16.2">As software architects, we must always keep in mind that features such as great reusability, good performance, and good maintainability are important for delivering a good solution. </span><span class="koboSpan" id="kobo.16.3">This is where design patterns help and accelerate the design process.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.17.1">As we mentioned previously, design patterns are solutions that have already been discussed and defined so that they can solve common software architectural problems. </span><span class="koboSpan" id="kobo.17.2">This approach grew in popularity after the release of the book </span><em class="italic"><span class="koboSpan" id="kobo.18.1">Design Patterns – Elements of Reusable Object-Oriented Software</span></em><span class="koboSpan" id="kobo.19.1">, where </span><a id="_idIndexMarker356"/><span class="koboSpan" id="kobo.20.1">the </span><strong class="keyWord"><span class="koboSpan" id="kobo.21.1">Gang of Four</span></strong><span class="koboSpan" id="kobo.22.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.23.1">GoF</span></strong><span class="koboSpan" id="kobo.24.1">) divided these patterns into three types: creational, structural, and behavioral.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.25.1">A little bit later, Uncle Bob introduced the SOLID principles to the developer community, giving us the opportunity to efficaciously organize the functions and data structures of each system. </span><span class="koboSpan" id="kobo.25.2">The SOLID design principles indicate how the components of software should be designed and connected. </span><span class="koboSpan" id="kobo.25.3">It is worth mentioning that, compared to the design patterns presented by GoF, the SOLID principles do not deliver code recipes. </span><span class="koboSpan" id="kobo.25.4">Instead, they give you the basic principles to follow when you design your solutions, keeping the software’s structure strong and reliable. </span><span class="koboSpan" id="kobo.25.5">They can be defined as follows:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.26.1">Single Responsibility</span></strong><span class="koboSpan" id="kobo.27.1">: A </span><a id="_idIndexMarker357"/><span class="koboSpan" id="kobo.28.1">module or function should be responsible for a single purpose.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.29.1">Open-Closed</span></strong><span class="koboSpan" id="kobo.30.1">: A</span><a id="_idIndexMarker358"/><span class="koboSpan" id="kobo.31.1"> software artifact should be open for extension but closed for modification.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.32.1">Liskov Substitution</span></strong><span class="koboSpan" id="kobo.33.1">: The</span><a id="_idIndexMarker359"/><span class="koboSpan" id="kobo.34.1"> behavior of a program needs to remain unchanged when you substitute one of its components for another component that has been defined by a supertype of the primer object.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.35.1">Interface Segregation</span></strong><span class="koboSpan" id="kobo.36.1">: Depending</span><a id="_idIndexMarker360"/><span class="koboSpan" id="kobo.37.1"> on the way you create interfaces, you will promote dependencies that do not necessarily occur when you build their concrete objects, causing harm to the system architecture.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.38.1">Dependency Inversion</span></strong><span class="koboSpan" id="kobo.39.1">: The</span><a id="_idIndexMarker361"/><span class="koboSpan" id="kobo.40.1"> most flexible systems are the ones where object dependencies only refer to abstractions.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.41.1">As technologies and software problems change, more patterns are conceived. </span><span class="koboSpan" id="kobo.41.2">The advance of cloud computing has brought a bunch of them, and some can be found at </span><a href="https://docs.microsoft.com/en-us/azure/architecture/patterns"><span class="url"><span class="koboSpan" id="kobo.42.1">https://docs.microsoft.com/en-us/azure/architecture/patterns</span></span></a><span class="koboSpan" id="kobo.43.1">. </span><span class="koboSpan" id="kobo.43.2">The content is organized into three different challenge areas: Data Management, Design and Implementation, and Messaging. </span><span class="koboSpan" id="kobo.43.3">Many of them are described in the chapters of this book, as we can see in the list below:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.44.1">Asynchronous Request-Reply</span></strong><span class="koboSpan" id="kobo.45.1">: This pattern is presented while discussing Azure Durable Functions in </span><em class="italic"><span class="koboSpan" id="kobo.46.1">Chapter 16</span></em><span class="koboSpan" id="kobo.47.1">, </span><em class="italic"><span class="koboSpan" id="kobo.48.1">Working with Serverless - Azure Functions</span></em><span class="koboSpan" id="kobo.49.1">; the orchestrator function for </span><strong class="keyWord"><span class="koboSpan" id="kobo.50.1">async HTTP APIs</span></strong><span class="koboSpan" id="kobo.51.1"> solves this pattern.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.52.1">Bulkhead Isolation</span></strong><span class="koboSpan" id="kobo.53.1">: This pattern is presented while discussing microservices design principles in </span><em class="italic"><span class="koboSpan" id="kobo.54.1">Chapter 11</span></em><span class="koboSpan" id="kobo.55.1">, </span><em class="italic"><span class="koboSpan" id="kobo.56.1">Applying a Microservice Architecture to Your Enterprise Application</span></em><span class="koboSpan" id="kobo.57.1">.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.58.1">Cache-Aside</span></strong><span class="koboSpan" id="kobo.59.1">: Caching was presented in </span><em class="italic"><span class="koboSpan" id="kobo.60.1">Chapter 1</span></em><span class="koboSpan" id="kobo.61.1">, </span><em class="italic"><span class="koboSpan" id="kobo.62.1">Understanding the Importance of Software Architecture</span></em><span class="koboSpan" id="kobo.63.1">. </span><span class="koboSpan" id="kobo.63.2">Its usage with Azure Redis is also presented in </span><em class="italic"><span class="koboSpan" id="kobo.64.1">Chapter 12</span></em><span class="koboSpan" id="kobo.65.1">, </span><em class="italic"><span class="koboSpan" id="kobo.66.1">Choosing Your Data Storage in the Cloud</span></em><span class="koboSpan" id="kobo.67.1">.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.68.1">Circuit-Breaker</span></strong><span class="koboSpan" id="kobo.69.1">: The strategy necessary to implement this is presented in </span><em class="italic"><span class="koboSpan" id="kobo.70.1">Chapter 11</span></em><span class="koboSpan" id="kobo.71.1">, </span><em class="italic"><span class="koboSpan" id="kobo.72.1">Applying a Microservice Architecture to Your Enterprise Application</span></em><span class="koboSpan" id="kobo.73.1">.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.74.1">Command Query Responsibility Segregation</span></strong><span class="koboSpan" id="kobo.75.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.76.1">CQRS</span></strong><span class="koboSpan" id="kobo.77.1">): CQRS is described in </span><em class="italic"><span class="koboSpan" id="kobo.78.1">Chapter 7</span></em><span class="koboSpan" id="kobo.79.1">, </span><em class="italic"><span class="koboSpan" id="kobo.80.1">Understanding the Different Domains in Software Solutions</span></em><span class="koboSpan" id="kobo.81.1">.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.82.1">Publisher/Subscriber</span></strong><span class="koboSpan" id="kobo.83.1">: This pattern will be explained in the subsections below and discussed in </span><em class="italic"><span class="koboSpan" id="kobo.84.1">Chapter 7</span></em><span class="koboSpan" id="kobo.85.1">, </span><em class="italic"><span class="koboSpan" id="kobo.86.1">Understanding the Different Domains in Software Solutions</span></em><span class="koboSpan" id="kobo.87.1">.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.88.1">Retry</span></strong><span class="koboSpan" id="kobo.89.1">: The </span><em class="italic"><span class="koboSpan" id="kobo.90.1">resilient task execution</span></em><span class="koboSpan" id="kobo.91.1"> subsection of </span><em class="italic"><span class="koboSpan" id="kobo.92.1">Chapter 11</span></em><span class="koboSpan" id="kobo.93.1">, </span><em class="italic"><span class="koboSpan" id="kobo.94.1">Applying a Microservice Architecture to Your Enterprise Application</span></em><span class="koboSpan" id="kobo.95.1">, shows how to use Polly, a general framework for applying retries.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.96.1">Queue-Based Load Leveling</span></strong><span class="koboSpan" id="kobo.97.1">: The scenario presented in </span><em class="italic"><span class="koboSpan" id="kobo.98.1">Chapter 16</span></em><span class="koboSpan" id="kobo.99.1">, </span><em class="italic"><span class="koboSpan" id="kobo.100.1">Working with Serverless – Azure Functions</span></em><span class="koboSpan" id="kobo.101.1">, uses a queue that acts as a buffer between a task and a service.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.102.1">The reason why new patterns emerge is related to the challenges we face when new solutions are developed. </span><span class="koboSpan" id="kobo.102.2">Today, availability, data management, messaging, monitoring, performance, scalability, resiliency, and security are aspects we must deal with when delivering cloud solutions.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.103.1">The reason why you should always consider using design patterns in development is quite simple—as a software architect, you cannot spend time reinventing the wheel. </span><span class="koboSpan" id="kobo.103.2">However, there is another great reason for using and understanding them—you will find many of these patterns already implemented in .NET.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.104.1">In the next few subsections, we will cover some of the most well-known patterns. </span><span class="koboSpan" id="kobo.104.2">The idea of this chapter is just to let you know that they exist and need to be studied so that you can accelerate and simplify your projects. </span><span class="koboSpan" id="kobo.104.3">Moreover, each pattern will be presented with a C# code snippet so that you can implement it in your projects while always remembering that we are talking about samples, not code ready for production.</span></p>
<h2 class="heading-2" id="_idParaDest-127"><span class="koboSpan" id="kobo.105.1">Builder pattern</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.106.1">There </span><a id="_idIndexMarker362"/><span class="koboSpan" id="kobo.107.1">are cases where you will have a complex object with different behaviors due to its configuration. </span><span class="koboSpan" id="kobo.107.2">Instead of setting this object up while using it, you may want to decouple its configuration from its usage, using a customized configuration that is already built. </span><span class="koboSpan" id="kobo.107.3">This way, you have different representations of the instances you are building. </span><span class="koboSpan" id="kobo.107.4">This is where you should use the Builder pattern.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.108.1">The </span><a id="_idIndexMarker363"/><span class="koboSpan" id="kobo.109.1">following class diagram shows the pattern that has been implemented for a scenario from this book’s use case, presented in </span><em class="italic"><span class="koboSpan" id="kobo.110.1">Chapter 21</span></em><span class="koboSpan" id="kobo.111.1">,</span><em class="italic"><span class="koboSpan" id="kobo.112.1"> Case Study</span></em><span class="koboSpan" id="kobo.113.1">. </span><span class="koboSpan" id="kobo.113.2">The idea behind this design choice is to simplify the way rooms from WWTravelClub are described.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.114.1">The Fluent API implemented in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.115.1">Room</span></code><span class="koboSpan" id="kobo.116.1"> class enables us to have the construction of each kind of room defined in each builder (</span><code class="inlineCode"><span class="koboSpan" id="kobo.117.1">SimpleRoomBuilder</span></code><span class="koboSpan" id="kobo.118.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.119.1">FamilyRoomBuilder</span></code><span class="koboSpan" id="kobo.120.1">) more simply.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.121.1"><img alt="Graphical user interface, application  Description automatically generated" src="../Images/B19280_06_01.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.122.1">Figure 6.1: Builder pattern</span></p>
<p class="normal"><span class="koboSpan" id="kobo.123.1">As shown </span><a id="_idIndexMarker364"/><span class="koboSpan" id="kobo.124.1">in the following snippet, the code for this is </span><a id="_idIndexMarker365"/><span class="koboSpan" id="kobo.125.1">implemented in a way where the configurations of the instances are not set in the main program. </span><span class="koboSpan" id="kobo.125.2">Instead, you just build the objects using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.126.1">Build()</span></code><span class="koboSpan" id="kobo.127.1"> method. </span><span class="koboSpan" id="kobo.127.2">This example simulates the creation of different room styles (a single room and a family room) in WWTravelClub:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.128.1">using</span></span><span class="koboSpan" id="kobo.129.1"> DesignPatternsSample.BuilderSample;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.130.1">using</span></span><span class="koboSpan" id="kobo.131.1"> System;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.132.1">namespace</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.133.1">DesignPatternsSample</span></span><span class="koboSpan" id="kobo.134.1">
{
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.135.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.136.1">Program</span></span><span class="koboSpan" id="kobo.137.1">
    {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.138.1">static</span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.139.1">void</span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="koboSpan" id="kobo.140.1">Main</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.141.1">()</span></span><span class="koboSpan" id="kobo.142.1">
        {
          </span><span class="hljs-meta"><span class="koboSpan" id="kobo.143.1">#</span></span><span class="hljs-keyword"><span class="koboSpan" id="kobo.144.1">region</span></span><span class="hljs-meta"><span class="koboSpan" id="kobo.145.1"> Builder Sample</span></span><span class="koboSpan" id="kobo.146.1">
          Console.WriteLine(</span><span class="hljs-string"><span class="koboSpan" id="kobo.147.1">"Builder Sample"</span></span><span class="koboSpan" id="kobo.148.1">);
          </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.149.1">var</span></span><span class="koboSpan" id="kobo.150.1"> simpleRoom = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.151.1">new</span></span><span class="koboSpan" id="kobo.152.1"> SimpleRoomBuilder().Build();
          simpleRoom.Describe();
         
          </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.153.1">var</span></span><span class="koboSpan" id="kobo.154.1"> familyRoom = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.155.1">new</span></span><span class="koboSpan" id="kobo.156.1"> FamilyRoomBuilder().Build();
          familyRoom.Describe();
          </span><span class="hljs-meta"><span class="koboSpan" id="kobo.157.1">#</span></span><span class="hljs-keyword"><span class="koboSpan" id="kobo.158.1">endregion</span></span><span class="koboSpan" id="kobo.159.1">
          Console.ReadKey();
        }
    }
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.160.1">The </span><a id="_idIndexMarker366"/><span class="koboSpan" id="kobo.161.1">result of this implementation is quite simple but clarifies the</span><a id="_idIndexMarker367"/><span class="koboSpan" id="kobo.162.1"> reason why you need to implement a pattern:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.163.1"><img alt="Text  Description automatically generated" src="../Images/B19280_06_02.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.164.1">Figure 6.2: Builder pattern sample result</span></p>
<p class="normal"><span class="koboSpan" id="kobo.165.1">As soon as you have the implementation, evolving this code becomes simpler. </span><span class="koboSpan" id="kobo.165.2">For example, if you need to build a different style of room, you can just create a new builder for that type of room, and you will be able to use it.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.166.1">The reason why this implementation becomes quite simple is related to the usage of chaining methods, as we can see in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.167.1">Room</span></code><span class="koboSpan" id="kobo.168.1"> class:</span></p>
<pre class="programlisting code"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.169.1">public</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.170.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.171.1">Room</span></span><span class="koboSpan" id="kobo.172.1">
    {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.173.1">private</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.174.1">readonly</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.175.1">string</span></span><span class="koboSpan" id="kobo.176.1"> _name;
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.177.1">private</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.178.1">bool</span></span><span class="koboSpan" id="kobo.179.1"> wiFiFreeOfCharge;
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.180.1">private</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.181.1">int</span></span><span class="koboSpan" id="kobo.182.1"> numberOfBeds;
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.183.1">private</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.184.1">bool</span></span><span class="koboSpan" id="kobo.185.1"> balconyAvailable;
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.186.1">public</span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="koboSpan" id="kobo.187.1">Room</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.188.1">(</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.189.1">string</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.190.1"> name</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.191.1">)</span></span><span class="koboSpan" id="kobo.192.1">
        {
            _name = name;
        }
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.193.1">public</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.194.1"> Room </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.195.1">WithBalcony</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.196.1">()</span></span><span class="koboSpan" id="kobo.197.1">
        {
            balconyAvailable = </span><span class="hljs-literal"><span class="koboSpan" id="kobo.198.1">true</span></span><span class="koboSpan" id="kobo.199.1">;
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.200.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.201.1">this</span></span><span class="koboSpan" id="kobo.202.1">;
        }
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.203.1">public</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.204.1"> Room </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.205.1">WithBed</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.206.1">(</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.207.1">int</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.208.1"> numberOfBeds</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.209.1">)</span></span><span class="koboSpan" id="kobo.210.1">
        {
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.211.1">this</span></span><span class="koboSpan" id="kobo.212.1">.numberOfBeds = numberOfBeds;
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.213.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.214.1">this</span></span><span class="koboSpan" id="kobo.215.1">;
        }
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.216.1">public</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.217.1"> Room </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.218.1">WithWiFi</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.219.1">()</span></span><span class="koboSpan" id="kobo.220.1">
        {
            wiFiFreeOfCharge = </span><span class="hljs-literal"><span class="koboSpan" id="kobo.221.1">true</span></span><span class="koboSpan" id="kobo.222.1">;
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.223.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.224.1">this</span></span><span class="koboSpan" id="kobo.225.1">;
        }
    ...
    </span><span class="koboSpan" id="kobo.225.2">}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.226.1">Fortunately, if you </span><a id="_idIndexMarker368"/><span class="koboSpan" id="kobo.227.1">need to add the configuration settings for the </span><a id="_idIndexMarker369"/><span class="koboSpan" id="kobo.228.1">product, all the concrete classes you used previously will be defined in the Builder interface and stored there so that you can update them with ease.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.229.1">We will see a great implementation of the Builder pattern in .NET in the </span><em class="italic"><span class="koboSpan" id="kobo.230.1">Understanding the design patterns available in .NET </span></em><span class="koboSpan" id="kobo.231.1">section. </span><span class="koboSpan" id="kobo.231.2">There, you will be able to understand how Generic Host was implemented using </span><code class="inlineCode"><span class="koboSpan" id="kobo.232.1">HostBuilder</span></code><span class="koboSpan" id="kobo.233.1">.</span></p>
<h2 class="heading-2" id="_idParaDest-128"><span class="koboSpan" id="kobo.234.1">Factory pattern</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.235.1">The Factory pattern is useful in situations where you have multiple objects from the same abstraction, and you only know which one needs to be created at runtime. </span><span class="koboSpan" id="kobo.235.2">This means you will have to create the instance according to a certain configuration or according to where the software lives now.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.236.1">For instance, let us check out the WWTravelClub sample. </span><span class="koboSpan" id="kobo.236.2">Here, there is a user story that describes that this application will have customers from all over the world paying for their trips. </span><span class="koboSpan" id="kobo.236.3">However, in the real world, there are different payment services available for each country. </span><span class="koboSpan" id="kobo.236.4">The process of paying is similar for each country, but this system will have more than one payment service available. </span><span class="koboSpan" id="kobo.236.5">A good way to simplify this payment implementation is by using the Factory pattern.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.237.1">The following</span><a id="_idIndexMarker370"/><span class="koboSpan" id="kobo.238.1"> diagram shows the basic idea of its architectural implementation:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.239.1"><img alt="" role="presentation" src="../Images/B19280_06_03.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.240.1">Figure 6.3: Factory pattern</span></p>
<p class="normal"><span class="koboSpan" id="kobo.241.1">Notice</span><a id="_idIndexMarker371"/><span class="koboSpan" id="kobo.242.1"> that since you have an interface that describes what the payment service for the application is, you can use the Factory pattern to change the concrete class according to the services that are available:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.243.1">static</span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.244.1">void</span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="koboSpan" id="kobo.245.1">Main</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.246.1">()</span></span><span class="koboSpan" id="kobo.247.1">
{
    </span><span class="hljs-meta"><span class="koboSpan" id="kobo.248.1">#</span></span><span class="hljs-keyword"><span class="koboSpan" id="kobo.249.1">region</span></span><span class="hljs-meta"><span class="koboSpan" id="kobo.250.1"> Factory Sample</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.251.1">// In this sample, we will use the Factory Method Pattern</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.252.1">      // to create a Payment Service to charge a Brazilian</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.253.1">      // customer</span></span><span class="koboSpan" id="kobo.254.1">
    ProcessCharging(
    PaymentServiceFactory.ServicesAvailable.Brazilian,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.255.1">"gabriel@sample.com"</span></span><span class="koboSpan" id="kobo.256.1">,
     </span><span class="hljs-number"><span class="koboSpan" id="kobo.257.1">178.90</span></span><span class="koboSpan" id="kobo.258.1">m,
     EnumChargingOptions.CreditCard);
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.259.1">// In this sample, we will use the Factory Method Pattern</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.260.1">    // to create a Payment Service to charge an Italian</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.261.1">// customer</span></span><span class="koboSpan" id="kobo.262.1">
     ProcessCharging(
     PaymentServiceFactory.ServicesAvailable.Italian,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.263.1">"francesco@sample.com"</span></span><span class="koboSpan" id="kobo.264.1">,
     </span><span class="hljs-number"><span class="koboSpan" id="kobo.265.1">188.70</span></span><span class="koboSpan" id="kobo.266.1">m,
     EnumChargingOptions.DebitCard);
    </span><span class="hljs-meta"><span class="koboSpan" id="kobo.267.1">#</span></span><span class="hljs-keyword"><span class="koboSpan" id="kobo.268.1">endregion</span></span><span class="koboSpan" id="kobo.269.1">
    Console.ReadKey();
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.270.1">private</span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.271.1">static</span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.272.1">void</span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="koboSpan" id="kobo.273.1">ProcessCharging</span></span>
<span class="hljs-function"><span class="koboSpan" id="kobo.274.1">    (</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.275.1">PaymentServiceFactory.ServicesAvailable serviceToCharge,</span></span>
<span class="hljs-params"> </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.276.1">string</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.277.1"> emailToCharge, </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.278.1">decimal</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.279.1"> moneyToCharge,</span></span>
<span class="hljs-params"><span class="koboSpan" id="kobo.280.1">    EnumChargingOptions optionToCharge</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.281.1">)</span></span><span class="koboSpan" id="kobo.282.1">
{
    PaymentServiceFactory factory = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.283.1">new</span></span><span class="koboSpan" id="kobo.284.1"> PaymentServiceFactory();
    IPaymentService service = factory.Create(serviceToCharge);
    service.EmailToCharge = emailToCharge;
    service.MoneyToCharge = moneyToCharge;
    service.OptionToCharge = optionToCharge;
    service.ProcessCharging();
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.285.1">Once again, the</span><a id="_idIndexMarker372"/><span class="koboSpan" id="kobo.286.1"> service’s usage has been simplified due</span><a id="_idIndexMarker373"/><span class="koboSpan" id="kobo.287.1"> to the implemented pattern. </span><span class="koboSpan" id="kobo.287.2">If you had to use this code in a real-world application, you would change the instance’s behavior by defining the service you needed in the Factory pattern.</span></p>
<h2 class="heading-2" id="_idParaDest-129"><span class="koboSpan" id="kobo.288.1">Singleton pattern</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.289.1">When</span><a id="_idIndexMarker374"/><span class="koboSpan" id="kobo.290.1"> you implement Singleton in your application, you </span><a id="_idIndexMarker375"/><span class="koboSpan" id="kobo.291.1">will have a single instance of the object implemented in the entire solution. </span><span class="koboSpan" id="kobo.291.2">This is one of the most used patterns in every application. </span><span class="koboSpan" id="kobo.291.3">The reason is simple—there are many use cases where you need some classes to have just one instance. </span><span class="koboSpan" id="kobo.291.4">Singletons solve this by providing a better solution than a global variable does.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.292.1">In the Singleton pattern, the class is responsible for creating and delivering a single object that </span><a id="_idIndexMarker376"/><span class="koboSpan" id="kobo.293.1">will be used by the application. </span><span class="koboSpan" id="kobo.293.2">In other words, the</span><a id="_idIndexMarker377"/><span class="koboSpan" id="kobo.294.1"> Singleton class creates a single instance:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.295.1"><img alt="A picture containing graphical user interface  Description automatically generated" src="../Images/B19280_06_04.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.296.1">Figure 6.4: Singleton pattern</span></p>
<p class="normal"><span class="koboSpan" id="kobo.297.1">To do so, the object that is created is </span><code class="inlineCode"><span class="koboSpan" id="kobo.298.1">static</span></code><span class="koboSpan" id="kobo.299.1"> and delivered in a static property or method. </span><span class="koboSpan" id="kobo.299.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.300.1">??=</span></code><span class="koboSpan" id="kobo.301.1"> operator assigns the value of its right operand to its left one if its value is null.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.302.1">The following code implements the Singleton pattern, which has a </span><code class="inlineCode"><span class="koboSpan" id="kobo.303.1">Message</span></code><span class="koboSpan" id="kobo.304.1"> property and a </span><code class="inlineCode"><span class="koboSpan" id="kobo.305.1">Print()</span></code><span class="koboSpan" id="kobo.306.1"> method:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.307.1">public</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.308.1">sealed</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.309.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.310.1">SingletonDemo</span></span><span class="koboSpan" id="kobo.311.1">
{
    </span><span class="hljs-meta"><span class="koboSpan" id="kobo.312.1">#</span></span><span class="hljs-keyword"><span class="koboSpan" id="kobo.313.1">region</span></span><span class="hljs-meta"><span class="koboSpan" id="kobo.314.1"> This is the Singleton definition</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.315.1">private</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.316.1">static</span></span><span class="koboSpan" id="kobo.317.1"> SingletonDemo _instance;
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.318.1">public</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.319.1">static</span></span><span class="koboSpan" id="kobo.320.1"> SingletonDemo Current =&gt; _instance ??= </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.321.1">new</span></span><span class="koboSpan" id="kobo.322.1">
        SingletonDemo();
    </span><span class="hljs-meta"><span class="koboSpan" id="kobo.323.1">#</span></span><span class="hljs-keyword"><span class="koboSpan" id="kobo.324.1">endregion</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.325.1">public</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.326.1">string</span></span><span class="koboSpan" id="kobo.327.1"> Message { </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.328.1">get</span></span><span class="koboSpan" id="kobo.329.1">; </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.330.1">set</span></span><span class="koboSpan" id="kobo.331.1">; }
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.332.1">public</span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.333.1">void</span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="koboSpan" id="kobo.334.1">Print</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.335.1">()</span></span><span class="koboSpan" id="kobo.336.1">
    {
        Console.WriteLine(Message);
    }
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.337.1">Its usage is simple–you just need to call the static property every time you need to use the Singleton object:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.338.1">SingletonDemo.Current.Message = </span><span class="hljs-string"><span class="koboSpan" id="kobo.339.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.340.1">This text will be printed by "</span></span><span class="koboSpan" id="kobo.341.1"> +
  </span><span class="hljs-string"><span class="koboSpan" id="kobo.342.1">"the singleton. </span><span class="koboSpan" id="kobo.342.2">Be careful with concurrency."</span></span><span class="koboSpan" id="kobo.343.1">;
SingletonDemo.Current.Print();
</span></code></pre>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.344.1">Be careful because the sample can have concurrency issues according to the usage defined! </span><span class="koboSpan" id="kobo.344.2">Please refer to </span><em class="chapterRef"><span class="koboSpan" id="kobo.345.1">Chapter 2</span></em><span class="koboSpan" id="kobo.346.1">, </span><em class="italic"><span class="koboSpan" id="kobo.347.1">Non-Functional Requirements</span></em><span class="koboSpan" id="kobo.348.1">, to read a bit more about concurrency and multithreading.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.349.1">One </span><a id="_idIndexMarker378"/><span class="koboSpan" id="kobo.350.1">of the situations where you can use this pattern is when</span><a id="_idIndexMarker379"/><span class="koboSpan" id="kobo.351.1"> you need to deliver the app configuration in a way that can be easily accessed from anywhere in the solution. </span><span class="koboSpan" id="kobo.351.2">For instance, let us say you have some configuration parameters that are stored in a table, which your app needs to query at several decision points. </span><span class="koboSpan" id="kobo.351.3">Although we have standard solutions like </span><code class="inlineCode"><span class="koboSpan" id="kobo.352.1">appsettings.json</span></code><span class="koboSpan" id="kobo.353.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.354.1">web.config</span></code><span class="koboSpan" id="kobo.355.1">, where caching is out of the box, you may want to use this custom solution. </span><span class="koboSpan" id="kobo.355.2">In this case, instead of querying the configuration table directly, you can create a Singleton class to help you:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.356.1"><img alt="Graphical user interface, text, application, chat or text message  Description automatically generated" src="../Images/B19280_06_05.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.357.1">Figure 6.5: Singleton pattern usage</span></p>
<p class="normal"><span class="koboSpan" id="kobo.358.1">Moreover, you</span><a id="_idIndexMarker380"/><span class="koboSpan" id="kobo.359.1"> will need to implement a cache in this Singleton, thus</span><a id="_idIndexMarker381"/><span class="koboSpan" id="kobo.360.1"> improving the performance of the system since you will be able to decide whether the system will check each configuration in the database every time it needs it or if the cache will be used. </span><span class="koboSpan" id="kobo.360.2">The following screenshot shows the implementation of the cache, where the configuration is loaded every 5 seconds. </span><span class="koboSpan" id="kobo.360.3">The parameter that is read in this case is just a random number:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.361.1"><img alt="A picture containing calendar  Description automatically generated" src="../Images/B19280_06_06.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.362.1">Figure 6.6: Cache implementation inside the Singleton pattern</span></p>
<p class="normal"><span class="koboSpan" id="kobo.363.1">This is great </span><a id="_idIndexMarker382"/><span class="koboSpan" id="kobo.364.1">for the application’s performance. </span><span class="koboSpan" id="kobo.364.2">Besides, using</span><a id="_idIndexMarker383"/><span class="koboSpan" id="kobo.365.1"> parameters in several places in your code is simpler since you do not have to create configuration instances everywhere in the code.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.366.1">It is worth mentioning that due to the dependency injection implementation in .NET, Singleton pattern usage has become less common since you can set dependency injection to handle your Singleton objects. </span><span class="koboSpan" id="kobo.366.2">We will cover dependency injection in .NET in later sections of this chapter.</span></p>
<h2 class="heading-2" id="_idParaDest-130"><span class="koboSpan" id="kobo.367.1">Proxy pattern</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.368.1">The Proxy pattern is </span><a id="_idIndexMarker384"/><span class="koboSpan" id="kobo.369.1">used when you need to provide an object that controls access to another object. </span><span class="koboSpan" id="kobo.369.2">One of the biggest reasons why you should do this is related to the cost of creating the object that is being controlled. </span><span class="koboSpan" id="kobo.369.3">For instance, if the</span><a id="_idIndexMarker385"/><span class="koboSpan" id="kobo.370.1"> controlled object takes too long to be created or consumes too much memory, a proxy can be used to guarantee that the largest part of the object will only be created when it is required.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.371.1">The following class diagram is of a </span><strong class="keyWord"><span class="koboSpan" id="kobo.372.1">Proxy</span></strong><span class="koboSpan" id="kobo.373.1"> pattern implementation for loading pictures from </span><strong class="keyWord"><span class="koboSpan" id="kobo.374.1">Room </span></strong><span class="koboSpan" id="kobo.375.1">(see </span><em class="italic"><span class="koboSpan" id="kobo.376.1">Figure 6.1</span></em><span class="koboSpan" id="kobo.377.1">), but only when requested:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.378.1"><img alt="Diagram  Description automatically generated" src="../Images/B19280_06_07.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.379.1">Figure 6.7: Proxy pattern implementation</span></p>
<p class="normal"><span class="koboSpan" id="kobo.380.1">The client of this proxy will request its creation. </span><span class="koboSpan" id="kobo.380.2">Here, the proxy will only gather basic information (</span><code class="inlineCode"><span class="koboSpan" id="kobo.381.1">Id</span></code><span class="koboSpan" id="kobo.382.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.383.1">FileName</span></code><span class="koboSpan" id="kobo.384.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.385.1">Tags</span></code><span class="koboSpan" id="kobo.386.1">) from the real object and will not query </span><code class="inlineCode"><span class="koboSpan" id="kobo.387.1">PictureData</span></code><span class="koboSpan" id="kobo.388.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.389.1">Only when </span><code class="inlineCode"><span class="koboSpan" id="kobo.390.1">PictureData</span></code><span class="koboSpan" id="kobo.391.1"> is requested</span><a id="_idIndexMarker386"/><span class="koboSpan" id="kobo.392.1"> in the first call will the proxy load it, as we can confirm with the message Now the picture is loaded!. </span><span class="koboSpan" id="kobo.392.2">After that, in the second picture data request, the</span><a id="_idIndexMarker387"/><span class="koboSpan" id="kobo.393.1"> proxy will not load the </span><code class="inlineCode"><span class="koboSpan" id="kobo.394.1">PictureData</span></code><span class="koboSpan" id="kobo.395.1"> again, which causes a better performance, as we can see in </span><em class="italic"><span class="koboSpan" id="kobo.396.1">Figure 6.8</span></em><span class="koboSpan" id="kobo.397.1">:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.398.1">static</span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.399.1">void</span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="koboSpan" id="kobo.400.1">Main</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.401.1">()</span></span><span class="koboSpan" id="kobo.402.1">
{
    Console.WriteLine(</span><span class="hljs-string"><span class="koboSpan" id="kobo.403.1">"Proxy Sample"</span></span><span class="koboSpan" id="kobo.404.1">);
    ExecuteProxySample(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.405.1">new</span></span><span class="koboSpan" id="kobo.406.1"> ProxyRoomPicture());
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.407.1">private</span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.408.1">static</span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.409.1">void</span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="koboSpan" id="kobo.410.1">ExecuteProxySample</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.411.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.412.1">IRoomPicture roomPicture</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.413.1">)</span></span><span class="koboSpan" id="kobo.414.1">
{
    Console.WriteLine(</span><span class="hljs-string"><span class="koboSpan" id="kobo.415.1">$"Picture Id: </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.416.1">{roomPicture.Id}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.417.1">"</span></span><span class="koboSpan" id="kobo.418.1">);
    Console.WriteLine(</span><span class="hljs-string"><span class="koboSpan" id="kobo.419.1">$"Picture FileName: </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.420.1">{roomPicture.FileName}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.421.1">"</span></span><span class="koboSpan" id="kobo.422.1">);
    Console.WriteLine(</span><span class="hljs-string"><span class="koboSpan" id="kobo.423.1">$"Tags: </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.424.1">{</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.425.1">string</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.426.1">.Join(</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.427.1">";"</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.428.1">, roomPicture.Tags)}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.429.1">"</span></span><span class="koboSpan" id="kobo.430.1">);
    Console.WriteLine(</span><span class="hljs-string"><span class="koboSpan" id="kobo.431.1">$"1st call: Picture Data"</span></span><span class="koboSpan" id="kobo.432.1">);
    Console.WriteLine(</span><span class="hljs-string"><span class="koboSpan" id="kobo.433.1">$"Image: </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.434.1">{roomPicture.PictureData}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.435.1">"</span></span><span class="koboSpan" id="kobo.436.1">);
    Console.WriteLine(</span><span class="hljs-string"><span class="koboSpan" id="kobo.437.1">$"2nd call: Picture Data"</span></span><span class="koboSpan" id="kobo.438.1">);
    Console.WriteLine(</span><span class="hljs-string"><span class="koboSpan" id="kobo.439.1">$"Image: </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.440.1">{roomPicture.PictureData}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.441.1">"</span></span><span class="koboSpan" id="kobo.442.1">);
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.443.1">If </span><code class="inlineCode"><span class="koboSpan" id="kobo.444.1">PictureData</span></code><span class="koboSpan" id="kobo.445.1"> is requested again, since the image data is already in place, the proxy will guarantee that image reloading will not be repeated. </span><span class="koboSpan" id="kobo.445.2">The following screenshot shows the result of running the preceding code:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.446.1"><img alt="Text  Description automatically generated" src="../Images/B19280_06_08.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.447.1">Figure 6.8: Proxy pattern result</span></p>
<p class="normal"><span class="koboSpan" id="kobo.448.1">This technique can be referred to by another name: </span><strong class="keyWord"><span class="koboSpan" id="kobo.449.1">lazy loading</span></strong><span class="koboSpan" id="kobo.450.1">. </span><span class="koboSpan" id="kobo.450.2">In fact, the Proxy pattern is a </span><a id="_idIndexMarker388"/><span class="koboSpan" id="kobo.451.1">way of implementing lazy loading. </span><span class="koboSpan" id="kobo.451.2">Another approach for implementing lazy loading is the </span><a id="_idIndexMarker389"/><span class="koboSpan" id="kobo.452.1">usage of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.453.1">Lazy&lt;T&gt;</span></code><span class="koboSpan" id="kobo.454.1"> type. </span><span class="koboSpan" id="kobo.454.2">For instance, in Entity Framework Core, as discussed in </span><em class="italic"><span class="koboSpan" id="kobo.455.1">Chapter 13</span></em><span class="koboSpan" id="kobo.456.1">, </span><em class="italic"><span class="koboSpan" id="kobo.457.1">Interacting with Data in C# – Entity Framework Core</span></em><span class="koboSpan" id="kobo.458.1">, you can turn on lazy loading using proxies. </span><span class="koboSpan" id="kobo.458.2">You can find out more about this at </span><a href="https://docs.microsoft.com/en-us/ef/core/querying/related-data#lazy-loading"><span class="url"><span class="koboSpan" id="kobo.459.1">https://docs.microsoft.com/en-us/ef/core/querying/related-data#lazy-loading</span></span></a><span class="koboSpan" id="kobo.460.1">.</span></p>
<h2 class="heading-2" id="_idParaDest-131"><span class="koboSpan" id="kobo.461.1">Command pattern</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.462.1">There are </span><a id="_idIndexMarker390"/><span class="koboSpan" id="kobo.463.1">many cases where you need to execute a </span><strong class="keyWord"><span class="koboSpan" id="kobo.464.1">command</span></strong><span class="koboSpan" id="kobo.465.1"> that will affect the behavior of an object. </span><span class="koboSpan" id="kobo.465.2">The Command pattern can help </span><a id="_idIndexMarker391"/><span class="koboSpan" id="kobo.466.1">you with this by encapsulating this kind of request in an object. </span><span class="koboSpan" id="kobo.466.2">The pattern also describes how to handle undo/redo support for a request.</span></p>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.467.1">There is another design pattern called Memento that also has the purpose of implementing undo actions. </span><span class="koboSpan" id="kobo.467.2">However, the Command pattern focuses on encapsulating requests as objects, whereas Memento focuses on capturing and externalizing an object’s internal state for the purpose of restoring it later.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.468.1">For instance, let us imagine that, on the WWTravelClub website, users can evaluate packages by specifying whether they liked, disliked, or even loved their experience.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.469.1">The following class diagram is an example of what can be implemented to create this rating system with the Command pattern:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.470.1"><img alt="" role="presentation" src="../Images/B19280_06_09.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.471.1">Figure 6.9: Command pattern</span></p>
<p class="normal"><span class="koboSpan" id="kobo.472.1">Notice the way this pattern works – if you need a different command, such as </span><code class="inlineCode"><span class="koboSpan" id="kobo.473.1">Hate</span></code><span class="koboSpan" id="kobo.474.1">, you will only implement a new class based on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.475.1">ICommand</span></code><span class="koboSpan" id="kobo.476.1"> interface. </span><span class="koboSpan" id="kobo.476.2">You do not need to change the</span><a id="_idIndexMarker392"/><span class="koboSpan" id="kobo.477.1"> code from other action classes. </span><span class="koboSpan" id="kobo.477.2">The change in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.478.1">Package</span></code><span class="koboSpan" id="kobo.479.1"> class will not impact the commands already implemented. </span><span class="koboSpan" id="kobo.479.2">Besides </span><a id="_idIndexMarker393"/><span class="koboSpan" id="kobo.480.1">that, if you want to implement the </span><code class="inlineCode"><span class="koboSpan" id="kobo.481.1">Redo</span></code><span class="koboSpan" id="kobo.482.1"> method, it can be added in a similar way to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.483.1">Undo</span></code><span class="koboSpan" id="kobo.484.1"> method. </span><span class="koboSpan" id="kobo.484.2">The full code sample for this is available in this book’s GitHub repository.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.485.1">It might also help to mention that ASP.NET Core MVC uses the Command pattern for its </span><code class="inlineCode"><span class="koboSpan" id="kobo.486.1">IActionResult</span></code><span class="koboSpan" id="kobo.487.1"> hierarchy. </span><span class="koboSpan" id="kobo.487.2">The business operation described in </span><em class="italic"><span class="koboSpan" id="kobo.488.1">Chapter 7</span></em><span class="koboSpan" id="kobo.489.1">, </span><em class="italic"><span class="koboSpan" id="kobo.490.1">Understanding the Different Domains in Software Solutions</span></em><span class="koboSpan" id="kobo.491.1">, will make use of this pattern to execute business rules.</span></p>
<h2 class="heading-2" id="_idParaDest-132"><span class="koboSpan" id="kobo.492.1">Publisher/Subscriber pattern</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.493.1">Providing information from an object to a group </span><a id="_idIndexMarker394"/><span class="koboSpan" id="kobo.494.1">of other </span><a id="_idIndexMarker395"/><span class="koboSpan" id="kobo.495.1">objects is common in all applications. </span><span class="koboSpan" id="kobo.495.2">The Publisher/Subscriber pattern is almost mandatory when there is a large volume of components (subscribers) that will receive a message containing the information that was sent by the object (publisher).</span></p>
<p class="normal"><span class="koboSpan" id="kobo.496.1">The concept here is quite simple to understand and is shown in the following diagram:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.497.1"><img alt="" role="presentation" src="../Images/B19280_06_10.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.498.1">Figure 6.10: Publisher/Subscriber sample case</span></p>
<p class="normal"><span class="koboSpan" id="kobo.499.1">When you have an indefinite number of different possible subscribers, it is essential to decouple the component that broadcasts information from the components that consume it. </span><span class="koboSpan" id="kobo.499.2">The Publisher/Subscriber pattern does this for us.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.500.1">Implementing</span><a id="_idIndexMarker396"/><span class="koboSpan" id="kobo.501.1"> this pattern is complex since distributing environments is not a trivial task. </span><span class="koboSpan" id="kobo.501.2">Therefore, it is recommended that you consider pre-existing technologies for implementing the message broker</span><a id="_idIndexMarker397"/><span class="koboSpan" id="kobo.502.1"> that connects the input channel to the output channels instead of building it from scratch. </span><span class="koboSpan" id="kobo.502.2">Azure Service Bus is a reliable infrastructure component where you can find this pattern provided, so all you need to do is connect to it.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.503.1">RabbitMQ, which we mention in </span><em class="italic"><span class="koboSpan" id="kobo.504.1">Chapter 11</span></em><span class="koboSpan" id="kobo.505.1">, </span><em class="italic"><span class="koboSpan" id="kobo.506.1">Applying a Microservice Architecture to Your Enterprise Application</span></em><span class="koboSpan" id="kobo.507.1">, and in </span><em class="italic"><span class="koboSpan" id="kobo.508.1">Chapter 14</span></em><span class="koboSpan" id="kobo.509.1">, </span><em class="italic"><span class="koboSpan" id="kobo.510.1">Implementing Microservices with .NET</span></em><span class="koboSpan" id="kobo.511.1">, is another service that can be used to implement a message broker, but it is a lower-level infrastructure and requires several manual implementations, such as retries in errors.</span></p>
<h2 class="heading-2" id="_idParaDest-133"><span class="koboSpan" id="kobo.512.1">Dependency Injection pattern</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.513.1">The </span><a id="_idIndexMarker398"/><span class="koboSpan" id="kobo.514.1">Dependency Injection pattern is considered a</span><a id="_idIndexMarker399"/><span class="koboSpan" id="kobo.515.1"> good way to implement the Dependency Inversion principle, guiding you to implement this SOLID principle.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.516.1">The concept is quite simple. </span><span class="koboSpan" id="kobo.516.2">Instead of creating instances of the objects that the component depends on, you just need to define their dependencies, declare their interfaces, and enable the reception of the objects by </span><strong class="keyWord"><span class="koboSpan" id="kobo.517.1">injection</span></strong><span class="koboSpan" id="kobo.518.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.519.1">There are three ways to perform dependency injection:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.520.1">Use the constructor of the class to receive the objects</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.521.1">Tag some class properties to receive the objects</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.522.1">Define an interface with a method to inject all the necessary components</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.523.1">The following diagram shows the implementation of the Dependency Injection pattern using the constructor of the class to receive the objects. </span><span class="koboSpan" id="kobo.523.2">In this case, it receives </span><code class="inlineCode"><span class="koboSpan" id="kobo.524.1">UserAddress</span></code><span class="koboSpan" id="kobo.525.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.526.1">DestinationAddress</span></code><span class="koboSpan" id="kobo.527.1"> classes, which can be completely different, but both of them implement the </span><code class="inlineCode"><span class="koboSpan" id="kobo.528.1">IAddress</span></code><span class="koboSpan" id="kobo.529.1"> interface, which enables the </span><strong class="keyWord"><span class="koboSpan" id="kobo.530.1">DistanceCalculator</span></strong><span class="koboSpan" id="kobo.531.1"> to work:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.532.1"><img alt="Graphical user interface  Description automatically generated" src="../Images/B19280_06_11.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.533.1">Figure 6.11: Dependency Injection pattern</span></p>
<p class="normal"><span class="koboSpan" id="kobo.534.1">Apart </span><a id="_idIndexMarker400"/><span class="koboSpan" id="kobo.535.1">from these three ways mentioned above, Dependency Injection can be used </span><a id="_idIndexMarker401"/><span class="koboSpan" id="kobo.536.1">with an </span><strong class="keyWord"><span class="koboSpan" id="kobo.537.1">Inversion of Control</span></strong><span class="koboSpan" id="kobo.538.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.539.1">IoC</span></strong><span class="koboSpan" id="kobo.540.1">) container. </span><span class="koboSpan" id="kobo.540.2">This</span><a id="_idIndexMarker402"/><span class="koboSpan" id="kobo.541.1"> container enables the automatic injection of dependencies whenever they are asked for. </span><span class="koboSpan" id="kobo.541.2">There are several IoC container frameworks available on the market, but with .NET 8, for most cases, there is no need to use third-party software since it contains a set of libraries to solve this in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.542.1">Microsoft.Extensions.DependencyInjection</span></code><span class="koboSpan" id="kobo.543.1"> namespace.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.544.1">This IoC container is responsible for creating and disposing of the objects that are requested. </span><span class="koboSpan" id="kobo.544.2">The implementation of Dependency Injection is based on constructor types. </span><span class="koboSpan" id="kobo.544.3">There are three options for the injected component’s lifetime:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.545.1">Transient</span></strong><span class="koboSpan" id="kobo.546.1">: The objects are created each time they are requested.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.547.1">Scoped</span></strong><span class="koboSpan" id="kobo.548.1">: The objects are created for each scope defined in the application. </span><span class="koboSpan" id="kobo.548.2">In a web app, a </span><strong class="keyWord"><span class="koboSpan" id="kobo.549.1">scope</span></strong><span class="koboSpan" id="kobo.550.1"> is</span><a id="_idIndexMarker403"/><span class="koboSpan" id="kobo.551.1"> identified with a web request unless you create a custom scope. </span><span class="koboSpan" id="kobo.551.2">A good example where custom scope can be used is in multi-tenant applications. </span><span class="koboSpan" id="kobo.551.3">In this case, you may want to manage dependencies per tenant.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.552.1">Singleton</span></strong><span class="koboSpan" id="kobo.553.1">: Each object has the same application lifetime, so a single object is reused to serve all the requests for a given type. </span><span class="koboSpan" id="kobo.553.2">If your object contains state, you should not use this one unless it is thread-safe. </span><span class="koboSpan" id="kobo.553.3">Remember to refer to </span><em class="italic"><span class="koboSpan" id="kobo.554.1">Chapter 2</span></em><span class="koboSpan" id="kobo.555.1">,</span><em class="italic"><span class="koboSpan" id="kobo.556.1"> Non-Functional Requirements</span></em><span class="koboSpan" id="kobo.557.1">, to learn more about multithreading.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.558.1">The way you use these options depends on the business rules of the project you are developing. </span><span class="koboSpan" id="kobo.558.2">It is </span><a id="_idIndexMarker404"/><span class="koboSpan" id="kobo.559.1">also a matter of how you register the services of the application. </span><span class="koboSpan" id="kobo.559.2">You need to be careful in deciding on the correct one </span><a id="_idIndexMarker405"/><span class="koboSpan" id="kobo.560.1">since the behavior of the application will change according to the type of object you are injecting.</span></p>
<h1 class="heading-1" id="_idParaDest-134"><span class="koboSpan" id="kobo.561.1">Understanding the design patterns available in .NET</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.562.1">As we </span><a id="_idIndexMarker406"/><span class="koboSpan" id="kobo.563.1">discovered in the previous sections, C# allows us to implement any of the patterns. </span><span class="koboSpan" id="kobo.563.2">.NET provides many implementations in its SDK that follow all the patterns we have discussed, such as Entity Framework Core proxy lazy loading. </span><span class="koboSpan" id="kobo.563.3">Another good example that has been available since .NET Core 2.1 is .NET Generic Host, which does not directly implement a specific pattern but combines many of them, providing a flexible and extensible host environment for .NET applications.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.564.1">In </span><em class="italic"><span class="koboSpan" id="kobo.565.1">Chapter 17</span></em><span class="koboSpan" id="kobo.566.1">, </span><em class="italic"><span class="koboSpan" id="kobo.567.1">Presenting ASP.NET Core MVC</span></em><span class="koboSpan" id="kobo.568.1">, we will detail the hosting that’s available for web apps in .NET 8. </span><span class="koboSpan" id="kobo.568.2">This web host helps us since the startup of the app and lifetime management are set up alongside it. </span><span class="koboSpan" id="kobo.568.3">The idea of .NET Generic Host is to enable this way of working for applications that do not need HTTP implementation. </span><span class="koboSpan" id="kobo.568.4">With this Generic Host, any .NET program can have a startup class where we can configure the dependency injection engine. </span><span class="koboSpan" id="kobo.568.5">This can be useful for creating multi-service apps, using Composite patterns as a basis for that.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.569.1">You can find out more about .NET Generic Host at </span><a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/host/generic-host"><span class="url"><span class="koboSpan" id="kobo.570.1">https://docs.microsoft.com/en-us/aspnet/core/fundamentals/host/generic-host</span></span></a><span class="koboSpan" id="kobo.571.1">, which contains some sample code and is the current recommendation from Microsoft.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.572.1">The code provided in the GitHub repository is simple, but it focuses on the creation of a console app that can run a service for monitoring. </span><span class="koboSpan" id="kobo.572.2">The great thing about this is the way the console app is set up to run, where the builder configures the services that will be provided by the application and the way logging will be managed.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.573.1">This is shown in the following code:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.574.1">public</span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.575.1">static</span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.576.1">void</span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="koboSpan" id="kobo.577.1">Main</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.578.1">()</span></span><span class="koboSpan" id="kobo.579.1">
{
    CreateHostBuilder().Build().Run();
    Console.WriteLine(</span><span class="hljs-string"><span class="koboSpan" id="kobo.580.1">"Host has terminated. </span><span class="koboSpan" id="kobo.580.2">Press any key to finish the App."</span></span><span class="koboSpan" id="kobo.581.1">);
    Console.ReadKey();
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.582.1">public</span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.583.1">static</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.584.1"> IHostBuilder </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.585.1">CreateHostBuilder</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.586.1">()</span></span><span class="koboSpan" id="kobo.587.1"> =&gt;
    Host.CreateDefaultBuilder()
    .ConfigureServices((hostContext, services) =&gt;
    {
          services.AddHostedService&lt;HostedService&gt;();
          services.AddHostedService&lt;MonitoringService&gt;();
    })
    .ConfigureLogging((hostContext, configLogging) =&gt;
    {
          configLogging.AddConsole();
    });
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.588.1">The </span><a id="_idIndexMarker407"/><span class="koboSpan" id="kobo.589.1">preceding code gives us an idea of how .NET uses design patterns. </span><span class="koboSpan" id="kobo.589.2">Using the Builder pattern, .NET Generic Host allows you to set the classes that will be injected as services. </span><span class="koboSpan" id="kobo.589.3">In addition to this, the Builder pattern helps you configure some other features, such as the way logs will be shown/stored. </span><span class="koboSpan" id="kobo.589.4">This configuration allows the services to inject </span><code class="inlineCode"><span class="koboSpan" id="kobo.590.1">ILogger&lt;outTCategoryName&gt;</span></code><span class="koboSpan" id="kobo.591.1"> objects into any instance.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.592.1">Other examples of Generic Host usage are worker services, described in </span><em class="italic"><span class="koboSpan" id="kobo.593.1">Chapter 14</span></em><span class="koboSpan" id="kobo.594.1">, </span><em class="italic"><span class="koboSpan" id="kobo.595.1">Implementing Microservices with .NET</span></em><span class="koboSpan" id="kobo.596.1">, and Blazor’s Generic Host, described in </span><em class="italic"><span class="koboSpan" id="kobo.597.1">Chapter 19, Client Frameworks: Blazor</span></em><span class="koboSpan" id="kobo.598.1">.</span></p>
<h1 class="heading-1" id="_idParaDest-135"><span class="koboSpan" id="kobo.599.1">Summary</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.600.1">In this chapter, we understood why design patterns help with the maintainability and reusability of the parts of the system you are building. </span><span class="koboSpan" id="kobo.600.2">We also looked at some typical use cases and code examples that you can consider in your projects, always remembering that they need to evolve to achieve professional delivery. </span><span class="koboSpan" id="kobo.600.3">Finally, we presented .NET Generic Host, which is a good example of how .NET uses design patterns to enable code reusability and enforce best practices.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.601.1">All this content will help you while architecting new software or even maintaining something existing since design patterns are already-known solutions for some real-life problems in software development.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.602.1">In </span><em class="italic"><span class="koboSpan" id="kobo.603.1">Chapter 7</span></em><span class="koboSpan" id="kobo.604.1">, </span><em class="italic"><span class="koboSpan" id="kobo.605.1">Understanding the Diﬀerent Domains in Software Solutions</span></em><span class="koboSpan" id="kobo.606.1">, we will cover the domain-driven design approach. </span><span class="koboSpan" id="kobo.606.2">We will also learn how to use the SOLID design principles so that we can map different domains to our software solutions.</span></p>
<h1 class="heading-1" id="_idParaDest-136"><span class="koboSpan" id="kobo.607.1">Questions</span></h1>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.608.1">What are design patterns?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.609.1">What is the difference between design patterns and design principles?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.610.1">When is it a good idea to implement the Builder pattern?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.611.1">When is it a good idea to implement the Factory pattern?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.612.1">When is it a good idea to implement the Singleton pattern?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.613.1">When is it a good idea to implement the Proxy pattern?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.614.1">When is it a good idea to implement the Command pattern?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.615.1">When is it a good idea to implement the Publisher/Subscriber pattern?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.616.1">When is it a good idea to implement the Dependency Injection pattern?</span></li>
</ol>
<h1 class="heading-1" id="_idParaDest-137"><span class="koboSpan" id="kobo.617.1">Further reading</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.618.1">The following are some books and websites where you can find out more about what was covered in this chapter:</span></p>
<ul>
<li class="bulletList"><em class="italic"><span class="koboSpan" id="kobo.619.1">Clean Architecture</span></em><span class="koboSpan" id="kobo.620.1">: </span><em class="italic"><span class="koboSpan" id="kobo.621.1">A Craftsman’s Guide to Software Structure and Design</span></em><span class="koboSpan" id="kobo.622.1">, Martin, Robert C., Pearson Education, 2018.</span></li>
<li class="bulletList"><em class="italic"><span class="koboSpan" id="kobo.623.1">Design Patterns</span></em><span class="koboSpan" id="kobo.624.1">: </span><em class="italic"><span class="koboSpan" id="kobo.625.1">Elements of Reusable Object-Oriented Software</span></em><span class="koboSpan" id="kobo.626.1">, Erich Gamma, et al., Addison-Wesley, 1994.</span></li>
<li class="bulletList"><em class="italic"><span class="koboSpan" id="kobo.627.1">Design Principles and Design Patterns</span></em><span class="koboSpan" id="kobo.628.1">, Martin, Robert C., 2000.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.629.1">If you need to get more info about design patterns and architectural principles, please check out these links:</span><ul>
<li class="bulletList"><a href="https://www.packtpub.com/application-development/design-patterns-using-c-and-net-core-video"><span class="url"><span class="koboSpan" id="kobo.630.1">https://www.packtpub.com/application-development/design-patterns-using-c-and-net-core-video</span></span></a></li>
<li class="bulletList"><a href="https://docs.microsoft.com/en-us/dotnet/standard/modern-web-apps-azure-architecture/architectural-principles"><span class="url"><span class="koboSpan" id="kobo.631.1">https://docs.microsoft.com/en-us/dotnet/standard/modern-web-apps-azure-architecture/architectural-principles</span></span></a></li>
</ul>
</li>
<li class="bulletList"><span class="koboSpan" id="kobo.632.1">If you want to check specific cloud design patterns, you can find them at:</span><ul>
<li class="bulletList"><a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/"><span class="url"><span class="koboSpan" id="kobo.633.1">https://docs.microsoft.com/en-us/azure/architecture/patterns/</span></span></a></li>
</ul>
</li>
<li class="bulletList"><span class="koboSpan" id="kobo.634.1">If you want to better understand the idea of a Generic Host, follow this link:</span><ul>
<li class="bulletList"><a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/host/generic-host"><span class="url"><span class="koboSpan" id="kobo.635.1">https://docs.microsoft.com/en-us/aspnet/core/fundamentals/host/generic-host</span></span></a></li>
</ul>
</li>
<li class="bulletList"><span class="koboSpan" id="kobo.636.1">There is a very good explanation about Service Bus messaging at this link:</span><ul>
<li class="bulletList"><a href="https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions "><span class="url"><span class="koboSpan" id="kobo.637.1">https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions</span></span></a></li>
</ul>
</li>
<li class="bulletList"><span class="koboSpan" id="kobo.638.1">You can learn more about dependency injection by checking out these links:</span><ul>
<li class="bulletList"><a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection"><span class="url"><span class="koboSpan" id="kobo.639.1">https://docs.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection</span></span></a></li>
<li class="bulletList"><a href="https://www.martinfowler.com/articles/injection.html"><span class="url"><span class="koboSpan" id="kobo.640.1">https://www.martinfowler.com/articles/injection.html</span></span></a></li>
</ul>
</li>
</ul>
<h1 class="heading-1"><span class="koboSpan" id="kobo.641.1">Learn more on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.642.1">To join the Discord community for this book – where you can share feedback, ask questions to the authors, and learn about new releases – follow the QR code below:</span></p>
<p class="normal"><a href="https://packt.link/SoftwareArchitectureCSharp12Dotnet8"><span class="url"><span class="koboSpan" id="kobo.643.1">https://packt.link/SoftwareArchitectureCSharp12Dotnet8</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.644.1"><img alt="" role="presentation" src="../Images/QR_Code175081751210902046.png"/></span></p>
</div>
</body></html>