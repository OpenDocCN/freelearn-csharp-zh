<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch06"/>Chapter 6. Atlas and Font Customization</h1></div></div></div><p>In this chapter, we will learn how to create a new atlas and add our own assets. At the end of this chapter, you will know how to handle normal, sliced, and tiled sprites.</p><p>We will use these new assets to add icons to our powers and selected powers. We will also change the backgrounds of our different windows, and add a new font to our project.</p><p>A small exercise will let you customize your main menu as you see fit before we move on to the final chapter. First, we need to learn how to create our own <strong>Game</strong> atlas.</p><div><div><div><div><h1 class="title"><a id="ch06lvl1sec44"/>The Atlas prefab</h1></div></div></div><p>With NGUI, an <a id="id263" class="indexterm"/>Atlas prefab is used to contain sprites and fonts. It is<a id="id264" class="indexterm"/> composed of the following:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A large texture file containing all sprites and fonts</li><li class="listitem" style="list-style-type: disc">A material with this texture file assigned, and a specific shader</li></ul></div><p>The Atlas prefab has a <strong>UIAtlas</strong> component attached to it. Its purpose is to contain information about your sprites' positions and sizes in the large texture.</p><p>It is much more efficient to use only one large texture that holds all our sprites, instead of having separate multiple small textures.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec45"/>Creating a new Atlas</h1></div></div></div><p>Let's create our own<a id="id265" class="indexterm"/> Atlas to hold our sprites and new fonts. First, open our <strong>Menu</strong> scene. In order to do this, we will use the <strong>Atlas Maker</strong> wizard.</p><p>Navigate to <strong>NGUI</strong> | <strong>Atlas Maker</strong>, or press <em>Alt</em> + <em>Shift</em> + <em>M</em> to bring up the following screen:</p><div><img src="img/8667OT_06_01.jpg" alt="Creating a new Atlas"/></div><p>To create<a id="id266" class="indexterm"/> the Atlas, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">In the first field, type in the new atlas' name as <code class="literal">Game</code>.</li><li class="listitem">Click on the green <strong>Create</strong> button.</li></ol></div><p>Our new <strong>Game</strong> atlas has been created, and it is selected in the <strong>Atlas Maker</strong> wizard. It is empty for now. Let's change this.</p><div><div><h3 class="title"><a id="note19"/>Note</h3><p>You may have as many Atlases as you want, but remember that rendering multiple Atlases simultaneously will increase the number of draw calls.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec46"/>Adding sprites to Atlas</h1></div></div></div><p>Let's add <a id="id267" class="indexterm"/>some sprites to our new <strong>Game</strong> atlas. We will add the following <a id="id268" class="indexterm"/>three different types:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Simple</strong> sprite: As its name suggests, it is simply an image displayed on screen</li><li class="listitem" style="list-style-type: disc"><strong>Sliced</strong> sprite: In this, the image is sliced in nine parts and it is resizable without stretching corners</li><li class="listitem" style="list-style-type: disc"><strong>Tiled</strong> sprite: In this, the tiling pattern is repeatable indefinitely</li></ul></div><p>Let's start with the <strong>Simple</strong> sprites.</p><div><div><div><div><h2 class="title"><a id="ch06lvl2sec61"/>Simple sprites</h2></div></div></div><p>It is time<a id="id269" class="indexterm"/> to <a id="id270" class="indexterm"/>create two sprites, Bomb and Time, which will illustrate our powers. First, we need to create the sprites and add them to our <strong>Game</strong> atlas. They will look as shown in the following screenshot:</p><div><img src="img/8667OT_06_02.jpg" alt="Simple sprites"/></div><div><div><h3 class="title"><a id="note20"/>Note</h3><p>You may either create them yourself, or download the <code class="literal">Assets.zip</code> file from <a class="ulink" href="http://goo.gl/bZu4mF">http://goo.gl/bZu4mF</a>.</p></div></div><p>If you wish<a id="id271" class="indexterm"/> to create your own sprites, a size of 128 x 128 will be enough. You can save them either as <code class="literal">.png</code> to support transparency, or as <code class="literal">.psd</code> files—they will be converted to the correct format when they will be imported in the Unity project.</p><div><div><div><div><h3 class="title"><a id="ch06lvl3sec21"/>Adding sprites to Atlas</h3></div></div></div><p>When your Bomb and Time sprites are ready, or downloaded from the previous link, place them in a new <code class="literal">Assets</code>/<code class="literal">Textures</code> folder in your project. Then, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Open <strong>Atlas Maker</strong> from <strong>NGUI</strong>, or <em>Alt</em> + <em>Shift</em> + <em>M</em>.</li><li class="listitem">Make sure that our new <strong>Game</strong> Atlas is selected, as shown in the following screenshot:<div><img src="img/8667OT_06_03.jpg" alt="Adding sprites to Atlas"/></div></li><li class="listitem">In the <strong>Project</strong> view, select both our new <strong>Bomb</strong> and <strong>Time</strong> textures.</li><li class="listitem">Click on the <strong>Add/Update All</strong> button in <strong>Atlas Maker</strong>.</li></ol></div><p>Good. Our two new sprites have been added to the <strong>Game</strong> atlas.</p></div><div><div><div><div><h3 class="title"><a id="ch06lvl3sec22"/>Available powers icons</h3></div></div></div><p>Let's add the icons to<a id="id272" class="indexterm"/> our <strong>Time</strong> and <strong>Bomb</strong> prefabs on the scene and perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">In the <strong>Hierarchy</strong> view, select <strong>Background</strong> by navigating to <strong>PowersContainer</strong> | <strong>Grid</strong> | <strong>Bomb</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Duplicate it.</li><li class="listitem">Rename this new duplicate as <code class="literal">Icon</code>.</li><li class="listitem">Change its <strong>Sprite Type</strong> parameter in <strong>UISprite</strong> to <strong>Simple</strong>.</li><li class="listitem">Set its <strong>Depth</strong> to <code class="literal">6</code> so that it can be displayed over the background.</li></ol></div></li><li class="listitem">Click on the <strong>Atlas</strong> button in <strong>UISprite</strong> and in the pop-up window, select our new <strong>Game</strong> atlas.<div><div><h3 class="title"><a id="note21"/>Note</h3><p>If the new <strong>Game</strong> Atlas is not visible in the list, drag it from the <strong>Project</strong> view in the field next to the <strong>Atlas</strong> button.</p></div></div></li><li class="listitem">Click on the <strong>Sprite</strong> button in <strong>UISprite</strong> and in the pop-up window, select our <strong>Bomb</strong> sprite.</li><li class="listitem">Select the <strong>Label</strong> GameObject from <strong>Bomb</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Delete it—the icon and tool tip are enough!</li><li class="listitem">A pop-up window appears, asking you if you want to continue because you will lose the prefab connection. Click on <strong>Continue</strong>.</li></ol></div></li><li class="listitem">Select the <strong>Bomb</strong> GameObject from our <strong>Grid</strong>.</li><li class="listitem">Click on the <strong>Apply</strong> button in the <strong>Inspector</strong> view to update the prefab.</li></ol></div><p>Good, our <strong>Bomb</strong> prefab is up to date with its new icon. Let's add the icon for the <strong>Time</strong> prefab by performing the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>Icon</strong> GameObject <strong>Bomb</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Duplicate it.</li><li class="listitem">Drag this duplicate inside the <strong>Time</strong> GameObject.</li><li class="listitem">Reset its <strong>Transform</strong> position to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Change its <strong>Sprite</strong> parameter to our own <strong>Time</strong> sprite.</li><li class="listitem">Change its <strong>Dimensions</strong> to <code class="literal">75</code> x <code class="literal">75</code>.</li></ol></div></li><li class="listitem">Select the <strong>Label</strong> GameObject from <strong>Time</strong> and then perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Delete it—the icon and tool tip are enough!</li><li class="listitem">A pop-up window appears, asking you if you want to continue because you will lose the prefab connection. Click on <strong>Continue</strong>.</li></ol></div></li><li class="listitem">Select the <strong>Time</strong> GameObject from <strong>Grid</strong>.</li><li class="listitem">Click on the <strong>Apply</strong> button in the <strong>Inspector</strong> view to update the prefab.</li></ol></div><p>Ok, our <a id="id273" class="indexterm"/>draggable powers prefabs now have their own icons.</p></div><div><div><div><div><h3 class="title"><a id="ch06lvl3sec23"/>Selected powers icons</h3></div></div></div><p>Let's<a id="id274" class="indexterm"/> also add icons for our <strong>SelectedBomb</strong> and <strong>SelectedTime</strong> prefabs so that they look nicer:</p><div><img src="img/8667OT_06_04.jpg" alt="Selected powers icons"/></div><p>Perform the following steps to achieve this:</p><div><ol class="orderedlist arabic"><li class="listitem">From the <strong>Project</strong> view, drag the <strong>SelectedBomb</strong> prefab in our <strong>Surface</strong> GameObject.</li><li class="listitem">In the <strong>Hierarchy</strong> view, select our <strong>Icon</strong> GameObject from <strong>Grid</strong>/<strong>Bomb</strong> and perform the given steps:<div><ol class="orderedlist arabic"><li class="listitem">Duplicate it.</li><li class="listitem">Drag this duplicate inside our new <strong>SelectedBomb</strong> instance.</li><li class="listitem">Reset its <strong>Transform</strong> position to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Set its <strong>Depth</strong> to <code class="literal">5</code>.</li><li class="listitem">Change its <strong>Dimensions</strong> to <code class="literal">120</code> x <code class="literal">120</code>.</li></ol></div></li><li class="listitem">Select the <strong>Label</strong> GameObject from <strong>SelectedBomb</strong> and delete it.</li><li class="listitem">Select the <strong>SelectedBomb</strong> GameObject from <strong>Surface</strong> and perform the given steps:<div><ol class="orderedlist arabic"><li class="listitem">Click on the <strong>Apply</strong> button in the <strong>Inspector</strong> view to update the prefab.</li><li class="listitem">Delete the <strong>SelectedBomb</strong> instance from the scene.</li></ol></div></li></ol></div><p>Let's follow<a id="id275" class="indexterm"/> the same steps for our <strong>SelectedTime</strong> prefab:</p><div><ol class="orderedlist arabic"><li class="listitem">From the <strong>Project</strong> view, drag the <strong>SelectedTime</strong> prefab in our <strong>Surface</strong> GameObject.</li><li class="listitem">In the <strong>Hierarchy</strong> view, select our <strong>Icon</strong> GameObject from <strong>Time</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Duplicate it.</li><li class="listitem">Drag this duplicate inside our new <strong>SelectedTime</strong> instance.</li><li class="listitem">Reset its <strong>Transform</strong> position to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Set its <strong>Depth</strong> to <code class="literal">5</code>.</li><li class="listitem">Change its <strong>Dimensions</strong> to <code class="literal">100</code> x <code class="literal">100</code>.</li></ol></div></li><li class="listitem">Select the <strong>Label</strong> GameObject from <strong>SelectedTime</strong>, and delete it.</li><li class="listitem">Select the <strong>SelectedTime</strong> GameObject from <strong>Surface</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Click on the <strong>Apply</strong> button in the <strong>Inspector</strong> view to update the prefab.</li><li class="listitem">Delete the <strong>SelectedTime</strong> instance from the scene.</li></ol></div></li></ol></div><p>That's it. We have our own two icons for our powers. Now, we can learn how to create and configure our own nine-sliced sprite.</p></div></div><div><div><div><div><h2 class="title"><a id="ch06lvl2sec62"/>Sliced sprites</h2></div></div></div><p>We used<a id="id276" class="indexterm"/> the <a id="id277" class="indexterm"/>dark sliced sprite all along this book. Let's create our own. Then, we will change the power selection box and the background sprites of <strong>Main Menu</strong>, as shown in the following screenshot:</p><div><img src="img/8667OT_06_05.jpg" alt="Sliced sprites"/></div><div><div><div><div><h3 class="title"><a id="ch06lvl3sec24"/>Adding a sprite to Atlas</h3></div></div></div><p>You can use a<a id="id278" class="indexterm"/> 16 x 16 square sprite, such as the dark sprite. If you wish to have larger corners or add more details, simply use a larger texture size. You can also use the 64 x 64 <code class="literal">Window.png</code> file available in my <code class="literal">Assets.zip</code> archive.</p><p>When your new Window sprite is ready, place it in the <code class="literal">Assets/Textures</code> folder and perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Open <strong>Atlas Maker</strong> by navigating to <strong>NGUI</strong> | <strong>Atlas Maker</strong>, or <em>Alt</em> + <em>Shift</em> + <em>M</em> and make sure our new <strong>Game</strong> atlas is selected.</li><li class="listitem">Select the new <code class="literal">Window.png</code> sprite file from <strong>Textures</strong> in the <strong>Project</strong> view.</li><li class="listitem">Click on the green <strong>Add/Update All</strong> button in the <strong>Atlas Maker</strong> window.</li></ol></div><p>Ok, <code class="literal">Window.png</code> has been added to our <strong>Game</strong> atlas, but it isn't configured. Yet.</p></div><div><div><div><div><h3 class="title"><a id="ch06lvl3sec25"/>Configuring a sliced sprite</h3></div></div></div><p>The Window sprite has<a id="id279" class="indexterm"/> been added to the atlas, but we still need to indicate the <strong>UIAtlas</strong> component where the slicing must occur on the sprite. Let's replace our <strong>Background</strong> of <strong>Powers</strong>, and configure its slicing parameters.</p><p>In the <strong>Hierarchy</strong> view, select the <strong>Background</strong> GameObject from <strong>Powers</strong> and perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Change its <strong>Atlas</strong> parameter in <strong>UISprite</strong> to our <strong>Game</strong> Atlas.</li><li class="listitem">Change its <strong>Sprite</strong> to our new <strong>Window</strong> sprite.</li><li class="listitem">Click on the <strong>Edit</strong> button next to the <strong>Sprite</strong> field, as shown in the following screenshot:</li></ol></div><div><img src="img/8667OT_06_06.jpg" alt="Configuring a sliced sprite"/></div><p>We are now<a id="id280" class="indexterm"/> in the sprite's parameter window. Here, we can configure its <strong>Dimensions</strong>, <strong>Border</strong>, and <strong>Padding</strong>. Set these <strong>Border</strong> values to define the slicing lines:</p><div><img src="img/8667OT_06_07.jpg" alt="Configuring a sliced sprite"/></div><p>The values shown in the previous screenshot might be different if you created your own sprite.</p><div><div><h3 class="title"><a id="note22"/>Note</h3><p>As you change the <strong>Border</strong> values, dotted lines appear on the sprite at the bottom of the <strong>Inspector</strong> view in the <strong>Preview</strong> window.</p></div></div><p>The <strong>Window</strong> sprite should be sliced (as shown in the following screenshot) in the <strong>Preview</strong> window:</p><div><img src="img/8667OT_06_08.jpg" alt="Configuring a sliced sprite"/></div><p>When you have entered your four values, you can click on the green <strong>Return to Background</strong> button in order to go back to where we were.</p><p>We now have<a id="id281" class="indexterm"/> a functional sliced sprite, but we need to adjust the  title position of the powers. In the <strong>Hierarchy</strong> view, select our <strong>TitleLabel</strong> GameObject from <strong>Powers</strong>, and change its <strong>Pixel Offset</strong> in <strong>UIAnchor</strong> to {<code class="literal">0</code>, <code class="literal">-18</code>}.</p><p>Good! We configured our first sliced sprite and changed the power selection box's background sprite with it.</p></div><div><div><div><div><h3 class="title"><a id="ch06lvl3sec26"/>The Main Menu window</h3></div></div></div><p>Let's change our <a id="id282" class="indexterm"/>
<strong>Window</strong> sprite <strong>Main Menu</strong> too. In the <strong>Hierarchy</strong> view, select our <strong>Window</strong> GameObject from <strong>Container</strong> and perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Change its <strong>Atlas</strong> to our <strong>Game</strong> Atlas.</li><li class="listitem">Change its <strong>Sprite</strong> to our new <strong>Window</strong> sprite.</li></ol></div><p>The <strong>Main Menu</strong> title is not placed exactly inside the title bar. Let's change this by performing the following steps.</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Title</strong> GameObject from <strong>Container</strong>, and change its <strong>Pixel Offset</strong> value in <strong>UIAnchor</strong> to {<code class="literal">0</code>, <code class="literal">10</code>}.</li><li class="listitem">Select the <strong>Background</strong> GameObject from <strong>Title</strong> and deactivate it for now.</li><li class="listitem">Select the <strong>Background</strong> GameObject from <strong>Container</strong> and then perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Change its <strong>Relative Size</strong> in <strong>UIStretch</strong> to {<code class="literal">1</code>, <code class="literal">0.95</code>}.</li><li class="listitem">Change its <strong>Pixel Offset</strong> in <strong>UIAnchor</strong> to {<code class="literal">0</code>, <code class="literal">-17</code>}.</li></ol></div></li></ol></div><p>Great. That looks better. If you wish, you may change the nickname box's background sprites with our new Window sprite. You can even change the buttons by using the sliced sprite <code class="literal">Button.png</code> included in the <code class="literal">Assets.zip</code> file.</p><div><div><h3 class="title"><a id="note23"/>Note</h3><p>The <code class="literal">Button.png</code> file can be used for non-button backgrounds too, such as the notification or tool tip backgrounds. Try it out!</p></div></div></div></div><div><div><div><div><h2 class="title"><a id="ch06lvl2sec63"/>Tiled sprites</h2></div></div></div><p>Let's <a id="id283" class="indexterm"/>add a<a id="id284" class="indexterm"/> tiled sprite to create a space background for our <strong>Game</strong> scene.</p><p>You can use the <code class="literal">Space.jpg</code> file from the <code class="literal">Assets.zip</code> archive, or you may create a 256 x 256 tiling sprite representing stars in space. Place the <code class="literal">Space.jpg</code> sprite in the <code class="literal">Assets/Textures</code> folder, and then perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Open our <strong>Game</strong> scene.</li><li class="listitem">Open <strong>Atlas Maker</strong> by navigating to <strong>NGUI</strong> | <strong>Atlas Maker</strong>, or <em>Alt</em> + <em>Shift</em> + <em>M</em>. Then perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">In the <strong>Project</strong> view, select our new <code class="literal">Space.jpg</code> file from <strong>Textures</strong>.</li><li class="listitem">Click on the <strong>Add/Update All</strong> button of the <strong>Atlas Maker</strong> window.</li></ol></div></li></ol></div><p>Ok, the new <code class="literal">Space.jpg</code> sprite has now been added to our <strong>Game</strong> Atlas. Let's change our <strong>Game</strong> scene's background to make it look like we're in space.</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Background</strong> GameObject from <strong>Viewport</strong>.</li><li class="listitem">Change its <strong>Atlas</strong> to our <strong>Game</strong> Atlas.</li><li class="listitem">Change its <strong>Sprite</strong> to our new <strong>Space</strong> sprite.</li><li class="listitem">Change its <strong>Color Tint</strong> to {<code class="literal">140</code>, <code class="literal">200</code>, <code class="literal">200</code>, <code class="literal">255</code>}.</li></ol></div><p>That's it! Small stars are now tiling in the background. Now, it is time to add a font.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec47"/>Adding a font</h1></div></div></div><p>For optimization, NGUI uses bitmaps<a id="id285" class="indexterm"/> instead of true type fonts.<a id="id286" class="indexterm"/> We need to export our <code class="literal">.ttf</code> or <code class="literal">.otf</code> fonts to a bitmap using a free third-party tool called <strong>BMFont</strong>
<a id="id287" class="indexterm"/>, which was created by <strong>AngelCode</strong>.</p><p>Then, we will need a <code class="literal">.txt</code> file that will contain information about where each glyph is located in the exported font's bitmap. You can download the BMFont <a id="id288" class="indexterm"/>from <a class="ulink" href="http://www.angelcode.com/products/bmfont/">www.angelcode.com/products/bmfont/</a>. Free-to-use fonts are available at <a class="ulink" href="http://www.openfontlibrary.org/">www.openfontlibrary.org/</a>.</p><p>For our first font, we will use the Pacaya font created by <em>Daniel Johnson</em>—it is included in the <code class="literal">Assets.zip</code> archive. Download, install, and launch BMFont. Install the font now by right-clicking on the <code class="literal">Pacaya.otf</code> file and then selecting <strong>Install</strong>.</p><div><div><div><div><h2 class="title"><a id="ch06lvl2sec64"/>Exporting a font using BMFont</h2></div></div></div><p>Once BMFont <a id="id289" class="indexterm"/>is launched and the Pacaya font is installed, go to <strong>Options</strong> | <strong>Font Settings</strong>. You can now select the Pacaya font in the <strong>Font</strong> field. The <strong>Size(px)</strong> field defines the font's size at export in pixels—set it to <code class="literal">24</code> and click on <strong>OK</strong>.</p><p>Our <code class="literal">.otf</code> file is loaded, and we can visualize and select the characters that we want to export with a left-click or click-and-drag. Select them all with <em>Ctrl</em> + <em>A</em>.</p><div><div><h3 class="title"><a id="note24"/>Note</h3><p>If you want to export a selection of characters, don't forget to select the empty character—it's your space character.</p></div></div><p>Go to <strong>Options</strong> | <strong>Export</strong> options. Here, you must set the <strong>Bit</strong> depth to <code class="literal">32</code>. Now, the only thing you need to check is the <strong>Width</strong> and <strong>Height</strong> value of the bitmap.</p><p>To see if it's currently big enough, click on <strong>OK</strong> and go to <strong>Options</strong> | <strong>Visualize</strong>. The window shown in the following screenshot appears:</p><div><img src="img/8667OT_06_09.jpg" alt="Exporting a font using BMFont"/></div><p>The red space represents wasted space. As you can see, we have a large amount of wasted space. You must try to set the bitmap size to reduce this red space as much as possible, while making sure you have enough space for all characters.</p><p>If your bitmap<a id="id290" class="indexterm"/> size is too small and can't hold all your characters, the <strong>Preview</strong> window's title will show <strong>Preview : 1/2</strong> instead of <strong>Preview : 1/1</strong>, as shown in the following screenshot. Then, you should increase the bitmap size utile it displays <strong>Preview : 1/1</strong>. For the Pacaya font with all characters selected, enter <code class="literal">256</code> x <code class="literal">128</code>. It should look as shown in the following screenshot:</p><div><img src="img/8667OT_06_10.jpg" alt="Exporting a font using BMFont"/></div><div><div><h3 class="title"><a id="tip06"/>Tip</h3><p>For optimization, you should keep its dimensions as powers of two.</p></div></div><p>Once you have set the correct bitmap size, go back to <strong>Options</strong> | <strong>Export Options</strong>. Then, make sure the <strong>Presets</strong> field is set to <strong>White text with alpha</strong> in order to have <strong>R</strong>, <strong>G</strong>, and <strong>B</strong> channel values at <strong>one</strong> and the <strong>glyph</strong> in channel <strong>A</strong>:</p><div><img src="img/8667OT_06_11.jpg" alt="Exporting a font using BMFont"/></div><p>When you've done that, go to <strong>Options</strong> | <strong>Save bitmap font as…</strong> and name it <code class="literal">Pacaya</code>. The <code class="literal">.fnt</code> file extension will be added automatically. Inside the output folder you selected, you should have a <code class="literal">Pacaya_0.tga</code> file—the actual font bitmap—and a <code class="literal">.fnt</code> file.</p><div><div><h3 class="title"><a id="note25"/>Note</h3><p>You must have only one <code class="literal">.tga</code> file along with your <code class="literal">.fnt</code> file. Otherwise, your bitmap size is too small, and you need to make it larger before you re-export.</p></div></div><p>Ok, now copy these two files in a new <code class="literal">Assets/Fonts/Sources</code> folder.</p></div><div><div><div><div><h2 class="title"><a id="ch06lvl2sec65"/>Creating a font in Unity</h2></div></div></div><p>We have<a id="id291" class="indexterm"/> our new font files. We must now create a new font for NGUI using these files.</p><p>In Unity, perform<a id="id292" class="indexterm"/> the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Open the <strong>Font Maker</strong> window by navigating to <strong>NGUI</strong> | <strong>Font Maker</strong>, or <em>Alt</em> + <em>Shift</em> + <em>F</em>.</li><li class="listitem">In the <strong>Project</strong> view, browse to your <code class="literal">Assets/Fonts/Sources</code> folder.</li><li class="listitem">Drag your <code class="literal">Pacaya.fnt</code> file in the <strong>Font Data</strong> field in <strong>Font Maker</strong>.</li><li class="listitem">Drag the <code class="literal">Pacaya_0.tga</code> file in the <strong>Texture</strong> field in <strong>Font Maker</strong>.</li><li class="listitem">Enter <code class="literal">Pacaya</code> in the <strong>Font Name</strong> field.</li><li class="listitem">Click on the <strong>Atlas</strong> button and choose our <strong>Game</strong> Atlas.<div><div><h3 class="title"><a id="note26"/>Note</h3><p>This means the font's texture will be added to the <strong>Game</strong> Atlas, resulting in no supplementary draw call when a label is displayed.</p></div></div></li><li class="listitem">Select any file in the <code class="literal">Sources</code> folder in the path <code class="literal">Assets/Fonts/</code> of our <strong>Project</strong> view—our font will then be added to the current folder, but you need to actually select a file inside the desired destination for it to work.</li><li class="listitem">Click on the green <strong>Create the Font</strong> button.</li></ol></div><p>A new Pacaya prefab has been created in the <code class="literal">Sources</code> folder in the path <code class="literal">Assets/Fonts/</code>. That's the prefab NGUI needs to display the font.</p><p>Select it in the <strong>Project</strong> view, and drag it inside our <code class="literal">Fonts</code> folder in <code class="literal">Assets</code>. If you cannot find it, simply type your font's name in the <strong>Project</strong> view's search bar.</p></div><div><div><div><div><h2 class="title"><a id="ch06lvl2sec66"/>Assigning a new font to Label</h2></div></div></div><p>Now that we<a id="id293" class="indexterm"/> have added a new font to our project, let's assign it to a Label:</p><div><ol class="orderedlist arabic"><li class="listitem">Open our <strong>Menu</strong> scene.</li><li class="listitem">Select our <strong>Label</strong> GameObject by navigating to <strong>MainMenu</strong> | <strong>Container</strong> | <strong>Nickname</strong> | <strong>Input</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Click on the <strong>Font</strong> button in <strong>UILabel</strong>.</li><li class="listitem">Choose our new <strong>Pacaya</strong> font.</li></ol></div></li></ol></div><div><div><h3 class="title"><a id="note27"/>Note</h3><p>If the new font does not appear in recent fonts, find it in your <strong>Project</strong> view and drag it manually in the <strong>Font</strong> field in <strong>UILabel</strong>.</p></div></div><p>Ok. We have added a new font to our project and assigned it to a label!</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec48"/>Customizing the MainMenu</h1></div></div></div><p>The blue<a id="id294" class="indexterm"/> background of our menu's main camera is not <a id="id295" class="indexterm"/>very nice. Let's set a black background for the camera, and add our space tiling sprite to make this better:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>MainMenu</strong> GameObject from <strong>Anchor</strong>, and create a new sprite by navigating to <strong>NGUI</strong> | <strong>Create</strong> | <strong>Sprite</strong>, or press <em>Alt</em> + <em>Shift</em> + <em>S</em>.</li><li class="listitem">Select the new <strong>Sprite</strong> GameObject from <strong>MainMenu</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">Space</code>.</li><li class="listitem">Set its <strong>Atlas</strong> type to our <strong>Game</strong> atlas.</li><li class="listitem">Set its <strong>Sprite</strong> to our <strong>Space</strong> tiling sprite.</li><li class="listitem">Set its <strong>Sprite Type</strong> parameter to <strong>Tiled</strong>.</li></ol></div></li><li class="listitem">Attach a <strong>Stretch</strong> component to it by navigating to <strong>Component</strong> | <strong>NGUI</strong> | <strong>UI</strong>:</li><li class="listitem">Set its <strong>Style</strong> parameter to <strong>Both</strong>.</li></ol></div><p>You may notice that we have ugly lines between each repetition of the Space sprite. That is simply because there is a 1-pixel-wide border on the sprite. We can easily correct this by reducing the sprite's border value of 1 pixel.</p><p>Select our <strong>Space</strong> GameObject from <strong>MainMenu</strong>, and click on the <strong>Edit</strong> button next to the <strong>Sprite</strong> field, as shown in the following screenshot:</p><div><img src="img/8667OT_06_12.jpg" alt="Customizing the MainMenu"/></div><p>Set a value of <code class="literal">1</code> for each of the four <strong>Border</strong> parameters as shown in the following screenshot:</p><div><img src="img/8667OT_06_13.jpg" alt="Customizing the MainMenu"/></div><p>That's better; our tiling sprite now tiles correctly without any lines between each pattern.</p><p>Now that you <a id="id296" class="indexterm"/>have learned how to add sprites and fonts, I would like you to change our <strong>Main Menu</strong> elements' backgrounds to make it look better. You may proceed as you wish—add more sprites if you want, change colors, and use your imagination!</p><p>The following is an example of what you can achieve with the <strong>Window</strong> and <strong>Button</strong> sprites:</p><div><img src="img/8667OT_06_14.jpg" alt="Customizing the MainMenu"/></div><div><div><h3 class="title"><a id="note28"/>Note</h3><p>You might have to move or resize the UI elements. Don't forget to use <strong>Pixel Offset</strong> in <strong>UIAnchor</strong> to move or resize instead of positions. Same for <strong>Dimensions</strong>—don't use the scale tool of Unity if you want to keep the widgets pixel perfect.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec49"/>Summary</h1></div></div></div><p>In this chapter, we learned how to create a new Atlas and add simple, sliced, and tiled sprites. Using these new sprites, we made our <strong>Powers</strong>, <strong>Selected Powers</strong>, and <strong>Main Menu</strong> windows look better than before.</p><p>You now know how to use BMFont to export a font as bitmap and create a new font prefab for NGUI.</p><p>Before we move on to the final <a class="link" href="ch07.html" title="Chapter 7. Creating a Game with NGUI">Chapter 7</a>, <em>Creating a Game with NGUI</em>, you should have changed the appearance of your <strong>Main Menu</strong> to make it look nicer.</p></div></body></html>