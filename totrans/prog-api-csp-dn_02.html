<html><head></head><body>
  <div id="_idContainer011">
   <h1 class="chapter-number" id="_idParaDest-23">
    <a id="_idTextAnchor022">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     2
    </span>
   </h1>
   <h1 id="_idParaDest-24">
    <a id="_idTextAnchor023">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     What We’ll Build
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     In this chapter, we will provide a context for the rest of the book.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     That context is a simple application for buying and selling cars.
    </span>
    <span class="koboSpan" id="kobo.3.3">
     We will not build out this application but, in fact, we’ll have only one type of object (
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.4.1">
      Car
     </span>
    </strong>
    <span class="koboSpan" id="kobo.5.1">
     ) and one table in our database.
    </span>
    <span class="koboSpan" id="kobo.5.2">
     This will allow us to focus on the API rather than getting hung up on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.6.1">
      database design.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.7.1">
     In this chapter, we’re going to cover the following
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.8.1">
      main topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <a id="_idTextAnchor024">
     </a>
     <span class="koboSpan" id="kobo.9.1">
      What an API is and what it
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.10.1">
       is for
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.11.1">
      The backend database that we will use throughout
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.12.1">
       the book
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.13.1">
      The application that we will build throughout
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.14.1">
       the book
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.15.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.16.1">
       Car
      </span>
     </strong>
     <span class="koboSpan" id="kobo.17.1">
      object that we will use to demonstrate
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.18.1">
       CRUD operations
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.19.1">
     We will use only free software, as shown in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.20.1">
      Technical requirements
     </span>
    </em>
    <span class="koboSpan" id="kobo.21.1">
     section, and we will take advantage of open source utilities such as Dapper and AutoMapper, both introduced in
    </span>
    <a href="B21998_01.xhtml#_idTextAnchor013">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.22.1">
        Chapter 1
       </span>
      </em>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.23.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-25">
    <a id="_idTextAnchor025">
    </a>
    <span class="koboSpan" id="kobo.24.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.25.1">
     For this chapter, you’ll need
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.26.1">
      Visual Studio
     </span>
    </strong>
    <span class="koboSpan" id="kobo.27.1">
     and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.28.1">
      SQL Server Management Studio
     </span>
    </strong>
    <span class="koboSpan" id="kobo.29.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.30.1">
      SSMS
     </span>
    </strong>
    <span class="koboSpan" id="kobo.31.1">
     ), as well as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.32.1">
      Postman
     </span>
    </strong>
    <span class="koboSpan" id="kobo.33.1">
     .
    </span>
    <span class="koboSpan" id="kobo.33.2">
     Remember that SSMS was installed with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.34.1">
      Visual Studio.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.35.1">
     Note that you can also manage your database from within Visual Studio using the Server Explorer and the SQL Server
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.36.1">
      Object Explorer.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.37.1">
     The code files for this book are available in the book’s GitHub repository :
    </span>
    <a href="https://github.com/PacktPublishing/Programming-APIs-with-C-Sharp-and-.NET/tree/main/Chapter02">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.38.1">
       https://github.com/PacktPublishing/Programming-APIs-with-C-Sharp-and-.NET/tree/main/Chapter02
      </span>
     </span>
    </a>
   </p>
   <h1 id="_idParaDest-26">
    <a id="_idTextAnchor026">
    </a>
    <span class="koboSpan" id="kobo.39.1">
     What is an API and what is it for?
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.40.1">
     The
    </span>
    <a id="_idIndexMarker013">
    </a>
    <span class="koboSpan" id="kobo.41.1">
     purpose of an API is to decouple the backend of an application (e.g., a database) from the frontend (e.g., a web application or mobile application), as illustrated in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.42.1">
       Figure 2
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.43.1">
       .1
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.44.1">
      .
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer008">
     <span class="koboSpan" id="kobo.45.1">
      <img alt="Figure 2.1 – Separation of concerns" src="image/B21988_02_1.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.46.1">
     Figure 2.1 – Separation of concerns
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.47.1">
     The client does not talk directly to the database but rather talks to the API, which, in turn, talks to the database.
    </span>
    <span class="koboSpan" id="kobo.47.2">
     The huge advantage of this approach is that you can modify the database and the client does not have to change.
    </span>
    <span class="koboSpan" id="kobo.47.3">
     Alternatively, you can modify the front end (for example, a website) without changing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.48.1">
      the database.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.49.1">
     These modifications take place throughout the development of a large project and continue after delivery.
    </span>
    <span class="koboSpan" id="kobo.49.2">
     It is imperative, especially with a mobile application, that you can modify the backend without forcing the user to update the application.
    </span>
    <span class="koboSpan" id="kobo.49.3">
     Even with web applications, however, this can be critical, as the team maintaining the database may well not be the team maintaining
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.50.1">
      the client.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-27">
    <a id="_idTextAnchor027">
    </a>
    <span class="koboSpan" id="kobo.51.1">
     Creating the database
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.52.1">
     To illustrate
    </span>
    <a id="_idIndexMarker014">
    </a>
    <span class="koboSpan" id="kobo.53.1">
     all the aspects of an API, we will create an incredibly simple database and we’ll use Postman to stand in for our client.
    </span>
    <span class="koboSpan" id="kobo.53.2">
     Postman lets you call into the API and see what the client would get back.
    </span>
    <span class="koboSpan" id="kobo.53.3">
     Actually, it can do a lot more, but that is the principal way we’ll
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.54.1">
      use it.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.55.1">
     We’ll keep both the backend and the frontend as simple as we can so that we can focus on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.56.1">
      the API.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-28">
    <a id="_idTextAnchor028">
    </a>
    <span class="koboSpan" id="kobo.57.1">
     The application
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.58.1">
     The database
    </span>
    <a id="_idIndexMarker015">
    </a>
    <span class="koboSpan" id="kobo.59.1">
     we’ll be creating will be used in a simple (fictional) application for buying and selling cars.
    </span>
    <span class="koboSpan" id="kobo.59.2">
     The database will keep a list of automobiles along with details of their engine, performance, and so on.
    </span>
    <span class="koboSpan" id="kobo.59.3">
     A short example of this data is shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.60.1">
       Figure 2
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.61.1">
       .2
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.62.1">
      .
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer009">
     <span class="koboSpan" id="kobo.63.1">
      <img alt="Figure 2.2 – A subset of the data table we’ll be using" src="image/B21988_02_2.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.64.1">
     Figure 2.2 – A subset of the data table we’ll be using
    </span>
   </p>
   <h2 id="_idParaDest-29">
    <a id="_idTextAnchor029">
    </a>
    <span class="koboSpan" id="kobo.65.1">
     Creating the Car Table
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.66.1">
     The data
    </span>
    <a id="_idIndexMarker016">
    </a>
    <span class="koboSpan" id="kobo.67.1">
     for the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.68.1">
      Car
     </span>
    </strong>
    <span class="koboSpan" id="kobo.69.1">
     table is from the free
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.70.1">
      Automobile
     </span>
    </em>
    <span class="koboSpan" id="kobo.71.1">
     dataset at
    </span>
    <a href="https://kaggle.com">
     <span class="koboSpan" id="kobo.72.1">
      https://kaggle.com
     </span>
    </a>
    <span class="koboSpan" id="kobo.73.1">
     .
    </span>
    <span class="koboSpan" id="kobo.73.2">
     Download the data and import it into a database named
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.74.1">
      Cars
     </span>
    </strong>
    <span class="koboSpan" id="kobo.75.1">
     and a table named
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.76.1">
      Car
     </span>
    </strong>
    <span class="koboSpan" id="kobo.77.1">
     .
    </span>
    <span class="koboSpan" id="kobo.77.2">
     The columns should take care
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.78.1">
      of themselves.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.79.1">
     The datasets on Kaggle change frequently, so your list of cars may look a bit different.
    </span>
    <span class="koboSpan" id="kobo.79.2">
     All the datasets are all presented as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.80.1">
      .csv
     </span>
    </strong>
    <span class="koboSpan" id="kobo.81.1">
     files, so just download one and open
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.82.1">
      SSMS
     </span>
    </strong>
    <span class="koboSpan" id="kobo.83.1">
     in
    </span>
    <a id="_idIndexMarker017">
    </a>
    <span class="koboSpan" id="kobo.84.1">
     order to do the import.
    </span>
    <span class="koboSpan" id="kobo.84.2">
     Here are
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.85.1">
      the steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.86.1">
      Log into SSMS and create
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.87.1">
       a database.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.88.1">
      Create a table
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.89.1">
       named
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.90.1">
        CARS
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.91.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.92.1">
      Start the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.93.1">
       Import Data Wizard
      </span>
     </strong>
     <span class="koboSpan" id="kobo.94.1">
      .
     </span>
     <span class="koboSpan" id="kobo.94.2">
      To do so, right-click on the table, and from the context menu select
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.95.1">
        Import Data
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.96.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.97.1">
      The
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.98.1">
       Choose a Data Source
      </span>
     </strong>
     <span class="koboSpan" id="kobo.99.1">
      dialog will appear.
     </span>
     <span class="koboSpan" id="kobo.99.2">
      Select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.100.1">
       Flat File Source
      </span>
     </strong>
     <span class="koboSpan" id="kobo.101.1">
      and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.102.1">
       Browse
      </span>
     </strong>
     <span class="koboSpan" id="kobo.103.1">
      to find and select the CSV you got
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.104.1">
       from Kaggle.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.105.1">
      You will be asked for the destination.
     </span>
     <span class="koboSpan" id="kobo.105.2">
      Choose
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.106.1">
       SQL Server
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.107.1">
        Native Client
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.108.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.109.1">
      Review your settings and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.110.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.111.1">
        Save
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.112.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.113.1">
     After you complete the import, you will need to add two columns:
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.114.1">
      is_deleted
     </span>
    </strong>
    <span class="koboSpan" id="kobo.115.1">
     (initialize all rows to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.116.1">
      0
     </span>
    </strong>
    <span class="koboSpan" id="kobo.117.1">
     ) and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.118.1">
      id
     </span>
    </strong>
    <span class="koboSpan" id="kobo.119.1">
     , which should be your primary key and which should
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.120.1">
      increment automatically.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.121.1">
     We’re
    </span>
    <a id="_idIndexMarker018">
    </a>
    <span class="koboSpan" id="kobo.122.1">
     ready to write a small application that will support the basic CRUD operations against our shiny
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.123.1">
      new database.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.124.1">
     If you run into a crisis and can’t get it to work, try one of the following two options to get you up and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.125.1">
      running fast:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.126.1">
      Go to stackoverflow.com and look for importing csv into flat
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.127.1">
       database or
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.128.1">
      Grab the code from the
     </span>
     <a href="B21998_03.xhtml#_idTextAnchor038">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.129.1">
         Chapter 3
        </span>
       </em>
      </span>
     </a>
     <span class="koboSpan" id="kobo.130.1">
      folder of this book’s repository, which will have the database already
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.131.1">
       set up
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.132.1">
     The problem with the second alternative is that you’ll have code we won’t yet have explained.
    </span>
    <span class="koboSpan" id="kobo.132.2">
     But not to worry, if you follow the steps above all should be fine.
    </span>
    <span class="koboSpan" id="kobo.132.3">
     (“
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.133.1">
      Open the pod bay
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.134.1">
       doors Hal.
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.135.1">
      ”)
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.136.1">
     Note
    </span>
   </p>
   <p class="callout">
    <strong class="bold">
     <span class="koboSpan" id="kobo.137.1">
      CRUD
     </span>
    </strong>
    <span class="koboSpan" id="kobo.138.1">
     is
    </span>
    <a id="_idIndexMarker019">
    </a>
    <span class="koboSpan" id="kobo.139.1">
     an acronym for
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.140.1">
      Create, Read, Update, and Delete
     </span>
    </strong>
    <span class="koboSpan" id="kobo.141.1">
     .
    </span>
    <span class="koboSpan" id="kobo.141.2">
     That is, create new records, read the records that match criteria, update records, and mark records
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.142.1">
      as deleted.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-30">
    <a id="_idTextAnchor030">
    </a>
    <span class="koboSpan" id="kobo.143.1">
     Database structure
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.144.1">
     Our database
    </span>
    <a id="_idIndexMarker020">
    </a>
    <span class="koboSpan" id="kobo.145.1">
     consists of just one table:
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.146.1">
      Car
     </span>
    </strong>
    <span class="koboSpan" id="kobo.147.1">
     .
    </span>
    <span class="koboSpan" id="kobo.147.2">
     As shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.148.1">
       Figure 2
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.149.1">
      .2
     </span>
    </em>
    <span class="koboSpan" id="kobo.150.1">
     , that table must store various attributes of each car (name, miles per gallon, number of cylinders, and so on).
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.151.1">
       Figure 2
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.152.1">
      .3
     </span>
    </em>
    <span class="koboSpan" id="kobo.153.1">
     shows
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.154.1">
      the table:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer010">
     <span class="koboSpan" id="kobo.155.1">
      <img alt="Figure 2.3 – Car table columns" src="image/B21988_02_3.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.156.1">
     Figure 2.3 – Car table columns
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.157.1">
     Notice
    </span>
    <a id="_idIndexMarker021">
    </a>
    <span class="koboSpan" id="kobo.158.1">
     the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.159.1">
      is_deleted
     </span>
    </strong>
    <span class="koboSpan" id="kobo.160.1">
     column.
    </span>
    <span class="koboSpan" id="kobo.160.2">
     We’ll be using “soft delete” – that is, rather than removing a row on deletion we’ll just set
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.161.1">
      is_deleted
     </span>
    </strong>
    <span class="koboSpan" id="kobo.162.1">
     to true (
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.163.1">
      1
     </span>
    </strong>
    <span class="koboSpan" id="kobo.164.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.164.2">
     That allows us to easily restore that column just by changing that value back to
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.165.1">
       0
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.166.1">
      (false).
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.167.1">
     Other than
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.168.1">
      id
     </span>
    </strong>
    <span class="koboSpan" id="kobo.169.1">
     , all of the columns are strings, which will make working with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.170.1">
      them easier.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-31">
    <a id="_idTextAnchor031">
    </a>
    <span class="koboSpan" id="kobo.171.1">
     Car object
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.172.1">
     Corresponding
    </span>
    <a id="_idIndexMarker022">
    </a>
    <span class="koboSpan" id="kobo.173.1">
     to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.174.1">
      Car
     </span>
    </strong>
    <span class="koboSpan" id="kobo.175.1">
     table, our code has a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.176.1">
      Car
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.177.1">
      entity (
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.178.1">
       Cars/Data/Entities/Car.cs
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.179.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.180.1">
namespace Cars.Data.Entities;
public class Car
{
    public int Id { get; set; }
    public string name { get; set; } = null!;
    public string mpg { get; set; } = null!;
    public string cylinders { get; set; } = null!;
    public string displacement { get; set; } = null!;
    public string horsepower { get; set; } = null!;
    public string weight { get; set; } = null!;
    public string acceleration { get; set; } = null!;
    public string model_year { get; set; } = null!;
    public string origin { get; set; } = null!;
    public string? </span><span class="koboSpan" id="kobo.180.2">is_deleted { get; set;}
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.181.1">
     We
    </span>
    <a id="_idIndexMarker023">
    </a>
    <span class="koboSpan" id="kobo.182.1">
     won’t bother with
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.183.1">
      Data Transfer Objects
     </span>
    </strong>
    <span class="koboSpan" id="kobo.184.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.185.1">
      DTOs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.186.1">
     ) in this
    </span>
    <a id="_idIndexMarker024">
    </a>
    <span class="koboSpan" id="kobo.187.1">
     example, if only to keep things simple, though we will use them later in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.188.1">
      the book.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-32">
    <a id="_idTextAnchor032">
    </a>
    <span class="koboSpan" id="kobo.189.1">
     The ASP.NET application
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.190.1">
     To get started, create
    </span>
    <a id="_idIndexMarker025">
    </a>
    <span class="koboSpan" id="kobo.191.1">
     a new ASP.NET project using the ASP.NET Core Web API template.
    </span>
    <span class="koboSpan" id="kobo.191.2">
     Put the files wherever is convenient for you and choose the latest version of .NET (this book was written with .
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.192.1">
      NET 8).
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.193.1">
     The basic structure of our application will be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.194.1">
      as follows:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.195.1">
      Controllers
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.196.1">
       with endpoints
      </span>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.197.1">
       Services
      </span>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.198.1">
       Repositories
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.199.1">
     We’ll review endpoints and all the rest of this as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.200.1">
      we go.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-33">
    <a id="_idTextAnchor033">
    </a>
    <span class="koboSpan" id="kobo.201.1">
     Program.cs
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.202.1">
     You won’t have
    </span>
    <a id="_idIndexMarker026">
    </a>
    <span class="koboSpan" id="kobo.203.1">
     to edit
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.204.1">
      Program.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.205.1">
     for this application but it is worth a few minutes of your time to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.206.1">
      review it:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.207.1">
using Cars.Data;
using Cars.Data.Interfaces;
using Cars.Data.Repositories;
var builder = WebApplication.CreateBuilder(args);
// Add services to the container.
</span><span class="koboSpan" id="kobo.207.2">builder.Services.AddControllers();
// Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();
// Load DB configuration and register the connection factory for 
//injection
var configuration = builder.Configuration;
builder.Services.Configure&lt;DbSettings&gt;(configuration.GetSection("ConnectionStrings"));
builder.Services.AddTransient&lt;DatabaseConnectionFactory&gt;();
builder.Services.AddTransient&lt;CarRepository&gt;();
builder.Services.RegisterDataAccessDependencies();
var app = builder.Build();
// Configure the HTTP request pipeline.
</span><span class="koboSpan" id="kobo.207.3">if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI();
}
app.UseHttpsRedirection();
app.UseAuthorization();
app.MapControllers();
app.Run();</span></pre>
   <p>
    <span class="koboSpan" id="kobo.208.1">
     One thing
    </span>
    <a id="_idIndexMarker027">
    </a>
    <span class="koboSpan" id="kobo.209.1">
     to notice right away is the references to Swagger.
    </span>
    <span class="koboSpan" id="kobo.209.2">
     We’ll be using Swagger to automatically generate documentation for our project, as you’ll see as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.210.1">
      we go.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-34">
    <a id="_idTextAnchor034">
    </a>
    <span class="koboSpan" id="kobo.211.1">
     Connecting to the database
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.212.1">
     The out-of-the-box project
    </span>
    <a id="_idIndexMarker028">
    </a>
    <span class="koboSpan" id="kobo.213.1">
     cannot know how to connect to your database.
    </span>
    <span class="koboSpan" id="kobo.213.2">
     This information is contained in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.214.1">
      appsettings.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.215.1">
     and in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.216.1">
      appsettings.Development.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.217.1">
     (to get to the latter, expand
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.218.1">
      the former).
     </span>
    </span>
   </p>
   <p>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.219.1">
      appsettings.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.220.1">
     is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.221.1">
      pretty simple:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.222.1">
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=localhost;Initial
     Catalog=Cars;Integrated Security=true"
  },
  "AllowedHosts": "*"
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.223.1">
     The key here is the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.224.1">
      DefaultConnection
     </span>
    </strong>
    <span class="koboSpan" id="kobo.225.1">
     string, which sets up using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.226.1">
      Cars
     </span>
    </strong>
    <span class="koboSpan" id="kobo.227.1">
     database in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.228.1">
      the localhost.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.229.1">
     The
    </span>
    <a id="_idIndexMarker029">
    </a>
    <span class="koboSpan" id="kobo.230.1">
     actual connection string is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.231.1">
      in
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.232.1">
       appsettings.Development.json
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.233.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.234.1">
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "ConnectionStrings": {
      "DefaultConnection": "Server=(localdb)\\
      mssqllocaldb;Database=Cars;Trusted_
      Connection=True;MultipleActiveResultSets=true"
  }
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.235.1">
     The two other files you’ll need to complete this connection are
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.236.1">
      DatabaseConnectionFactory
     </span>
    </strong>
    <span class="koboSpan" id="kobo.237.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.238.1">
      DbSettings
     </span>
    </strong>
    <span class="koboSpan" id="kobo.239.1">
     .
    </span>
    <span class="koboSpan" id="kobo.239.2">
     These are provided
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.240.1">
      for you.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.241.1">
     The following refers to objects
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.242.1">
      in
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.243.1">
       DbSettings.cs
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.244.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.245.1">
namespace Cars.Data;
public class DbSettings
{
    public string DefaultConnection { get; set; } = null!; // https://
    learn.microsoft.com/en-us/dotnet/csharp/language-reference/
    compiler-messages/nullable-warnings#nonnullable-reference-not-
    initialized
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.246.1">
     Finally, under
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.247.1">
      Properties
     </span>
    </strong>
    <span class="koboSpan" id="kobo.248.1">
     , you’ll
    </span>
    <a id="_idIndexMarker030">
    </a>
    <span class="koboSpan" id="kobo.249.1">
     find the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.250.1">
       launchsettings.json
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.251.1">
      file:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.252.1">
{
  "$schema": "https://json.schemastore.org/launchsettings.json",
  "iisSettings": {
    "windowsAuthentication": false,
    "anonymousAuthentication": true,
    "iisExpress": {
      "applicationUrl": "http://localhost:35187",
      "sslPort": 44306
    }
  },
  "profiles": {
    "http": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "launchUrl": "swagger",
      "applicationUrl": "http://localhost:5283",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    },
    "https": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "launchUrl": "swagger",
      "applicationUrl": "https://localhost:7025;http://
      localhost:5283",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    },
    "IIS Express": {
      "commandName": "IISExpress",
      "launchBrowser": true,
      "launchUrl": "swagger",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    }
  }
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.253.1">
     All of this is worth
    </span>
    <a id="_idIndexMarker031">
    </a>
    <span class="koboSpan" id="kobo.254.1">
     a look but don’t fret about it; almost all of it is supplied for you, and all of it is in the sample code in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.255.1">
      our repository.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-35">
    <a id="_idTextAnchor035">
    </a>
    <span class="koboSpan" id="kobo.256.1">
     Folders
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.257.1">
     To organize
    </span>
    <a id="_idIndexMarker032">
    </a>
    <span class="koboSpan" id="kobo.258.1">
     our application, we will create the following folders:
    </span>
   </p>
   <ul>
    <li>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.259.1">
        Controllers
       </span>
      </strong>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.260.1">
        Data
       </span>
      </strong>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.261.1">
        Interfaces
       </span>
      </strong>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.262.1">
        Repositories
       </span>
      </strong>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.263.1">
        Services
       </span>
      </strong>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.264.1">
     Let’s briefly explain what
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.265.1">
      these are:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.266.1">
      The
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.267.1">
       client
      </span>
     </em>
     <span class="koboSpan" id="kobo.268.1">
      is the application calling the API (for example, the website or mobile application).
     </span>
     <span class="koboSpan" id="kobo.268.2">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.269.1">
       Controllers
      </span>
     </strong>
     <span class="koboSpan" id="kobo.270.1">
      folder will hold methods that act as
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.271.1">
       endpoints
      </span>
     </em>
     <span class="koboSpan" id="kobo.272.1">
      (an endpoint is what the client connects to via
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.273.1">
       a URL).
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.274.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.275.1">
       Data
      </span>
     </strong>
     <span class="koboSpan" id="kobo.276.1">
      folder will hold the definition of our
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.277.1">
       entities
      </span>
     </em>
     <span class="koboSpan" id="kobo.278.1">
      – in our case, the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.279.1">
       Car
      </span>
     </strong>
     <span class="koboSpan" id="kobo.280.1">
      object
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.281.1">
       shown earlier.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.282.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.283.1">
       Interfaces
      </span>
     </strong>
     <span class="koboSpan" id="kobo.284.1">
      folder is just what it sounds like: it will hold the interfaces to our
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.285.1">
       C# objects.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.286.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.287.1">
       Repositories
      </span>
     </strong>
     <span class="koboSpan" id="kobo.288.1">
      folder will hold the code between our methods and the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.289.1">
       database calls.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.290.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.291.1">
       Services
      </span>
     </strong>
     <span class="koboSpan" id="kobo.292.1">
      folder will hold
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.293.1">
       supporting code.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.294.1">
     The flow will be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.295.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.296.1">
      The client
     </span>
     <a id="_idIndexMarker033">
     </a>
     <span class="koboSpan" id="kobo.297.1">
      calls a method in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.298.1">
       a controller.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.299.1">
      The method calls a service to handle the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.300.1">
       business logic.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.301.1">
      The service calls a method in the repository, which, in turn, calls into
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.302.1">
       the database.
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.303.1">
     Again, we’ll examine the details as we go, starting in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.304.1">
      next chapter.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-36">
    <a id="_idTextAnchor036">
    </a>
    <span class="koboSpan" id="kobo.305.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.306.1">
     In this chapter, you saw what an API is and how it is used to separate the front end (e.g., a web site) from the backend (e.g., a database).
    </span>
    <span class="koboSpan" id="kobo.306.2">
     We also looked at the simple database and application that we’ll use throughout
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.307.1">
      the book.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.308.1">
     In order to demonstrate CRUD operations, we’ll build a simple application focused on a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.309.1">
      Car
     </span>
    </strong>
    <span class="koboSpan" id="kobo.310.1">
     object as if we were working with an inventory of cars.
    </span>
    <span class="koboSpan" id="kobo.310.2">
     We imported it
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.311.1">
      from
     </span>
    </span>
    <a href="https://kaggle.com">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.312.1">
       https://kaggle.com
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.313.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.314.1">
     This lays the groundwork for the rest of the chapters and for the simple application that we will build.
    </span>
    <span class="koboSpan" id="kobo.314.2">
     Our focus will be strictly on creating APIs, so we will spend little time on database technology or even on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.315.1">
      the frontend.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-37">
    <a id="_idTextAnchor037">
    </a>
    <span class="koboSpan" id="kobo.316.1">
     You try it
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.317.1">
     This is a good time to create your application and the database.
    </span>
    <span class="koboSpan" id="kobo.317.2">
     If you are adventurous, create a similar but different application, database, and data entity.
    </span>
    <span class="koboSpan" id="kobo.317.3">
     This will ensure that you cement the elements we’ll
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.318.1">
      be using.
     </span>
    </span>
   </p>
  </div>
 </body></html>