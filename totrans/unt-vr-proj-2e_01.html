<html><head></head><body>
        

                            
                    <h1 class="header-title">Virtually Everything for Everyone</h1>
                
            
            
                
<p>This virtual reality thing calls into question, what does it mean to<br class="title-page-name"/>
"be somewhere"?<br class="title-page-name"/>
Before cell phones, you would call someone and it would make no sense to<br class="title-page-name"/>
say, "Hey, where are you?" You know where they are, you called their house,<br class="title-page-name"/>
that's where they are.<br class="title-page-name"/>
So then cell phones come around and you start to hear people say, "Hello. Oh, I'm at Starbucks," because the person on the other end wouldn't necessarily know where you are, because you became un-tethered from your house for voice communications.<br class="title-page-name"/>
So when I saw a VR demo, I had this vision of coming home and my wife has got the kids settled down, she has a couple minutes to herself, and she's on the couch wearing goggles on her face. I come over and tap her on the shoulder, and I'm like, "Hey, where are you?"<br class="title-page-name"/>
It's super weird. The person's sitting right in front of you, but you don't know where they are.<br class="title-page-name"/>
                                                                    -Jonathan Stark, mobile expert, and podcaster</p>
<p class="calibre3">Welcome to <strong class="calibre5">virtual reality</strong> (<strong class="calibre5">VR</strong>)! In this book, we will explore what it takes to create virtual reality experiences on our own. We will take a walk through a series of hands-on projects, step-by-step tutorials, and in-depth discussions using the Unity 3D game engine and other free or open source software. Though the virtual reality technology is rapidly advancing, we'll try to capture the basic principles and techniques that you can use to make your VR games and applications feel immersive and comfortable.</p>
<p class="calibre3">In this first chapter, we will define virtual reality and illustrate how it can be applied not only to games but also many other areas of interest and productivity. This chapter discusses the following topics:</p>
<ul class="calibre11">
<li class="calibre12">What is virtual reality?</li>
<li class="calibre12">Differences between virtual reality<strong class="calibre1"> </strong>and augmented reality</li>
<li class="calibre12">How VR applications may differ from VR games</li>
<li class="calibre12">Types of VR experiences</li>
<li class="calibre12">Technical skills that are necessary for the development of VR</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">What is virtual reality to you?</h1>
                
            
            
                
<p class="calibre3">Today, we are witnesses to the burgeoning consumer virtual reality, an exciting technology that promises to transform in a fundamental way how we interact with information, our friends, and the world at large.</p>
<p class="calibre3">What is virtual reality? In general, VR is the computer-generated simulation of a 3D environment, which seems very real to the person experiencing it, using special electronic equipment. The objective is to achieve a strong sense of being present in the virtual environment.</p>
<p class="calibre3">Today's consumer tech VR involves wearing an HMD (head-mounted display goggles) to view stereoscopic 3D scenes. You can look around by moving your head, and walk around by using hand controls or motion sensors. You are engaged in a fully immersive experience. It's as if you're really there in some other virtual world. The following image shows me, the author, experiencing an <strong class="calibre5">Oculus Rift Development Kit 2</strong> (<strong class="calibre5">DK2</strong>) in 2015:</p>
<div><img src="img/b30214d8-d9ed-473e-9267-300782f2325c.jpg" class="calibre19"/></div>
<p class="calibre3">Virtual reality is not new. It's been here for decades, albeit hidden away in academic research labs and high-end industrial and military facilities. It was big, clunky, and expensive. Ivan Sutherland invented the first HMD in 1965 (see <a href="https://amturing.acm.org/photo/sutherland_3467412.cfm" class="calibre10">https://amturing.acm.org/photo/sutherland_3467412.cfm</a>). It was tethered to the ceiling! In the past, several failed attempts have been made to bring consumer-level virtual reality products to the market.</p>
<p class="calibre3">In 2012, Palmer Luckey, the founder of Oculus VR LLC, gave a demonstration of a makeshift head-mounted VR display to John Carmack, the famed developer of the Doom, Wolfenstein 3D, and Quake classic video games. Together, they ran a successful <strong class="calibre5">Kickstarter</strong> campaign and released a developer kit called <strong class="calibre5">Oculus Rift Development Kit 1</strong> (<strong class="calibre5">DK1</strong>) to an enthusiastic community. This caught the attention of investors as well as Mark Zuckerberg, and in March 2014, Facebook bought the company for $2 billion. With no product, no customers, and infinite promise, the money and attention that it attracted helped fuel a new category of consumer products.</p>
<p class="calibre3">Concurrently, others also working on their own products which were soon introduced to the market, including Steam's HTC VIVE, Google Daydream, Sony PlayStation VR, Samsung Gear VR, Microsoft's immersive Mixed Reality, and more. New innovations and devices that enhance the VR experience continue to be introduced.</p>
<p class="calibre3">Most of the basic research has already been done and the technology is now affordable thanks in large part to the mass adoption of devices that work on mobile technology. There is a huge community of developers with experience in building 3D games and mobile apps. Creative content producers are joining in and the media is talking it up. At last, virtual reality is real!</p>
<p class="calibre3">Say what? <em class="calibre14">Virtual reality is real?</em> Ha! If it's virtual, how can it be... Oh, never mind.</p>
<p class="calibre3">Eventually, we will get past the focus on the emerging hardware devices and recognize that <em class="calibre14">content is king</em>. The current generation of 3D development software (commercial, free, and open source) that has spawned a plethora of indie, or independent, game developers can also be used to build non-game VR applications.</p>
<p class="calibre3">Though VR finds most of its enthusiasts in the gaming community, the potential applications reach well beyond that. Any business that presently uses 3D modeling and computer graphics will be more effective if it uses VR technology. The sense of immersive presence that is afforded by VR can enhance all common online experiences today, which includes engineering, social networking, shopping, marketing, entertainment, and business development. In the near future, viewing 3D websites with a VR headset may be as common as visiting ordinary flat websites today.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Types of head-mounted displays</h1>
                
            
            
                
<p class="calibre3">Presently, there are two basic categories of HMDs for virtual reality—<strong class="calibre5">desktop VR</strong> and <strong class="calibre5">mobile VR</strong>, although the distinctions are increasingly becoming blurred. Eventually, we might just talk about platforms as we do traditional computing, in terms of the operating system—Windows, Android, or console VR.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Desktop VR</h1>
                
            
            
                
<p class="calibre3">With desktop VR (and console VR), your headset is a peripheral to a more powerful computer that processes the heavy graphics. The computer may be a Windows PC, Mac, Linux, or a game console, although Windows is by far the most prominent PC and the PS4 is a bestseller in terms of console VR.</p>
<p class="calibre3">Most likely, the headset is connected to the computer with wires. The game runs on the remote machine and the HMD is a peripheral display device with a motion sensing input. The term <em class="calibre14">desktop</em> is an unfortunate misnomer since it's just as likely to be stationed in either a living room or a den.</p>
<p class="calibre3">The <strong class="calibre5">Oculus Rift</strong> (<a href="https://www.oculus.com/" class="calibre10">https://www.oculus.com/</a>) is an example of a device where the goggles have an integrated display and sensors. The games run on a separate PC. Other desktop headsets include the <strong class="calibre5">HTC VIVE</strong>, Sony's <strong class="calibre5">PlayStation VR</strong>, and <strong class="calibre5">Microsoft immersive Mixed Reality</strong>.</p>
<p class="calibre3">Desktop VR devices rely on a desktop computer (usually via video and USB cables) for CPU and <strong class="calibre5">graphics processing unit</strong> (<strong class="calibre5">GPU</strong>) power, where more is better. Please refer to the recommended specification requirements for your specific device.</p>
<p class="calibre3">However, for the purpose of this book, we won't have any heavy rendering in our projects, and you can get by with minimum system specifications.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Mobile VR</h1>
                
            
            
                
<p class="mce-root2">Mobile VR originated with <strong class="calibre5">Google Cardboard</strong> (<a href="https://vr.google.com/cardboard/" class="calibre10">https://vr.google.com/cardboard/</a>), a simple housing device for two lenses and a slot for your mobile phone. The phone's display is used to show the twin stereoscopic views. It has rotational head tracking, but it has no positional tracking. The Cardboard also provides the user with the ability to click or <em class="calibre14">tap</em> its side to make selections in a game. The complexity of the imagery is limited because it uses your phone's processor for rendering the views on the phone display screen.</p>
<p class="calibre3">Google Daydream and Samsung GearVR improved the platforms by requiring more performant minimum specifications including greater processing power in the mobile phone. GearVR's headsets include motion sensors to assist the phone device. These devices also introduced a three-<strong class="calibre5">degrees-of-freedom</strong> (<strong class="calibre5">DOF</strong>) hand controller that can be used like a laser pointer within VR experiences.</p>
<p class="calibre3">The next generation of mobile VR devices includes all-in-one headsets, like Oculus Go, with embedded screens and processors, eliminating the need for a separate mobile phone. Newer models may include depth sensors and spatial mapping processors to track the user's location in 3D space.</p>
<p class="calibre3">The bottom line is, the projects in this book will explore features from the high end to the low end of the consumer VR device spectrum. But generally, our projects do not demand a lot of processing power nor do they require high-end VR capability, so you can begin developing for VR on any of these types of devices, including Google Cardboard and an ordinary mobile phone.</p>
<p>If you are interested in developing VR applications for Google Daydream on Android directly in Java rather than through the Unity game engine, please also refer to another of the author's books, <em class="calibre2">Cardboard VR Projects for Android</em> from Packt Publishing (<a href="https://www.packtpub.com/application-development/cardboard-vr-projects-android" class="calibre20">https://www.packtpub.com/application-development/cardboard-vr-projects-android</a>).</p>


            

            
        
    

        

                            
                    <h1 class="header-title">The difference between virtual reality and augmented reality</h1>
                
            
            
                
<p class="calibre3">It's probably worthwhile to clarify what virtual reality is not.</p>
<p class="calibre3">A sister technology to VR is <strong class="calibre5">augmented reality</strong> (<strong class="calibre5">AR</strong>), which combines computer-generated imagery (CGI) with views of the real world. AR on smartphones has recently garnered widespread interest with the introduction of Apple's ARKit for iOS and Google ARCore for Android. Further, the Vuforia AR toolkit is now integrated directly with the Unity game engine, helping to drive even more adoption of the technology. AR on a mobile device overlays the CGI on top of live video from a camera.</p>
<p class="calibre3">The latest innovations in AR are wearable AR headsets, such as Microsoft's <strong class="calibre5">HoloLens</strong> and <strong class="calibre5">Magic Leap</strong>, which show the computer graphics directly in your field of view. The graphics are not mixed into a video image. If VR headsets are like closed goggles, AR headsets are like translucent sunglasses that combine the real-world light rays with CGI. A challenge for AR is ensuring that the CGI is consistently aligned with and mapped onto the objects in the real-world space and to eliminate latency while moving about so that they (the CGI and objects in the real-world space) stay aligned.</p>
<p class="calibre3">AR holds as much promise as VR for future applications, but it's different. Though AR intends to engage the user within their current surroundings, virtual reality is fully immersive. In AR, you may open your hand and see a log cabin resting in your palm, but in VR, you're transported directly inside the log cabin and you can walk around inside it.</p>
<p class="calibre3">We are also beginning to see hybrid devices that combine features of VR and AR and let you switch between modes.</p>
<p>If you are interested in developing applications for AR, please also refer to the author's book <em class="calibre2">Augmented Reality for Developers</em> from Packt Publishing (<a href="https://www.packtpub.com/web-development/augmented-reality-developers" class="calibre20">https://www.packtpub.com/web-development/augmented-reality-developers</a>).</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Applications versus games</h1>
                
            
            
                
<p class="calibre3">Consumer-level virtual reality started with gaming. Video gamers are already accustomed to being engaged in highly interactive hyper-realistic 3D environments. VR just ups the ante.</p>
<p class="calibre3">Gamers are early adopters of high-end graphics technology. Mass production of gaming consoles and PC-based components in the tens of millions and competition between vendors leads to lower prices and higher performance. Game developers follow suit, often pushing the state of the art, squeezing every ounce of performance out of hardware and software. Gamers are a very demanding bunch, and the market has consistently stepped up to keep them satisfied. It's no surprise that many, if not most, of the current wave of VR hardware and software companies, are first targeting the video gaming industry. A majority of the VR apps on the Oculus Store such as Rift (<a href="https://www.oculus.com/experiences/rift/" class="calibre10">https://www.oculus.com/experiences/rift/</a>), GearVR (<a href="https://www.oculus.com/experiences/gear-vr/" class="calibre10">https://www.oculus.com/experiences/gear-vr/</a>), and Google Play for Daydream (<a href="https://play.google.com/store/search?q=daydream&amp;c=apps&amp;hl=en" class="calibre10">https://play.google.com/store/search?q=daydream&amp;c=apps&amp;hl=en</a>), for example, are games. And of course, the Steam VR platform (<a href="http://store.steampowered.com/steamvr" class="calibre10">http://store.steampowered.com/steamvr</a>) is almost entirely about gaming. Gamers are the most enthusiastic VR advocates and seriously appreciate its potential.</p>
<p class="calibre3">Game developers know that the core of a game is the <strong class="calibre5">game mechanics</strong>, or the rules, which are largely independent of the <em class="calibre14">skin</em>, or the thematic topic of the game. Gameplay mechanics can include puzzles, chance, strategy, timing, or muscle memory. VR games can have the same mechanic elements but might need to be adjusted for the virtual environment. For example, a first-person character walking in a console video game is probably going about 1.5 times faster than their actual pace in real life. If this wasn't the case, the player would feel that the game was too slow and boring. Put the same character in a VR scene and they will feel that it is too fast; it could likely make the player feel nauseous. In VR, you want your characters to walk at a normal, earthly pace. Not all video games will map well to VR; it may not be fun to be in the middle of a war zone when you're actually there.</p>
<p class="calibre3">That said, virtual reality is also being applied in areas other than gaming. Though games will remain important, non-gaming applications will eventually overshadow them. These applications may differ from games in a number of ways, with the most significant having much less emphasis on game mechanics and more emphasis on either the experience itself or application-specific goals. Of course, this doesn't preclude some game mechanics. For example, the application may be specifically designed to train the user in a specific skill. Sometimes, the <strong class="calibre5">gamification</strong> of a business or personal application makes it more fun and effective in driving the desired behavior through competition.</p>
<p>In general, non-gaming VR applications are less about winning and more about the experience itself.</p>
<p class="calibre3">Here are a few examples of the kinds of non-gaming applications that people are working on:</p>
<ul class="calibre11">
<li class="calibre12"><strong class="calibre1">Travel and tourism</strong>: Visit faraway places without leaving your home. Visit art museums in Paris, New York, and Tokyo in one afternoon. Take a walk on Mars. You can even enjoy Holi, the spring festival of colors, in India while sitting in your wintery cabin in Vermont.</li>
<li class="calibre12"><strong class="calibre1">Mechanical engineering and industrial design</strong>: Computer-aided design software such as AutoCAD and SOLIDWORKS pioneered three-dimensional modeling, simulation, and visualization. With VR, engineers and designers can directly experience the end product before it's actually built and play with what-if scenarios at a very low cost. Consider iterating a new automobile design. How does it look? How does it perform? How does it appear when sitting in the driver's seat?</li>
<li class="calibre12"><strong class="calibre1">Architecture and civil engineering</strong>: Architects and engineers have always constructed scale models of their designs, if only to pitch the ideas to clients and investors or, more importantly, to validate the many assumptions about the design. Presently, modeling and rendering software is commonly used to build virtual models from architectural plans. With VR, the conversations with stakeholders can be so much more confident. Other personnel, such as the interior designers, HVAC, and electrical engineers, can be brought into the process sooner.</li>
<li class="calibre12"><strong class="calibre1">Real estate</strong>: Real estate agents have been quick adopters of the internet and visualization technology to attract buyers and close sales. Real estate search websites were some of the first successful uses of the web. Online panoramic video walkthroughs of for-sale properties are commonplace today. With VR, I can be in New York and find a place to live in Los Angeles. </li>
<li class="calibre12"><strong class="calibre1">Medicine</strong>: The potential of VR for health and medicine may literally be a matter of life and death. Every day, hospitals use MRI and other scanning devices to produce models of our bones and organs that are used for medical diagnosis and possibly pre-operative planning. Using VR to enhance visualization and measurement will provide a more intuitive analysis. Virtual reality is also being used for the simulation of surgery to train medical students.</li>
<li class="calibre12"><strong class="calibre1">Mental health</strong>: Virtual reality experiences have been shown to be effective in a therapeutic context for the treatment of <strong class="calibre1">post-traumatic stress disorder</strong> (<strong class="calibre1">PTSD</strong>) in what's called <strong class="calibre1">exposure therapy</strong>, where the patient, guided by a trained therapist, confronts their traumatic memories through the retelling of the experience. Similarly, VR is being used to treat arachnophobia (fear of spiders) and the fear of flying.</li>
<li class="calibre12"><strong class="calibre1">Education</strong>: The educational opportunities for VR are almost too obvious to mention. One of the first successful VR experiences is <strong class="calibre1">Titans of Space</strong>, which lets you explore the solar system first-hand. In science, history, arts, and mathematics, VR will help students of all ages because, as they say, field trips are much more effective than textbooks.</li>
<li class="calibre12"><strong class="calibre1">Training</strong>: Toyota has demonstrated a VR simulation of drivers' education to teach teenagers about the risks of distracted driving. In another project, vocational students got to experience the operating of cranes and other heavy construction equipment. Training for first responders, the police, and fire and rescue workers can be enhanced with VR by presenting highly risky situations and alternative virtual scenarios. The <strong class="calibre1">National Football League</strong> (<strong class="calibre1">NFL</strong>) and college teams are looking to VR for athletic training.</li>
<li class="calibre12"><strong class="calibre1">Entertainment and journalism</strong>: Virtually attend rock concerts and sporting events. Watch music videos Erotica. Re-experience news events as if you were personally present. Enjoy 360-degree cinematic experiences. The art of storytelling will be transformed by virtual reality.</li>
</ul>
<p class="calibre3">Wow, that's quite a list! This is just the low-hanging fruit.</p>
<p class="calibre3">The purpose of this book is not to dive too deeply into any of these applications. Rather, I hope that this survey helps stimulate your thinking and provides an idea of how virtual reality has the potential to be virtually anything for everyone.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How virtual reality really works</h1>
                
            
            
                
<p class="calibre3">So, what is it about VR that's got everyone so excited? With your headset on, you experience synthetic scenes. It appears 3D, it feels 3D, and maybe you even have a sense of actually being there inside the virtual world. The strikingly obvious thing is: VR looks and feels <em class="calibre14">really cool!</em> But why?</p>
<p class="calibre3"><em class="calibre14">Immersion</em> and <em class="calibre14">presence</em> are the two words used to describe the quality of a VR experience. The Holy Grail is to increase both to the point where it seems so real, you forget you're in a virtual world. <em class="calibre14">Immersion</em> is the result of emulating the sensory input that your body receives (visual, auditory, motor, and so on). This can be explained technically. <em class="calibre14">Presence</em> is the visceral feeling that you get being transported there—a deep emotional or intuitive feeling. You could say that immersion is the science of VR and presence is the art. And that, my friend, is cool.</p>
<p class="calibre3">A number of different technologies and techniques come together to make the VR experience work, which can be separated into two basic areas:</p>
<ul class="calibre11">
<li class="calibre12">3D viewing</li>
<li class="calibre12">Head-pose tracking</li>
</ul>
<p class="calibre3">In other words, displays and sensors, like those built into today's mobile devices, are a big reason why VR is possible and affordable today.</p>
<p class="calibre3">Suppose the VR system knows exactly where your head is positioned at any given moment in time. Suppose that it can immediately render and display the 3D scene for this precise viewpoint stereoscopically. Then, wherever and whenever you move, you'll see the virtual scene exactly as you should. You will have a nearly perfect visual VR experience. That's basically it. <em class="calibre14">Ta-dah!</em></p>
<p class="calibre3">Well, not so fast. Literally.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Stereoscopic 3D viewing</h1>
                
            
            
                
<p class="calibre3">Split-screen stereography was discovered not long after the invention of photography, like the popular stereograph viewer from 1876 shown in the following picture (B.W. Kilborn &amp; Co, Littleton, New Hampshire; see <a href="http://en.wikipedia.org/wiki/Benjamin_W._Kilburn" class="calibre10">http://en.wikipedia.org/wiki/Benjamin_W._Kilburn</a>). A stereo photograph has separate views for the left and right eyes, which are slightly offset to create parallax. This fools the brain into thinking that it's a truly three-dimensional view. The device contains separate lenses for each eye, which let you easily focus on the photo close up:</p>
<div><img src="img/dc2f2a33-1eec-4508-a5b4-cde20729a85e.jpg" class="calibre21"/></div>
<div><p class="calibre3">Similarly, rendering these side-by-side stereo views is the first job of the VR-enabled camera in Unity.</p>
<p class="calibre3">Let's say that you're wearing a VR headset and you're holding your head very still so that the image looks frozen. It still appears better than a simple stereograph. Why?</p>
<p class="calibre3">The old-fashioned stereograph has relatively small twin images rectangularly bound. When your eye is focused on the center of the view, the 3D effect is convincing, but you will see the boundaries of the view. Move your eyes around (even with your head still), and any remaining sense of immersion is totally lost. You're just an observer on the outside peering into a diorama.</p>
</div>
<p class="calibre3">Now, consider what a VR screen looks like without the headset (see the following screenshot):</p>
<div><img src="img/4451f000-720d-434a-8f38-7c9cdbdade61.png" class="calibre22"/></div>
<div><p class="calibre3">The first thing that you will notice is that each eye has a barrel-shaped view. Why is that? The headset lens is a very wide-angle lens. So, when you look through it, you have a nice wide field of view. In fact, it is so wide (and tall), it distorts the image (<strong class="calibre5">pincushion effect</strong>). The graphics software SDK does an inverse of that distortion (<strong class="calibre5">barrel distortion</strong>) so that it looks correct to us through the lenses. This is referred to as an <strong class="calibre5">ocular distortion correction</strong>. The result is an apparent <strong class="calibre5">field of view</strong> (<strong class="calibre5">FOV</strong>) that is wide enough to include a lot more of your peripheral vision. For example, the Oculus Rift has a FOV of about 100 degrees. (We talk more about FOV in <a href="df997d92-d63c-4701-9786-da7ba54082b6.xhtml" target="_blank" class="calibre10">Chapter 10</a>, <em class="calibre14">Using All 360 Degrees</em>.)</p>
<p class="calibre3">Also, of course, the view angle from each eye is slightly offset, comparable to the distance between your eyes or the <strong class="calibre5">Inter Pupillary Distance</strong> (<strong class="calibre5">IPD</strong>). IPD is used to calculate the parallax and can vary from one person to the next. (The Oculus Configuration Utility comes with a utility to measure and configure your IPD. Alternatively, you can ask your eye doctor for an accurate measurement.)</p>
<p class="calibre3">It might be less obvious, but if you look closer at the VR screen, you will see color separations, like you'd get from a color printer whose print head is not aligned properly. This is intentional. Light passing through a lens is refracted at different angles based on the wavelength of the light. Again, the rendering software does an inverse of the color separation so that it looks correct to us. This is referred to as a <strong class="calibre5">chromatic aberration correction</strong>. It helps make the image look really crisp.</p>
</div>
<p class="calibre3">The resolution of the screen is also important to get a convincing view. If it's too low-res, you'll see the pixels, or what some refer to as a <strong class="calibre5">screen-door effect</strong>. The pixel width and height of the display is an oft-quoted specification when comparing the HMDs, but the <strong class="calibre5">pixels per inch</strong> (<strong class="calibre5">PPI</strong>) value may be more important. Other innovations in display technology such as <strong class="calibre5">pixel smearing</strong> and <strong class="calibre5">foveated rendering</strong> (showing higher-resolution details exactly where the eyeball is looking) will also help reduce the screen-door effect.</p>
<p class="calibre3">When experiencing a 3D scene in VR, you must also consider the <strong class="calibre5">frames per second</strong> (<strong class="calibre5">FPS</strong>). If the FPS is too slow, the animation will look choppy. Things that affect FPS include the GPU performance and the complexity of the Unity scene (the number of polygons and lighting calculations), among other factors. <em class="calibre14">This is compounded in VR because you need to draw the scene twice, once for each eye</em>. Technology innovations, such as GPUs optimized for VR, frame interpolation, and other techniques will improve the frame rates. For us, developers, performance-tuning techniques in Unity, such as those used by mobile game developers, can be applied in VR. (We will talk more about performance optimization in <a href="c938e975-93f3-4435-9d99-9f76bbbd0a98.xhtml" target="_blank" class="calibre10">Chapter 13</a>, <em class="calibre14">Optimizing for Performance and Comfort</em>.) These techniques and optics help make the 3D scene appear realistic.</p>
<p class="calibre3">Sound is also very important—more important than many people realize. VR should be experienced while wearing stereo headphones. In fact, when the audio is done well but the graphics are pretty crappy, you can still have a great experience. We see this a lot in TV and cinema. The same holds true in VR. Binaural audio gives each ear its own stereo <em class="calibre14">view</em> of a sound source in such a way that your brain imagines its location in 3D space. No special listening devices are needed. Regular headphones will work (speakers will not). For example, put on your headphones and visit the <em class="calibre14">Virtual Barber Shop</em> at <a href="http://www.youtube.com/watch?v=IUDTlvagjJA" class="calibre10">https://www.youtube.com/watch?v=IUDTlvagjJA</a>. True 3D audio provides an even more realistic spatial audio rendering, where sounds bounce off nearby walls and can be occluded by obstacles in the scene to enhance the first-person experience and realism.</p>
<p class="calibre3">Lastly, the VR headset should fit your head and face comfortably so that it's easy to forget that you're wearing it, and it should block out light from the real environment around you.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Head tracking</h1>
                
            
            
                
<p class="calibre3">So, we have a nice 3D picture that is viewable in a comfortable VR headset with a wide field of view. If this was it and you moved your head, it'd feel like you had a diorama box stuck to your face. Move your head and the box moves along with it, and this is much like holding the antique stereograph device or the childhood <strong class="calibre5">View-Master</strong>. Fortunately, VR is so much better.</p>
<div><p class="calibre3">The VR headset has a motion sensor (IMU) inside that detects spatial acceleration and rotation rates on all three axes, providing what's called the <strong class="calibre5">six degrees of freedom</strong>. This is the same technology that is commonly found in mobile phones and some console game controllers. Mounted on your headset, when you move your head, the current viewpoint is calculated and used when the next frame's image is drawn. This is referred to as <strong class="calibre5">motion detection</strong>.</p>
<p class="calibre3">The previous generation of mobile motion sensors was good enough for us to play mobile games on a phone, but for VR, it's not accurate enough. These inaccuracies (rounding errors) accumulate over time, as the sensor is sampled thousands of times per second and one may eventually lose track of where they were in the real world. This <em class="calibre14">drift</em> was a major shortfall of the older, phone-based Google Cardboard VR. It could sense your head's motion, but it lost track of your head's orientation. The current generation of phones, such as Google Pixel and Samsung Galaxy, which conform to the Daydream specifications, have upgraded sensors.</p>
<p class="calibre3">High-end HMDs account for drift with a separate <em class="calibre14">positional tracking</em> mechanism. The Oculus Rift does this with <em class="calibre14">inside-out positional tracking</em>, where an array of (invisible) infrared LEDs on the HMD are read by an external optical sensor (infrared camera) to determine your position. You need to remain within the <em class="calibre14">view</em> of the camera for the head tracking to work.</p>
<p class="calibre3">Alternatively, the Steam VR VIVE Lighthouse technology does outside-in positional tracking, where two or more dumb laser emitters are placed in the room (much like the lasers in a barcode reader at the grocery checkout), and an optical sensor on the headset reads the rays to determine your position.</p>
<p class="calibre3">Windows MR headsets use no external sensors or cameras. Rather, there are integrated cameras and sensors to perform spatial mapping of the local environment around you, in order to locate and track your position in the real-world 3D space.</p>
<p class="calibre3">Either way, the primary purpose is to accurately find the position of your head and other similarly equipped devices, such as handheld controllers.</p>
<p class="calibre3">Together, the position, tilt, and the forward direction of your head—or the <em class="calibre14">head pose—</em>are used by the graphics software to redraw the 3D scene from this vantage point. Graphics engines such as Unity are really good at this.</p>
<p class="calibre3">Now, let's say that the screen is getting updated at 90 FPS, and you're moving your head. The software determines the head pose, renders the 3D view, and draws it on the HMD screen. However, you're still moving your head. So, by the time it's displayed, the image is a little out of date with respect to your current position. This is called <strong class="calibre5">latency</strong>, and it can make you feel nauseous.</p>
<p class="calibre3">Motion sickness caused by latency in VR occurs when you're moving your head and your brain expects the world around you to change exactly in sync. Any perceptible delay can make you uncomfortable, to say the least.</p>
</div>
<p class="calibre3">Latency can be measured as the time from reading a motion sensor to rendering the corresponding image, or the <em class="calibre14">sensor-to-pixel</em> delay. According to Oculus's John Carmack:</p>
<p>A total latency of 50 milliseconds will feel responsive, but still noticeable laggy. 20 milliseconds or less will provide the minimum level of latency deemed acceptable.</p>
<p class="calibre3">There are a number of very clever strategies that can be used to implement latency compensation. The details are outside the scope of this book and inevitably will change as device manufacturers improve on the technology. One of these strategies is what Oculus calls the <strong class="calibre5">timewarp</strong>, which tries to guess where your head will be by the time the rendering is done and uses that future head pose instead of the actual detected one. All of this is handled in the SDK, so as a Unity developer, you do not have to deal with it directly.</p>
<p class="calibre3">Meanwhile, as VR developers, we need to be aware of latency as well as the other causes of motion sickness. Latency can be reduced via the faster rendering of each frame (keeping the recommended FPS). This can be achieved by discouraging your head from moving too quickly and using other techniques to make yourself feel grounded and comfortable.</p>
<p class="calibre3">Another thing that the Rift does to improve head tracking and realism is that it uses a skeletal representation of the neck so that all the rotations that it receives are mapped more accurately to the head rotation. For example, looking down at your lap creates a small forward translation since it knows it's impossible to rotate one's head downwards on the spot.</p>
<p class="calibre3">Other than head tracking, stereography, and 3D audio, virtual reality experiences can be enhanced with body tracking, hand tracking (and gesture recognition), locomotion tracking (for example, VR treadmills), and controllers with haptic feedback. The goal of all of this is to increase your sense of immersion and presence in the virtual world.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Types of VR experiences</h1>
                
            
            
                
<p class="calibre3">There is not just one kind of virtual reality experience. In fact, there are many. Consider the following types of virtual reality experiences:</p>
<ul class="calibre11">
<li class="calibre12"><strong class="calibre1">Diorama</strong>: In the simplest case, we build a 3D scene. You're observing from a third-person perspective. Your eye is the camera. Actually, each eye is a separate camera that gives you a stereographic view. You can look around.</li>
<li class="calibre12"><strong class="calibre1">First-person experience</strong>: This time, you're immersed in the scene as a freely moving avatar. Using an input controller (keyboard, game controller, or some other technique), you can walk around and explore the virtual scene.</li>
<li class="calibre12"><strong class="calibre1">Interactive virtual environment</strong>: This is like the first-person experience, but it has an additional feature—while you are in the scene, you can interact with the objects in it. Physics is at play. Objects may respond to you. You may be given specific goals to achieve and challenges with the game mechanics. You might even earn points and keep score.</li>
<li class="calibre12"><strong class="calibre1">3D content creation</strong>: In VR, create content that can be experienced in VR. <strong class="calibre1">Google Tilt Brush</strong> is one of the first blockbuster experiences, as is <strong class="calibre1">Oculus Medium</strong> and <strong class="calibre1">Google Blocks</strong> and others. Unity is working on <strong class="calibre1">EditorXR</strong> for Unity developers to work on their projects directly in the VR scene.</li>
<li class="calibre12"><strong class="calibre1">Riding on rails</strong>: In this kind of experience, you're seated and being transported through the environment (or the environment changes around you). For example, you can ride a rollercoaster via this virtual reality experience. However, it may not necessarily be an extreme thrill ride. It can be a simple real estate walk-through or even a slow, easy, and meditative experience.</li>
<li class="calibre12"><strong class="calibre1">360-degree media</strong>: Think panoramic images taken with <strong class="calibre1">GoPro</strong> on steroids that are projected on the inside of a sphere. You're positioned at the center of the sphere and can look all around. Some purists don't consider this <em class="calibre2">real</em> virtual reality, because you're seeing a projection and not a model rendering. However, it can provide an effective sense of presence.</li>
<li class="calibre12"><strong class="calibre1">Social VR</strong>: When multiple players enter the same VR space and can see and speak with each other's avatars, it becomes a remarkable social experience.</li>
</ul>
<p class="calibre3">In this book, we will implement a number of projects that demonstrate how to build each of these types of VR experience. For brevity, we'll need to keep it pure and simple, with suggestions for areas for further investigation.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Technical skills that are important to VR</h1>
                
            
            
                
<p class="calibre3">Each chapter of the book introduces new technical skills and concepts that are important if you wish to build your own virtual reality applications. You will learn about the following in this book:</p>
<ul class="calibre11">
<li class="calibre12"><strong class="calibre1">World scale</strong>: When building for a VR experience, attention to the 3D space and scale is important. One unit in Unity is usually equal to one meter in the virtual world.</li>
<li class="calibre12"><strong class="calibre1">First-person controls</strong>: There are various techniques that can be used to control the movement of your avatar (first-person camera), gaze-based selection, tracked hand input controllers, and head movements.</li>
<li class="calibre12"><strong class="calibre1">User interface </strong><strong class="calibre1">controls</strong>: Unlike conventional video (and mobile) games, all user interface components are in world coordinates in VR, not screen coordinates. We'll explore ways to present notices, buttons, selectors, and other <strong class="calibre1">user interface</strong> (<strong class="calibre1">UI</strong>) controls to the users so that they can interact and make selections.</li>
<li class="calibre12"><strong class="calibre1">Physics and gravity</strong>: Critical to the sense of presence and immersion in VR is the physics and gravity of the world. We'll use the Unity physics engine to our advantage.</li>
<li class="calibre12"><strong class="calibre1">Animations</strong>: Moving objects within the scene is called <em class="calibre2">animation</em>—duh! It can either be along predefined paths or it may use AI (artificial intelligence) scripting that follows a logical algorithm in response to events in the environment.</li>
<li class="calibre12"><strong class="calibre1">Multi-user services</strong>: Real-time networking and multi-user games are not easy to implement, but online services make it easy without you having to be a computer engineer.</li>
<li class="calibre12"><strong class="calibre1">Build</strong>, <strong class="calibre1">run and optimize</strong>: Different HMDs use different developer kits SDK and assets to build applications that target a specific device. We'll consider techniques that let you use a single interface for multiple devices. Understanding the rendering pipeline and how to optimize performance is a critical skill for VR development.</li>
</ul>
<p class="calibre3">We will write scripts in the C# language and use features of Unity as and when they are needed to get things done.</p>
<p class="calibre3">However, there are technical areas that we will not cover, such as realistic rendering, shaders, materials, and lighting. We will not go into modeling techniques, terrains, or humanoid animations. We also won't discuss game mechanics, dynamics, and strategies. All of these are very important topics that may be necessary for you to learn (or for someone in your team), in addition to this book, to build complete, successful and immersive VR applications.</p>
<p class="calibre3">So let's see what does this book actually covers and who does it caters to.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">What this book covers</h1>
                
            
            
                
<p class="calibre3">This book takes a practical, project-based approach to teach the specifics of virtual reality development using the Unity 3D game development engine. You'll learn how to use Unity 2018 to develop VR applications, which can be experienced with devices such as the Oculus Rift or Google Cardboard and all kinds of devices in between.</p>
<p class="calibre3">However, we have a slight problem here—the technology is advancing very rapidly. Of course, this is a good problem to have. Actually, it's an awesome problem to have, unless you're a developer in the middle of a project or an author of a book on this technology! How does one write a book that does not have obsolete content the day it's published?</p>
<p class="calibre3">Throughout the book, I have tried to distill some universal principles that should outlive any short-term advances in virtual reality technology, which includes the following:</p>
<ul class="calibre11">
<li class="calibre12">Categorization of different types of VR experiences with example projects</li>
<li class="calibre12">Important technical ideas and skills, especially the ones relevant to the building of VR applications</li>
<li class="calibre12">General explanations on how VR devices and software works</li>
<li class="calibre12">Strategies to ensure user comfort and to avoid VR motion sickness</li>
<li class="calibre12">Instructions on using the Unity game engine to build VR experiences</li>
</ul>
<p class="calibre3">Once VR becomes mainstream, many of these lessons will perhaps be obvious rather than obsolete, just like the explanations from the 1980s on <em class="calibre14">how to use a mouse</em> would just be silly today.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Who are you?</h1>
                
            
            
                
<p class="calibre3">If you are interested in virtual reality, want to learn how it works, or want to create VR experiences yourself, this book is for you. We will walk you through a series of hands-on projects, step-by-step tutorials, and in-depth discussions using the Unity 3D game engine.</p>
<p class="calibre3">Whether you're a non-programmer who is unfamiliar with 3D computer graphics, or a person with experience in both but new to virtual reality, you will benefit from this book. It could be your first foray into Unity, or you may have some experience, but you do not need to be an expert either. Still, if you're new to Unity, you can pick up this book as long as you realize that you'll need to adapt to the pace of the book.</p>
<p class="calibre3">Game developers may already be familiar with the concepts in the book, which are reapplied to the VR projects along with many other ideas that are specific to VR. Engineers and 3D designers may understand many of the 3D concepts, but they may wish to learn to use the game engine for VR. Application developers may appreciate the potential non-gaming uses of VR and want to learn the tools that can make this happen.</p>
<p class="calibre3">Whoever you are, we're going to turn you into a <em class="calibre14">3D software VR ninja</em>. Well, OK, this may be a stretch for this little book, but we'll try to set you on the way.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Summary</h1>
                
            
            
                
<p class="calibre3">In this chapter, we looked at virtual reality and realized that it can mean a lot of things to different people and can have different applications. There's no single definition, and it's a moving target. We are not alone, as everyone's still trying to figure it out. The fact is that virtual reality is a new medium that will take years, if not decades, to reach its potential.</p>
<p class="calibre3">VR is not just for games; it can be a game changer for many different applications. We identified over a dozen. There are different kinds of VR experiences, which we'll explore in the projects in this book.</p>
<p class="calibre3">VR headsets can be divided into those that require a separate processing unit (such as a desktop PC or a console) that runs with a powerful GPU and the ones that use your mobile technologies for processing.</p>
<p class="calibre3">We're all pioneers living at an exciting time. Because you're reading this book, you're one, too. Whatever happens next is literally up to you. <em class="calibre14">The best way to predict the future is to invent it.</em></p>
<p class="calibre3">So, let's get to it!</p>
<p class="calibre3">In the next chapter, we'll jump right into Unity and create our first 3D scene and learn about world coordinates, scaling, and importing 3D assets. Then, in <a href="5f03c1ec-a1bc-4ec8-bf4b-dc7a4492aba4.xhtml" target="_blank" class="calibre10">Chapter 3</a>, <em class="calibre14">VR Build and Run</em>, we'll build and run it on a VR headset, and we'll discuss how virtual reality really works.</p>


            

            
        
    </body></html>