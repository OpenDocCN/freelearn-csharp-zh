<html><head></head><body>
		<div id="_idContainer101">
			<h1 id="_idParaDest-251"><em class="italic"><a id="_idTextAnchor356"/>Chapter 12</em>: Working with MVC/Razor Pages</h1>
			<p>ABP Framework was designed to be modular, layered, and UI framework-agnostic. It is perfect for server-client architecture, and in theory, it can work with any kind of UI technology. The server-side uses the standard authentication protocols and provides standard-compliant HTTP APIs. You can use your favorite SPA framework and consume server-side APIs easily. In this way, you can utilize the entire server-side infrastructure of ABP Framework.</p>
			<p>However, ABP Framework helps with your UI development too. It provides systems so that you can build modular user interfaces, UI themes, layouts, navigation menus, and toolbars. It makes your development process easier while working with data tables, modals, and forms or authenticating and communicating with the server.</p>
			<p>ABP Framework is well integrated with, and provides startup solution templates for, the following UI frameworks:</p>
			<ul>
				<li>ASP.NET Core MVC/Razor Pages</li>
				<li>Blazor</li>
				<li>Angular </li>
			</ul>
			<p>In the fourth section of this book, I will cover working with the MVC/Razor Pages and Blazor UI options. In this chapter, you will learn how ABP Framework's MVC/Razor Page infrastructure is designed and how it can help you with your regular UI development cycle.</p>
			<p>I call this UI type MVC/Razor Pages as it supports both the MVC and Razor Pages approaches. You can even use both in a single application. However, since Razor Pages (introduced with ASP.NET Core 2.0) is Microsoft's recommended approach for new applications, all pre-built ABP modules, samples, and documents use the Razor Pages approach.</p>
			<p>This chapter covers the following topics:</p>
			<ul>
				<li>Understanding the theming system</li>
				<li>Using bundling and minification</li>
				<li>Working with menus</li>
				<li>Working with Bootstrap tag helpers</li>
				<li>Creating forms and implementing validation</li>
				<li>Working with modals</li>
				<li>Using the JavaScript API</li>
				<li>Consuming HTTP APIs</li>
			</ul>
			<h1 id="_idParaDest-252"><a id="_idTextAnchor357"/>Technical requirements</h1>
			<p>If you want to follow along with the examples in this chapter, you will need to have an IDE/editor that supports ASP.NET Core development. We will use the ABP CLI at some points, so you will need to install the ABP CLI, as explained in <a href="B17287_02_Epub_AM.xhtml#_idTextAnchor026"><em class="italic">Chapter 2</em></a>, <em class="italic">Getting Started with ABP Framework</em>. Finally, you will need to install Node.js v14+ to be able to install NPM packages.</p>
			<p>You can download the example application from this book's GitHub repository: <a href="https://github.com/PacktPublishing/Mastering-ABP-Framework">https://github.com/PacktPublishing/Mastering-ABP-Framework</a>. It contains some of the examples provided in this chapter.</p>
			<h1 id="_idParaDest-253"><a id="_idTextAnchor358"/>Understanding the theming system</h1>
			<p>UI styling <a id="_idIndexMarker755"/>is the most customized part of an application, and you have plenty of options. You can start with one of the UI kits such as Bootstrap, Tailwind CSS, or Bulma as the base for your application UI. You can then build a design language or buy a pre-built, cheap UI theme from a theme market. If you are building an independent application, you can make your selections and create your UI pages and components based on <a id="_idIndexMarker756"/>these selections. Your pages and styling don't have to be compatible with another application.</p>
			<p>On the other hand, if you want to build a modular application where each module's UI is independently developed (probably by a separate team) where the modules come together at runtime as a single application, you need to determine a design standard that should be implemented by all the module developers so that you have a consistent user interface.</p>
			<p>Since ABP Framework provides a modular infrastructure, it provides a theming system that determines a set of base libraries and standards. This helps ensure that the application and module developers can build UI pages and components without depending on a particular theme or style set. Once the module/application code is theme-independent and the theme standards are explicit, you can build different themes and easily use that theme for an application with a simple configuration.</p>
			<p>ABP Framework provides two free pre-built UI themes:</p>
			<ul>
				<li>The <strong class="bold">Basic</strong> theme<a id="_idIndexMarker757"/> is a minimalist theme that is built on the plain Bootstrap styling. It is ideal if you want to build styling from scratch.</li>
				<li>The <strong class="bold">LeptonX</strong> theme<a id="_idIndexMarker758"/> is a modern and production-ready <a id="_idIndexMarker759"/>UI theme built by the ABP Framework team.</li>
			</ul>
			<p>This book uses the Basic theme in all examples. The following is a screenshot of the LeptonX theme:</p>
			<div>
				<div id="_idContainer083" class="IMG---Figure">
					<img src="image/Figure_12.01_B17287.jpg" alt="Figure 12.1 – The LeptonX theme and the application layout&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.1 – The LeptonX theme and the application layout</p>
			<p>Pre-built UI themes are deployed as NuGet and NPM packages, so you can easily install and switch between them.</p>
			<p>The next two sections will introduce the fundamental base libraries and layouts that are shared by these themes.</p>
			<h2 id="_idParaDest-254"><a id="_idTextAnchor359"/>The base libraries</h2>
			<p>To make modules/applications independent of a particular theme, ABP determines some base CSS and JavaScript libraries that our module/application can rely on.</p>
			<p>The first <a id="_idIndexMarker760"/>and the most fundamental dependency of the ABP Framework MVC/Razor Pages UI is the <em class="italic">Twitter Bootstrap</em> framework. Starting with ABP Framework version 5.0, Bootstrap 5.x is used.</p>
			<p>Besides Bootstrap, there are some other core library dependencies such as Datatables.Net, JQuery, JQuery Validation, FontAwesome, Sweetalert, Toastr, Lodash, and more. No additional setup is needed if you want to use these standard libraries in your module or application.</p>
			<p>The next section will explain the layout system that is needed to understand how a web page is built.</p>
			<h2 id="_idParaDest-255"><a id="_idTextAnchor360"/>The layouts</h2>
			<p>A typical web page<a id="_idIndexMarker761"/> consists of two parts – the layout and the page's content. The layout shapes the overall page and generally includes the main header, a company/product logo, the main navigation menu, a footer, and other standard components. The following screenshot shows these parts on an example layout:</p>
			<div>
				<div id="_idContainer084" class="IMG---Figure">
					<img src="image/Figure_12.02_B17287.jpg" alt="Figure 12.2 – Parts of a page layout&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.2 – Parts of a page layout</p>
			<p>In modern web applications, layouts <a id="_idIndexMarker762"/>are designed to be responsive, which means they change their shape and placing so that they are suitable for the device that's being used by the current user. </p>
			<p>The layout's content almost remains the same across different pages – only the page's content changes. The page's content is generally a large part of the layout and may scroll if the content is larger than the height of the screen.</p>
			<p>A web application may have different layout requirements in different parts/pages. In ABP Framework, a theme can define one or more layouts. Every layout has a unique <strong class="source-inline">string</strong> name, and ABP Framework defines four standard layout names:</p>
			<ul>
				<li><strong class="source-inline">Application</strong>: Designed for back-office-style web applications with a header, menu, toolbar, footer, and so on. An example is shown in <em class="italic">Figure 12.1</em>.</li>
				<li><strong class="source-inline">Account</strong>: Designed for login, register, and other account-related pages.</li>
				<li><strong class="source-inline">Public</strong>: Designed for public-facing websites, such as a landing page for your product.</li>
				<li><strong class="source-inline">Empty</strong>: A layout without an actual layout. The page's content covers the entire screen.</li>
			</ul>
			<p>These strings are defined in the <strong class="source-inline">Volo.Abp.AspNetCore.Mvc.UI.Theming. StandardLayouts</strong> class. Every theme must define the <strong class="source-inline">Application</strong>, <strong class="source-inline">Account</strong>, and <strong class="source-inline">Empty</strong> layouts because they are common for most applications. The <strong class="source-inline">Public</strong> layout is optional and falls back to the <strong class="source-inline">Application</strong> layout if it's not implemented by the theme. A theme may define more layouts with different names.</p>
			<p>The <strong class="source-inline">Application</strong> layout <a id="_idIndexMarker763"/>is the default unless you change it. You can change it per page/view or for a folder. If you change it for a folder, all the pages/views under that folder will use the selected layout.</p>
			<p>To change it for a page/view, inject the <strong class="source-inline">IThemeManager</strong> service and use the <strong class="source-inline">CurrentTheme.GetLayout</strong> method with a layout name:</p>
			<p class="source-code">@inject IThemeManager ThemeManager</p>
			<p class="source-code">@{</p>
			<p class="source-code">    Layout = ThemeManager.CurrentTheme</p>
			<p class="source-code">             .GetLayout(StandardLayouts.Empty);</p>
			<p class="source-code">}</p>
			<p>Here, you can use the <strong class="source-inline">StandardLayouts</strong> class to get the standard layout names. For this example, we could use <strong class="source-inline">GetLayout("Empty")</strong> since the value of <strong class="source-inline">StandardLayouts.Empty</strong> is a constant <strong class="source-inline">string</strong> that's <strong class="source-inline">Empty</strong>. In this way, you can get your theme's non-standard layouts with their <strong class="source-inline">string</strong> names.</p>
			<p>If you want to change the layout for all the pages/views in a folder, you can create a <strong class="source-inline">_ViewStart.cshtml</strong> file in that folder and place the following code inside it:</p>
			<p class="source-code">@using Volo.Abp.AspNetCore.Mvc.UI.Theming</p>
			<p class="source-code">@inject IThemeManager ThemeManager</p>
			<p class="source-code">@{</p>
			<p class="source-code">    Layout = ThemeManager.CurrentTheme</p>
			<p class="source-code">             .GetLayout(StandardLayouts.Account);</p>
			<p class="source-code">}</p>
			<p>If you place that <strong class="source-inline">_ViewStart.cshtml</strong> file in the <strong class="source-inline">Pages</strong> folder (or in <strong class="source-inline">Views</strong> for MVC views), all your pages will use the selected layout unless you select another layout for a subfolder or a particular page/view.</p>
			<p>We can easily select a layout for our page to place content in. The next section will explain how to import script/style files into our pages and utilize the bundling and minification system.</p>
			<h1 id="_idParaDest-256"><a id="_idTextAnchor361"/>Using the bundling and minification system</h1>
			<p>ABP offers an end-to-end <a id="_idIndexMarker764"/>solution for installing client-side packages, adding script/style files to the pages, and bundling and minifying these files in development and production environments.</p>
			<p>Let's start by installing a client-side package for the application.</p>
			<h2 id="_idParaDest-257"><a id="_idTextAnchor362"/>Installing NPM packages</h2>
			<p>NPM is the<a id="_idIndexMarker765"/> de facto package manager for JavaScript/CSS libraries. When you create a new solution with the MVC/Razor Pages UI, you will see a <strong class="source-inline">package.json</strong> file in the web project's root folder. The initial content of the <strong class="source-inline">package.json</strong> file will look something like this:</p>
			<p class="source-code">{</p>
			<p class="source-code">  ...</p>
			<p class="source-code">  "dependencies": {</p>
			<p class="source-code">    "@abp/aspnetcore.mvc.ui.theme.basic": "^5.0.0"</p>
			<p class="source-code">  }</p>
			<p class="source-code">}</p>
			<p>Initially, we have a single NPM package dependency called <strong class="source-inline">@abp/aspnetcore.mvc.ui.theme.basic</strong>. This package has dependencies on all the base CSS/JavaScript libraries that are necessary for the Basic theme. If we want to install another NPM package, we can use the standard <strong class="source-inline">npm install</strong> (or <strong class="source-inline">yarn add</strong>) command.</p>
			<p>Let's assume that we want to use the <em class="italic">Vue.js</em> library in our application. We can run the following command in the root directory of the web <a id="_idTextAnchor363"/>project:</p>
			<p class="source-code">npm install vue</p>
			<p>This command installs the <strong class="source-inline">vue</strong> NPM package in the <strong class="source-inline">node_modules/vue</strong> folder. However, we can't use the files under the <strong class="source-inline">node_modules</strong> folder. We should copy the necessary files<a id="_idIndexMarker766"/> into the <strong class="source-inline">wwwroot</strong> folder of the web project to import them into the pages.</p>
			<p>You can copy the necessary files manually, but this is not the best way. ABP provides an <strong class="source-inline">install-libs</strong> command to automate this process using a mapping file. Open the <strong class="source-inline">abp.resourcemapping.js</strong> file under the web project and add the following code to the <strong class="source-inline">mappings</strong> di<a id="_idTextAnchor364"/>ctionary:</p>
			<p class="source-code">"@node_modules/vue/dist/vue.min.js": "@libs/vue/"</p>
			<p>The final content of the <strong class="source-inline">abp.resourcemapping.js</strong> file should look as follows:</p>
			<p class="source-code">module.exports = {</p>
			<p class="source-code">    aliases: { },</p>
			<p class="source-code">    mappings: {</p>
			<p class="source-code">        "@node_modules/vue/dist/vue.min.js": "@libs/vue/"</p>
			<p class="source-code">    }</p>
			<p class="source-code">};</p>
			<p>Now, we can run the following command in a command-line terminal, in the root directory of the web project:</p>
			<p class="source-code">abp install-libs</p>
			<p>The <strong class="source-inline">vue.min.js</strong> file should be copied under the <strong class="source-inline">wwwroot/libs/vue</strong> folder:</p>
			<div>
				<div id="_idContainer085" class="IMG---Figure">
					<img src="image/Figure_12.03_B17287.jpg" alt="Figure 12.3 – Adding the Vue.js library to the web project&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.3 – Adding the Vue.js library to the web project</p>
			<p>Mappings support glob/wildcard patterns. For example, you can copy all the files in the <strong class="source-inline">vue</strong> package with the following mapping:</p>
			<p class="source-code">"@node_modules/vue/dist/*": "@libs/vue/"</p>
			<p>The <strong class="source-inline">libs</strong> folder is committed to the source control system (such as Git) by default. This means that if your teammate gets the code from your source control system, they don't need to <a id="_idIndexMarker767"/>run the <strong class="source-inline">npm install</strong> or <strong class="source-inline">abp install-libs</strong> commands. If you want, you can add the <strong class="source-inline">libs</strong> folder to the ignore file of your source control (such as <strong class="source-inline">.gitignore</strong> for Git). In this case, you need to run the <strong class="source-inline">npm install</strong> and <strong class="source-inline">abp install-libs</strong> commands before running the application.</p>
			<p>The next section explains the standard ABP NPM packages.</p>
			<h2 id="_idParaDest-258"><a id="_idTextAnchor365"/>Using the standard packages</h2>
			<p>Building a<a id="_idIndexMarker768"/> modular system has another challenge – all the modules should use the same (or compatible) version of the same NPM package. ABP Framework provides a set of standard NPM packages to allow the ABP ecosystem to use the same version of these NPM packages and automate the mapping to copy the resources to the <strong class="source-inline">libs</strong> folder.</p>
			<p><strong class="source-inline">@abp/vue</strong> is one of these standard packages that can be used to install the Vue.js library in your project. You can install this package instead of the <strong class="source-inline">vue</strong> package:</p>
			<p class="source-code">npm install @abp/vue</p>
			<p>Now, you can run the <strong class="source-inline">abp install-libs</strong> command to copy the <strong class="source-inline">vue.min.js</strong> file into the <strong class="source-inline">wwwroot/libs/vue</strong> folder. Notice that you don't need to define the mapping in the <strong class="source-inline">abp.resourcemapping.js</strong> file since the <strong class="source-inline">@abp/vue</strong> package already includes the necessary mapping configuration.</p>
			<p>It is suggested that you use the standard <strong class="source-inline">@abp/*</strong> packages when they are available. In this way, you can depend on a standard version of the related library, and you don't need to configure the <strong class="source-inline">abp.resourcemapping.js</strong> file manually.</p>
			<p>However, when <a id="_idIndexMarker769"/>you install the library in your project, you will need to import it into the page to use it in your application.</p>
			<h2 id="_idParaDest-259"><a id="_idTextAnchor366"/>Importing script and style files</h2>
			<p>Once we have<a id="_idIndexMarker770"/> installed a JavaScript or CSS library, we can include it in any page or bundle. Let's start with the most simple case – you can import <strong class="source-inline">vue.min.js</strong> into a Razor Page or view it using the fol<a id="_idTextAnchor367"/>lowing code:</p>
			<p class="source-code">@section scripts {</p>
			<p class="source-code">    &lt;abp-script src=»/libs/vue/vue.min.js» /&gt;</p>
			<p class="source-code">}</p>
			<p>Here, we are importing JavaScript files into the <strong class="source-inline">scripts</strong> section, so the theme is placing them at the end of the HTML document, after the global scripts. <strong class="source-inline">abp-script</strong> is a tag helper that's defined by ABP Framework to include scripts to the page/view. It is rendered as follows:</p>
			<p class="source-code">&lt;script src=»/libs/vue/vue.min.js?_v=637653840922970000»&gt;&lt;/script&gt;</p>
			<p>We could use a standard <strong class="source-inline">script</strong> tag, but <strong class="source-inline">abp-script</strong> has the following advantages:</p>
			<ul>
				<li>It automatically <a id="_idIndexMarker771"/>minifies the file in the production (or staging) environment if the given file is not already minified. If it is not minified and ABP finds the minified file near the original file, it uses the pre-minified file instead of dynamically minifying at runtime.</li>
				<li>It adds a query string parameter to add versioning information so that the browsers don't cache it when the file changes. This means that when you re-deploy your application, browsers don't accidentally cache the old versions of your script files.</li>
				<li>ABP ensures that the file is added to the page only once, even if you include it multiple times. This is a good feature if you wish to build a modular system since different module components may include the same library independent of each other, and ABP Framework eliminates this duplication.</li>
			</ul>
			<p>Once we have<a id="_idIndexMarker772"/> included Vue.js in a page, we can utilize its power to create highly dynamic pages. Here is an example Razor Page, named <strong class="source-inline">VueDemo.cshtml</strong>:</p>
			<p class="source-code">@page</p>
			<p class="source-code">@model MvcDemo.Web.Page<a id="_idTextAnchor368"/>s.VueDemoModel</p>
			<p class="source-code">@sec<a id="_idTextAnchor369"/>tion scripts {</p>
			<p class="source-code">    &lt;abp-script src=»/libs/vue/vue.min.js» /&gt;</p>
			<p class="source-code">    &lt;script&gt;</p>
			<p class="source-code">        var app = new Vue({</p>
			<p class="source-code">            el: '#app',</p>
			<p class="source-code">            data: {</p>
			<p class="source-code">                message: 'Hello Vue!'</p>
			<p class="source-code">            }</p>
			<p class="source-code">        })</p>
			<p class="source-code">    &lt;/script&gt;</p>
			<p class="source-code">}</p>
			<p class="source-code">&lt;div id="app"&gt;</p>
			<p class="source-code">    &lt;h2&gt;{{ message }}&lt;/h2&gt;</p>
			<p class="source-code">&lt;/div&gt;</p>
			<p>If you run this page, a <strong class="bold">Hello Vue!</strong> message will be shown on the UI. I can recommend using Vue.js in some pages of your MVC/Razor Pages applications when you need to build complex and dynamic user interfaces.</p>
			<p>Let's take this example one step further and move the custom JavaScript code into a separate file. Create a JavaScript file named <strong class="source-inline">VueDemo.cshtml.js</strong> in the same folder:</p>
			<div>
				<div id="_idContainer086" class="IMG---Figure">
					<img src="image/Figure_12.04_B17287.jpg" alt="Figure 12.4 – Adding a JavaScript file&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.4 – Adding a JavaScript file</p>
			<p>I prefer this naming convention, but you can set any name for the JavaScript file.</p>
			<p class="callout-heading">JavaScript/CSS Files Under the Pages Folder</p>
			<p class="callout">In a regular ASP.NET Core application, you should place all the JavaScript/CSS files under the <strong class="source-inline">wwwroot</strong> folder. ABP allows you to add JavaScript/CSS files to the <strong class="source-inline">Pages</strong> or <strong class="source-inline">Views</strong> folder, near the corresponding <strong class="source-inline">.cshtml</strong> file. I find this approach to be pretty useful since we keep the related files together.</p>
			<p>The content of the new JavaScript file is shown in the followin<a id="_idTextAnchor370"/>g code block:</p>
			<p class="source-code">var app = new Vue({</p>
			<p class="source-code">    el: '#app',</p>
			<p class="source-code">    data: {</p>
			<p class="source-code">        message: 'Hello Vue!'</p>
			<p class="source-code">    }</p>
			<p class="source-code">});</p>
			<p>Now, we can <a id="_idIndexMarker773"/>update the <strong class="source-inline">VueDemo.cshtml</strong> file's content, as shown in the following code block:</p>
			<p class="source-code">@page</p>
			<p class="source-code">@model MvcDemo.Web.Pages.VueDemoModel</p>
			<p class="source-code">@section scripts {</p>
			<p class="source-code">    &lt;abp-script src=»/libs/vue/vue.<a id="_idTextAnchor371"/>min.js» /&gt;</p>
			<p class="source-code">    &lt;abp-script src=»/Pages/VueDemo.cshtml.js» /&gt;</p>
			<p class="source-code">}</p>
			<p class="source-code">&lt;div id="app"&gt;</p>
			<p class="source-code">    &lt;h2&gt;{{ message }}&lt;/h2&gt;</p>
			<p class="source-code">&lt;/div&gt;</p>
			<p>It is good to keep JavaScript code in a separate file and include it on the page as an external file, as in the preceding example.</p>
			<p>Working with style (CSS) files is<a id="_idIndexMarker774"/> pretty similar to working with script files. The following example uses the <strong class="source-inline">styles</strong> section and the <strong class="source-inline">abp-style</strong> tag helper to import a style fi<a id="_idTextAnchor372"/>le on the page:</p>
			<p class="source-code">@section styles {</p>
			<p class="source-code">    &lt;abp-style src="/Pages/VueDemo.cshtml.css" /&gt;</p>
			<p class="source-code">}</p>
			<p>We can import multiple script or style files into a page. The next section will show you how to bundle these files as a single, minified file in production.</p>
			<h2 id="_idParaDest-260"><a id="_idTextAnchor373"/>Creating page bundles</h2>
			<p>When we use<a id="_idIndexMarker775"/> multiple <strong class="source-inline">abp-script</strong> (or <strong class="source-inline">abp-style</strong>) tags on a page, ABP individually includes the files on the page and includes the minified versions in production. However, we generally want to create a single bundled and minified file in production. We can use the <strong class="source-inline">abp-script-bundle</strong> and <strong class="source-inline">abp-style-bundle</strong> tag helpers to create bundles for a page, as shown in the following example:</p>
			<p class="source-code">@secti<a id="_idTextAnchor374"/>on scripts {</p>
			<p class="source-code">    &lt;abp-script-bundle&gt;</p>
			<p class="source-code">        &lt;abp-script src=»/libs/vue/vue.min.js» /&gt;</p>
			<p class="source-code">        &lt;abp-script src=»/Pages/VueDemo.cshtml.js» /&gt;</p>
			<p class="source-code">    &lt;/abp-script-bundle&gt;</p>
			<p class="source-code">}</p>
			<p>Here, we are creating a bundle that includes two files. ABP automatically minifies these files and bundles them as a single file, and then versions this single file in the production environment. ABP makes the bundling operation in the first request to the page and then caches the bundled file in memory. It uses the cached bundle file for subsequent requests.</p>
			<p>You can use conditional logic or dynamic code inside the bundle tags, as shown in the following example:</p>
			<p class="source-code">&lt;abp-script-bundle&gt;</p>
			<p class="source-code">    &lt;abp-script src="/vali<a id="_idTextAnchor375"/>dator.js" /&gt;</p>
			<p class="source-code">    @if (System.Globalization.CultureInfo</p>
			<p class="source-code">         .CurrentUICulture.Name == "tr")</p>
			<p class="source-code">    {</p>
			<p class="source-code">        &lt;abp-script src="/validator.tr.js" /&gt;</p>
			<p class="source-code">    }</p>
			<p class="source-code">    &lt;abp-script src="/some-other.js" /&gt;</p>
			<p class="source-code">&lt;/abp-script-bundle&gt;</p>
			<p>This example <a id="_idIndexMarker776"/>adds a sample validation library to the bundle and conditionally adds the Turkish localization script. If the user's language is Turkish, then Turkish localization will be added to the bundle. Otherwise, it won't be added. ABP can understand the difference – it creates and caches two separate bundles, one for Turkish users and one for the rest.</p>
			<p>With that, we've learned how to create bundles for an individual page. In the next section, we will explain how to configure global bundles.</p>
			<h2 id="_idParaDest-261"><a id="_idTextAnchor376"/>Configuring global bundles</h2>
			<p>The bundling tag <a id="_idIndexMarker777"/>helpers are very useful for page bundles. You can also use them if you are creating custom layouts. However, when we use themes, the layouts are controlled by the theme.</p>
			<p>Let's assume that we've decided to use the Vue.js library on all the pages and want to add it to the global bundle instead of adding it to every page individually. For this, we can configure <strong class="source-inline">AbpBundlingOptions</strong> in <strong class="source-inline">ConfigureServices</strong> of our module (in the web project), as shown in the following code block:</p>
			<p class="source-code">Configure&lt;AbpBundlingOptions<a id="_idTextAnchor377"/>&gt;(options =&gt;</p>
			<p class="source-code">{</p>
			<p class="source-code">    options.ScriptBundles.Configure(</p>
			<p class="source-code">        StandardBundles.Scripts.Global,</p>
			<p class="source-code">        bundle =&gt;</p>
			<p class="source-code">        {</p>
			<p class="source-code">            bundle.AddFiles(«/libs/vue/vue.min.js»);</p>
			<p class="source-code">        }</p>
			<p class="source-code">    );</p>
			<p class="source-code">    options.StyleBundles.Configure(</p>
			<p class="source-code">        StandardBundles.Styles.Global,</p>
			<p class="source-code">        bundle =&gt;</p>
			<p class="source-code">        {</p>
			<p class="source-code">            bundle.AddFiles("/global-styles.css");</p>
			<p class="source-code">        }</p>
			<p class="source-code">    );</p>
			<p class="source-code">});</p>
			<p>The <strong class="source-inline">options.ScriptBundles.Configure</strong> method is used to manipulate a bundle with the <a id="_idIndexMarker778"/>given name. The first parameter is the name of the bundle. <strong class="source-inline">StandardBundles.Scripts.Global</strong> is a <strong class="source-inline">constant string</strong> whose value is the name of the global script bundle, which is imported by all the layouts. The preceding example also adds a CSS file to the global style bundle.</p>
			<p>The global bundles are just named bundles. We will explain these in the next section.</p>
			<h2 id="_idParaDest-262"><a id="_idTextAnchor378"/>Creating named bundles</h2>
			<p>Page-based bundling is <a id="_idIndexMarker779"/>a simple way to create bundles for a single page. However, there are situations where you will need to define a bundle and reuse it on multiple pages. As explained in the previous section, the global style and script bundles were named bundles. We can also define custom-named bundles and import the bundle in any page or layout.</p>
			<p>The following example defines a named bundle and adds three JavaScript files inside it:</p>
			<p class="source-code">Configure&lt;AbpBundlingOptio<a id="_idTextAnchor379"/>ns&gt;(options =&gt;</p>
			<p class="source-code">{</p>
			<p class="source-code">    options</p>
			<p class="source-code">        .ScriptBundles</p>
			<p class="source-code">        .Add("MyGlobalScripts", bundle =&gt; {</p>
			<p class="source-code">            bundle.AddFiles(</p>
			<p class="source-code">                "/libs/jquery/jquery.js",</p>
			<p class="source-code">                "/libs/bootstrap/js/bootstrap.js",</p>
			<p class="source-code">                "/scripts/my-global-scripts.js"</p>
			<p class="source-code">            );</p>
			<p class="source-code">        });                </p>
			<p class="source-code">});</p>
			<p>We can write this <a id="_idIndexMarker780"/>code in <strong class="source-inline">ConfigureServices</strong> of a module class (typically, the module class in the web layer). <strong class="source-inline">options.ScriptBundles</strong> and <strong class="source-inline">options.StyleBundles</strong> are two kinds of bundles. In this example, we've used the <strong class="source-inline">ScriptBundles</strong> property to create a bundle that includes some JavaScript files.</p>
			<p>Once we have created a named bundle, we can use it in a page/view using the <strong class="source-inline">abp-script-bundle</strong> and <strong class="source-inline">abp-style-bundle</strong> tag helpers, as shown in t<a id="_idTextAnchor380"/>he following example:</p>
			<p class="source-code">&lt;abp-script-bundle name="MyGlobalScripts" /&gt;</p>
			<p>When we use this code in a page or view, all the script files are individually added to the page at development time. They are automatically bundled and minified in the production environment by default. The next section explains how to change this default behavior.</p>
			<h2 id="_idParaDest-263"><a id="_idTextAnchor381"/>Controlling the bundling and minification behavior</h2>
			<p>We can use the <strong class="source-inline">AbpBundlingOptions</strong> options class to change the default behavior of the bundling and <a id="_idIndexMarker781"/>minification system. See the following configuration:</p>
			<p class="source-code">Configure&lt;AbpBundlingOptions&gt;(options =&gt;</p>
			<p class="source-code">{</p>
			<p class="source-code">    options.Mode = BundlingMode.None;</p>
			<p class="source-code">});</p>
			<p>This configuration code disables the bundling and minification logic. This means that even in production, all the script/style files are individually added to the page without bundling and minification. <strong class="source-inline">options.Mode</strong> can take one of the following values:</p>
			<ul>
				<li><strong class="source-inline">Auto</strong> (default): Bundles and minifies in production and staging environments but disables bundling and minification at development time.</li>
				<li><strong class="source-inline">Bundle</strong>: Bundles the files (creates a file per bundle) but does not minify the styles/scripts.</li>
				<li><strong class="source-inline">BundleAndMinify</strong>: Always bundles and minifies the files, even at development time.</li>
				<li><strong class="source-inline">None</strong>: Disables the bundling and minification process.</li>
			</ul>
			<p>In this book, I've explained the basic usage of the bundling and minification system. However, it has advanced features, such as creating bundle contributor classes, inheriting a bundle from another bundle, extending and manipulating bundles, and more. These features are especially helpful when you want to create reusable UI modules. Please refer to the ABP Framework documentation for all the features: <a href="https://docs.abp.io/en/abp/latest/UI/AspNetCore/Bundling-Minification">https://docs.abp.io/en/abp/latest/UI/AspNetCore/Bundling-Minification</a>. </p>
			<p>In the next section, you will learn how to work with navigation menus.</p>
			<h1 id="_idParaDest-264"><a id="_idTextAnchor382"/>Working with menus</h1>
			<p>Menus are rendered <a id="_idIndexMarker782"/>by the current theme, so the final application or modules can't directly change the menu items. You can see the main menu on the left-hand side of <em class="italic">Figure 12.1</em>. ABP provides a menu system, so the modules and the final application can dynamically add new menu items or remove/change the items that are added by those modules.</p>
			<p>We can use <strong class="source-inline">AbpNavigationOptions</strong> to add contributors to the menu system. ABP executes all the contributors to build the menu dynamically, as shown in the following example:</p>
			<p class="source-code">Configure&lt;AbpNavigationOptions&gt;(options =&gt;</p>
			<p class="source-code">{</p>
			<p class="source-code">    options.MenuContributors.Add(new MyMenuContributor());</p>
			<p class="source-code">});</p>
			<p>Here, <strong class="source-inline">MyMenuContributor</strong> should be a class that implements the <strong class="source-inline">IMenuContributor</strong> interface. The ABP startup solution template already contains a menu contributor class that you can directly use. <strong class="source-inline">IMenuContributor</strong> defines the <strong class="source-inline">ConfigureMenuAsync</strong> method, which we should implement like so:</p>
			<p class="source-code">public class MvcDemoMenuContributor : IMenuContributor</p>
			<p class="source-code">{</p>
			<p class="source-code">    public async Task ConfigureMenuAsync(</p>
			<p class="source-code">        MenuConfigurationContext context)</p>
			<p class="source-code">    {</p>
			<p class="source-code">        if (context.Menu.Name == StandardMenus.Main)</p>
			<p class="source-code">        {</p>
			<p class="source-code">            //TODO: Configure the main menu</p>
			<p class="source-code">        }</p>
			<p class="source-code">    }</p>
			<p class="source-code">}</p>
			<p>The first thing we should consider is the menu's name. Two standard menu names are defined as constants in the <strong class="source-inline">StandardMenus</strong> class (in the <strong class="source-inline">Volo.Abp.UI.Navigation</strong> namespace):</p>
			<ul>
				<li><strong class="source-inline">Main</strong>: The main menu of the application. It is shown on the left-hand side of <em class="italic">Figure 12.1</em>.</li>
				<li><strong class="source-inline">User</strong>: The user context menu. It is opened when you click your username on the header.</li>
			</ul>
			<p>So, the preceding <a id="_idIndexMarker783"/>example checks the menu's name and only adds items to the main menu. The following example code block adds a <strong class="bold">Customer Relation Management</strong> (<strong class="bold">CRM</strong>) menu item with two sub-menu items:</p>
			<p class="source-code">var l = context.GetLocalizer&lt;MvcDemoResource&gt;();</p>
			<p class="source-code">context.Menu.AddItem(</p>
			<p class="source-code">    new ApplicationMenuItem("MyProject.Crm", l["CRM"])</p>
			<p class="source-code">        .AddItem(new ApplicationMenuItem(</p>
			<p class="source-code">            name: "MyProject.Crm.Customers", </p>
			<p class="source-code">            displayName: l["Customers"], </p>
			<p class="source-code">            url: "/crm/customers")</p>
			<p class="source-code">        ).AddItem(new ApplicationMenuItem(</p>
			<p class="source-code">            name: "MyProject.Crm.Orders", </p>
			<p class="source-code">            displayName: l["Orders"],</p>
			<p class="source-code">            url: "/crm/orders")</p>
			<p class="source-code">        )</p>
			<p class="source-code">);</p>
			<p>In this example, we are getting an <strong class="source-inline">IStringLocalizer</strong> instance (<strong class="source-inline">l</strong>) to localize the display names of the menu items. <strong class="source-inline">context.GetLocalizer</strong> is a shortcut to getting localizer services. You can use <strong class="source-inline">context.ServiceProvider</strong> to resolve any service and apply your custom logic to build the menu.</p>
			<p>Every menu item should have a unique <strong class="source-inline">name</strong> (such as <strong class="source-inline">MyProject.Crm.Customers</strong> in this example) and a <strong class="source-inline">displayName</strong>. There are <strong class="source-inline">url</strong>, <strong class="source-inline">icon</strong>, <strong class="source-inline">order</strong>, and some other options available to control the appearance and behavior of the menu items.</p>
			<p>The basic theme renders the example menu, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer087" class="IMG---Figure">
					<img src="image/Figure_12.05_B17287.jpg" alt="Figure 12.5 – Menu items rendered by the Basic theme&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.5 – Menu items rendered by the Basic theme</p>
			<p>It is important to understand that the <strong class="source-inline">ConfigureMenuAsync</strong> method is called every time we render the menu. For a typical MVC/Razor Pages application, this method is called in every page <a id="_idIndexMarker784"/>request. In this way, you can dynamically shape the menu and conditionally add or remove items. You generally need to check permissions while adding the menu items, as shown in the following code block:</p>
			<p class="source-code">if (await context.IsGrantedAsync("MyPermissionName"))</p>
			<p class="source-code">{</p>
			<p class="source-code">    context.Menu.AddItem(...);</p>
			<p class="source-code">}</p>
			<p><strong class="source-inline">context.IsGrantedAsync</strong> is a shortcut for checking the permissions for the current user with a permission name. If we want to resolve and use <strong class="source-inline">IAuthorizationService</strong> manually, we could rewrite the same code, as shown in the following code block:</p>
			<p class="source-code">var authorizationService = context</p>
			<p class="source-code">    .ServiceProvider.GetRequiredService&lt;IAuthorizationService&gt;();</p>
			<p class="source-code">if (await authorizationService.IsGrantedAsync(</p>
			<p class="source-code">    "MyPermissionName"))</p>
			<p class="source-code">{</p>
			<p class="source-code">    context.Menu.AddItem()</p>
			<p class="source-code">}</p>
			<p>In this example, I used <strong class="source-inline">context.ServiceProvider</strong> to resolve <strong class="source-inline">IauthorizationService</strong>. Then, I used its <strong class="source-inline">IsGrantedAsync</strong> method, just like in the previous example. You can safely resolve services from <strong class="source-inline">context.ServiceProvider</strong> and let ABP Framework release these services at the end of the menu's build process.</p>
			<p>It is also possible to find<a id="_idIndexMarker785"/> existing menu items (added by the depending modules) in the <strong class="source-inline">context.Menu.Items</strong> collection to modify or remove them. </p>
			<p>In the next section, we will continue looking at Bootstrap tag helpers and learn how to render common Bootstrap components in a type-safe way.</p>
			<h1 id="_idParaDest-265"><a id="_idTextAnchor383"/>Working with Bootstrap tag helpers</h1>
			<p>Bootstrap is <a id="_idIndexMarker786"/>one of the most popular UI (HTML/CSS/JS) libraries in the world, and it is the fundamental UI framework that's used by all the ABP themes. As a benefit of using such a library as a standard library, we can build our UI pages and components based on Bootstrap and let the theme style them. In this way, our modules and even applications can be theme-independent and work with any ABP-compatible UI theme.</p>
			<p>Bootstrap is a well-documented and easy-to-use library. However, there are two problems while writing<a id="_idIndexMarker787"/> Bootstrap-based UI code:</p>
			<ul>
				<li>Some components require a lot of boilerplate code. Most parts of these codes are repetitive and tedious to write and maintain.</li>
				<li>Writing plain Bootstrap code in an MVC/Razor Pages web application is not very type-safe. We can make mistakes in class names and HTML structure that we can't catch at <a id="_idIndexMarker788"/>compile time.</li>
			</ul>
			<p>ASP.NET Core MVC/Razor Pages has a <em class="italic">tag </em><em class="italic">helper</em> system to define reusable components and use them as other HTML tags in our pages/views. ABP takes the power of tag helpers and provides a set of tag helper components for the Bootstrap library. In this way, we can build Bootstrap-based UI pages and components with less code and in a type-safe manner.</p>
			<p>It is still possible to write native Bootstrap HTML code with ABP Framework, and ABP's Bootstrap tag helpers don't cover Bootstrap 100%. However, we suggest using the Bootstrap tag helpers wherever possible. See the following example:</p>
			<p class="source-code">&lt;abp-button button-type="Primary" text="Click me!" /&gt;</p>
			<p>Here, I used the <strong class="source-inline">abp-button</strong> tag helper<a id="_idIndexMarker789"/> to render a Bootstrap button. I used the <strong class="source-inline">button-type</strong> and <strong class="source-inline">text</strong> attributes with compile-time check support. This example code is rendered as follows at runtime:</p>
			<p class="source-code">&lt;button class="btn btn-primary" type="button"&gt;</p>
			<p class="source-code">    Click me!</p>
			<p class="source-code">&lt;/button&gt;</p>
			<p>There are many Bootstrap tag helpers in ABP Framework, so I won't explain all of them here. Please refer to ABP's documentation to learn how to use them: <a href="https://docs.abp.io/en/abp/latest/UI/AspNetCore/Tag-Helpers/Index">https://docs.abp.io/en/abp/latest/UI/AspNetCore/Tag-Helpers/Index</a>.</p>
			<p>In the next two sections, we will use some of these Bootstrap tag helpers to build form items and open modals.</p>
			<h1 id="_idParaDest-266"><a id="_idTextAnchor384"/>Creating forms and implementing validation</h1>
			<p>ASP.NET Core<a id="_idIndexMarker790"/> provides a good infrastructure for preparing forms and submitting, validating, and processing them on the server side. However, it still requires writing some boilerplate and repeating code. ABP Framework simplifies working with forms by providing tag <a id="_idIndexMarker791"/>helpers and automating validation and localization wherever possible. Let's begin with how to render form elements using ABP's tag helpers.</p>
			<h2 id="_idParaDest-267"><a id="_idTextAnchor385"/>Rendering form elements</h2>
			<p>The <strong class="source-inline">abp-input</strong> tag helper <a id="_idIndexMarker792"/>is used to render an appropriate HTML input element for a given property. It is better to show its usage in a complete example.</p>
			<p>Let's assume that we need to build a form to create a new <em class="italic">movie</em> entity and have created a new Razor Page called <strong class="source-inline">CreateMovie.cshtml</strong>. First, let's look at the code-behind file:</p>
			<p class="source-code">public class CreateMovieModel : AbpPageModel</p>
			<p class="source-code">{</p>
			<p class="source-code">    [BindProperty]</p>
			<p class="source-code">    public MovieViewModel Movie { get; set; }</p>
			<p class="source-code">    </p>
			<p class="source-code">    public void OnGet()</p>
			<p class="source-code">    {</p>
			<p class="source-code">        Movie = new MovieViewModel();</p>
			<p class="source-code">    }</p>
			<p class="source-code">    public async Task OnPostAsync()</p>
			<p class="source-code">    {</p>
			<p class="source-code">        // TODO: process the form (using the Movie object)</p>
			<p class="source-code">    }</p>
			<p class="source-code">}</p>
			<p>Page models are<a id="_idIndexMarker793"/> normally derived from the <strong class="source-inline">PageModel</strong> class. However, we are deriving from ABP's <strong class="source-inline">AbpPageModel</strong> base class since it provides some pre-injected services and helper methods. That's a simple page model class. Here, we are creating a new <strong class="source-inline">MovieViewModel</strong> instance in the <strong class="source-inline">OnGet</strong> method to bind it to the form elements. We also have an <strong class="source-inline">OnPostAsync</strong> method that we can use to process the posted form data. <strong class="source-inline">[BindProperty]</strong> tells ASP.NET Core to bind the post data to the <strong class="source-inline">Movie</strong> object.</p>
			<p>To explore this example, let's look at the <strong class="source-inline">MovieViewModel</strong> class:</p>
			<p class="source-code">public class MovieViewModel</p>
			<p class="source-code">{</p>
			<p class="source-code">    [Required]</p>
			<p class="source-code">    [StringLength(256)]</p>
			<p class="source-code">    public string Name { get; set; }</p>
			<p class="source-code">    [Required]</p>
			<p class="source-code">    [DataType(DataType.Date)]</p>
			<p class="source-code">    public DateTime ReleaseDate { get; set; }</p>
			<p class="source-code">    [Required]</p>
			<p class="source-code">    [TextArea]</p>
			<p class="source-code">    [StringLength(1000)]</p>
			<p class="source-code">    public string Description { get; set; }</p>
			<p class="source-code">    public Genre Genre { get; set; }</p>
			<p class="source-code">    public float? Price { get; set; }</p>
			<p class="source-code">    public bool PreOrder { get; set; }</p>
			<p class="source-code">}</p>
			<p>This object is used to <a id="_idIndexMarker794"/>render the form elements and bind the post data when the user submits the form. Notice that some properties have data annotation validation attributes to validate the values of these properties automatically. Here, the <strong class="source-inline">Genre</strong> property is an <strong class="source-inline">enum</strong>, as shown here:</p>
			<p class="source-code">public enum Genre</p>
			<p class="source-code">{</p>
			<p class="source-code">    Classic, Action, Fiction, Fantasy, Animation</p>
			<p class="source-code">}</p>
			<p>Now, we can switch to the view part and try to render a form to get the movie information from the user.</p>
			<p>First, I will you show how we can do this without ABP Framework to understand the benefits of using ABP Framework. First, we must open a <strong class="source-inline">form</strong> element, as shown in the following code block:</p>
			<p class="source-code">&lt;form method="post"&gt;</p>
			<p class="source-code">    &lt;-- TODO: FORM ELEMENTS --&gt;</p>
			<p class="source-code">    &lt;button class="btn btn-primary" type="submit"&gt;</p>
			<p class="source-code">        Submit</p>
			<p class="source-code">    &lt;/button&gt;</p>
			<p class="source-code">&lt;/form&gt;</p>
			<p>In the <strong class="source-inline">form</strong> block, we <a id="_idIndexMarker795"/>write code for each <strong class="source-inline">form</strong> element, and then we add a <strong class="source-inline">submit</strong> button to post the form. Showing the full code of <strong class="source-inline">form</strong> would be too long for this book, so I will only show the code that is necessary for rendering the input element for the <strong class="source-inline">Movie.Name</strong> property:</p>
			<p class="source-code">&lt;div class="form-group"&gt;</p>
			<p class="source-code">    &lt;label asp-for="Movie.Name" class="control-label"&gt;</p>
			<p class="source-code">    &lt;/label&gt;</p>
			<p class="source-code">    &lt;input asp-for="Movie.Name" class="form-control"/&gt;</p>
			<p class="source-code">    &lt;span asp-validation-for="Movie.Name" </p>
			<p class="source-code">        class="text-danger"&gt;&lt;/span&gt;</p>
			<p class="source-code">&lt;/div&gt;</p>
			<p>The preceding code block should seem very familiar to you if you have ever created a form with ASP.NET Core Razor Pages/MVC and Bootstrap. It puts a <strong class="source-inline">label</strong>, the actual input element, and a validation message area by wrapping them with a <strong class="source-inline">form-group</strong>. The following screenshot shows the rendered form:</p>
			<div>
				<div id="_idContainer088" class="IMG---Figure">
					<img src="image/Figure_12.06_B17287.jpg" alt="Figure 12.6 – A simple form with a single text input&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.6 – A simple form with a single text input</p>
			<p>The form currently<a id="_idIndexMarker796"/> contains only a single piece of text input for the <strong class="source-inline">Name</strong> property. You could write similar code for each property of the <strong class="source-inline">Movie</strong> class, which would result in large and repetitive code. Let's see how we can render the same input using ABP Framework's <strong class="source-inline">abp-input</strong> tag helper:</p>
			<p class="source-code">&lt;abp-input asp-for="Movie.Name" /&gt;</p>
			<p>That's pretty easy. Now, we can render all the form elements. The following is the finalized code:</p>
			<p class="source-code">&lt;form method="post"&gt;</p>
			<p class="source-code">    &lt;abp-input asp-for="Movie.Name" /&gt;</p>
			<p class="source-code">    &lt;abp-select asp-for="Movie.Genre" /&gt;</p>
			<p class="source-code">    &lt;abp-input asp-for="Movie.Description" /&gt;</p>
			<p class="source-code">    &lt;abp-input asp-for="Movie.Price" /&gt;</p>
			<p class="source-code">    &lt;abp-input asp-for="Movie.ReleaseDate" /&gt;</p>
			<p class="source-code">    &lt;abp-input asp-for="Movie.PreOrder" /&gt;</p>
			<p class="source-code">    &lt;abp-button type="submit" button-type="Primary"</p>
			<p class="source-code">        text="Submit"/&gt;</p>
			<p class="source-code">&lt;/form&gt;</p>
			<p>The preceding code block is dramatically shorter compared to the standard Bootstrap form code. I used the <strong class="source-inline">abp-select</strong> tag helper for the <strong class="source-inline">Genre</strong> property. It understands that <strong class="source-inline">Genre</strong> is an <strong class="source-inline">enum</strong> and<a id="_idIndexMarker797"/> creates the dropdown element using the <strong class="source-inline">enum</strong> members. The following is the rendered form:</p>
			<div>
				<div id="_idContainer089" class="IMG---Figure">
					<img src="image/Figure_12.07_B17287.jpg" alt="Figure 12.7 – Full form for creating a new movie&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.7 – Full form for creating a new movie</p>
			<p>ABP automatically adds <strong class="bold">*</strong> near the label of required form fields. It reads the types and attributes of the class properties and determines the form fields.</p>
			<p>If all you want to do is render the input elements in order, you can replace the last code block with the following one:</p>
			<p class="source-code">&lt;abp-dynamic-form abp-model="Movie" submit-button="true" /&gt;</p>
			<p>The <strong class="source-inline">abp-dynamic-form</strong> tag helper gets a model and creates the entire form automatically!</p>
			<p>The <strong class="source-inline">abp-input</strong>, <strong class="source-inline">abp-select</strong>, and <strong class="source-inline">abp-radio</strong> tag helpers are mapped to a class property and render the corresponding UI element. You can use them if you want to control the layout of the form and place custom HTML elements between the form controls. On the <a id="_idIndexMarker798"/>other hand, <strong class="source-inline">abp-dynamic-form</strong> makes creating the form super simple while you have less control over the form's layout. However you create the form, ABP automates the validation and localization process for you, as I will explain in the next few sections.</p>
			<h2 id="_idParaDest-268"><a id="_idTextAnchor386"/>Validating user inputs</h2>
			<p>If you try to submit the form<a id="_idIndexMarker799"/> without filling in the required fields, the form won't be submitted to the server, and an error message will be shown for each invalid form element. The following screenshot shows the error message when you leave the <strong class="source-inline">Name</strong> property empty and submit the form:</p>
			<div>
				<div id="_idContainer090" class="IMG---Figure">
					<img src="image/Figure_12.08_B17287.jpg" alt="Figure 12.8 – Invalid user input&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.8 – Invalid user input</p>
			<p>Client-side validation is automatically done based on the data annotation attributes in the <strong class="source-inline">MovieViewModel.Name</strong> property. So, you don't need to write any validation code for the standard checks. Users can't submit the form until all the fields are valid.</p>
			<p>Client-side validation is just for the user experience. It would be easy to bypass the client-side validation and submit an invalid form to the server (by manipulating or disabling the JavaScript code in the browser's developer tools). So, you should always validate the user input on the server side, which should be done in the <strong class="source-inline">OnPostAsync</strong> method of the page model class. The following code block shows the common pattern that's used while handling a form post:</p>
			<p class="source-code">public async Task OnPostAsync()</p>
			<p class="source-code">{</p>
			<p class="source-code">    if (ModelState.IsValid)</p>
			<p class="source-code">    {</p>
			<p class="source-code">        //TODO: Create a new movie</p>
			<p class="source-code">    }</p>
			<p class="source-code">    else</p>
			<p class="source-code">    {</p>
			<p class="source-code">        Alerts.Danger("Please correct the form fields!");</p>
			<p class="source-code">    }</p>
			<p class="source-code">}</p>
			<p><strong class="source-inline">ModelState.IsValid</strong> returns <strong class="source-inline">false</strong> if any form field is invalid. This is a standard feature of ASP.NET Core. You should always process the input in such an <strong class="source-inline">if</strong> statement. Optionally, you can have <a id="_idIndexMarker800"/>logic in the <strong class="source-inline">else</strong> statement. In this example, I used ABP's <strong class="source-inline">Alerts</strong> feature to show a client-side alert message to the user. The following screenshot shows the result of submitting the invalid form:</p>
			<div>
				<div id="_idContainer091" class="IMG---Figure">
					<img src="image/Figure_12.09_B17287.jpg" alt="Figure 12.9 – Invalid form result from the server&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.9 – Invalid form result from the server</p>
			<p>If you look at the validation <a id="_idIndexMarker801"/>error message under the <strong class="bold">Price</strong> field, you will see a custom error message. I've implemented the <strong class="source-inline">IValidatableObject</strong> interface for the <strong class="source-inline">MovieViewModel</strong> class, as shown in the following code block:</p>
			<p class="source-code">public class MovieViewModel : IValidatableObject</p>
			<p class="source-code">{</p>
			<p class="source-code">    // ... properties omitted</p>
			<p class="source-code">    public IEnumerable&lt;ValidationResult&gt; Validate(</p>
			<p class="source-code">        ValidationContext validationContext)</p>
			<p class="source-code">    {</p>
			<p class="source-code">        if (PreOrder &amp;&amp; Price &gt; 999)</p>
			<p class="source-code">        {</p>
			<p class="source-code">            yield return new ValidationResult(</p>
			<p class="source-code">                "Price should be lower than 999 for </p>
			<p class="source-code">                 pre-order movies!",</p>
			<p class="source-code">                new[] { nameof(Price) }</p>
			<p class="source-code">            );</p>
			<p class="source-code">        }</p>
			<p class="source-code">    }</p>
			<p class="source-code">}</p>
			<p>I'm performing complex custom validation logic in the <strong class="source-inline">Validate</strong> method. You can refer to the <em class="italic">Validating user inputs</em> section in <a href="B17287_07_Epub_AM.xhtml#_idTextAnchor213"><em class="italic">Chapter 7</em></a>, <em class="italic">Exploring Cross-Cutting Concerns</em>, to learn <a id="_idIndexMarker802"/>more about server-side validation. Here, we should understand that we can use custom logic on the server and show validation messages on the client side.</p>
			<p>In the next section, we will learn how to localize validation errors, as well as form labels.</p>
			<h2 id="_idParaDest-269"><a id="_idTextAnchor387"/>Localizing forms</h2>
			<p>ABP Framework <a id="_idIndexMarker803"/>automatically localizes the validation error messages based on the current language. Try to switch to another language and submit the form without providing a movie name. The following screenshot shows this for the Turkish language:</p>
			<div>
				<div id="_idContainer092" class="IMG---Figure">
					<img src="image/Figure_12.10_B17287.jpg" alt="Figure 12.10 – Auto-localized validation error messages&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.10 – Auto-localized validation error messages</p>
			<p>The error text has changed. However, you can still see <strong class="bold">Name</strong> as the field name because that's our custom field name, and we haven't localized it yet.</p>
			<p>ABP provides a<a id="_idIndexMarker804"/> convention-based localization system for the form fields. You just define a localization entry in your localization JSON file with the key formatted as <strong class="source-inline">DisplayName:&lt;property-name&gt;</strong>. I can add the following lines to the <strong class="source-inline">en.json</strong> file (in the <em class="italic">Domain.Shared</em> project) to localize all the fields of the movie creation form:</p>
			<p class="source-code">"DisplayName:Name": "Name",</p>
			<p class="source-code">"DisplayName:ReleaseDate": "Release date",</p>
			<p class="source-code">«DisplayName:Description»: «Description»,</p>
			<p class="source-code">«DisplayName:Genre»: «Genre»,</p>
			<p class="source-code">"DisplayName:Price": "Price",</p>
			<p class="source-code">"DisplayName:PreOrder": "Pre-order"</p>
			<p>Then, I can localize these in the Turkish language with the following entries in the <strong class="source-inline">tr.json</strong> file:</p>
			<p class="source-code">"DisplayName:Name": "İsim",</p>
			<p class="source-code">"DisplayName:ReleaseDate": "Yayınlanma tarihi",</p>
			<p class="source-code">"DisplayName:Description": "Açıklama",</p>
			<p class="source-code">"DisplayName:Genre": "Tür",</p>
			<p class="source-code">"DisplayName:Price": "Ücret",</p>
			<p class="source-code">"DisplayName:PreOrder": "Ön sipariş"</p>
			<p>Now, we have a localized label and a more localized validation error message:</p>
			<div>
				<div id="_idContainer093" class="IMG---Figure">
					<img src="image/Figure_12.11_B17287.jpg" alt="Figure 12.11 – Fully localized validation error message and the field label&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.11 – Fully localized validation error message and the field label</p>
			<p>Adding the <strong class="source-inline">DisplayName:</strong> prefix to the property name is a suggested convention for the <strong class="source-inline">form</strong> fields, but actually, it is not required. If ABP can't find the <strong class="source-inline">DisplayName:Price</strong> entry, it will search an entry with the <strong class="source-inline">Price</strong> key, without any prefix. If you want to specify the localization key for a property, you can add the <strong class="source-inline">[DisplayName]</strong> attribute on top of the property, as shown in the following example:</p>
			<p class="source-code">[DisplayName("MoviePrice")]</p>
			<p class="source-code">public float? Price { get; set; }</p>
			<p>With this setup, ABP<a id="_idIndexMarker805"/> will try to localize the field name using the <strong class="source-inline">"MoviePrice"</strong> key.</p>
			<p>The <strong class="source-inline">abp-select</strong> tag localizes the items in the dropdown for <strong class="source-inline">enum</strong> types by conventions. You can add entries to your localization file, such as <strong class="source-inline">&lt;enum-type&gt;.&lt;enum-member&gt;</strong>. For the <strong class="source-inline">Action</strong> member of the <strong class="source-inline">Genre</strong> enum type, we can add a localization entry with the <strong class="source-inline">Genre.Action</strong> key. It falls back to the <strong class="source-inline">Action</strong> key if the <strong class="source-inline">Genre.Action</strong> key is not found.</p>
			<p>In the next section, we will discuss how to convert a standard form into a fully AJAX form.</p>
			<h2 id="_idParaDest-270"><a id="_idTextAnchor388"/>Implementing AJAX forms</h2>
			<p>When the user submits a <a id="_idIndexMarker806"/>standard form, a full-page post is performed and the server re-renders the entire page. An alternative approach could be posting the form as an AJAX request and handling the response in JavaScript code. This approach is much faster than the regular post request since the browser doesn't need to reload the whole page and all the resources of the page. It is also a better user experience in many cases since you can show some animations on the waiting time. Also, in this way, you don't lose the page's state and can perform smart actions in your JavaScript code.</p>
			<p>You can handle all the AJAX stuff manually, but ABP Framework provides built-in ways for such common patterns. You can add the <strong class="source-inline">data-ajaxForm="true"</strong> attribute to any <strong class="source-inline">form</strong> element (including the <strong class="source-inline">abp-dynamic-form</strong> element) to make it posted through an AJAX request.</p>
			<p>The following example adds the AJAX feature to <strong class="source-inline">abp-dynamic-form</strong>:</p>
			<p class="source-code">&lt;abp-dynamic-form abp-model="Movie"</p>
			<p class="source-code">                  submit-button="true" </p>
			<p class="source-code">                  data-ajaxForm="true"</p>
			<p class="source-code">                  id="MovieForm" /&gt;</p>
			<p>When we convert a form into an AJAX form, the post handler on the server side should be implemented properly. The following code block shows a common pattern to implement the post handler:</p>
			<p class="source-code">public async Task&lt;IActionResult&gt; OnPostAsync()</p>
			<p class="source-code">{</p>
			<p class="source-code">    ValidateModel();    </p>
			<p class="source-code">    //TODO: Create a new movie</p>
			<p class="source-code">    return NoContent();</p>
			<p class="source-code">}</p>
			<p>The first line validates<a id="_idIndexMarker807"/> the user input and throws <strong class="source-inline">AbpValidationException</strong> if the input model is not valid. The <strong class="source-inline">ValidateModel</strong> method comes from the base <strong class="source-inline">AbpPageModel</strong> class. If you don't want to use it, you can check <strong class="source-inline">if (ModelState.IsValid)</strong> and take any action you need. If the form is valid, you normally save the new movie to a database. Finally, you can return the resulting data to the client. We don't need to return a response for this example, so a <strong class="source-inline">NoContent</strong> result is fine.</p>
			<p>When you convert a form into an AJAX form, you typically want to take action when the form is successfully submitted. The following example handle<a id="_idTextAnchor389"/>s the <strong class="source-inline">abp-ajax-success</strong> event of the form:</p>
			<p class="source-code">$(function (){</p>
			<p class="source-code">    $('#MovieForm').on('abp-ajax-success', function(){</p>
			<p class="source-code">        $('#MovieForm').slideUp();</p>
			<p class="source-code">        abp.message.success('Successfully saved, thanks</p>
			<p class="source-code">            :)');</p>
			<p class="source-code">    });</p>
			<p class="source-code">});</p>
			<p>In this example, I registered a callback function for the <strong class="source-inline">abp-ajax-success</strong> event of the form. In this callback, you can do anything you need. For example, I used the <strong class="source-inline">slideUp</strong> JQuery function to hide the form, then used ABP's success UI message. We will return to the <strong class="source-inline">abp.message</strong> API in the <em class="italic">Using the JavaScript API</em> section of this chapter.</p>
			<p>Exception handling logic<a id="_idIndexMarker808"/> is different for AJAX requests. ABP handles all exceptions, returns a proper JSON response to the client, and then automatically handles the error on the client side. For example, suppose the form has a validation error that's been determined on the server side. In this case, the server returns a validation error message, and the client shows a message box, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer094" class="IMG---Figure">
					<img src="image/Figure_12.12_B17287.jpg" alt="Figure 12.12 – Server-side validation errors on the AJAX form submit&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.12 – Server-side validation errors on the AJAX form submit</p>
			<p>The message box is <a id="_idIndexMarker809"/>shown in any exception, including your custom exceptions and <strong class="source-inline">UserFriendlyException</strong>. Go to the <em class="italic">Exception handling</em> section of <a href="B17287_07_Epub_AM.xhtml#_idTextAnchor213"><em class="italic">Chapter 7</em></a>, <em class="italic">Exploring Cross-Cutting Concerns</em>, to learn more about the exception handling system.</p>
			<p>In addition to converting the form into an AJAX form and handling exceptions, ABP also prevents double-clicking on the <strong class="bold">Submit</strong> button to prevent multiple posts. The <strong class="bold">Submit</strong> button becomes busy, and the button's text changes to <strong class="bold">Processing…</strong> until the request is completed. You can set the <strong class="source-inline">data-busy-text</strong> attribute on the <strong class="bold">Submit</strong> button to use another piece of text.</p>
			<p>In the next section, we will learn how ABP Framework helps us while working with modal dialogs.</p>
			<h1 id="_idParaDest-271"><a id="_idTextAnchor390"/>Working with modals</h1>
			<p>A modal is<a id="_idIndexMarker810"/> one of the essential components when you want to create interactive user interfaces. It provides a convenient way to get a response from the user or show some information without changing the current page layout.</p>
			<p>Bootstrap has a modal component, but it requires some boilerplate code. ABP Framework provides the <strong class="source-inline">abp-modal</strong> tag helper to render a modal component, which simplifies the modal's usage in most use cases. Another problem with modals is placing the modal code inside the page that opens the modal, which makes the modal hard to reuse. ABP provides a modal API on the JavaScript side to dynamically load and control these modals. It also works well with forms inside modals. Let's begin with the simplest usage.</p>
			<h2 id="_idParaDest-272"><a id="_idTextAnchor391"/>Understanding the basics of modals</h2>
			<p>ABP suggests defining modals<a id="_idIndexMarker811"/> as separate Razor Pages (or views if you are using the MVC pattern). So, as the first step, we should create a new Razor Page. Let's assume that we've created a new Razor Page called <strong class="source-inline">MySimpleModal.cshtml</strong> under the <strong class="source-inline">Pages</strong> folder. The code-behind file is simple:</p>
			<p class="source-code">public class MySimpleModalModel : AbpPageModel</p>
			<p class="source-code">{</p>
			<p class="source-code">    public string Message { get; set; }</p>
			<p class="source-code">    </p>
			<p class="source-code">    public void OnGet()</p>
			<p class="source-code">    {</p>
			<p class="source-code">        Message = "Hello modals!";</p>
			<p class="source-code">    }</p>
			<p class="source-code">}</p>
			<p>We just have a <strong class="source-inline">Message</strong> property being shown inside the modal dialog. Let's see the view side:</p>
			<p class="source-code">@page</p>
			<p class="source-code">@model MvcDemo.Web.Pages.MySimpleModalModel</p>
			<p class="source-code">@{</p>
			<p class="source-code">    Layout = null;</p>
			<p class="source-code">}</p>
			<p class="source-code">&lt;abp-modal&gt;</p>
			<p class="source-code">    &lt;abp-modal-header title="My header"&gt;&lt;/abp-modal-header&gt;</p>
			<p class="source-code">    &lt;abp-modal-body&gt;</p>
			<p class="source-code">        @Model.Message</p>
			<p class="source-code">    &lt;/abp-modal-body&gt;</p>
			<p class="source-code">    &lt;abp-modal-footer buttons="Close"&gt;&lt;/abp-modal-footer&gt;</p>
			<p class="source-code">&lt;/abp-modal&gt;</p>
			<p>The <strong class="source-inline">Layout = null</strong> statement is critical here. Because this page is loaded with an AJAX request, the result should only contain the modal's content, not the standard layout. <strong class="source-inline">abp-modal</strong> is the main tag helper that renders the HTML of the modal dialog. <strong class="source-inline">abp-modal-header</strong>, <strong class="source-inline">abp-modal-body</strong>, and <strong class="source-inline">abp-modal-footer</strong> are the main parts of the modal and have different options. The modal body is very simple in this example; it just shows <strong class="source-inline">Message</strong> on the model.</p>
			<p>We've created the <a id="_idIndexMarker812"/>modal, but we should create a way to open it. ABP provides the <strong class="source-inline">ModalManager</strong> API on the JavaScript side to control a modal. Here, we need to create a <strong class="source-inline">ModalManager</strong> object on the page where we want to open the modal:</p>
			<p class="source-code">var simpleModal = new abp.ModalManager({</p>
			<p class="source-code">    viewUrl: '/MySimpleModal'</p>
			<p class="source-code">});</p>
			<p><strong class="source-inline">abp.ModalManager</strong> has a few options, but the most basic is <strong class="source-inline">viewUrl</strong>, which indicates the URL where the modal content will be loaded. Once we have a <strong class="source-inline">ModalManager</strong> instance, we can call its <strong class="source-inline">open</strong> method to open the modal:</p>
			<p class="source-code">$(function (){</p>
			<p class="source-code">    $('#Button1').click(function (){</p>
			<p class="source-code">        simpleModal.open();</p>
			<p class="source-code">    });</p>
			<p class="source-code">});</p>
			<p>This example assumes there is a button with an ID of <strong class="source-inline">Button1</strong> on the page. We are opening the modal when the user clicks the button. The following screenshot shows the opened modal:</p>
			<div>
				<div id="_idContainer095" class="IMG---Figure">
					<img src="image/Figure_12.13_B17287.jpg" alt="Figure 12.13 – A simple modal dialog box&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.13 – A simple modal dialog box</p>
			<p>Typically, we create <a id="_idIndexMarker813"/>dynamic content in a modal, so we need to pass some arguments while opening the modal dialog box. To do this, you can pass an object to the <strong class="source-inline">open</strong> method that contains the modal arguments, as shown in the following example:</p>
			<p class="source-code">simpleModal.open({</p>
			<p class="source-code">    productId: 42</p>
			<p class="source-code">});</p>
			<p>Here, we passed a <strong class="source-inline">productId</strong> argument to the modal, so it may show details of the given product. You can add the same argument to the <strong class="source-inline">OnGet</strong> method of the <strong class="source-inline">MySimpleModalModel</strong> class to obtain the value and process inside the method:</p>
			<p class="source-code">public void OnGet(int productId)</p>
			<p class="source-code">{</p>
			<p class="source-code">    ...</p>
			<p class="source-code">}</p>
			<p>You can get the<a id="_idIndexMarker814"/> product information from the database and render the product details in the modal body. </p>
			<p>In the next section, we will learn how to place a form inside a modal to get data from the user.</p>
			<h2 id="_idParaDest-273"><a id="_idTextAnchor392"/>Working with forms inside modals</h2>
			<p>Modals are <a id="_idIndexMarker815"/>widely used to show a form to users. ABP's ModalManager API gracefully handles some common tasks for you:</p>
			<ul>
				<li>It focuses on the first input of the form.</li>
				<li>It triggers a validation check when you press the <em class="italic">Enter</em> key or click the <strong class="bold">Save</strong> button. It doesn't allow you to submit the form unless the form is fully valid.</li>
				<li>It submits the form via an AJAX request, disables the modal buttons, and shows a progressing icon until the save operation is complete.</li>
				<li>If you've entered some data and click the <strong class="bold">Cancel</strong> button or close the modal, it warns you about unsaved changes.</li>
			</ul>
			<p>Let's assume that we want to show a modal dialog to create a new movie and we've created a new Razor Page called <strong class="source-inline">ModalWithForm.cshtml</strong>. The code-behind file is similar to what we had in the <em class="italic">Implementing AJAX forms</em> section:</p>
			<p class="source-code">public class ModalWithForm : AbpPageModel</p>
			<p class="source-code">{</p>
			<p class="source-code">    [BindProperty]</p>
			<p class="source-code">    public MovieViewModel Movie { get; set; }</p>
			<p class="source-code">    </p>
			<p class="source-code">    public void OnGet()</p>
			<p class="source-code">    {</p>
			<p class="source-code">        Movie = new MovieViewModel();</p>
			<p class="source-code">    }</p>
			<p class="source-code">    public async Task&lt;IActionResult&gt; OnPostAsync()</p>
			<p class="source-code">    {</p>
			<p class="source-code">        ValidateModel();</p>
			<p class="source-code">        //TODO: Create a new movie</p>
			<p class="source-code">        return NoContent();</p>
			<p class="source-code">    }</p>
			<p class="source-code">}</p>
			<p>The <strong class="source-inline">OnPostAsync</strong> method validates the user input first. If the form is not valid, an exception is thrown and handled by ABP Framework on the server side and the client side. You can return a response to the client, but we are returning a <strong class="source-inline">NoContent</strong> response in this example.</p>
			<p>The view side of the<a id="_idIndexMarker816"/> modal is a bit different since we mix a form with a modal:</p>
			<p class="source-code">@page</p>
			<p class="source-code">@using Volo.Abp.AspNetCore.Mvc.UI.Bootstrap.TagHelpers.Modal</p>
			<p class="source-code">@model MvcDemo.Web.Pages.ModalWithForm</p>
			<p class="source-code">@{</p>
			<p class="source-code">    Layout = null;</p>
			<p class="source-code">}</p>
			<p class="source-code">&lt;form method="post" asp-page="/ModalWithForm"&gt;</p>
			<p class="source-code">    &lt;abp-modal&gt;</p>
			<p class="source-code">        &lt;abp-modal-header title="Create new movie"&gt;</p>
			<p class="source-code">        &lt;/abp-modal-header&gt;</p>
			<p class="source-code">        &lt;abp-modal-body&gt;</p>
			<p class="source-code">            &lt;abp-input asp-for="Movie.Name" /&gt;</p>
			<p class="source-code">            &lt;abp-select asp-for="Movie.Genre" /&gt;</p>
			<p class="source-code">            &lt;abp-input asp-for="Movie.Description" /&gt;</p>
			<p class="source-code">            &lt;abp-input asp-for="Movie.Price" /&gt;</p>
			<p class="source-code">            &lt;abp-input asp-for="Movie.ReleaseDate" /&gt;</p>
			<p class="source-code">            &lt;abp-input asp-for="Movie.PreOrder" /&gt;</p>
			<p class="source-code">        &lt;/abp-modal-body&gt;</p>
			<p class="source-code">        &lt;abp-modal-footer buttons="@(</p>
			<p class="source-code">            AbpModalButtons.Cancel|AbpModalButtons.Save)"&gt;</p>
			<p class="source-code">        &lt;/abp-modal-footer&gt;</p>
			<p class="source-code">    &lt;/abp-modal&gt;</p>
			<p class="source-code">&lt;/form&gt;</p>
			<p>The <strong class="source-inline">abp-modal</strong> tag <a id="_idIndexMarker817"/>is wrapped by a <strong class="source-inline">form</strong> element. We don't put the <strong class="source-inline">form</strong> tag inside the <strong class="source-inline">abp-modal-body</strong> element because the <strong class="bold">Save</strong> button (which submits the form) in the modal footer should be inside <strong class="source-inline">form</strong>. So, as a solution, we are placing <strong class="source-inline">form</strong> as the topmost element in this view. The rest of the code block should be familiar; we use ABP input tag helpers to render the form elements.</p>
			<p>Now, we can open the modal in our JavaScript code:</p>
			<p class="source-code">var newMovieModal = new abp.ModalManager({</p>
			<p class="source-code">    viewUrl: '/ModalWithForm'</p>
			<p class="source-code">});</p>
			<p class="source-code">$(function (){</p>
			<p class="source-code">    $('#Button2').click(function (){</p>
			<p class="source-code">        newMovieModal.open();</p>
			<p class="source-code">    });</p>
			<p class="source-code">});</p>
			<p>The opened dialog <a id="_idIndexMarker818"/>is shown in the following screenshot:</p>
			<div>
				<div id="_idContainer096" class="IMG---Figure">
					<img src="image/Figure_12.14_B17287.jpg" alt="Figure 12.14 – A form inside a modal&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.14 – A form inside a modal</p>
			<p>It is also possible to use the <strong class="source-inline">abp-dynamic-form</strong> tag helper within a modal. We could rewrite the modal's view like so:</p>
			<p class="source-code">&lt;abp-dynamic-form abp-model="Movie" </p>
			<p class="source-code">    asp-page="ModalWithForm"&gt;</p>
			<p class="source-code">    &lt;abp-modal&gt;</p>
			<p class="source-code">        &lt;abp-modal-header title="Create new movie!"&gt;</p>
			<p class="source-code">        &lt;/abp-modal-header&gt;</p>
			<p class="source-code">        &lt;abp-modal-body&gt;</p>
			<p class="source-code">            &lt;abp-form-content/&gt;</p>
			<p class="source-code">        &lt;/abp-modal-body&gt;</p>
			<p class="source-code">        &lt;abp-modal-footer buttons="@(</p>
			<p class="source-code">            AbpModalButtons.Cancel|AbpModalButtons.Save)"&gt;</p>
			<p class="source-code">        &lt;/abp-modal-footer&gt;</p>
			<p class="source-code">    &lt;/abp-modal&gt;</p>
			<p class="source-code">&lt;/abp-dynamic-form&gt;</p>
			<p>Here, I <a id="_idIndexMarker819"/>wrapped <strong class="source-inline">abp-modal</strong> with an <strong class="source-inline">abp-dynamic-form</strong> element, just like in the previous section. The main point of this example is that I used the <strong class="source-inline">&lt;abp-form-content/&gt;</strong> tag helper in the <strong class="source-inline">abp-modal-body</strong> element. <strong class="source-inline">abp-form-content</strong> is an optional tag helper that is used to place the form inputs of the <strong class="source-inline">abp-dynamic-form</strong> tag helper in the desired place.</p>
			<p>You typically want to take action once the modal form has been saved. For this, you can register a callback function to the <strong class="source-inline">onResult</strong> event of <strong class="source-inline">ModalManager</strong>, as shown in the following code block:</p>
			<p class="source-code">newMovieModal.onResult(function (e, data){</p>
			<p class="source-code">    console.log(data.responseText);</p>
			<p class="source-code">});</p>
			<p><strong class="source-inline">data.responseText</strong> will be the data if the server sends any result. For example, you can return a <strong class="source-inline">Content</strong> response from the <strong class="source-inline">OnPostAsync</strong> method, as shown in the following example:</p>
			<p class="source-code">public async Task&lt;IActionResult&gt; OnPostAsync()</p>
			<p class="source-code">{</p>
			<p class="source-code">    ...</p>
			<p class="source-code">    return Content("42");</p>
			<p class="source-code">}</p>
			<p>ABP simplifies <a id="_idIndexMarker820"/>all these common tasks. Otherwise, you would write a lot of boilerplate code. </p>
			<p>In the next section, we will learn how to add client-side logic to our modal dialogs.</p>
			<h2 id="_idParaDest-274"><a id="_idTextAnchor393"/>Adding JavaScript for modals</h2>
			<p>If your modal<a id="_idIndexMarker821"/> needs some advanced client-side logic, you may <a id="_idIndexMarker822"/>want to write some custom JavaScript code for your modal. You can write your JavaScript code on the page where you open the modal, but that is not very modular and reusable. It is good to write your modal's JavaScript code in a separate file, ideally near the <strong class="source-inline">.cshtml</strong> file of the modal (remember that ABP allows you to place JavaScript files under the <strong class="source-inline">Pages</strong> folder).</p>
			<p>For this, we can create a new JavaScript file and define a function in the <strong class="source-inline">abp.modals</strong> namespace, as shown in the following code:</p>
			<p class="source-code">abp.modals.MovieCreation = function () {</p>
			<p class="source-code">     this.initModal = function(modalManager, args) {</p>
			<p class="source-code">        var $modal = modalManager.getModal();</p>
			<p class="source-code">        var preOrderCheckbox =</p>
			<p class="source-code">            $modal.find('input[name="Movie.PreOrder"]');</p>
			<p class="source-code">        preOrderCheckbox.change(function(){</p>
			<p class="source-code">            if (this.checked){</p>
			<p class="source-code">               alert('checked pre-order!'); </p>
			<p class="source-code">            }</p>
			<p class="source-code">        });</p>
			<p class="source-code">        console.log('initialized the modal...');</p>
			<p class="source-code">    }</p>
			<p class="source-code">};</p>
			<p>Once we have created such a JavaScript class, we can associate it with the modal while creating the <strong class="source-inline">ModalManager</strong> instance:</p>
			<p class="source-code">var newMovieModal = new abp.ModalManager({</p>
			<p class="source-code">    viewUrl: '/ModalWithForm',</p>
			<p class="source-code">    modalClass: 'MovieCreation'</p>
			<p class="source-code">});</p>
			<p><strong class="source-inline">ModalManager</strong> creates<a id="_idIndexMarker823"/> a new instance of the <strong class="source-inline">abp.modals.MovieCreation</strong> class for every time you open the modal and calls the <strong class="source-inline">initModal</strong> function if you define it. The <strong class="source-inline">initModal</strong> function takes two parameters. The first one<a id="_idIndexMarker824"/> is the <strong class="source-inline">ModalManager</strong> instance that's associated with the modal so that you can use its functions. The second parameter is the arguments that you passed to the <strong class="source-inline">open</strong> function while opening the modal.</p>
			<p>The <strong class="source-inline">initModal</strong> function is a perfect place to prepare the modal's content and register some callbacks to the events of the modal components. In the preceding example, I got the modal instance and a JQuery object, found the <strong class="source-inline">Movie.PreOrder</strong> checkbox, and registered its <strong class="source-inline">change</strong> callback so that I'm informed when the user checks it.</p>
			<p>This example still doesn't work yet since we haven't added the JavaScript file to the page. There are two ways to add it to the page:</p>
			<ul>
				<li>We can use the <strong class="source-inline">abp-script</strong> tag to include the modal's JavaScript file in the page where we open the modal.</li>
				<li>We can set up <strong class="source-inline">ModalManager</strong> so that it lazy loads the JavaScript file.</li>
			</ul>
			<p>The first option is straightforward – just include the following line in the page where you want to use the modal:</p>
			<p class="source-code">&lt;abp-script src="/Pages/ModalWithForm.cshtml.js" /&gt;</p>
			<p>If we want to lazy load the modal's script, we can configure <strong class="source-inline">ModalManager</strong> like so:</p>
			<p class="source-code">var newMovieModal = new abp.ModalManager({</p>
			<p class="source-code">    viewUrl: '/ModalWithForm',</p>
			<p class="source-code">    scriptUrl: '/Pages/ModalWithForm.cshtml.js',</p>
			<p class="source-code">    modalClass: 'MovieCreation'</p>
			<p class="source-code">});</p>
			<p>Here, I added the <strong class="source-inline">scriptUrl</strong> option as the URL of the modal's JavaScript file. <strong class="source-inline">ModalManager</strong> lazy loads the JavaScript file the first time you open the modal. The script is not loaded<a id="_idIndexMarker825"/> again if you <a id="_idIndexMarker826"/>open the modal a second time (without refreshing the whole page).</p>
			<p>In this section, we learned how to work with forms, validation, and modals. They are essential parts of a typical web application. In the next section, we will learn about some useful JavaScript APIs that we need in every application.</p>
			<h1 id="_idParaDest-275"><a id="_idTextAnchor394"/>Using the JavaScript API</h1>
			<p>In this section, we will explore some useful client-side APIs of ABP Framework. Some of these APIs provide simple ways to use server-side defined features such as authentication and <a id="_idIndexMarker827"/>localization, while others provide solutions for common UI patterns, such as message boxes and notifications.</p>
			<p>All the client-side JavaScript APIs are global objects and functions that are declared under the <strong class="source-inline">abp</strong> namespace. Let's begin with accessing the current user's information in your JavaScript code.</p>
			<h2 id="_idParaDest-276"><a id="_idTextAnchor395"/>Accessing the current user</h2>
			<p>We are using the <strong class="source-inline">ICurrentUser</strong> service on the server side to get information about the currently<a id="_idIndexMarker828"/> logged-in user. In the JavaScript code, we can use the global <strong class="source-inline">abp.currentUser</strong> object, as shown here:</p>
			<p class="source-code">var userId = abp.currentUser.id;</p>
			<p class="source-code">var userName = abp.currentUser. userName;</p>
			<p>By doing this, we can get the user's ID and username. The following JSON object is an example of the <strong class="source-inline">abp.currentUser</strong> object:</p>
			<p class="source-code">{</p>
			<p class="source-code">  isAuthenticated: true,</p>
			<p class="source-code">  id: "813108d7-7108-4ab2-b828-f3c28bbcd8e0",</p>
			<p class="source-code">  tenantId: null,</p>
			<p class="source-code">  userName: "john",</p>
			<p class="source-code">  name: "John",</p>
			<p class="source-code">  surName: "Nash",</p>
			<p class="source-code">  email: "john.nash@abp.io",</p>
			<p class="source-code">  emailVerified: true,</p>
			<p class="source-code">  phoneNumber: "+901112223342",</p>
			<p class="source-code">  phoneNumberVerified: true,</p>
			<p class="source-code">  roles: ["moderator","manager"]</p>
			<p class="source-code">}</p>
			<p>If the <a id="_idIndexMarker829"/>current user has not logged in yet, all these values will be <strong class="source-inline">null</strong> or <strong class="source-inline">false</strong>, as you would expect. The <strong class="source-inline">abp.currentUser</strong> object provides an easy way to get information about the current user. In the next section, we will learn how to check the permissions of the current user.</p>
			<h2 id="_idParaDest-277"><a id="_idTextAnchor396"/>Checking user permissions</h2>
			<p>ABP's authorization <a id="_idIndexMarker830"/>and permission management system is a powerful way to define permissions and check them at runtime for the current user. Checking these permissions in your JavaScript code is effortless using the <strong class="source-inline">abp.auth</strong> API.</p>
			<p>The following example checks if the current user has the <strong class="source-inline">DeleteProduct</strong> permission:</p>
			<p class="source-code">if (abp.auth.isGranted('DeleteProduct')) {</p>
			<p class="source-code">  // TODO: Delete the product</p>
			<p class="source-code">} else {</p>
			<p class="source-code">  abp.message.warn("You don't have permission to delete</p>
			<p class="source-code">                    products!");</p>
			<p class="source-code">}</p>
			<p><strong class="source-inline">abp.auth.isGranted</strong> returns <strong class="source-inline">true</strong> if the current user has given permission or a policy. If the user doesn't have permission, we show a warning message using the ABP message API, which will be explained in the <em class="italic">Showing message boxes</em> section later in this chapter.</p>
			<p>While these APIs are<a id="_idIndexMarker831"/> rarely needed, you can use the <strong class="source-inline">abp.auth.policies</strong> object when you need to get a list of all the available permissions/policies and the <strong class="source-inline">abp.auth.grantedPolicies</strong> object if you need to get a list of all the granted permissions/policies for the current user.</p>
			<p class="callout-heading">Hiding UI Parts Based on Permissions</p>
			<p class="callout">A typical use case for client-side permission checking is to hide some UI parts (such as action buttons) based on the user's permissions. While the <strong class="source-inline">abp.auth</strong> API provides a dynamic way to do that, I suggest using the standard <strong class="source-inline">IAuthorizationService</strong> on your Razor Pages/views to conditionally render the UI elements wherever possible.</p>
			<p>Note that checking permissions on the client side is just for the user experience and that it doesn't guarantee security. You should always check the same permission on the server side. </p>
			<p>In the next section, we will learn how to check the feature rights of the current tenant in a multi-tenant application.</p>
			<h2 id="_idParaDest-278"><a id="_idTextAnchor397"/>Checking the tenant features</h2>
			<p>The feature system is <a id="_idIndexMarker832"/>used to restrict application functionalities/features based on the current tenant. We will explore ABP's multi-tenancy infrastructure in <a href="B17287_16_Epub_AM.xhtml#_idTextAnchor457"><em class="italic">Chapter 16</em></a>, <em class="italic">Implementing Multi-Tenancy</em>. However, we will cover checking tenant features here for the ASP.NET Core MVC/Razor Pages UI.</p>
			<p>The <strong class="source-inline">abp.features</strong> API is used to check feature values for the current tenant. Let's assume that we have a feature for importing email lists from Mailchimp (a cloud email marketing platform) and that we've defined a feature named <strong class="source-inline">MailchimpImport</strong>. We can easily check if the current tenant has that feature enabled:</p>
			<p class="source-code">if (abp.features.isEnabled('MailchimpImport'))</p>
			<p class="source-code">{</p>
			<p class="source-code">  // TODO: Import from Mailchimp</p>
			<p class="source-code">}</p>
			<p><strong class="source-inline">abp.features.isEnabled</strong> only returns <strong class="source-inline">true</strong> if the given feature's value is <strong class="source-inline">true</strong>. ABP's feature system allows you to define non-boolean features too. In this case, you can use the <strong class="source-inline">abp.features.get(…)</strong> function to obtain the given feature's value for the current tenant.</p>
			<p>Checking features <a id="_idIndexMarker833"/>on the client side makes it easy to perform dynamic client-side logic, but remember to check the features on the server side as well for a secure application. </p>
			<p>In the next section, we will continue using the localization system in your JavaScript code.</p>
			<h2 id="_idParaDest-279"><a id="_idTextAnchor398"/>Localizing strings</h2>
			<p>One powerful part of ABP's <a id="_idIndexMarker834"/>localization system is that you can reuse the same localization strings on the client side. In this way, you don't have to deal with another kind of localization library in your JavaScript code.</p>
			<p>The <strong class="source-inline">abp.localization</strong> API is available in your JavaScript code to help you utilize the localization system. Let's begin with the simplest case:</p>
			<p class="source-code">var str = abp.localization.localize('HelloWorld');</p>
			<p>The <strong class="source-inline">localize</strong> function, with that usage, takes a localization key and returns the localized value based on the current language. It uses the default localization resource. If you need to, you can specify the localization resource as the second parameter:</p>
			<p class="source-code">var str = abp.localization.localize('HelloWorld', 'MyResource');</p>
			<p>Here, we've specified <strong class="source-inline">MyResource</strong> as the localization resource. If you want to localize lots of strings from the same resource, there is a shorter way to do this:</p>
			<p class="source-code">var localizer = abp.localization.getResource('MyResource');</p>
			<p class="source-code">var str = localizer('HelloWorld');</p>
			<p>Here, you can use the <strong class="source-inline">localizer</strong> object to get texts from the same resource.</p>
			<p>The JavaScript localization API applies the same fallback logic to the server-side API; it returns the given key if it can't find the localized value.</p>
			<p>If the localized string contains placeholders, you can pass the placeholder values as parameters. Let's assume that we have the following entry in the localization JSON file:</p>
			<p class="source-code">"GreetingMessage": "Hello {0}!"</p>
			<p>We can pass a parameter to the <strong class="source-inline">localizer</strong> or <strong class="source-inline">abp.localization.localize</strong> function, as shown in the following example:</p>
			<p class="source-code">var str = abp.localization.localize('GreetingMessage', 'John');</p>
			<p>The resulting <strong class="source-inline">str</strong> value will be <strong class="source-inline">Hello John!</strong> for this example. If you have more than one placeholder, you can pass the values to the <strong class="source-inline">localizer</strong> function in the same order.</p>
			<p>Besides the <a id="_idIndexMarker835"/>localizing texts, you may need to know the current culture and language so that you can take extra actions. The <strong class="source-inline">abp.localization.currentCulture</strong> object contains detailed information about the current language and culture. In addition to the current language, the <strong class="source-inline">abp.localization.languages</strong> value is an array of all the available languages in the current application. Most of the time, you don't directly use these APIs since the theme you're using is responsible for showing a list of languages to the user and allows you to switch between them. However, it is good to know that you can access the language data when you need it.</p>
			<p>So far, you've learned how to use some ABP server-side features on the client side. In the next section, you will learn how to show message and confirmation boxes to the user.</p>
			<h2 id="_idParaDest-280"><a id="_idTextAnchor399"/>Showing message boxes</h2>
			<p>It is very common to <a id="_idIndexMarker836"/>show blocking message boxes to users to inform them about something important happening in the application. In this section, you will learn how to show nice message boxes and confirmation dialogs in your applications.</p>
			<p>The <strong class="source-inline">abp.message</strong> API is used to show a message box to inform the user easily. There are four types of message boxes:</p>
			<ul>
				<li><strong class="source-inline">abp.message.info</strong>: Displays an informative message</li>
				<li><strong class="source-inline">abp.message.success</strong>: Displays a success message</li>
				<li><strong class="source-inline">abp.message.warn</strong>: Displays a warning message</li>
				<li><strong class="source-inline">abp.message.error</strong>: Displays an error message</li>
			</ul>
			<p>Let's take a look at the following example:</p>
			<p class="source-code">abp.message.success('Your changes have been successfully</p>
			<p class="source-code">                     saved!', 'Congratulations');</p>
			<p>In this example, I've used the <strong class="source-inline">success</strong> function to display a success message. The first parameter is a message text, while the optional second parameter is a message header. The result of this example is shown in the following screenshot:</p>
			<div>
				<div id="_idContainer097" class="IMG---Figure">
					<img src="image/Figure_12.15_B17287.jpg" alt="Figure 12.15 – A success message box&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.15 – A success message box</p>
			<p>Message boxes are blocked, which means the page is blocked (non-clickable) until the user clicks the <strong class="bold">OK</strong> button.</p>
			<p>Another kind of message <a id="_idIndexMarker837"/>box is used for confirmation purposes. The <strong class="source-inline">abp.message.confirm</strong> function shows some dialog to get a response from the user:</p>
			<p class="source-code">abp.message.confirm('Are you sure to delete this product?')</p>
			<p class="source-code">.then(function(confirmed){</p>
			<p class="source-code">  if(confirmed){</p>
			<p class="source-code">    // TODO: Delete the product!</p>
			<p class="source-code">  }</p>
			<p class="source-code">});</p>
			<p>The <strong class="source-inline">confirm</strong> function returns a promise, so we could chain it with the <strong class="source-inline">then</strong> callback to execute some code once the user closes the dialog by accepting or canceling it. The following screenshot shows the confirmation dialog that was created for this example:</p>
			<div>
				<div id="_idContainer098" class="IMG---Figure">
					<img src="image/Figure_12.16_B17287.jpg" alt="Figure 12.16 – A confirmation dialog&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.16 – A confirmation dialog</p>
			<p>Message boxes<a id="_idIndexMarker838"/> are a good way to grab a user's attention. However, there is an alternative way to do this, as we'll see in the next section.</p>
			<h2 id="_idParaDest-281"><a id="_idTextAnchor400"/>Showing notifications</h2>
			<p>Notifications <a id="_idIndexMarker839"/>are a non-blocking way to inform users of certain events. They are shown on the bottom right corner of the screen and automatically disappear after a few seconds. Just like the message boxes, there are four types of notifications:</p>
			<ul>
				<li><strong class="source-inline">abp.notify.info</strong>: Displays an informative notification</li>
				<li><strong class="source-inline">abp.notify.success</strong>: Displays a success notification</li>
				<li><strong class="source-inline">abp.notify.warn</strong>: Displays a warning notification</li>
				<li><strong class="source-inline">abp.notify.error</strong>: Displays an error notification</li>
			</ul>
			<p>The following example shows an information notification:</p>
			<p class="source-code">abp.notify.info(</p>
			<p class="source-code">    'The product has been successfully deleted.',</p>
			<p class="source-code">    'Deleted the Product'</p>
			<p class="source-code">);</p>
			<p>The second parameter is the notification title and is optional. The result of this example code is shown in the following screenshot:</p>
			<div>
				<div id="_idContainer099" class="IMG---Figure">
					<img src="image/Figure_12.17_B17287.jpg" alt="Figure 12.17 – A notification message&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.17 – A notification message</p>
			<p>With the<a id="_idIndexMarker840"/> notification API, we are closing the JavaScript APIs. </p>
			<p>Here, I covered the most used APIs. However, there are more APIs you can use in your JavaScript code, all of which you can learn about by reading the ABP Framework documentation: <a href="https://docs.abp.io/en/abp/latest/UI/AspNetCore/JavaScript-API/Index">https://docs.abp.io/en/abp/latest/UI/AspNetCore/JavaScript-API/Index</a>. In the next section, we will learn how to consume server-side APIs from JavaScript code.</p>
			<h1 id="_idParaDest-282"><a id="_idTextAnchor401"/>Consuming HTTP APIs</h1>
			<p>You can use any tool or <a id="_idIndexMarker841"/>technique to consume HTTP APIs from your JavaScript code. However, ABP provides the following ways as fully integrated solutions:</p>
			<ul>
				<li>You can use the <strong class="source-inline">abp.ajax</strong> API as an extension of the <strong class="source-inline">jQuery.ajax</strong> API.</li>
				<li>You can use dynamic JavaScript client proxies to call server-side APIs, just like you can with JavaScript functions.</li>
				<li>You can generate static JavaScript client proxies at development time.</li>
			</ul>
			<p>Let's begin with the first one – the <strong class="source-inline">abp.ajax</strong> API.</p>
			<h2 id="_idParaDest-283"><a id="_idTextAnchor402"/>Using the abp.ajax API</h2>
			<p>The <strong class="source-inline">abp.ajax</strong> API is a<a id="_idIndexMarker842"/> wrapper around the standard <strong class="source-inline">jQuery.ajax</strong> API. It <a id="_idIndexMarker843"/>automatically handles all errors and shows a localized message to the user on an error case. It also adds the anti-forgery token to the HTTP header to satisfy <strong class="bold">Cross-Site Request Forgery</strong> (<strong class="bold">CSRF</strong>) protection on the server side.</p>
			<p>The following example uses the <strong class="source-inline">abp.ajax</strong> API to get a list of users from the server:</p>
			<p class="source-code">abp.ajax({</p>
			<p class="source-code">  type: 'GET',</p>
			<p class="source-code">  url: '/api/identity/users'</p>
			<p class="source-code">}).then(function(result){</p>
			<p class="source-code">  // TODO: process the result</p>
			<p class="source-code">});</p>
			<p>In this example, we've specified <strong class="source-inline">GET</strong> as the request's <strong class="source-inline">type</strong>. You can specify all the standard options of <strong class="source-inline">jQuery.ajax</strong> (or <strong class="source-inline">$.ajax</strong>) to override the defaults. <strong class="source-inline">abp.ajax</strong> returns a promise object, so we could add the <strong class="source-inline">then</strong> callback to handle the result that's sent by the server. We can also use the <strong class="source-inline">catch</strong> callback to handle errors and the <strong class="source-inline">always</strong> callback to perform an action at the end of <a id="_idTextAnchor403"/>the request.</p>
			<p>The following example shows how to handle errors manually:</p>
			<p class="source-code">abp.ajax({</p>
			<p class="source-code">  type: 'GET',</p>
			<p class="source-code">  url: '/api/identity/users',</p>
			<p class="source-code">  abpHandleError: false</p>
			<p class="source-code">}).then(function(result){</p>
			<p class="source-code">  // TODO: process the result</p>
			<p class="source-code">}).catch(function(){</p>
			<p class="source-code">  abp.message.error("request failed :(");</p>
			<p class="source-code">});</p>
			<p>Here, I added a <strong class="source-inline">catch</strong> callback function after the <strong class="source-inline">then</strong> function. You can perform your error logic here. I also specified the <strong class="source-inline">abpHandleError: false</strong> option to disable ABP's automatic error handling logic. Otherwise, ABP <a id="_idIndexMarker844"/>will handle the error and show an error message to<a id="_idIndexMarker845"/> the user.</p>
			<p><strong class="source-inline">abp.ajax</strong> is a low-level API. You typically use dynamic or static client proxies to consume your own HTTP APIs.</p>
			<h2 id="_idParaDest-284"><a id="_idTextAnchor404"/>Using dynamic client proxies</h2>
			<p>You should have<a id="_idIndexMarker846"/> already used the dynamic JavaScript client proxy <a id="_idIndexMarker847"/>system if you applied the example application from <a href="B17287_03_Epub_AM.xhtml#_idTextAnchor044"><em class="italic">Chapter 3</em></a>, <em class="italic">Step-By-Step Application Development</em>. ABP Framework generates JavaScript functions at runtime to easily consume all the HTTP APIs of your application.</p>
			<p>The following code block shows two sample methods of <strong class="source-inline">IProductAppService</strong> that were defined in <a href="B17287_03_Epub_AM.xhtml#_idTextAnchor044"><em class="italic">Chapter 3</em></a>, <em class="italic">Step-By-Step Application Development</em>:</p>
			<p class="source-code">namespace ProductManagement.Products</p>
			<p class="source-code">{</p>
			<p class="source-code">    public interface IProductAppService :</p>
			<p class="source-code">        IApplicationService</p>
			<p class="source-code">    {</p>
			<p class="source-code">        Task CreateAsync(CreateUpdateProductDto input);</p>
			<p class="source-code">        Task&lt;ProductDto&gt; GetAsync(Guid id);</p>
			<p class="source-code">    }</p>
			<p class="source-code">}</p>
			<p>All of these methods are available in the same namespace on the client side. For example, we can get a product by its ID, as shown in the following code block:</p>
			<p class="source-code">productManagement.products.product</p>
			<p class="source-code">  .get('1b8517c8-2c08-5016-bca8-39fef5c4f817')</p>
			<p class="source-code">  .then(function (result) {</p>
			<p class="source-code">    console.log(result);</p>
			<p class="source-code">  });</p>
			<p><strong class="source-inline">productManagement.products</strong> is the camel case equivalent of the <strong class="source-inline">ProductManagement.Products</strong> namespace of the C# code. <strong class="source-inline">product</strong> is the conventional name of <strong class="source-inline">IProductAppService</strong>. The <strong class="source-inline">I</strong> prefix and the <strong class="source-inline">AppService</strong> suffix have been removed, and the remaining name is converted into camel case. Then, we can use the method name that's been converted in camel case without the <strong class="source-inline">Async</strong> suffix. So, the <strong class="source-inline">GetAsync</strong> method is used as the <strong class="source-inline">get</strong> function in the JavaScript code. The <strong class="source-inline">get</strong> function takes the<a id="_idIndexMarker848"/> same parameters that the C# method takes. It returns a <strong class="source-inline">Deferred</strong> object so that we can chain it with the <strong class="source-inline">then</strong>, <strong class="source-inline">catch</strong>, or <strong class="source-inline">always</strong> callbacks, similar to what can do for the <strong class="source-inline">abp.ajax</strong> API. It internally uses the <strong class="source-inline">abp.ajax</strong> API. In this example, the <strong class="source-inline">result</strong> argument of the <strong class="source-inline">then</strong> function is the <strong class="source-inline">ProductDto</strong> object that's sent by the <a id="_idIndexMarker849"/>server.</p>
			<p>Other methods are used in a similar way. For example, we can create a new product with the following code:</p>
			<p class="source-code">productManagement.products.product.create({</p>
			<p class="source-code">  categoryId: '5f568193-91b2-17de-21f3-39fef5c4f808',</p>
			<p class="source-code">  name: 'My product',</p>
			<p class="source-code">  price: 42,</p>
			<p class="source-code">  isFreeCargo: true,</p>
			<p class="source-code">  releaseDate: '2023-05-24',</p>
			<p class="source-code">  stockState: 'PreOrder'</p>
			<p class="source-code">});</p>
			<p>Here, we pass the <strong class="source-inline">CreateUpdateProductDto</strong> object with the JSON object format.</p>
			<p>In some cases, we may need to pass additional AJAX options for the HTTP API calls. You can pass an object as the last parameter to every proxy function:</p>
			<p class="source-code">productManagement.products.product.create({</p>
			<p class="source-code">  categoryId: '5f568193-91b2-17de-21f3-39fef5c4f808',</p>
			<p class="source-code">  name: 'My product',</p>
			<p class="source-code">  //...other values</p>
			<p class="source-code">}, {</p>
			<p class="source-code">  url: 'https://localhost:21322/api/my-custom-url'</p>
			<p class="source-code">  headers: {</p>
			<p class="source-code">    'MyHeader': 'MyValue'</p>
			<p class="source-code">  }</p>
			<p class="source-code">});</p>
			<p>Here, I passed an object to change the URL and add a custom header to the request. You can refer to jQuery's documentation (<a href="https://api.jquery.com/jquery.ajax/">https://api.jquery.com/jquery.ajax/</a>) for all the available options.</p>
			<p>Dynamic <a id="_idIndexMarker850"/>JavaScript client proxy functions are generated at runtime <a id="_idIndexMarker851"/>by the <strong class="source-inline">/Abp/ServiceProxyScript</strong> endpoint of your application. This URL is added to the layout by the themes so that you can directly use any proxy function in your pages without importing any script.</p>
			<p>In the next section, you will learn about an alternative way to consume your HTTP APIs.</p>
			<h2 id="_idParaDest-285"><a id="_idTextAnchor405"/>Using static client proxies</h2>
			<p>Unlike dynamic client<a id="_idIndexMarker852"/> proxies, which are generated at runtime, static proxies <a id="_idIndexMarker853"/>are generated at development time. We can use the ABP CLI to generate the proxy script file.</p>
			<p>First, we need to run the application that serves the HTTP APIs because the API endpoint data is requested from the server. Then, we can use the <strong class="source-inline">generate-proxy</strong> command, as shown in the following example:</p>
			<p class="source-code">abp generate-proxy -t js -u https://localhost:44349</p>
			<p>The <strong class="source-inline">generate-proxy</strong> command can take the following parameters:</p>
			<ul>
				<li><strong class="source-inline">-t</strong> (required): The type of the proxy. We use <strong class="source-inline">js</strong> for JavaScript here.</li>
				<li><strong class="source-inline">-u</strong> (required): The root URL of the API endpoint.</li>
				<li><strong class="source-inline">-m</strong> (optional): The module name to generate the proxy for. The default value is <strong class="source-inline">app</strong> and is used to generate proxies for your application. In a modular application, you can specify the module name here.</li>
			</ul>
			<p>Static JavaScript proxies are generated under the <strong class="source-inline">wwwroot/client-proxies</strong> folder, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer100" class="IMG---Figure">
					<img src="image/Figure_12.18_B17287.jpg" alt="Figure 12.18 – The static JavaScript proxy file&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.18 – The static JavaScript proxy file</p>
			<p>Then, you<a id="_idIndexMarker854"/> can import the proxy script file into any page and use the static<a id="_idIndexMarker855"/> proxy functions like you would the dynamic ones.</p>
			<p>When you use static proxies, you don't need dynamic proxies. By default, ABP creates dynamic proxies for your application. You can configure <strong class="source-inline">DynamicJavaScriptProxyOptions</strong> to disable it for the application, as shown in the following example:</p>
			<p class="source-code">Configure&lt;DynamicJavaScriptProxyOptions&gt;(options =&gt; {</p>
			<p class="source-code">    options.EnabledModules.Remove("app");</p>
			<p class="source-code">});</p>
			<p>The <strong class="source-inline">EnabledModules</strong> list contains <strong class="source-inline">app</strong> by default. If you are building a modular application and want to enable dynamic JavaScript proxies for your module, you need to add it to the <strong class="source-inline">EnabledModules</strong> list explicitly.</p>
			<h1 id="_idParaDest-286"><a id="_idTextAnchor406"/>Summary</h1>
			<p>In this chapter, we covered the fundamental design points and the essential features of the MVC/Razor Pages UI of ABP Framework.</p>
			<p>The theming system allows you to build theme/style independent modules and applications and easily switch between UI themes. It makes this possible by defining a set of base libraries and standard layouts.</p>
			<p>You then learned about the bundling and minification system, which covers the entire development cycle of importing and using client-side dependencies in your applications and optimizing resource usage in a production environment.</p>
			<p>ABP makes it easy to create forms and implement validation and localization using tag helpers and predefined conventions. You also learned how to convert a standard form into an AJAX-submitted form.</p>
			<p>We've also covered some JavaScript APIs that can utilize ABP features on the client side, such as authorization and localization, and easily show nice-looking message boxes and notifications.</p>
			<p>Finally, you learned about alternative ways to consume HTTP APIs from your JavaScript code.</p>
			<p>In the next chapter, you will learn about the Blazor UI for ABP Framework to build interactive web UIs using C# instead of JavaScript.</p>
		</div>
	</body></html>