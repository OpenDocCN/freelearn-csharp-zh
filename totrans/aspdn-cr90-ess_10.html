<html><head></head><body>
  <div id="_idContainer142">
   <h1 class="chapter-number" id="_idParaDest-161">
    <a id="_idTextAnchor162">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     10
    </span>
   </h1>
   <h1 id="_idParaDest-162">
    <a id="_idTextAnchor163">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Deploying and Hosting Applications
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     After following a good development process, implementing good practices, and covering all the functionalities required for an application, it’s necessary to publish it in an environment.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     For this to be done successfully, it’s important to understand various concepts, practices, and application packaging models that go beyond the source material.
    </span>
    <span class="koboSpan" id="kobo.3.3">
     In this chapter, we’ll discuss different approaches to hosting and deploying applications, as well as understand concepts related
    </span>
    <a id="_idIndexMarker795">
    </a>
    <span class="koboSpan" id="kobo.4.1">
     to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.5.1">
      continuous integration and continuous deployment
     </span>
    </strong>
    <span class="koboSpan" id="kobo.6.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.7.1">
      CI/CD
     </span>
    </strong>
    <span class="koboSpan" id="kobo.8.1">
     )
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.9.1">
      and
     </span>
    </span>
    <span class="No-Break">
     <a id="_idIndexMarker796">
     </a>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.10.1">
      containers.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.11.1">
     ASP.NET Core 9 provides a robust configuration system that allows developers to manage configurations and behaviors effectively.
    </span>
    <span class="koboSpan" id="kobo.11.2">
     This chapter will explore the importance of application configurations, how to manage them using the configuration system, and how to make your applications adaptive
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.12.1">
      at runtime.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.13.1">
     In this chapter, we’ll cover the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.14.1">
      following topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.15.1">
      Preparing to publish your application and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.16.1">
       host locally
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.17.1">
      Publishing the solution in a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.18.1">
       cloud environment
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.19.1">
      Understanding the Docker principles and how to pack the application in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.20.1">
       a container
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.21.1">
      Understanding the DevOps approach
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.22.1">
       with CI/CD
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-163">
    <a id="_idTextAnchor164">
    </a>
    <span class="koboSpan" id="kobo.23.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.24.1">
     To complete this chapter, the following tools must be present in your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.25.1">
      development environment:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.26.1">
       An Azure subscription
      </span>
     </strong>
     <span class="koboSpan" id="kobo.27.1">
      : In this chapter, we’ll be creating resources in Microsoft Azure.
     </span>
     <span class="koboSpan" id="kobo.27.2">
      To do this, if you haven’t already, you will need to have an Azure subscription so that you can access the platform.
     </span>
     <span class="koboSpan" id="kobo.27.3">
      You can sign up for a subscription with limited credits to learn about the concepts presented in this chapter
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.28.1">
       at
      </span>
     </span>
     <a href="https://azure.microsoft.com/en-us/free">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.29.1">
        https://azure.microsoft.com/en-us/free
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.30.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.31.1">
       A Docker Hub account
      </span>
     </strong>
     <span class="koboSpan" id="kobo.32.1">
      : You will need to create an account on the Docker Hub website
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.33.1">
       at
      </span>
     </span>
     <a href="https://hub.docker.com">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.34.1">
        https://hub.docker.com
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.35.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.36.1">
       The Azure Tools extension
      </span>
     </strong>
     <span class="koboSpan" id="kobo.37.1">
      : You will need to install the Azure Tools extension for Visual Studio Code from
     </span>
     <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-node-azure-pack">
      <span class="koboSpan" id="kobo.38.1">
       https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-node-azure-pack
      </span>
     </a>
     <span class="koboSpan" id="kobo.39.1">
      .
     </span>
     <span class="koboSpan" id="kobo.39.2">
      Once it’s been installed, log in with your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.40.1">
       Azure credentials.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.41.1">
     The code examples for this chapter can be found in this book’s GitHub
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.42.1">
      repository:
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/ASP.NET-Core-9.0-Essentials/tree/main/Chapter10">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.43.1">
       https://github.com/PacktPublishing/ASP.NET-Core-9.0-Essentials/tree/main/Chapter10
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.44.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-164">
    <a id="_idTextAnchor165">
    </a>
    <span class="koboSpan" id="kobo.45.1">
     Preparing to publish your application and host locally
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.46.1">
     Publishing an application is a natural process in the software development life cycle.
    </span>
    <span class="koboSpan" id="kobo.46.2">
     After development and testing, the next step is to make the application available to users.
    </span>
    <span class="koboSpan" id="kobo.46.3">
     This involves creating a deployable version of the application and configuring it in an environment where it can be accessed
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.47.1">
      and used.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.48.1">
     Let’s understand the details of publishing applications while following various strategies, from manual to automated ones, using CI/CD.
    </span>
    <span class="koboSpan" id="kobo.48.2">
     But before we do this, let’s understand some of the fundamentals, such as the importance of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.49.1">
      publishing process.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-165">
    <a id="_idTextAnchor166">
    </a>
    <span class="koboSpan" id="kobo.50.1">
     The importance of the publishing process
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.51.1">
     The publishing process
    </span>
    <a id="_idIndexMarker797">
    </a>
    <span class="koboSpan" id="kobo.52.1">
     transforms your application from source code into a deployable format.
    </span>
    <span class="koboSpan" id="kobo.52.2">
     This process ensures that all dependencies, configurations, and compiled code are packaged together, making it easier to deploy and run the application in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.53.1">
      different environments.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.54.1">
     The publishing process in ASP.NET Core 9 involves
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.55.1">
      three steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.56.1">
      Restoring
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.57.1">
       the package.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.58.1">
      Compiling
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.59.1">
       the application.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.60.1">
      Generating a
     </span>
     <a id="_idIndexMarker798">
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.61.1">
       publishable package.
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.62.1">
     The publication package
    </span>
    <a id="_idIndexMarker799">
    </a>
    <span class="koboSpan" id="kobo.63.1">
     that’s generated may vary, depending on the type of application that’s developed.
    </span>
    <span class="koboSpan" id="kobo.63.2">
     It may contain different files, such as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.64.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.65.1">
      The application’s
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.66.1">
       DLL files
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.67.1">
      Third-party dependencies
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.68.1">
       and libraries
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.69.1">
      Static files (for example, JavaScript, CSS,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.70.1">
       and images)
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.71.1">
      Configuration files (for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.72.1">
       example,
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.73.1">
        appsettings.json
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.74.1">
       )
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.75.1">
      Executables for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.76.1">
       standalone deployments
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.77.1">
     To understand how this process works, follow the instructions provided in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.78.1">
      Technical requirements
     </span>
    </em>
    <span class="koboSpan" id="kobo.79.1">
     section to download the example application from this book’s GitHub repository.
    </span>
    <span class="koboSpan" id="kobo.79.2">
     This will be used as the basis for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.80.1">
      this chapter.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.81.1">
     Now, let’s understand how to generate
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.82.1">
      publishing packages.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-166">
    <a id="_idTextAnchor167">
    </a>
    <span class="koboSpan" id="kobo.83.1">
     Generating a publishing package
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.84.1">
     We’ve been working with
    </span>
    <a id="_idIndexMarker800">
    </a>
    <span class="koboSpan" id="kobo.85.1">
     the .NET platform CLI tool extensively throughout this book to create and run applications.
    </span>
    <span class="koboSpan" id="kobo.85.2">
     The CLI tool also has a specific command for generating publishing packages for ASP.NET Core
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.86.1">
      9 projects.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.87.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.88.1">
      publish
     </span>
    </strong>
    <span class="koboSpan" id="kobo.89.1">
     command provides various options that allow us to configure the publication package’s output, as listed in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.90.1">
       Table 10.1
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.91.1">
      :
     </span>
    </span>
   </p>
   <table class="No-Table-Style _idGenTablePara-1" id="table001-4">
    <colgroup>
     <col/>
     <col/>
     <col/>
    </colgroup>
    <thead>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.92.1">
           Option
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.93.1">
           Description
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.94.1">
           Example
          </span>
         </strong>
        </span>
       </p>
      </td>
     </tr>
    </thead>
    <tbody>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.95.1">
          &lt;
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.96.1">
           PROJECT&gt;
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.97.1">
         Specifies
        </span>
        <a id="_idIndexMarker801">
        </a>
        <span class="koboSpan" id="kobo.98.1">
         the project file to operate on.
        </span>
        <span class="koboSpan" id="kobo.98.2">
         Defaults to the current directory if
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.99.1">
          not specified.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <pre class="console"><span class="koboSpan" id="kobo.100.1">
dotnet publish project_name.csproj</span></pre>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.101.1">
          -
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.102.1">
           c
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.103.1">
          ,
         </span>
        </span>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.104.1">
           --configuration
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.105.1">
         Defines the build configuration (
        </span>
        <strong class="bold">
         <span class="koboSpan" id="kobo.106.1">
          Debug
         </span>
        </strong>
        <span class="koboSpan" id="kobo.107.1">
         or
        </span>
        <strong class="bold">
         <span class="koboSpan" id="kobo.108.1">
          Release
         </span>
        </strong>
        <span class="koboSpan" id="kobo.109.1">
         ).
        </span>
        <span class="koboSpan" id="kobo.109.2">
         Defaults
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.110.1">
          to
         </span>
        </span>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.111.1">
           Debug
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.112.1">
          .
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <pre class="console"><span class="koboSpan" id="kobo.113.1">
dotnet publish –c Release</span></pre>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.114.1">
          -
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.115.1">
           f
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.116.1">
          ,
         </span>
        </span>
       </p>
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.117.1">
          --
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.118.1">
           framework
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.119.1">
         Specifies the target framework – for
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.120.1">
          example,
         </span>
        </span>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.121.1">
           net8.0
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.122.1">
          .
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <pre class="console"><span class="koboSpan" id="kobo.123.1">
dotnet publish –f net8.0</span></pre>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.124.1">
          --
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.125.1">
           runtime
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.126.1">
         Publishes the application for a specific runtime (for example,
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.127.1">
          win-x64
         </span>
        </strong>
        <span class="koboSpan" id="kobo.128.1">
         ,
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.129.1">
          linux-x64
         </span>
        </strong>
        <span class="koboSpan" id="kobo.130.1">
         ,
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.131.1">
          or
         </span>
        </span>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.132.1">
           osx-x64
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.133.1">
          ).
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <pre class="console"><span class="koboSpan" id="kobo.134.1">
dotnet publish –runtime linux-x64</span></pre>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.135.1">
          -
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.136.1">
           o
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.137.1">
          ,
         </span>
        </span>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.138.1">
           --output
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.139.1">
         Specifies the output directory for the
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.140.1">
          published files.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <pre class="console"><span class="koboSpan" id="kobo.141.1">
dotnet publish –o ./publish</span></pre>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.142.1">
          --
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.143.1">
           self-contained
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.144.1">
         Publishes the application as a self-contained deployment, including the .
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.145.1">
          NET runtime.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <pre class="console"><span class="koboSpan" id="kobo.146.1">
dotnet publish –self-contained</span></pre>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.147.1">
          --
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.148.1">
           no-restore
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.149.1">
         Disables the ability to restore project dependencies during the publish operation.
        </span>
        <span class="koboSpan" id="kobo.149.2">
         Assumes restoration has already been done.
        </span>
        <span class="koboSpan" id="kobo.149.3">
         It’s useful during
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.150.1">
          CI/CD pipelines.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <pre class="console"><span class="koboSpan" id="kobo.151.1">
dotnet publish –no-restore</span></pre>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.152.1">
          --
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.153.1">
           manifest
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.154.1">
         Specifies one or more target manifests to calculate the set of packages to include in the
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.155.1">
          published output.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <pre class="console"><span class="koboSpan" id="kobo.156.1">
dotnet publish –manifest ProjectManyfest.xml</span></pre>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.157.1">
          --
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.158.1">
           version-suffix
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.159.1">
         Sets the
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.160.1">
          $(VersionSuffix)
         </span>
        </strong>
        <span class="koboSpan" id="kobo.161.1">
         property
        </span>
        <a id="_idIndexMarker802">
        </a>
        <span class="koboSpan" id="kobo.162.1">
         value to use when building
        </span>
        <a id="_idIndexMarker803">
        </a>
        <span class="koboSpan" id="kobo.163.1">
         the project.
        </span>
        <span class="koboSpan" id="kobo.163.2">
         Useful for
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.164.1">
          prerelease versions.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <pre class="console"><span class="koboSpan" id="kobo.165.1">
dotnet publish –version-suffix beta1</span></pre>
      </td>
     </tr>
    </tbody>
   </table>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.166.1">
     Table 10.1 – dotnet publish CLI tool options
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.167.1">
     The use of
    </span>
    <a id="_idIndexMarker804">
    </a>
    <span class="koboSpan" id="kobo.168.1">
     each option will depend on each scenario.
    </span>
    <span class="koboSpan" id="kobo.168.2">
     In our context, we’ll use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.169.1">
      &lt;PROJECT&gt;
     </span>
    </strong>
    <span class="koboSpan" id="kobo.170.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.171.1">
      -c
     </span>
    </strong>
    <span class="koboSpan" id="kobo.172.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.173.1">
      -o
     </span>
    </strong>
    <span class="koboSpan" id="kobo.174.1">
     , and, when necessary,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.175.1">
      --
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.176.1">
       no-restore
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.177.1">
      options.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.178.1">
     Now, let’s generate a publishing package
    </span>
    <a id="_idIndexMarker805">
    </a>
    <span class="koboSpan" id="kobo.179.1">
     for
    </span>
    <a id="_idIndexMarker806">
    </a>
    <span class="koboSpan" id="kobo.180.1">
     the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.181.1">
      UrlShortener
     </span>
    </strong>
    <span class="koboSpan" id="kobo.182.1">
     application.
    </span>
    <span class="koboSpan" id="kobo.182.2">
     To do this, open your terminal or bash, access the previously downloaded application directory, and execute the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.183.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.184.1">
dotnet publish UrlShortener.csproj -c Release -o ./published</span></pre>
   <p>
    <span class="koboSpan" id="kobo.185.1">
     The preceding command will generate the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.186.1">
      publish
     </span>
    </strong>
    <span class="koboSpan" id="kobo.187.1">
     package in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.188.1">
      published
     </span>
    </strong>
    <span class="koboSpan" id="kobo.189.1">
     folder.
    </span>
    <span class="koboSpan" id="kobo.189.2">
     However, it’s important to understand the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.190.1">
      -c
     </span>
    </strong>
    <span class="koboSpan" id="kobo.191.1">
     parameter in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.192.1">
      more detail:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.193.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.194.1">
       -c
      </span>
     </strong>
     <span class="koboSpan" id="kobo.195.1">
      option specifies the build configuration, and there are typically two main configurations:
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.196.1">
       Debug
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.197.1">
       and
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.198.1">
        Release
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.199.1">
       :
      </span>
     </span>
     <ul>
      <li>
       <span class="koboSpan" id="kobo.200.1">
        The
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.201.1">
         Debug
        </span>
       </strong>
       <span class="koboSpan" id="kobo.202.1">
        configuration includes additional debug information and is optimized for debugging.
       </span>
       <span class="koboSpan" id="kobo.202.2">
        When running the project locally with the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.203.1">
         dotnet run
        </span>
       </strong>
       <span class="koboSpan" id="kobo.204.1">
        command, the default configuration is
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.205.1">
         Debug
        </span>
       </strong>
       <span class="koboSpan" id="kobo.206.1">
        , which allows the debugging process to be
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.207.1">
         carried out.
        </span>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.208.1">
        The
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.209.1">
         Release
        </span>
       </strong>
       <span class="koboSpan" id="kobo.210.1">
        configuration is optimized for performance and does not include debug information.
       </span>
       <span class="koboSpan" id="kobo.210.2">
        It’s typically used to deploy the application to
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.211.1">
         production environments.
        </span>
       </span>
      </li>
     </ul>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.212.1">
     When accessing the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.213.1">
      published
     </span>
    </strong>
    <span class="koboSpan" id="kobo.214.1">
     folder, we have to simulate the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.215.1">
      directory/file structure:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.216.1">
publish/
├── appsettings.Development.json
├── appsettings.json
├── Azure.Core.dll
├── Azure.Identity.dll
├── Microsoft.Bcl.AsyncInterfaces.dll
├── Microsoft.Data.SqlClient.dll
├── Microsoft.EntityFrameworkCore.Abstractions.dll
├── Microsoft.EntityFrameworkCore.dll
├── Microsoft.EntityFrameworkCore.Relational.dll
├── Microsoft.EntityFrameworkCore.SqlServer.dll
├── Microsoft.Identity.Client.dll
├── Microsoft.Identity.Client.Extensions.Msal.dll
├── Microsoft.IdentityModel.Abstractions.dll
├── Microsoft.IdentityModel.JsonWebTokens.dll
├── Microsoft.IdentityModel.Logging.dll
├── Microsoft.IdentityModel.Protocols.dll
├── Microsoft.IdentityModel.Protocols.OpenIdConnect.dll
├── Microsoft.IdentityModel.Tokens.dll
├── Microsoft.SqlServer.Server.dll
├── Microsoft.Win32.SystemEvents.dll
├── runtimes/
│ ├── (runtime-specific files and directories)
├── System.Configuration.ConfigurationManager.dll
├── System.Drawing.Common.dll
├── System.IdentityModel.Tokens.Jwt.dll
├── System.Memory.Data.dll
├── System.Runtime.Caching.dll
├── System.Security.Cryptography.ProtectedData.dll
├── System.Security.Permissions.dll
├── System.Windows.Extensions.dll
├── UrlShortener
├── web.config
└──wwwroot/
├── (static files like css, js, images)</span></pre>
   <p>
    <span class="koboSpan" id="kobo.217.1">
     As we can see, there are
    </span>
    <a id="_idIndexMarker807">
    </a>
    <span class="koboSpan" id="kobo.218.1">
     several
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.219.1">
      .dll
     </span>
    </strong>
    <span class="koboSpan" id="kobo.220.1">
     files, which are
    </span>
    <a id="_idIndexMarker808">
    </a>
    <span class="koboSpan" id="kobo.221.1">
     the dependencies that the application uses, in addition to static files such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.222.1">
      wwwroot
     </span>
    </strong>
    <span class="koboSpan" id="kobo.223.1">
     and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.224.1">
      configuration files.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.225.1">
     The contents of this folder are exactly what should be published in an environment, be it locally or via a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.226.1">
      cloud provider.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.227.1">
     By accessing the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.228.1">
      published
     </span>
    </strong>
    <span class="koboSpan" id="kobo.229.1">
     directory through the terminal and executing the following command, it’s possible to run
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.230.1">
      the application:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.231.1">
dotnet UrlShorterner.dll</span></pre>
   <p>
    <span class="koboSpan" id="kobo.232.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.233.1">
      UrlShorterner.dll
     </span>
    </strong>
    <span class="koboSpan" id="kobo.234.1">
     file is the executable for an ASP.NET Core 9 application.
    </span>
    <span class="koboSpan" id="kobo.234.2">
     It’s possible to run the application through the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.235.1">
      .dll
     </span>
    </strong>
    <span class="koboSpan" id="kobo.236.1">
     file on your development machine since the .NET SDK is installed.
    </span>
    <span class="koboSpan" id="kobo.236.2">
     The SDK must not be installed on servers that will run the applications.
    </span>
    <span class="koboSpan" id="kobo.236.3">
     For this, you only need to install
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.237.1">
      .
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.238.1">
       NET Runtime
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.239.1">
      .
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.240.1">
     .NET Runtime
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.241.1">
     .NET Runtime is a
    </span>
    <a id="_idIndexMarker809">
    </a>
    <span class="koboSpan" id="kobo.242.1">
     software framework developed by Microsoft that provides a managed execution environment for running .NET applications.
    </span>
    <span class="koboSpan" id="kobo.242.2">
     It includes the components needed to run .NET programs, manage memory, handle exceptions, and collect garbage.
    </span>
    <span class="koboSpan" id="kobo.242.3">
     .NET Runtime is typically installed on servers and machines that run specific .NET applications.
    </span>
    <span class="koboSpan" id="kobo.242.4">
     Unlike the .NET SDK, .NET Runtime has features for running applications rather than building and developing them.
    </span>
    <span class="koboSpan" id="kobo.242.5">
     To learn
    </span>
    <a id="_idIndexMarker810">
    </a>
    <span class="koboSpan" id="kobo.243.1">
     more about .NET Runtime, go
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.244.1">
      to
     </span>
    </span>
    <a href="https://learn.microsoft.com/en-us/dotnet/core/introduction">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.245.1">
       https://learn.microsoft.com/en-us/dotnet/core/introduction
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.246.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.247.1">
     The .NET platform and ASP.NET Core 9 are portable, which means they can be run on different operating systems that have the SDK or .NET Runtime installed.
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.248.1">
      Table 10.2
     </span>
    </em>
    <span class="koboSpan" id="kobo.249.1">
     shows the application servers that can be used in each of the most important
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.250.1">
      operating systems:
     </span>
    </span>
   </p>
   <table class="No-Table-Style _idGenTablePara-1" id="table002-1">
    <colgroup>
     <col/>
     <col/>
    </colgroup>
    <tbody>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.251.1">
           Operating System
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.252.1">
           Prerequisites
          </span>
         </strong>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.253.1">
          Linux
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <ul>
        <li>
         <span class="koboSpan" id="kobo.254.1">
          .NET
         </span>
         <span class="No-Break">
          <span class="koboSpan" id="kobo.255.1">
           SDK/Runtime, Kestrel
          </span>
         </span>
        </li>
        <li>
         <span class="koboSpan" id="kobo.256.1">
          Optional: Nginx/Apache,
         </span>
         <span class="No-Break">
          <span class="koboSpan" id="kobo.257.1">
           Hosting bundle
          </span>
         </span>
        </li>
       </ul>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.258.1">
          macOS
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <ul>
        <li>
         <span class="koboSpan" id="kobo.259.1">
          .NET
         </span>
         <span class="No-Break">
          <span class="koboSpan" id="kobo.260.1">
           SDK/Runtime, Kestrel
          </span>
         </span>
        </li>
        <li>
         <span class="No-Break">
          <span class="koboSpan" id="kobo.261.1">
           Optional: Nginx/Apache
          </span>
         </span>
        </li>
       </ul>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.262.1">
          Windows
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <ul>
        <li>
         <span class="koboSpan" id="kobo.263.1">
          .NET
         </span>
         <span class="No-Break">
          <span class="koboSpan" id="kobo.264.1">
           SDK/Runtime, Kestrel
          </span>
         </span>
        </li>
        <li>
         <span class="koboSpan" id="kobo.265.1">
          Optional: IIS, NGINX, HTTP.sys, ASP.NET Core
         </span>
         <span class="No-Break">
          <span class="koboSpan" id="kobo.266.1">
           Hosting bundle
          </span>
         </span>
        </li>
       </ul>
      </td>
     </tr>
    </tbody>
   </table>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.267.1">
     Table 10.2 – Web server options for ASP.NET Core 9 applications
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.268.1">
     Generating publication packages using the CLI tool is straightforward.
    </span>
    <span class="koboSpan" id="kobo.268.2">
     We’ll follow this process while automating via CI/CD, something we’ll cover in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.269.1">
      Understanding the DevOps approach with
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.270.1">
       CI/CD
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.271.1">
      section.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.272.1">
     Now that we’ve learned how to generate publishing packages, it’s time to learn how to publish them in a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.273.1">
      cloud environment.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-167">
    <a id="_idTextAnchor168">
    </a>
    <span class="koboSpan" id="kobo.274.1">
     Publishing the solution in a cloud environment
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.275.1">
     The advantage of developing modern applications with ASP.NET Core 9 goes beyond the ability to use implementation best practices – it also encompasses the need to deliver high-quality solutions to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.276.1">
      application users.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.277.1">
     So far, we’ve learned about the importance of using various features of the .NET platform, such as using the .NET CLI to compile applications and install support tools such as Entity Framework Core.
    </span>
    <span class="koboSpan" id="kobo.277.2">
     We’ve also learned about the process of generating publishable packages that can be run both locally and in any other environment that uses .
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.278.1">
      NET Runtime.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.279.1">
     At the time of writing, it’s impossible not to work in a cloud environment.
    </span>
    <span class="koboSpan" id="kobo.279.2">
     This offers us benefits such as elasticity, availability, security, and many other features that simplify the process of deploying, maintaining, and evolving applications through the continuous process of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.280.1">
      delivering value.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.281.1">
     To learn how to publish the solution in a cloud environment, we’ll use Azure as our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.282.1">
      cloud provider.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.283.1">
     Moving an ASP.NET Core 9 application to Azure allows developers to benefit from the dynamic capabilities provided by such a cloud provider while focusing on the application context and business objectives.
    </span>
    <span class="koboSpan" id="kobo.283.2">
     Azure, through its diverse resources and services, allows applications to handle varied workloads, remain accessible to users, and stay protected against
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.284.1">
      security threats.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.285.1">
     Based on the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.286.1">
      UrlShortener
     </span>
    </strong>
    <span class="koboSpan" id="kobo.287.1">
     application that we worked on previously and in conjunction with the process of generating publishable packages, we’ll implement the benefits of Azure and publish this application in a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.288.1">
      cloud environment.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-168">
    <a id="_idTextAnchor169">
    </a>
    <span class="koboSpan" id="kobo.289.1">
     Creating Azure app services and database resources
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.290.1">
     The Azure environment provides different types of resources for publishing applications, at different service levels and with varying
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.291.1">
      publishing approaches.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.292.1">
     For this application, we’ll use a
    </span>
    <a id="_idIndexMarker811">
    </a>
    <span class="koboSpan" id="kobo.293.1">
     resource called
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.294.1">
      App Service
     </span>
    </strong>
    <span class="koboSpan" id="kobo.295.1">
     , a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.296.1">
      Platform-as-a-Service
     </span>
    </strong>
    <span class="koboSpan" id="kobo.297.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.298.1">
      PaaS
     </span>
    </strong>
    <span class="koboSpan" id="kobo.299.1">
     ) offering
    </span>
    <a id="_idIndexMarker812">
    </a>
    <span class="koboSpan" id="kobo.300.1">
     provided by Azure that allows us to focus on our applications.
    </span>
    <span class="koboSpan" id="kobo.300.2">
     App Service provides a great application server while also supplying us with a URL to access the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.301.1">
      published application.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.302.1">
     You must have prepared your environment based on the information provided in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.303.1">
      Technical
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.304.1">
       requirements
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.305.1">
      section.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.306.1">
     Application services and PaaS
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.307.1">
     Azure App Service is a
    </span>
    <a id="_idIndexMarker813">
    </a>
    <span class="koboSpan" id="kobo.308.1">
     fully managed PaaS that allows developers to build, deploy, and scale web applications, mobile backends, and RESTful APIs in the programming language of their choice, without the need for infrastructure management.
    </span>
    <span class="koboSpan" id="kobo.308.2">
     App Service provides a prepared server, providing the runtime needed to run your applications.
    </span>
    <span class="koboSpan" id="kobo.308.3">
     The PaaS approach is a cloud computing model that provides a complete development and deployment environment in the cloud, freeing developers from the need to deal with infrastructure.
    </span>
    <span class="koboSpan" id="kobo.308.4">
     For more details, see the
    </span>
    <a id="_idIndexMarker814">
    </a>
    <span class="koboSpan" id="kobo.309.1">
     Azure App Service
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.310.1">
      documentation:
     </span>
    </span>
    <a href="https://docs.microsoft.com/en-us/azure/app-service/">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.311.1">
       https://docs.microsoft.com/en-us/azure/app-service/
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.312.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.313.1">
     Our goal will not be to exhaust all resource options available in the Azure environment since a separate book dedicated to this subject would
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.314.1">
      be needed.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.315.1">
     Instead, we’ll focus on publishing the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.316.1">
      UrlShortener
     </span>
    </strong>
    <span class="koboSpan" id="kobo.317.1">
     application while using Azure App Service as the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.318.1">
      web host.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.319.1">
     Follow these steps to
    </span>
    <a id="_idIndexMarker815">
    </a>
    <span class="koboSpan" id="kobo.320.1">
     publish
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.321.1">
      the application:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.322.1">
      Access the Azure
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.323.1">
       portal (
      </span>
     </span>
     <a href="https://portal.azure.com">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.324.1">
        https://portal.azure.com
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.325.1">
       ).
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.326.1">
      On the main screen, click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.327.1">
       Create a resource
      </span>
     </strong>
     <span class="koboSpan" id="kobo.328.1">
      button, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.329.1">
        Figure 10
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.330.1">
        .1
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.331.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer115">
     <span class="koboSpan" id="kobo.332.1">
      <img alt="Figure 10.1 – Creating a new Azure resource" src="image/B21788_10_01.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.333.1">
     Figure 10.1 – Creating a new Azure resource
    </span>
   </p>
   <ol>
    <li value="3">
     <span class="koboSpan" id="kobo.334.1">
      Then, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.335.1">
       Create
      </span>
     </strong>
     <span class="koboSpan" id="kobo.336.1">
      under the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.337.1">
       Web App
      </span>
     </strong>
     <span class="koboSpan" id="kobo.338.1">
      resource, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.339.1">
        Figure 10
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.340.1">
        .2
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.341.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer116">
     <span class="koboSpan" id="kobo.342.1">
      <img alt="Figure 10.2 – Creating a new Web App resource" src="image/B21788_10_02.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.343.1">
     Figure 10.2 – Creating a new Web App resource
    </span>
   </p>
   <ol>
    <li value="4">
     <span class="koboSpan" id="kobo.344.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.345.1">
       Basics creation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.346.1">
      screen of the new
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.347.1">
       Web App
      </span>
     </strong>
     <span class="koboSpan" id="kobo.348.1">
      resource, fill in the information
     </span>
     <a id="_idIndexMarker816">
     </a>
     <span class="koboSpan" id="kobo.349.1">
      provided in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.350.1">
        Table 10.3
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.351.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <table class="No-Table-Style _idGenTablePara-1" id="table003">
    <colgroup>
     <col/>
     <col/>
     <col/>
    </colgroup>
    <thead>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.352.1">
           Parameter
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.353.1">
           Value
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.354.1">
           Description
          </span>
         </strong>
        </span>
       </p>
      </td>
     </tr>
    </thead>
    <tbody>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.355.1">
           Subscription
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.356.1">
         Select
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.357.1">
          your subscription.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.358.1">
         A subscription is necessary to onboard the resources and
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.359.1">
          related costs.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.360.1">
           Resource Group
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.361.1">
         Here, the value is
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.362.1">
          rg-aspnetcore8
         </span>
        </strong>
        <span class="koboSpan" id="kobo.363.1">
         .
        </span>
        <span class="koboSpan" id="kobo.363.2">
         If this resource group doesn’t exist, click on
        </span>
        <strong class="bold">
         <span class="koboSpan" id="kobo.364.1">
          Create new link
         </span>
        </strong>
        <span class="koboSpan" id="kobo.365.1">
         below the
        </span>
        <strong class="bold">
         <span class="koboSpan" id="kobo.366.1">
          Resource Group
         </span>
        </strong>
        <span class="koboSpan" id="kobo.367.1">
         field and
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.368.1">
          create it.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.369.1">
         The resource is a logical group of resources
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.370.1">
          in Azure.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.371.1">
           Name
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.372.1">
          urlshortener.&lt;your
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.373.1">
           last name&gt;
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.374.1">
          .
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.375.1">
         This parameter will be the URL of your application.
        </span>
        <span class="koboSpan" id="kobo.375.2">
         Please keep
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.376.1">
          it unique.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.377.1">
           Publish
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.378.1">
           Code
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.379.1">
          .
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.380.1">
         App Service has different ways to host and publish applications.
        </span>
        <span class="koboSpan" id="kobo.380.2">
         In this case, we’re using the
        </span>
        <strong class="bold">
         <span class="koboSpan" id="kobo.381.1">
          Code
         </span>
        </strong>
        <span class="koboSpan" id="kobo.382.1">
         option because we’ll publish the
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.383.1">
          generated package.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.384.1">
           Runtime stack
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.385.1">
          .NET
         </span>
        </strong>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.386.1">
           9 (LTS)
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.387.1">
          .
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.388.1">
         This parameter defines the type of application that will be hosted on App Service.
        </span>
        <span class="koboSpan" id="kobo.388.2">
         It supports .NET, Node.js, Java, PHP,
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.389.1">
          and Python.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.390.1">
           Operational System
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.391.1">
          Linux.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.392.1">
         Linux is a good option for many use cases.
        </span>
        <span class="koboSpan" id="kobo.392.2">
         However, for this exercise, you can select Windows as well.
        </span>
        <span class="koboSpan" id="kobo.392.3">
         The definition of the operating system depends on the requirements of
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.393.1">
          the application.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.394.1">
           Region
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.395.1">
           EastUS 2
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.396.1">
         The region where App Service will be hosted.
        </span>
        <span class="koboSpan" id="kobo.396.2">
         We’re using
        </span>
        <strong class="bold">
         <span class="koboSpan" id="kobo.397.1">
          East US 2
         </span>
        </strong>
        <span class="koboSpan" id="kobo.398.1">
         because the database we’ll be creating is not available in the East
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.399.1">
          US region.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.400.1">
           Linux Pan
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.401.1">
          Leave as-is.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.402.1">
         We’ll be creating a new service plan to host the application.
        </span>
        <span class="koboSpan" id="kobo.402.2">
         The service plan is an important component of App Service.
        </span>
        <span class="koboSpan" id="kobo.402.3">
         Depending on the pricing plan, the service plan can host more than
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.403.1">
          one application.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.404.1">
           Pricing plan
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.405.1">
           Basic B1
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.406.1">
          .
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.407.1">
         The
        </span>
        <strong class="bold">
         <span class="koboSpan" id="kobo.408.1">
          Basic B1
         </span>
        </strong>
        <span class="koboSpan" id="kobo.409.1">
         option is enough for this example.
        </span>
        <span class="koboSpan" id="kobo.409.2">
         Keep in mind that if you select a different Pricing plan, you can be charged
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.410.1">
          higher costs.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.411.1">
           Zone redundancy
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.412.1">
          Disabled.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.413.1">
         This parameter is used in production environments where applications require a
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.414.1">
          high-availability configuration.
         </span>
        </span>
       </p>
      </td>
     </tr>
    </tbody>
   </table>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.415.1">
     Table 10.3 – Basic parameters of the new Web App resource
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.416.1">
     5.
    </span>
    <span class="koboSpan" id="kobo.416.2">
     Click
    </span>
    <a id="_idIndexMarker817">
    </a>
    <span class="koboSpan" id="kobo.417.1">
     on the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.418.1">
      Next: Database &gt;
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.419.1">
      button.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.420.1">
     6.
    </span>
    <span class="koboSpan" id="kobo.420.2">
     Select the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.421.1">
      Create a database
     </span>
    </strong>
    <span class="koboSpan" id="kobo.422.1">
     option and fill in the parameters as per
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.423.1">
       Figure 10
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.424.1">
       .3
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.425.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer117">
     <span class="koboSpan" id="kobo.426.1">
      <img alt="Figure 10.3 – Database server configuration" src="image/B21788_10_03.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.427.1">
     Figure 10.3 – Database server configuration
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.428.1">
     At this stage, we’re configuring a database, which is necessary for the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.429.1">
      URLShortener
     </span>
    </strong>
    <span class="koboSpan" id="kobo.430.1">
     application.
    </span>
    <span class="koboSpan" id="kobo.430.2">
     We’ll use the Azure SQL Server resource since it provides a server where you can host different databases.
    </span>
    <span class="koboSpan" id="kobo.430.3">
     For this example, we’re using just one database.
    </span>
    <span class="koboSpan" id="kobo.430.4">
     However, if desired, other databases can be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.431.1">
      added later.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.432.1">
     7.
    </span>
    <span class="koboSpan" id="kobo.432.2">
     Now, click on the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.433.1">
      Monitor + Secure
     </span>
    </strong>
    <span class="koboSpan" id="kobo.434.1">
     tab and set the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.435.1">
      Enable Application Insights
     </span>
    </strong>
    <span class="koboSpan" id="kobo.436.1">
     option
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.437.1">
      to
     </span>
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.438.1">
       No
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.439.1">
      .
     </span>
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.440.1">
     This option aims to create a monitoring resource for the application.
    </span>
    <span class="koboSpan" id="kobo.440.2">
     This is a best practice, especially for production resources.
    </span>
    <span class="koboSpan" id="kobo.440.3">
     Therefore, at this stage, the objective is to publish the application; there’s no need for monitoring, something that can be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.441.1">
      added later.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.442.1">
     8.
    </span>
    <span class="koboSpan" id="kobo.442.2">
     Next, click
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.443.1">
      Review and Create
     </span>
    </strong>
    <span class="koboSpan" id="kobo.444.1">
     .
    </span>
    <span class="koboSpan" id="kobo.444.2">
     Then, click
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.445.1">
      Create
     </span>
    </strong>
    <span class="koboSpan" id="kobo.446.1">
     and wait for the resource to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.447.1">
      be created.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.448.1">
     9.
    </span>
    <span class="koboSpan" id="kobo.448.2">
     On the review
    </span>
    <a id="_idIndexMarker818">
    </a>
    <span class="koboSpan" id="kobo.449.1">
     screen, in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.450.1">
      Database
     </span>
    </strong>
    <span class="koboSpan" id="kobo.451.1">
     section, you’ll see username and password information, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.452.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.453.1">
      .4
     </span>
    </em>
    <span class="koboSpan" id="kobo.454.1">
     .
    </span>
    <span class="koboSpan" id="kobo.454.2">
     Copy those details and keep them handy; we’ll need the password later to configure
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.455.1">
      the database:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer118">
     <span class="koboSpan" id="kobo.456.1">
      <img alt="Figure 10.4 – Database credentials" src="image/B21788_10_04.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.457.1">
     Figure 10.4 – Database credentials
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.458.1">
     10.
    </span>
    <span class="koboSpan" id="kobo.458.2">
     Finally, click
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.459.1">
      Create
     </span>
    </strong>
    <span class="koboSpan" id="kobo.460.1">
     and wait for the resource to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.461.1">
      be created.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.462.1">
     11.
    </span>
    <span class="koboSpan" id="kobo.462.2">
     Once the resource has been created, click the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.463.1">
      Go to resource
     </span>
    </strong>
    <span class="koboSpan" id="kobo.464.1">
     button, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.465.1">
       Figure 10
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.466.1">
       .5
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.467.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer119">
     <span class="koboSpan" id="kobo.468.1">
      <img alt="Figure 10.5: Resource created screen" src="image/B21788_10_05.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.469.1">
     Figure 10.5: Resource created screen
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.470.1">
     You will be redirected to the previously created
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.471.1">
      App Service
     </span>
    </strong>
    <span class="koboSpan" id="kobo.472.1">
     settings
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.473.1">
      summary screen.
     </span>
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.474.1">
     As shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.475.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.476.1">
      .6
     </span>
    </em>
    <span class="koboSpan" id="kobo.477.1">
     , you’ll be able to see the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.478.1">
      Default domain
     </span>
    </strong>
    <span class="koboSpan" id="kobo.479.1">
     URL that’s been made
    </span>
    <a id="_idIndexMarker819">
    </a>
    <span class="koboSpan" id="kobo.480.1">
     available so that you can access
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.481.1">
      the application:
     </span>
    </span>
   </p>
   <p class="IMG---Figure">
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer120">
     <span class="koboSpan" id="kobo.482.1">
      <img alt="Figure 10.6 – Default domain URL of the created application services" src="image/B21788_10_06.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.483.1">
     Figure 10.6 – Default domain URL of the created application services
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.484.1">
     The
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.485.1">
      Default domain
     </span>
    </strong>
    <span class="koboSpan" id="kobo.486.1">
     URL is automatically created by Azure, according to the parameters defined when creating the application services and can be customized with a custom domain.
    </span>
    <span class="koboSpan" id="kobo.486.2">
     We’ll keep the URL available and in operation.
    </span>
    <span class="koboSpan" id="kobo.486.3">
     Upon clicking on the URL, you’ll be redirected to a page containing information similar to what’s shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.487.1">
       Figure 10
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.488.1">
       .7
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.489.1">
      :
     </span>
    </span>
   </p>
   <p class="IMG---Figure">
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer121">
     <span class="koboSpan" id="kobo.490.1">
      <img alt="Figure 10.7 – Default website content of the new application services" src="image/B21788_10_07.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.491.1">
     Figure 10.7 – Default website content of the new application services
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.492.1">
     At this point, the
    </span>
    <a id="_idIndexMarker820">
    </a>
    <span class="koboSpan" id="kobo.493.1">
     server is up and running, but we must publish the application on Azure.
    </span>
    <span class="koboSpan" id="kobo.493.2">
     However, before publishing the application, let’s configure
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.494.1">
      the database.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-169">
    <a id="_idTextAnchor170">
    </a>
    <span class="koboSpan" id="kobo.495.1">
     Configuring Azure SQL Server
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.496.1">
     While creating our
    </span>
    <a id="_idIndexMarker821">
    </a>
    <span class="koboSpan" id="kobo.497.1">
     application services, other resources were created, such as the database server and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.498.1">
      the database.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.499.1">
     We need to configure the database so that we have the table we used in the application to persist
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.500.1">
      the URLs.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.501.1">
     We’ll use the Entity Framework Core tool to update the database in the same way we did it locally.
    </span>
    <span class="koboSpan" id="kobo.501.2">
     However, the database service that’s automatically created by Azure is publicly inaccessible for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.502.1">
      security reasons.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.503.1">
     To do this, we must make some configuration changes in advance so that we can manipulate the database.
    </span>
    <span class="koboSpan" id="kobo.503.2">
     Follow
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.504.1">
      these steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.505.1">
      Go to the previously created resource group – that is,
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.506.1">
       rg-aspnetcore8
      </span>
     </strong>
     <span class="koboSpan" id="kobo.507.1">
      .
     </span>
     <span class="koboSpan" id="kobo.507.2">
      You will be able to see a list of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.508.1">
       created resources.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.509.1">
      Search for the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.510.1">
       UrlshortenerDB
      </span>
     </strong>
     <span class="koboSpan" id="kobo.511.1">
      resource and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.512.1">
       access it.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.513.1">
      Then, in the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.514.1">
       Settings
      </span>
     </strong>
     <span class="koboSpan" id="kobo.515.1">
      menu group, click
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.516.1">
        Connection Strings
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.517.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.518.1">
      The connection string should look
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.519.1">
       like this:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.520.1">
Server=tcp:urlshortener-db-server-tanure.database.windows.net,1433;Initial Catalog=UrlshortenerDB;Persist Security Info=False;User ID=urlshortener-db-server-tanure-admin;</span><strong class="bold"><span class="koboSpan" id="kobo.521.1">Password={your_password}</span></strong><span class="koboSpan" id="kobo.522.1">; MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.523.1">
      Note the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.524.1">
       Password={your_password}
      </span>
     </strong>
     <span class="koboSpan" id="kobo.525.1">
      parameter.
     </span>
     <span class="koboSpan" id="kobo.525.2">
      Replace this parameter with the password that you copied when you were creating your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.526.1">
       application services.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.527.1">
      Copy the
     </span>
     <a id="_idIndexMarker822">
     </a>
     <span class="koboSpan" id="kobo.528.1">
      connection string from the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.529.1">
       ADO.NET (SQL
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.530.1">
        Authentication)
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.531.1">
       field.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.532.1">
      Now, open the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.533.1">
       appsettings.json
      </span>
     </strong>
     <span class="koboSpan" id="kobo.534.1">
      file of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.535.1">
       URLShortener
      </span>
     </strong>
     <span class="koboSpan" id="kobo.536.1">
      application and change the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.537.1">
       DefaultConnection
      </span>
     </strong>
     <span class="koboSpan" id="kobo.538.1">
      property to the connection string you copied previously.
     </span>
     <span class="koboSpan" id="kobo.538.2">
      The result will look
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.539.1">
       like this:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.540.1">
"Logging": {
  "LogLevel": {
    "Default": "Information",
    "Microsoft.AspNetCore": "Warning"
  }
},
"ConnectionStrings": {
  "DefaultConnection":
    "Server=tcp:urlshortener-db-server-tanure.database.windows.net,1433;Initial Catalog=UrlshortenerDB;Persist Security Info=False;User ID=urlshortener-db-server-tanure-admin;Password=XL6l61uv9t4$K4Q6;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;"
  },
  "AllowedHosts": "*"
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.541.1">
      Save the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.542.1">
        appsettings.json
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.543.1">
       file.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.544.1">
      Now, let’s configure access to the database server.
     </span>
     <span class="koboSpan" id="kobo.544.2">
      To do this, go back to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.545.1">
       rg-aspnetcore8
      </span>
     </strong>
     <span class="koboSpan" id="kobo.546.1">
      resource group and click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.547.1">
       urlshortener-db-server&lt;your last
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.548.1">
        name&gt;
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.549.1">
       resource.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.550.1">
      From the main
     </span>
     <a id="_idIndexMarker823">
     </a>
     <span class="koboSpan" id="kobo.551.1">
      menu, go to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.552.1">
       Security
      </span>
     </strong>
     <span class="koboSpan" id="kobo.553.1">
      |
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.554.1">
       Networking
      </span>
     </strong>
     <span class="koboSpan" id="kobo.555.1">
      and click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.556.1">
       Add your client IPv4 address
      </span>
     </strong>
     <span class="koboSpan" id="kobo.557.1">
      option, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.558.1">
        Figure 10
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.559.1">
        .8
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.560.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer122">
     <span class="koboSpan" id="kobo.561.1">
      <img alt="Figure 10.8 – Adding a firewall rule to access the private database of an IPv4 address" src="image/B21788_10_08.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.562.1">
     Figure 10.8 – Adding a firewall rule to access the private database of an IPv4 address
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.563.1">
     This configuration will create a rule so that the database is only accessible via its current IP.
    </span>
    <span class="koboSpan" id="kobo.563.2">
     Keep in mind that if your IP changes, you will have to perform these steps again to add the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.564.1">
      new IP.
     </span>
    </span>
   </p>
   <ol>
    <li value="11">
     <span class="koboSpan" id="kobo.565.1">
      Finally,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.566.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.567.1">
        Save
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.568.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.569.1">
     With this, we’ve
    </span>
    <a id="_idIndexMarker824">
    </a>
    <span class="koboSpan" id="kobo.570.1">
     configured the application for the connection string of the database hosted in Azure and added a firewall rule so that the database can be accessed through our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.571.1">
      current IP.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.572.1">
     Now, we need to update the database.
    </span>
    <span class="koboSpan" id="kobo.572.2">
     To do this, access your operating system’s terminal and navigate to the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.573.1">
      URLShortener
     </span>
    </strong>
    <span class="koboSpan" id="kobo.574.1">
     project directory.
    </span>
    <span class="koboSpan" id="kobo.574.2">
     Then, run the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.575.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.576.1">
dotnet ef database update</span></pre>
   <p>
    <span class="koboSpan" id="kobo.577.1">
     Wait for the process to complete.
    </span>
    <span class="koboSpan" id="kobo.577.2">
     To check whether the table was created correctly, in the Azure portal (
    </span>
    <a href="https://portal.azure.com">
     <span class="koboSpan" id="kobo.578.1">
      https://portal.azure.com
     </span>
    </a>
    <span class="koboSpan" id="kobo.579.1">
     ), access the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.580.1">
      rg-aspnetcore9
     </span>
    </strong>
    <span class="koboSpan" id="kobo.581.1">
     resource group, then access the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.582.1">
      UrlShortenerDB
     </span>
    </strong>
    <span class="koboSpan" id="kobo.583.1">
     resource.
    </span>
    <span class="koboSpan" id="kobo.583.2">
     Click on the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.584.1">
      Query Editor
     </span>
    </strong>
    <span class="koboSpan" id="kobo.585.1">
     menu and access the database with the credentials that were provided when you were creating the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.586.1">
      application service.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.587.1">
     As shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.588.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.589.1">
      .9
     </span>
    </em>
    <span class="koboSpan" id="kobo.590.1">
     , the new table has
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.591.1">
      been created:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer123">
     <span class="koboSpan" id="kobo.592.1">
      <img alt="Figure 10.9 – The database tables that were created using Entity Framework Core migrations" src="image/B21788_10_09.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.593.1">
     Figure 10.9 – The database tables that were created using Entity Framework Core migrations
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.594.1">
     This is one of the benefits of using migrations through Entity Framework Core.
    </span>
    <span class="koboSpan" id="kobo.594.2">
     By doing this, it’s possible to apply changes to a local database or server and maintain compliance with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.595.1">
      application code.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.596.1">
     Now that the database has been configured, it’s time to publish the application.
    </span>
    <span class="koboSpan" id="kobo.596.2">
     We’ll do this through Visual
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.597.1">
      Studio Code.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-170">
    <a id="_idTextAnchor171">
    </a>
    <span class="koboSpan" id="kobo.598.1">
     Publishing an application with Visual Studio Code
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.599.1">
     With all the prerequisites for
    </span>
    <a id="_idIndexMarker825">
    </a>
    <span class="koboSpan" id="kobo.600.1">
     hosting the
    </span>
    <a id="_idIndexMarker826">
    </a>
    <span class="koboSpan" id="kobo.601.1">
     application in Azure configured, it’s time to publish
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.602.1">
      the application.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.603.1">
     The process of publishing via Visual Studio Code or even with Visual Studio is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.604.1">
      quite straightforward.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.605.1">
     In the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.606.1">
      Technical requirements
     </span>
    </em>
    <span class="koboSpan" id="kobo.607.1">
     section, it was suggested that you install and configure the Azure Tools extension
    </span>
    <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-node-azure-pack">
     <span class="koboSpan" id="kobo.608.1">
      (https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-node-azure-pack
     </span>
    </a>
    <span class="koboSpan" id="kobo.609.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.609.2">
     This extension makes the manual publishing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.610.1">
      process easier.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.611.1">
     Follow these steps to publish the application version in the application services we
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.612.1">
      created previously:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.613.1">
      Access the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.614.1">
       UrlShortener
      </span>
     </strong>
     <span class="koboSpan" id="kobo.615.1">
      application directory and run the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.616.1">
       following command:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.617.1">code .</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.618.1">
      Then, click on the Azure Tools extension icon in Visual Studio Code, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.619.1">
        Figure 10
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.620.1">
        .10
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.621.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer124">
     <span class="koboSpan" id="kobo.622.1">
      <img alt="Figure 10.10 – Azure Tools in Visual Studio Code" src="image/B21788_10_10.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.623.1">
     Figure 10.10 – Azure Tools in Visual Studio Code
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.624.1">
     A list of
    </span>
    <a id="_idIndexMarker827">
    </a>
    <span class="koboSpan" id="kobo.625.1">
     subscriptions that are
    </span>
    <a id="_idIndexMarker828">
    </a>
    <span class="koboSpan" id="kobo.626.1">
     available to your user will be displayed.
    </span>
    <span class="koboSpan" id="kobo.626.2">
     By expanding the subscription, we’ll be able to see the App Service resource and the resource that’s been created for the
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.627.1">
       UrlShortener
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.628.1">
      application.
     </span>
    </span>
   </p>
   <ol>
    <li value="3">
     <span class="koboSpan" id="kobo.629.1">
      Now, right-click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.630.1">
       urlshortener-&lt;your last name&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.631.1">
      application and select the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.632.1">
       Deploy to Web App…
      </span>
     </strong>
     <span class="koboSpan" id="kobo.633.1">
      option, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.634.1">
        Figure 10
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.635.1">
        .11
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.636.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer125">
     <span class="koboSpan" id="kobo.637.1">
      <img alt="Figure 10.11 – Deploying a web app using the Azure Tools extensions in Visual Studio Code" src="image/B21788_10_11.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.638.1">
     Figure 10.11 – Deploying a web app using the Azure Tools extensions in Visual Studio Code
    </span>
   </p>
   <ol>
    <li value="4">
     <span class="koboSpan" id="kobo.639.1">
      You’ll be
     </span>
     <a id="_idIndexMarker829">
     </a>
     <span class="koboSpan" id="kobo.640.1">
      asked for some configuration details so that you can deploy.
     </span>
     <span class="koboSpan" id="kobo.640.2">
      Just confirm the options that are
     </span>
     <a id="_idIndexMarker830">
     </a>
     <span class="koboSpan" id="kobo.641.1">
      provided and wait for the deployment process
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.642.1">
       to complete.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.643.1">
      After the publication process is complete, a notification similar to the one shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.644.1">
        Figure 10
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.645.1">
       .12
      </span>
     </em>
     <span class="koboSpan" id="kobo.646.1">
      will
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.647.1">
       be displayed:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer126">
     <span class="koboSpan" id="kobo.648.1">
      <img alt="Figure 10.12 – A notification stating that application deployment has been completed" src="image/B21788_10_12.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.649.1">
     Figure 10.12 – A notification stating that application deployment has been completed
    </span>
   </p>
   <ol>
    <li value="6">
     <span class="koboSpan" id="kobo.650.1">
      You can navigate to the published website by clicking the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.651.1">
       Browse Website
      </span>
     </strong>
     <span class="koboSpan" id="kobo.652.1">
      button.
     </span>
     <span class="koboSpan" id="kobo.652.2">
      You’ll see a result similar to the one shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.653.1">
        Figure 10
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.654.1">
        .13
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.655.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer127">
     <span class="koboSpan" id="kobo.656.1">
      <img alt="Figure 10.13 – The URL Shortener application running on Azure" src="image/B21788_10_13.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.657.1">
     Figure 10.13 – The URL Shortener application running on Azure
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.658.1">
     Now, you can use the
    </span>
    <a id="_idIndexMarker831">
    </a>
    <span class="koboSpan" id="kobo.659.1">
     application that
    </span>
    <a id="_idIndexMarker832">
    </a>
    <span class="koboSpan" id="kobo.660.1">
     contains the short URL functionality directly in your Azure
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.661.1">
      environment publicly.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.662.1">
     The Azure Tools extension
    </span>
    <a id="_idIndexMarker833">
    </a>
    <span class="koboSpan" id="kobo.663.1">
     automates the process of publishing new application versions by running the following processes in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.664.1">
      the background:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.665.1">
       Restoring packages
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.666.1">
      Compiling
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.667.1">
       the application
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.668.1">
      Generating a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.669.1">
       publishing package
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.670.1">
      Compressing the publishing package in
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.671.1">
       .
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.672.1">
        zip
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.673.1">
       format
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.674.1">
      Connecting to the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.675.1">
       Azure environment
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.676.1">
      Deploying the ZIP file containing the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.677.1">
       publication package
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.678.1">
      Extracting the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.679.1">
       ZIP file
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.680.1">
     These steps are performed every time you choose to deploy using the Azure Tools extension.
    </span>
    <span class="koboSpan" id="kobo.680.2">
     We’ll learn about another way to publish packages in a C/ICD model in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.681.1">
      Understanding DevOps approach with CI/CD
     </span>
    </em>
    <span class="koboSpan" id="kobo.682.1">
     section of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.683.1">
      this chapter.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.684.1">
     Hosting solutions in cloud environments is a necessary activity today and several resources can help us with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.685.1">
      this task.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.686.1">
     The definition of each hosting resource and service layer will depend on the application requirements, as well as the team’s level of knowledge.
    </span>
    <span class="koboSpan" id="kobo.686.2">
     There are cases where we can use strategies that allow us to host our applications in different environments, in a way that’s agnostic to the specific resources of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.687.1">
      cloud providers.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.688.1">
     To achieve this, a strategy that’s often used in cloud-native applications is the containers strategy.
    </span>
    <span class="koboSpan" id="kobo.688.2">
     We’ll learn about this in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.689.1">
      next section.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-171">
    <a id="_idTextAnchor172">
    </a>
    <span class="koboSpan" id="kobo.690.1">
     Understanding the Docker principles and how to package the application in a container
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.691.1">
     Nowadays, using a container strategy has become essential, especially for cloud-native applications.
    </span>
    <span class="koboSpan" id="kobo.691.2">
     Containers provide a consistent environment for development, testing, and deployment, ensuring applications run smoothly regardless of where they’re deployed.
    </span>
    <span class="koboSpan" id="kobo.691.3">
     When using containers, we practically have everything needed for the application to run in a given environment, with no need to install additional packages
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.692.1">
      or runtimes.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.693.1">
     With this, we have consistency, which is crucial for cloud environments such as Azure or any other cloud provider as they offer robust services to manage and scale containerized applications.
    </span>
    <span class="koboSpan" id="kobo.693.2">
     As an analogy, the container strategy helps combat the behavior that generates the statement “
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.694.1">
      It works on
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.695.1">
       my machine.
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.696.1">
      ”
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.697.1">
     This phrase is true since the development environment has everything necessary to run an application.
    </span>
    <span class="koboSpan" id="kobo.697.2">
     However, being agile in delivering value and having no dependencies for running applications, regardless of the environment, is one of the great advantages of containers.
    </span>
    <span class="koboSpan" id="kobo.697.3">
     Before we create a container, let’s understand what
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.698.1">
      they are.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-172">
    <a id="_idTextAnchor173">
    </a>
    <span class="koboSpan" id="kobo.699.1">
     Understanding what a container is
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.700.1">
     A container
    </span>
    <a id="_idIndexMarker834">
    </a>
    <span class="koboSpan" id="kobo.701.1">
     is a self-contained executable software package that includes everything needed to run a piece of software.
    </span>
    <span class="koboSpan" id="kobo.701.2">
     Containers are isolated from each other and the host system, providing a consistent runtime environment.
    </span>
    <span class="koboSpan" id="kobo.701.3">
     This isolation ensures that the application behaves the same regardless of the environment in which
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.702.1">
      it runs.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.703.1">
     Containers provide a type of virtualization
    </span>
    <a id="_idIndexMarker835">
    </a>
    <span class="koboSpan" id="kobo.704.1">
     that’s different from what’s provided by traditional
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.705.1">
      virtual
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.706.1">
       machines
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.707.1">
      (
     </span>
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.708.1">
       VMs
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.709.1">
      ).
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.710.1">
     VMs
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.711.1">
     VMs are
    </span>
    <a id="_idIndexMarker836">
    </a>
    <span class="koboSpan" id="kobo.712.1">
     software emulations of physical computers.
    </span>
    <span class="koboSpan" id="kobo.712.2">
     Each VM runs a complete operating system, including its own kernel, and simulates all the hardware that the operating system requires.
    </span>
    <span class="koboSpan" id="kobo.712.3">
     VMs run on a hypervisor, which manages multiple VMs on a single
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.713.1">
      physical host.
     </span>
    </span>
   </p>
   <p>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.714.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.715.1">
      .14
     </span>
    </em>
    <span class="koboSpan" id="kobo.716.1">
     shows some of the differences between
    </span>
    <a id="_idIndexMarker837">
    </a>
    <span class="koboSpan" id="kobo.717.1">
     containers
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.718.1">
      and
     </span>
    </span>
    <span class="No-Break">
     <a id="_idIndexMarker838">
     </a>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.719.1">
      VMs:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer128">
     <span class="koboSpan" id="kobo.720.1">
      <img alt="Figure 10.14 – Differences between containers and VMs" src="image/B21788_10_14.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.721.1">
     Figure 10.14 – Differences between containers and VMs
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.722.1">
     As we can see, containers don’t depend on a complete operating system for their execution, only on a runtime that shares a machine’s resources, such as networking and processing.
    </span>
    <span class="koboSpan" id="kobo.722.2">
     However, they are executed independently and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.723.1">
      in isolation.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.724.1">
     Containers
    </span>
    <a id="_idIndexMarker839">
    </a>
    <span class="koboSpan" id="kobo.725.1">
     offer
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.726.1">
      several benefits:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.727.1">
       Portability
      </span>
     </strong>
     <span class="koboSpan" id="kobo.728.1">
      : Containers
     </span>
     <a id="_idIndexMarker840">
     </a>
     <span class="koboSpan" id="kobo.729.1">
      encapsulate all dependencies, making it easy to move applications between different environments without compatibility
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.730.1">
       issues occurring.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.731.1">
       Consistency
      </span>
     </strong>
     <span class="koboSpan" id="kobo.732.1">
      : They ensure that applications run consistently across development, testing, and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.733.1">
       production environments.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.734.1">
       Scalability
      </span>
     </strong>
     <span class="koboSpan" id="kobo.735.1">
      : They can easily be scaled up or down to handle varying loads, making them ideal for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.736.1">
       cloud environments.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.737.1">
       Efficiency
      </span>
     </strong>
     <span class="koboSpan" id="kobo.738.1">
      : Containers share the kernel and host system resources efficiently, resulting in lower overhead compared to
     </span>
     <a id="_idIndexMarker841">
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.739.1">
       traditional VMs.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.740.1">
     To be able to run a container, it’s necessary to use a runtime to manage it, as is the case with ASP.NET Core 9 applications.
    </span>
    <span class="koboSpan" id="kobo.740.2">
     The most famous container
    </span>
    <a id="_idIndexMarker842">
    </a>
    <span class="koboSpan" id="kobo.741.1">
     runtime is
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.742.1">
      Docker
     </span>
    </strong>
    <span class="koboSpan" id="kobo.743.1">
     .
    </span>
    <span class="koboSpan" id="kobo.743.2">
     We’ll understand its fundamentals in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.744.1">
      next section.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-173">
    <a id="_idTextAnchor174">
    </a>
    <span class="koboSpan" id="kobo.745.1">
     Understanding Docker fundamentals
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.746.1">
     Docker
    </span>
    <a id="_idIndexMarker843">
    </a>
    <span class="koboSpan" id="kobo.747.1">
     is an open source platform that automates the process of deploying, scaling, and managing containerized applications, providing a simple and powerful way to build, ship, and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.748.1">
      operate containers.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.749.1">
     Docker provides three components for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.750.1">
      managing containers:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.751.1">
       Docker Engine
      </span>
     </strong>
     <span class="koboSpan" id="kobo.752.1">
      : The
     </span>
     <a id="_idIndexMarker844">
     </a>
     <span class="koboSpan" id="kobo.753.1">
      runtime that
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.754.1">
       manages containers
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.755.1">
       Docker CLI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.756.1">
      : The
     </span>
     <a id="_idIndexMarker845">
     </a>
     <span class="koboSpan" id="kobo.757.1">
      command-line interface used to interact
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.758.1">
       with Docker
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.759.1">
       Docker Hub
      </span>
     </strong>
     <span class="koboSpan" id="kobo.760.1">
      : A
     </span>
     <a id="_idIndexMarker846">
     </a>
     <span class="koboSpan" id="kobo.761.1">
      cloud-based registry service for sharing and storing Docker images, similar to how we have GitHub for managing source
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.762.1">
       code repositories
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.763.1">
     Through these tools, Docker provides mechanisms that allow us to manipulate the components that involve the container development strategy.
    </span>
    <span class="koboSpan" id="kobo.763.2">
     In this case, containers have the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.764.1">
      following components:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.765.1">
       Images
      </span>
     </strong>
     <span class="koboSpan" id="kobo.766.1">
      : An image
     </span>
     <a id="_idIndexMarker847">
     </a>
     <span class="koboSpan" id="kobo.767.1">
      can be compared to a photo of a current version of your application, including everything needed to run your application.
     </span>
     <span class="koboSpan" id="kobo.767.2">
      Images are the basis of containers and are created using
     </span>
     <a id="_idIndexMarker848">
     </a>
     <span class="koboSpan" id="kobo.768.1">
      a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.769.1">
       Dockerfile
      </span>
     </strong>
     <span class="koboSpan" id="kobo.770.1">
      , which contains a set of instructions for building
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.771.1">
       the image.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.772.1">
       Containers
      </span>
     </strong>
     <span class="koboSpan" id="kobo.773.1">
      : A container
     </span>
     <a id="_idIndexMarker849">
     </a>
     <span class="koboSpan" id="kobo.774.1">
      is a running instance of an image.
     </span>
     <span class="koboSpan" id="kobo.774.2">
      We can relate an image to a class and a container to an instance of this class.
     </span>
     <span class="koboSpan" id="kobo.774.3">
      Containers are created from images and run on Docker Engine.
     </span>
     <span class="koboSpan" id="kobo.774.4">
      Each container is isolated from the others and has its own filesystem, CPU, memory, and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.775.1">
       process space.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.776.1">
       Dockerfile
      </span>
     </strong>
     <span class="koboSpan" id="kobo.777.1">
      : A Dockerfile
     </span>
     <a id="_idIndexMarker850">
     </a>
     <span class="koboSpan" id="kobo.778.1">
      is a text document that contains a series of instructions on how to build a Docker image.
     </span>
     <span class="koboSpan" id="kobo.778.2">
      It specifies the base image to use, the application code, dependencies, and any commands required to configure
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.779.1">
       the environment.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.780.1">
       Container registry
      </span>
     </strong>
     <span class="koboSpan" id="kobo.781.1">
      : The container registry
     </span>
     <a id="_idIndexMarker851">
     </a>
     <span class="koboSpan" id="kobo.782.1">
      is a repository for storing and distributing images.
     </span>
     <span class="koboSpan" id="kobo.782.2">
      Docker Hub is a popular public registry, though there are private registries such as Azure Container
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.783.1">
       Registry available.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.784.1">
     The relationship between Docker components and their container structure is shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.785.1">
       Figure 10
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.786.1">
       .15
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.787.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer129">
     <span class="koboSpan" id="kobo.788.1">
      <img alt="Figure 10.15 – The relationship between Docker and its container components" src="image/B21788_10_15.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.789.1">
     Figure 10.15 – The relationship between Docker and its container components
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.790.1">
     As mentioned previously, Docker is the most used container solution, but there are other types of runtimes available that implement the same concepts
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.791.1">
      presented here.
     </span>
    </span>
   </p>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.792.1">
      Table 10.4
     </span>
    </em>
    <span class="koboSpan" id="kobo.793.1">
     explains some of the container runtimes
    </span>
    <a id="_idIndexMarker852">
    </a>
    <span class="koboSpan" id="kobo.794.1">
     that are available on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.795.1">
      the market:
     </span>
    </span>
   </p>
   <table class="No-Table-Style _idGenTablePara-1" id="table004">
    <colgroup>
     <col/>
     <col/>
     <col/>
    </colgroup>
    <tbody>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.796.1">
           Runtime
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.797.1">
           Description
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.798.1">
           Website
          </span>
         </strong>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.799.1">
           containerd
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.800.1">
         The
        </span>
        <a id="_idIndexMarker853">
        </a>
        <span class="koboSpan" id="kobo.801.1">
         core runtime
        </span>
        <a id="_idIndexMarker854">
        </a>
        <span class="koboSpan" id="kobo.802.1">
         used by Docker and Kubernetes.
        </span>
        <span class="koboSpan" id="kobo.802.2">
         It focuses on simplicity
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.803.1">
          and portability.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <a href="https://containerd.io/">
         <span class="No-Break">
          <span class="koboSpan" id="kobo.804.1">
           https://containerd.io/
          </span>
         </span>
        </a>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.805.1">
           CRI-O
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.806.1">
         A
        </span>
        <a id="_idIndexMarker855">
        </a>
        <span class="koboSpan" id="kobo.807.1">
         lightweight runtime for Kubernetes that
        </span>
        <a id="_idIndexMarker856">
        </a>
        <span class="koboSpan" id="kobo.808.1">
         implements
        </span>
        <a id="_idIndexMarker857">
        </a>
        <span class="koboSpan" id="kobo.809.1">
         the Kubernetes
        </span>
        <strong class="bold">
         <span class="koboSpan" id="kobo.810.1">
          Container Runtime
         </span>
        </strong>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.811.1">
           Interface
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.812.1">
          (
         </span>
        </span>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.813.1">
           CRI
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.814.1">
          ).
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <a href="https://cri-o.io/">
         <span class="No-Break">
          <span class="koboSpan" id="kobo.815.1">
           https://cri-o.io/
          </span>
         </span>
        </a>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.816.1">
           runc
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.817.1">
         A
        </span>
        <a id="_idIndexMarker858">
        </a>
        <span class="koboSpan" id="kobo.818.1">
         CLI tool for spawning and running containers
        </span>
        <a id="_idIndexMarker859">
        </a>
        <span class="koboSpan" id="kobo.819.1">
         according to the
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.820.1">
          OCI specification.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <a href="https://github.com/opencontainers/runc">
         <span class="No-Break">
          <span class="koboSpan" id="kobo.821.1">
           https://github.com/opencontainers/runc
          </span>
         </span>
        </a>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.822.1">
           Podman
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.823.1">
         A
        </span>
        <a id="_idIndexMarker860">
        </a>
        <span class="koboSpan" id="kobo.824.1">
         daemonless container engine that’s
        </span>
        <a id="_idIndexMarker861">
        </a>
        <span class="koboSpan" id="kobo.825.1">
         compatible
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.826.1">
          with Docker.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <a href="https://podman.io/">
         <span class="No-Break">
          <span class="koboSpan" id="kobo.827.1">
           https://podman.io/
          </span>
         </span>
        </a>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.828.1">
           LXC
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.829.1">
         A
        </span>
        <a id="_idIndexMarker862">
        </a>
        <span class="koboSpan" id="kobo.830.1">
         traditional container runtime that provides a
        </span>
        <a id="_idIndexMarker863">
        </a>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.831.1">
          VM-like experience.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <a href="https://linuxcontainers.org/">
         <span class="No-Break">
          <span class="koboSpan" id="kobo.832.1">
           https://linuxcontainers.org/
          </span>
         </span>
        </a>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.833.1">
          Kata
         </span>
        </strong>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.834.1">
           Containers
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.835.1">
         This
        </span>
        <a id="_idIndexMarker864">
        </a>
        <span class="koboSpan" id="kobo.836.1">
         runtime
        </span>
        <a id="_idIndexMarker865">
        </a>
        <span class="koboSpan" id="kobo.837.1">
         combines the security of VMs with the speed of containers by running
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.838.1">
          lightweight VMs.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <a href="https://katacontainers.io/">
         <span class="No-Break">
          <span class="koboSpan" id="kobo.839.1">
           https://katacontainers.io/
          </span>
         </span>
        </a>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.840.1">
           Rancher
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.841.1">
         Rancher
        </span>
        <a id="_idIndexMarker866">
        </a>
        <span class="koboSpan" id="kobo.842.1">
         Desktop provides container and
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.843.1">
          Kubernetes
         </span>
        </span>
        <span class="No-Break">
         <a id="_idIndexMarker867">
         </a>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.844.1">
          management.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <a href="https://rancherdesktop.io/">
         <span class="No-Break">
          <span class="koboSpan" id="kobo.845.1">
           https://rancherdesktop.io/
          </span>
         </span>
        </a>
       </p>
      </td>
     </tr>
    </tbody>
   </table>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.846.1">
     Table 10.4 – Container runtime options
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.847.1">
     As we can see, there are several options for running containers in environments and the use of each solution will depend on the requirements of each application and organization.
    </span>
    <span class="koboSpan" id="kobo.847.2">
     However, it’s worth remembering that containers include images, other containers, a Dockerfile, and a container registry, all of which are used
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.848.1">
      by runtimes.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.849.1">
     At this point, we can package the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.850.1">
      UrlShortener
     </span>
    </strong>
    <span class="koboSpan" id="kobo.851.1">
     application in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.852.1">
      a container.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-174">
    <a id="_idTextAnchor175">
    </a>
    <span class="koboSpan" id="kobo.853.1">
     Packing the UrlShortener application
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.854.1">
     Docker Engine provides us
    </span>
    <a id="_idIndexMarker868">
    </a>
    <span class="koboSpan" id="kobo.855.1">
     with different types of resources and commands to manage containers.
    </span>
    <span class="koboSpan" id="kobo.855.2">
     We’ll focus on the packaging process for the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.856.1">
      UrlShortener
     </span>
    </strong>
    <span class="koboSpan" id="kobo.857.1">
     application and use the main features of a container, which include images, containers, and a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.858.1">
      container registry.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.859.1">
     Before proceeding, make sure you’ve installed Docker Engine, as per the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.860.1">
      Technical
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.861.1">
       requirements
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.862.1">
      section.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.863.1">
     Our packaging process will take place through the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.864.1">
      following flow:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer130">
     <span class="koboSpan" id="kobo.865.1">
      <img alt="Figure 10.16 – Container creation flow" src="image/B21788_10_16.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.866.1">
     Figure 10.16 – Container creation flow
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.867.1">
     In Visual Studio Code, be sure to open the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.868.1">
      UrlShortener
     </span>
    </strong>
    <span class="koboSpan" id="kobo.869.1">
     application and perform the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.870.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.871.1">
      In the root of the
     </span>
     <a id="_idIndexMarker869">
     </a>
     <span class="koboSpan" id="kobo.872.1">
      directory, create a file called
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.873.1">
       Dockerfile
      </span>
     </strong>
     <span class="koboSpan" id="kobo.874.1">
      .
     </span>
     <span class="koboSpan" id="kobo.874.2">
      This file has
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.875.1">
       no extension.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.876.1">
      Add the following content to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.877.1">
       the file:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.878.1">
FROM mcr.microsoft.com/dotnet/aspnet:8.0 AS base
WORKDIR /app
EXPOSE 8080
FROM mcr.microsoft.com/dotnet/sdk:8.0 AS build
WORKDIR /src
COPY ["UrlShortener.csproj", "MyApp/"]
RUN dotnet restore "MyApp/UrlShortener.csproj"
COPY . </span><span class="koboSpan" id="kobo.878.2">./MyApp
WORKDIR "/src/MyApp"
RUN dotnet build "UrlShortener.csproj" -c Release
  -o /app/build
FROM build AS publish
RUN dotnet publish "UrlShortener.csproj" -c Release
  -o /app/publish
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
</span><span class="koboSpan" id="kobo.878.3">ENTRYPOINT ["dotnet", "UrlShortener.dll"]</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.879.1">
      Save
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.880.1">
       the file.
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.881.1">
       The preceding code
      </span>
      <a id="_idIndexMarker870">
      </a>
      <span class="koboSpan" id="kobo.882.1">
       is a bit long and seems complicated, so let’s understand each line of
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.883.1">
        our
       </span>
      </span>
      <span class="No-Break">
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.884.1">
         Dockerfile
        </span>
       </strong>
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.885.1">
        :
       </span>
      </span>
     </p>
     <ul>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.886.1">
         Base image and initial configuration
        </span>
       </strong>
       <span class="koboSpan" id="kobo.887.1">
        : At this stage, we’re configuring a base image that contains the
       </span>
       <a id="_idIndexMarker871">
       </a>
       <span class="koboSpan" id="kobo.888.1">
        default configurations for running an ASP.NET Core
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.889.1">
         9 application.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.890.1">
         FROM mcr.microsoft.com/dotnet/aspnet:8.0 AS base
        </span>
       </strong>
       <span class="koboSpan" id="kobo.891.1">
        : This line specifies the base image of the final container, which uses the ASP.NET Core version 8.0 runtime image
       </span>
       <a id="_idIndexMarker872">
       </a>
       <span class="koboSpan" id="kobo.892.1">
        from the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.893.1">
         Microsoft Container Registry
        </span>
       </strong>
       <span class="koboSpan" id="kobo.894.1">
        (
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.895.1">
         MCR
        </span>
       </strong>
       <span class="koboSpan" id="kobo.896.1">
        ).
       </span>
       <span class="koboSpan" id="kobo.896.2">
        All Docker images start with a reference to a base image.
       </span>
       <span class="koboSpan" id="kobo.896.3">
        The
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.897.1">
         AS base
        </span>
       </strong>
       <span class="koboSpan" id="kobo.898.1">
        tag names this
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.899.1">
         stage
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.900.1">
          base
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.901.1">
         .
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.902.1">
         WORKDIR /app
        </span>
       </strong>
       <span class="koboSpan" id="kobo.903.1">
        : This line sets the working directory within the container to
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.904.1">
         /app
        </span>
       </strong>
       <span class="koboSpan" id="kobo.905.1">
        .
       </span>
       <span class="koboSpan" id="kobo.905.2">
        All subsequent commands will be executed in
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.906.1">
         this directory.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.907.1">
         EXPOSE 8080
        </span>
       </strong>
       <span class="koboSpan" id="kobo.908.1">
        : This line tells Docker that the container will listen on port
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.909.1">
         8080
        </span>
       </strong>
       <span class="koboSpan" id="kobo.910.1">
        at runtime.
       </span>
       <span class="koboSpan" id="kobo.910.2">
        This is used for documentation purposes, as well as for configuring port mapping when running
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.911.1">
         the container.
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.912.1">
         Build stage
        </span>
       </strong>
       <span class="koboSpan" id="kobo.913.1">
        : The build stage
       </span>
       <a id="_idIndexMarker873">
       </a>
       <span class="koboSpan" id="kobo.914.1">
        will be an image that’s responsible for compiling the application.
       </span>
       <span class="koboSpan" id="kobo.914.2">
        It will use an image that already has the .NET SDK installed as
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.915.1">
         a base.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.916.1">
         FROM mcr.microsoft.com/dotnet/sdk:8.0 AS build
        </span>
       </strong>
       <span class="koboSpan" id="kobo.917.1">
        : This line uses the .NET SDK image version 8.0 from MCR to build the application.
       </span>
       <span class="koboSpan" id="kobo.917.2">
        The
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.918.1">
         AS build
        </span>
       </strong>
       <span class="koboSpan" id="kobo.919.1">
        tag names this
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.920.1">
         stage
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.921.1">
          build
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.922.1">
         .
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.923.1">
         WORKDIR /src
        </span>
       </strong>
       <span class="koboSpan" id="kobo.924.1">
        : Sets the working directory
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.925.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.926.1">
          /src
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.927.1">
         .
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.928.1">
         COPY ["UrlShortener.csproj", "MyApp/"]
        </span>
       </strong>
       <span class="koboSpan" id="kobo.929.1">
        : Copies the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.930.1">
         UrlShortener.csproj
        </span>
       </strong>
       <span class="koboSpan" id="kobo.931.1">
        project file to the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.932.1">
         MyApp/
        </span>
       </strong>
       <span class="koboSpan" id="kobo.933.1">
        directory in
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.934.1">
         the container.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.935.1">
         RUN dotnet restore "MyApp/UrlShortener.csproj"
        </span>
       </strong>
       <span class="koboSpan" id="kobo.936.1">
        : Restores the project dependencies specified in the
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.937.1">
          UrlShortener.csproj
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.938.1">
         file.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.939.1">
         COPY .
        </span>
        <span class="koboSpan" id="kobo.939.2">
         ./MyApp
        </span>
       </strong>
       <span class="koboSpan" id="kobo.940.1">
        : Copies all the files from the current directory on the host to the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.941.1">
         MyApp
        </span>
       </strong>
       <span class="koboSpan" id="kobo.942.1">
        directory in
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.943.1">
         the container.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.944.1">
         WORKDIR "/src/MyApp"
        </span>
       </strong>
       <span class="koboSpan" id="kobo.945.1">
        : Sets the working directory
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.946.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.947.1">
          /src/MyApp
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.948.1">
         .
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.949.1">
         RUN dotnet build "UrlShortener.csproj" -c Release -o /app/build
        </span>
       </strong>
       <span class="koboSpan" id="kobo.950.1">
        : Builds the project in
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.951.1">
         Release
        </span>
       </strong>
       <span class="koboSpan" id="kobo.952.1">
        configuration and outputs the build results to
       </span>
       <a id="_idIndexMarker874">
       </a>
       <span class="koboSpan" id="kobo.953.1">
        the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.954.1">
         /
        </span>
       </strong>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.955.1">
          app/build
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.956.1">
         directory.
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.957.1">
         Publish stage
        </span>
       </strong>
       <span class="koboSpan" id="kobo.958.1">
        : At this stage, the
       </span>
       <a id="_idIndexMarker875">
       </a>
       <span class="koboSpan" id="kobo.959.1">
        publication package
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.960.1">
         is generated.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.961.1">
         FROM build AS publish
        </span>
       </strong>
       <span class="koboSpan" id="kobo.962.1">
        : This line uses the build stage as the base for the
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.963.1">
         publish stage.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.964.1">
         RUN dotnet publish "UrlShortener.csproj" -c Release -o /app/publish
        </span>
       </strong>
       <span class="koboSpan" id="kobo.965.1">
        : This line publishes the project, which means it compiles the application, copies all the necessary files, and produces a deployable version of the application in the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.966.1">
         /
        </span>
       </strong>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.967.1">
          app/publish
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.968.1">
         directory.
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.969.1">
         Final stage
        </span>
       </strong>
       <span class="koboSpan" id="kobo.970.1">
        : The
       </span>
       <a id="_idIndexMarker876">
       </a>
       <span class="koboSpan" id="kobo.971.1">
        final stage takes the package that was generated by the previous configuration and runs it on an image containing the settings from the
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.972.1">
         base image.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.973.1">
         FROM base AS final
        </span>
       </strong>
       <span class="koboSpan" id="kobo.974.1">
        : Uses the base stage as the base for the
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.975.1">
         final image.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.976.1">
         WORKDIR /app
        </span>
       </strong>
       <span class="koboSpan" id="kobo.977.1">
        : Sets the working directory
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.978.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.979.1">
          /app
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.980.1">
         .
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.981.1">
         COPY --from=publish /app/publish .
        </span>
       </strong>
       <span class="koboSpan" id="kobo.982.1">
        : Copies the contents of the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.983.1">
         /app/publish
        </span>
       </strong>
       <span class="koboSpan" id="kobo.984.1">
        directory from the publish stage to the current directory (
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.985.1">
         /app
        </span>
       </strong>
       <span class="koboSpan" id="kobo.986.1">
        ) in the
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.987.1">
         final stage.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.988.1">
         ENTRYPOINT ["dotnet", "UrlShortener.dll"]
        </span>
       </strong>
       <span class="koboSpan" id="kobo.989.1">
        : Sets the entry point for the container so that it can run the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.990.1">
         dotnet UrlShortener.dll
        </span>
       </strong>
       <span class="koboSpan" id="kobo.991.1">
        command, which starts the ASP.NET
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.992.1">
         Core application.
        </span>
       </span>
      </li>
     </ul>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.993.1">
     As explained previously, the code available in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.994.1">
      Dockerfile
     </span>
    </strong>
    <span class="koboSpan" id="kobo.995.1">
     file uses various stages to generate an image of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.996.1">
      the application.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.997.1">
     The Docker build stage
    </span>
    <a id="_idIndexMarker877">
    </a>
    <span class="koboSpan" id="kobo.998.1">
     is a phase of the Docker multi-stage build process where the application is compiled, dependencies are restored, and all the required files are prepared for deployment.
    </span>
    <span class="koboSpan" id="kobo.998.2">
     In a multi-stage build, each stage can use a different base image and environment to perform
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.999.1">
      specific tasks.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1000.1">
     The build stage typically uses a development image or SDK to compile and build the application, producing output artifacts that can be used in subsequent stages.
    </span>
    <span class="koboSpan" id="kobo.1000.2">
     This approach helps you create a clean, optimized final image that only contains the runtime dependencies and the application itself, without build tools or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1001.1">
      intermediate files.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1002.1">
     Docker multi-stage build
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1003.1">
     Docker’s multi-stage build process
    </span>
    <a id="_idIndexMarker878">
    </a>
    <span class="koboSpan" id="kobo.1004.1">
     allows you to generate optimized images and uses container technology to compile and generate publishable applications.
    </span>
    <span class="koboSpan" id="kobo.1004.2">
     To learn more about this, go
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1005.1">
      to
     </span>
    </span>
    <a href="https://docs.docker.com/build/building/multi-stage/">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1006.1">
       https://docs.docker.com/build/building/multi-stage/
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1007.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1008.1">
     When observing the flow of the multi-stage approach, we can automate the process of generating a Docker image by going through the package creation steps that we learned about previously.
    </span>
    <span class="koboSpan" id="kobo.1008.2">
     It’s possible to generate a Docker image without using the multi-stage process.
    </span>
    <span class="koboSpan" id="kobo.1008.3">
     In this case, it’s necessary to compile and generate the application package manually and, later, just copy the generated package into the image.
    </span>
    <span class="koboSpan" id="kobo.1008.4">
     This results in a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1009.1">
      Dockerfile
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1010.1">
     file that looks similar to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1011.1">
      the following:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.1012.1">
FROM mcr.microsoft.com/dotnet/aspnet:8.0 AS base
WORKDIR /app
EXPOSE 8080
COPY ./published .
</span><span class="koboSpan" id="kobo.1012.2">ENTRYPOINT ["dotnet", "UrlShortener.dll"]</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1013.1">
     By doing this, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1014.1">
      Dockerfile
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1015.1">
     file will certainly be simpler.
    </span>
    <span class="koboSpan" id="kobo.1015.2">
     However, before generating the image, it’s necessary to execute the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1016.1">
      docker build
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1017.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1018.1">
      docker publish
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1019.1">
     commands so that we can generate the application package that will be copied to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1020.1">
      the image.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1021.1">
     Now that we understand the principles of generating a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1022.1">
      Dockerfile
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1023.1">
     file, it’s time to generate
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1024.1">
      an image.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-175">
    <a id="_idTextAnchor176">
    </a>
    <span class="koboSpan" id="kobo.1025.1">
     Generating a container image
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1026.1">
     To generate a Docker image, you
    </span>
    <a id="_idIndexMarker879">
    </a>
    <span class="koboSpan" id="kobo.1027.1">
     need to run the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1028.1">
      docker build
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1029.1">
     command.
    </span>
    <span class="koboSpan" id="kobo.1029.2">
     This command will execute the code described in the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1030.1">
       Dockerfile
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1031.1">
      file.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1032.1">
     To do this, open your terminal and, in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1033.1">
      UrlShortener
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1034.1">
     application directory, execute the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1035.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1036.1">
docker build -t urlshortener:1.0 .</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1037.1">
     The preceding command compiles the image, which will be tagged, using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1038.1">
      -t
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1039.1">
     parameter, with the name
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1040.1">
      urlshortener:1.0
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1041.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1041.2">
     The image tag works as the name of the image to be generated as is in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1042.1">
      &lt;
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1043.1">
       name_lower_case&gt;[:&lt;version&gt;]
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1044.1">
      form.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1045.1">
     The version is optional.
    </span>
    <span class="koboSpan" id="kobo.1045.2">
     If it isn’t entered, Docker will use the latest version.
    </span>
    <span class="koboSpan" id="kobo.1045.3">
     However, it’s good practice to define a version for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1046.1">
      the image.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1047.1">
     After defining the image tag, the context where the compilation process will be executed is informed of this.
    </span>
    <span class="koboSpan" id="kobo.1047.2">
     The context is defined by the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1048.1">
      .
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1049.1">
     parameter, which indicates the local directory that contains the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1050.1">
      Dockerfile
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1051.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.1051.2">
     It’s important to keep in mind that the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1052.1">
      build
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1053.1">
     command needs to know where the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1054.1">
      Dockerfile
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1055.1">
     file is located so that it can be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1056.1">
      executed correctly.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1057.1">
     Once the image generation process has run, run the following command to see the list of images on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1058.1">
      your computer:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1059.1">
docker images</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1060.1">
     After executing the preceding command, you’ll be able to view the list of images in your local container registry, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1061.1">
       Figure 10
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1062.1">
       .17
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1063.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer131">
     <span class="koboSpan" id="kobo.1064.1">
      <img alt="Figure 10.17 – List of Docker images in the local container registry" src="image/B21788_10_17.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1065.1">
     Figure 10.17 – List of Docker images in the local container registry
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1066.1">
     In this example, there are
    </span>
    <a id="_idIndexMarker880">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1067.1">
      three images:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1068.1">
       localhost/urlshortener:1.0
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1069.1">
      : This is the previously generated image that contains the application.
     </span>
     <span class="koboSpan" id="kobo.1069.2">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1070.1">
       localhost/
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1071.1">
      prefix before the image’s name represents the owner of the image – in this case, the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1072.1">
       local registry.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1073.1">
       mcr.microsoft.com/dotnet/sdk:8.0
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1074.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1075.1">
       mcr.microsoft.com/dotnet/aspnet:8.0
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1076.1">
      : These images represent the .NET SDK and .NET Runtime for compiling and running the application in a container, respectively.
     </span>
     <span class="koboSpan" id="kobo.1076.2">
      These images are automatically downloaded from Docker Hub.
     </span>
     <span class="koboSpan" id="kobo.1076.3">
      Note the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1077.1">
       mcr.microsoft.com/dotnet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1078.1">
      prefix, which refers to the owner of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1079.1">
       the images.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.1080.1">
     Additionally,
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1081.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1082.1">
      .17
     </span>
    </em>
    <span class="koboSpan" id="kobo.1083.1">
     shows the size of the images in MB.
    </span>
    <span class="koboSpan" id="kobo.1083.2">
     The application image is smaller than the other two.
    </span>
    <span class="koboSpan" id="kobo.1083.3">
     Containers must be optimized as they could affect the performance and startup of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1084.1">
      the application.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1085.1">
     Container images should be considered immutable – that is, each version is unique.
    </span>
    <span class="koboSpan" id="kobo.1085.2">
     This means that if there’s any change in the application, we must generate a new image with a different tag.
    </span>
    <span class="koboSpan" id="kobo.1085.3">
     It’s a best practice to follow this convention as it allows you to have control over the containers running on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1086.1">
      a server.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1087.1">
     With the image generated, it’s time to run a container and test
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1088.1">
      its operation.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-176">
    <a id="_idTextAnchor177">
    </a>
    <span class="koboSpan" id="kobo.1089.1">
     Running a Docker container
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1090.1">
     To run the Docker container from the
    </span>
    <a id="_idIndexMarker881">
    </a>
    <span class="koboSpan" id="kobo.1091.1">
     previously generated image, run the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1092.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1093.1">
docker run -d -p 8899:8080 localhost/urlshortener:1.0</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1094.1">
     Let’s take a closer look at
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1095.1">
      this command:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1096.1">
      It runs a new container from the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1097.1">
        localhost/urlshortener:1.0
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1098.1">
       image.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1099.1">
      It runs the container in detached mode (
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1100.1">
       -d
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1101.1">
      ), allowing it to run in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1102.1">
       the background.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1103.1">
      It maps port
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1104.1">
       8899
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1105.1">
      on the host to port
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1106.1">
       8080
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1107.1">
      inside the container (
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1108.1">
       -p 8899:8080
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1109.1">
      ).
     </span>
     <span class="koboSpan" id="kobo.1109.2">
      This makes the application run on port
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1110.1">
       8080
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1111.1">
      inside the container that’s accessible via port
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1112.1">
       8899
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1113.1">
      on the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1114.1">
       host machine.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.1115.1">
     The output of the successfully executed command will be a key that represents the container’s ID.
    </span>
    <span class="koboSpan" id="kobo.1115.2">
     To check whether the container is running, run the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1116.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1117.1">
docker ps</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1118.1">
     An output similar to the one shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1119.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1120.1">
      .18
     </span>
    </em>
    <span class="koboSpan" id="kobo.1121.1">
     will
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1122.1">
      be displayed:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer132">
     <span class="koboSpan" id="kobo.1123.1">
      <img alt="Figure 10.18 – Running containers" src="image/B21788_10_18.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1124.1">
     Figure 10.18 – Running containers
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1125.1">
     Now, open a browser
    </span>
    <a id="_idIndexMarker882">
    </a>
    <span class="koboSpan" id="kobo.1126.1">
     of your choice and go to
    </span>
    <a href="http://localhost:8899">
     <span class="No-Break">
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1127.1">
        http://localhost:8899
       </span>
      </strong>
     </span>
    </a>
    <span class="No-Break">
     <strong class="source-inline">
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1128.1">
      .
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1129.1">
     Connection string
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1130.1">
     If the application’s connection string has been configured for the database in Azure and you get a connection error when you access the application through the container, make sure you add your IP address, as presented in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1131.1">
      Configuring Azure SQL Server
     </span>
    </em>
    <span class="koboSpan" id="kobo.1132.1">
     section.
    </span>
    <span class="koboSpan" id="kobo.1132.2">
     You can also change the connection string by using environment variables in conjunction with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1133.1">
      docker run
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1134.1">
     command,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1135.1">
      as follows:
     </span>
    </span>
   </p>
   <p class="callout">
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1136.1">
      docker run -d -p 8899:8080 -e ConnectionStrings__DefaultConnection="Server=.;Database=UrlShortenerDB;user id=sa;
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1137.1">
       password=P4sword123;Encrypt=False;" localhost/urlshortener:1.0
      </span>
     </strong>
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1138.1">
     The preceding command contains the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1139.1">
      -e &lt;
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1140.1">
       EnvironmentVariable&gt;=&lt;value&gt;
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1141.1">
      parameter.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1142.1">
     We can run the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1143.1">
      docker run
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1144.1">
     command several times for the same image while changing the host port on which the container will run.
    </span>
    <span class="koboSpan" id="kobo.1144.2">
     For example, the following commands will run two new containers of the same application on ports
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1145.1">
      9900
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1146.1">
      and
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1147.1">
       9910
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1148.1">
      :
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1149.1">
docker run -d -p 9900:8080 localhost/urlshortener:1.0
docker run -d -p 9910:8080 localhost/urlshortener:1.0</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1150.1">
     Currently, three different containers contain the same application running in your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1151.1">
      local environment.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1152.1">
     To finish running the containers, execute the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1153.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1154.1">
docker stop &lt;container ID&gt;</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1155.1">
     You can obtain the container ID from the list of running containers by running the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1156.1">
      docker
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1157.1">
       ps
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1158.1">
      command.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1159.1">
     Understanding Docker principles and how to package your ASP.NET Core 9 application in a container is very important for the modern software development model.
    </span>
    <span class="koboSpan" id="kobo.1159.2">
     Containers offer consistency, portability, and efficiency, making them ideal for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1160.1">
      cloud-native applications.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1161.1">
     As we’ve learned, the
    </span>
    <a id="_idIndexMarker883">
    </a>
    <span class="koboSpan" id="kobo.1162.1">
     use of containers is related to components such as images, which are generated according to the runtime and the published application.
    </span>
    <span class="koboSpan" id="kobo.1162.2">
     Later, the image that’s been used is made available through a public or private container registry.
    </span>
    <span class="koboSpan" id="kobo.1162.3">
     Finally, we can run different instances of an application that’s been published in a container registry through the use of an image, thus generating an executed application called
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1163.1">
      a container.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1164.1">
     Next, we’ll learn how to automate the process of publishing applications in a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1165.1">
      cloud environment.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-177">
    <a id="_idTextAnchor178">
    </a>
    <span class="koboSpan" id="kobo.1166.1">
     Understanding the DevOps approach with CI/CD
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.1167.1">
     It’s common to talk about the DevOps culture in depth.
    </span>
    <span class="koboSpan" id="kobo.1167.2">
     Despite the term being a combination of two specific areas – that is,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1168.1">
      development
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1169.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1170.1">
      Dev
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1171.1">
     ) and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1172.1">
      operations
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1173.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1174.1">
      Ops
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1175.1">
     ) – this approach goes far beyond these
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1176.1">
      two teams.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1177.1">
     The DevOps culture
    </span>
    <a id="_idIndexMarker884">
    </a>
    <span class="koboSpan" id="kobo.1178.1">
     connects processes, people, and tools, all of which work together to generate value and provide continuous learning in the face of constant
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1179.1">
      market needs:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer133">
     <span class="koboSpan" id="kobo.1180.1">
      <img alt="Figure 10.19 – The DevOps culture cycle" src="image/B21788_10_19.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1181.1">
     Figure 10.19 – The DevOps culture cycle
    </span>
   </p>
   <p>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1182.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1183.1">
      .19
     </span>
    </em>
    <span class="koboSpan" id="kobo.1184.1">
     represents this continuous flow of collaboration in different aspects involving the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1185.1">
      DevOps culture.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1186.1">
     Among the practices suggested in the
    </span>
    <a id="_idIndexMarker885">
    </a>
    <span class="koboSpan" id="kobo.1187.1">
     DevOps culture, we have the CI/CD process, making development teams agile, eliminating dependencies, minimizing errors, and enabling continuous evolution and learning
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1188.1">
      in teams.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1189.1">
     CI and CD processes are commonly called pipelines because they represent a set of sequential instructions that allow new pipes or tasks to be added and reorganized in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1190.1">
      this flow.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1191.1">
     Before we look at the pipeline development model, let’s understand the fundamentals of CI
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1192.1">
      and CD.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-178">
    <a id="_idTextAnchor179">
    </a>
    <span class="koboSpan" id="kobo.1193.1">
     CI
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1194.1">
     CI is a
    </span>
    <a id="_idIndexMarker886">
    </a>
    <span class="koboSpan" id="kobo.1195.1">
     development practice where developers regularly merge their code changes into a central repository, after which there are automated builds
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1196.1">
      and testing.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1197.1">
     Development teams are distributed remotely and require a central repository, usually based on Git.
    </span>
    <span class="koboSpan" id="kobo.1197.2">
     When new code is developed and changed, it’s synchronized or integrated into the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1198.1">
      local repository.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1199.1">
     This process occurs asynchronously – that is, each developer synchronizes their code version at a different time to other developers.
    </span>
    <span class="koboSpan" id="kobo.1199.2">
     Then, the CI pipeline is executed, where the main objective is to detect integration problems in advance and then frequently integrate code changes and check them through
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1200.1">
      automated tests.
     </span>
    </span>
   </p>
   <p>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1201.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1202.1">
      .20
     </span>
    </em>
    <span class="koboSpan" id="kobo.1203.1">
     shows a basic
    </span>
    <a id="_idIndexMarker887">
    </a>
    <span class="koboSpan" id="kobo.1204.1">
     CI
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1205.1">
      pipeline scenario:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer134">
     <span class="koboSpan" id="kobo.1206.1">
      <img alt="Figure 10.20 – The CI pipeline flow" src="image/B21788_10_20.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1207.1">
     Figure 10.20 – The CI pipeline flow
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1208.1">
     As we can see,
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1209.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1210.1">
      .20
     </span>
    </em>
    <span class="koboSpan" id="kobo.1211.1">
     presents
    </span>
    <a id="_idIndexMarker888">
    </a>
    <span class="koboSpan" id="kobo.1212.1">
     a flow that we’re already used to executing manually.
    </span>
    <span class="koboSpan" id="kobo.1212.2">
     Automating these processes brings
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1213.1">
      several benefits:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1214.1">
       Early error detection
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1215.1">
      : By integrating code changes frequently, CI helps us identify and resolve errors and integration issues early in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1216.1">
       development process.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1217.1">
       Improved code quality
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1218.1">
      : Automated tests are run on each integration, ensuring that code changes don’t break existing functionality and maintain
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1219.1">
       code quality.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1220.1">
       Faster feedback cycle
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1221.1">
      : Developers receive immediate feedback on their code changes, allowing them to fix issues immediately and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1222.1">
       iterate quickly.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1223.1">
       Improved collaboration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1224.1">
      : CI promotes collaboration between team members by integrating code changes from different developers into a shared repository, ensuring everyone is working with the latest
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1225.1">
       code base.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.1226.1">
     Another great benefit of the
    </span>
    <a id="_idIndexMarker889">
    </a>
    <span class="koboSpan" id="kobo.1227.1">
     CI process is the practice of performing a code review, which allows team members to analyze the code to be integrated and carry out reviews of good practices and whether unit tests have been written,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1228.1">
      for example.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1229.1">
     The code review approach generates constant learning.
    </span>
    <span class="koboSpan" id="kobo.1229.2">
     However, despite being done manually, it’s extremely powerful for the evolution of teams and has support from CI so that no revisions are made to code that presents compilation errors or test failures.
    </span>
    <span class="koboSpan" id="kobo.1229.3">
     It’s a constant flow of learning, allowing teams to be proactive before they publish any version of an application to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1230.1">
      production environments.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1231.1">
     Code review
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1232.1">
     A code review
    </span>
    <a id="_idIndexMarker890">
    </a>
    <span class="koboSpan" id="kobo.1233.1">
     is a human review process in which one or more developers review code written by another developer.
    </span>
    <span class="koboSpan" id="kobo.1233.2">
     To learn more about this approach, take a look at the following
    </span>
    <a id="_idIndexMarker891">
    </a>
    <span class="koboSpan" id="kobo.1234.1">
     GitHub
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1235.1">
      article:
     </span>
    </span>
    <a href="https://github.com/resources/articles/software-development/how-to-improve-code-with-code-reviews">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1236.1">
       https://github.com/resources/articles/software-development/how-to-improve-code-with-code-reviews
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1237.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1238.1">
     The CI pipeline is of great importance in the development flow as its main objective is to prepare an application package that follows the quality requirements defined by the development and business teams.
    </span>
    <span class="koboSpan" id="kobo.1238.2">
     As output, it delivers this package to the CD process, which executes the procedures for implementing this in one or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1239.1">
      more environments.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-179">
    <a id="_idTextAnchor180">
    </a>
    <span class="koboSpan" id="kobo.1240.1">
     CD
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1241.1">
     CD is the next step after
    </span>
    <a id="_idIndexMarker892">
    </a>
    <span class="koboSpan" id="kobo.1242.1">
     CI and automates the process of deploying applications to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1243.1">
      production environments.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1244.1">
     The CD pipeline
    </span>
    <a id="_idIndexMarker893">
    </a>
    <span class="koboSpan" id="kobo.1245.1">
     simulates what happens in CI, making it possible to add automated tests, among other processes, before the automatic deployment procedures are executed for new versions of applications in different environments, such as development, testing,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1246.1">
      and production.
     </span>
    </span>
   </p>
   <p>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1247.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1248.1">
      .21
     </span>
    </em>
    <span class="koboSpan" id="kobo.1249.1">
     shows the CD pipeline.
    </span>
    <span class="koboSpan" id="kobo.1249.2">
     It’s very similar to the one for CI, but it consists of different tasks
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1250.1">
      and processes:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer135">
     <span class="koboSpan" id="kobo.1251.1">
      <img alt="Figure 10.21 – The CD pipeline flow" src="image/B21788_10_21.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1252.1">
     Figure 10.21 – The CD pipeline flow
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1253.1">
     While the CI pipeline
    </span>
    <a id="_idIndexMarker894">
    </a>
    <span class="koboSpan" id="kobo.1254.1">
     generates a valid package based on the quality flow of the development process, the CD pipeline’s main objective is to obtain the package that’s been generated through the CI pipeline and distribute it in an on-premises or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1255.1">
      cloud environment.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1256.1">
     The CD pipeline brings the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1257.1">
      following benefits:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1258.1">
       Accelerated delivery
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1259.1">
      : CD enables
     </span>
     <a id="_idIndexMarker895">
     </a>
     <span class="koboSpan" id="kobo.1260.1">
      faster delivery of new features and bug fixes, reducing time to market and improving
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1261.1">
       customer satisfaction.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1262.1">
       Reduced deployment risk
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1263.1">
      : By deploying small, incremental changes, CD minimizes the risk associated with large,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1264.1">
       infrequent deployments.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1265.1">
       Consistent deployments
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1266.1">
      : Automated deployment processes ensure deployments are consistent and repeatable, reducing
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1267.1">
       human error.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1268.1">
       Improved reliability
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1269.1">
      : Continuous monitoring and automated rollback mechanisms increase the reliability of the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1270.1">
       deployment process.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.1271.1">
     Although the CD pipeline is an automated process, which means it’s capable of publishing new versions of an application in different environments automatically, it’s possible to establish approval flows where those responsible for each environment can choose whether they approve a deployment.
    </span>
    <span class="koboSpan" id="kobo.1271.2">
     The act of approval triggers the automatic deployment flow or cancels it, depending on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1272.1">
      the need.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1273.1">
     The approvals gate approach brings compliance benefits and allows teams to have full control of the deployment flow in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1274.1">
      certain environments.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1275.1">
     Review deployments
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1276.1">
     Depending on the delivery flow of each organization, there’s a need to review deployments, especially in production environments.
    </span>
    <span class="koboSpan" id="kobo.1276.2">
     This approach generates an automated communication process between the CD pipeline and reviewers.
    </span>
    <span class="koboSpan" id="kobo.1276.3">
     Tools such as GitHub, Azure DevOps, and GitLab, among others, have mechanisms that allow you to configure this approval flow.
    </span>
    <span class="koboSpan" id="kobo.1276.4">
     You can learn more about the deployment review process through GitHub Actions
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1277.1">
      at
     </span>
    </span>
    <a href="https://docs.github.com/en/actions/managing-workflow-runs/reviewing-deployments">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1278.1">
       https://docs.github.com/en/actions/managing-workflow-runs/reviewing-deployments
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1279.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1280.1">
     CI and CD are great approaches to automating processes so that our applications can be delivered to different environments constantly and with quality in mind.
    </span>
    <span class="koboSpan" id="kobo.1280.2">
     This is something that allows us to deliver new versions of applications several times on the same day, at the same time, and it helps us quickly provide corrections and rollbacks in those environments,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1281.1">
      if necessary.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1282.1">
     In the next section, we’ll implement a CI/CD flow using GitHub Actions and learn how to automatically publish a Docker image in a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1283.1">
      container registry.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-180">
    <a id="_idTextAnchor181">
    </a>
    <span class="koboSpan" id="kobo.1284.1">
     Automating with GitHub Actions
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1285.1">
     To demonstrate CI/CD in action, we’ll use GitHub Actions to automate the process of generating and publishing a Docker image from the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1286.1">
      UrlShortener
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1287.1">
     application.
    </span>
    <span class="koboSpan" id="kobo.1287.2">
     Make sure you’ve installed everything mentioned in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1288.1">
      Technical requirements
     </span>
    </em>
    <span class="koboSpan" id="kobo.1289.1">
     section so that you can take advantage of the steps
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1290.1">
      described here.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1291.1">
     To automate the process of including CI/CD, we’ll have to do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1292.1">
      the following:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1293.1">
      Configure secrets in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1294.1">
       GitHub repository.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1295.1">
      Create
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1296.1">
       GitHub Actions.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1297.1">
      Activate GitHub Actions with each push event that’s sent to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1298.1">
       the repository.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1299.1">
      Build a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1300.1">
       Docker image.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1301.1">
      Publish the created image to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1302.1">
       Docker Hub.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1303.1">
      Run the previously created Docker image on the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1304.1">
       local machine.
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.1305.1">
     Before you start automating, you must understand the basics of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1306.1">
      GitHub Actions.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1307.1">
     Understanding the fundamentals of GitHub Actions
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1308.1">
     GitHub Actions
    </span>
    <a id="_idIndexMarker896">
    </a>
    <span class="koboSpan" id="kobo.1309.1">
     is an automation tool that’s built into GitHub that lets you create, manage, and run workflows directly in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1310.1">
      your repository.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1311.1">
     Actions, as it’s commonly known, can be triggered by various events, such as code submission, pull request creation, or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1312.1">
      time triggers.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1313.1">
     GitHub Actions can be created using the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1314.1">
      YML/YAML
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1315.1">
     file structure
    </span>
    <a id="_idIndexMarker897">
    </a>
    <span class="koboSpan" id="kobo.1316.1">
     located in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1317.1">
      .github/workflows
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1318.1">
     directory of this book’s GitHub repository.
    </span>
    <span class="koboSpan" id="kobo.1318.2">
     The basic structure of a workflow is represented at a high level in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1319.1">
       Figure 10
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1320.1">
       .22
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1321.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer136">
     <span class="koboSpan" id="kobo.1322.1">
      <img alt="Figure 10.22 – The basic structure of GitHub Actions" src="image/B21788_10_22.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1323.1">
     Figure 10.22 – The basic structure of GitHub Actions
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1324.1">
     YAML files
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1325.1">
     A
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1326.1">
      YAML Ain’t Markup Language
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1327.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1328.1">
      YAML
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1329.1">
     ) file
    </span>
    <a id="_idIndexMarker898">
    </a>
    <span class="koboSpan" id="kobo.1330.1">
     is a human-readable data standard that’s commonly used for configuration files and exchanging data between programming languages with different data structures.
    </span>
    <span class="koboSpan" id="kobo.1330.2">
     YAML files use indentation to denote structure, making them easy to read and write.
    </span>
    <span class="koboSpan" id="kobo.1330.3">
     It’s often used in scenarios where configuration needs to be human-readable and easily parsed by machines, such as in CI/CD pipelines, cloud provisioning files, and application configuration settings.
    </span>
    <span class="koboSpan" id="kobo.1330.4">
     In the context of GitHub Actions, YAML files define workflows that automate processes such as building, testing, and deploying applications.
    </span>
    <span class="koboSpan" id="kobo.1330.5">
     To learn more,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1331.1">
      visit
     </span>
    </span>
    <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1332.1">
       https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1333.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1334.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1335.1">
      .22
     </span>
    </em>
    <span class="koboSpan" id="kobo.1336.1">
     shows the main
    </span>
    <a id="_idIndexMarker899">
    </a>
    <span class="koboSpan" id="kobo.1337.1">
     components that are part of the structure of GitHub Actions.
    </span>
    <span class="koboSpan" id="kobo.1337.2">
     Let’s take a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1338.1">
      closer look:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1339.1">
       workflow.yml
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1340.1">
      : A YAML file that defines
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1341.1">
       the workflow.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1342.1">
       on
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1343.1">
      : This specifies the events that trigger the workflow.
     </span>
     <span class="koboSpan" id="kobo.1343.2">
      Examples include
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1344.1">
       push
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1345.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1346.1">
       pull_request
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1347.1">
      ,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1348.1">
       and
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1349.1">
        schedule
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1350.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1351.1">
       jobs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1352.1">
      : Defines a set of jobs to be executed within
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1353.1">
       the workflow.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1354.1">
       build job
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1355.1">
      : A job named
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1356.1">
       build
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1357.1">
      running on
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1358.1">
       ubuntu-latest
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1359.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1359.2">
      Here,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1360.1">
       ubuntu-latest
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1361.1">
      is a type of agent or machine that will execute all the steps of a job.
     </span>
     <span class="koboSpan" id="kobo.1361.2">
      This machine is made available by
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1362.1">
       GitHub itself.
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.1363.1">
       This flow contains a series
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1364.1">
        of steps:
       </span>
      </span>
     </p>
     <ul>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.1365.1">
         Checkout code
        </span>
       </strong>
       <span class="koboSpan" id="kobo.1366.1">
        : Uses the
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1367.1">
          actions/checkout@v2
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.1368.1">
         action.
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.1369.1">
         Set up .NET Core
        </span>
       </strong>
       <span class="koboSpan" id="kobo.1370.1">
        : Uses the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.1371.1">
         actions/setup-dotnet@v2
        </span>
       </strong>
       <span class="koboSpan" id="kobo.1372.1">
        action with .NET
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.1373.1">
         version
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1374.1">
          '8.0.x'
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.1375.1">
         .
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.1376.1">
         Build project
        </span>
       </strong>
       <span class="koboSpan" id="kobo.1377.1">
        : Runs the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.1378.1">
         dotnet
        </span>
       </strong>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1379.1">
          build
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.1380.1">
         command.
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.1381.1">
         Run tests
        </span>
       </strong>
       <span class="koboSpan" id="kobo.1382.1">
        : Runs
       </span>
       <a id="_idIndexMarker900">
       </a>
       <span class="koboSpan" id="kobo.1383.1">
        the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.1384.1">
         dotnet
        </span>
       </strong>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1385.1">
          test
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.1386.1">
         command.
        </span>
       </span>
      </li>
     </ul>
    </li>
   </ul>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1387.1">
     GitHub-hosted runners
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1388.1">
     On GitHub, agents are called runners and are available for Windows, Linux,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1389.1">
      and macOS.
     </span>
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1390.1">
     Runners are a fundamental component for running GitHub Actions and are provisioned during a CI or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1391.1">
      CD pipeline.
     </span>
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1392.1">
     To learn more about
    </span>
    <a id="_idIndexMarker901">
    </a>
    <span class="koboSpan" id="kobo.1393.1">
     runners,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1394.1">
      visit
     </span>
    </span>
    <a href="https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners/about-github-hosted-runners">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1395.1">
       https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners/about-github-hosted-runners
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1396.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1397.1">
     With GitHub Actions, we have a multitude of possibilities for automating processes that aren’t restricted to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1398.1">
      CI/CD contexts.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1399.1">
     Now that we know how GitHub Actions works, let’s start by configuring our repository and creating our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1400.1">
      first actions.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1401.1">
     Preparing a GitHub repository
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1402.1">
     To automate the
    </span>
    <a id="_idIndexMarker902">
    </a>
    <span class="koboSpan" id="kobo.1403.1">
     process of creating and publishing a Docker image through GitHub Actions, it’s important to understand how the pipeline we’ll create works, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1404.1">
       Figure 10
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1405.1">
       .23
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1406.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer137">
     <span class="koboSpan" id="kobo.1407.1">
      <img alt="Figure 10.23 – Example of the GitHub Actions flow integrated with Docker Hub" src="image/B21788_10_23.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1408.1">
     Figure 10.23 – Example of the GitHub Actions flow integrated with Docker Hub
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1409.1">
     Previously, we learned about the fundamentals of the container strategy when using Docker and used Docker’s build multi-stage approach to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1410.1">
      implement it.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1411.1">
     This multi-stage approach has all the necessary steps to generate an application package and, in the end, generate an image that’s ready to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1412.1">
      be used.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1413.1">
     As shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1414.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1415.1">
      .23
     </span>
    </em>
    <span class="koboSpan" id="kobo.1416.1">
     , during the pipeline flow, some calls to Docker Hub are necessary.
    </span>
    <span class="koboSpan" id="kobo.1416.2">
     This is the public container registry that we used when we packaged the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1417.1">
      URLShortener
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1418.1">
     application.
    </span>
    <span class="koboSpan" id="kobo.1418.2">
     However, we can generate a local image without the need to communicate with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1419.1">
      Docker Hub.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1420.1">
     To be able to publish a Docker image to a public or private container registry, authentication must
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1421.1">
      be performed.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1422.1">
     In the case of Docker Hub, this authentication takes place using a username and password.
    </span>
    <span class="koboSpan" id="kobo.1422.2">
     Since this information is sensitive, we shouldn’t add it directly to a GitHub Actions YAML file, especially if the repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1423.1">
      is public.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1424.1">
     The best practice is to
    </span>
    <a id="_idIndexMarker903">
    </a>
    <span class="koboSpan" id="kobo.1425.1">
     manage these credentials securely using Secrets.
    </span>
    <span class="koboSpan" id="kobo.1425.2">
     So, follow these steps to add the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1426.1">
      necessary secrets:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1427.1">
      Access your
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1428.1">
       ASP.NET-8.0-Core-Essentials
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1429.1">
      repository via your GitHub user.
     </span>
     <span class="koboSpan" id="kobo.1429.2">
      This should have been prepared as per the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1430.1">
       Technical
      </span>
     </em>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.1431.1">
        requirements
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1432.1">
       section.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1433.1">
      Then, access the
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1434.1">
        Settings
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1435.1">
       tab.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1436.1">
      From the side menu, access
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1437.1">
       Secrets and variables
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1438.1">
      |
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1439.1">
        Actions
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1440.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1441.1">
      In the center of the screen, click the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1442.1">
       New repository
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1443.1">
        secret
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1444.1">
       button.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1445.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1446.1">
       Name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1447.1">
      field
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1448.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1449.1">
        DOCKER_HUB_USERNAME
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1450.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1451.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1452.1">
       Secret
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1453.1">
      field, add your Docker
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1454.1">
       Hub user.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1455.1">
      Click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1456.1">
       Add
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1457.1">
        Secret
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1458.1">
       button.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1459.1">
      Again, click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1460.1">
       New repository
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1461.1">
        secret
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1462.1">
       button.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1463.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1464.1">
       Name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1465.1">
      field
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1466.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1467.1">
        DOCKER_HUB_PASSWORD
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1468.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1469.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1470.1">
       Secret
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1471.1">
      field with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1472.1">
       your password.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1473.1">
      Click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1474.1">
       Add
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1475.1">
        Secret
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1476.1">
       button.
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.1477.1">
     Secrets will be accessed securely while we’re running GitHub Actions.
    </span>
    <span class="koboSpan" id="kobo.1477.2">
     Now, let’s create the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1478.1">
      CI/CD pipeline.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1479.1">
     Creating the CI/CD pipeline
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1480.1">
     So far, we’ve learned
    </span>
    <a id="_idIndexMarker904">
    </a>
    <span class="koboSpan" id="kobo.1481.1">
     how to manage Docker Hub credentials securely, something we’ll need to do so that we can authenticate through the pipeline and submit the newly
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1482.1">
      generated image.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1483.1">
     Still in the GitHub repository, access the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1484.1">
      Actions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1485.1">
     tab.
    </span>
    <span class="koboSpan" id="kobo.1485.2">
     As shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1486.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1487.1">
      .24
     </span>
    </em>
    <span class="koboSpan" id="kobo.1488.1">
     , there are several readymade pipeline templates that suit different types of applications and are a great starting point for creating
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1489.1">
      a pipeline:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer138">
     <span class="koboSpan" id="kobo.1490.1">
      <img alt="Figure 10.24 – GitHub Actions templates screen" src="image/B21788_10_24.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1491.1">
     Figure 10.24 – GitHub Actions templates screen
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1492.1">
     For this example, we’ll
    </span>
    <a id="_idIndexMarker905">
    </a>
    <span class="koboSpan" id="kobo.1493.1">
     click on the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1494.1">
      set up a workflow yourself
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1495.1">
     link, as highlighted in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1496.1">
       Figure 10
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1497.1">
       .24
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1498.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1499.1">
     You’ll see an editor and a list of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1500.1">
      Featured Actions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1501.1">
     , as well as the file’s name, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1502.1">
       Figure 10
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1503.1">
       .25
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1504.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer139">
     <span class="koboSpan" id="kobo.1505.1">
      <img alt="Figure 10.2﻿5 – GitHub Actions editor" src="image/B21788_10_25.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1506.1">
     Figure 10.25 – GitHub Actions editor
    </span>
   </p>
   <p>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1507.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1508.1">
      .25
     </span>
    </em>
    <span class="koboSpan" id="kobo.1509.1">
     shows three important
    </span>
    <a id="_idIndexMarker906">
    </a>
    <span class="koboSpan" id="kobo.1510.1">
     areas of the GitHub
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1511.1">
      Actions editor:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1512.1">
       A
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1513.1">
      : This is where you can define the filename.
     </span>
     <span class="koboSpan" id="kobo.1513.2">
      Note the suggested directory structure.
     </span>
     <span class="koboSpan" id="kobo.1513.3">
      We’ll set the filename
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1514.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1515.1">
        cicd-pipeline.yml
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1516.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1517.1">
       B
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1518.1">
      : This is where we’ll add the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1519.1">
       pipeline code.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1520.1">
       C
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1521.1">
      : The pipeline consists of tasks, called actions.
     </span>
     <span class="koboSpan" id="kobo.1521.2">
      These actions are abstractions for executing tasks related to a certain technology.
     </span>
     <span class="koboSpan" id="kobo.1521.3">
      The technical community shares different types of custom actions that we
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1522.1">
       can use.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.1523.1">
     Add the
    </span>
    <a id="_idIndexMarker907">
    </a>
    <span class="koboSpan" id="kobo.1524.1">
     following code to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1525.1">
      pipeline editor:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.1526.1">
name: CI/CD Pipeline
</span><strong class="bold"><span class="koboSpan" id="kobo.1527.1">on:</span></strong><span class="koboSpan" id="kobo.1528.1">
  push:
    branches:
      - main
</span><strong class="bold"><span class="koboSpan" id="kobo.1529.1">jobs:</span></strong><span class="koboSpan" id="kobo.1530.1">
  </span><strong class="bold"><span class="koboSpan" id="kobo.1531.1">build-and-deploy:</span></strong><span class="koboSpan" id="kobo.1532.1">
    name: Build and deploy
    runs-on: ubuntu-latest
    </span><strong class="bold"><span class="koboSpan" id="kobo.1533.1">steps:</span></strong><span class="koboSpan" id="kobo.1534.1">
    - name: Checkout code
      </span><strong class="bold"><span class="koboSpan" id="kobo.1535.1">uses: actions/checkout@v4.1.7</span></strong><span class="koboSpan" id="kobo.1536.1">
    - </span><strong class="bold"><span class="koboSpan" id="kobo.1537.1">name: Build and publish Docker image</span></strong><span class="koboSpan" id="kobo.1538.1">
      run: |
        </span><strong class="bold"><span class="koboSpan" id="kobo.1539.1">docker build -t ${{ secrets.DOCKER_HUB_USERNAME }}</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1540.1">          /urlshortener:latest .</span></strong><span class="koboSpan" id="kobo.1541.1">
        </span><strong class="bold"><span class="koboSpan" id="kobo.1542.1">echo ${{ secrets.DOCKER_HUB_PASSWORD }} |</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1543.1">          docker login -u ${{ secrets</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1544.1">          .DOCKER_HUB_USERNAME }} --password-stdin</span></strong><span class="koboSpan" id="kobo.1545.1">
        </span><strong class="bold"><span class="koboSpan" id="kobo.1546.1">docker push</span></strong><span class="koboSpan" id="kobo.1547.1"> ${{ secrets.DOCKER_HUB_USERNAME }}
          /urlshortener:latest
      </span><strong class="bold"><span class="koboSpan" id="kobo.1548.1">working-directory: ./Chapter-10/UrlShortener</span></strong></pre>
   <p>
    <span class="koboSpan" id="kobo.1549.1">
     The hierarchical
    </span>
    <a id="_idIndexMarker908">
    </a>
    <span class="koboSpan" id="kobo.1550.1">
     structure of YAML files is created using spaces.
    </span>
    <span class="koboSpan" id="kobo.1550.2">
     Therefore, nested elements define the hierarchy.
    </span>
    <span class="koboSpan" id="kobo.1550.3">
     If these spaces aren’t respected, the file won’t be valid.
    </span>
    <span class="koboSpan" id="kobo.1550.4">
     Let’s consider using two spaces for each item in the hierarchy, as shown in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1551.1">
      following example:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.1552.1">
on:
</span><strong class="bold"><span class="koboSpan" id="kobo.1553.1">&lt;space&gt;&lt;space&gt;</span></strong><span class="koboSpan" id="kobo.1554.1">push:
</span><strong class="bold"><span class="koboSpan" id="kobo.1555.1">&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;</span></strong><span class="koboSpan" id="kobo.1556.1">branches:
</span><strong class="bold"><span class="koboSpan" id="kobo.1557.1">&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;</span></strong><span class="koboSpan" id="kobo.1558.1">-main</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1559.1">
     Let’s take a closer look at this
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1560.1">
      pipeline code:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1561.1">
       on
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1562.1">
      : This defines how the action will be executed.
     </span>
     <span class="koboSpan" id="kobo.1562.2">
      In this case, every time there is an update or push in the main branch, this action will be triggered, executing the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1563.1">
       CI pipeline.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1564.1">
       Jobs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1565.1">
      : Jobs are processes that are executed sequentially.
     </span>
     <span class="koboSpan" id="kobo.1565.2">
      There might be jobs for
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1566.1">
       build
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1567.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1568.1">
       test
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1569.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1570.1">
       generate-package
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1571.1">
      , and more.
     </span>
     <span class="koboSpan" id="kobo.1571.2">
      Using
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1572.1">
       Jobs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1573.1">
      allows us to have well-defined steps and dependencies between steps, thus creating the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1574.1">
       pipeline flow.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1575.1">
       build-and-deploy
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1576.1">
      : This is the definition for a job named
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1577.1">
       build-and-deloy
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1578.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1578.2">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1579.1">
       name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1580.1">
      parameter produces a more user-friendly description during pipeline execution, but the job’s name can be referenced in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1581.1">
       pipeline flow.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1582.1">
       Steps
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1583.1">
      : Steps are the tasks or actions that are performed in each Job.
     </span>
     <span class="koboSpan" id="kobo.1583.2">
      For this example, only two tasks need to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1584.1">
       be performed.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1585.1">
       uses: actions/checkout@v4.1.7
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1586.1">
      : This is a native GitHub action that aims to clone the repository.
     </span>
     <span class="koboSpan" id="kobo.1586.2">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1587.1">
       checkout
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1588.1">
      action is necessary since runners are created on demand and don’t have the application’s
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1589.1">
       source code.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1590.1">
       name: Build and publish Docker image
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1591.1">
      : Here, we’re executing an inline action where we define a script to build and publish the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1592.1">
       Docker image.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1593.1">
       docker build -t ${{ secrets.DOCKER_HUB_USERNAME }} /urlshortener:latest .
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1594.1">
      : This script builds the Docker image.
     </span>
     <span class="koboSpan" id="kobo.1594.2">
      Note the use of the secret containing the Docker Hub username.
     </span>
     <span class="koboSpan" id="kobo.1594.3">
      This is necessary so that we can tag the image with its owner – that is, the Docker Hub username.
     </span>
     <span class="koboSpan" id="kobo.1594.4">
      We’re using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1595.1">
       latest
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1596.1">
      label here to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1597.1">
       facilitate understanding.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1598.1">
       echo ${{ secrets.DOCKER_HUB_PASSWORD }} | docker login -u ${{ secrets.DOCKER_HUB_USERNAME }} --password-stdin
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1599.1">
      : This command is executed in a Linux bash shell, which allows us to combine commands and
     </span>
     <a id="_idIndexMarker909">
     </a>
     <span class="koboSpan" id="kobo.1600.1">
      execute other commands by obtaining input and output from previously executed commands.
     </span>
     <span class="koboSpan" id="kobo.1600.2">
      In this case, we’re writing the secret that contains the Docker Hub user’s password and sending the output as a parameter to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1601.1">
       docker login
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1602.1">
      command.
     </span>
     <span class="koboSpan" id="kobo.1602.2">
      This way, the secret won’t be exposed in the pipeline execution log.
     </span>
     <span class="koboSpan" id="kobo.1602.3">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1603.1">
       docker login
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1604.1">
      command is required for publishing new versions
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1605.1">
       of images.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1606.1">
       working-directory: ./Chapter-10/UrlShortener
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1607.1">
      : The directory containing the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1608.1">
        Dockerfile
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1609.1">
       file.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1610.1">
       docker push
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1611.1">
      : The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1612.1">
       docker push
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1613.1">
      command submits the previously generated image to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1614.1">
       Docker Hub.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.1615.1">
     With this, the pipeline has been configured and contains both the CI and CD pipelines, where a new version of the Docker image is published at the end of the pipeline.
    </span>
    <span class="koboSpan" id="kobo.1615.2">
     At this point, it’s time to run the created
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1616.1">
      GitHub action.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1617.1">
     Running the CI/CD pipeline
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1618.1">
     In the pipeline
    </span>
    <a id="_idIndexMarker910">
    </a>
    <span class="koboSpan" id="kobo.1619.1">
     editor, click the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1620.1">
      Commit Changes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1621.1">
     button.
    </span>
    <span class="koboSpan" id="kobo.1621.2">
     You’ll be taken to a new page where you must click
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1622.1">
      Commit Changes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1623.1">
     once more.
    </span>
    <span class="koboSpan" id="kobo.1623.2">
     This is necessary since we’re creating a new file in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1624.1">
      the repository.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1625.1">
     When you commit these changes, the pipeline will be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1626.1">
      triggered automatically.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1627.1">
     Click on the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1628.1">
      Actions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1629.1">
     tab; you’ll see the pipeline’s execution, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1630.1">
       Figure 10
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1631.1">
       .26
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1632.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer140">
     <span class="koboSpan" id="kobo.1633.1">
      <img alt="Figure 10.26 – Running the GitHub action" src="image/B21788_10_26.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1634.1">
     Figure 10.26 – Running the GitHub action
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1635.1">
     After running the pipeline, the new image will be generated in Docker Hub, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1636.1">
       Figure 10
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1637.1">
       .27
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1638.1">
      :
     </span>
    </span>
   </p>
   <p class="IMG---Figure">
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer141">
     <span class="koboSpan" id="kobo.1639.1">
      <img alt="Figure 10.27 – Container image published on Docker Hub by GitHub Actions" src="image/B21788_10_27.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1640.1">
     Figure 10.27 – Container image published on Docker Hub by GitHub Actions
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1641.1">
     To test the new image on your local machine, run the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1642.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1643.1">
docker run -d -p 7777:8080 -e ConnectionStrings__DefaultConnection="&lt;Your Connection String&gt;" &lt;your username&gt;/urlshortener:latest</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1644.1">
     The new image will be
    </span>
    <a id="_idIndexMarker911">
    </a>
    <span class="koboSpan" id="kobo.1645.1">
     downloaded, which means your application can be run on your local machine
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1646.1">
      at
     </span>
    </span>
    <span class="No-Break">
     <a href="http://localhost:7777">
      <span class="koboSpan" id="kobo.1647.1">
       http://localhost:7777
      </span>
     </a>
     <strong class="source-inline">
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1648.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1649.1">
     As we’ve learned, GitHub Actions can automate tasks in environments for the purpose of CD.
    </span>
    <span class="koboSpan" id="kobo.1649.2">
     This brings agility and consistency and allows teams to act quickly in the face of the constant changes demanded by
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1650.1">
      the market.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1651.1">
     At this point, any changes that are made to your repository and submitted to GitHub will automatically generate a new version of the container for your Docker
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1652.1">
      Hub user.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1653.1">
     GitHub Actions has several applications and, together with solutions developed in ASP.NET Core 9, it’s a powerful tool for creating
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1654.1">
      high-quality applications.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1655.1">
     In this section, we learned about the fundamentals of working in a continuous flow of value delivery.
    </span>
    <span class="koboSpan" id="kobo.1655.2">
     We’ll explore how to attain a cloud-native application development mindset in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1656.1">
      next chapter.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-181">
    <a id="_idTextAnchor182">
    </a>
    <span class="koboSpan" id="kobo.1657.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.1658.1">
     In this chapter, we learned how to publish ASP.NET Core 9 applications and generate a publishing package using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1659.1">
      dotnet
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1660.1">
     CLI tool.
    </span>
    <span class="koboSpan" id="kobo.1660.2">
     Furthermore, we learned how to publish an application in an Azure cloud environment and explored the fundamentals of Docker’s container strategy.
    </span>
    <span class="koboSpan" id="kobo.1660.3">
     Using the knowledge we’d acquired, we were able to learn how value delivery flows through DevOps practices such as CI and CD and benefits from automated processes via GitHub Actions.
    </span>
    <span class="koboSpan" id="kobo.1660.4">
     All the knowledge we’ve acquired in this chapter forms the basis for the next chapter, where we’ll learn about cloud-native development with ASP.NET
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1661.1">
      Core 9.
     </span>
    </span>
   </p>
  </div>
 </body></html>