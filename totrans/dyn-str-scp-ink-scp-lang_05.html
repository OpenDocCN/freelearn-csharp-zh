<html><head></head><body><div><div><h1 id="_idParaDest-63"><em class="italic"><a id="_idTextAnchor062"/>Chapter 4</em>: Variables, Lists, and Functions</h1>
			<p>This chapter builds on multiple concepts that were introduced in <a href="B17597_02_Final_PG_ePub.xhtml#_idTextAnchor031"><em class="italic">Chapter 2</em></a><em class="italic">,</em> <em class="italic">Knots, Diverts, and Looping Patterns</em>. In the first topic, we will examine how the keyword <code>VAR</code> works with a single value in ink, and how it can be combined with <code>LIST</code> keyword.</p>
			<p>In ink, we can group variables into a concept called a list. We will also examine how to create and change the values that are part of a list. We will then review when they are best used in a project and situations where multiple, single variables might work better. This discussion will move us on to the next topic, where we will look at working with functions.</p>
			<p>Values that are part of a list can be changed by other concepts called <strong class="bold">functions</strong>. In the third topic, we will <em class="italic">call</em> some of the built-in functions to work with different list values. These will allow us to perform actions across a list, such as determining the number of entries or picking one out at random. Working with functions will help us prepare for the next step, which is creating functions.</p>
			<p>In the last topic, we will explore how to create our functions in ink. As we will see, functions allow us to define small tasks or series of actions we can use multiple times by calling the created function. Functions, as we will learn, are special forms of <strong class="bold">knots</strong> in ink. This means we can send data to a function as well as a knot. However, only functions can return data.</p>
			<p>In this chapter, we will cover the following main topics:</p>
			<ul>
				<li>Storing values using <code>VAR</code></li>
				<li>Working with <code>LIST </code></li>
				<li>Calling functions </li>
				<li>Making new functions and calling knots</li>
			</ul>
			<h1 id="_idParaDest-64"><a id="_idTextAnchor063"/>Technical requirements</h1>
			<p>The examples used in this chapter, in <code>*.ink</code> files, can be found online on GitHub: <a href="https://github.com/PacktPublishing/Dynamic-Story-Scripting-with-the-ink-Scripting-Language/tree/main/Chapter4">https://github.com/PacktPublishing/Dynamic-Story-Scripting-with-the-ink-Scripting-Language/tree/main/Chapter4</a>.</p>
			<h1 id="_idParaDest-65"><a id="_idTextAnchor064"/>Storing values using VAR</h1>
			<p>In <a href="B17597_02_Final_PG_ePub.xhtml#_idTextAnchor031"><em class="italic">Chapter 2</em></a>, <em class="italic">Knots, Diverts, and Looping Patterns</em>, variables were introduced as a part of using labeled options within the weaves of looping structures in ink. By creating a label, an option <a id="_idIndexMarker124"/>could record whether it had been shown before. This allowed us to keep track of the number of loops within a knot easily. Within ink, labeled <a id="_idIndexMarker125"/>options are one form of a more general concept for storing and changing any kind of value. This more general form uses a special keyword: <strong class="bold">VAR</strong>.</p>
			<p>The <code>VAR</code> keyword creates a variable that's capable of storing different types of data. Variables created <a id="_idIndexMarker126"/>with the <code>VAR</code> keyword can store numbers (including decimal values), <code>true</code> or <code>false</code> values), and <a id="_idIndexMarker128"/>even diverts. Variables created using the <code>VAR</code> keyword are also <em class="italic">global</em>: they can be accessed by any code that is part of the overall project.</p>
			<p>Variable names that use the <code>VAR</code> keyword in ink follow the same rules as that of knots and stitches:</p>
			<ul>
				<li>They can contain numbers.</li>
				<li>They can contain uppercase and lowercase letters.</li>
				<li>The only special symbol that's allowed is an underscore.</li>
			</ul>
			<p>Like the naming conventions for knots and stitches, an underscore is often used between words within the name of the variable:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 1 (Example1.ink):</p>
			<pre>VAR reader_name = "Dan"</pre>
			<p>Variables are given values by an operation called <code>=</code>) to assign the <a id="_idIndexMarker129"/>variable the value following the sign on the same line. It is common to include a <a id="_idIndexMarker130"/>single space between the name of the <a id="_idIndexMarker131"/>variable, the equals sign (<code>=</code>), and the value being assigned to the variable.</p>
			<p>There is one explicit rule that must always be followed when using the <code>VAR</code> keyword and assigning a variable its initial value: whatever the value is, it must be static. In ink, this means that the first assignment of any variable cannot be a combination of other, existing values or the result of code performing mathematical operations.</p>
			<p>Once created, however, the value of the variable can be changed, but the initial assignment must always exist first and not be the result of any computation.</p>
			<p>In this topic, we will learn how to show and change variable values. Because alternatives (covered in <a href="B17597_03_Final_PG_ePub.xhtml#_idTextAnchor048"><em class="italic">Chapter 3</em></a>, <em class="italic">Sequences, Cycles, and Shuffling Text</em>) produce values, we will also explore how to save what they produce and use that value as part of additional code.</p>
			<h2 id="_idParaDest-66"><a id="_idTextAnchor065"/>Showing variables</h2>
			<p>The use of opening, <code>{</code>, and closing, <code>}</code>, curly brackets in ink signals the use of code. When combined with <a id="_idIndexMarker132"/>the name of a variable, ink will substitute the value of the variable as part of the surrounding text. This allows an author to use variables as part of the text and have ink switch the name of the variable with its value in its final output:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 2 (Example2.ink):</p>
			<pre>VAR reader_name = "Dan"
The name of the reader is {reader_name}.</pre>
			<p>When the code in <em class="italic">Example 2</em> is run, ink creates a variable named <code>reader_name</code>. Next, it sets the variable to the value of <code>"Dan"</code>. When it encounters the text, ink understands that the curly brackets are code and switches the name of the variable for its value:</p>
			<div><div><img src="img/Figure_4.1_B17597.jpg" alt="Figure 4.1 – Screenshot of ink's output for Example 2&#13;&#10;" width="532" height="134"/>
				</div>
			</div>
			<p class="figure-caption">Figure 4.1 – Screenshot of ink's output for Example 2</p>
			<p>The use of curly brackets signals the use of <em class="italic">any</em> code in ink. This means that mathematical <a id="_idIndexMarker133"/>operations can also be performed inside curly brackets on variables. ink will substitute the resulting value as part of the final output, as shown in the following example:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 3 (Example3.ink):</p>
			<pre>VAR first_variable = 2
VAR second_variable = 2
Adding the values of the two variables together produces: 
  {first_variable + second_variable}.</pre>
			<p>In <em class="italic">Example 3</em>, there are two variables. Each holds a separate, numerical value. When ink encounters the use of curly brackets, it substitutes the value of each variable with its name. Next, because the curly brackets also contain the addition symbol, ink adds the two numbers together:</p>
			<div><div><img src="img/Figure_4.2_B17597.jpg" alt="Figure 4.2 – Screenshot of ink's output for Example 3&#13;&#10;" width="663" height="108"/>
				</div>
			</div>
			<p class="figure-caption">Figure 4.2 – Screenshot of ink's output for Example 3</p>
			<p>Depending on the types of data involved, mathematical operations may not always produce the expected <a id="_idIndexMarker134"/>output based on experiences with other programming and scripting languages. For example, operations such as addition (using the plus symbol, <code>+</code>), subtraction (using the hyphen, <code>-</code>), multiplication (using the asterisk, <code>*</code>), and division (using the forward slash, <code>/</code>) will all work on numerical values:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 4 (Example4.ink):</p>
			<pre>VAR number_two = 2
2 * 2 = {number_two * 2}
2 + 3 = {number_two + 3}
6 / 2 = {6 / number_two}
9 - 2 = {9 - number_two}</pre>
			<p>Using mathematical operations with numerical and string values will produce errors. The only valid way to use <a id="_idIndexMarker135"/>mathematic symbols with string values is to use the plus symbol (<code>+</code>). This performs the <strong class="bold">concatenation</strong> operation: when a numerical or string value is <em class="italic">added</em> to an existing string value, it produces a new string value, as shown in the following example:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 5 (Example5.ink):</p>
			<pre>VAR example_string = "Hi"
Perform concatenation: {example_string + 3}</pre>
			<p>When the code in <em class="italic">Example 5</em> is run, ink creates a variable with a string value. However, when it encounters text and curly brackets, it does not perform mathematics. Instead, it <em class="italic">concatenates</em> the value of the <code>example_string</code> variable with the number <code>3</code>. This produces a combination of both values in its output:</p>
			<div><div><img src="img/Figure_4.3_B17597.jpg" alt="Figure 4.3 – Screenshot of ink's output for Example 5" width="529" height="114"/>
				</div>
			</div>
			<p class="figure-caption">Figure 4.3 – Screenshot of ink's output for Example 5</p>
			<p>Let's now move to the next part and understand how to update variables.</p>
			<h2 id="_idParaDest-67"><a id="_idTextAnchor066"/>Updating variables</h2>
			<p>Variables can change values. Once a variable is created in ink using the <code>VAR</code> keyword, it can be accessed and its value can be changed at any point within the same code. However, while ink <a id="_idIndexMarker136"/>understands that the initial assignment of a variable must be separate from text, we must use a special symbol when changing the value of a variable: a tilde (<code>~</code>). For example, we can create a variable using the <code>VAR</code> keyword and then change its value later in the same code:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 6 (Example6.ink):</p>
			<pre>VAR reader_name = "Dan"
The reader's name is {reader_name}.
~ reader_name = "Jesse"
The reader's name is now {reader_name}.</pre>
			<p>If a line of code starts with a tilde (<code>~</code>), this lets ink know that some type of code will occur on this single line. For example, when an initial value is assigned to the variable, ink understands something code-related will be following the tilde (<code>~</code>).</p>
			<p>We can create variables using the <code>VAR</code> keyword and update them with code lines starting with a tilde (<code>~</code>). However, as we saw in <a href="B17597_03_Final_PG_ePub.xhtml#_idTextAnchor048"><em class="italic">Chapter 3</em></a>, <em class="italic">Sequences, Cycles, and Shuffling Text</em>, <strong class="bold">alternatives</strong> allow us to generate a value from a set. As we will see in the next section, we can save the generated value in variables and use it in later parts of the same code.</p>
			<h2 id="_idParaDest-68"><a id="_idTextAnchor067"/>Storing the current values of alternatives</h2>
			<p><strong class="bold">Alternatives</strong> were introduced in <a href="B17597_03_Final_PG_ePub.xhtml#_idTextAnchor048"><em class="italic">Chapter 3</em></a>, <em class="italic">Sequences, Cycles, and Shuffling Text</em>. They are used to <a id="_idIndexMarker137"/>generate <em class="italic">alternative</em> text content based on the number of times they had been accessed <a id="_idIndexMarker138"/>during looping structures. Because alternatives generate text, their output can also be saved in variables:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 7 (Example7.ink):</p>
			<pre>VAR day_of_week = ""
~ day_of_week = "{~Monday|Tuesday|Wednesday|Thursday
    |Friday|Saturday|Sunday}"
-&gt; calendar
== calendar
Today is {day_of_week}!
-&gt; DONE</pre>
			<p>Instead of needing to rerun an alternative to generate new text, a <strong class="bold">shuffle</strong> can have its output saved <a id="_idIndexMarker139"/>for future use. This allows the value to be incorporated into other code without the need to recreate the alternative.</p>
			<p>Alternatives generate content when they're run. This means that they cannot be used as part of the initial assignment of a variable in ink. The reason for this is that ink handles the creation of variables <em class="italic">before</em> it runs any alternatives. The generated values of any alternative do not exist when variables are created initially. Because of this, a common pattern is to create a variable with an initial value and then overwrite this value with the generated output of an alternative later in the code.</p>
			<p>In <em class="italic">Example 7</em>, quotation marks enclose the use of a shuffle alternative to create a string value. When run, the shuffle will generate a value that will then become a string, based on the quotation marks around it. As a string value, it will then be able to be used with the assignment line with the tilde (<code>~</code>).</p>
			<p>Saving the output of an alternative in ink always requires at least two lines of code. The first is used to <a id="_idIndexMarker140"/>create a variable using the <code>VAR</code> keyword with its initial <a id="_idIndexMarker141"/>value, while the second is reassigned its value to what is generated by the alternative when the code is run. As was explained in the introduction to the <em class="italic">Storing values using VAR</em> topic, the explicit rule for using the <code>VAR</code> keyword is that the initial value must exist when the variable is created. The output that's produced by an alternative is considered dynamic, and the initial value of a variable using the <code>VAR</code> keyword must be static.</p>
			<p>In this topic, we worked with single values. We started by creating new variables using the <code>VAR</code> keyword and then learned how to update their values with lines beginning with tildes (<code>~</code>). We also explored how the output from an alternative can be saved, but that the variable must be set to an initial value and then updated to the dynamic output produced by the alternative. In the next topic, we will build on the use of variables and create a collection of them using a new keyword called <code>LIST</code>.</p>
			<h1 id="_idParaDest-69"><a id="_idTextAnchor068"/>Working with LIST</h1>
			<p>Each use of the <code>VAR</code> keyword creates a single value. In many projects, a handful of single values <a id="_idIndexMarker142"/>would be enough to track anything needed while running. However, there are contexts where a set of values might be needed. For these cases, ink has <a id="_idIndexMarker143"/>a special keyword called <strong class="bold">LIST</strong> that creates a <em class="italic">list</em> of possible values. </p>
			<p>The values of a list can be thought of as possible <em class="italic">states</em> of its variable. For example, for a <code>LIST</code> named <code>days_of_week</code>, possible values might be the 7 days of the week. These could be defined with <code>LIST</code> itself and then assigned as needed instead of the need to use string values for each day of the week.</p>
			<p>In ink, a list defines a new collection of values within the context of the project. Once created, the values of a list can act as possible values for other variables using the <code>VAR</code> keyword.</p>
			<p>However, while powerful in its ability to create new possible values for variables, the values that are created have some limitations and often need extra functionality to perform some common operations that are available to other types of data in ink. (<code>LIST</code> functions will be covered in the <em class="italic">Using LIST functions</em> section, later in this chapter.)</p>
			<p>In this topic, we will <a id="_idIndexMarker144"/>begin by creating a list of values. We will explore how to use the <code>LIST</code> keyword to create this collection. Then, we will change the values that are part of the collection by following the same pattern that we learned about for working with single values.</p>
			<h2 id="_idParaDest-70"><a id="_idTextAnchor069"/>Making a LIST</h2>
			<p>A new list can be created by using the <code>LIST</code> keyword. On a line starting with the <code>LIST</code> keyword, the name <a id="_idIndexMarker145"/>of the list is followed by the equals sign (<code>=</code>), and its values are separated by commas. The name of a list, as with other variables in ink, must only contain numbers, letters, and an underscore character. It cannot contain other special symbols or spaces.</p>
			<p>Unlike the use of the <code>VAR</code> keyword, when values are assigned to a list, spaces are ignored, including additional new, empty lines between one value and the next. Variables that are created by the <code>VAR</code> keyword must be defined on a single line. The values of a list can be spread across multiple lines:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 8 (Example8.ink):</p>
			<pre>LIST days_of_week = 
Monday,
Tuesday,
Wednesday,
Thursday,
Friday,
Saturday,
Sunday
VAR day = Monday
Today is {day}.</pre>
			<p>In <em class="italic">Example 8</em>, a list was created with seven possible values. Next, one of its values, <code>Monday</code>, was <a id="_idIndexMarker146"/>assigned to the variable that was created with the <code>VAR</code> keyword. Finally, the last line of code shows the value of <code>day</code>:</p>
			<div><div><img src="img/Figure_4.4_B17597.jpg" alt="Figure 4.4 – Screenshot of ink's output for Example 8&#13;&#10;" width="555" height="117"/>
				</div>
			</div>
			<p class="figure-caption">Figure 4.4 – Screenshot of ink's output for Example 8</p>
			<p>Like with a variable created with the <code>VAR</code> keyword, the values of a list, once created, can also be updated. This follows the pattern that we introduced as part of the <em class="italic">Updating variables</em> section. To update a list or one of its values, as we will learn in the next section, a line starting with a tilde (<code>~</code>) is needed.</p>
			<h2 id="_idParaDest-71"><a id="_idTextAnchor070"/>Updating LIST values</h2>
			<p>While values, as shown in <em class="italic">Example 8</em>, can seemingly be shown, the output that was created was the name <a id="_idIndexMarker147"/>of the value, <code>Monday</code>, and not the string, <code>"Monday"</code>. Regarding the output of a project, this is a small but important difference between a variable using the <code>VAR</code> keyword and those as part of a collection using the <code>LIST</code> keyword: only <code>LIST</code> values can be added to a list. To add a new value to an existing list, it must have been created by itself or another list:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 9 (Example9.ink):</p>
			<pre>LIST all_pets = Cats, Dogs, Fish
LIST current_pets = Cats, Dogs
~ current_pets = current_pets + Fish</pre>
			<p>In <em class="italic">Example 9</em>, the <code>Fish</code> value could be <em class="italic">added</em> to <code>current_pets</code> because it was created as part of another list, <code>all_pets</code>. This illustrates one of the major problems with using values from a list: while they can be very useful for introducing new possible values to a project, they must be defined before they can be accessed. Any new list is dependent on values <a id="_idIndexMarker148"/>that were previously defined or created within its assignment. However, it is possible to change the value to another type of data in ink:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 10 (Example10.ink):</p>
			<pre>LIST standing_with_family_members =
father = 0,
mother = 1,
sister = 2,
brother = 0</pre>
			<p>In <em class="italic">Example 10</em>, each of the values of the <code>standing_with_family_members</code> list is also assigned a number. This is allowed in ink and can be a useful way to create specific values of a list associated with numerical values in a project. However, accessing these numbers requires understanding another ink concept: <strong class="bold">functions</strong>.</p>
			<h1 id="_idParaDest-72"><a id="_idTextAnchor071"/>Calling functions</h1>
			<p><strong class="bold">Functions</strong> are a foundational <a id="_idIndexMarker149"/>part of most programming languages. In ink, a function is a subset of code that can accept input separated by commas, may produce output, and can <a id="_idIndexMarker150"/>be accessed through an operation called <strong class="bold">calling</strong>.</p>
			<p>A function is <em class="italic">called</em> by using its name and then opening (<code>(</code>) and closing (<code>)</code>) parentheses. The operation <a id="_idIndexMarker151"/>of calling a function in ink temporarily moves the flow of the story to the code of a function and then returns it when the code finishes. </p>
			<p class="callout-heading">Note</p>
			<p class="callout">Functions can only be called when used within code in ink. This means they either appear within opening and closing curly brackets or on lines starting with the tilde (~) as part of variable reassignment.</p>
			<p>In this topic, we will start by reviewing some functions that are built into ink and how they can help us with common operations. Next, we will look at functions that have been designed to work exclusively with values created with the <code>LIST</code> keyword. These functions perform common operations on a list, such as letting us know the number of entries within it or picking a random entry from its collection.</p>
			<h2 id="_idParaDest-73"><a id="_idTextAnchor072"/>Common mathematics functions</h2>
			<p>One of the most used functions in ink is <code>RANDOM()</code>. It accepts a minimum and a maximum whole <a id="_idIndexMarker152"/>number. It then picks a random number within the range <a id="_idIndexMarker153"/>specified.</p>
			<p>For many role-playing games, a common need is a number within a certain range, such as between 1 and 4 or 1 and 20. The <code>RANDOM()</code> function allows us to set a range and then view the outcome:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 11 (Example11.ink):</p>
			<pre>An example of a dice roll of 1-to-20 is {RANDOM(1,20)}.</pre>
			<p>When the <em class="italic">Example 11</em> code is run, ink will encounter a set of curly brackets. It will then see the <code>RANDOM()</code> function with a minimum of 1 and a maximum of 20. Each time it is run, a different number in this range will be chosen:</p>
			<div><div><img src="img/Figure_4.5_B17597.jpg" alt="Figure 4.5 – Screenshot of ink's output for Example 11" width="583" height="133"/>
				</div>
			</div>
			<p class="figure-caption">Figure 4.5 – Screenshot of ink's output for Example 11</p>
			<p>ink also has functions for converting between different types of numbers. The <code>INT()</code> function converts a decimal number into a whole (integer) number, while the <code>FLOAT()</code> function converts an integer into a decimal (float) number. Each accepts a single number and produces the output of a different type of number:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 12 (Example12.ink):</p>
			<pre>VAR example_decimal = 3.14
VAR example_integer = 5
Convert a decimal into an integer: {INT(example_decimal)}.
Convert an integer into a decimal: {FLOAT(example_integer +
  1.3)}.</pre>
			<p>The values that <a id="_idIndexMarker154"/>are produced by functions can be saved in variables. This allows, for <a id="_idIndexMarker155"/>example, the use of the <code>RANDOM()</code> function and its value, which has been saved as part of a variable:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 13 (Example13.ink):</p>
			<pre>A common table-top role-playing game combination is 2d6 where two dice rolls of 1-to-6 are rolled, and their values combined.
VAR dice_one = 0
~ dice_one = RANDOM(1,6)
VAR dice_two = 0
~ dice_two = RANDOM(1,6)
The combined total of 2d6 is {dice_one + dice_two}.</pre>
			<p>The <em class="italic">Example 13</em> code contains two variables and two uses of the same function. As was mentioned at the start of the <em class="italic">Storing values using VAR</em> topic, variables must start with a static value. In the <em class="italic">Example 13</em> code, each variable is initially assigned a value of <code>0</code>. They are immediately reassigned a value that's generated by the <code>RANDOM()</code> function. However, as part of the explicit rule with variables that are created using the <code>VAR</code> keyword, they must be set to a static value before they can be reassigned a dynamic variable that's been generated by a function such as <code>RANDOM()</code>.</p>
			<p>When run, the <em class="italic">Example 13</em> code creates the necessary variables and reassigns their values from a call to the <code>RANDOM()</code> function with a minimum of <code>1</code> and a maximum of <code>6</code>. When ink encounters the text and use of curly brackets, it adds the two values:</p>
			<div><div><img src="img/Figure_4.6_B17597.jpg" alt="Figure 4.6 – Screenshot of ink's output for Example 13&#13;&#10;" width="819" height="203"/>
				</div>
			</div>
			<p class="figure-caption">Figure 4.6 – Screenshot of ink's output for Example 13</p>
			<p class="callout-heading">Reminder</p>
			<p class="callout">Like using a shuffle alternative and the <code>VAR</code> keyword, the output of the <code>RANDOM()</code> function cannot be used as the initial value of a variable. It must be created first, and then reassigned the value produced by <code>RANDOM()</code>.</p>
			<p>As we have seen, there <a id="_idIndexMarker156"/>are multiple built-in functions in ink for <a id="_idIndexMarker157"/>working with single values. This is also true of values that are created using the <code>LIST</code> keyword. In the next section, we will review some of the functions that have been designed specifically for lists and their values.</p>
			<h2 id="_idParaDest-74"><a id="_idTextAnchor073"/>Using LIST functions</h2>
			<p>While there are functions that have been designed for a single value, most built-in functions in <a id="_idIndexMarker158"/>ink are used with a list. These all start with the  <code>LIST_</code> prefix and have the action or operation they perform or access as the second word. For example, to count the number of included values within a list, the <code>LIST_COUNT()</code> function can be used:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 14 (Example14.ink):</p>
			<pre>LIST days_of_week = 
Monday,
Tuesday,
Wednesday,
Thursday,
Friday,
Saturday,
Sunday
The total days are {LIST_COUNT(days_of_week)}.</pre>
			<p>When run, the <em class="italic">Example 14</em> code creates a list containing seven values. In the curly brackets is a call to the <code>LIST_COUNT()</code> function. This function is then passed the <code>days_of_week</code> list. Based on the lines that were used in the assignment of the list, the default assumption <a id="_idIndexMarker159"/>would be that the output will be <code>7</code> based on the number of days in the list. However, this is not the case. Its output is <code>0</code>:</p>
			<div><div><img src="img/Figure_4.7_B17597.jpg" alt="Figure 4.7 – Screenshot of ink's output for Example 14" width="508" height="116"/>
				</div>
			</div>
			<p class="figure-caption">Figure 4.7 – Screenshot of ink's output for Example 14</p>
			<p>The output produced by <em class="italic">Example 14</em> shows a hidden aspect of working with values from a list. Technically, all the values for creating a list are known as a <code>true</code> or <code>false</code> and by default, all values are set to <code>false</code>.</p>
			<p>The use of the <code>LIST_COUNT()</code> function <em class="italic">counts</em> the number of <code>true</code> values within the list. In <em class="italic">Example 14</em>, there are none. The count that was produced by the function is correct. To change a value from its default of <code>false</code> to <code>true</code>, it needs to be enclosed in opening (<code>(</code>) and closing (<code>)</code>) parentheses:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 15 (Example15.ink):</p>
			<pre>LIST days_of_week = 
(Monday),
(Tuesday),
(Wednesday),
(Thursday),
(Friday),
(Saturday),
(Sunday)
The total days are {LIST_COUNT(days_of_week)}.</pre>
			<p>In <em class="italic">Example 15</em>, the output <a id="_idIndexMarker161"/>includes the number <code>7</code>. This is correct. Each value within the list from <em class="italic">Example 14</em> is now enclosed within its own set of parentheses, changing its value from <code>false</code> to <code>true</code> for each.</p>
			<p>For the cases where every value, regardless of being <code>true</code> or <code>false</code>, is wanted from a list, the <code>LIST_ALL()</code> function returns <em class="italic">all</em> values:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 16 (Example16.ink):</p>
			<pre>LIST days_of_week = 
(Monday),
(Tuesday),
(Wednesday),
(Thursday),
(Friday),
(Saturday),
(Sunday)
The days of the week are: {LIST_ALL(days_of_week)}.</pre>
			<p>In <em class="italic">Example 16</em>, the use of the <code>LIST_ALL()</code> function returns all the values that are currently part of the <code>days_of_week</code> list:</p>
			<div><div><img src="img/Figure_4.8_B17597.jpg" alt="Figure 4.8 – Screenshot of ink's output for Example 16&#13;&#10;" width="814" height="136"/>
				</div>
			</div>
			<p class="figure-caption">Figure 4.8 – Screenshot of ink's output for Example 16</p>
			<p>The <code>LIST_RANDOM()</code> function returns a random entry regarding the total number of <code>true</code> values in a list, as <a id="_idIndexMarker162"/>shown in the following example:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 17 (Example17.ink):</p>
			<pre>LIST days_of_week = 
(Monday),
(Tuesday),
(Wednesday),
Thursday,
Friday,
Saturday,
Sunday
A random day of the week is: {LIST_RANDOM(days_of_week)}.</pre>
			<p>In <em class="italic">Example 17</em>, only the <code>Monday</code>, <code>Tuesday</code>, and <code>Wednesday</code> values are set to <code>true</code>. The other values of <code>days_of_week</code>, because they are set to <code>false</code> by default, cannot be accessed by <code>LIST_RANDOM()</code>.</p>
			<p>Returning to the code from <em class="italic">Example 10</em>, the <code>LIST_VALUE()</code> function can be used to access any data that's been assigned to a value as part of a list:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 18 (Example18.ink):</p>
			<pre>LIST standing_with_family_members =
father = 0,
mother = 1,
sister = 2,
brother = 0
The value of sister is {LIST_VALUE(sister)}.</pre>
			<p>In this improved <a id="_idIndexMarker163"/>version of <em class="italic">Example 10</em>, known as <em class="italic">Example 18</em>, the <code>LIST_VALUE()</code> function can be used to access the data that's been assigned to the <code>sister</code> value.</p>
			<p>While ink has many functions for performing different options, both mathematically and with the values of a list, it also provides authors with the ability to create their own. In the next topic, we will review how to create and call functions.</p>
			<h1 id="_idParaDest-75"><a id="_idTextAnchor074"/>Making new functions and calling knots</h1>
			<p>The <em class="italic">Calling functions</em> topic introduced functions for accepting input, possibly producing output, and explained how ink's built-in functions can be called. </p>
			<p>It is also possible <a id="_idIndexMarker164"/>to create new functions in ink using the <code>function</code> keyword. Any new functions created in ink can be used like any others, and they are often a useful way to create separate lines of code that can be used across a project or multiple times without the need to write the same code again.</p>
			<p>In this topic, we will explore how to create new functions using the <code>function</code> keyword. We will learn how they can be called, perform a small task, and even potentially return data. In <a href="B17597_02_Final_PG_ePub.xhtml#_idTextAnchor031"><em class="italic">Chapter 2</em></a><em class="italic">,</em> <em class="italic">Knots, Diverts, and Looping Patterns</em>, we discussed knots initially. Different sections of a story are defined by a name. In ink, functions, as we will learn, are special types of knots. This relationship means knots can also be <em class="italic">called</em> and <em class="italic">passed</em> data.</p>
			<p>A function is created in ink using at least two equals signs (<code>=</code>), the <code>function</code> keyword, the name of the function, and then the opening (<code>(</code>) and closing (<code>)</code>) parentheses, which are put around its input (if any). The name of a function follows the same rules as variables and knots: they <a id="_idIndexMarker165"/>can contain numbers, letters, and an underscore character. They cannot contain other special symbols or spaces.</p>
			<p>Like variables, functions are also <em class="italic">global</em> in ink. They can be accessed by any other code within the project once they have been created. Because both variables and functions are global, a common pattern is to design a function that changes a single variable. This allows an author to define an action that takes place when calling the function, such as increasing or decreasing its current value:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 19 (Example19.ink):</p>
			<pre>VAR money = 30
VAR apples = 0
VAR oranges = 0
You approach the marketplace and consider what is on sale. 
-&gt; market
== market
You have {money} gold.
You have purchased {apples} apples.
You have purchased {oranges} oranges.
+ {money &gt; 10} [Buy Apple for 10 gold]
    ~ decreaseMoney(10)
    ~ increaseApples()
    -&gt; market
+ {money &gt; 15} [Buy Oranges for 15 gold]
    ~ decreaseMoney(15)
    ~ increaseOranges()
    -&gt; market
* [Leave market]
    -&gt; DONE
== function decreaseMoney(amount)
~ money = money - amount
== function increaseApples()
~ apples = apples + 1
== function increaseOranges()
~ oranges = oranges + 1</pre>
			<p><em class="italic">Example 19</em> uses <a id="_idIndexMarker166"/>three different functions. The first, <code>decreaseMoney()</code>, accepts a value called <code>amount</code>. This is an example of a <strong class="bold">parameter</strong>. When creating a function, different variables can be <a id="_idIndexMarker167"/>defined within its open and closing parentheses. These are known as its <em class="italic">parameters</em>, and they affect how it performs calculations or processes.</p>
			<p>When a function is called, the data that's passed to it is called its <code>decreaseMoney()</code>, that has a parameter and receives a single argument, and two functions, <code>increaseApples()</code> and <code>increaseOranges()</code>, that do not accept arguments.</p>
			<p>The placement of the <code>increaseApples()</code> and <code>increaseOranges()</code> functions also matches a common pattern in ink where functions for adjusting the values of variables are found at the bottom of the code. Because both are global, which means they can be accessed from anywhere in the project, functions can be defined anywhere in the project.</p>
			<p>However, functions, like their sister concept knots, define themselves as being all the lines between <a id="_idIndexMarker169"/>when they start and the next knot or function. Placing them at the bottom of a file prevents issues where code might be confused or considered part of another knot or function.</p>
			<p>Functions are not the only concepts able to define parameters and accept arguments. In ink, <strong class="bold">knots</strong> can also be called as if they were functions. This is because functions are special types of knots that can <a id="_idIndexMarker170"/>return data. This also marks the difference between them. A knot can accept data, but only a function can return data. However, using knots in this way allows us to easily track values within a looping structure:</p>
			<p class="SC---Link" lang="en-US" xml:lang="en-US">Example 20 (Example20.ink):</p>
			<pre>-&gt; time_machine(RANDOM(20,80))
== time_machine(loop)
The large machine looms over everything in the room. With flashing lights, odd wires running between parts, and a presence all its own, it seems to be almost a living, pulsating thing as the scientist runs between sections parts and adjusts various parts.
"I'm so close!" he shouts as he turns a knob and then pulls down a lever. "I just need more time to figure out how to control the loops!"
You regard him and the machine skeptically.
"If you could, just press that last button and everything should be all set for the first demonstration of my time machine! I'm so glad the newspaper sent you to cover this event," he says, adjusting more settings on the grand machine in front of you.
You pause to try to understand the blinking lights as he yells again. "Press the button for me! I just need to make some last-minute changes over here."
On the panel in front of you is a large, green button. You consider it and the scientist rushing around across the room.
+ [Press button]
    ~ loop = loop + 1
    There is a flash of light and the readings on the 
      machine show a message: "This is loop {loop}."
    -&gt; time_machine(loop)</pre>
			<p>There is a single variable within <em class="italic">Example 20</em> that's created as a parameter of the <code>time_machine</code> knot. Before the loop starts, the <code>RANDOM()</code> function is used to select a value within <a id="_idIndexMarker171"/>the range of <code>20</code> to <code>80</code>. This value is passed to the knot in the first loop. Whenever the player selects the <code>loop</code> value is increased by one and its current <a id="_idIndexMarker172"/>value is passed to the <code>time_machine</code> knot. On any future loops, the <code>loop</code> variable is increased by one, and it sends its current value into the next loop.</p>
			<p>The code in <em class="italic">Example 20</em> also shows how variables can be used without the <code>VAR</code> keyword. Within the knot, the <code>loop</code> variable exists as a parameter. This means it exists as a variable, but only within the <code>time_machine</code> knot. When used in this way, the <code>loop</code> variable will not be global. As a part of the <code>time_machine</code> knot, the <code>loop</code> variable cannot be used outside of its code.</p>
			<p>Functions are a powerful concept in ink. However, they do have two major limitations compared to working with knots. The first is that functions cannot use choices of any kind. Functions cannot branch a story and must <em class="italic">return</em> to where they were called when they are finished. The second limitation is that functions cannot divert to another section of a story. Like the first limitation, a function should only perform a small task or change a value.</p>
			<p>Calling knots as if they were functions can be very useful for many projects. However, unlike functions, knots cannot return values. As shown in <em class="italic">Example 20</em>, it is possible to use knots for some, but not all, of the same purposes as functions in ink. Authors must consider whether a function or a knot is a better way to complete a task or present information. If the goal is to process data and return a value, a function is best. If data is to be passed, options must be presented, or the story may divert in some way, a knot is the better way to organize your code and data.</p>
			<h1 id="_idParaDest-76"><a id="_idTextAnchor075"/>Summary</h1>
			<p>In this chapter, we learned more about how variables work, and how they can be created using the <code>VAR</code> keyword. With multiple types of data, variables must be created using static values. They can then be changed through an operation called assignment using lines starting with a tilde (<code>~</code>) for writing a single line of code. </p>
			<p>In the second topic, for the cases where we needed multiple values, we saw that the <code>LIST</code> keyword can be used. This keyword allows us to create values other variables can use, but also comes with the limitations that only values created with <code>LIST</code> can be used with a list. We also examined how all the values of a list are part of a Boolean set and have either <code>true</code> or <code>false</code> values upon creation.</p>
			<p>Next, in the third topic, we investigated how functions work in ink. With several built-in functions, we can create random numbers or convert between types of numbers. With <code>LIST</code> values, we compared the results of <code>LIST_COUNT()</code> and <code>LIST_ALL()</code> by examining how to change the values of a list from <code>true</code> to <code>false</code> when they are created.</p>
			<p>Finally, in the last topic, we wrote some functions with the <code>function</code> keyword to perform simple tasks, such as adjusting the value of a variable. Because both variables were created using the <code>VAR</code> keyword and functions are global, we saw that a common pattern is to use a function to change the value of a variable. As part of this topic, we also revisited knots and learned that functions are special types of knots. This allows both to receive data using parameters, though only a function can return data. </p>
			<p>As we will see in the coming chapters on combining ink and Unity, understanding how values are stored and accessed in ink will be vital to creating a unified project. We must understand how ink works with different values across both those created using the <code>VAR</code> keyword and the <code>LIST</code> keyword before we can work with code in Unity. By understanding the relationship between variables and functions, we can begin to write ink code and, much later, run it alongside C# code in Unity.</p>
			<p>In the next chapter, <a href="B17597_05_Final_PG_ePub.xhtml#_idTextAnchor077"><em class="italic">Chapter 5</em></a><em class="italic">,</em> <em class="italic">Tunnels and Threads</em>, we will look at the last two major concepts in ink: <strong class="bold">tunnels</strong> and <strong class="bold">threads</strong>. Using many of the concepts introduced over the last four chapters, we will use tunnels to create advanced structures in ink with very little code. With threads, we will break up a digital story into even more parts and have ink combine everything for us as a reader is diverted from one knot to another. This will create an intricate narrative experience based on understanding and managing story flow between sections of a story.</p>
			<h1 id="_idParaDest-77"><a id="_idTextAnchor076"/>Questions</h1>
			<ol>
				<li>What is the operation called where a variable gets a value?</li>
				<li>What is the operation called when a string is created by "adding" two other strings or a string and a number together?</li>
				<li>How is the tilde (<code>~</code>) used with variables and code in ink?</li>
				<li>What kind of set are the values of a list?</li>
				<li>What is the technical term for a variable that's created as part of a function or knot and defined within its parentheses?</li>
			</ol>
		</div>
	</div></body></html>