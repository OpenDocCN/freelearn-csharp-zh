<html><head></head><body><div class="chapter" title="Chapter&#xA0;3.&#xA0;Initial Setup &#x2013; Creating the BaseApp"><div class="titlepage"><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Initial Setup – Creating the BaseApp</h1></div></div></div><p>In this chapter, we are going to create a Hello World application from scratch. The application will be called BaseApp<a class="indexterm" id="id99"/> and we will use it's structure as a starting point in further chapters.</p><p>This chapter will cover the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Setting up a project with TinderBox</li><li class="listitem" style="list-style-type: disc">Setting up a project from scratch on Mac OS X (Xcode 3 and 4+)</li><li class="listitem" style="list-style-type: disc">Setting up a project from scratch on Windows</li></ul></div><p>It does not have much in common with the BasicApp from the previous chapter except the basic structure, which will be common to all Cinder projects.</p><div class="section" title="TinderBox"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec24"/>TinderBox</h1></div></div></div><p>The easiest way to create a Cinder project is to use its integrated tool called <a class="indexterm" id="id100"/>
<span class="strong"><strong>TinderBox</strong></span>. You can find it in the <code class="literal">cinder/tools/</code> directory. This will work with both Mac OS X and Windows.</p><p>Let's give it a try. Open <a class="indexterm" id="id101"/>
<a class="indexterm" id="id102"/>TinderBox application. If you are doing it for the first time, you will have to point to your Cinder directory.</p><div class="mediaobject"><img alt="TinderBox" src="graphics/9564_03_01.jpg"/></div><p>When you've <a class="indexterm" id="id103"/>
<a class="indexterm" id="id104"/>done that, the TinderBox project setup window will appear. Choose <span class="strong"><strong>Basic App</strong></span> from the <span class="strong"><strong>Target</strong></span> and <span class="strong"><strong>OpenGL</strong></span> from the <span class="strong"><strong>Template</strong></span> drop-down lists. Enter <code class="literal">BaseApp</code> in the <span class="strong"><strong>Project Name</strong></span> field. Make sure that you have <span class="strong"><strong>Base</strong></span> in the <span class="strong"><strong>Naming Prefix</strong></span> field.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note05"/>Note</h3><p>For those who use Cinder 0.8.5, there is no <span class="strong"><strong>Target</strong></span> list in the new TinderBox. You have to choose the <span class="strong"><strong>Basic OpenGL</strong></span> template. Also, there is no <span class="strong"><strong>Naming Prefix</strong></span> field in the new TinderBox, so just ignore it.</p></div></div><p>Choose a directory where you will store your Cinder projects in the <span class="strong"><strong>Location</strong></span> field. Mine is <code class="literal">/Users/kr15h/Documents/CinderProjects/</code> (<code class="literal">C:\Users\kr15h\Documents\CinderProjects\</code> on Windows).</p><p>Leave <span class="strong"><strong>HEAD</strong></span> in the <span class="strong"><strong>Cinder Version</strong></span> field and choose <span class="strong"><strong>Xcode</strong></span> in the <span class="strong"><strong>Compilers</strong></span> section. Choose <span class="strong"><strong>Visual C++ 2010</strong></span> if you're using Windows or both if you plan to develop using both operating systems.</p><p>Click on <span class="strong"><strong>Create</strong></span>!</p><p>Your project is ready! Navigate to your Cinder project's folder that you specified in the <span class="strong"><strong>Location</strong></span> field and you'll find a folder called <code class="literal">BaseApp</code> there. You will find an Xcode project file in the <code class="literal">xcode</code> directory (Visual C++ 2010 project file in the <code class="literal">vc10</code> directory on Windows).</p><p>Open <code class="literal">BaseApp.xcodeproj</code> (<code class="literal">BaseApp.sln</code> on Windows).</p><p>Try to build and run it. You should see the output as shown in the following screenshot:</p><div class="mediaobject"><img alt="TinderBox" src="graphics/9564_03_02.jpg"/></div><p>Nothing<a class="indexterm" id="id105"/>
<a class="indexterm" id="id106"/> interesting is drawn in the window yet. We will make some changes a bit later, but if you are able to compile, run, and see this, you are the master!</p></div></div>
<div class="section" title="Creating a project from scratch (Mac OS X)"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec25"/>Creating a project from scratch (Mac OS X)</h1></div></div></div><p>Some of us <a class="indexterm" id="id107"/>just want to do it the difficult way, which is not so difficult actually, but involves certain steps that have to be remembered and understood. What if there was no TinderBox? No problem!</p><p>Here we will split up in two groups again—this time depending on the version of Xcode we are using. There is the old way (Xcode 3) and the new way (Xcode 4+). You can check the version by opening the Xcode and selecting <span class="strong"><strong>AboutXcode</strong></span> from the <span class="strong"><strong>Xcode</strong></span> menu.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note06"/>Note</h3><p>If you are using Cinder 0.8.5, be aware of the fact that the minimum required Mac OS X version is 10.7 and you do need Xcode 4.4+.</p></div></div><div class="section" title="Basic project setup (Xcode 3)"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec12"/>Basic project setup (Xcode 3)</h2></div></div></div><p>Go to your Cinder <a class="indexterm" id="id108"/>project's directory, which in my case is <code class="literal">/Users/kr15h/Documents/CinderProjects/</code>. Create an empty directory for our new project and name it <code class="literal">BaseApp</code>. Create another directory inside it and call it <code class="literal">src</code>. It should look like the one shown in the following screenshot:</p><div class="mediaobject"><img alt="Basic project setup (Xcode 3)" src="graphics/9564_03_03.jpg"/></div><p>Open up the Xcode and select <span class="strong"><strong>New Project</strong></span> from the <span class="strong"><strong>File</strong></span> menu. Select the <span class="strong"><strong>Mac OS X Application</strong></span> category and choose <span class="strong"><strong>Cocoa Application</strong></span>. Click on <span class="strong"><strong>Choose</strong></span>, browse to the directory we created earlier (<code class="literal">CinderProjects/BaseApp</code>), and then click on <span class="strong"><strong>Save</strong></span>.</p><p>Now it is recommended to close the Xcode, browse to your newly created project directory, and rename the Xcode project folder (<code class="literal">BaseApp</code> inside BaseApp—the one that is parent to the .<code class="literal">xcodeproj</code> file) to <code class="literal">xcode</code>.</p><div class="mediaobject"><img alt="Basic project setup (Xcode 3)" src="graphics/9564_03_04.jpg"/></div><p>Now open up<a class="indexterm" id="id109"/> the <code class="literal">BaseApp.xcodeproj</code> file. We have to remove some files that we won't need. These files include <code class="literal">main.m</code>, <code class="literal">InfoPlist.strings</code>, <code class="literal">MainMenu.xib</code> as well as <code class="literal">BaseAppAppDelegate.m</code> and <code class="literal">BaseAppAppDelegate.h</code>. Click on <span class="strong"><strong>Also Move to Trash</strong></span> when prompted.</p><p>Let's create our first source file. Right-click on the <span class="strong"><strong>Classes</strong></span> folder in the <span class="strong"><strong>Xcode Project Navigator</strong></span> pane and select <span class="strong"><strong>Add</strong></span> | <span class="strong"><strong>New File</strong></span>. Choose <span class="strong"><strong>C++ File</strong></span> from the <span class="strong"><strong>C and C++</strong></span> category. Name it <code class="literal">BaseApp</code> and uncheck the <span class="strong"><strong>Also create "BaseApp.h"</strong></span> option. For the location, choose the <code class="literal">BaseApp/src</code> folder that we created earlier and click on <span class="strong"><strong>Finish</strong></span>.</p></div><div class="section" title="Basic project setup (Xcode 4+)"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec13"/>Basic project setup (Xcode 4+)</h2></div></div></div><p>Open up Xcode and <a class="indexterm" id="id110"/>select <span class="strong"><strong>New</strong></span> | <span class="strong"><strong>New Project</strong></span> from the <span class="strong"><strong>File</strong></span> menu. Select the <span class="strong"><strong>Application</strong></span> item under the <span class="strong"><strong>Mac OS X</strong></span> category and choose <span class="strong"><strong>Cocoa Application</strong></span>. Click on <span class="strong"><strong>Next</strong></span>. Enter <code class="literal">BaseApp</code> as <span class="strong"><strong>Product Name</strong></span> and something, for example, <code class="literal">com.mycompany</code> as <span class="strong"><strong>Company Identifier</strong></span>. Click on <span class="strong"><strong>Next</strong></span> again and you will be prompted to choose the location for your project. Browse to the directory we created earlier (<code class="literal">CinderProjects/BaseApp</code>) and click on <span class="strong"><strong>Create</strong></span>.</p><p>Close the Xcode (completely by pressing <span class="emphasis"><em>Cmd</em></span> + <span class="emphasis"><em>Q</em></span>) and navigate yourself to the BaseApp project directory. You can see two folders there, <code class="literal">BaseApp</code> and <code class="literal">src</code>. Rename <code class="literal">BaseApp</code> to <code class="literal">xcode</code>—all the Xcode-relevant stuff will be stored there and all the code that will be stored in the <code class="literal">src</code> directory is meant to be used in every other IDE. This is not a law, it is just how Cinder sample projects are being organized and that's a good way of keeping a cross-platform code project well organized. This is done to avoid the need to create a separate version of the source files for each platform and IDE.</p><p>Open the <code class="literal">BaseApp.xcodeproj</code> Xcode project file. We are going to remove some files that we won't need. In the Project Navigator, under the <span class="strong"><strong>BaseApp</strong></span> folder, select and delete <code class="literal">AppDelegate.h</code>, <code class="literal">AppDelegate.m</code>, and <code class="literal">MainMenu.xib</code>. Click on <span class="strong"><strong>Delete</strong></span> when prompted to remove the actual files, not just the references. Under the <span class="strong"><strong>Supporting files</strong></span> folder, select and remove <code class="literal">main.m</code> and <code class="literal">BaseApp-Prefix.pch</code>. Click on <span class="strong"><strong>Delete</strong></span> again when prompted.</p><p>Let's create <a class="indexterm" id="id111"/>our first C++ source file. Right-click on the <span class="strong"><strong>BaseApp</strong></span> folder in the Project Navigator and choose the <span class="strong"><strong>New File</strong></span> option. Select <span class="strong"><strong>C++ File</strong></span> under the <span class="strong"><strong>Mac OS X</strong></span> and <span class="strong"><strong>C and C++</strong></span> categories. A <span class="strong"><strong>Save As</strong></span> dialog will appear. Navigate to the <code class="literal">src</code> directory of our <code class="literal">BaseApp</code> project (<code class="literal">BaseApp/src</code>). Name the file as <code class="literal">BaseApp</code> and click on <span class="strong"><strong>Create</strong></span>.</p></div><div class="section" title="Adding code (Xcode 3 and 4+)"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec14"/>Adding code (Xcode 3 and 4+)</h2></div></div></div><p>Open the file we <a class="indexterm" id="id112"/>just created (<code class="literal">BaseApp.cpp</code>) in the editor and enter the following piece of code:</p><div class="informalexample"><pre class="programlisting">#include "cinder/app/AppBasic.h"
#include "cinder/gl/gl.h"

using namespace ci;
using namespace ci::app;
using namespace std;

class BaseApp : public AppBasic {
public:
  void setup();
  void update();
  void draw();
};

void BaseApp::setup(){}
void BaseApp::update(){}

void BaseApp::draw()
{
  // clear out the window with black
  gl::clear( Color( 0, 0, 0 ) );
}

CINDER_APP_BASIC( BaseApp, RendererGl )</pre></div><p>If you try to compile and run the application, you will see that it is not possible. Some things are still missing and those are the connections with Cinder libraries and headers.</p></div><div class="section" title="Connecting to Cinder (Xcode 3)"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec15"/>Connecting to Cinder (Xcode 3)</h2></div></div></div><p>Under the <span class="strong"><strong>Project</strong></span> <a class="indexterm" id="id113"/>menu, select <span class="strong"><strong>Edit Project Settings</strong></span>. Go to the <span class="strong"><strong>Build</strong></span> tab and in the <span class="strong"><strong>Configuration</strong></span> select field, choose <span class="strong"><strong>All Configurations</strong></span>. Let's add a user-defined build setting that will prove itself useful in a moment. This user-defined setting will store the location of the Cinder directory relative to our project. Click on the little gear button at the bottom-left corner of the <span class="strong"><strong>Project Settings</strong></span> window and choose <span class="strong"><strong>Add User-Defined Setting</strong></span>.</p><div class="mediaobject"><img alt="Connecting to Cinder (Xcode 3)" src="graphics/9564_03_06.jpg"/></div><p>Name it as <code class="literal">CINDER_PATH</code> and set the value to the location of Cinder directory /<code class="literal">Users/You/cinder</code> (replace <code class="literal">You</code> with your username).</p><p>Now we have to make use of this newly created variable. Scroll to the <span class="strong"><strong>Search Paths</strong></span> section and modify the <span class="strong"><strong>User Header Search Paths</strong></span> setting. Set the value to <code class="literal">$(CINDER_PATH)/include</code>. With that done, go to <span class="strong"><strong>Header Search Paths</strong></span> (notice that there is no user in front of it) and set it to <code class="literal">$(CINDER_PATH)/boost</code>.</p><p>Then go to the <span class="strong"><strong>Architectures</strong></span> section and set the <span class="strong"><strong>Architectures</strong></span> variable to <code class="literal">i386</code>.</p><p>Next, we have to tell Xcode where to find Cinder libraries for linking. Find the <span class="strong"><strong>Linking</strong></span> section and change the <span class="strong"><strong>Debug</strong></span> field under <span class="strong"><strong>Other Linker Flags</strong></span> to <code class="literal">$(CINDER_PATH)/lib/libcinder_d.a</code> and the <span class="strong"><strong>Release</strong></span> field to <code class="literal">$(CINDER_PATH)/lib/libcinder.a</code>.</p><p>Now for the final <a class="indexterm" id="id114"/>thing. We need to add Mac OS X frameworks that are needed for our Cinder applications. Close the <span class="strong"><strong>Project Settings</strong></span> panel and right-click on the <span class="strong"><strong>Frameworks</strong></span> folder in the Xcode Project Navigator and go to <span class="strong"><strong>Add</strong></span> | <span class="strong"><strong>Existing Frameworks</strong></span>. Then, select the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">Accelerate.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">AudioToolbox.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">AudioUnit.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">CoreAudio.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">CoreVideo.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">OpenGL.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">QTKit.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">QuickTime.framework</code></li></ul></div><p>Compile and run the project. Success! Now, you are ready to go to the <span class="emphasis"><em>Final Adjustments</em></span> section of this chapter.</p></div><div class="section" title="Connecting to Cinder (Xcode 4+)"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec16"/>Connecting to Cinder (Xcode 4+)</h2></div></div></div><p>Follow these steps <a class="indexterm" id="id115"/>to create a user-defined variable with the path to our main Cinder location:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>BaseApp</strong></span> project icon in the Xcode Project Navigator pane.</li><li class="listitem">Choose the <span class="strong"><strong>BaseApp</strong></span> target under the <span class="strong"><strong>Targets</strong></span> category.</li><li class="listitem">Make sure that we are making changes to all configurations (select <span class="strong"><strong>All</strong></span> and <span class="strong"><strong>Combined</strong></span>).</li><li class="listitem">Click on the <span class="strong"><strong>Add Build Setting</strong></span> button and select <span class="strong"><strong>Add User-Defined Setting</strong></span> from the menu.</li><li class="listitem">Call it <code class="literal">CINDER_PATH</code> and enter the path to the place you copied your Cinder files.<div class="mediaobject"><img alt="Connecting to Cinder (Xcode 4+)" src="graphics/9564_03_07.jpg"/></div></li></ol></div><p>Now we have to <a class="indexterm" id="id116"/>make use of this newly created variable. Scroll to the <span class="strong"><strong>Search Paths</strong></span> section and modify the <span class="strong"><strong>User Header Search Paths</strong></span> setting. Set the value to <code class="literal">$(CINDER_PATH)/include</code>. With that done, go to <span class="strong"><strong>Header Search Paths</strong></span> (notice that there is no user in front of it) and set it to <code class="literal">$(CINDER_PATH)/boost</code>.</p><p>Then go to the <span class="strong"><strong>Architectures</strong></span> section and set the <span class="strong"><strong>Architectures</strong></span> variable to <code class="literal">i386</code>.</p><p>Next, we have to tell Xcode where to find Cinder libraries for linking. Find the <span class="strong"><strong>Linking</strong></span> section, and change the <span class="strong"><strong>Debug</strong></span> field under <span class="strong"><strong>Other Linker Flags</strong></span> to <code class="literal">$(CINDER_PATH)/lib/libcinder_d.a</code> and the <span class="strong"><strong>Release</strong></span> field to <code class="literal">$(CINDER_PATH)/lib/libcinder.a</code>.</p><p>There is another thing that Xcode added automatically for us, a link to the prefix header file that we deleted earlier. This will throw an error while compiling because the compiler won't be able to find the prefix header file. Go to the <span class="strong"><strong>Apple LLVM compiler 3.0 – Language</strong></span> tab and clear out the <span class="strong"><strong>Prefix Header</strong></span> field for both <span class="strong"><strong>Debug</strong></span> and <span class="strong"><strong>Release</strong></span>.</p><p>Finally, we have to link our application to the Mac OS X framework libraries. To do that, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Go to the <span class="strong"><strong>Build Phases</strong></span> tab.</li><li class="listitem">Expand the <span class="strong"><strong>Link Binary With Libraries</strong></span> section.</li><li class="listitem">Click on the <span class="strong"><strong>Add Items</strong></span> button to choose frameworks.<div class="mediaobject"><img alt="Connecting to Cinder (Xcode 4+)" src="graphics/9564_03_08.jpg"/></div></li></ol></div><p>Select the <a class="indexterm" id="id117"/>following frameworks and click on <span class="strong"><strong>Add</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">Accelerate.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">AudioToolbox.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">AudioUnit.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">CoreAudio.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">CoreVideo.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">OpenGL.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">QTKit.framework</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">QuickTime.framework</code></li></ul></div><p>That's it! Compile and run the project. Success! Now, you are ready to go to the <span class="strong"><strong>Final Adjustments</strong></span> section of this chapter.</p></div></div>
<div class="section" title="Creating a project from scratch (Windows)"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec26"/>Creating a project from scratch (Windows)</h1></div></div></div><p>So you are on <a class="indexterm" id="id118"/>Windows, right? Let's create an empty project in Visual C++. We will link it to all the necessary libraries and make sure that it is possible to compile the project before we move on.</p><p>Go to your Cinder project directory (which in my case is <code class="literal">C:\Users\kr15h\Documents\CinderProjects\</code>) and create a new directory <code class="literal">BaseApp</code> there.</p><p>Open Microsoft Visual C++ 2010 and go to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>New</strong></span> | <span class="strong"><strong>Project</strong></span>. Choose <span class="strong"><strong>Win32 Project</strong></span> from the <span class="strong"><strong>Win32</strong></span> category. Enter the name <code class="literal">BaseApp</code> in the <span class="strong"><strong>Name</strong></span> field and your BaseApp project directory that we just created in the <span class="strong"><strong>Location</strong></span> field. Make sure that the <span class="strong"><strong>Create directory for solution</strong></span> checkbox is not checked and the solution name is <code class="literal">BaseApp</code>—the same as the name of the project.</p><p>In the <span class="strong"><strong>Application Settings</strong></span> dialog, check the <span class="strong"><strong>Empty project</strong></span> checkbox and make sure that you choose <span class="strong"><strong>Windows application</strong></span> as the <span class="strong"><strong>Application</strong></span> type. Click on <span class="strong"><strong>Finish</strong></span>.</p><p>Close Visual C++ and go to the <code class="literal">BaseApp</code> project directory. You will see another directory with a name <code class="literal">BaseApp</code> inside it—rename it to <code class="literal">vc10</code>.</p><p>Create a new directory in the same level where the <code class="literal">vc10</code> folder is and rename it to <code class="literal">src</code>. Open the <code class="literal">BaseApp.sln</code> file<a class="indexterm" id="id119"/> in the <code class="literal">vc10</code> folder. Create a new C++ file. Choose <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>New</strong></span> <span class="strong"><strong>File</strong></span>. In the dialog box, choose the <span class="strong"><strong>Visual C++</strong></span> template category and select<a class="indexterm" id="id120"/> <span class="strong"><strong>C++ File</strong></span>. Click on <span class="strong"><strong>Open</strong></span>. A blank file will open in the editor. Enter the following piece of code there:</p><div class="informalexample"><pre class="programlisting">#include "cinder/app/AppBasic.h"
#include "cinder/gl/gl.h"

using namespace ci;
using namespace ci::app;
using namespace std;

class BaseApp : public AppBasic {
public:
  void setup();
  void update();
  void draw();
};

void BaseApp::setup(){}
void BaseApp::update(){}

void BaseApp::draw()
{
  // clear out the window with black
 gl::clear( Color( 0, 0, 0 ) );
}

CINDER_APP_BASIC( BaseApp, RendererGl )</pre></div><p>Go to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Save As</strong></span>, navigate to the <code class="literal">BaseApp\src</code> directory, and save the file with the name <code class="literal">BaseApp.cpp</code>. To keep things organized, navigate to the <span class="strong"><strong>BaseApp</strong></span> folder in the Explorer and click-and-drag it to the <span class="strong"><strong>Source Files</strong></span> directory in the Visual C++ 2010 Solution Explorer.</p><p>You won't be able to <a class="indexterm" id="id121"/>compile and run it yet. There are some more things to do.</p><p>Go to <span class="strong"><strong>Project</strong></span> | <span class="strong"><strong>BaseApp Properties</strong></span>. Choose <span class="strong"><strong>All Configurations</strong></span> in the <span class="strong"><strong>Configurations</strong></span> select field.</p><p>Click on the <span class="strong"><strong>C/C++</strong></span> category in the left column and find the <span class="strong"><strong>Additional Include Directories</strong></span> field in the right column. Add the following paths there:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">C:\cinder\include</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">C:\cinder\boost</code></li></ul></div><p>Click on <span class="strong"><strong>Linker</strong></span> in the left column and edit value of the <span class="strong"><strong>Additional Library Directories</strong></span> field. You have to enter the following two paths there:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">C:\cinder\lib</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">C:\cinder\lib\msw</code></li></ul></div><p>Click on <span class="strong"><strong>OK</strong></span>. Now select the <span class="strong"><strong>Debug</strong></span> configuration and click on <span class="strong"><strong>Input</strong></span> under <span class="strong"><strong>Linker</strong></span> in the left column of the <span class="strong"><strong>Project Properties</strong></span> window. Add <code class="literal">cinder_d.lib</code> to the <span class="strong"><strong>Additional Dependencies</strong></span> field and <code class="literal">LIBCMT</code> in the <span class="strong"><strong>Ignore Specific Default Libraries</strong></span> field.</p><p>With that done, select the <span class="strong"><strong>Release</strong></span> configuration and add <code class="literal">cinder.lib</code> to the <span class="strong"><strong>Additional Dependencies</strong></span> field.</p><p>Click on <span class="strong"><strong>OK</strong></span>. Build and run the application. A window with a black background should appear. If so, you are the master and we may continue with the next section.</p></div>
<div class="section" title="Final adjustments"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec27"/>Final adjustments</h1></div></div></div><p>No matter what kind of setup you choose, you'll have to edit one single file that is located in the same place relative to the project directory and whose name is the same in all configurations, <code class="literal">src/BaseApp.cpp</code>. Open it. We will try to understand what the different lines of code mean.</p><div class="informalexample"><pre class="programlisting">#include "cinder/app/AppBasic.h"
#include "cinder/gl/gl.h"</pre></div><p>These are the initial <code class="literal">include</code> statements that are responsible for including all the necessary Cinder stuff before we start to write our actual Cinder code.</p><div class="informalexample"><pre class="programlisting">using namespace ci;
using namespace ci::app;
using namespace std;</pre></div><p>Here we tell the compiler that we are going to use some namespaces. We do that to avoid writing the namespace names before the variables and methods that are defined in those namespaces in our code. So, these lines are here just to make our code more readable and our creative lives easier. We are not adding the <code class="literal">gl</code> namespace here, because we want to keep the OpenGL drawing code distinguishable from all other code in the file.</p><div class="informalexample"><pre class="programlisting">class BaseApp : public AppBasic {</pre></div><p>This is the definition of our base application class. It extends Cinder AppBasic—it is a super class that contains all the basic functionality that we would need to code ourselves if there was no Cinder.</p><div class="informalexample"><pre class="programlisting">  void setup();
  void update();
  void draw();</pre></div><p>These are the methods that we are going to override in this class. These methods can be considered the most important in Cinder, because here you can define what will be done in the main run loop of the program.</p><p>
<code class="literal">setup()</code> is for setting <a class="indexterm" id="id122"/>up your program and it is executed just once at the beginning.</p><p>
<code class="literal">update()</code> is <a class="indexterm" id="id123"/>called for every frame before the <code class="literal">draw()</code> function (the default Cinder frame rate is 30 fps) and here you should put all your calculations, data retrieval, and analysis code.</p><p>
<code class="literal">draw()</code> is for drawing <a class="indexterm" id="id124"/>things on the screen. As <code class="literal">update()</code> takes care of all the calculations, you can use the results here in order to draw something on the screen. It can be 2D or 3D text, 2D or 3D shapes—a certain point in a movie file. Choose whatever you want, but try to use this method just for drawing.</p><p>Then there are implementations of the methods (after the class declaration that starts with the class <code class="literal">BaseApp : public AppBasic {</code> and ends with a closing bracket <code class="literal">}</code>) and a line of code that is responsible for launching your program is as follows:</p><div class="informalexample"><pre class="programlisting">CINDER_APP_BASIC( BaseApp, RendererGl )</pre></div><p>This tells Cinder that it has to run your program (<code class="literal">BaseApp</code>) with the help of <code class="literal">RendererGl</code>. <code class="literal">RendererGl</code>, one of the available renderers in Cinder. It uses OpenGL for rendering and that lets you use the classes and functions defined in the <code class="literal">gl::</code> namespace as well as pure OpenGL functions.</p><p>There are some other renderers available in Cinder, for example, <code class="literal">Renderer2d</code> that can be used in combination with Cairo vector-graphics Cinder namespace. It uses the <code class="literal">Cairo::createWindowSurface()</code> function<a class="indexterm" id="id125"/> for drawing and it may be not so fast as when using OpenGL.</p><p>OK, now we are ready to add some visual feedback to our program. We do it inside the implementation of the <code class="literal">draw()</code> method.</p><p>Let's draw some lines. Edit the <code class="literal">draw()</code> method<a class="indexterm" id="id126"/> implementation as follows:</p><div class="informalexample"><pre class="programlisting">void BaseApp::draw()
{
  // clear out the window with black
  gl::clear( Color( 0.0f, 0.0f, 0.0f ) );</pre></div><p>Before we begin writing the actual drawing code, let me explain to you the difference between Cinder and OpenGL coordinate space.</p><p>In Cinder (as in many other creative coding frameworks and 2D graphics software), we make use of the so called fourth quadrant of the 2D Cartesian coordinate system. That means that the point (0, 0) is located at the top-left corner of the screen. To the right from that point all the x values go positive, and downwards from it all the y values go positive.</p><p>It is different with OpenGL. All four quadrants are used and the point (0, 0) is located in the center of the screen. You might remember this from math classes at school—to the left from the (0, 0) point x values go negative, to the right they go positive. Downwards from the (0, 0) point, the y values go negative, and upwards they go positive.</p><div class="mediaobject"><img alt="Final adjustments" src="graphics/9564_03_09.jpg"/></div><p>The Cinder <code class="literal">gl</code> namespace methods does the conversion from the "top-left-centered" coordinate system to the "actually-centered" for us. So let's draw:</p><div class="informalexample"><pre class="programlisting">  // draw a x over the whole window area
  gl::drawLine( Vec2f(0.0f, 0.0f),
    Vec2f(getWindowWidth(), getWindowHeight()) );
  gl::drawLine( Vec2f(0.0f, getWindowHeight()),
    Vec2f(getWindowWidth(), 0.0f) );
}</pre></div><p>Compile and run the project. You should see the following output:</p><div class="mediaobject"><img alt="Final adjustments" src="graphics/9564_03_05.jpg"/></div><p>That's it! We've created a great base for our future applications! We are going to re-use it's structure while going through the next chapters.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec28"/>Summary</h1></div></div></div><p>In this chapter, we learned how to create a base application. We used two different approaches—a simple (by using TinderBox) and a difficult one (by creating a project from scratch). The former lets you do it fast, but the latter gives you a deeper insight into how things work. </p></div></body></html>