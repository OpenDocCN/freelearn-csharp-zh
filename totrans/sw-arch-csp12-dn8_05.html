<html><head></head><body>
<div class="Basic-Text-Frame" id="_idContainer113">
<h1 class="chapterNumber"><span class="koboSpan" id="kobo.1.1">5</span></h1>
<h1 class="chapterTitle" id="_idParaDest-106"><span class="koboSpan" id="kobo.2.1">Implementing Code Reusability in C# 12</span></h1>
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.3.1">Code reusability</span></strong><span class="koboSpan" id="kobo.4.1"> is one of the most important topics in software architecture. </span><span class="koboSpan" id="kobo.4.2">This chapter aims to discuss ways to enable code reuse, as well as help you understand how .NET 8 solves the problem of managing and maintaining a reusable library.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.5.1">The following topics will be covered in this chapter:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.6.1">Understanding the principles of code reuse</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.7.1">The advantages of working with .NET 8</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.8.1">Creating reusable libraries using .NET 8</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.9.1">Although code reuse is an exceptional practice, as a software architect, you must be aware of when this is important for the scenario you are dealing with. </span><span class="koboSpan" id="kobo.9.2">Many good software architects agree that there is a lot of overengineering due to trying to make things reusable even though they are often single-use or not understood well enough, leading to unnecessary complexity and slowing down the development process.</span></p>
<h1 class="heading-1" id="_idParaDest-107"><span class="koboSpan" id="kobo.10.1">Technical requirements</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.11.1">For this chapter, you will need the free Visual Studio 2022 Community Edition or above, with all the database tools installed.</span></p>
<h1 class="heading-1" id="_idParaDest-108"><span class="koboSpan" id="kobo.12.1">Understanding the principles of code reusability</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.13.1">There is a single reason that you</span><a id="_idIndexMarker306"/><span class="koboSpan" id="kobo.14.1"> can always use to justify code reuse – you cannot spend your valuable time reinventing the wheel if it is already running well in other scenarios. </span><span class="koboSpan" id="kobo.14.2">That is why most engineering domains are based on reusability principles like modularity, standardization, abstraction, and documentation. </span><span class="koboSpan" id="kobo.14.3">Think about the light switches you have in your house. </span><span class="koboSpan" id="kobo.14.4">You can only change them without modifying other components of your house because it was built based on a standard, abstracting the idea of what a switch is according to a specification, providing modularity as a result.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.15.1">Can you imagine the number of applications that can be made with the same interface components? </span><span class="koboSpan" id="kobo.15.2">The fundamentals of code reuse are the same. </span><span class="koboSpan" id="kobo.15.3">Again, it is a matter of planning a good solution so part of it can be reused later.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.16.1">In software engineering, code reuse is one of the techniques that can bring a bunch of advantages to a software project, such as the following:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.17.1">There is confidence in the </span><a id="_idIndexMarker307"/><span class="koboSpan" id="kobo.18.1">software, considering that the reused piece of code was already tested in another application.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.19.1">There is more efficient usage of software architects and the senior team since they can be dedicated to solving this kind of problem.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.20.1">There is the possibility of bringing to the project a pattern that is already accepted by the market.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.21.1">Development speed goes up due to the already-implemented components.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.22.1">Maintenance is easier.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.23.1">These aspects suggest that code reuse should be done whenever possible. </span><span class="koboSpan" id="kobo.23.2">However, creating reusable components does carry higher costs initially. </span><span class="koboSpan" id="kobo.23.3">That is why you need to focus on creating it in situations where you recognize that this piece of code will really be reused in the future or where you are trying to reuse code that has not been created as a component. </span><span class="koboSpan" id="kobo.23.4">It is your responsibility, as a software architect, to ensure the preceding advantages are utilized and, more than that, that you incentivize your team to enable reuse in the software they are creating.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.24.1">In the next section, we will discuss what can be considered code reuse and what cannot. </span><span class="koboSpan" id="kobo.24.2">The main purpose of discussing it is to help you define a code reuse strategy that will transform the efficiency of your team.</span></p>
<h2 class="heading-2" id="_idParaDest-109"><span class="koboSpan" id="kobo.25.1">What code reuse is not</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.26.1">The first thing you must </span><a id="_idIndexMarker308"/><span class="koboSpan" id="kobo.27.1">understand is that code reuse does not mean copying and pasting code from one class to another. </span><span class="koboSpan" id="kobo.27.2">Even if this code was written by another team or project, this does not indicate that you are properly working with reusability principles. </span><span class="koboSpan" id="kobo.27.3">Let us imagine a </span><a id="_idIndexMarker309"/><span class="koboSpan" id="kobo.28.1">scenario that we will find in this book’s use case, the </span><strong class="keyWord"><span class="koboSpan" id="kobo.29.1">WWTravelClub</span></strong><span class="koboSpan" id="kobo.30.1"> evaluation.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.31.1">In this project scenario, you may want to evaluate different kinds of subjects, such as the </span><strong class="keyWord"><span class="koboSpan" id="kobo.32.1">Package</span></strong><span class="koboSpan" id="kobo.33.1">, </span><strong class="keyWord"><span class="koboSpan" id="kobo.34.1">DestinationExpert</span></strong><span class="koboSpan" id="kobo.35.1">, </span><strong class="keyWord"><span class="koboSpan" id="kobo.36.1">City</span></strong><span class="koboSpan" id="kobo.37.1">, </span><strong class="keyWord"><span class="koboSpan" id="kobo.38.1">Comments</span></strong><span class="koboSpan" id="kobo.39.1">, and so on. </span><span class="koboSpan" id="kobo.39.2">The process for getting the evaluation average is the same, no matter which subject you are referring to. </span><span class="koboSpan" id="kobo.39.3">Due to this, you may want to </span><em class="italic"><span class="koboSpan" id="kobo.40.1">enable</span></em><span class="koboSpan" id="kobo.41.1"> reuse by copying and pasting the code for each evaluation. </span><span class="koboSpan" id="kobo.41.2">The (bad) result will be something like this:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.42.1"><img alt="Diagram  Description automatically generated" src="../Images/B19820_05_01.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.43.1">Figure 5.1: Bad implementation – there is no code reuse here</span></p>
<p class="normal"><span class="koboSpan" id="kobo.44.1">In the preceding diagram, the process of calculating the evaluation average is decentralized, which means that the same code will be duplicated in different classes. </span><span class="koboSpan" id="kobo.44.2">This will cause a lot of trouble, especially if the same approach is used in other applications. </span><span class="koboSpan" id="kobo.44.3">For instance, if there is a new specification covering how you must calculate the average, or even if you just get a bug in the calculation formula, you will have to fix it in all instances of the code. </span><span class="koboSpan" id="kobo.44.4">If you do not remember to update it everywhere, you will possibly </span><a id="_idIndexMarker310"/><span class="koboSpan" id="kobo.45.1">end up with an inconsistent implementation.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.46.1">In the next section, we will reorganize this code to respect some principles that you, as a software architect, should follow to avoid the issues we have mentioned here.</span></p>
<h2 class="heading-2" id="_idParaDest-110"><span class="koboSpan" id="kobo.47.1">What code reuse is</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.48.1">The solution to the problem</span><a id="_idIndexMarker311"/><span class="koboSpan" id="kobo.49.1"> mentioned in the previous section is quite simple: you must analyze your code and select the parts of it that would be good to decouple from your application.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.50.1">The most compelling reason you should decouple them is related to how you are sure that this code can be reused in other parts of the application or even in another application. </span><span class="koboSpan" id="kobo.50.2">This is exactly what Andrew Hunt and David Thomas present as the DRY principle (don’t repeat yourself):</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.51.1"><img alt="Diagram  Description automatically generated" src="../Images/B19820_05_02.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.52.1">Figure 5.2: An implementation focused on code reuse</span></p>
<p class="normal"><span class="koboSpan" id="kobo.53.1">The centralization of the code brings with it a different responsibility for software architects such as yourself. </span><span class="koboSpan" id="kobo.53.2">You must keep in mind that if there is a mistake or problem in this code, it can cause issues in many parts of the application or even other applications that use it. </span><span class="koboSpan" id="kobo.53.3">On the other hand, once you have this code tested and running, you will be able to reuse this code again in new projects with no worries. </span><span class="koboSpan" id="kobo.53.4">Besides, let’s remember the use case we are implementing here: you may want to evaluate different kinds of subjects, such as the </span><strong class="keyWord"><span class="koboSpan" id="kobo.54.1">Package</span></strong><span class="koboSpan" id="kobo.55.1">, </span><strong class="keyWord"><span class="koboSpan" id="kobo.56.1">DestinationExpert</span></strong><span class="koboSpan" id="kobo.57.1">, </span><strong class="keyWord"><span class="koboSpan" id="kobo.58.1">City</span></strong><span class="koboSpan" id="kobo.59.1">, </span><strong class="keyWord"><span class="koboSpan" id="kobo.60.1">Comments</span></strong><span class="koboSpan" id="kobo.61.1">, and so on. </span><span class="koboSpan" id="kobo.61.2">The process for getting the evaluation</span><a id="_idIndexMarker312"/><span class="koboSpan" id="kobo.62.1"> average is the same, no matter which subject you are referring to. </span><span class="koboSpan" id="kobo.62.2">What if you need to evolve the average calculation process? </span><span class="koboSpan" id="kobo.62.3">In the design now provided, you will have to change the code in a single class. </span><span class="koboSpan" id="kobo.62.4">Considering what we have already learned, we could also:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.63.1">Make a base class implementing the logic of the method.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.64.1">Inherit all other classes from the newly created base class and eventually augment/modify the method’s behavior.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.65.1">Turn the inheritance into an association (as discussed in the previous chapter).</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.66.1">It is worth mentioning that the more you use the same code, the cheaper this development will become. </span><span class="koboSpan" id="kobo.66.2">Although it might seem like developing reusable code costs more initially, the more you use it, the more cost-effective and efficient the development process becomes over time. </span><span class="koboSpan" id="kobo.66.3">Cost needs to be mentioned because, in general, the concept of reusable software costs more in the beginning.</span></p>
<h2 class="heading-2" id="_idParaDest-111"><span class="koboSpan" id="kobo.67.1">Reusability in the development life cycle</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.68.1">If you understand that code </span><a id="_idIndexMarker313"/><span class="koboSpan" id="kobo.69.1">reusability will take you to another level of coding, improving the way you write and use code, then it’s time to think about how to make this technique available in your development life cycle.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.70.1">As a matter of fact, creating and </span><a id="_idIndexMarker314"/><span class="koboSpan" id="kobo.71.1">maintaining a component library is not very easy due to the responsibility you will take on and the lack of good tools to support the search for existing components.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.72.1">On the other hand, there are some practices that you may consider implementing in your software development process every time you initiate a new development:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.73.1">Use</span></strong><span class="koboSpan" id="kobo.74.1"> the already-implemented components from your user library, selecting features that need them in the software requirements specification.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.75.1">Identify</span></strong><span class="koboSpan" id="kobo.76.1"> features in the software requirements specification that are candidates to be designed as library components.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.77.1">Modify</span></strong><span class="koboSpan" id="kobo.78.1"> the specification, considering that these features will be developed using reusable components.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.79.1">Design</span></strong><span class="koboSpan" id="kobo.80.1"> the reusable components and be sure that they have the appropriate interfaces to be used in many projects.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.81.1">Build</span></strong><span class="koboSpan" id="kobo.82.1"> the project architecture with the new component library version.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.83.1">Document</span></strong><span class="koboSpan" id="kobo.84.1"> the component library version so that every developer and team knows about it.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.85.1">The </span><em class="italic"><span class="koboSpan" id="kobo.86.1">use-identify-modify-design-build</span></em><span class="koboSpan" id="kobo.87.1"> process is a</span><a id="_idIndexMarker315"/><span class="koboSpan" id="kobo.88.1"> technique that you may </span><a id="_idIndexMarker316"/><span class="koboSpan" id="kobo.89.1">consider implementing every time you need to enable software reuse. </span><span class="koboSpan" id="kobo.89.2">As soon as you have the components you need to write for this library, you will need to decide on the technology that will provide these components.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.90.1">During the history of software development, there have been many approaches to enable code reuse, from </span><strong class="keyWord"><span class="koboSpan" id="kobo.91.1">dynamic link libraries</span></strong><span class="koboSpan" id="kobo.92.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.93.1">DLLs</span></strong><span class="koboSpan" id="kobo.94.1">) to</span><a id="_idIndexMarker317"/><span class="koboSpan" id="kobo.95.1"> microservices, as we will discuss in </span><em class="chapterRef"><span class="koboSpan" id="kobo.96.1">Chapter 11</span></em><span class="koboSpan" id="kobo.97.1">, </span><em class="italic"><span class="koboSpan" id="kobo.98.1">Applying a Microservice Architecture to Your Enterprise Application</span></em><span class="koboSpan" id="kobo.99.1">, in the </span><em class="italic"><span class="koboSpan" id="kobo.100.1">Microservices and the evolution of the concept of modules</span></em><span class="koboSpan" id="kobo.101.1"> section. </span><span class="koboSpan" id="kobo.101.2">The methodology explained in the </span><a id="_idIndexMarker318"/><span class="koboSpan" id="kobo.102.1">section can be used by you, as a software architect, to implement this strategy to accelerate </span><a id="_idIndexMarker319"/><span class="koboSpan" id="kobo.103.1">software development. </span><span class="koboSpan" id="kobo.103.2">Now, let us check how .NET 8 can help us with it.</span></p>
<h1 class="heading-1" id="_idParaDest-112"><span class="koboSpan" id="kobo.104.1">Using .NET 8 for code reuse</span></h1>
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.105.1">.NET</span></strong><span class="koboSpan" id="kobo.106.1"> has evolved a lot since its first </span><a id="_idIndexMarker320"/><span class="koboSpan" id="kobo.107.1">version. </span><span class="koboSpan" id="kobo.107.2">This evolution is related not only to the number of commands and performance issues but also to the supported platforms. </span><span class="koboSpan" id="kobo.107.3">As we discussed in </span><em class="chapterRef"><span class="koboSpan" id="kobo.108.1">Chapter 1</span></em><span class="koboSpan" id="kobo.109.1">, </span><em class="italic"><span class="koboSpan" id="kobo.110.1">Understanding the Importance of Software Architecture</span></em><span class="koboSpan" id="kobo.111.1">, you can run C# .NET on billions of devices, even if they are running Linux, Android, macOS, or iOS. </span><span class="koboSpan" id="kobo.111.2">For this reason, .NET Standard was first announced together with .NET </span><a id="_idIndexMarker321"/><span class="koboSpan" id="kobo.112.1">Core 1.0, but .NET Standard became particularly important with .NET Standard 2.0 when .NET Framework 4.7.2, .NET Core, and Xamarin became compatible with it.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.113.1">The key point is that .NET Standard was not only a Visual Studio project. </span><span class="koboSpan" id="kobo.113.2">More than that, it was a formal specification available to all .NET implementations. </span><span class="koboSpan" id="kobo.113.3">As you can see in the following table, .NET Standard 2.0, which is recommended by Microsoft, covers everything in .NET. </span><span class="koboSpan" id="kobo.113.4">You can find a full .NET Standard overview at </span><a href="https://docs.microsoft.com/en-us/dotnet/standard/net-standard"><span class="url"><span class="koboSpan" id="kobo.114.1">https://docs.microsoft.com/en-us/dotnet/standard/net-standard</span></span></a><span class="koboSpan" id="kobo.115.1">.</span></p>
<table class="table-container" id="table001">
<tbody>
<tr>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.116.1">.NET implementation</span></strong></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.117.1">Version support</span></strong></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.118.1">.NET and .NET Core</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.119.1">2.0, 2.1, 2.2, 3.0, 3.1, 5.0, 6.0, 7.0, 8.0</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.120.1">.NET Framework 1</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.121.1">4.6.1 2, 4.6.2, 4.7, 4.7.1, 4.7.2, 4.8, 4.8.1</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.122.1">Mono</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.123.1">5.4, 6.4</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.124.1">Xamarin.iOS</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.125.1">10.14, 12.16</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.126.1">Xamarin.Mac</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.127.1">3.8, 5.16</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.128.1">Xamarin.Android</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.129.1">8.0, 10.0</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.130.1">Universal Windows Platform</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.131.1">10.0.16299, TBD</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.132.1">Unity</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.133.1">2018.1</span></p>
</td>
</tr>
</tbody>
</table>
<p class="packt_figref"><span class="koboSpan" id="kobo.134.1">Table 5.1: .NET Standard 2.0 support</span></p>
<p class="normal"><span class="koboSpan" id="kobo.135.1">This indicates that if you build a class library that is compatible with this standard, you will be able to reuse it on any of the platforms presented. </span><span class="koboSpan" id="kobo.135.2">Think about how fast your development process could become if you plan to do this in all your projects.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.136.1">Obviously, some components are</span><a id="_idIndexMarker322"/><span class="koboSpan" id="kobo.137.1"> not included in .NET Standard, but its evolution is continuous. </span><span class="koboSpan" id="kobo.137.2">It is worth mentioning that Microsoft’s official documentation indicates that </span><em class="italic"><span class="koboSpan" id="kobo.138.1">the higher the version, the more APIs are available to you</span></em><span class="koboSpan" id="kobo.139.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.140.1">The initiative of having a single</span><a id="_idIndexMarker323"/><span class="koboSpan" id="kobo.141.1"> framework for all platforms brought us to .NET 5. </span><span class="koboSpan" id="kobo.141.2">Microsoft indicated that from .NET 5.0, the framework would run everywhere. </span><span class="koboSpan" id="kobo.141.3">The next question you, as a software architect, might have is </span><em class="italic"><span class="koboSpan" id="kobo.142.1">what is going to happen to .NET Standard?</span></em></p>
<p class="normal"><span class="koboSpan" id="kobo.143.1">The answer to this question is well explained by Immo Landwerth at the dotnet blog: </span><a href="https://devblogs.microsoft.com/dotnet/the-future-of-net-standard/"><span class="url"><span class="koboSpan" id="kobo.144.1">https://devblogs.microsoft.com/dotnet/the-future-of-net-standard/</span></span></a><span class="koboSpan" id="kobo.145.1">. </span><span class="koboSpan" id="kobo.145.2">The basic answer is that .NET 5.0 (and future versions) needs to be</span><a id="_idIndexMarker324"/><span class="koboSpan" id="kobo.146.1"> thought of as the foundation for sharing code moving forward. </span><span class="koboSpan" id="kobo.146.2">Considering .NET 8 is an </span><strong class="keyWord"><span class="koboSpan" id="kobo.147.1">LTS</span></strong><span class="koboSpan" id="kobo.148.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.149.1">Long-Term Support</span></strong><span class="koboSpan" id="kobo.150.1">) version, we can now understand the framework as the best option to share code for new applications.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.151.1">Bearing this scenario in mind, it is time to check how to create reusable class libraries. </span><span class="koboSpan" id="kobo.151.2">So, let us move to the next topic.</span></p>
<h2 class="heading-2" id="_idParaDest-113"><span class="koboSpan" id="kobo.152.1">Creating a reusable class library</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.153.1">If you want to make useful functionalities to be</span><a id="_idIndexMarker325"/><span class="koboSpan" id="kobo.154.1"> used by multiple applications, you will need to</span><a id="_idIndexMarker326"/><span class="koboSpan" id="kobo.155.1"> create a </span><strong class="keyWord"><span class="koboSpan" id="kobo.156.1">class library</span></strong><span class="koboSpan" id="kobo.157.1"> project. </span><span class="koboSpan" id="kobo.157.2">So, creating class libraries is the best way to reuse code using .NET. </span><span class="koboSpan" id="kobo.157.3">It is quite simple to create a </span><strong class="keyWord"><span class="koboSpan" id="kobo.158.1">class library</span></strong><span class="koboSpan" id="kobo.159.1">. </span><span class="koboSpan" id="kobo.159.2">Basically, you need to choose the following project when creating the library:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.160.1"><img alt="Texto  Descrição gerada automaticamente" src="../Images/B19820_05_03.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.161.1">Figure 5.3: Creating a class library</span></p>
<p class="normal"><span class="koboSpan" id="kobo.162.1">Once you have concluded this part, you </span><a id="_idIndexMarker327"/><span class="koboSpan" id="kobo.163.1">will notice that the project file keeps the information about the </span><strong class="keyWord"><span class="koboSpan" id="kobo.164.1">target framework moniker</span></strong><span class="koboSpan" id="kobo.165.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.166.1">TFM</span></strong><span class="koboSpan" id="kobo.167.1">). </span><span class="koboSpan" id="kobo.167.2">The idea of the TFM is to define the set of APIs that will be</span><a id="_idIndexMarker328"/><span class="koboSpan" id="kobo.168.1"> available to the library. </span><span class="koboSpan" id="kobo.168.2">You can find a list of the available TFMs at </span><a href="https://docs.microsoft.com/en-us/dotnet/standard/frameworks"><span class="url"><span class="koboSpan" id="kobo.169.1">https://docs.microsoft.com/en-us/dotnet/standard/frameworks</span></span></a><span class="koboSpan" id="kobo.170.1">:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.171.1">&lt;Project Sdk=</span><span class="hljs-string"><span class="koboSpan" id="kobo.172.1">"Microsoft.NET.Sdk"</span></span><span class="koboSpan" id="kobo.173.1">&gt;
  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;net8.0&lt;/TargetFramework&gt;
    &lt;Nullable&gt;enable&lt;/Nullable&gt;
  &lt;/PropertyGroup&gt;
&lt;/Project&gt;
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.174.1">As soon as your project is loaded, you can start coding the classes that you intend to reuse. </span><span class="koboSpan" id="kobo.174.2">The advantage of building reusable classes using this approach is that you will be able to reuse the written code in all the project types we checked previously. </span><span class="koboSpan" id="kobo.174.3">On the other hand, you will find out that some APIs that are available in .NET Framework do not exist in this type of project.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.175.1">Considering that you already have the correct project type selected for creating reusable code, let us check how C# deals with code reuse in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-114"><span class="koboSpan" id="kobo.176.1">How does C# deal with code reuse?</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.177.1">Considering you are writing class</span><a id="_idIndexMarker329"/><span class="koboSpan" id="kobo.178.1"> libraries using C#.NET, there are many approaches where </span><strong class="keyWord"><span class="koboSpan" id="kobo.179.1">C#</span></strong><span class="koboSpan" id="kobo.180.1"> helps us deal with code reuse. </span><span class="koboSpan" id="kobo.180.2">The ability to build libraries, as we did in the previous section, is one of them. </span><span class="koboSpan" id="kobo.180.3">One of the most important ones is the fact that the language is </span><strong class="keyWord"><span class="koboSpan" id="kobo.181.1">object-oriented</span></strong><span class="koboSpan" id="kobo.182.1">. </span><span class="koboSpan" id="kobo.182.2">Besides this, it is also worth mentioning the facilities that generics brought to the C# language. </span><span class="koboSpan" id="kobo.182.3">This section will discuss object-oriented analysis</span><a id="_idIndexMarker330"/><span class="koboSpan" id="kobo.183.1"> and generics principles.</span></p>
<h3 class="heading-3" id="_idParaDest-115"><span class="koboSpan" id="kobo.184.1">Object-oriented analysis</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.185.1">The object-oriented analysis approach gives us the ability to reuse code in different ways, from the facility of inheritance to the </span><a id="_idIndexMarker331"/><span class="koboSpan" id="kobo.186.1">changeability of polymorphism. </span><span class="koboSpan" id="kobo.186.2">Complete adoption of object-oriented programming will let you implement abstraction and encapsulation, too.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.187.1">It is important to mention that in </span><em class="chapterRef"><span class="koboSpan" id="kobo.188.1">Chapter 4</span></em><span class="koboSpan" id="kobo.189.1">, </span><em class="italic"><span class="koboSpan" id="kobo.190.1">Best Practices in Coding C# 12</span></em><span class="koboSpan" id="kobo.191.1">, we discuss how inheritance can cause complexity in your code. </span><span class="koboSpan" id="kobo.191.2">Although the following example presents a valid way to reuse code, consider using composition over inheritance in real-life applications.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.192.1">The following diagram shows how using the object-oriented approach makes reuse easier. </span><span class="koboSpan" id="kobo.192.2">As you can see, there are different ways to calculate the grades of an evaluation, considering that you can be a basic or a prime user of this example system:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.193.1"><img alt="" role="presentation" src="../Images/B19820_05_04.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.194.1">Figure 5.4: Object-oriented case analysis</span></p>
<p class="normal"><span class="koboSpan" id="kobo.195.1">There are two aspects to be analyzed as code reuse in this design. </span><span class="koboSpan" id="kobo.195.2">The first is that there is no need to declare the </span><a id="_idIndexMarker332"/><span class="koboSpan" id="kobo.196.1">properties in each child class since inheritance does it for you.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.197.1">The second is the opportunity to use polymorphism, enabling different behaviors for the same method:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.198.1">public</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.199.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.200.1">PrimeUsersEvaluation</span></span><span class="koboSpan" id="kobo.201.1"> : </span><span class="hljs-title"><span class="koboSpan" id="kobo.202.1">Evaluation</span></span><span class="koboSpan" id="kobo.203.1">
{
    </span><span class="hljs-doctag"><span class="koboSpan" id="kobo.204.1">///</span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="koboSpan" id="kobo.205.1">&lt;summary&gt;</span></span>
<span class="hljs-doctag"><span class="koboSpan" id="kobo.206.1">///</span></span><span class="hljs-comment"><span class="koboSpan" id="kobo.207.1"> The business rule implemented here indicates that grades</span></span>
<span class="hljs-doctag"><span class="koboSpan" id="kobo.208.1">///</span></span><span class="hljs-comment"><span class="koboSpan" id="kobo.209.1"> that came from prime users have 20% of increase</span></span>
<span class="hljs-doctag"><span class="koboSpan" id="kobo.210.1">///</span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="koboSpan" id="kobo.211.1">&lt;/summary&gt;</span></span>
<span class="hljs-doctag"><span class="koboSpan" id="kobo.212.1">///</span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="koboSpan" id="kobo.213.1">&lt;returns&gt;</span></span><span class="hljs-comment"><span class="koboSpan" id="kobo.214.1">the final grade from a prime user</span></span><span class="hljs-doctag"><span class="koboSpan" id="kobo.215.1">&lt;/returns&gt;</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.216.1">public</span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.217.1">override</span></span><span class="hljs-function"> </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.218.1">double</span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="koboSpan" id="kobo.219.1">CalculateGrade</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.220.1">()</span></span><span class="koboSpan" id="kobo.221.1">
    {
         </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.222.1">return</span></span><span class="koboSpan" id="kobo.223.1"> Grade * </span><span class="hljs-number"><span class="koboSpan" id="kobo.224.1">1.2</span></span><span class="koboSpan" id="kobo.225.1">;
    }
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.226.1">In the preceding code, you can see the usage of the polymorphism principle, where the calculation of evaluation for prime users will increase by 20%. </span><span class="koboSpan" id="kobo.226.2">Now, look at how easy it is to call different objects inherited by the same class. </span><span class="koboSpan" id="kobo.226.3">Since the collection content implements the same interface, </span><code class="inlineCode"><span class="koboSpan" id="kobo.227.1">IContentEvaluated</span></code><span class="koboSpan" id="kobo.228.1">, it can have basic and prime users, too:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.229.1">public</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.230.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.231.1">EvaluationService</span></span><span class="koboSpan" id="kobo.232.1">
{
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.233.1">public</span></span><span class="koboSpan" id="kobo.234.1"> IContentEvaluated Content { </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.235.1">get</span></span><span class="koboSpan" id="kobo.236.1">; </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.237.1">set</span></span><span class="koboSpan" id="kobo.238.1">; }
    </span><span class="hljs-doctag"><span class="koboSpan" id="kobo.239.1">///</span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="koboSpan" id="kobo.240.1">&lt;summary&gt;</span></span>
<span class="hljs-doctag"><span class="koboSpan" id="kobo.241.1">///</span></span><span class="hljs-comment"><span class="koboSpan" id="kobo.242.1"> No matter the Evaluation, the calculation will always get</span></span>
<span class="hljs-doctag"><span class="koboSpan" id="kobo.243.1">///</span></span><span class="hljs-comment"><span class="koboSpan" id="kobo.244.1"> values from the method CalculateGrade</span></span>
<span class="hljs-doctag"><span class="koboSpan" id="kobo.245.1">///</span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="koboSpan" id="kobo.246.1">&lt;/summary&gt;</span></span>
<span class="hljs-doctag"><span class="koboSpan" id="kobo.247.1">///</span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="koboSpan" id="kobo.248.1">&lt;returns&gt;</span></span><span class="hljs-comment"><span class="koboSpan" id="kobo.249.1">The average of the grade from</span></span>
<span class="hljs-doctag"><span class="koboSpan" id="kobo.250.1">///</span></span><span class="hljs-comment"><span class="koboSpan" id="kobo.251.1"> Evaluations</span></span>
<span class="hljs-doctag"><span class="koboSpan" id="kobo.252.1">///</span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="koboSpan" id="kobo.253.1">&lt;/returns&gt;</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.254.1">public</span></span><span class="hljs-function"> </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.255.1">double</span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="koboSpan" id="kobo.256.1">CalculateEvaluationAverage</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.257.1">()</span></span><span class="koboSpan" id="kobo.258.1">
    {
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.259.1">return</span></span><span class="koboSpan" id="kobo.260.1"> Content.Evaluations
                .Select(x =&gt; x.CalculateGrade())
                .Average();
    }
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.261.1">Object-oriented adoption can be considered mandatory when using C#. </span><span class="koboSpan" id="kobo.261.2">However, more specific usage requires study and practice. </span><span class="koboSpan" id="kobo.261.3">You, as a software architect, should always incentivize your team to</span><a id="_idIndexMarker333"/><span class="koboSpan" id="kobo.262.1"> study object-oriented analysis. </span><span class="koboSpan" id="kobo.262.2">The more abstract abilities they have, the easier code reuse will become.</span></p>
<h3 class="heading-3" id="_idParaDest-116"><span class="koboSpan" id="kobo.263.1">Generics</span></h3>
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.264.1">Generics</span></strong><span class="koboSpan" id="kobo.265.1"> were introduced in </span><a id="_idIndexMarker334"/><span class="koboSpan" id="kobo.266.1">C# in version 2.0 and are considered an approach that increases code reuse. </span><span class="koboSpan" id="kobo.266.2">It also maximizes type safety and performance.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.267.1">The basic principle of generics is that</span><a id="_idIndexMarker335"/><span class="koboSpan" id="kobo.268.1"> you can define in an interface, class, method, property, event, or even delegate a placeholder that will be replaced with a specific type later when one of the preceding entities is used. </span><span class="koboSpan" id="kobo.268.2">The opportunity you have with this feature is incredible since you can use the same code to run different generic versions of the type.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.269.1">The following code is a modification of </span><code class="inlineCode"><span class="koboSpan" id="kobo.270.1">EvaluationService</span></code><span class="koboSpan" id="kobo.271.1">, which was presented in the previous section. </span><span class="koboSpan" id="kobo.271.2">The idea here is to enable the generalization of the service, giving us the opportunity to define the goal of evaluation since its creation:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.272.1">public</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.273.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.274.1">EvaluationService</span></span><span class="koboSpan" id="kobo.275.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.276.1">T</span></span><span class="koboSpan" id="kobo.277.1">&gt; </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.278.1">where</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.279.1">T</span></span><span class="koboSpan" id="kobo.280.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.281.1">IContentEvaluated</span></span><span class="koboSpan" id="kobo.282.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.283.1">new</span></span><span class="koboSpan" id="kobo.284.1">()
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.285.1">This declaration indicates that any class that implements the </span><code class="inlineCode"><span class="koboSpan" id="kobo.286.1">IContentEvaluated</span></code><span class="koboSpan" id="kobo.287.1"> interface can be used for this service. </span><span class="koboSpan" id="kobo.287.2">The new constraint indicates this class must have a public parameter-less default constructor.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.288.1">The service will be responsible for creating the evaluated content:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.289.1">public</span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="koboSpan" id="kobo.290.1">EvaluationService</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.291.1">()</span></span><span class="koboSpan" id="kobo.292.1">
{
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.293.1">var</span></span><span class="koboSpan" id="kobo.294.1"> name = GetTypeOfEvaluation();
    content = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.295.1">new</span></span><span class="koboSpan" id="kobo.296.1"> T();
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.297.1">It is worth mentioning that this code works because all the classes are in the same assembly. </span><span class="koboSpan" id="kobo.297.2">The result of this modification can be checked in the instance creation of the service:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.298.1">var</span></span><span class="koboSpan" id="kobo.299.1"> service = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.300.1">new</span></span><span class="koboSpan" id="kobo.301.1"> EvaluationService&lt;CityEvaluation&gt;();
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.302.1">The good news is that now, you have a generic service that will automatically instantiate the </span><code class="inlineCode"><span class="koboSpan" id="kobo.303.1">list</span></code><span class="koboSpan" id="kobo.304.1"> object with the evaluations of the content you need. </span><span class="koboSpan" id="kobo.304.2">It’s worth mentioning that generics will obviously need more time dedicated to the first project’s construction. </span><span class="koboSpan" id="kobo.304.3">However, once the design is </span><a id="_idIndexMarker336"/><span class="koboSpan" id="kobo.305.1">done, you will have good, fast, and easy-to-maintain</span><a id="_idIndexMarker337"/><span class="koboSpan" id="kobo.306.1"> code. </span><span class="koboSpan" id="kobo.306.2">This is what we call reuse!</span></p>
<h2 class="heading-2" id="_idParaDest-117"><span class="koboSpan" id="kobo.307.1">What if the code is not reusable?</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.308.1">In fact, any code can be reusable. </span><span class="koboSpan" id="kobo.308.2">The key point here is that the code you intend to reuse must be well-written and follow</span><a id="_idIndexMarker338"/><span class="koboSpan" id="kobo.309.1"> good patterns for reuse. </span><span class="koboSpan" id="kobo.309.2">There are several reasons why code should be considered not ready for reuse:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.310.1">The code has not been tested before</span></strong><span class="koboSpan" id="kobo.311.1">: Before reusing code, it is a good approach to guarantee that it works.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.312.1">The code is duplicated</span></strong><span class="koboSpan" id="kobo.313.1">: If you have duplicate code, you will need to find each place where it is used so you only have a single version of the code being reused. </span><span class="koboSpan" id="kobo.313.2">If you find different versions of the code duplicated, you will need to define the best version of it to be considered the reusable one, and, at the same time, you will need to retest every replacement of the duplicated code to guarantee that the functionality of the software remains the same.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.314.1">The code is too complex to understand:</span></strong><span class="koboSpan" id="kobo.315.1"> Code that is reused in many places needs to be written with simplicity to enable easy understanding.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.316.1">The code has tight coupling</span></strong><span class="koboSpan" id="kobo.317.1">: This is a discussion related to composition versus inheritance when building separate class libraries. </span><span class="koboSpan" id="kobo.317.2">Classes (with interfaces) are usually much easier to reuse than base classes that can be inherited.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.318.1">In any of these cases, considering a refactoring strategy can be a great approach. </span><span class="koboSpan" id="kobo.318.2">When you refactor code, you write it in a better way, guaranteeing the code standards, reducing complexity, and respecting the input and output data that this code will process. </span><span class="koboSpan" id="kobo.318.3">This enables more comprehensive and lower-cost changes to be made to the code when the time comes. </span><span class="koboSpan" id="kobo.318.4">Martin Fowler, in his book </span><em class="italic"><span class="koboSpan" id="kobo.319.1">Refactoring</span></em><span class="koboSpan" id="kobo.320.1"> of 2018, indicates some reasons why you should consider refactoring:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.321.1">It improves software design</span></strong><span class="koboSpan" id="kobo.322.1">: The more </span><a id="_idIndexMarker339"/><span class="koboSpan" id="kobo.323.1">expert your team becomes, the better the design will be. </span><span class="koboSpan" id="kobo.323.2">A better software design will not only deliver faster coding but also bring us the opportunity to process more tasks in less time.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.324.1">It makes the software easier to understand</span></strong><span class="koboSpan" id="kobo.325.1">: Regardless of whether we are talking about juniors or seniors, good software needs to be understood by every developer in your team.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.326.1">It helps us find bugs</span></strong><span class="koboSpan" id="kobo.327.1">: While you are refactoring, you are reviewing code. </span><span class="koboSpan" id="kobo.327.2">During this process, you will find </span><a id="_idIndexMarker340"/><span class="koboSpan" id="kobo.328.1">business rules that may not have been well programmed, so you will probably find bugs. </span><span class="koboSpan" id="kobo.328.2">However, do not forget that the basis of </span><a id="_idIndexMarker341"/><span class="koboSpan" id="kobo.329.1">refactoring is keeping the behavior, so be sure that it is the correct moment for fixing issues.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.330.1">It makes our program quicker</span></strong><span class="koboSpan" id="kobo.331.1">: The result of refactoring will be code that will enable faster development in the future.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.332.1">When refactoring, we can guarantee good results and minimize the errors that occur during the journey by following these steps:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.333.1">Be sure you have a set of tests to guarantee the correct processing</span></strong><span class="koboSpan" id="kobo.334.1">: This set of tests will eliminate the fear of breaking the code.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.335.1">Eliminate duplication</span></strong><span class="koboSpan" id="kobo.336.1">: Refactoring is a good opportunity to eliminate code duplication.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.337.1">Minimize complexity</span></strong><span class="koboSpan" id="kobo.338.1">: Given that one goal is to make the code more understandable, following the best practices of programming, as mentioned in </span><em class="chapterRef"><span class="koboSpan" id="kobo.339.1">Chapter 4</span></em><span class="koboSpan" id="kobo.340.1">, </span><em class="italic"><span class="koboSpan" id="kobo.341.1">Best Practices in Coding C# 12</span></em><span class="koboSpan" id="kobo.342.1">, will help you reduce the complexity of the code.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.343.1">Clean up the design</span></strong><span class="koboSpan" id="kobo.344.1">: Refactoring is a good time to reorganize the design of your libraries, too. </span><span class="koboSpan" id="kobo.344.2">Do not forget to update them as well. </span><span class="koboSpan" id="kobo.344.3">This can be a great way to eliminate bugs and security issues.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.345.1">As a software architect, you will receive many refactoring demands from your team. </span><span class="koboSpan" id="kobo.345.2">The incentive for refactoring must be continuous, but you must remind your team that refactoring without following the preceding steps might be risky once it may cause bugs during the process. </span><span class="koboSpan" id="kobo.345.3">So, it is your responsibility to ensure that refactoring happens in a way that both enables fast programming and reduces the impact of unnecessary bugs caused by the refactoring process, thus delivering real business value.</span></p>
<h2 class="heading-2" id="_idParaDest-118"><span class="koboSpan" id="kobo.346.1">I have my libraries. </span><span class="koboSpan" id="kobo.346.2">How do I promote them?</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.347.1">Once you have made all the necessary effort to guarantee you have good libraries that can be reused in many of your </span><a id="_idIndexMarker342"/><span class="koboSpan" id="kobo.348.1">projects, you will find another difficult situation arises when enabling reusability: it is not so easy to let programmers know you have libraries ready to reuse.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.349.1">There are some simple approaches to documenting a library. </span><span class="koboSpan" id="kobo.349.2">As we mentioned when we talked about the development life cycle, documenting is a good way to help developers take notice of the libraries they have. </span><span class="koboSpan" id="kobo.349.3">There are two examples of documenting reusable code that we would like to mention in the following subsections.</span></p>
<h3 class="heading-3" id="_idParaDest-119"><span class="koboSpan" id="kobo.350.1">Documenting .NET libraries using DocFX</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.351.1">DocFX is a good option for </span><a id="_idIndexMarker343"/><span class="koboSpan" id="kobo.352.1">documenting a library using comments made in its code. </span><span class="koboSpan" id="kobo.352.2">By </span><a id="_idIndexMarker344"/><span class="koboSpan" id="kobo.353.1">simply adding the </span><code class="inlineCode"><span class="koboSpan" id="kobo.354.1">docfx.console</span></code><span class="koboSpan" id="kobo.355.1"> NuGet package, the tool allows you to create a task that will run once your library has been built:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.356.1"><img alt="Interface gráfica do usuário, Texto  Descrição gerada automaticamente" src="../Images/B19820_05_05.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.357.1">Figure 5.5: docfx.console NuGet library</span></p>
<p class="normal"><span class="koboSpan" id="kobo.358.1">The output of this compilation is a stylish static website that contains the documentation of your code:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.359.1"><img alt="" role="presentation" src="../Images/B19820_05_06.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.360.1">Figure 5.6: DocFx result</span></p>
<p class="normal"><span class="koboSpan" id="kobo.361.1">This website is useful because you can distribute the documentation to your team so that they can search for the</span><a id="_idIndexMarker345"/><span class="koboSpan" id="kobo.362.1"> libraries you have. </span><span class="koboSpan" id="kobo.362.2">You can </span><a id="_idIndexMarker346"/><span class="koboSpan" id="kobo.363.1">check the customizations of the output and find more information about it at </span><a href="https://dotnet.github.io/docfx/"><span class="url"><span class="koboSpan" id="kobo.364.1">https://dotnet.github.io/docfx/</span></span></a><span class="koboSpan" id="kobo.365.1">.</span></p>
<h3 class="heading-3" id="_idParaDest-120"><span class="koboSpan" id="kobo.366.1">Documenting a web API using Swagger</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.367.1">There is no doubt that a web API is one</span><a id="_idIndexMarker347"/><span class="koboSpan" id="kobo.368.1"> of the technologies that facilitates and </span><a id="_idIndexMarker348"/><span class="koboSpan" id="kobo.369.1">promotes code reuse. </span><span class="koboSpan" id="kobo.369.2">For this reason, ensuring good documentation and, more than that, respecting a standard is good practice and indicates that you are up to date with the approach to delivering reusable</span><a id="_idIndexMarker349"/><span class="koboSpan" id="kobo.370.1"> APIs. </span><span class="koboSpan" id="kobo.370.2">To do this, we have </span><strong class="keyWord"><span class="koboSpan" id="kobo.371.1">Swagger</span></strong><span class="koboSpan" id="kobo.372.1">, which respects the </span><strong class="keyWord"><span class="koboSpan" id="kobo.373.1">OpenAPI Specification</span></strong><span class="koboSpan" id="kobo.374.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.375.1">The OpenAPI Specification is known as the </span><a id="_idIndexMarker350"/><span class="koboSpan" id="kobo.376.1">standard for describing modern APIs. </span><span class="koboSpan" id="kobo.376.2">One of the most widely used tools for documenting APIs in an </span><strong class="keyWord"><span class="koboSpan" id="kobo.377.1">ASP.NET Core Web API</span></strong><span class="koboSpan" id="kobo.378.1"> is </span><code class="inlineCode"><span class="koboSpan" id="kobo.379.1">Swashbuckle.AspNetCore</span></code><span class="koboSpan" id="kobo.380.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.381.1">The good thing about using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.382.1">Swashbuckle.AspNetCore</span></code><span class="koboSpan" id="kobo.383.1"> library is where you can set the </span><strong class="keyWord"><span class="koboSpan" id="kobo.384.1">Swagger UI</span></strong><span class="koboSpan" id="kobo.385.1"> viewer for your web API, which </span><a id="_idIndexMarker351"/><span class="koboSpan" id="kobo.386.1">is a good, graphical way to distribute the APIs.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.387.1">We will learn how to use this library in </span><a id="_idIndexMarker352"/><span class="koboSpan" id="kobo.388.1">ASP.NET Core web APIs </span><a id="_idIndexMarker353"/><span class="koboSpan" id="kobo.389.1">in </span><em class="chapterRef"><span class="koboSpan" id="kobo.390.1">Chapter 15</span></em><span class="koboSpan" id="kobo.391.1">, </span><em class="italic"><span class="koboSpan" id="kobo.392.1">Applying Service-Oriented Architectures with .NET</span></em><span class="koboSpan" id="kobo.393.1">. </span><span class="koboSpan" id="kobo.393.2">Until </span><a id="_idIndexMarker354"/><span class="koboSpan" id="kobo.394.1">then, it is important to understand that this documentation will help not only your team but any developer who might use the APIs you are developing.</span></p>
<h1 class="heading-1" id="_idParaDest-121"><span class="koboSpan" id="kobo.395.1">Summary</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.396.1">This chapter aimed to help you understand the advantages of code reuse. </span><span class="koboSpan" id="kobo.396.2">It also gave you an idea about what code is not appropriate for reuse. </span><span class="koboSpan" id="kobo.396.3">This chapter also presented approaches for reusing and refactoring code.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.397.1">Considering that technology without processes does not take you anywhere, a process was presented that helps enable code reuse. </span><span class="koboSpan" id="kobo.397.2">This process is related to using already completed components from your library, identifying features in the software requirements specification that are candidates to be designed as library components, modifying the specification considering these features, designing the reusable components, and building the project architecture with the new component library version.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.398.1">Concluding this chapter, we presented .NET Standard libraries as an approach to reusing code for different C# platforms, indicating that .NET 8 and new versions allow the reuse of code across different platforms. </span><span class="koboSpan" id="kobo.398.2">This chapter also reinforced the principles of object-oriented programming when reusing code and presented generics as a sophisticated implementation to simplify the treatment of objects with the same characteristics.</span></p>
<h1 class="heading-1" id="_idParaDest-122"><span class="koboSpan" id="kobo.399.1">Questions</span></h1>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.400.1">Can copy-and-paste be considered code reuse? </span><span class="koboSpan" id="kobo.400.2">What are the impacts of this approach?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.401.1">How can you reuse code without copying and pasting it?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.402.1">Is there a process that can help with code reuse?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.403.1">What is the difference between .NET Standard and .NET Core?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.404.1">What are the advantages of creating a .NET Standard library?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.405.1">How does object-oriented analysis help with code reuse?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.406.1">How do generics help with code reuse?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.407.1">Will .NET Standard be replaced by .NET 6?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.408.1">What are the challenges related to refactoring?</span></li>
</ol>
<h1 class="heading-1" id="_idParaDest-123"><span class="koboSpan" id="kobo.409.1">Further reading</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.410.1">The following are some books and websites where you will find more information about the topics covered in this chapter:</span></p>
<ul>
<li class="bulletList"><em class="italic"><span class="koboSpan" id="kobo.411.1">Clean Code: A Handbook of Agile Software Craftmanship</span></em><span class="koboSpan" id="kobo.412.1"> by Martin, Robert C. </span><span class="koboSpan" id="kobo.412.2">Pearson Education, 2012.</span></li>
<li class="bulletList"><em class="italic"><span class="koboSpan" id="kobo.413.1">Clean Architecture: A Craftsman’s Guide to Software Structure and Design</span></em><span class="koboSpan" id="kobo.414.1"> by Martin, Robert C. </span><span class="koboSpan" id="kobo.414.2">Pearson Education, 2018.</span></li>
<li class="bulletList"><em class="italic"><span class="koboSpan" id="kobo.415.1">Design Patterns: Elements of Reusable Object-Oriented Software</span></em><span class="koboSpan" id="kobo.416.1"> by Eric Gamma [et al.] Addison-Wesley, 1994.</span></li>
<li class="bulletList"><em class="italic"><span class="koboSpan" id="kobo.417.1">Design Principles and Design Patterns</span></em><span class="koboSpan" id="kobo.418.1"> by Robert C. </span><span class="koboSpan" id="kobo.418.2">Martin, 2000.</span></li>
<li class="bulletList"><em class="italic"><span class="koboSpan" id="kobo.419.1">Refactoring</span></em><span class="koboSpan" id="kobo.420.1"> by Martin Fowler, 2018.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.421.1">If you need more information about .NET Standard:</span><ul>
<li class="bulletList"><a href="https://devblogs.microsoft.com/dotnet/introducing-net-standard/"><span class="url"><span class="koboSpan" id="kobo.422.1">https://devblogs.microsoft.com/dotnet/introducing-net-standard/</span></span></a></li>
<li class="bulletList"><a href="https://www.packtpub.com/application-development/net-standard-20-cookbook"><span class="url"><span class="koboSpan" id="kobo.423.1">https://www.packtpub.com/application-development/net-standard-20-cookbook</span></span></a></li>
<li class="bulletList"><a href="https://devblogs.microsoft.com/dotnet/the-future-of-net-standard/"><span class="url"><span class="koboSpan" id="kobo.424.1">https://devblogs.microsoft.com/dotnet/the-future-of-net-standard/</span></span></a></li>
<li class="bulletList"><a href="https://devblogs.microsoft.com/dotnet/the-future-of-net-standard/"><span class="url"><span class="koboSpan" id="kobo.425.1">https://devblogs.microsoft.com/dotnet/the-future-of-net-standard/</span></span></a></li>
</ul>
</li>
<li class="bulletList"><span class="koboSpan" id="kobo.426.1">A great guide for programming using the generics concept: </span><a href="https://docs.microsoft.com/pt-br/dotnet/csharp/programming-guide/generics/"><span class="url"><span class="koboSpan" id="kobo.427.1">https://docs.microsoft.com/pt-br/dotnet/csharp/programming-guide/generics/</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.428.1">Some links that may help you with the documentation of libraries and APIs:</span><ul>
<li class="bulletList"><a href="https://dotnet.github.io/docfx/"><span class="url"><span class="koboSpan" id="kobo.429.1">https://dotnet.github.io/docfx/</span></span></a></li>
<li class="bulletList"><a href="https://github.com/domaindrivendev/Swashbuckle.AspNetCore"><span class="url"><span class="koboSpan" id="kobo.430.1">https://github.com/domaindrivendev/Swashbuckle.AspNetCore</span></span></a></li>
<li class="bulletList"><a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/web-api-help-pages-using-swagger"><span class="url"><span class="koboSpan" id="kobo.431.1">https://docs.microsoft.com/en-us/aspnet/core/tutorials/web-api-help-pages-using-swagger</span></span></a></li>
</ul>
</li>
</ul>
<h1 class="heading-1"><span class="koboSpan" id="kobo.432.1">Learn more on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.433.1">To join the Discord community for this book – where you can share feedback, ask questions to the authors, and learn about new releases – follow the QR code below:</span></p>
<p class="normal"><a href="https://packt.link/SoftwareArchitectureCSharp12Dotnet8"><span class="url"><span class="koboSpan" id="kobo.434.1">https://packt.link/SoftwareArchitectureCSharp12Dotnet8</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.435.1"><img alt="" role="presentation" src="../Images/QR_Code175081751210902046.png"/></span></p>
</div>
</body></html>