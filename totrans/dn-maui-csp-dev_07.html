<html><head></head><body>
		<div><h1 id="_idParaDest-123" class="chapter-number"><a id="_idTextAnchor129"/>7</h1>
			<h1 id="_idParaDest-124"><a id="_idTextAnchor130"/>Understanding Navigation</h1>
			<p>Until now, we’ve been working with one page at a time, with no way to get to a page except by setting it in <code>AppShell.xaml</code>. Of course, this will not do for a real application, so in this chapter, we’ll look at various options for navigating from page to page. As you’ll see, .NET MAUI uses <em class="italic">shell navigation</em>, a process we’ll look at in some depth.</p>
			<p>This chapter includes the following topics:</p>
			<ul>
				<li>Exploring the TabBar</li>
				<li>Creating the About and Buddies pages</li>
				<li>Shell navigation</li>
				<li>Routing</li>
				<li>Passing values from page to page</li>
			</ul>
			<h1 id="_idParaDest-125"><a id="_idTextAnchor131"/>Technical requirements</h1>
			<p>To get the most out of this chapter, you’ll need a copy of Visual Studio. The source code for the completed code shown in this chapter can be found here: <a href="https://github.com/PacktPublishing/.NET-MAUI-for-C-Sharp-Developers/tree/Navigation">https://github.com/PacktPublishing/.NET-MAUI-for-C-Sharp-Developers/tree/Navigation</a>. If you want to follow along, start with the code from the completion of <a href="B19723_06.xhtml#_idTextAnchor115"><em class="italic">Chapter 6</em></a>.</p>
			<h1 id="_idParaDest-126"><a id="_idTextAnchor132"/>Exploring the TabBar</h1>
			<p>ForgetMeNot’s principal form of navigation will be the <code>TabBar control</code>. A Tab Bar is a way to jump to a specific <a id="_idIndexMarker295"/>page without going through other pages. It consists of icons, and sometimes descriptive text, across the bottom of every page, as shown in the following screenshot:</p>
			<div><div><img src="img/B19723_Figure_7.1.jpg" alt="Figure 7.1 – Tab Bar in the completed project&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.1 – Tab Bar in the completed project</p>
			<p>The four tabs at the bottom, as shown in <em class="italic">Figure 7</em><em class="italic">.1</em>, will take the user directly to the respective page.</p>
			<p class="callout-heading">The Home page</p>
			<p class="callout">Here you <a id="_idIndexMarker296"/>see the tabs we created on <code>MainPage,</code> which we created in <a href="B19723_04.xhtml#_idTextAnchor054"><em class="italic">Chapter 4</em></a>, one of which we’ve titled <strong class="bold">Home</strong>.</p>
			<p>You create <code>TabBar</code> in <code>AppShell.xaml</code>. Within the <code>TabBar</code> tags, you provide one <code>ShellContent</code> element for each page. <code>ShellContent</code> has a <code>Title</code> property (the text displayed), an <code>Icon</code> property (the image displayed), and <code>ContentTemplate</code>, which specifies the content for this tab:</p>
			<pre class="source-code">
&lt;TabBar &gt;
    &lt;ShellContent
        Title="Home"
        ContentTemplate="{DataTemplate view:MainPage}"
        Icon="icon_home" /&gt;
    &lt;ShellContent
        Title="About"
        ContentTemplate="{DataTemplate view:About}"
        Icon="icon_about" /&gt;
    &lt;ShellContent
        Title="Preferences"
        ContentTemplate="{DataTemplate view:Preferences}"
        Icon="icon_prefs" /&gt;
    &lt;ShellContent
        Title="Buddies"
        ContentTemplate="{DataTemplate view:BuddyList}"
        Icon="icon_buddies" /&gt;
&lt;/TabBar&gt;</pre>
			<p>Next, we need to <a id="_idIndexMarker297"/>create the pages that each <code>ContentTemplate</code> points to so that we can see <code>TabBar</code> at work.</p>
			<h1 id="_idParaDest-127"><a id="_idTextAnchor133"/>Creating the About and Buddies pages</h1>
			<p>To see this navigation <a id="_idIndexMarker298"/>work, you’ll need to add the missing pages: <strong class="bold">About</strong> and <strong class="bold">Buddies</strong>. Creating the <strong class="bold">About</strong> page is very <a id="_idIndexMarker299"/>straightforward. Right-click on the <strong class="bold">View</strong> folder and choose <strong class="bold">Add New Item</strong>. If needed, expand the <strong class="bold">AddNewItem</strong> dialog.</p>
			<p>From the left panel, choose <code>AboutPage.xaml</code>, as shown in <em class="italic">Figure 7</em><em class="italic">.2</em>:</p>
			<div><div><img src="img/B19723_Figure_7.2.jpg" alt="Figure 7.2 – Creating AboutPage&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.2 – Creating AboutPage</p>
			<p>The <strong class="bold">About</strong> page is very simple and does not require any new types of controls.</p>
			<h2 id="_idParaDest-128"><a id="_idTextAnchor134"/>Assembling the About page</h2>
			<p>Let’s assemble the <code>BindingContext</code>. Finally, we’ll need <code>ViewModel</code>. Eventually, the <strong class="bold">About</strong> page will ask the service for its version number, but for now, we’ll hardcode that:</p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage xmlns="http://schemas.microsoft.com/dotnet/
  2021/maui"
   xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ForgetMeNotDemo.View.AboutPage"
             Title="About"&gt;
    &lt;VerticalStackLayout Margin="10" Spacing="10"&gt;
        &lt;HorizontalStackLayout Spacing="10"&gt;
            &lt;Label
                FontAttributes="Bold"
                FontSize="22"
                Text="About this app"
                VerticalOptions="End" /&gt;
            &lt;Label
                FontSize="22"
                Text="v0.1"
                VerticalOptions="End" /&gt;
        &lt;/HorizontalStackLayout&gt;
        &lt;HorizontalStackLayout Spacing="10"&gt;
            &lt;Label
                FontAttributes="Bold"
                FontSize="22"
                Text="Api Version"
                VerticalOptions="End" /&gt;
            &lt;Label
                FontSize="22"
                Text="{Binding ApiVersion}"
                VerticalOptions="End" /&gt;
        &lt;/HorizontalStackLayout&gt;
        &lt;Label
            HeightRequest="60"
            Text="This app is written in XAML and C# with
            .NET MAUI by Jesse Liberty and Rodrigo Juarez."
            VerticalTextAlignment="Center" /&gt;
        &lt;Label
            HeightRequest="60"
            Text="Concept and original design by Robin
              Liberty"
            VerticalTextAlignment="Center" /&gt;
        &lt;Label FontSize="Small" Text="Icons from IconScout:
          https://iconscout.com" /&gt;
    &lt;/VerticalStackLayout&gt;
&lt;/ContentPage&gt;</pre>
			<p>The code-behind file looks<a id="_idIndexMarker301"/> like this (for now):</p>
			<pre class="source-code">
  public AboutPage()
  {
    BindingContext = new AboutViewModel();
    InitializeComponent();
  }</pre>
			<p>And, finally, <code>ViewModel</code> looks<a id="_idIndexMarker302"/> like this (for now):</p>
			<pre class="source-code">
namespace ForgetMeNotDemo.ViewModel;
[ObservableObject]
public partial class AboutViewModel
{
  [ObservableProperty] private string apiVersion;
  public AboutViewModel()
  {
    apiVersion = "1.0";
  }
}</pre>
			<p>The <strong class="bold">About</strong> page currently looks like this:</p>
			<div><div><img src="img/B19723_Figure_7.3.jpg" alt="Figure 7.3 – The About page&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.3 – The About page</p>
			<p>That will give us something to work with.</p>
			<p>Next, we need a <strong class="bold">BuddiesPage</strong>, that is, a page that lists all the user’s friends and relatives. Each Buddy<a id="_idIndexMarker303"/> will have a list of <strong class="bold">preferences</strong> that we can use when it is time to buy them a present.</p>
			<p>For now, we’ll just use the out-of-the-box page that we get when we right-cli<a id="_idTextAnchor135"/>ck on <strong class="bold">View</strong> and add a new <strong class="bold">.NET MAUI XAML</strong> page, as shown in <em class="italic">Figure 7</em><em class="italic">.4</em>:</p>
			<div><div><img src="img/B19723_Figure_7.4.jpg" alt="Figure 7.4 – Creating the Buddies page&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.4 – Creating the Buddies page</p>
			<p>Next, open <code>BuddiesPage.xaml</code> and make one small change. Where the <code>Text</code> field of the <code>Label</code>  control says, <code>Welcome to .NET MAUI!</code> change it to <code>Buddies Page</code> so that we’ll know <a id="_idIndexMarker304"/>where we are when we navigate there. If you want, add a space between the words in the title as well:</p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage xmlns="http://schemas.microsoft.com/dotnet/
  2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ForgetMeNotDemo.View.BuddiesPage"
             Title="Buddies Page"&gt;
    &lt;VerticalStackLayout&gt;
        &lt;Label
            Text="Buddies Page"
            VerticalOptions="Center"
            HorizontalOptions="Center" /&gt;
    &lt;/VerticalStackLayout&gt;
&lt;/ContentPage&gt;</pre>
			<p>Next, create <code>BuddiesViewModel</code> by right-clicking on the <strong class="bold">ViewModel</strong> folder and choosing <strong class="bold">Add</strong> | <strong class="bold">Class</strong>.</p>
			<p>Finally, we need to tell the app where to start. We’ll do that in <code>App.xaml.cs</code> where we will set <code>MainPage</code> to be the new <code>AppShell</code> (which is how we’ll kick off the program and set ourselves up for shell navigation as described):</p>
			<pre class="source-code">
namespace ForgetMeNotDemo;
public partial class App : Application
{
public App()
{
InitializeComponent();
MainPage = new AppShell();
}
}</pre>
			<p>Here is what <code>AppShell.xaml</code> should<a id="_idIndexMarker305"/> look like now:</p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;Shell
    Shell.FlyoutBehavior="Disabled"
    x:Class="ForgetMeNotDemo.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:local="clr-namespace:ForgetMeNotDemo"
    xmlns:view="clr-namespace:ForgetMeNotDemo.View"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"&gt;
    &lt;TabBar&gt;
        &lt;ShellContent
            Title="Home"
            ContentTemplate="{DataTemplate view:MainPage}"
            Icon="icon_home" /&gt;
        &lt;ShellContent
            Title="About"
            ContentTemplate="{DataTemplate view:AboutPage}"
            Icon="icon_about" /&gt;
        &lt;ShellContent
            Title="Preferences"
            ContentTemplate="{DataTemplate
              view:PreferencesPage}"
            Icon="icon_prefs" /&gt;
        &lt;ShellContent
            Title="Buddies"
            ContentTemplate="{DataTemplate
              view:BuddiesPage}"
            Icon="icon_buddies" /&gt;
    &lt;/TabBar&gt;
&lt;/Shell&gt;</pre>
			<p>One more thing. Notice that each tab has an icon. To make that work and look as intended, you’ll either need to find icons online or get them by checking out the source code for this chapter in the <code>Navigation</code> branch.</p>
			<p>In either case, simply<a id="_idIndexMarker306"/> copy the images to the <code>resources\image</code> folder of your project, replacing the three dots with the full path on your computer.</p>
			<p class="callout-heading">Image support</p>
			<p class="callout">Those of you who have worked with <code>Xamarin.Forms</code> will be delighted to know that the days of creating different size images and distributing them to the various folders for both iOS and Android are now over. Put the <code>.svg</code> file into the <code>images</code> folder and .NET MAUI will do all the rest for you! (You can use a <code>.png</code> file, but it won’t scale as nicely. To make the point, I made our flower image a <code>.</code><code>png</code> file.)</p>
			<p>Run the application and click on the various tabs. You should see it navigating to the various pages we’ve created. Notice in <em class="italic">Figure 7</em><em class="italic">.5</em> that the current tab <em class="italic">lights up</em> – you get the effect for free and you do not have to create two icons, one for each of the currently selected and not selected icons.</p>
			<div><div><img src="img/B19723_Figure_7.5.jpg" alt="Figure 7.5 – The Home tab “lit up”&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.5 – The Home tab “lit up”</p>
			<p>Now that our tabs and pages are in place, it is time to look at how you move from one page to another when there <a id="_idIndexMarker307"/>aren’t tabs for the pages you want to navigate to.</p>
			<h1 id="_idParaDest-129"><a id="_idTextAnchor136"/>Shell navigation</h1>
			<p>That would be all you need to know about navigation if your app was just going to have the four pages that we’re <a id="_idIndexMarker308"/>accessing by the TabBar. Of course, you’ll almost certainly have more pages than that, and you’ll want a way to navigate from one page to another.</p>
			<p>To see navigation from one page to another without using <code>TabBar</code>, we’ll need another page to navigate to. Let’s create the <strong class="bold">BuddyDetailsPage</strong>, which we’ll navigate to from the <strong class="bold">Buddies</strong> page.</p>
			<p>Once again, take the out-of-the-box page, but change <code>Label</code> to say <code>Buddy </code><code>Details Page</code>:</p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage xmlns="http://schemas.microsoft.com/dotnet/
  2021/maui"
     xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
         x:Class="ForgetMeNotDemo.View.BuddyDetailsPage"
             Title="Buddy Details Page"&gt;
    &lt;VerticalStackLayout&gt;
        &lt;Label
            Text="Buddy Details Page"
            VerticalOptions="Center"
            HorizontalOptions="Center" /&gt;
    &lt;/VerticalStackLayout&gt;
&lt;/ContentPage&gt;</pre>
			<p>Next, return to the <code>Button</code> that says <code>Go to details</code> and give it the <code>GoToDetailsCommand</code> command:</p>
			<pre class="source-code">
        &lt;Button Text="Go to details"
               Command="{Binding GoToDetailsCommand}" /&gt;</pre>
			<p>In the <code>GoToDetails</code> command. The goal of our handler will be to<a id="_idIndexMarker309"/> navigate to <strong class="bold">BuddyDetails</strong>. We do that with <em class="italic">shell navigation</em>. Here’s the code to do so:</p>
			<pre class="source-code">
[RelayCommand]
private async Task GoToDetails()
{
  await Shell.Current.GoToAsync("buddydetailspage");
}</pre>
			<p class="callout-heading">BindingContext</p>
			<p class="callout">Remember that for the <code>GoToDetails</code> command to work, you must bind the XAML to <code>ViewModel</code> by <a id="_idIndexMarker310"/>setting <code>BindingContext</code> in the code-behind file.</p>
			<p>In this common construct, you pass in the page name to the <code>GoToAsync</code> static method on <code>Shell.Current</code>. The key question is, <em class="italic">how does it know what buddydetailspage is</em>, <em class="italic">given that</em> <code>buddydetailspage</code> <em class="italic">is a string?</em> The answer to that lies in <em class="italic">routing</em>, which we’ll cover next.</p>
			<h1 id="_idParaDest-130"><a id="_idTextAnchor137"/>Routing</h1>
			<p>In .NET MAUI, you<a id="_idIndexMarker311"/> register your routes in <code>AppShell.xaml.cs</code>. For example, to connect the <code>buddydetailspage</code> string to the actual <code>BuddyDetailsPage,</code> you would add this:</p>
			<pre class="source-code">
Routing.RegisterRoute("buddydetailspage",
  typeof(BuddyDetailsPage));</pre>
			<p>We’ll create a routing entry for all of the pages, including the ones we can access through tabs. This will give us the<a id="_idIndexMarker312"/> greatest flexibility:</p>
			<pre class="source-code">
public partial class AppShell : Shell
{
  public AppShell()
  {
    InitializeComponent();
    Routing.RegisterRoute("buddiespage",
      typeof(BuddiesPage));
    Routing.RegisterRoute("buddydetailspage",
      typeof(BuddyDetailsPage));
    Routing.RegisterRoute("aboutpage", typeof(AboutPage));
    Routing.RegisterRoute("preferencespage",
      typeof(PreferencesPage));
    Routing.RegisterRoute("loginpage", typeof(LoginPage));
    Routing.RegisterRoute("mainpage", typeof(MainPage));
  }
}</pre>
			<p>Now the routing works as if by magic. You tell it where you want to go, passing in the route, and .NET MAUI handles the navigation. Start up the program if it isn’t already running and tap on the <strong class="bold">Buddies</strong> tab. On the <strong class="bold">Buddies</strong> page, tap on the <strong class="bold">Details</strong> button, and hey presto! You should be on the <strong class="bold">Buddy Details</strong> page. Easy peasy.</p>
			<p>It’s great to be able to move from one page to another, but often the first page has data that the second page needs. So, let’s look at how you send that data to the second page.</p>
			<h1 id="_idParaDest-131"><a id="_idTextAnchor138"/>Passing values from page to page</h1>
			<p>When navigating from one page to another, you’ll often want to pass in a value. There are a few ways to do this; here are<a id="_idIndexMarker313"/> the two most common:</p>
			<ol>
				<li>Using the <code>url (?)</code> syntax as you might with a URL to navigate to a page on the web</li>
				<li>Using navigation parameters with a dictionary</li>
			</ol>
			<h2 id="_idParaDest-132"><a id="_idTextAnchor139"/>Passing values with the url (?) syntax</h2>
			<p>Let’s return to the <code>Buddies</code> page. Right now, the <code>Button</code> has a <code>GoToDetailsCommand</code><strong class="bold"> </strong>command. But the <strong class="bold">Details</strong> page <a id="_idIndexMarker314"/>needs to know which Buddy to show <a id="_idIndexMarker315"/>details about.</p>
			<p>We’ll modify <code>RelayCommand</code> in <code>ViewModel</code> to pass in <code>BuddyId</code>. To make this work, we need a <code>Buddy</code> object (which will have the <code>Id</code>). However, Buddy is just one of the types of users of this program, so let’s start by defining the <code>User</code> type:</p>
			<pre class="source-code">
[ObservableObject]
public partial class User
{
    [ObservableProperty]
    private string name;
    [ObservableProperty]  [1]
    private string id;
    [ObservableProperty]
    private List&lt;Buddy&gt; buddies;   [2]
    [ObservableProperty]
 //   private List&lt;Invitation&gt; invitations; [3]
    [ObservableProperty]
    private List&lt;Preference&gt; preferences; [4]
}</pre>
			<p>[1] Here is the <code>Id</code> property we’ll need.</p>
			<p>[2] A user may have a collection of <code>buddies</code> (we’ll come back to this).</p>
			<p>[3] A user may have a collection of <code>invitations</code>, which are sent out to potential <code>buddies</code> (we’ll come back to this too).</p>
			<p>[4] The user has a list of <code>preference</code> objects, as we’ve seen earlier.</p>
			<p>The <code>Buddy</code> class derives from the <code>User</code> class. Here it is in full, though we won’t be using most of these <a id="_idIndexMarker316"/>properties for now:</p>
			<pre class="source-code">
public partial class Buddy : User
{
    [ObservableProperty] private string emailAddress;
    [ObservableProperty] private string? phoneNumber;
    [ObservableProperty] private string?
      mailingAddressLine1;
    [ObservableProperty] private string?
      mailingAddressLine2;
    [ObservableProperty] private string? website;
    [ObservableProperty] private string? twitter;
    [ObservableProperty] private string? facebook;
    [ObservableProperty] private string? instagram;
    [ObservableProperty] private string? linkedIn;
    [ObservableProperty] private string? venmoName;
    [ObservableProperty] private DateTime buddySince;
}</pre>
			<p class="callout-heading">Inheriting ObservableObject</p>
			<p class="callout">Notice that <code>Buddy</code> is not marked with the <code>ObservableObject</code> attribute. That is because it inherits from <code>User</code>, which is marked as <code>ObservableObject</code>.</p>
			<p>We will want to give<a id="_idIndexMarker317"/> the new page the <code>Id</code> of the <code>Buddy</code> object we’re passing in. We can do that using either of the methods for passing data (for example, the URL approach or the dictionary).</p>
			<h3>Passing the Buddy Id</h3>
			<p>Returning to the <code>Id</code> to the <code>Id</code> using the <code>?</code> syntax:</p>
			<pre class="source-code">
private async Task GoToDetails()
{
  await Shell.Current.GoToAsync
    ($"buddydetailspage?id={Id}");
}</pre>
			<p>If you want to pass two properties, for example, <code>Id</code> and <code>Name</code>, you concatenate them with <code>&amp;&amp;</code>. This should all be familiar to you from URLs you might use in a browser:</p>
			<pre class="source-code">
private async Task GoToDetails()
{
  await Shell.Current.GoToAsync
    ($"buddydetailspage?id={Id}&amp;&amp;name={"BuddyName"});
}</pre>
			<p>This won’t work if <a id="_idIndexMarker319"/>we don’t have <code>Id</code> and <code>Name</code> in <code>BuddiesViewModel</code>, so let’s add that here:</p>
			<pre class="source-code">
public partial class BuddiesViewModel
{
  [ObservableProperty] private string id = "001";
  [ObservableProperty] private string name = "jesse";</pre>
			<p>The call to <code>GoToAsync</code> will change pages to <code>BuddyDetailsPage</code> and send the parameters to the associated <code>ViewModel</code> (<code>BuddyDetailsViewModel</code>).</p>
			<h3>QueryProperty</h3>
			<p>We mark up the receiving <code>ViewModel</code> with the <code>QueryProperty</code> attribute along with the name of the property<a id="_idIndexMarker320"/> to associate it with <code>ViewModel</code> and the string used in the <code>GoToAsync</code> method.</p>
			<p>To make that clearer, let’s create <code>BuddyDetailsViewModel</code>, and mark it as <code>ObservableObject</code>. We’ll give it two properties: <code>Id</code> and <code>Name</code>:</p>
			<pre class="source-code">
[ObservableObject]
public partial class BuddyDetailsViewModel
{
  [ObservableProperty] private string id;
  [ObservableProperty] private string name;
}</pre>
			<p>We want the first parameter we passed in (<code>id</code>) to be assigned to the <code>Id</code> property, and we want the second parameter we passed in to be assigned to the <code>Name</code> property. For that, we use the <code>QueryProperty</code> attribute (placed above the class):</p>
			<pre class="source-code">
using CommunityToolkit.Mvvm.ComponentModel;
namespace ForgetMeNotDemo.ViewModel;
[ObservableObject]
[QueryProperty(nameof(Id), "id")]
[QueryProperty(nameof(Name), "buddyname")]
public partial class BuddyDetailsViewModel
{
  [ObservableProperty] private string id;
  [ObservableProperty] private string name;
}</pre>
			<p>Now that you are <a id="_idIndexMarker321"/>comfortable with the two ways to pass data, let’s take a look at how we can integrate that into the flow of the program.</p>
			<h3>Putting it together</h3>
			<p>On the <strong class="bold">Buddies</strong> page, the <a id="_idIndexMarker322"/>user clicks on <strong class="bold">GoToDetails</strong>.</p>
			<p>This fires the <code>GoToDetails</code> relay command in <code>BuddiesViewModel</code>.</p>
			<p>That method calls the following:</p>
			<pre class="source-code">
await Shell.Current.GoToAsync
  ($"buddydetailspage?id={{Id}}&amp;&amp;buddyname={{Name}}");</pre>
			<p>This call to <code>GoToAsync</code> transfers us to <code>BuddyDetailsPage</code>, but passes in the two parameters (<code>Id</code> and <code>Name</code>) to <code>BuddyDetailsViewModel</code>!</p>
			<p><code>BuddyDetailsViewModel</code> parses the <code>QueryProperty</code> attributes and distributes the values to the associated properties.</p>
			<p>The net effect is that you are now on <code>BuddyDetailsPage</code> with the <code>Id</code> and <code>Name</code> properties in the associated <code>ViewModel</code> populated with values.</p>
			<p>To see this at work, go to the <code>BuddyDetailsPage.xaml</code> file and add two Label controls, one<a id="_idIndexMarker323"/> bound to <code>Id</code> and the other to <code>Name</code>.</p>
			<p>Here’s the XAML page:</p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage
    Title="Buddy Details Page"
    x:Class="ForgetMeNotDemo.View.BuddyDetailsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"&gt;
    &lt;VerticalStackLayout&gt;
        &lt;Label
            HorizontalOptions="Center"
            Text="Buddy Details Page"
            VerticalOptions="Center" /&gt;
        &lt;Label Text="{Binding Id}"/&gt;
        &lt;Label Text="{Binding Name}"/&gt;
    &lt;/VerticalStackLayout&gt;
&lt;/ContentPage&gt;</pre>
			<p>Remember to set <code>BindingContext</code> in the code-behind page.</p>
			<p>Run the program and click on the <strong class="bold">Buddies</strong> tab. On the <strong class="bold">Buddies</strong> page, click on <strong class="bold">GoToDetails</strong> You will be transferred<a id="_idIndexMarker324"/> to the <strong class="bold">BuddiesDetails</strong> page, and the two values will be displayed.</p>
			<p class="callout-heading">Stop right there</p>
			<p class="callout">Make sure you understand how all this hangs together before going ahead. If necessary, re-read starting with the <em class="italic">Passing values from page to </em><em class="italic">page</em> section.</p>
			<h2 id="_idParaDest-133"><a id="_idTextAnchor140"/>Passing values with a dictionary</h2>
			<p>At times, you will want to pass an entire object (or more) to the receiving <code>ViewModel</code>. You do this by instantiating a dictionary<a id="_idIndexMarker325"/> where the key is a string, and the value is an object.</p>
			<p>Let’s revise <code>GoToDetails</code> to take an entire <code>Buddy</code> object. First, we need to create a <code>Buddy</code> object and put it into <code>BuddyViewModel</code>:</p>
			<pre class="source-code">
[ObservableProperty] private Buddy rodrigo = new Buddy
{
  Id = "002",
  Name = "Rodrigo Juarez",
  Website = "https://jesseliberty.com"
};</pre>
			<p>Next, we need to create our dictionary. We can pick any arbitrary string as the key, and pass in the <code>Buddy</code> object (<code>rodrigo</code>) that we just created:</p>
			<pre class="source-code">
[RelayCommand]
private async Task GoToDetails()
{
  var navigationParameter = new Dictionary&lt;string, object&gt;
  {
    {"TheBuddy", Rodrigo}
  };
  await Shell.Current.GoToAsync($"buddydetailspage",
    navigationParameter);
}</pre>
			<p>Once again, we are redirected to the <code>Buddy</code> object itself is passed in. At the top of the <code>Buddy</code> object field to <a id="_idIndexMarker326"/>assign the incoming <code>Buddy</code> to, and we use the key from the dictionary:</p>
			<pre class="source-code">
[ObservableObject]
[QueryProperty(nameof(MyBuddy), "TheBuddy")]
public partial class BuddyDetailsViewModel
{</pre>
			<p>We’ll add three properties for the page to bind to:</p>
			<pre class="source-code">
[ObservableProperty] private string id;
[ObservableProperty] private string name;
[ObservableProperty] private string? website;</pre>
			<p>Notice that <code>website</code> is a nullable string. This is because it is marked as <code>nullable</code> in the <code>Buddy</code> definition. To make this work, you’ll want to enable <code>nullable</code>, at least on this page if not for the project.</p>
			<p>The easiest way to manage the incoming <code>Buddy</code> object is as follows:</p>
			<pre class="source-code">
private Buddy myBuddy;
public Buddy MyBuddy
{
  get =&gt; myBuddy;
  set
  {
    Id = value.Id;
    Name = value.Name;
    Website = value.Website;
  }
}</pre>
			<p>If you go to <code>BuddyDetailsPage.xaml</code> and add a<a id="_idIndexMarker327"/> label whose text binds to <code>website</code>, the result will be as shown in <em class="italic">Figure 7</em><em class="italic">.5</em>:</p>
			<div><div><img src="img/B19723_Figure_7.6.jpg" alt="Figure 7.6 – The Buddy Details page after passing in the Buddy object&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.6 – The Buddy Details page after passing in the Buddy object</p>
			<h3>Putting it together</h3>
			<p>This can, at first, be confusing <a id="_idIndexMarker328"/>enough that it is worth going through the flow step by step.</p>
			<p>In <code>BuddiesPage,</code> the user clicks on <code>GoToDetailsCommand</code>, which is handled in <code>BuddiesViewModel</code>.</p>
			<p>In <code>ViewModel</code>, we have a <code>Buddy</code> property (as defined in the <code>Models</code> folder). The identifier for that <code>Buddy</code> object is <code>rodrigo</code>, and three of its fields are initialized.</p>
			<p>We then assemble a dictionary to use as the parameter to the <code>GoToAsync</code> method. We pass in the name of the page we want to navigate to (as recorded in the <code>AppShell.xaml.cs</code> file in the <code>Routing.RegisterRoute</code> method).</p>
			<p>We also pass in the dictionary we just created.</p>
			<p>.NET MAUI navigates to the page, and our dictionary is routed to the associated <code>ViewModel</code> (<code>BuddyDetailsViewModel</code>). There, the <code>QueryProperty</code> attribute associates the <code>MyBuddy</code> property with <code>queryid</code>, which we used in <code>BuddiesPage</code>.</p>
			<p>The property it matches is<a id="_idIndexMarker329"/> a <code>Buddy</code> type, so we can set the local properties with the properties from the <code>Buddy</code> object passed in (<code>value</code>).</p>
			<p>Since <code>BuddyDetailsPage</code> has <code>Labels</code> that bind to these properties in <code>ViewModel</code>, the right things are displayed.</p>
			<h1 id="_idParaDest-134"><a id="_idTextAnchor141"/>Summary</h1>
			<p>In this chapter, we have focused on how you can move from one page to another without using <code>TabBar</code>, by using shell navigation and routesinstead.. We also looked at how you can pass data from the first page to the second using either URL syntax or by passing a dictionary containing the object or values you want to send.</p>
			<p>In the next chapter, we will examine storing and retrieving data.</p>
			<h1 id="_idParaDest-135"><a id="_idTextAnchor142"/>Quiz</h1>
			<ol>
				<li>Where do you define <code>TabBar</code>?</li>
				<li>What are the three properties of <code>TabBar ShellContent</code>?</li>
				<li>Where are routes registered?</li>
				<li>What is the method for navigating to another page?</li>
				<li>What are the ways we’ve seen to pass data to a page?</li>
			</ol>
			<h1 id="_idParaDest-136"><a id="_idTextAnchor143"/>You try it</h1>
			<p>Modify <code>RelayCommand Submit</code> in <code>LoginViewModel</code> to display the progress bar and then navigate to the <strong class="bold">Buddies</strong> page. Pass in the username and password, first as strings, then as a dictionary. Temporarily modify the <strong class="bold">Buddies</strong> page to display the values passed in.</p>
		</div>
	</body></html>