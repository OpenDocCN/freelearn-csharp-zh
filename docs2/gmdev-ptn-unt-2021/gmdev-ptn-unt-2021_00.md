前言

第一原理，克拉丽斯：简单。阅读马库斯·奥勒留斯。

“对每一件特定的事情，问：它本身是什么？它的本质是什么？”

– 汉尼拔·莱克特

这段引言来自我最喜欢的电影之一，总结了我的学习方法。在游戏行业工作了十多年后，我发现掌握复杂系统的唯一正确方法是将它分解为其最基本的组成部分。换句话说，我在掌握最终形式之前试图理解核心成分。在这本书的整个过程中，你会发现我以一种简单但具有情境性的方法来呈现每个模式。

目标不是使主题内容变得简单化，而是通过隔离每个设计模式背后的核心概念来学习，这样我们就可以观察它们并学习它们的复杂性。我在游戏行业作为设计师和程序员时学到了这种方法。我们经常在被称为“健身房”的独立级别中为我们的游戏构建组件和系统。我们会花费数周时间迭代、测试和调整我们游戏中的每个成分，直到我们理解了如何使它们作为一个整体工作。我以这种方式写这本书，与我的游戏开发方法保持一致，这样你作为读者就可以沉浸在这个主题中，同时培养一些有助于你职业生涯的好习惯。

然而，重要的是要声明，这本书的内容并不是关于 Unity 中模式的终极参考。它只是对这个主题的介绍，而不是学习过程的最终目的地。我并不把自己定位为首要的专家，也不希望我的话在开发者中成为圣经。我只是一个试图找到优雅方式在 Unity 中使用标准软件设计模式的开发者，并想分享我所发现的内容。因此，作为读者，我鼓励你批评、研究、定制和改进本书中呈现的每一件事。

# 第一章：这本书面向谁

在撰写这本书的过程中，我决定针对目标受众采用一个特定的心理模型，主要原因是在游戏开发方面几乎不可能写一本书来满足每种潜在的读者类型，主要是因为游戏开发是一个多元化的行业，有如此多的平台和类型，每种都有其特定的特征，我无法在单本书中考虑到所有这些。因此，我决定将内容集中在特定的受众上，我可以这样描述：

*目标受众是正在使用 Unity 引擎开发移动或独立游戏项目并正在重构其代码以使其更易于维护和扩展的游戏程序员。读者应该对 Unity 和 C#语言有基本的了解。*

在开发大型 AAA 或 MMO 游戏的高级程序员可能会发现本书中的特定示例与他们在日常工作中通常面临的架构挑战相比有限。然而，另一方面，本书的内容可能为 Unity 中设计模式的使用提供了另一种视角。因此，如果您已经了解理论并想看看我是如何实现特定模式的，可以自由地跳过任何章节。

# 本书涵盖的内容

第一章，*开始之前*，简要介绍了本书的内容。

第二章，*游戏设计文档*，展示了赛车游戏完整可玩原型的设计文档*。

第三章，*Unity 编程简明指南*，回顾了一些基本的 C#和 Unity 概念。

第四章，*使用单例模式实现游戏管理器*，介绍了如何使用臭名昭著的单例模式实现一个全局可访问的游戏管理器*。

第五章，*使用状态模式管理角色状态*，回顾了经典的状态模式以及如何封装角色的状态行为。

第六章，*使用事件总线管理游戏事件*，介绍了事件总线模式的基本原理以及如何使用它来管理全局游戏事件。

第七章，*使用命令模式实现回放系统*，回顾了如何使用命令模式为赛车游戏构建回放系统。

第八章，*使用对象池模式进行优化*，介绍了如何使用 Unity 原生对象池模式进行性能优化。

第九章，*使用观察者模式解耦组件*，回顾了如何使用观察者来解耦核心组件。

第十章，*使用访问者模式实现加成功能*，解释了如何使用访问者模式实现可定制的加成功能游戏机制。

第十一章，*使用策略模式实现无人机*，介绍了如何使用策略模式动态地为敌对无人机分配攻击行为。

第十二章，*使用装饰者模式实现武器系统*，解释了如何使用装饰者模式作为武器附件系统的基础。

第十三章，*使用空间分区实现关卡编辑器*，回顾了如何使用空间分区的一般概念为赛车游戏构建关卡编辑器。

第十四章，*使用适配器模式适应系统*，涵盖了适配器模式的基础知识以及如何使用它来适配第三方库以便与新系统一起重用。

第十五章，*使用外观模式隐藏复杂性*，使用外观模式来隐藏复杂性，并为复杂组件的复杂排列提供一个干净的面向前端的接口。

第十六章，*使用服务定位器模式管理依赖项*，回顾了服务定位器模式的基础知识以及如何使用它来实现一个在运行时允许注册和定位特定服务的系统。

# 为了充分利用本书

为了充分利用本书，您需要对 Unity 引擎有一个基本的了解。您还需要熟悉 C#，并具备面向对象编程的一般知识。如果您希望重现即将到来的章节中的代码，您需要将最新版本的 Unity 下载到您的计算机上。

您可以通过以下链接获取 Unity 的最新构建版本：[`unity3d.com/get-unity/download`](https://unity3d.com/get-unity/download)

运行 Unity 的系统要求可以在以下链接找到：[`docs.unity3d.com/Manual/system-requirements.html`](https://docs.unity3d.com/Manual/system-requirements.html)

如果您想下载我们 GitHub 仓库上提供的源代码，您需要一个 Git 客户端；我们推荐使用 GitHub Desktop，因为它是最容易使用的。您可以通过以下链接下载：[`desktop.github.com/`](https://desktop.github.com/)

除了这些工具外，运行本书中提供的代码示例不需要下载其他库或依赖项。

## 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件，网址为[`github.com/PacktPublishing/Game-Development-Patterns-with-Unity-2021-Second-Edition`](https://github.com/PacktPublishing/Game-Development-Patterns-with-Unity-2021-Second-Edition)。如果代码有更新，它将在现有的 GitHub 仓库中更新。

我们还有来自我们丰富的书籍和视频目录的其他代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

## 代码实战

本书代码实战视频可以在[`bit.ly/2UNCZX1`](https://bit.ly/2UNCZX1)查看。

## 下载彩色图像

我们还提供了一份包含本书中使用的截图/图表彩色图像的 PDF 文件。您可以通过以下链接下载：[`static.packt-cdn.com/downloads/9781800200814_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781800200814_ColorImages.pdf)[.](http://www.packtpub.com/sites/default/files/downloads/Bookname_ColorImages.pdf)

## 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“此类初始化`Context`对象和状态，并触发状态变化。”

代码块设置如下：

```cs
namespace Chapter.State
{
    public interface IBikeState
    {
        void Handle(BikeController controller);
    }
}
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```cs
namespace Chapter.State
{
    public enum Direction
    {
        Left = -1,
        Right = 1
    }
}
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词在文本中显示如下。以下是一个示例：“这些对象可以发布事件总线声明的特定类型的事件给订阅者。”

警告或重要注意事项如下所示。

小贴士和技巧如下所示。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请在邮件主题中提及书名，并通过`customercare@packtpub.com`给我们发送邮件。

**勘误**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将不胜感激，如果您能向我们报告，请访问[www.packtpub.com/support/errata](https://www.packtpub.com/support/errata)，选择您的书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**：如果您在互联网上以任何形式发现我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过`copyright@packt.com`与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com/)。

# 分享您的想法

一旦您阅读了《使用 Unity 2021 进行游戏开发模式》*，我们非常乐意听听您的想法！扫描下面的二维码直接进入此书的亚马逊评论页面并分享您的反馈。

![图片](img/f5b83504-ccc4-47e7-9561-dfdfd3b16558.png)

https://packt.link/r/<1800200811>

您的评论对我们和科技社区都非常重要，并将帮助我们确保我们提供高质量的内容。
