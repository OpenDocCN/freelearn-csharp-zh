- en: To the Cloud
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 走向云端
- en: So far we have learned and explored the fundamentals of ASP.NET Core 2.0 by
    developing applications that ran locally in our machines. The real value of these
    apps can be realized only when these apps are deployed and available on the internet,
    so that they can be accessed from virtually anywhere and everywhere on the planet.
    To do so, we need to learn to deploy our ASP.NET Core 2.0 apps in the cloud, Microsoft
    Azure. An obvious question that comes to mind is *Why should I care about the
    cloud?* In this chapter, we will answer this question and get introduced to Microsoft
    Azure, our cloud platform, and learn its basics. So far, we deliberately developed
    applications that did not do any data persistence and hence did not use a relational
    database. We will also learn to develop an end-to-end application that uses a
    relational database for data persistence and learn about Entity Framework Core
    in the process. We will grasp these concepts by developing a simple movie booking
    web app and then deploy this web app on Azure. Finally, we will integrate the
    Chatbot that we developed earlier in the book with our movie booking site. We
    have a lot of ground to cover, so let's get into the cloud!
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们通过开发在本地机器上运行的应用程序来学习和探索了 ASP.NET Core 2.0 的基础知识。这些应用程序的真实价值只有在它们被部署并在互联网上可用时才能实现，这样它们就可以从地球上几乎任何地方访问。为了做到这一点，我们需要学习如何在云中部署我们的
    ASP.NET Core 2.0 应用程序，即 Microsoft Azure。一个显而易见的问题就是 *我为什么要关心云？* 在本章中，我们将回答这个问题，并介绍我们的云平台
    Microsoft Azure 及其基础知识。到目前为止，我们故意开发了不进行任何数据持久化的应用程序，因此没有使用关系型数据库。我们还将学习开发一个端到端的应用程序，该应用程序使用关系型数据库进行数据持久化，并在过程中了解
    Entity Framework Core。我们将通过开发一个简单的电影预订网页应用程序来掌握这些概念，然后将此网页应用程序部署到 Azure 上。最后，我们将把本书中开发的聊天机器人集成到我们的电影预订网站上。我们有大量的内容要覆盖，所以让我们进入云端吧！
- en: 'We will cover the following  topics in this chapter:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Introduction to the cloud
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 云端简介
- en: Types of cloud
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 云的类型
- en: Getting started with Azure
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始使用 Azure
- en: Introduction to the cloud
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 云端简介
- en: For the cloud, we're all in.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 对于云，我们都是全情投入的。
- en: – Steve Ballmer
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: – 史蒂夫·鲍尔默
- en: At our core, Microsoft is the productivity and platform company for the mobile-first
    and cloud-first world.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本质上，微软是移动优先和云优先世界的生产力和平台公司。
- en: – Satya Nadella
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: – 萨蒂亚·纳德拉
- en: These two quotes from the former and current Microsoft CEO highlight the importance
    of the cloud. The cloud has been one of the hottest buzzwords over the last few
    years but you shouldn't be surprised to know that we have been using the cloud
    for a decade, maybe more, without realizing it. Gmail, Facebook, Skype, Dropbox,
    OneDrive, and so on are all examples of cloud solutions that we use almost everyday.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 这两句来自前微软和现任CEO的引言突出了云的重要性。云在过去几年一直是热门的 buzzword，但你可能不会惊讶地知道，我们已经不知不觉地使用了云十年，甚至更久。Gmail、Facebook、Skype、Dropbox、OneDrive等等都是我们几乎每天都在使用的云解决方案的例子。
- en: Cloud computing is an **information technology** (**IT**) paradigm that enables
    ubiquitous access to shared pools of configurable system resources and higher-level
    services that can be rapidly provisioned with minimal management effort, often
    over the internet. Cloud computing relies on the sharing of resources to achieve
    coherence and economy of scale, similar to a utility. Clouds enable organizations
    to focus on their core businesses instead of expending resources on computer infrastructure
    and maintenance. Cloud computing allows enterprises to get their applications
    up and running faster, with improved manageability and less maintenance, and it
    enables IT teams to more rapidly adjust resources to meet fluctuating and unpredictable
    business demand.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 云计算是一种 **信息技术**（**IT**）范式，它使对可配置的系统资源池和高级服务的普遍访问成为可能，这些服务可以以最小的管理努力快速提供，通常通过互联网。云计算依赖于资源共享来实现一致性和规模经济，类似于公用事业。云使组织能够专注于其核心业务，而不是在计算机基础设施和维护上消耗资源。云计算允许企业更快地将应用程序上线，并具有更好的可管理性和更少的维护，它还使
    IT 团队能够更快地调整资源以满足波动和不可预测的业务需求。
- en: The fundamental idea behind the cloud is that we can access all the information
    over the internet without worrying about detailed information about the infrastructure
    needed to enable it.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 云背后的基本理念是我们可以在不担心支持其运行的详细基础设施信息的情况下，通过互联网访问所有信息。
- en: 'The cloud provides businesses and organizations with:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 云为企业和组织提供：
- en: '**Flexibility**: Based on the business requirements, such as enhancing a basic
    plan to a premium plan, we can scale the number of servers up or down. Imagine
    a cake business web app. During the Christmas holiday season, the demand for cakes
    and thus traffic to the website increases manyfold. So to serve this increased
    load, the number of servers can be increased during the holiday season, and during
    a lean phase, it can be decreased. This flexibility is key in today''s economy
    where businesses have to save and excel in every little margin.almost instantly
    by the consumer as and when needed without any human'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**灵活性**：根据业务需求，例如将基本计划升级到高级计划，我们可以根据需要调整服务器的数量。想象一下一家蛋糕业务网站应用。在圣诞节假期期间，蛋糕的需求以及网站流量会大幅增加。因此，为了应对这种增加的负载，可以在假期期间增加服务器数量，而在淡季则可以减少。这种灵活性在当今经济中至关重要，因为企业必须节省并在每一个小利润点上表现出色。消费者几乎可以立即根据需要以几乎无需任何人工干预的方式获得服务。'
- en: '**On-demand self-service**: The services can be provisioned or decommissioned
    almost instantly by the consumer as and when needed without any human intervention.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**按需自助服务**：服务可以几乎立即由消费者根据需要提供或取消，无需任何人工干预。'
- en: '**Security**: Security is paramount. Rest assured that your data is more secure
    in the cloud than in the desktop located at your desk or the laptop that you carry.
    A lost/stolen laptop is a frequently encountered issue. More than financial cost,
    loss of sensitive data is exorbitantly costly, not just financially but also regarding
    reputation and trust. The cloud gives you better security when this happens. As
    the data is stored in the cloud, you can access it no matter what happens to your
    machine. You can even remotely wipe out data from your machine, if it falls into
    the wrong hands.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全性**：安全性至关重要。请放心，你的数据在云中的安全性比在办公桌上的桌面或你携带的笔记本电脑中更高。丢失或被盗的笔记本电脑是一个常见问题。除了财务成本外，敏感数据的丢失代价高昂，不仅涉及财务，还涉及声誉和信任。当这种情况发生时，云为你提供了更好的安全性。由于数据存储在云中，无论你的机器发生什么情况，你都可以访问它。你甚至可以远程擦除机器上的数据，如果它落入错误的手中。'
- en: '**Cost**: Using the cloud saves on maintenance costs and the high cost of hardware.
    No more servers, software, and update fees. You simply *pay as you go* and enjoy
    a subscription. You also save on the cost of people to procure the hardware, maintain
    it, and update it.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**成本**：使用云计算可以节省维护成本和昂贵的硬件成本。不再需要服务器、软件和更新费用。你只需“按需付费”并享受订阅服务。你也可以节省采购硬件、维护和更新硬件的人员成本。'
- en: '**Disaster recovery**:A robust disaster recovery plan in needed for any large
    or small enterprise as one disaster can put you out of business. The cloud lets
    you do it easier than ever.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**灾难恢复**：任何大型或小型企业都需要一个强大的灾难恢复计划，因为一次灾难可能会使你的业务陷入停顿。云计算让你比以往任何时候都更容易实现这一点。'
- en: '**Automatic updates**: Since all the servers are off-premise on the cloud, you
    don’t have to worry about wasting time maintaining the system yourself. The cloud
    provider takes care of maintenance for you and rolls out regular software updates.
    This keeps you free to focus on the things that matter, such as growing your business.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自动更新**：由于所有服务器都位于云上，你不必担心自己花费时间维护系统。云服务提供商会为你处理维护工作，并定期推出软件更新。这让你可以专注于更重要的事情，比如发展你的业务。'
- en: '**Collaboration**:When your teams can access, edit, and share documents anytime
    from anywhere, they''re able to do more things better collaboratively. Cloud-based
    workflow and file sharing apps help them make updates in real time and give them
    full visibility of their collaborations.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**协作**：当你的团队能够随时随地进行访问、编辑和共享文档时，他们能够更好地协作完成更多事情。基于云的工作流程和文件共享应用帮助他们实时更新，并全面了解他们的协作情况。'
- en: '**Work from home**: Why just home? Work from anywhere you have the internet.
    Yes, that''s a reality with the cloud.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在家工作**：为什么只是在家？在任何有互联网的地方都可以远程工作。是的，这是云计算带来的现实。'
- en: 'This and many more benefits make the cloud indispensable for any modern day
    IT professional. I would go one step ahead and say that:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 这些以及其他许多好处使云计算对任何现代IT专业人员来说都不可或缺。我甚至可以说：
- en: <q>*If you are not in cloud, you are out of IT.*</q>
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: <q>“如果你不在云上，你就不是IT的一部分。”</q>
- en: Next, let's have a look at different types of cloud.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们看看不同类型的云。
- en: Types of cloud
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 云类型
- en: 'Broadly speaking, the cloud deployment model can be classified into:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 从广义上讲，云部署模型可以分为：
- en: '**Public cloud:** This is the most commonly used cloud deployment model. A
    public cloud is one in which the service provider makes resources such as services,
    applications, or storage available to the general public over the internet. Public
    cloud services may be *free* or offered on a *pay as you go* model. Some examples
    of public cloud services are Microsoft Azure, Amazon **Elastic Compute ****Cloud** (**EC2**),
    IBM''s Blue Cloud, Google App Engine, and so on.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**公有云**：这是最常用的云部署模型。公有云是指服务提供商通过互联网向公众提供资源，如服务、应用程序或存储。公有云服务可能是**免费**的，或者按**按使用付费**的模式提供。公有云服务的例子包括
    Microsoft Azure、Amazon **弹性计算云** (**EC2**)、IBM 的 Blue Cloud、Google App Engine
    等。'
- en: '**Private cloud:** A private cloud offers similar advantages to a public cloud,
    but through a proprietary architecture. Unlike a public cloud, a private cloud
    is dedicated to a single organization. Since there is a lot of cost involved,
    only a large organization can invest in private clouds. Organizations with a lot
    of software developers are use cases for private clouds, as developers have frequent
    requests for new virtual machines. For example, the **State Bank of India** (**SBI**)
    has built a private cloud named **Meghdoot** which powers multiple business services.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**私有云**：私有云提供了与公有云相似的优势，但通过专有架构。与公有云不同，私有云是专门为单一组织服务的。由于涉及大量成本，只有大型组织才能投资私有云。拥有大量软件开发者的组织是私有云的使用案例，因为开发者经常需要新的虚拟机。例如，**印度国家银行**
    (**SBI**) 建立了一个名为 **Meghdoot** 的私有云，为多个业务服务提供动力。'
- en: '**Hybrid cloud:** This is a combination of public cloud services and private
    clouds. It is not necessary to have a private cloud in order to use a hybrid cloud.
    A hybrid cloud can also be a combination of virtualized, on-premise data centers and
    public cloud services. A hybrid cloud can also be seen as a bridge between the
    public and private clouds, which enables moving workloads between the earlier
    two deployments based on policy, costs, and so on.  Most companies today operate
    using this deployment model. For example, Marriot and Dominos Pizza make use of
    hybrid clouds.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**混合云**：这是公有云服务和私有云的结合。使用混合云不需要拥有私有云。混合云也可以是虚拟化、本地数据中心和公有云服务的组合。混合云也可以被视为连接公有云和私有云的桥梁，它可以根据策略、成本等因素在两者之间移动工作负载。如今，大多数公司都使用这种部署模型。例如，Marriott
    和 Dominos Pizza 都使用混合云。'
- en: 'Cloud computing services can be categorized into three service delivery models:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 云计算服务可以分为三种服务交付模型：
- en: '**Infrastructure as a Service** (**IaaS**)'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基础设施即服务** (**IaaS**)'
- en: '**Platform as a Service** (**PaaS**)'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**平台即服务** (**PaaS**)'
- en: '**Software as a Service** (**SaaS**)'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**软件即服务** (**SaaS**)'
- en: 'The following diagram should illustrates these service delivery models:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表应说明这些服务交付模型：
- en: '![](img/4b5afee2-7074-4350-8fa2-a55229b15636.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4b5afee2-7074-4350-8fa2-a55229b15636.png)'
- en: 'We can see that:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到：
- en: In **On-Premises** deployment, the customer has to manage each and every thing
    from hardware to software; for example, any software deployed in the server hosted
    on company premises.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**本地部署**中，客户必须从硬件到软件的每一件事都要管理；例如，在公司场所托管的服务器上部署的任何软件。
- en: In**IaaS**, all the required infrastructure is managed by the vendor. The customer
    just manages the operating system, software, runtime, and the application and
    its data; for example, Amazon EC2, Microsoft Azure, and Google Compute Engine.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**IaaS**中，所有必需的基础设施都由供应商管理。客户只需管理操作系统、软件、运行时以及应用程序及其数据；例如，Amazon EC2、Microsoft
    Azure 和 Google Compute Engine。
- en: In **PaaS**, the infrastructure as well as the operating system and runtime
    is managed by the vendor. The customer just manages the applications and its data;
    for example, Google App Engine, Heroku, and Microsoft Azure.
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**PaaS**中，基础设施以及操作系统和运行时由供应商管理。客户只需管理应用程序及其数据；例如，Google App Engine、Heroku 和
    Microsoft Azure。
- en: In**SaaS**, the entire infrastructure and software is managed by the vendor.
    The customer just consumes the software as a service; for example, Microsoft Office
    365, Gmail, and OneDrive.
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**SaaS**中，整个基础设施和软件由供应商管理。客户只需消费作为服务的软件；例如，Microsoft Office 365、Gmail 和 OneDrive。
- en: Now we are aware of the basics of the cloud, it's time to get started with the
    cloud platform that is the future and we all need to embrace, Microsoft Azure.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经了解了云的基本知识，是时候开始使用那个代表未来并且我们都必须拥抱的云平台——Microsoft Azure了。
- en: Getting started with Azure
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 开始使用 Azure
- en: Microsoft Azure (formerly called Windows Azure) is the cloud service created
    by Microsoft for building, testing, deploying, and managing web applications and
    services through a global network of Microsoft-managed data centers. It provides
    SaaS, PaaS, and IaaS, and supports many different programming languages, tools,
    and frameworks, including both Microsoft-specific and third-party software and
    systems. All the examples in this book are developed in a **virtual machine**
    (**VM**) hosted in Azure. Since we also needed a Linux VM to demonstrate ASP.NET
    Core 2.0 cross-platform support, the Linux VM is also created and hosted in Azure.
    This is the best example to demonstrate how flexible and easy it is for developers
    to embrace and use Azure.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 微软Azure（之前称为Windows Azure）是由微软创建的云服务，用于通过全球的微软管理数据中心网络构建、测试、部署和管理Web应用程序和服务。它提供SaaS、PaaS和IaaS，并支持许多不同的编程语言、工具和框架，包括微软特定的和第三方软件和系统。本书中的所有示例都是在Azure中托管的**虚拟机（VM**）上开发的。由于我们还需要一个Linux
    VM来演示ASP.NET Core 2.0的跨平台支持，因此该Linux VM也被创建并在Azure中托管。这是展示开发者如何灵活且容易地拥抱和使用Azure的最佳示例。
- en: 'An obvious question that may come to your mind is: why use Azure and not Amazon''s
    AWS or Google Cloud? Fair enough, I am completely biased on this one and I strongly
    believe Microsoft Azure is way ahead of its competitors in numerous parameters.
    Some them are highlighted in the following list:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 可能出现在你脑海中的明显问题是：为什么使用Azure而不是亚马逊的AWS或谷歌云？当然，我对这一点有完全的偏见，并且我坚信微软Azure在许多参数上远远领先于其竞争对手。以下列出了一些亮点：
- en: '**Security compliance and trust**: Azure has more comprehensive compliance
    coverage with more than 70 compliance offerings and is the first major cloud provider
    to contractually commit to the requirements of the **General Data Protection Regulation**
    (**GDPR**). To protect your organization, Azure embeds security, privacy, and
    compliance into its development methodology and has been recognized as the most
    trusted cloud for US government institutions.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全合规性和信任**：Azure拥有超过70种合规性产品，具有更全面的合规性覆盖范围，并且是第一个在合同上承诺满足**通用数据保护条例（GDPR**）要求的主要云服务提供商。为了保护您的组织，Azure将安全、隐私和合规性嵌入到其开发方法中，并被认为是美国政府机构最信任的云服务。'
- en: '**Global presence with most regions**: Azure has the largest number of regions
    in the world covered, with 42 announced Azure regions—more than any other cloud
    provider. You can choose the data center and region which is right for you and
    your customers, with the performance and support you need, where you need it.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**全球覆盖范围最广**：Azure在全球拥有最多的区域覆盖，有42个已宣布的Azure区域——比任何其他云服务提供商都多。您可以选择最适合您和您的客户的数据中心和区域，以及您需要的性能和支持。'
- en: '**Support for multiple development tools and language**: When Satya Nadella
    said <q>*"Microsoft ♥ Linux"*</q>, it gave a strong message to the world that
    Microsoft is actively listening to its customers and embracing open source at
    its core. The same strategy shows in the Microsoft cloud as well, which supports
    numerous tools, frameworks, and languages. Microsoft is the leading open source
    contributor on GitHub and actively supports multiple open source community projects.'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**支持多种开发工具和语言**：当萨蒂亚·纳德拉（Satya Nadella）说<q>*"微软♥ Linux"*</q>时，向世界传达了一个强烈的信号，即微软正在积极倾听其客户，并在其核心拥抱开源。同样的策略也体现在微软云中，它支持众多工具、框架和语言。微软是GitHub上的主要开源贡献者，并积极支持多个开源社区项目。'
- en: '**Real hybrid cloud approach**: Azure offers hybrid consistency everywhere
    from application development, security, identity management, and data platforms.
    This helps reduce the risk and cost of the hybrid cloud environment.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**真正的混合云方法**：Azure在应用程序开发、安全、身份管理和数据平台等各个方面都提供混合一致性。这有助于降低混合云环境的风险和成本。'
- en: '**Unmatched artificial intelligence**: It''s never been easier to develop intelligent
    solutions that scale using Microsoft Cognitive services, bots, machine learning,
    and **Blockchain as a Service** (**BaaS**) capabilities that can be found only
    with Azure.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**无与伦比的人工智能**：使用微软认知服务、机器人、机器学习和仅可在Azure中找到的**区块链即服务（BaaS**）能力来开发可扩展的智能解决方案从未如此简单。'
- en: '**Big data with advanced analytics**: Azure Cosmos DB enables you to scale
    your application limitlessly with big data support. Then the advanced business
    analytic services provided by Azure make you go way higher than your competitors.'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**大数据与高级分析**：Azure Cosmos DB 使您能够通过大数据支持无限扩展您的应用程序。然后 Azure 提供的先进商业分析服务让您比竞争对手高得多。'
- en: '**Manage and optimize cloud cost**: With free Azure cost management, it is
    easy to optimize cloud resources and budget them within your allocated funds.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理和优化云成本**：使用免费的 Azure 成本管理，轻松优化云资源并在您的分配资金内进行预算。'
- en: '**IoT ready**: You can quickly develop the most common IoT scenarios, such
    as remote monitoring, using the pre-configured solutions in the Azure IoT suite.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**物联网就绪**：您可以使用 Azure IoT 套件中预配置的解决方案快速开发最常见的物联网场景，例如远程监控。'
- en: '**Unmatched developer productivity**: Azure is developer-friendly, and as we
    will see in a short while, we can develop, deploy, and test our app in Azure from
    within Visual Studio or PowerShell.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**无与伦比的开发者生产力**：Azure 对开发者友好，正如我们很快就会看到的，我们可以在 Visual Studio 或 PowerShell 内部开发、部署和测试我们的应用程序。'
- en: A data center is a facility composed of networked computers and storage that
    businesses or other organizations use to organize, process, store, and disseminate
    large amounts of data. A business typically relies heavily upon the applications,
    services, and data contained within a data center, making it a focal point and
    critical asset for everyday operations.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 数据中心是由网络计算机和存储组成的设施，企业或其他组织使用它来组织、处理、存储和传播大量数据。企业通常严重依赖数据中心内包含的应用程序、服务和数据，使其成为日常运营的焦点和关键资产。
- en: 'Azure is an expanding network of data centers around the world. These data
    centers form **regions**. This provides us with the flexibility to use the region
    of our choice to deploy the resources/applications for the best performance. The
    following screenshot showing the Microsoft Azure website ([https://azure.microsoft.com/en-us/](https://azure.microsoft.com/en-us/))
    illustrates these different regions on the world map. We can see multiple regions
    in the United States, UK, Europe, India, and Japan. When we deploy an application,
    we need to select a region for the deployment. I might select a specific region
    to keep the application geographically close to me or my customers. I live in
    India, so I might use the West or Central or South India region for my development
    purposes. I can also deploy to multiple regions if I wanted some redundancy. The
    takeaway from this diagram is that Microsoft Azure is running millions of computer
    servers, physical machines that are spread around these regions around the world,
    and Microsoft ensures that these machines are up and running, healthy, and physically
    secure. We just need to leverage a portion of this enormous computing power to
    do our work:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 是全球范围内不断扩展的数据中心网络。这些数据中心形成了**区域**。这为我们提供了使用我们选择的区域的灵活性，以便部署资源/应用程序以获得最佳性能。以下截图显示了
    Microsoft Azure 网站 ([https://azure.microsoft.com/en-us/](https://azure.microsoft.com/en-us/))，它在世界地图上说明了这些不同的区域。我们可以看到美国、英国、欧洲、印度和日本的多个区域。当我们部署应用程序时，我们需要为部署选择一个区域。我可能会选择一个特定的区域，以便将应用程序地理位置上靠近我或我的客户。我住在印度，所以我可能会使用西印度、中印度或南印度区域进行我的开发工作。如果我想有一些冗余，我也可以部署到多个区域。从这个图中我们可以得出的结论是，Microsoft
    Azure 运行着数百万台计算机服务器，这些物理机器遍布全球这些区域，并且 Microsoft 确保这些机器处于运行状态，健康，并且物理安全。我们只需要利用这部分巨大的计算能力来完成我们的工作：
- en: '![](img/b19ad482-faaf-42fe-a5c5-6fd90cd8bcbe.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b19ad482-faaf-42fe-a5c5-6fd90cd8bcbe.png)'
- en: Now that we have the fundamental concepts of the cloud (and Microsoft Azure)
    in place, let's get started using the Azure platform.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经建立了云（以及 Microsoft Azure）的基本概念，让我们开始使用 Azure 平台吧。
- en: 'First of all, you will need to register your account with Azure. To do so,
    go to [https://portal.azure.com/](https://portal.azure.com/) and register with
    any of your Microsoft accounts, such as Hotmail, MSN, Outlook, or Live. At the
    time of writing this chapter, Azure offered the following great and free benefits
    when creating an account. These may vary by the time you read the book:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您需要将您的账户注册到 Azure。为此，请访问 [https://portal.azure.com/](https://portal.azure.com/)
    并使用您的任何 Microsoft 账户进行注册，例如 Hotmail、MSN、Outlook 或 Live。在撰写本章时，Azure 在创建账户时提供了以下一些非常好的免费优惠。这些优惠可能因您阅读本书的时间而异：
- en: 12 months' free access to popular products. You also get 25 always free products.
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 12 个月的免费访问热门产品。您还将获得 25 永久免费的产品的访问权限。
- en: A $200 credit to use on any Azure products for 30 days.
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 30天内可用于任何Azure产品的200美元信用额度。
- en: Azure uses credit card information only for identity verification and you are
    not charged until you change your subscription to a *pay as you go* subscription.
    If you work in a large enterprise or a Microsoft partner, or a BizSpark program
    or MSDN subscriber, you already get a subscription to Azure cloud resources.
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure仅使用信用卡信息进行身份验证，您只有在将订阅更改为*按使用付费*订阅之前不会收费。如果您在大型企业或Microsoft合作伙伴、BizSpark计划或MSDN订阅者工作，您已经获得了Azure云资源的订阅。
- en: 'Once you are registered, you will see a nice dashboard. This is the Azure management
    portal. The dashboard user interface keeps getting better and is updated from
    time to time, so by the time you read this chapter, the user interface may be
    different from what it is right now. The important thing to notice is that there
    is a left panel which lists all of the Azure services that you can use. First-time
    users should take the guided tour of Azure to get themselves familiar with the
    user interface as it is very rich in features. Let''s have a quick look at the
    user interface. The following screenshot illustrates the Azure dashboard after
    you log in. We have marked the user interface with numbers so that we can see
    each of these items in reasonable depth:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您注册，您将看到一个漂亮的仪表板。这是Azure管理门户。仪表板用户界面不断改进，并会不时更新，所以当您阅读这一章时，用户界面可能与现在不同。重要的是要注意，有一个左侧面板，列出了您可以使用的所有Azure服务。新用户应该进行Azure的引导游览，以便熟悉用户界面，因为它功能非常丰富。让我们快速看一下用户界面。以下截图展示了登录后的Azure仪表板。我们用数字标记了用户界面，以便我们可以合理深入地查看每个项目：
- en: '![](img/04230ebf-6964-4c60-9e74-af6da1b72bbc.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/04230ebf-6964-4c60-9e74-af6da1b72bbc.png)'
- en: 'Let''s have a look at the different components:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看不同的组件：
- en: '**Hamburger button**: Shows the hamburger menu on the left panel. This has
    the standard hamburger button behavior. When expanded, it shows the icon as well
    as a description of the various services that Azure provides. On collapse, it
    increases the real estate for the right column (where the Dashboard is showing
    up) as only icons are displayed in the collapsed left panel.'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**汉堡按钮**：显示左侧面板上的汉堡菜单。这具有标准的汉堡按钮行为。当展开时，它显示图标以及Azure提供的各种服务的描述。在折叠时，它增加了右侧列（仪表板显示的地方）的空间，因为在折叠的左侧面板中只显示图标。'
- en: 'New: Creates a new resource. On clicking, displays the resource that needs
    to be created from the Marketplace. You can also use this to view the wide variety
    of services in Azure Marketplace.'
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 新建：创建新的资源。点击时，从市场显示需要创建的资源。您也可以使用此功能查看Azure市场中的各种服务。
- en: '**Left panel hub displaying favorite Azure services**: All your favorite or
    commonly used services/resources that Azure offers are displayed in this area
    that we call a hub. This is the place to go when you want to create or manage
    the resources that you own in Azure. Don''t get confused with the word resource;
    just like a software developer is referred to as a resource when managers talk,
    everything that we can create from virtual machines to web apps, Redis Cache,
    and so on, are generally called resource. Well, there are so many Azure resources
    that not all of them can fit in the hub, so what can be shown are shown and the
    rest are shown under the item More Services.'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**左侧面板显示喜欢的Azure服务中心**：Azure提供的所有您喜欢的或常用服务/资源都显示在这个我们称之为中心区域。当您想要创建或管理Azure中拥有的资源时，请前往此处。不要被“资源”这个词弄混淆；就像当经理谈论软件开发者时，他们被称为资源一样，我们可以从虚拟机到Web应用、Redis缓存等创建的一切，通常都被称为资源。嗯，Azure有如此多的资源，以至于它们不能全部放入中心，所以显示的是可以显示的，其余的则在“更多服务”项下显示。'
- en: '**Dashboard on right panel**: In the screenshot, this is displaying the Azure
    Dashboard from all the subscriptions. We can have two types of dashboard: private
    and shared. Shared dashboards can be shared with other users, while private is
    as the name suggests. The intent of the dashboard is to have quick access to the
    resources you use, so that you can view and manage them quickly.'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**右侧面板仪表板**：在截图上，这显示了来自所有订阅的Azure仪表板。我们可以有两种类型的仪表板：私有和共享。共享仪表板可以与其他用户共享，而私有仪表板正如其名所示。仪表板的目的在于快速访问您使用的资源，以便您可以快速查看和管理它们。'
- en: 'New dashboard: This presents an option to create a new dashboard where you
    can customize the tiles for resources to be shown in the way you want them to
    show up. You can pin, move, or resize the resource tiles the way you want.'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 新仪表板：这提供了一个创建新仪表板的选择，您可以在其中自定义要显示的资源磁贴，以您希望的方式显示。您可以按需固定、移动或调整资源磁贴的大小。
- en: 'Edit dashboard: Enables you to edit the dashboard. You can remove a tile from
    the dashboard, or add a new one, or maybe just drag and change its position. You
    can make a tile smaller or larger as per your preference.'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑仪表板：使您能够编辑仪表板。您可以从仪表板中删除磁贴，或添加新的磁贴，或者只是拖动并更改其位置。您可以根据自己的偏好调整磁贴的大小。
- en: 'Share: Enables you to share the dashboard with other users. You can share the
    dashboard by publishing it as an Azure resource. Azure **Role-Based Access Control**
    (**RBAC**) will determine who has access to the dashboard. Access to individual
    tiles can differ from access to the dashboard itself.'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 分享：使您能够与其他用户共享仪表板。您可以通过将仪表板发布为Azure资源来共享仪表板。Azure **基于角色的访问控制**（**RBAC**）将确定谁有权访问仪表板。对单个磁贴的访问权限可能与对仪表板本身的访问权限不同。
- en: 'Fullscreen: Displays the portal full-screen.'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 全屏：全屏显示门户。
- en: 'Clone: Clones the dashboard.'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 克隆：克隆仪表板。
- en: 'Delete: Deletes the dashboard.'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除：删除仪表板。
- en: '**Search**: To search the resource/services you are looking for.'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**搜索**：搜索您正在寻找的资源/服务。'
- en: '**Notifications**: Clicking on this bell-like icon displays notifications and
    status updates, such as billing updates, resource start/stop/error notifications,
    and other information.'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**通知**：单击此类似铃铛的图标将显示通知和状态更新，例如账单更新、资源启动/停止/错误通知以及其他信息。'
- en: '**Cloud Shell**: Using this command prompt-like icon, you can select bash or
    PowerShell. You can change shells any time through the environment selector in
    the Cloud Shell toolbar. The most recently used environment will be the default
    for your next session.'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**云Shell**：使用此类似于命令提示符的图标，您可以选择bash或PowerShell。您可以通过云Shell工具栏中的环境选择器随时更改shell。最近使用的环境将是您下一次会话的默认设置。'
- en: '**Settings**: The gear icon represent settings in the current portal. It allows
    you to customize the portal settings, themes, language, and so on.'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**设置**：齿轮图标代表当前门户中的设置。它允许您自定义门户设置、主题、语言等。'
- en: '**Feedback**: To share the feedback from the Azure portal with the Microsoft
    Azure product team.'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**反馈**：与Microsoft Azure产品团队分享Azure门户的反馈。'
- en: '**Help**: To get help and support. You can create or track a support ticket
    and monitor the health of your Azure services and resources. You can also check
    the keyboard shortcuts, with a guided tour here.'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**帮助**：获取帮助和支持。您可以创建或跟踪支持票证，并监控您的Azure服务和资源的健康状况。您还可以在此处查看键盘快捷键，并获取引导式浏览。'
- en: '**Account information**: Switch directories, change your password, view permissions,
    submit an idea, or view your bill.'
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**账户信息**：切换目录、更改密码、查看权限、提交想法或查看账单。'
- en: Service Health: Personalized guidance and support when issues in Azure services
    affect you.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 服务健康：当Azure服务中的问题影响您时，提供个性化的指导和支持。
- en: Marketplace: Discover, purchase, and manage add-ons and services from Microsoft
    partners.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 市场place：发现、购买和管理来自Microsoft合作伙伴的附加组件和服务。
- en: 'What''s new: Keeps you updated with the latest and greatest information on
    Azure.'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 新增功能：让您了解Azure的最新和最佳信息。
- en: 'Feedback: Same as *Step 15*.'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 反馈：与*步骤15*相同。
- en: 'Azure classic portal: To view the old classic Azure portal, for old users of
    Azure who are comfortable with the old portal.'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure经典门户：用于查看旧的经典Azure门户，供熟悉旧门户的旧Azure用户使用。
- en: 'Help + support: Same as *Step 16*.'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 帮助+支持：与*步骤16*相同。
- en: 'All resources: Displays all resources and services from the subscription that
    you are using.'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所有资源：显示您使用的订阅中的所有资源和服务。
- en: Though we have discussed and defined tiles here, please note that since the
    dashboard is customizable, you can choose to have a tile or remove it altogether.
    So, a few of the tiles may show / not show in your dashboard. The intent here
    is to make you aware of the portal. Also there are tiles numbered 25, 26, and
    27 in the screenshot, which I have pinned after creating these resources (actually,
    Azure pins resource to the Dashboard as soon as you create it based on a setting).
    These tiles display the resources/services that I am using and their status. In
    the screenshot, 25 is a tile named DotNetCore2\. It is a virtual machine and it
    has stopped. 26 shows a web app named testdecompression which is stopped as well.
    27 is a web app named packtletschat, which is up and running. Hopefully, this
    discussion has got you started with the Azure management portal. Next we will
    create a virtual machine and web app in Azure and then see how we can deploy our
    ASP.NET Core 2.0 apps published in Azure.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我们在这里讨论并定义了瓷砖，但请注意，由于仪表板是可定制的，您可以选择添加或完全删除瓷砖。因此，一些瓷砖可能在您的仪表板中显示或不显示。这里的目的是让您了解门户。此外，截图中有编号为25、26和27的瓷砖，这些是在创建这些资源后我标记的（实际上，Azure在您基于设置创建资源时立即将其标记到仪表板）。这些瓷砖显示了我正在使用的资源/服务及其状态。在截图中，25是一个名为DotNetCore2的瓷砖。它是一个虚拟机，已经停止。26显示了一个名为testdecompression的Web应用，也已经停止。27是一个名为packtletschat的Web应用，正在运行。希望这次讨论能让您开始使用Azure管理门户。接下来，我们将创建Azure中的虚拟机和Web应用，然后看看我们如何部署在Azure中发布的ASP.NET
    Core 2.0应用。
- en: Creating a VM in Azure
  id: totrans-91
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Azure中创建虚拟机
- en: 'In this section, we will learn to create a VM in Azure. Developers need VMs
    all the time. If you are wondering what I mean, just imagine that you wanted to
    try out out some new version of a tool or software that is not yet production-ready
    and you do not wish to try it out on your own laptop due to probable instability
    issues this new untested software may cause. I always do so, whenever I am trying
    out nightly builds of products or getting hands-on with any new product. Azure
    provides you with great flexibility and choice. There are numerous choices and
    configurations available to select the operating system that you want and the
    size that you require. We, being passionate .NET developers, may want a VM which
    has the great Visual Studio 2017 installed, so that we can start developing as
    soon as we provision the VM. To this end, we will learn to create a VM in Azure.
    To do so, let''s perform the following steps:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将学习如何在Azure中创建虚拟机。开发者始终需要虚拟机。如果您想知道我的意思，只需想象您想尝试一些尚未准备好生产的工具或软件的新版本，但由于新软件可能引起的不稳定问题，您不想在自己的笔记本电脑上尝试。我总是这样做，无论我是在尝试产品的夜间构建还是与任何新产品进行实际操作。Azure为您提供了极大的灵活性和选择。有大量的选择和配置可供选择您想要的操作系统和所需的大小。作为充满激情的.NET开发者，我们可能希望有一个安装了伟大Visual
    Studio 2017的虚拟机，这样我们就可以在配置虚拟机后立即开始开发。为此，我们将学习如何在Azure中创建虚拟机。为此，让我们执行以下步骤：
- en: 'On the left panel (hub) of the Azure management portal, click on Virtual machines.
    Ensure you click on Virtual machines and not Virtual machines (classic). We will
    discuss the difference between classic and the resource manager later in this
    section.![](img/01e58050-df5e-4f70-9e6b-dcc631fcff22.png)You will see a Virtual
    machines screen, which lists all the virtual machines that you have as well as
    providing the user interface to Add a virtual machine, Start, Stop, Delete, and
    Restart a virtual machine, as shown in the following screenshot:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Azure管理门户的左侧面板（中心）中，单击虚拟机。请确保您单击虚拟机而不是虚拟机（经典）。我们将在本节稍后讨论经典和资源管理器之间的区别。![图片](img/01e58050-df5e-4f70-9e6b-dcc631fcff22.png)您将看到一个虚拟机屏幕，其中列出了您拥有的所有虚拟机，并提供添加虚拟机、启动、停止、删除和重启虚拟机的用户界面，如下面的截图所示：
- en: '![](img/7059ce1e-90d6-472f-932e-a7f28273bd04.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/7059ce1e-90d6-472f-932e-a7f28273bd04.png)'
- en: 'Click on the Add button. This will open a new fly-out on the right side, displaying
    a number of virtual machine images to choose from. This fly-out is what we call
    a blade. You can have Red Hat Linux, Windows Server, Ubuntu, or anything else
    based on your requirements. Since we need a Windows 10 machine with Visual Studio
    2017 Community Edition installed, let''s search for `Visual Studio 2017`. This
    shows the following list of results:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击添加按钮。这将打开右侧的新飞出窗口，显示可供选择的多个虚拟机映像。这个飞出窗口就是我们所说的刀片。您可以根据需求选择Red Hat Linux、Windows
    Server、Ubuntu或其他任何东西。由于我们需要一个安装了Visual Studio 2017 Community Edition的Windows 10机器，让我们搜索`Visual
    Studio 2017`。这显示了以下结果列表：
- en: '![](img/47fc6595-1fcc-4d8f-9428-a5e26d5f7c88.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/47fc6595-1fcc-4d8f-9428-a5e26d5f7c88.png)'
- en: 'Select the image that best suits your needs. On doing so, a new blade will
    appear displaying the details of the virtual machine image, its publisher, useful
    links, last updated date, its desktop screenshot, deployment model, and so on.
    Always select the deployment model as Resource Manager as it gives you the ability
    to automate with PowerShell, unlike Classic. This blade can be seen in the following
    screenshot:'
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择最适合您需求的映像。这样做时，将出现一个新的刀片，显示虚拟机映像的详细信息、发布者、有用的链接、最后更新日期、其桌面截图、部署模型等。始终选择部署模型为资源管理器，因为它允许您使用PowerShell进行自动化，而经典模式则不行。此刀片在以下屏幕截图中可见：
- en: '![](img/118b9cb6-b7c2-4696-9ddd-146d2d1bb716.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/118b9cb6-b7c2-4696-9ddd-146d2d1bb716.png)'
- en: 'On clicking the Create button, the following screen will display, which has
    four basic steps to create a virtual machine:'
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“创建”按钮时，将显示以下屏幕，其中包含创建虚拟机的四个基本步骤：
- en: Basics
  id: totrans-100
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 基本设置
- en: Size
  id: totrans-101
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 大小
- en: Settings
  id: totrans-102
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置
- en: Summary
  id: totrans-103
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 摘要
- en: 'The Basics section gathers fundamental information about the virtual machine
    to be created, such as:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: “基本”部分收集了将要创建的虚拟机的基本信息，例如：
- en: 'Name: The name of the virtual machine, which has to be unique.'
  id: totrans-105
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 名称：虚拟机的名称，必须是唯一的。
- en: VM disk type: This can be **solid-state drive** (**SSD**), which offers consistent,
    low-latency performance and is ideal for production use or standard disks (HDD)
    that are backed by magnetic drives and are preferred for applications where data
    is accessed infrequently.
  id: totrans-106
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟机磁盘类型：这可以是**固态硬盘**（**SSD**），它提供一致的低延迟性能，非常适合生产使用或标准磁盘（HDD），这些磁盘由磁驱动器支持，并且适用于数据访问不频繁的应用程序。
- en: 'User name: The username to log in to the virtual machine.'
  id: totrans-107
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户名：登录虚拟机的用户名。
- en: 'Password,Confirm password: These should be the same as the user name and this
    password will be used with the username to log in to the virtual machine.'
  id: totrans-108
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码，确认密码：这些应该与用户名相同，并且此密码将与用户名一起用于登录虚拟机。
- en: Subscription**:** This is auto-populated. If you have numerous subscriptions,
    you can choose the one with which you wish to create the virtual machine.
  id: totrans-109
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 订阅**：这是自动填充的。如果您有多个订阅，您可以选择您希望用于创建虚拟机的订阅。
- en: 'Resource group: A resource group is a collection of resources that share the
    same life cycle, permissions, and policies. For better management, you can choose
    to Create new or reuse an existing resource group.'
  id: totrans-110
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 资源组：资源组是一组具有相同生命周期、权限和策略的资源。为了更好地管理，您可以选择创建新的或重用现有的资源组。
- en: 'Location: The Azure data center that you wish to use for creating the virtual
    machine. Based on your location or your customer''s location, you may want to
    choose the closest location for performance and low latency. Click OK:'
  id: totrans-111
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 位置：您希望用于创建虚拟机的Azure数据中心。根据您的位置或客户的位置，您可能希望选择最近的位置以获得性能和低延迟。点击“确定”：
- en: '![](img/27e7650d-cbcf-4e26-a217-0f2388817fff.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/27e7650d-cbcf-4e26-a217-0f2388817fff.png)'
- en: 'In the Size section, choose the size that suits your needs. Azure lists recommended
    sizes in the blade, but if it doesn''t fit your requirements, click on View all
    and you will see a lot more configurations to choose from. You can also customize
    the supported hard disk type, minimum CPU, and memory by moving the slider bars
    against these parameters. Azure lists CPUs, memory, number of data disks, disk
    size, and other included features with an important parameter for the cost in
    local currency that you would need to shell out per month to use it, so use this
    wisely. Once you nail down on size, click Select:'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“大小”部分，选择适合您需求的尺寸。Azure在刀片上列出推荐的大小，但如果它不符合您的需求，请点击“查看所有”，您将看到更多可供选择的配置。您还可以通过移动这些参数的滑块栏来自定义支持的硬盘类型、最小CPU和内存。Azure列出了CPU、内存、数据盘数量、磁盘大小以及其他包含的功能，以及您每月需要支付的成本的重要参数，因此请明智地使用。一旦确定大小，请点击“选择”：
- en: '![](img/c22daa02-636c-4517-a094-5f5170b3b2b5.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c22daa02-636c-4517-a094-5f5170b3b2b5.png)'
- en: 'The Settings section includes important yet auto-populated settings for the
    VM. Some important ones are discussed here:'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “设置”部分包括虚拟机的重要且自动填充的设置。以下是一些重要的设置：
- en: 'Availability set: Azure has an availability SLA of 99.95%. For high availability
    of the virtual machine, it is recommended to have redundancy and group two or
    more VMs in an availability set. The advantage is that in the event of planned
    or unplanned maintenance, at least one virtual machine will be available, meeting
    the Azure availability SLA of 99.95%. This setting cannot be changed after the
    virtual machine is created. In our case, we do not need this, so we will go with
    the default value of None.'
  id: totrans-116
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可用性集：Azure的可用性服务级别协议（SLA）为99.95%。为了提高虚拟机的高可用性，建议在可用性集中冗余地分组两个或更多虚拟机。优点是，在计划内或计划外的维护期间，至少有一个虚拟机可用，以满足Azure
    99.95%的可用性SLA。此设置在虚拟机创建后不能更改。在我们的情况下，我们不需要此设置，因此我们将使用默认值“无”。
- en: 'Use managed disk: This feature may not be available in all the regions. When
    this is set to Yes, Azure automatically manages the availability of the disks
    to provide data redundancy and fault tolerance.'
  id: totrans-117
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用托管磁盘：此功能可能不在所有区域中可用。当此设置为“是”时，Azure将自动管理磁盘的可用性，以提供数据冗余和容错。
- en: 'Auto-shutdown: This feature is very important, at least financially. While
    your virtual machine is running, every minute, so keep it switched on only when
    you need it to keep your bills affordable. If you enable auto-shutdown, you can
    configure the VM to shut down daily at a specified time. For example, if the VM
    is being used only during office hours, it makes perfect sense to shut it down
    out of office hours and save on money. The Settings blade is shown in the following
    screenshot:'
  id: totrans-118
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动关机：此功能非常重要，至少在财务上。当您的虚拟机正在运行时，每分钟都会产生费用，因此只有在需要时才保持开启状态以保持账单合理。如果您启用自动关机，可以配置虚拟机在指定时间每天关闭。例如，如果虚拟机仅在办公时间内使用，那么在办公时间外关闭它以节省费用是很有意义的。设置选项卡如下面的截图所示：
- en: '![](img/e682a864-3ea1-492d-813c-18a4ad70fd16.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/e682a864-3ea1-492d-813c-18a4ad70fd16.png)'
- en: Click OK. A Summary page with all the settings will be displayed in the Summary
    blade along with terms of use. If you agree to it, click Create and your virtual
    machine will start to be created. You will be taken to your Dashboard page, which
    will now has a new tile added with the name of your virtual machine and it will
    show the status of this resource. Within a matter of a few minutes your virtual
    machine will be provisioned. Once it is provisioned, you will get a notification
    stating that the virtual machine is successfully deployed and the dashboard tile
    of the virtual machine will display the state as Running.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“确定”。在摘要选项卡中，将显示所有设置的摘要页面，以及使用条款。如果您同意，请点击“创建”，您的虚拟机将开始创建。您将被带到仪表板页面，该页面现在将添加一个名为虚拟机的新磁贴，并显示该资源的状态。几分钟内，您的虚拟机将被配置。一旦配置完成，您将收到通知，表明虚拟机已成功部署，虚拟机的仪表板磁贴将显示状态为“运行”。
- en: 'Click on the tile of the virtual machine that we have created. It will take
    us to the Overview blade of the virtual machine, as shown in the following screenshot:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击我们创建的虚拟机磁贴。它将带我们到虚拟机的概述选项卡，如下面的截图所示：
- en: '![](img/1b9bc28c-7c77-4598-bdfe-a5af9dd0a248.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/1b9bc28c-7c77-4598-bdfe-a5af9dd0a248.png)'
- en: 'You will see the following options:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到以下选项：
- en: 'Connect: On clicking Connect, the **Remote Desktop Protocol** (RDP) file will
    be downloaded. Clicking on this downloaded RDP will enable remote desktop connection
    to the virtual machine, after providing the username and password that you used
    while creating the virtual machine.'
  id: totrans-124
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连接：点击“连接”后，将下载**远程桌面协议**（RDP）文件。双击下载的RDP文件，在提供创建虚拟机时使用的用户名和密码后，将启用远程桌面连接到虚拟机。
- en: 'Start: Starts the virtual machine, if it''s not started. The button will be
    enabled only if virtual machine is not running.'
  id: totrans-125
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启动：如果虚拟机尚未启动，则启动虚拟机。只有当虚拟机未运行时，此按钮才会启用。
- en: 'Restart: Restarts the virtual machine.'
  id: totrans-126
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重新启动：重新启动虚拟机。
- en: 'Stop: Stops the virtual machine and deallocates it.'
  id: totrans-127
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 停止：停止虚拟机并释放其资源。
- en: 'Capture: This can be used to create a virtual machine image. We generally use
    it if we need a base image with additional configuration.'
  id: totrans-128
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捕获：此功能可用于创建虚拟机镜像。我们通常在需要带有额外配置的基本镜像时使用它。
- en: 'Move: To move the virtual machine to another resource group or subscription.'
  id: totrans-129
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移动：将虚拟机移动到另一个资源组或订阅。
- en: 'Delete: To delete the virtual machine.'
  id: totrans-130
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除：用于删除虚拟机。
- en: 'Refresh: To refresh the status of the virtual machine.'
  id: totrans-131
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 刷新：刷新虚拟机的状态。
- en: Azure has great documentation and cool training videos. They also have getting
    started guides and architecture recommendations to create and use Azure resources.
    You can find the documentation, the SDK, on the Azure site at [https://docs.microsoft.com/en-us/azure/](https://docs.microsoft.com/en-us/azure/).
    Training, webinars, events, code samples, videos, whitepapers, and case studies
    can be found at [https://azure.microsoft.com/en-us/resources/](https://azure.microsoft.com/en-us/resources/).
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 拥有优秀的文档和酷炫的培训视频。他们还提供了入门指南和架构建议，以创建和使用 Azure 资源。你可以在 Azure 网站上找到文档和 SDK，网址为
    [https://docs.microsoft.com/en-us/azure/](https://docs.microsoft.com/en-us/azure/)。培训、网络研讨会、活动、代码示例、视频、白皮书和案例研究可以在
    [https://azure.microsoft.com/en-us/resources/](https://azure.microsoft.com/en-us/resources/)
    找到。
- en: With this, we have created our very first virtual machine on the cloud (Azure)
    and we can use it as well by clicking the remote desktop file that we downloaded.
    On clicking the `.rdp` file, it will prompt for the username and password in the
    standard way as any other remote desktop connection does. It's just that this
    virtual machine is hosted in the cloud, in Azure. Once you are logged in, you
    can use it the way you want. Remember, once the virtual machine is started, irrespective
    of whether you use it or not, it starts costing you. So, if you wish to be cost-efficient,
    ensure you turn it off when you are not using it and start it when you do. This
    concludes our discussion on virtual machines. Next, we will see how we can use
    PowerShell to automate resource creation and management in Azure.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这种方式，我们已经在云（Azure）上创建了我们的第一个虚拟机，并且我们可以通过点击我们下载的远程桌面文件来使用它。点击 `.rdp` 文件时，它将以标准方式提示用户名和密码，就像任何其他远程桌面连接一样。只是这个虚拟机托管在云中，在
    Azure 上。一旦你登录，你可以按你的意愿使用它。记住，一旦虚拟机启动，无论你是否使用它，它都会开始计费。所以，如果你想节省成本，确保你在不使用时关闭它，并在需要时启动它。这标志着我们对虚拟机的讨论结束。接下来，我们将看到如何使用
    PowerShell 在 Azure 中自动化资源创建和管理。
- en: Automating using PowerShell
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 PowerShell 自动化
- en: 'In this section, we will learn to automate resource creation and management
    in Azure using PowerShell. The user interface route to creating resources in Azure
    is very effective and easy. You may be wondering: Do you have to log in to the
    Azure portal to do every single thing? No. Everything that you can set and do
    in the Azure portal can also be automated by writing a program, or by writing
    a script. Also, being a developer, I prefer my code to do the work rather than
    going to the portal and doing operations manually. The code can also help us do
    the automation, so preventing the need for human intervention. There are SDKs
    available for many languages, from C#, to JavaScript, to Ruby, and so on. We will
    look at how to start and stop the virtual machine that we just created using PowerShell
    by performing the following steps:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将学习如何使用 PowerShell 在 Azure 中自动化资源创建和管理。在 Azure 中创建资源的用户界面方法非常有效且简单。你可能想知道：是否必须登录到
    Azure 门户才能完成每一件事？不。你可以在 Azure 门户中设置和执行的所有操作都可以通过编写程序或脚本来自动化。此外，作为一个开发者，我更喜欢让我的代码来完成工作，而不是去门户手动执行操作。代码还可以帮助我们进行自动化，从而避免需要人工干预。许多语言都提供了
    SDK，从 C# 到 JavaScript，再到 Ruby 等等。我们将通过以下步骤查看如何使用 PowerShell 启动和停止我们刚刚创建的虚拟机：
- en: 'Go to the URL at [https://azure.microsoft.com/en-us/downloads/](https://azure.microsoft.com/en-us/downloads/).
    This is the central place where you can get SDKs and command-line tools. On this
    page, we can see there are SDKs for .NET developers, Java developers, Node.js,
    and so on. If we scroll down a little, we can see command-line tools. Click on
    the Windows install link under PowerShell. It will download the installer executable:'
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问网址 [https://azure.microsoft.com/en-us/downloads/](https://azure.microsoft.com/en-us/downloads/)。这是你可以获取
    SDK 和命令行工具的中心位置。在这个页面上，我们可以看到有针对 .NET 开发者、Java 开发者、Node.js 等的 SDK。如果我们向下滚动一点，我们可以看到命令行工具。点击
    PowerShell 下的 Windows 安装链接。它将下载安装程序可执行文件：
- en: '![](img/5a732706-62be-47ef-8a01-9a062c16a56c.png)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/5a732706-62be-47ef-8a01-9a062c16a56c.png)'
- en: 'Run the executable once the download is complete, following the installation
    instructions. Now open PowerShell ISE.  It should be installed already. If not,
    you can also use PowerShell by searching for Windows Powershell on your Windows
    10 machine. The first thing that we need to do is associate our PowerShell session
    with the Azure account. We can do that with the `Login-AzureRmAccount` command.
    PowerShell has tab completion, so after typing a few chars in your tab, it will
    try to complete the command. When you press Enter, you''ll be given an interface
    where you need to log in with your Microsoft account, as shown in the following
    screenshot:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载完成后，运行可执行文件，按照安装说明进行操作。现在打开PowerShell ISE。它应该已经安装好了。如果没有，您也可以在Windows 10机器上搜索Windows
    Powershell来使用PowerShell。我们需要做的第一件事是将我们的PowerShell会话与Azure账户关联起来。我们可以使用`Login-AzureRmAccount`命令来完成。PowerShell具有自动补全功能，所以当你在Tab键上输入几个字符后，它会尝试完成命令。当你按下Enter键时，你会看到一个界面，你需要使用你的Microsoft账户登录，如下面的截图所示：
- en: '![](img/d712d0ec-d6cb-46e8-a63c-d0088effa737.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/d712d0ec-d6cb-46e8-a63c-d0088effa737.png)'
- en: 'Enter your username and password. If you have two-factor authentication enabled,
    you may need to enter code as well. Type the `Get-AzureRmSubscription` command.
    This will show the list of all the subscriptions displaying the subscription name,
    subscription ID, tenant ID, and state; that is, whether it is enabled or inactive.
    The PowerShell cmdlet has `AzureRm` in the name, `Rm` being resource manager:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入您的用户名和密码。如果您启用了双因素认证，您可能还需要输入验证码。输入`Get-AzureRmSubscription`命令。这将显示所有订阅的列表，包括订阅名称、订阅ID、租户ID和状态；即，它是启用还是不活跃。PowerShell
    cmdlet的名称中包含`AzureRm`，其中`Rm`代表资源管理器：
- en: '![](img/7a6704a6-4af5-487e-a3bd-6178be363237.png)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/7a6704a6-4af5-487e-a3bd-6178be363237.png)'
- en: 'Next, we check `Get-AzureRmContext`.This cmdlet gives the current context,
    as shown in the following screenshot:'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们检查`Get-AzureRmContext`。此cmdlet提供当前上下文，如下面的截图所示：
- en: '![](img/969135fa-2140-4eb9-a6af-d632669e87d0.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/969135fa-2140-4eb9-a6af-d632669e87d0.png)'
- en: 'Now, let us get a list of all the virtual machines that are in the subscription.
    We can get that with `Get-AzureRmVM`:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们获取订阅中所有虚拟机的列表。我们可以使用`Get-AzureRmVM`来获取：
- en: '![](img/2451c792-fcf8-4463-8d90-7b872d43e2f6.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/2451c792-fcf8-4463-8d90-7b872d43e2f6.png)'
- en: 'To start the virtual machine, we will use the cmdlet `Start-AzureRmVM`, passing
    `Name` and `ResourceGroupName` as parameters, as shown in the following screenshot.
    The command will take a while to start the virtual machine, as can be seen from
    the `StartTime` and `EndTime` values:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要启动虚拟机，我们将使用`Start-AzureRmVM` cmdlet，传递`Name`和`ResourceGroupName`作为参数，如下面的截图所示。启动虚拟机需要一段时间，可以从`StartTime`和`EndTime`值中看出：
- en: '![](img/b3256711-a226-4a30-8d33-3158a1422b1f.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/b3256711-a226-4a30-8d33-3158a1422b1f.png)'
- en: 'To stop the virtual machine, we can use the cmdlet `Stop-AzureRmVM`, passing `Name` and  `ResourceGroupName` as
    parameters with the `Force` flag . The `Force` parameter is used just to make
    it non-interactive; otherwise, there will be a prompt for confirmation. Like the `Start-AzureRmVM`
    command, this command also takes a while, as shown in the following screenshot:'
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要停止虚拟机，我们可以使用`Stop-AzureRmVM` cmdlet，传递`Name`和`ResourceGroupName`作为参数，并使用`Force`标志。`Force`参数仅用于使其非交互式；否则，将会有确认提示。与`Start-AzureRmVM`命令一样，此命令也需要一段时间，如下面的截图所示：
- en: '![](img/f9b180f1-72cc-41eb-9b98-9f62ec482fd7.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/f9b180f1-72cc-41eb-9b98-9f62ec482fd7.png)'
- en: We saw how easy it is to manage a virtual machine from PowerShell. Managing
    it from the portal is easier, as it is just a click of a button, but the intent
    here is to demonstrate the flexibility provided by Azure. We can also execute
    these PowerShell commands in the Cloud Shell that we saw earlier in this chapter;
    that is, we execute the commands directly in the shell opened in a browser on
    the Azure portal. This needs additional storage and hence cost. This is a very
    basic getting-started discussion on Azure automation using PowerShell. There is
    an ocean of information to be learned and grasped. An enthusiastic learner should
    go through the documentation to enhance their knowledge and get a handle on the
    subject from the official Microsoft Azure documentation at [https://docs.microsoft.com/en-us/powershell/azure/overview?view=azurermps-5.1.1](https://docs.microsoft.com/en-us/powershell/azure/overview?view=azurermps-5.1.1).
    There are books and sample modules as well, built by the Microsoft and the Azure
    community for a variety of scenarios, that the reader can leverage to learn, understand,
    and experiment. These can be seen at [https://docs.microsoft.com/en-us/azure/automation/automation-runbook-gallery](https://docs.microsoft.com/en-us/azure/automation/automation-runbook-gallery).
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看到了如何使用 PowerShell 管理虚拟机是多么简单。从门户管理它更容易，因为它只需点击一下按钮，但这里的目的是展示 Azure 提供的灵活性。我们还可以在之前在本章中看到的
    Cloud Shell 中执行这些 PowerShell 命令；也就是说，我们直接在 Azure 门户浏览器中打开的壳中执行命令。这需要额外的存储空间，因此会产生成本。这是关于使用
    PowerShell 在 Azure 中进行自动化的一个非常基础的入门讨论。有大量的信息需要学习和掌握。一个热情的学习者应该阅读文档来增强他们的知识，并从官方的
    Microsoft Azure 文档中掌握主题，文档链接为 [https://docs.microsoft.com/en-us/powershell/azure/overview?view=azurermps-5.1.1](https://docs.microsoft.com/en-us/powershell/azure/overview?view=azurermps-5.1.1)。还有书籍和示例模块，由
    Microsoft 和 Azure 社区为各种场景构建，读者可以利用它们来学习、理解和实验。这些可以在 [https://docs.microsoft.com/en-us/azure/automation/automation-runbook-gallery](https://docs.microsoft.com/en-us/azure/automation/automation-runbook-gallery)
    上看到。
- en: Next, we will learn to publish a web app in Azure, which is the most commonly
    used operation.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将学习如何在 Azure 中发布 Web 应用，这是最常用的操作。
- en: Publishing a web app in Azure
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Azure 中发布 Web 应用
- en: In this section, we will learn to publish a web app in Azure. As discussed in
    the previous two sections, we can create a resource from the Azure portal or we
    can write code on top of the SDK of our preferred language; for example, C#, PowerShell,
    and so on. As a developer working on Microsoft technologies, most of my productive
    work time is spent on Microsoft Visual Studio, so I would like to publish the
    web app  on Azure. This is the most common scenario that we perform as, after
    developing the web app, it should be hosted in the cloud for it to be available
    for a larger audience and more users. If we look at the Azure portal, we will
    see a service called App Services in the left panel or hub. Let's discuss App
    Services first.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将学习如何在 Azure 中发布 Web 应用。如前两个部分所述，我们可以从 Azure 门户创建资源，或者我们可以在我们首选语言的 SDK
    上编写代码；例如，C#、PowerShell 等。作为一名在 Microsoft 技术上工作的开发者，我大部分的生产力工作时间都花在 Microsoft Visual
    Studio 上，所以我希望将 Web 应用发布到 Azure 上。这是我们最常执行的操作之一，因为开发完 Web 应用后，它应该托管在云端，以便为更广泛的受众和更多用户提供服务。如果我们查看
    Azure 门户，我们将在左侧面板或中心看到名为 App 服务的服务。让我们首先讨论 App 服务。
- en: Azure App Services
  id: totrans-154
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure App 服务
- en: Azure App Services is the solution if we want to build an application or an
    API that runs on a platform in the cloud. App Services supports a wide variety
    of technologies and application types from traditional web applications, such
    as a blog, or an e-commerce site, or a **content management system** (**CMS**).
    We can write the application in ASP.NET, Node.js or PHP, for that matter, many
    other frameworks and languages. If we just want to build a service/API and serve
    data, modern-day **Single-Page Applications** (**SPA**), or a logic app, App Services
    supports all of these. The process that we used to create the virtual machines
    in the last section on the Azure portal can be used to create an App Service as
    well. With virtual machines, we selected the operating system that we wanted.
    With App Services, we can go with a pre-configured App Service. For example, if
    we wanted to set up a WordPress blog, we could select the WordPress entry and
    click Create, and, with a little more configuration, we would have a WordPress
    site up and running. The name of the App Service that we want to create should
    be unique on [azurewebsites.net](https://azure.microsoft.com/en-us/), where the
    app will eventually be hosted. Next, we have to select a resource group. We can
    use an existing resource group or create a new resource group. Since it's a logical
    container for the resources, I prefer having separate resource groups, so once
    I am done with that resource, I can get rid of the entire resource in one go.
    The next thing we are asked by the Azure portal is to choose an App Service Plan.
    If we have to draw an analogy, think of it as something very similar to size when
    we created a virtual machine. The concept of the App Service Plan is very important. Every
    **web application** we will create will be placed into a **single App Service**
    dedicated to that application. And then every **App Service** maps to a single
    **App Service Plan**. A plan describes the performance characteristics of the
    machine that will host the App Service. Behind the scenes, the App Service Plan
    uses a virtual machine, but the virtual machine is abstracted away by Azure. We
    don't need to worry about managing the virtual machine as Azure takes care of
    it and abstracts this away from the end user. We can simply use the App Service
    Plan to describe how many CPUs  and how much memory we need; Azure takes care
    of the rest. One important point to note about the App Service Plan is that we
    can deploy multiple App Services into Azure and have them all mapped to the same
    App Service Plan. Select an existing App Service Plan or a new App Service Plan,
    based on your web app needs. If you need to serve a lot of users, if there are
    going to be a lot of users using your web app, then we can select a bigger service
    plan from the portal which can serve a higher number of requests, we can reuse
    an existing service plan (if we have one already), or we can use a free or less
    costly plan. After completing all the configurations, we are good to click on
    Create. Since all this is very similar to virtual machine creation, we are not
    delving much into the details. Within a few minutes, the App Service should be
    up and running. Now that we have our App Service created, we can publish our web
    app to this created App Service.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: Azure App Services 是我们想要在云平台上运行的应用程序或 API 的解决方案。App Services 支持从传统的 Web 应用程序，如博客、电子商务网站或
    **内容管理系统**（**CMS**）等多种技术和应用程序类型。我们可以用 ASP.NET、Node.js 或 PHP 等多种框架和语言编写应用程序。如果我们只想构建一个服务/API
    并提供数据，现代的 **单页应用程序**（**SPA**）或逻辑应用程序，App Services 也支持所有这些。我们上一节在 Azure 门户中创建虚拟机的过程同样可以用来创建
    App Service。使用虚拟机时，我们选择了想要的操作系统。对于 App Services，我们可以选择一个预配置的 App Service。例如，如果我们想设置一个
    WordPress 博客，我们可以选择 WordPress 选项并点击创建，稍作配置后，我们就可以拥有一个运行中的 WordPress 网站。我们想要创建的
    App Service 名称应该在 [azurewebsites.net](https://azure.microsoft.com/en-us/) 上是唯一的，那里将是应用程序最终托管的地方。接下来，我们必须选择一个资源组。我们可以使用现有的资源组或创建一个新的资源组。由于它是一个资源的逻辑容器，我更喜欢有单独的资源组，这样一旦我完成那个资源，我就可以一次性删除整个资源。Azure
    门户接下来要求我们选择一个 App Service 计划。如果我们必须进行类比，那么当我们创建虚拟机时，它就像大小一样。App Service 计划的概念非常重要。我们将创建的每一个
    **Web 应用程序** 都将被放置在一个专门为该应用程序提供的 **单个 App Service** 中。然后每个 **App Service** 都映射到一个单一的
    **App Service 计划**。一个计划描述了托管 App Service 的机器的性能特征。在幕后，App Service 计划使用虚拟机，但 Azure
    将其抽象化，我们不需要担心管理虚拟机，因为 Azure 会处理它，并从最终用户那里抽象出来。我们可以简单地使用 App Service 计划来描述我们需要多少
    CPU 和多少内存；Azure 会处理其余部分。关于 App Service 计划的一个重要注意事项是，我们可以将多个 App Service 部署到 Azure，并将它们映射到同一个
    App Service 计划。根据您的 Web 应用需求选择现有的 App Service 计划或新的 App Service 计划。如果您需要服务大量用户，如果将有大量用户使用您的
    Web 应用程序，那么我们可以从门户中选择一个更大的服务计划，它可以处理更多的请求，我们可以重用现有的服务计划（如果我们已经有了），或者我们可以使用免费或成本较低的计划。完成所有配置后，我们可以点击创建。由于所有这些都与虚拟机创建非常相似，我们不会深入细节。几分钟内，App
    Service 应该就可以运行了。现在我们已经创建了 App Service，我们可以将我们的 Web 应用程序发布到这个创建的 App Service 上。
- en: Publishing the web app
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 发布网络应用程序
- en: 'Let''s publish an ASP.NET Core 2.0 web app in Azure using Visual Studio:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用 Visual Studio 在 Azure 上发布一个 ASP.NET Core 2.0 网络应用程序：
- en: Create a new ASP.NET Core 2.0 project in Visual Studio or use one of the existing
    applications that we have created thus far in the book. We will use one of the
    web apps that we developed in the book thus far for illustration purposes.
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Visual Studio 中创建一个新的 ASP.NET Core 2.0 项目，或者使用本书中迄今为止创建的现有应用程序之一。我们将使用本书中迄今为止开发的网络应用程序之一进行说明。
- en: 'Right-click the project. On the context menu, click Publish:'
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击项目。在上下文菜单中，点击发布：
- en: '![](img/cbc6894f-cb69-466a-af1f-c41809f882a8.png)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cbc6894f-cb69-466a-af1f-c41809f882a8.png)'
- en: 'This will display a nice-looking user interface, presenting us with three options.
    We can publish on:'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将显示一个美观的用户界面，提供了三个选项。我们可以选择在以下位置发布：
- en: 'Microsoft Azure App Service: The container for the web app.'
  id: totrans-162
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft Azure App Service：网络应用程序的容器。
- en: 'IIS, FTP: For deploying on IIS or FTP on a virtual machine.'
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: IIS, FTP：在虚拟机上部署到 IIS 或 FTP。
- en: 'Folder: To publish the app in the local filesystem.'
  id: totrans-164
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件夹：在本地文件系统中发布应用程序。
- en: Import profile**:** To import a publish profile from the Azure portal and publish
    the app. We will see this later in the chapter.
  id: totrans-165
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**导入配置文件**：从 Azure 门户导入发布配置文件以发布应用程序。我们将在本章后面看到这一点。'
- en: Microsoft Azure Virtual Machines**:** To publish the app in a virtual machine
    hosted in Azure.
  id: totrans-166
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft Azure 虚拟机**:** 在 Azure 中托管的虚拟机上发布应用程序。
- en: 'We will select the Microsoft Azure App Service. That gives us two options:
    either to select an existing App Service or create a new one. We can use either
    of the options. This is to illustrate that we can create a brand new App Service
    directly from within Visual Studio or use an existing App Service that you created. Click
    on the Publish button and we will get a series of dialogs. If you are not logged
    in with your Azure subscription credentials, you will need to do so.'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将选择**Microsoft Azure App Service**。这提供了两个选项：要么选择一个现有的应用程序服务，要么创建一个新的。我们可以使用任一选项。这是为了说明我们可以在
    Visual Studio 内部直接创建全新的应用程序服务，或者使用你创建的现有应用程序服务。点击**发布**按钮，我们将得到一系列对话框。如果你没有使用
    Azure 订阅凭据登录，你需要这样做。
- en: '![](img/89a3b336-e3c4-42bf-a4d8-e1f57e494378.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](img/89a3b336-e3c4-42bf-a4d8-e1f57e494378.png)'
- en: 'You will notice that on the top right, it shows my Microsoft account with which
    I am logged in. I need to enter an App Name that is unique. Subscription will
    be auto-populated. But, if you have multiple subscriptions, you must choose the
    subscription that you wish to use. Both Resource Group and App Service Plan can
    be either created brand new or chosen from an existing one. Here, in the screenshot,
    I have chosen an already existing one. Click Create. It will show a Summary screen:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你会注意到右上角显示了我在其中登录的 Microsoft 帐户。我需要输入一个唯一的**应用程序名称**。**订阅**将自动填充。但是，如果你有多个订阅，你必须选择你希望使用的订阅。**资源组**和**应用程序服务计划**可以是全新创建的，也可以从现有的中选择。在这里，截图显示我已经选择了一个现有的。点击**创建**。它将显示一个**摘要**屏幕：
- en: '![](img/0cd05a32-a119-4db3-aaa8-4f549f168cf8.png)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0cd05a32-a119-4db3-aaa8-4f549f168cf8.png)'
- en: Click on Publish and the app will be published on Azure. Visual Studio saves
    the publish settings file for the project. This can take a while the first time
    we publish because Visual Studio has to push up all the assemblies and artifacts
    that are needed for the App Service. But once it's published into Azure, and we
    just make a change to something like a Razor view file or script file and publish
    the next time, all Visual Studio needs to do is upload just the few changed files.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击发布，应用程序将在 Azure 上发布。Visual Studio 会保存项目的发布设置文件。第一次发布时可能需要一段时间，因为 Visual Studio
    需要将所有用于 App 服务的程序集和工件推送到服务器。但是一旦发布到 Azure，如果我们只是更改了像 Razor 视图文件或脚本文件这样的内容，并在下一次发布，Visual
    Studio 只需要上传少量更改的文件。
- en: '![](img/d3b4eca5-3a3e-4308-a9ce-c194d57a149e.png)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d3b4eca5-3a3e-4308-a9ce-c194d57a149e.png)'
- en: 'After some time, upon successful publishing, the deployed application will
    open in the browser, as shown in the following screenshot:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 经过一段时间后，发布成功后，部署的应用程序将在浏览器中打开，如下面的截图所示：
- en: '![](img/45ad37c1-0956-4103-be45-f2d6b76a3d78.png)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![](img/45ad37c1-0956-4103-be45-f2d6b76a3d78.png)'
- en: Behind the scenes a publishing profile is created by Visual Studio, so let's
    have a quick look at it.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在幕后，Visual Studio 会创建一个发布配置文件，让我们快速看一下它。
- en: Publishing profiles
  id: totrans-176
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 发布配置文件
- en: 'Upon publishing, Visual Studio will create a publishing profile. It''s basically
    a folder containing files created in the project, and can be seen in the Properties
    node of the project, as shown in the following screenshot:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 发布后，Visual Studio 将创建一个发布配置文件。它基本上是一个包含项目创建的文件的文件夹，可以在项目的属性节点中看到，如下截图所示：
- en: '![](img/3fbf3c05-d031-4edb-84dc-ad36e152cb8c.png)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3fbf3c05-d031-4edb-84dc-ad36e152cb8c.png)'
- en: 'We can have multiple profiles and these profiles will be stored in the `PublishProfiles`
    folder with the file extension `.pubxml`, as these are XML files. `.pubxml` files
    contain information such as the type of build ; for example, the release/debug
    build. It has URLs and a username that are part of the deployment credentials,
    as shown in the following code:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以有多个配置文件，这些配置文件将存储在 `PublishProfiles` 文件夹中，文件扩展名为 `.pubxml`，因为这些是 XML 文件。`.pubxml`
    文件包含有关构建类型的信息，例如，发布/调试构建。它包含部署凭据的一部分的 URL 和用户名，如下代码所示：
- en: '[PRE0]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The file doesn''t contain a password. So it can be checked in the source control
    without worrying about compromising security. The deployment password by default
    is placed into a different file that is not part of the project but is in the
    same folder:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 该文件不包含密码。因此，可以在源代码控制中检查，而不用担心安全风险。默认情况下，部署密码放置在一个不同的文件中，该文件不是项目的一部分，但位于同一文件夹中：
- en: '![](img/7e448369-e9db-4a00-8762-452090dde00c.png)'
  id: totrans-182
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7e448369-e9db-4a00-8762-452090dde00c.png)'
- en: 'It is the `pubxml.user` file. The file does not contain the password in plain
    text. It''s encrypted with a logged-in user-specific key, so if the file is copied
    and pasted and used by another user, the password will not decrypt correctly (as
    the key is user-specific, it will not match), hence the password will not work
    for them. So the obvious question that comes to mind is: What if I miss the password
    or delete the `pubxml.user` file and want to publish the app? We can do so by
    performing the following steps:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 它是 `pubxml.user` 文件。该文件不包含明文密码。它使用登录用户特定的密钥进行加密，因此如果文件被复制粘贴并由另一个用户使用，密码将无法正确解密（因为密钥是用户特定的，它不会匹配），因此密码对他们将不起作用。所以，脑海中浮现出的明显问题是：如果我丢失了密码或删除了
    `pubxml.user` 文件，想要发布应用程序怎么办？我们可以通过以下步骤来完成：
- en: 'Go to the Azure portal, and the Overview blade of the App Service that we wish
    to publish to. Click on Get publish profile to download the publish profile, as
    shown in the following screenshot:'
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 Azure 门户，然后查看我们希望发布的 App Service 的概览选项卡。点击“获取发布配置文件”以下载发布配置文件，如下截图所示：
- en: '![](img/85ec1a17-e4e9-433c-b9a6-b90f68139586.png)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![](img/85ec1a17-e4e9-433c-b9a6-b90f68139586.png)'
- en: 'In Visual Studio, right-click on the project and click Publish; select Import
    profile and click OK:'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Visual Studio 中，右键单击项目并点击“发布”；选择“导入配置文件”并点击“确定”：
- en: '![](img/9a11f743-c0bb-45ab-98ba-b16a43911ce2.png)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9a11f743-c0bb-45ab-98ba-b16a43911ce2.png)'
- en: Click Publish and the web app will be published.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“发布”，Web 应用程序将被发布。
- en: Next, let's have a look at a few of the commonly used features of Azure that
    every .NET developer must be conversant with.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们看看 Azure 中一些常用的功能，每个 .NET 开发者都必须熟悉。
- en: App Service features
  id: totrans-190
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应用服务功能
- en: 'If we look at the App Service items that we created, we will notice a plethora
    of things. To describe them in detail would need a chapter of its own, so we will
    quickly look at few of the most common and important ones from a .NET developer
    perspective:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们查看我们创建的应用服务项目，我们会注意到许多事情。要详细描述它们需要单独的一章，所以我们将快速查看从 .NET 开发者角度出发的几个最常见和重要的功能：
- en: '![](img/1622f3d5-d39d-4d90-9b3a-dff0eebae4f5.png)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1622f3d5-d39d-4d90-9b3a-dff0eebae4f5.png)'
- en: 'As we can see, there are subsections for DEPLOYMENT, SETTINGS, APP SERVICE
    PLAN, DEVELOPMENT TOOLS, MOBILE, API, MONITORING, SUPPORT + TROUBLESHOOTING. Let
    us discuss each of these sections so that we know everything Azure has to offer
    and we can then leverage it as and when needed. The most basic and most frequently
    used ones are:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所见，有 DEPLOYMENT（部署）、SETTINGS（设置）、APP SERVICE PLAN（应用服务计划）、DEVELOPMENT TOOLS（开发工具）、MOBILE（移动）、API、MONITORING（监控）、SUPPORT
    + TROUBLESHOOTING（支持+故障排除）等子部分。让我们讨论每个部分，以便我们知道 Azure 提供的所有内容，然后我们可以根据需要利用它。最基本且最常用的包括：
- en: 'Overview: Gives a complete overall picture of the App Service. We can browse
    the service, and start/stop/restart/delete the service from here. We can also
    download the publish profile of the service and reset the publish profile to invalidate
    previously downloaded publish profiles. The charts display the statistics of the
    App Service, such as the number of HTTP 5xx or server errors with the timeline,
    data in and out, number of requests, and average response time to serve a request.'
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 概览：提供App Service的完整整体视图。我们可以从这里浏览服务，并启动/停止/重启/删除服务。我们还可以下载服务的发布配置文件，并将发布配置文件重置为使先前下载的发布配置文件无效。图表显示App
    Service的统计信息，例如HTTP 5xx或服务器错误的数量、时间线上的数据进出、请求数量和处理请求的平均响应时间。
- en: Diagnose and solve problems: This provides an easy way to diagnose and solve
    problems with web apps. There are pre-defined categories of problem available
    which you can select and get a diagnosis using the Azure Health Checkup web app,
    which gives an in-depth overview of the app health based on requests, CPU usage,
    and memory usage.
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 诊断和解决问题：这提供了一个简单的方法来诊断和解决Web应用中的问题。有预定义的问题类别可供选择，您可以使用Azure Health Checkup Web应用进行诊断，该应用基于请求、CPU使用率和内存使用率，提供对应用健康状况的深入了解。
- en: DEPLOYMENT
  id: totrans-196
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 部署
- en: 'In this category, the options are:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个类别中，选项如下：
- en: 'Quickstart: Provides guidance to get you up and running with app deployment.
    Quickstart has handy guidance for ASP.NET, Java, Node.js, PHP, and Python.'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 快速入门：提供指导，帮助您开始应用部署。快速入门为ASP.NET、Java、Node.js、PHP和Python提供了实用的指导。
- en: Deployment slots: Deployment slots let us deploy different versions of web apps
    to different URLs. We can test a certain version and then swap the content and
    configuration between slots. Deployment slots enable us to validate that the app
    is working properly in Azure, before we promote the app into production. This
    also eliminates downtime, and gives the new deployment a chance to warm up before
    customers use it.  We can have more than one slot with the right App Service Plan.
    For example, we might want one slot for testing, one for staging, and one for
    production. And once it has been validated that the deployment into staging is
    working, we can swap the slots; that is, we can take what is tested in the staging
    slot, and with a click of a button (or a PowerShell script), we can make the staging
    deployment into the new production. In the worst case, if something goes wrong
    it's very easy to swap these back and take the last working production deployment
    and put it into production again.
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署槽位：部署槽位允许我们将不同版本的Web应用部署到不同的URL。我们可以测试某个版本，然后在不同槽位之间交换内容和配置。部署槽位使我们能够在将应用推广到生产之前，验证应用在Azure中是否正常运行。这还消除了停机时间，并给新部署一个在客户使用之前预热的机会。我们可以拥有多个槽位，只要我们有合适的App
    Service Plan。例如，我们可能需要一个槽位用于测试，一个用于预发布，一个用于生产。一旦验证了预发布部署的工作正常，我们就可以交换槽位；也就是说，我们可以将预发布槽位中测试的内容，通过点击一个按钮（或PowerShell脚本），将预发布部署转换为新的生产部署。在最坏的情况下，如果出现问题，很容易将这些槽位交换回来，并将最后一个正常工作的生产部署重新放入生产。
- en: 'Deployment options: To configure the source control of your choice for deployment.
    **Visual Studio Team Services** (**VSTS**), OneDrive, Git, Bitbucket, and Dropbox
    are supported.'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署选项：配置您选择的源控制以进行部署。**Visual Studio Team Services**（**VSTS**）、OneDrive、Git、Bitbucket和Dropbox都受到支持。
- en: 'Continuous Delivery: This is currently in preview at the time of writing this
    chapter. Continuous delivery in Visual Studio Team Services simplifies setting
    up a robust deployment pipeline. The pipeline builds, runs load tests, and deploys
    to the staging slot and then to production.'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 持续交付：在编写本章时，这正处于预览阶段。在Visual Studio Team Services中的持续交付简化了设置健壮的部署管道。该管道构建、运行负载测试，并将部署到预发布槽位，然后到生产。
- en: SETTINGS
  id: totrans-202
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置
- en: 'Here the options are as follows:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 这里选项如下：
- en: 'Application settings: The place where we can define and overwrite application
    settings and connection strings. We will see this in action in the next chapter,
    when we build our movie booking web app. This is also the place where we will
    enable WebSockets for our SignalR-based applications and convert the application
    to always-on; otherwise, the web application gets unloaded if it remains idle.
    Remote debugging is also enabled and disabled from this blade.'
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序设置：我们可以在这里定义和覆盖应用程序设置和连接字符串的地方。我们将在下一章中看到它的实际应用，当我们构建我们的电影预订Web应用时。这也是我们为基于SignalR的应用程序启用WebSockets并将应用程序转换为始终开启的地方；否则，如果Web应用程序保持空闲状态，它将被卸载。远程调试也可以从这个面板中启用和禁用。
- en: '**Authentication / Authorization**: To enable/disable authentication.'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**身份验证/授权**：启用/禁用身份验证。'
- en: '**Backups**: Configures backups to create restorable archive copies of web
    app content, configurations, and databases.'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**备份**：配置备份以创建可恢复的存档副本，包括Web应用内容、配置和数据库。'
- en: '**Custom domains**: This is the place to configure and manage custom hostnames
    assigned to the web app. For example, my blog site is `rishabhverma.net`. If I
    want to link this domain with the web app, this is where I need to make the configuration.
    I can also enable an HTTPS-only flag here, so that all the traffic for HTTP is
    redirected to HTTPS, making my app more secure.'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自定义域名**：这是配置和管理分配给Web应用的自定义主机名的地方。例如，我的博客网站是`rishabhverma.net`。如果我想将此域名与Web应用链接，就需要在这里进行配置。我还可以在此处启用仅HTTPS标志，这样所有HTTP流量都会被重定向到HTTPS，使我的应用更加安全。'
- en: '**Scale up**: To serve the increased/decreased load or demands of the web app,
    we need a higher/lower configuration of the App Service Plan and this is the blade
    to use for this purpose.'
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**扩展**：为了满足Web应用增加/减少的负载或需求，我们需要更高/更低的App Service计划配置，而这个选项卡就是用于此目的的。'
- en: 'Scale out: In this blade, we can enable autoscaling, which will automatically
    scale the app, if the load increases based on the configured rule. We can also
    choose the instance count of the machines hosting the App Service in this blade.'
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**扩展**：在这个选项卡中，我们可以启用自动扩展，如果根据配置的规则负载增加，应用程序将自动扩展。我们还可以在此选项卡中选择托管App Service的机器的实例数量。'
- en: 'Automation script: In this blade, we can automate deploying resources with
    Azure Resource Manager templates in a single, coordinated operation. We can also
    define resources and configurable input parameters and deploy with script or code.'
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动化脚本：在这个选项卡中，我们可以通过单个协调操作使用Azure Resource Manager模板自动部署资源。我们还可以定义资源和可配置的输入参数，并通过脚本或代码进行部署。
- en: We have discussed the App Service Plan in some length, so as an exercise readers
    are expected to understand and learn the details of the App Service Plan, as that
    is directly linked to the performance and cost of the web app that you host in
    Azure.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经详细讨论了应用服务计划，因此作为练习，读者应理解和学习应用服务计划的细节，因为这与你在Azure中托管的应用程序的性能和成本直接相关。
- en: DEVELOPMENT TOOLS
  id: totrans-212
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**开发工具**'
- en: 'Let''s have a look at the options:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看可用的选项：
- en: Advanced Tools: Advanced Tools (Kudu) provides a collection of developer-oriented
    tools and extensibility points for the App Service. This will be one of the  most
    frequently used blades, once we deploy our app in Azure. I would highly encourage
    readers to read the Kudu wiki at [https://github.com/projectkudu/kudu/wiki](https://github.com/projectkudu/kudu/wiki) as
    it gives detailed information about Kudu.
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**高级工具**：高级工具（Kudu）为App Service提供了一组面向开发者的工具和可扩展点。一旦我们在Azure中部署了应用，这将是使用频率最高的选项之一。我强烈建议读者阅读Kudu维基百科[https://github.com/projectkudu/kudu/wiki](https://github.com/projectkudu/kudu/wiki)，因为它提供了关于Kudu的详细信息。'
- en: '**Performance test**: In this blade, we can perform the load testing of our
    App Service by simulating the virtual load of any number of users and the duration
    that we want to test against by specifying the number of users and test duration.
    We can specify either an API endpoint URL or a Visual Studio Web Test to run for
    performance testing.'
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**性能测试**：在这个选项卡中，我们可以通过模拟任何数量的用户虚拟负载以及我们想要测试的持续时间来执行App Service的负载测试。我们可以指定API端点URL或Visual
    Studio Web Test以进行性能测试。'
- en: Extensions:  Extensions add functionality to the App Service, such as the image
    optimizer for an image upload application, and so on.
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**扩展**：扩展为App Service添加功能，例如图像上传应用程序的图像优化器等。'
- en: API
  id: totrans-217
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**API**'
- en: 'Here are the options:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一些选项：
- en: '**API definition**: API definition lets us configure the location of the Swagger
    2.0 metadata describing the API exposed through the App Service. This makes it
    easy for others to discover and consume the API.'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**API定义**：API定义允许我们配置描述通过App Service公开的API的Swagger 2.0元数据的存储位置。这使得其他人更容易发现和消费API。'
- en: '**CORS**: **Cross-Origin Resource Sharing** (**CORS**) allows JavaScript code
    running in a browser on an external host to interact with the App Service backend.
    We can specify the origins that should be allowed to make cross-origin calls.'
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**CORS**：**跨源资源共享**（CORS）允许运行在外部主机浏览器中的JavaScript代码与App Service后端交互。我们可以指定应允许进行跨源调用的来源。'
- en: MONITORING
  id: totrans-221
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**监控**'
- en: 'Let''s have a look at the available options:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看可用的选项：
- en: '**Application Insights: **It helps us detect and diagnose quality issues in
    web apps and web services, and helps us understand what users are actually using
    in the App Service. This is of tremendous importance to analyze the performance
    and error characteristics of the App Service. We will make use of application
    insights while building our movie booking app in the next chapter.'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Application Insights：**它帮助我们检测和诊断Web应用和Web服务的质量问题，并帮助我们了解用户实际上在App Service中使用什么。这对于分析App
    Service的性能和错误特征非常重要。在下一章中，我们将利用应用洞察构建我们的电影预订应用。'
- en: '**Alerts**: This is one of the superb features of Azure. If we want to know
    when our web app is performing poorly or there is a high CPU or memory usage due
    to load, we can configure rule-based email alerts in this blade and we will be
    notified by email if the rule criteria are met. Then with the help of other diagnostics
    we can figure out and fix the issue.'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**警报：**这是Azure的卓越功能之一。如果我们想知道我们的Web应用表现不佳或由于负载导致CPU或内存使用量高时，我们可以在该选项卡中配置基于规则的电子邮件警报，如果满足规则条件，我们将通过电子邮件收到通知。然后，借助其他诊断工具，我们可以找出并修复问题。'
- en: '**Diagnostic logs**: In this blade, we can enable/disable application logging
    in a filesystem or blob. We can also enable/disable detailed error messages and
    failed request tracing. One thing to notice here is that filesystem logging is
    automatically disabled after 12 hours to keep the logs from bloating the filesystem,
    whereas blob logging will keep on going indefinitely.'
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**诊断日志：**在这个选项卡中，我们可以启用/禁用文件系统或blob中的应用程序日志。我们还可以启用/禁用详细错误消息和失败的请求跟踪。在这里需要注意的一点是，文件系统日志在12小时后自动禁用，以防止日志膨胀文件系统，而blob日志将无限期地继续。'
- en: '**Process explorer**: To monitor/kill the processes running the App Service
    and monitor their memory and CPU usages.'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**进程资源管理器：**用于监控/终止运行App Service的进程，并监控它们的内存和CPU使用情况。'
- en: SUPPORT + TROUBLESHOOTING
  id: totrans-227
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 支持与故障排除
- en: 'The options are:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 选项包括：
- en: '**Resource health: **Resource health watches resource and tells us if they''re
    running as expected and if not, what actions can be taken.'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**资源健康：**资源健康监控资源并告诉我们它们是否按预期运行，如果不按预期运行，可以采取哪些措施。'
- en: '**App Service Advisor: **App Service Advisor provides insights for improving
    the app experience on the App Service platform.'
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**App Service Advisor：**App Service Advisor为改进App Service平台上的应用体验提供洞察。'
- en: 'Visual Studio provides very rich extensibility support. There are numerous
    extensions for Azure as well. One great extension for Azure is Cloud Explorer,
    which should already be available with Visual Studio 2017\. If not, I highly recommend
    you try it out. To search, download, and install any available Visual Studio extensions,
    click **Tools** | **Extensions and Updates**. Then search `Cloud Explorer` after
    clicking **Online** on the left panel of the window. Cloud explorer can be opened
    by clicking on View | Cloud Explorer**.** Cloud Explorer can be thought of as
    a minified version of the Azure management portal, which can be used from within
    Visual Studio IDE. We can start/stop a VM or App Service, profile the App Service, 
    download the publish profile and logs, attach the debugger to Azure, and much
    more from this extension. The following screenshot displays the Cloud Explorer
    extension:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: Visual Studio提供了非常丰富的扩展支持。对于Azure也有许多扩展。Cloud Explorer 是一个针对Azure的出色扩展，它应该已经包含在Visual
    Studio 2017中。如果没有，我强烈建议您尝试使用它。要搜索、下载和安装任何可用的Visual Studio扩展，请点击**工具** | **扩展和更新**。然后在窗口左侧面板上点击**在线**后搜索`Cloud
    Explorer`。可以通过点击**视图** | **Cloud Explorer**来打开Cloud Explorer。Cloud Explorer可以被视为Azure管理门户的精简版，可以在Visual
    Studio IDE内部使用。我们可以从这个扩展中启动/停止虚拟机或App Service，分析App Service，下载发布配置文件和日志，将调试器附加到Azure，等等。以下截图显示了Cloud
    Explorer扩展：
- en: '![](img/f0a9515d-5d0f-4d1c-9907-b9cf33fba0fa.png)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f0a9515d-5d0f-4d1c-9907-b9cf33fba0fa.png)'
- en: And this concludes our discussion of Azure. Next we will discuss cloud storage
    and Azure functions that provide cheap serverless computing.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 这就结束了我们对Azure的讨论。接下来，我们将讨论云存储和提供低成本无服务器计算的Azure函数。
- en: Cloud storage
  id: totrans-234
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 云存储
- en: We are all aware of SQL Server (if not, do not worry). Azure SQL is just SQL
    Server deployed on Azure. We will not be discussing Azure SQL in this section
    as we will be using Azure SQL in the next chapter and hence will be discussing
    it at length then. We will check out the storage accounts. Storage accounts can
    store hundreds of terabytes (roughly speaking 1 Terabyte = 1,000 Gigabytes) of
    data. We will discuss how to use Azure storage as a place to keep uploaded files
    for our web application and how we can enable users to download files from storage by
    creating and handing out what's known as a **shared access signature** (**SAS**).
    So, lets get started.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 我们都知道SQL Server（如果不知道，不要担心）。Azure SQL只是部署在Azure上的SQL Server。在本节中，我们不会讨论Azure
    SQL，因为我们将在下一章中使用Azure SQL，因此将在那时详细讨论。我们将检查存储帐户。存储帐户可以存储数百个千兆字节（粗略地说，1千兆字节= 1,000千兆字节）的数据。我们将讨论如何将Azure存储用作存储上传文件的场所，以及我们如何通过创建和分发所谓的**共享访问签名**（**SAS**）来启用用户从存储中下载文件。所以，让我们开始吧。
- en: 'In the Azure portal, click on New and select Storage and then click Storage
    account - blob, file, table, queue, as shown in the following screenshot:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 在Azure门户中，点击新建，选择存储，然后点击存储帐户 - 块、文件、表、队列，如下面的截图所示：
- en: '![](img/ceca2877-708d-4b32-b183-0966f3bdfa87.png)'
  id: totrans-237
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ceca2877-708d-4b32-b183-0966f3bdfa87.png)'
- en: 'There is also a link to a Quickstart tutorial, which I would highly recommend
    as it has great getting-started videos and tutorials from the leading tech evangelists
    to get you up and running with Azure storage. On clicking Storage account - blob,
    file, table, queue, a new blade named Create storage account will display, as
    shown in the following screenshot:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一个链接到快速入门教程，我强烈推荐它，因为它有来自主要技术传教士的出色的入门视频和教程，可以帮助您快速开始使用Azure存储。点击存储帐户 - 块、文件、表、队列，将显示一个名为创建存储帐户的新刀片，如下面的截图所示：
- en: '![](img/7e1926e2-eb9c-4ae4-9010-5378d1bbff13.png)'
  id: totrans-239
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/7e1926e2-eb9c-4ae4-9010-5378d1bbff13.png)'
- en: 'In the blade, enter the required fields:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 在刀片视图中，输入所需的字段：
- en: Name**:** This should comprise 3-24 characters in lowercase or numeric text
    that should be unique across all Azure storage, as it is exposed on .core.windows.net.
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**名称**：这应该由3-24个字符组成，可以是小写或数字文本，且在整个Azure存储中应该是唯一的，因为它在.core.windows.net上公开。'
- en: Deployment model: This should be kept as Resource manager.
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署模型：这应该保持为资源管理器。
- en: Account kind: This can be a general storage V1 or V2 or dedicated blob storage.
    We will keep it as general storage.
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 帐户类型：这可以是通用存储V1或V2或专用blob存储。我们将保持为通用存储。
- en: 'Performance: This can be chosen as Premium or Standard as required.'
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 性能：这可以根据需要选择为高级或标准。
- en: Secure transfer required: This should be Enabled for any serious web app.
  id: totrans-245
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 需要安全传输：对于任何严肃的Web应用，这应该被设置为启用。
- en: Resource group: This can be created new or reused.
  id: totrans-246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 资源组：这可以创建新的或重用的。
- en: 'Location: Select the location which is nearest to your business requirement.'
  id: totrans-247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 位置：选择最接近您业务需求的位置。
- en: 'You can choose to pin the storage account to the dashboard by checking the
    Pin to dashboard checkbox. Click Create. After a while, the storage account will
    be created. Once the storage account is created, click on the pinned tile on the
    dashboard and it will take you to the storage account overview blade, which summarizes
    the storage account details. The important thing to note is in the middle of the
    blade and lists the different types of storage, as shown in the following screenshot:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以选择通过勾选“固定到仪表板”复选框将存储帐户固定到仪表板。点击创建。过了一会儿，存储帐户将被创建。一旦存储帐户创建完成，点击仪表板上的固定磁贴，它将带您到存储帐户概览刀片，该刀片总结了存储帐户的详细信息。需要注意的是，在刀片中间列出了不同类型的存储，如下面的截图所示：
- en: '![](img/97edaf95-ccb0-4cab-a4e8-481962c158c9.png)'
  id: totrans-249
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/97edaf95-ccb0-4cab-a4e8-481962c158c9.png)'
- en: 'So we can use four types of storage with the storage account. Let''s briefly
    discuss these:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们可以使用四种类型的存储与存储帐户一起使用。让我们简要地讨论这些：
- en: '**Blob storage**: Blob is an abbreviation of **Binary large object**. We can
    store any type of file in blob storage.'
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Blob存储**：Blob是**二进制大对象**的缩写。我们可以在blob存储中存储任何类型的文件。'
- en: '**Table storage**: Table storage is a no-SQL database and is similar to a document
    DB but instead of storing documents, table storage is optimized for storing key
    value pairs. Table storage is really cheap and it''s a good place to store large
    volumes of data.'
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**表存储**：表存储是一个无SQL数据库，类似于文档数据库，但与存储文档不同，表存储优化用于存储键值对。表存储非常便宜，是存储大量数据的好地方。'
- en: '**File storage**: File storage allows us to set up **Server Message Block** (SMB
    3.0 protocol) file shares in the cloud. This storage is preferred generally when we
    have an existing application that needs to be migrated to Azure and the application
    already uses file shares.'
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文件存储**：文件存储允许我们在云中设置**服务器消息块**（SMB 3.0协议）文件共享。当我们有一个需要迁移到Azure且已使用文件共享的现有应用程序时，通常会选择这种存储方式。'
- en: '**Queue storage**: Queues allow us to store and retrieve messages. And they
    are an important technology to have if we want to build reliable high-scale websites
    because they allow us to put a buffer between an application and the backend services
    that it uses.'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**队列存储**：队列允许我们存储和检索消息。如果我们想构建可靠的高规模网站，队列是一项重要的技术，因为它们可以在应用程序和它使用的后端服务之间设置一个缓冲区。'
- en: Blobs and queues are more frequently used and we shall be using blob storage
    in our next chapter when we develop our movie booking site, so we will conclude
    our brief discussion of storage. How to upload and download data from storage
    using an SAS token is something we will see in the next chapter in detail. This
    brings us to the end of this discussion and chapter on cloud introduction. We
    should now be ready to develop and deploy in Azure, which we will do in the next
    chapter.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 块和队列被更频繁地使用，在我们开发电影预订网站时，我们将在下一章使用块存储，因此我们将结束对存储的简要讨论。在下一章中，我们将详细看到如何使用SAS令牌从存储上传和下载数据。这标志着我们对云介绍的讨论和本章的结束。我们现在应该准备好在Azure中进行开发和部署，这将在下一章中完成。
- en: Summary
  id: totrans-256
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we learned what the cloud is and why the modern-day developer
    should be conversant with cloud technologies. We also got started with Azure,
    and made ourselves aware of the Azure management portal. We learned to create
    a virtual machine from the portal and saw that this could be automated using PowerShell
    or other languages by using the SDK. We then managed a virtual machine using PowerShell
    and saw how to start and stop it. We also learned how to create a web app in Azure
    from Visual Studio 2017 itself and learned about publish profiles. We took an
    overview of App Services, and a quick look at Azure storage. Now that we have
    a grasp of the fundamentals, we will develop a movie booking application and deploy
    it in Azure in the next chapter.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了云是什么以及为什么现代开发者应该熟悉云技术。我们还开始了Azure的学习，并意识到了Azure管理门户。我们学会了从门户创建虚拟机，并看到这可以通过使用SDK通过PowerShell或其他语言自动化。然后我们使用PowerShell管理虚拟机，并了解了如何启动和停止它。我们还学会了如何从Visual
    Studio 2017本身创建Azure中的Web应用，并了解了发布配置文件。我们对App服务进行了概述，并对Azure存储进行了快速浏览。现在我们已经掌握了基础知识，我们将在下一章开发一个电影预订应用程序并将其部署到Azure。
