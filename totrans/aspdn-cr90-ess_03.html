<html><head></head><body>
  <div id="_idContainer044">
   <h1 class="chapter-number" id="_idParaDest-44">
    <a id="_idTextAnchor044">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     3
    </span>
   </h1>
   <h1 id="_idParaDest-45">
    <a id="_idTextAnchor045">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Crafting Web APIs for Service Delivery
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     As part of ASP.NET Core 9, web APIs can be used to build HTTP services, which can be made available for both web page consumption and mobile applications.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     The structure provided by the .NET Core platform enables the development of APIs with high quality and performance.
    </span>
    <span class="koboSpan" id="kobo.3.3">
     In this chapter, we will learn more about web APIs and the standards, conventions, and best practices for delivering solutions
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.4.1">
      using them.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.5.1">
     In this chapter, we’re going to cover the following
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.6.1">
      main topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.7.1">
      Delivering business as
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.8.1">
       a service
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.9.1">
      Exploring
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.10.1">
       minimal APIs
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.11.1">
      Implementing APIs using the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.12.1">
       controller-based approach
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.13.1">
      Working
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.14.1">
       with documentation
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-46">
    <a id="_idTextAnchor046">
    </a>
    <span class="koboSpan" id="kobo.15.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.16.1">
     This chapter uses the Postman tool, which will be used as a client for consuming APIs.
    </span>
    <span class="koboSpan" id="kobo.16.2">
     This tool will also be used in other chapters of the book and its installation and use
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.17.1">
      are free.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.18.1">
     You can download Postman on your operating system through the following
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.19.1">
      link:
     </span>
    </span>
    <a href="https://www.postman.com/downloads/">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.20.1">
       https://www.postman.com/downloads/
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.21.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.22.1">
     The code examples used in this chapter can be found in the book’s GitHub
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.23.1">
      repository:
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/ASP.NET-Core-9.0-Essentials/">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.24.1">
       https://github.com/PacktPublishing/ASP.NET-Core-9.0-Essentials/
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.25.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-47">
    <a id="_idTextAnchor047">
    </a>
    <span class="koboSpan" id="kobo.26.1">
     Delivering business as a service
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.27.1">
     As we have learned in the last chapters, ASP.NET Core 9 offers different frameworks for the development of rich web-based applications.
    </span>
    <span class="koboSpan" id="kobo.27.2">
     Regardless of the chosen model, whether client-side or server-side, we must implement negotiation flows that are responsible for the operation of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.28.1">
      the applications.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.29.1">
     Imagine a system for a digital bank where users can perform different types of operations in their checking account, such as transfers, analyzing extracts, checking the account balance, and even purchasing a new service package.
    </span>
    <span class="koboSpan" id="kobo.29.2">
     Each of these operations has business requirements and rules.
    </span>
    <span class="koboSpan" id="kobo.29.3">
     For example, it should not be possible to transfer 200 euros if the user’s account balance is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.30.1">
      100 euros.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.31.1">
     This negotiation flow can be implemented perfectly using Razor Pages, MVC, or a hybrid model, as we have learned.
    </span>
    <span class="koboSpan" id="kobo.31.2">
     We can easily have a web-based application being performed on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.32.1">
      a server.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.33.1">
     However, imagine that users have requested a mobile application.
    </span>
    <span class="koboSpan" id="kobo.33.2">
     It should offer the same features as the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.34.1">
      web version.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.35.1">
     In this case, any technologies could be used for this purpose, either for native or hybrid development.
    </span>
    <span class="koboSpan" id="kobo.35.2">
     But how would the business logic of the application be developed?
    </span>
    <span class="koboSpan" id="kobo.35.3">
     What if there was a change to an application rule?
    </span>
    <span class="koboSpan" id="kobo.35.4">
     Would it be necessary to update two distinct types of code to make the applications
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.36.1">
      run correctly?
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.37.1">
     The best practice, in this case, is to centrally manage all the code that concerns the business rules.
    </span>
    <span class="koboSpan" id="kobo.37.2">
     This would allow different types of application interfaces, whether browsers, mobile applications, or even other applications, to interact with a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.38.1">
      business
     </span>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.39.1">
      context.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.40.1">
     This centralized application is made available in web API format, which is actually an application that is distributed through the internet.
    </span>
    <span class="koboSpan" id="kobo.40.2">
     The
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.41.1">
      Representational State Transfer
     </span>
    </strong>
    <span class="koboSpan" id="kobo.42.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.43.1">
      REST
     </span>
    </strong>
    <span class="koboSpan" id="kobo.44.1">
     ) protocol, which
    </span>
    <a id="_idIndexMarker146">
    </a>
    <span class="koboSpan" id="kobo.45.1">
     is based on the HTTP protocol commonly used in web application interactions, allows clients (browsers, mobile apps, and other applications) to consume resources independently in a controlled and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.46.1">
      centralized way.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.47.1">
     The model for providing
    </span>
    <a id="_idIndexMarker147">
    </a>
    <span class="koboSpan" id="kobo.48.1">
     business contexts over the internet is called
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.49.1">
      business as a service
     </span>
    </strong>
    <span class="koboSpan" id="kobo.50.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.51.1">
      BaaS
     </span>
    </strong>
    <span class="koboSpan" id="kobo.52.1">
     ), allowing organizations to offer specific features or resources such as services that can be consumed by other companies
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.53.1">
      or applications.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer033">
     <span class="koboSpan" id="kobo.54.1">
      <img alt="Figure 3.1 – BaaS" src="image/B21788_03_1.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.55.1">
     Figure 3.1 – BaaS
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.56.1">
     Fortunately, ASP.NET Core 9 offers
    </span>
    <a id="_idIndexMarker148">
    </a>
    <span class="koboSpan" id="kobo.57.1">
     us a powerful model for creating web APIs; however, we must understand some foundations before learning how to create BaaS resources.
    </span>
    <span class="koboSpan" id="kobo.57.2">
     In the rest of this section, we look at some of the important
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.58.1">
      foundational concepts.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-48">
    <a id="_idTextAnchor048">
    </a>
    <span class="koboSpan" id="kobo.59.1">
     HTTP verbs and conventions
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.60.1">
     Communication with an API is done through
    </span>
    <a id="_idIndexMarker149">
    </a>
    <span class="koboSpan" id="kobo.61.1">
     the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.62.1">
      HTTP
     </span>
    </strong>
    <span class="koboSpan" id="kobo.63.1">
     protocol, which has some operations
    </span>
    <a id="_idIndexMarker150">
    </a>
    <span class="koboSpan" id="kobo.64.1">
     called
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.65.1">
       HTTP verbs
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.66.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.67.1">
     These verbs determine the type of intention in a given resource.
    </span>
    <span class="koboSpan" id="kobo.67.2">
     The most common HTTP verbs
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.68.1">
      are these:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.69.1">
       GET
      </span>
     </strong>
     <span class="koboSpan" id="kobo.70.1">
      : This method is used to
     </span>
     <a id="_idIndexMarker151">
     </a>
     <span class="koboSpan" id="kobo.71.1">
      request data in a feature, such as a read-only operation; when we type a URL in the browser, as a response, we receive an HTML page.
     </span>
     <span class="koboSpan" id="kobo.71.2">
      GET
     </span>
     <a id="_idIndexMarker152">
     </a>
     <span class="koboSpan" id="kobo.72.1">
      can also be used to determine the intention to obtain a list of registered users,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.73.1">
       for example.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.74.1">
       POST
      </span>
     </strong>
     <span class="koboSpan" id="kobo.75.1">
      : When you send a POST
     </span>
     <a id="_idIndexMarker153">
     </a>
     <span class="koboSpan" id="kobo.76.1">
      request, you are usually creating a new feature on the server.
     </span>
     <span class="koboSpan" id="kobo.76.2">
      This
     </span>
     <a id="_idIndexMarker154">
     </a>
     <span class="koboSpan" id="kobo.77.1">
      method includes data in the body of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.78.1">
       the request.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.79.1">
       PUT
      </span>
     </strong>
     <span class="koboSpan" id="kobo.80.1">
      : PUT
     </span>
     <a id="_idIndexMarker155">
     </a>
     <span class="koboSpan" id="kobo.81.1">
      requests are
     </span>
     <a id="_idIndexMarker156">
     </a>
     <span class="koboSpan" id="kobo.82.1">
      used to update a feature.
     </span>
     <span class="koboSpan" id="kobo.82.2">
      In this case, any changes made to a resource’s attributes must be sent in the request body, and the server replaces the resource with the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.83.1">
       sent data.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.84.1">
       DELETE
      </span>
     </strong>
     <span class="koboSpan" id="kobo.85.1">
      : DELETE
     </span>
     <a id="_idIndexMarker157">
     </a>
     <span class="koboSpan" id="kobo.86.1">
      requests are used to request the removal of a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.87.1">
       specified
      </span>
     </span>
     <span class="No-Break">
      <a id="_idIndexMarker158">
      </a>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.88.1">
       feature.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.89.1">
       PATCH
      </span>
     </strong>
     <span class="koboSpan" id="kobo.90.1">
      : PATCH
     </span>
     <a id="_idIndexMarker159">
     </a>
     <span class="koboSpan" id="kobo.91.1">
      requests are used to apply partial modifications to a feature.
     </span>
     <span class="koboSpan" id="kobo.91.2">
      Unlike the PUT verb, which replaces the entire feature, PATCH
     </span>
     <a id="_idIndexMarker160">
     </a>
     <span class="koboSpan" id="kobo.92.1">
      updates only the specified parts of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.93.1">
       the feature.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.94.1">
       HEAD
      </span>
     </strong>
     <span class="koboSpan" id="kobo.95.1">
      : This is
     </span>
     <a id="_idIndexMarker161">
     </a>
     <span class="koboSpan" id="kobo.96.1">
      often used to verify the availability and metadata of a
     </span>
     <a id="_idIndexMarker162">
     </a>
     <span class="koboSpan" id="kobo.97.1">
      feature without downloading
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.98.1">
       its content.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.99.1">
       OPTIONS
      </span>
     </strong>
     <span class="koboSpan" id="kobo.100.1">
      : An OPTION
     </span>
     <a id="_idIndexMarker163">
     </a>
     <span class="koboSpan" id="kobo.101.1">
      requirement is used to describe
     </span>
     <a id="_idIndexMarker164">
     </a>
     <span class="koboSpan" id="kobo.102.1">
      communication options for the destination feature.
     </span>
     <span class="koboSpan" id="kobo.102.2">
      It can be used to consult the server about the supported methods and other information about
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.103.1">
       the feature.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.104.1">
     Verbs are
    </span>
    <a id="_idIndexMarker165">
    </a>
    <span class="koboSpan" id="kobo.105.1">
     very important to determine which type of operation will be performed by an API.
    </span>
    <span class="koboSpan" id="kobo.105.2">
     As we can see from the preceding list, there are some verbs that are similar to each other, such as POST and PUT.
    </span>
    <span class="koboSpan" id="kobo.105.3">
     Both can be used to create and update resources.
    </span>
    <span class="koboSpan" id="kobo.105.4">
     However, using the right verb means the integration process can always be easily understood.
    </span>
    <span class="koboSpan" id="kobo.105.5">
     There is no strict rule for the use of certain verbs, but it is a good practice to use the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.106.1">
      right ones.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-49">
    <a id="_idTextAnchor049">
    </a>
    <span class="koboSpan" id="kobo.107.1">
     REST
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.108.1">
     REST
    </span>
    <a id="_idIndexMarker166">
    </a>
    <span class="koboSpan" id="kobo.109.1">
     is an architectural style, a set of constraints and principles that encourage stateless, scalable, and easily maintainable web
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.110.1">
      service design.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.111.1">
     One of the characteristics of REST services is stateless communication, where each request from a client to a server must contain all the information necessary to understand and process the request.
    </span>
    <span class="koboSpan" id="kobo.111.2">
     The server must not store any information about the client’s state between requests.
    </span>
    <span class="koboSpan" id="kobo.111.3">
     This ensures that requests can be handled independently, making the system scalable and easy
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.112.1">
      to maintain.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.113.1">
     There is also the concept of resources, be it a physical object, a conceptual entity, or a piece of data.
    </span>
    <span class="koboSpan" id="kobo.113.2">
     Each resource is identified by a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.114.1">
      unique URL.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.115.1">
     REST services use standard HTTP methods to perform
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.116.1">
      Create
     </span>
    </strong>
    <span class="koboSpan" id="kobo.117.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.118.1">
      Read
     </span>
    </strong>
    <span class="koboSpan" id="kobo.119.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.120.1">
      Update
     </span>
    </strong>
    <span class="koboSpan" id="kobo.121.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.122.1">
      Delete
     </span>
    </strong>
    <span class="koboSpan" id="kobo.123.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.124.1">
      CRUD
     </span>
    </strong>
    <span class="koboSpan" id="kobo.125.1">
     ) operations
    </span>
    <a id="_idIndexMarker167">
    </a>
    <span class="koboSpan" id="kobo.126.1">
     on resources.
    </span>
    <span class="koboSpan" id="kobo.126.2">
     Each HTTP method corresponds to a specific action on the resource.
    </span>
    <span class="koboSpan" id="kobo.126.3">
     For example, GET is used to retrieve data, POST to create a new resource, PUT to update a resource, and DELETE to remove a resource.
    </span>
    <span class="koboSpan" id="kobo.126.4">
     This approach provides a uniform and consistent interface for interacting with resources.
    </span>
    <span class="koboSpan" id="kobo.126.5">
     This means that the same HTTP verbs and methods are used consistently across
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.127.1">
      different resources.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.128.1">
     HTTP codes are important and enable easy integrations and use of APIs.
    </span>
    <span class="koboSpan" id="kobo.128.2">
     HTTP status codes, in the same way, make API responses standardized and allow applications to handle different
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.129.1">
      scenarios appropriately.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-50">
    <a id="_idTextAnchor050">
    </a>
    <span class="koboSpan" id="kobo.130.1">
     HTTP status codes
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.131.1">
     HTTP status codes
    </span>
    <a id="_idIndexMarker168">
    </a>
    <span class="koboSpan" id="kobo.132.1">
     indicate the result of an HTTP request and help clients understand the result of their actions.
    </span>
    <span class="koboSpan" id="kobo.132.2">
     These status codes are essential for effective communication between clients
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.133.1">
      and servers.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.134.1">
     HTTP status codes are grouped into
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.135.1">
      five classes:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.136.1">
      Information
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.137.1">
       responses (100-199)
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.138.1">
      Successful
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.139.1">
       responses (200-299)
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.140.1">
      Redirection
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.141.1">
       responses (300-399)
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.142.1">
      Client error
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.143.1">
       responses (400-499)
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.144.1">
      Server error
     </span>
     <a id="_idIndexMarker169">
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.145.1">
       responses (500-599)
      </span>
     </span>
    </li>
   </ul>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.146.1">
     HTTP status code references
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.147.1">
     You can learn more about status
    </span>
    <a id="_idIndexMarker170">
    </a>
    <span class="koboSpan" id="kobo.148.1">
     codes
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.149.1">
      here:
     </span>
    </span>
    <a href="https://httpwg.org/specs/rfc9110.html#overview.of.status.codes">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.150.1">
       https://httpwg.org/specs/rfc9110.html#overview.of.status.codes
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.151.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.152.1">
     Each status code has a return type that can be used by the client application or even the browser.
    </span>
    <span class="koboSpan" id="kobo.152.2">
     When making an HTTP request, the response has a header, where the HTTP status code is located, and there may even be a body providing further details about the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.153.1">
      request response.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.154.1">
     In general, the main HTTP status codes used
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.155.1">
      are these:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.156.1">
       200 OK
      </span>
     </strong>
     <span class="koboSpan" id="kobo.157.1">
      : Indicates a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.158.1">
       successful request
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.159.1">
       201 Created
      </span>
     </strong>
     <span class="koboSpan" id="kobo.160.1">
      : Indicates that a resource was
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.161.1">
       created successfully
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.162.1">
       400 Bad Request
      </span>
     </strong>
     <span class="koboSpan" id="kobo.163.1">
      : Indicates an error in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.164.1">
       client request
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.165.1">
       401 Unauthorized
      </span>
     </strong>
     <span class="koboSpan" id="kobo.166.1">
      : Indicates that the client does not have
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.167.1">
       proper authentication
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.168.1">
       404 Not Found
      </span>
     </strong>
     <span class="koboSpan" id="kobo.169.1">
      : Indicates that the requested resource does
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.170.1">
       not exist
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.171.1">
       500 Internal Server Error
      </span>
     </strong>
     <span class="koboSpan" id="kobo.172.1">
      : Indicates a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.173.1">
       server-side problem
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.174.1">
     The following code represents an example of a successful response to an
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.175.1">
      API request:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.176.1">
HTTP/1.1 200 OK
Content-Type: application/json
{
    "status": "success",
    "message": "Data retrieved successfully",
    "data": {
        "id": 123,
        "name": "Example Resource",
        "description": "This is an example resource
          for the API.",
        "created_at": "2023-10-26T10:00:00Z"
    }
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.177.1">
     In this example, the status code (in the first line of code) is
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.178.1">
      200
     </span>
    </strong>
    <span class="koboSpan" id="kobo.179.1">
     , indicating that the request was successful.
    </span>
    <span class="koboSpan" id="kobo.179.2">
     Furthermore, there is a body in the response containing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.180.1">
      more information.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.181.1">
     Using HTTP status codes
    </span>
    <a id="_idIndexMarker171">
    </a>
    <span class="koboSpan" id="kobo.182.1">
     appropriately allows APIs to be easily integrated into different types of systems.
    </span>
    <span class="koboSpan" id="kobo.182.2">
     As we create our APIs using them, this will
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.183.1">
      become clearer.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.184.1">
     BaaS delivery offers several benefits for teams to segregate the responsibilities of each context into applications that can be easily integrated into different scenarios.
    </span>
    <span class="koboSpan" id="kobo.184.2">
     We’ve learned enough about the fundamentals of APIs; it’s time to start creating APIs using the ASP.NET Core 9
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.185.1">
      minimal APIs.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-51">
    <a id="_idTextAnchor051">
    </a>
    <span class="koboSpan" id="kobo.186.1">
     Exploring minimal APIs
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.187.1">
     One of the ways to create web services in ASP.NET Core 9 is to use the minimal APIs approach, which offers a simple way to make APIs available and add features and configurations
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.188.1">
      as needed.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.189.1">
     The simple structure of
    </span>
    <a id="_idIndexMarker172">
    </a>
    <span class="koboSpan" id="kobo.190.1">
     minimal APIs allows developers and teams to provide REST-based functionalities in an
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.191.1">
      agile manner.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.192.1">
     There are many applicable scenarios for using this approach, and the one you choose will depend on the size of the project and the teams involved.
    </span>
    <span class="koboSpan" id="kobo.192.2">
     The fact is that minimal APIs offer, in general, the same functionalities as the controller-based model, which we will discuss in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.193.1">
      next section.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.194.1">
     To create a
    </span>
    <a id="_idIndexMarker173">
    </a>
    <span class="koboSpan" id="kobo.195.1">
     minimal API project, we will base ourselves on a product management model.
    </span>
    <span class="koboSpan" id="kobo.195.2">
     To do this, we will provide an API according to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.196.1">
      following table:
     </span>
    </span>
   </p>
   <table class="No-Table-Style" id="table001-1">
    <colgroup>
     <col/>
     <col/>
     <col/>
     <col/>
    </colgroup>
    <tbody>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.197.1">
           Route
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.198.1">
           Description
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.199.1">
           Request Body
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.200.1">
           Response Body
          </span>
         </strong>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.201.1">
          GET /Product
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.202.1">
         Get
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.203.1">
          all products
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.204.1">
          None
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.205.1">
         Array
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.206.1">
          of products
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.207.1">
          GET /Product/{id}
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.208.1">
         Get a product
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.209.1">
          by ID
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.210.1">
          None
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.211.1">
         A
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.212.1">
          product object
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.213.1">
          POST /Product
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.214.1">
         Add a
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.215.1">
          new product
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.216.1">
          Product object
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.217.1">
         A
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.218.1">
          product object
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.219.1">
          PUT /Product/{id}
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.220.1">
         Update an
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.221.1">
          existing product
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.222.1">
          Product Item
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.223.1">
          None
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.224.1">
          DELETE /Product/{id}
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.225.1">
         Delete an existing product
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.226.1">
          by ID
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.227.1">
          None
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.228.1">
          None
         </span>
        </span>
       </p>
      </td>
     </tr>
    </tbody>
   </table>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.229.1">
     Table 3.1 - Product management actions
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.230.1">
     The Table 3.1 basically maps the routes that will be used in the product API, mapping the corresponding
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.231.1">
      HTTP verbs.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.232.1">
     We can also see in the table that some routes are similar, differing only by the HTTP verbs used.
    </span>
    <span class="koboSpan" id="kobo.232.2">
     This is a convention used by the REST model, where HTTP verbs indicate the intention for a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.233.1">
      given resource.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.234.1">
     In this case, the resource is the product, defined by the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.235.1">
      /Product
     </span>
    </strong>
    <span class="koboSpan" id="kobo.236.1">
     route.
    </span>
    <span class="koboSpan" id="kobo.236.2">
     In some cases, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.237.1">
      /Product/{id}
     </span>
    </strong>
    <span class="koboSpan" id="kobo.238.1">
     route indicates that there will be a parameter added to the resource route.
    </span>
    <span class="koboSpan" id="kobo.238.2">
     This parameter will be part of the resource URL and will be mapped as a parameter of the method to be executed in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.239.1">
      the API.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.240.1">
     Now let’s create a minimal API project
    </span>
    <a id="_idIndexMarker174">
    </a>
    <span class="koboSpan" id="kobo.241.1">
     and implement
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.242.1">
      product registration:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.243.1">
      Open your
     </span>
     <a id="_idIndexMarker175">
     </a>
     <span class="koboSpan" id="kobo.244.1">
      operating system’s command prompt, in a directory of your choice, and run the following line
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.245.1">
       of code:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.246.1">dotnet new web --name ProductAPI</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.247.1">
      The web project template is a shortcut for creating an empty ASP.NET Core project, which will be used as the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.248.1">
       minimal API.
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.249.1">
       A folder called
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.250.1">
        ProductAPI
       </span>
      </strong>
      <span class="koboSpan" id="kobo.251.1">
       will be created containing all the files needed for the project.
      </span>
      <span class="koboSpan" id="kobo.251.2">
       The main file
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.252.1">
        is
       </span>
      </span>
      <span class="No-Break">
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.253.1">
         Program.cs
        </span>
       </strong>
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.254.1">
        .
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.255.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.256.1">
       ProductAPI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.257.1">
      directory and then type the following command and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.258.1">
       press
      </span>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.259.1">
        Enter
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.260.1">
       :
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.261.1">Code.</span></strong></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.262.1">
       The Visual Studio Code editor
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.263.1">
        will appear.
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.264.1">
      Then, open the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.265.1">
       Program.cs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.266.1">
      file, which will have the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.267.1">
       following structure:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.268.1">
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();
app.MapGet("/", () =&gt; "Hello World!");
app.Run();</span></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.269.1">
       As we can see, there is no definition of a class.
      </span>
      <span class="koboSpan" id="kobo.269.2">
       This is the main application file, the entry point that will be used to execute
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.270.1">
        the API.
       </span>
      </span>
     </p>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.271.1">
       In the first two lines of the file, we have the app definition, through the
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.272.1">
        web application
       </span>
      </strong>
      <span class="koboSpan" id="kobo.273.1">
       builder class.
      </span>
      <span class="koboSpan" id="kobo.273.2">
       This definition was presented in
      </span>
      <a href="B21788_02.xhtml#_idTextAnchor031">
       <span class="No-Break">
        <em class="italic">
         <span class="koboSpan" id="kobo.274.1">
          Chapter 2
         </span>
        </em>
       </span>
      </a>
      <span class="koboSpan" id="kobo.275.1">
       , where we discussed the structure of a project in ASP.NET Core 9.
      </span>
      <span class="koboSpan" id="kobo.275.2">
       However, it is important to note that the app will be created with some basic configurations, abstracted by the framework, such as filters and settings, among
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.276.1">
        other aspects.
       </span>
      </span>
     </p>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.277.1">
       Another important aspect of this file is the
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.278.1">
        MapGet
       </span>
      </strong>
      <span class="koboSpan" id="kobo.279.1">
       method of the
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.280.1">
        app
       </span>
      </strong>
      <span class="koboSpan" id="kobo.281.1">
       variable.
      </span>
      <span class="koboSpan" id="kobo.281.2">
       This is a method that extends the previously created app, allowing the creation of a route that will be accessed via URL using the HTTP
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.282.1">
        GET verb.
       </span>
      </span>
     </p>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.283.1">
       This method has a parameter that defines the route pattern; in this case,
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.284.1">
        /
       </span>
      </strong>
      <span class="koboSpan" id="kobo.285.1">
       is used, which means the root of the application.
      </span>
      <span class="koboSpan" id="kobo.285.2">
       The second parameter is an action, which uses one of C#’s features.
      </span>
      <span class="koboSpan" id="kobo.285.3">
       This action will be executed when this route
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.286.1">
        is
       </span>
      </span>
      <span class="No-Break">
       <a id="_idIndexMarker176">
       </a>
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.287.1">
        requested.
       </span>
      </span>
     </p>
    </li>
   </ol>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.288.1">
     Actions and methods
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.289.1">
     Actions can be seen as methods defined inline and are composed of two main parts, just
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.290.1">
      like methods:
     </span>
    </span>
   </p>
   <p class="callout">
    <strong class="bold">
     <span class="koboSpan" id="kobo.291.1">
      - Setting parameters
     </span>
    </strong>
    <span class="koboSpan" id="kobo.292.1">
     : Setting parameters
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.293.1">
      if necessary
     </span>
    </span>
   </p>
   <p class="callout">
    <strong class="bold">
     <span class="koboSpan" id="kobo.294.1">
      - Action body
     </span>
    </strong>
    <span class="koboSpan" id="kobo.295.1">
     : The code that will
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.296.1">
      be executed
     </span>
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.297.1">
     Actions can be replaced by methods, instead of being
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.298.1">
      defined inline.
     </span>
    </span>
   </p>
   <ol>
    <li value="5">
     <span class="koboSpan" id="kobo.299.1">
      To perform a test, just run the application by typing the following command at
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.300.1">
       the prompt:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.301.1">dotnet run</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.302.1">
      Logs containing the API URL will be displayed.
     </span>
     <span class="koboSpan" id="kobo.302.2">
      Now, open
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.303.1">
       Postman
      </span>
     </strong>
     <span class="koboSpan" id="kobo.304.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.305.1">
       File
      </span>
     </strong>
     <span class="koboSpan" id="kobo.306.1">
      |
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.307.1">
       New Tab
      </span>
     </strong>
     <span class="koboSpan" id="kobo.308.1">
      , enter the application address, and then
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.309.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.310.1">
        Send
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.311.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer034">
     <span class="koboSpan" id="kobo.312.1">
      <img alt="Figure 3.2 – Getting an API resource using a minimal API" src="image/B21788_03_2.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.313.1">
     Figure 3.2 – Getting an API resource using a minimal API
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.314.1">
     As we can see, in
    </span>
    <a id="_idIndexMarker177">
    </a>
    <span class="koboSpan" id="kobo.315.1">
     just a few lines of code, it was possible to execute an API, even returning a simple
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.316.1">
      Hello
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.317.1">
       World
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.318.1">
      string.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.319.1">
     The minimal API offers the ability to quickly make APIs available in a simple way and allow other features and configurations to be added according to a project’s needs.
    </span>
    <span class="koboSpan" id="kobo.319.2">
     This brings great agility
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.320.1">
      to teams.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.321.1">
     Let’s add some features to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.322.1">
      ProductAPI
     </span>
    </strong>
    <span class="koboSpan" id="kobo.323.1">
     project.
    </span>
    <span class="koboSpan" id="kobo.323.2">
     To do this, create a class called
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.324.1">
      Product.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.325.1">
     in the root of the project.
    </span>
    <span class="koboSpan" id="kobo.325.2">
     The class will be defined according to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.326.1">
      following code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.327.1">
public class Product
{
     public int Id {get; set;}
     public string Name { get; set; }
     public decimal Price { get; set; }
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.328.1">
     We are just defining an
    </span>
    <a id="_idIndexMarker178">
    </a>
    <span class="koboSpan" id="kobo.329.1">
     object that will represent a product.
    </span>
    <span class="koboSpan" id="kobo.329.2">
     Now you will need to change the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.330.1">
      Program.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.331.1">
     file; we will include the methods listed in the preceding table, mapping the API routes and adding functionality to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.332.1">
      API methods.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.333.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.334.1">
      Program.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.335.1">
     file will contain some methods as shown in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.336.1">
      following example:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.337.1">
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();
</span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">List&lt;Product&gt; products = new List&lt;Product&gt;();</span></strong><span class="koboSpan" id="kobo.339.1">
app.MapGet("/Product", () =&gt; Results.Ok(products));
app.MapGet("/Product/{id}", (int id) =&gt; {
    var product = products.FirstOrDefault(p =&gt; p.Id == id);
    return </span><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">Results.Ok</span></strong><span class="koboSpan" id="kobo.341.1">(product);
});
app.MapPost("/Product", (Product product) =&gt; {
    if (product != null)
    {
        product.Id = products.Count() + 1;
        products.Add(product);
    }
    return Results.Ok(product);
});
app.MapPut("/Product/{id}", (int id,
  Product updatedProduct) =&gt; {
    if (updatedProduct != null)
    {
        var oldProduct = products.FirstOrDefault
          (p =&gt; p.Id == id);
        if (oldProduct == null) return Results.NotFound();
        oldProduct.Name = updatedProduct.Name;
        oldProduct.Price = updatedProduct.Price;
    }
    return Results.NoContent();
});
app.MapDelete("/Product/{id}", (int id) =&gt; {
    var product = products.FirstOrDefault(p =&gt; p.Id == id);
    if (product == null) return Results.NotFound();
     products.Remove(product);
    return Results.NoContent();
});
app.Run();</span></pre>
   <p>
    <span class="koboSpan" id="kobo.342.1">
     As we can see, the APIs
    </span>
    <a id="_idIndexMarker179">
    </a>
    <span class="koboSpan" id="kobo.343.1">
     were created similarly to the previously defined route table, respecting the HTTP verbs defined through the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.344.1">
      MapGet
     </span>
    </strong>
    <span class="koboSpan" id="kobo.345.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.346.1">
      MapPost
     </span>
    </strong>
    <span class="koboSpan" id="kobo.347.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.348.1">
      MapPut
     </span>
    </strong>
    <span class="koboSpan" id="kobo.349.1">
     , and
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.350.1">
       MapDelete
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.351.1">
      methods.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.352.1">
     The code in question is very simple, creating a simulation of a product register.
    </span>
    <span class="koboSpan" id="kobo.352.2">
     To do this, a variable was defined using the code
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.353.1">
      List&lt;Product&gt; products = new List&lt;Product&gt;()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.354.1">
     , which will contain the products available in the API
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.355.1">
      at runtime.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.356.1">
     Another important functionality described in the preceding code is the use of the utility class called
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.357.1">
      Results
     </span>
    </strong>
    <span class="koboSpan" id="kobo.358.1">
     .
    </span>
    <span class="koboSpan" id="kobo.358.2">
     This class is used in all methods, encapsulating important functionalities for returning the request, such as defining the status code related to the request in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.359.1">
      response header.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.360.1">
     Let’s look at the API for the POST verb in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.361.1">
      more detail.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.362.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.363.1">
      MapPost
     </span>
    </strong>
    <span class="koboSpan" id="kobo.364.1">
     method defines the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.365.1">
      /Products
     </span>
    </strong>
    <span class="koboSpan" id="kobo.366.1">
     string as a route and as an action; it expects a product as a parameter, adds it to the list, and returns
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.367.1">
      OK
     </span>
    </strong>
    <span class="koboSpan" id="kobo.368.1">
     (status
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.369.1">
      code 200).
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.370.1">
     But how do we submit a product to the API?
    </span>
    <span class="koboSpan" id="kobo.370.2">
     ASP.NET Core 9 has the concept
    </span>
    <a id="_idIndexMarker180">
    </a>
    <span class="koboSpan" id="kobo.371.1">
     of a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.372.1">
      bind
     </span>
    </strong>
    <span class="koboSpan" id="kobo.373.1">
     , which processes the request and creates and maps an object according to the request’s needs.
    </span>
    <span class="koboSpan" id="kobo.373.2">
     In this case, an object in JSON format must be sent, which will be mapped to a product object when the POST method
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.374.1">
      is executed.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.375.1">
     This is an excellent feature of ASP.NET Core 9, which abstracts all the complexity and, during the execution of a route, resolves the parameters expected by
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.376.1">
      the action.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.377.1">
     Let’s add a product using the API with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.378.1">
      following commands:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.379.1">
      Run the
     </span>
     <a id="_idIndexMarker181">
     </a>
     <span class="koboSpan" id="kobo.380.1">
      application with the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.381.1">
       following command:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.382.1">dotnet run</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.383.1">
      Then open Postman and go to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.384.1">
       File
      </span>
     </strong>
     <span class="koboSpan" id="kobo.385.1">
      |
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.386.1">
        New Tab
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.387.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.388.1">
      Set the method to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.389.1">
       POST
      </span>
     </strong>
     <span class="koboSpan" id="kobo.390.1">
      and add the API address with the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.391.1">
       /
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.392.1">
        Product
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.393.1">
       suffix.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.394.1">
      Then select the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.395.1">
       Body
      </span>
     </strong>
     <span class="koboSpan" id="kobo.396.1">
      tab, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.397.1">
        Figure 3
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.398.1">
        .3
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.399.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer035">
     <span class="koboSpan" id="kobo.400.1">
      <img alt="Figure 3.3 – Configuring a POST request" src="image/B21788_03_3.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.401.1">
     Figure 3.3 – Configuring a POST request
    </span>
   </p>
   <ol>
    <li value="5">
     <span class="koboSpan" id="kobo.402.1">
      Select the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.403.1">
       raw
      </span>
     </strong>
     <span class="koboSpan" id="kobo.404.1">
      option and then set the type to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.405.1">
       JSON
      </span>
     </strong>
     <span class="koboSpan" id="kobo.406.1">
      , as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.407.1">
        Figure 3
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.408.1">
        .4
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.409.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer036">
     <span class="koboSpan" id="kobo.410.1">
      <img alt="Figure 3.4 – Defining the request body" src="image/B21788_03_4.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.411.1">
     Figure 3.4 – Defining the request body
    </span>
   </p>
   <ol>
    <li value="6">
     <span class="koboSpan" id="kobo.412.1">
      Add the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.413.1">
       following JSON:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.414.1">
{
    "id": 0,
    "Name": "Smartphone",
    "Price": 100
}</span></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.415.1">
       The preceding code just represents a JSON object that has the properties of a product.
      </span>
      <span class="koboSpan" id="kobo.415.2">
       These properties were defined in the
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.416.1">
        Product.cs
       </span>
      </strong>
      <span class="koboSpan" id="kobo.417.1">
       class that was added to the project.
      </span>
      <span class="koboSpan" id="kobo.417.2">
       You can see the full code through the book’s source code link, provided
      </span>
      <a id="_idIndexMarker182">
      </a>
      <span class="koboSpan" id="kobo.418.1">
       in the
      </span>
      <em class="italic">
       <span class="koboSpan" id="kobo.419.1">
        Technical
       </span>
      </em>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.420.1">
         requirements
        </span>
       </em>
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.421.1">
        section.
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.422.1">
      Click on the
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.423.1">
        Send
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.424.1">
       button.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer037">
     <span class="koboSpan" id="kobo.425.1">
      <img alt="Figure 3.5 – POST request result" src="image/B21788_03_5.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.426.1">
     Figure 3.5 – POST request result
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.427.1">
     As a result, the registered product object was returned.
    </span>
    <span class="koboSpan" id="kobo.427.2">
     Note the HTTP status code highlighted in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.428.1">
       Figure 3
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.429.1">
      .5
     </span>
    </em>
    <span class="koboSpan" id="kobo.430.1">
     , with the value
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.431.1">
      200
     </span>
    </strong>
    <span class="koboSpan" id="kobo.432.1">
     and the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.433.1">
      description
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.434.1">
       OK
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.435.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.436.1">
     When executing a POST call to the API, ASP.NET Core identified a route mapped to the HTTP verb.
    </span>
    <span class="koboSpan" id="kobo.436.2">
     Then, it binds the JSON object, sent as the request body, to the product object, defined as the POST request parameter.
    </span>
    <span class="koboSpan" id="kobo.436.3">
     After that, the action request is made, which finally registers a product in the memory list and returns it, again serialized
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.437.1">
      in JSON.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.438.1">
     As we learned, it is very simple to create an API using a minimal API.
    </span>
    <span class="koboSpan" id="kobo.438.2">
     With just a few lines of code, it was possible to create a complete product register.
    </span>
    <span class="koboSpan" id="kobo.438.3">
     Of course, as it is a .NET platform project, it is possible to define different classes to better structure your projects, since as the complexity increases, along with the number of APIs, it will become very difficult to manage all the routes in just
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.439.1">
      one file.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.440.1">
     However, even though a minimal API supports most ASP.NET Core 9 functionality for creating web APIs, using a more structured and prepared approach for large projects can be a great option, and this is the case for controller-based projects, which we will discuss in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.441.1">
      next section.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-52">
    <a id="_idTextAnchor052">
    </a>
    <span class="koboSpan" id="kobo.442.1">
     Implementing APIs using the controller-based approach
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.443.1">
     Controller-based projects are another way to deliver APIs using ASP.NET Core 9.
    </span>
    <span class="koboSpan" id="kobo.443.2">
     This project type also implements
    </span>
    <a id="_idIndexMarker183">
    </a>
    <span class="koboSpan" id="kobo.444.1">
     the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.445.1">
      Model-View-Controller
     </span>
    </strong>
    <span class="koboSpan" id="kobo.446.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.447.1">
      MVC
     </span>
    </strong>
    <span class="koboSpan" id="kobo.448.1">
     ) pattern, which we learned about in
    </span>
    <a href="B21788_02.xhtml#_idTextAnchor031">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.449.1">
        Chapter 2
       </span>
      </em>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.450.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.451.1">
     The controller-based approach has a more complete and robust structure to deliver any type of API, so it supports different business contexts.
    </span>
    <span class="koboSpan" id="kobo.451.2">
     In the same way as minimal APIs, it is possible to extend API functionalities by adding different types of configurations
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.452.1">
      and customizations.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-53">
    <a id="_idTextAnchor053">
    </a>
    <span class="koboSpan" id="kobo.453.1">
     Creating a controller-based API
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.454.1">
     To create a
    </span>
    <a id="_idIndexMarker184">
    </a>
    <span class="koboSpan" id="kobo.455.1">
     controller-based API, you just need to type the following code in the terminal, in a directory of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.456.1">
      your choice:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.457.1">
dotnet new webapi -n ProductMVC -controllers true</span></pre>
   <p>
    <span class="koboSpan" id="kobo.458.1">
     This command uses the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.459.1">
      webapi
     </span>
    </strong>
    <span class="koboSpan" id="kobo.460.1">
     template, which by default creates a minimal API project.
    </span>
    <span class="koboSpan" id="kobo.460.2">
     In this case, we are adding a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.461.1">
      -controllers
     </span>
    </strong>
    <span class="koboSpan" id="kobo.462.1">
     argument to state that a web API should be created using the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.463.1">
      controller-based approach.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.464.1">
     As we can see in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.465.1">
       Figure 3
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.466.1">
      .6
     </span>
    </em>
    <span class="koboSpan" id="kobo.467.1">
     , the structure of the controller-based API project is very similar to MVC, which we learned about in
    </span>
    <a href="B21788_02.xhtml#_idTextAnchor031">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.468.1">
        Chapter 2
       </span>
      </em>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.469.1">
      .
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer038">
     <span class="koboSpan" id="kobo.470.1">
      <img alt="Figure 3.6 – Controller-based project structure" src="image/B21788_03_6.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.471.1">
     Figure 3.6 – Controller-based project structure
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.472.1">
     The difference
    </span>
    <a id="_idIndexMarker185">
    </a>
    <span class="koboSpan" id="kobo.473.1">
     between this project and minimal APIs is the segregation of responsibilities and organization of the project.
    </span>
    <span class="koboSpan" id="kobo.473.2">
     Since each controller is related to a specific resource, there is no need to implement all the API code in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.474.1">
      Program.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.475.1">
     file, in addition to bringing greater possibilities, especially in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.476.1">
      larger projects.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.477.1">
     However, the approach to configurations and extensions is similar to what we learned about in regard to minimal APIs; it is all done through the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.478.1">
       Program.cs
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.479.1">
      file.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.480.1">
     The default project has some settings already defined, which can be easily modified.
    </span>
    <span class="koboSpan" id="kobo.480.2">
     The following code is from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.481.1">
      Program.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.482.1">
     file, which is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.483.1">
      created automatically:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.484.1">
var builder = WebApplication.CreateBuilder(args);
builder.Services.AddControllers();
</span><strong class="source-inline"><span class="koboSpan" id="kobo.485.1">builder.Services.AddEndpointsApiExplorer();</span></strong><span class="koboSpan" id="kobo.486.1">
builder.Services.AddSwaggerGen();
var app = builder.Build();
if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI();
}
app.UseHttpsRedirection();
app.UseAuthorization();
</span><strong class="source-inline"><span class="koboSpan" id="kobo.487.1">app.MapControllers();</span></strong><span class="koboSpan" id="kobo.488.1">
app.Run();</span></pre>
   <p>
    <span class="koboSpan" id="kobo.489.1">
     At this point, we
    </span>
    <a id="_idIndexMarker186">
    </a>
    <span class="koboSpan" id="kobo.490.1">
     will focus on two main configurations added in the file, which concern the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.491.1">
      AddEndpointsApiExplorer
     </span>
    </strong>
    <span class="koboSpan" id="kobo.492.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.493.1">
      MapControllers
     </span>
    </strong>
    <span class="koboSpan" id="kobo.494.1">
     methods.
    </span>
    <span class="koboSpan" id="kobo.494.2">
     The rest of the methods will be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.495.1">
      discussed later:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.496.1">
       AddEndpointsApiExplorer
      </span>
     </strong>
     <span class="koboSpan" id="kobo.497.1">
      : This is an extension method that aims to register services that are used to expose information about the application’s endpoints.
     </span>
     <span class="koboSpan" id="kobo.497.2">
      This
     </span>
     <a id="_idIndexMarker187">
     </a>
     <span class="koboSpan" id="kobo.498.1">
      information is used by API documentation generation services, such as
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.499.1">
       Swagger
      </span>
     </strong>
     <span class="koboSpan" id="kobo.500.1">
      , which we will discuss in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.501.1">
       next section.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.502.1">
       MapControllers
      </span>
     </strong>
     <span class="koboSpan" id="kobo.503.1">
      : This is an application configuration responsible for mapping added attributes into controller classes and, therefore, automatically defining APIs
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.504.1">
       and routes.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.505.1">
     These methods allow the application to adapt more easily to the need to expose services as APIs and enable the implementation of good practices, making any additions and modifications
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.506.1">
      more dynamic.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.507.1">
     Using the same example of a product service previously created in the minimal API approach, let’s understand this implementation adapted for the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.508.1">
      controller model.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-54">
    <a id="_idTextAnchor054">
    </a>
    <span class="koboSpan" id="kobo.509.1">
     Understanding the product controller
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.510.1">
     The implementation of the
    </span>
    <a id="_idIndexMarker188">
    </a>
    <span class="koboSpan" id="kobo.511.1">
     product API using the controller-based approach follows the class definition model.
    </span>
    <span class="koboSpan" id="kobo.511.2">
     Therefore, each API must have a controller, which will be responsible for processing requests for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.512.1">
      each resource.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.513.1">
     Based on the previous example, the product API will have the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.514.1">
      following definition:
     </span>
    </span>
   </p>
   <pre class="source-code">
<strong class="source-inline"><span class="koboSpan" id="kobo.515.1">[ApiController]</span></strong>
<strong class="source-inline"><span class="koboSpan" id="kobo.516.1">[Route("[controller]")]</span></strong><span class="koboSpan" id="kobo.517.1">
public class </span><strong class="source-inline"><span class="koboSpan" id="kobo.518.1">ProductController</span></strong><span class="koboSpan" id="kobo.519.1"> : </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">ControllerBase</span></strong><span class="koboSpan" id="kobo.521.1">
{
    </span><strong class="source-inline"><span class="koboSpan" id="kobo.522.1">[HttpGet]</span></strong><span class="koboSpan" id="kobo.523.1">
    public </span><strong class="source-inline"><span class="koboSpan" id="kobo.524.1">IActionResult</span></strong><span class="koboSpan" id="kobo.525.1"> Get()
    {
      // ..
</span><span class="koboSpan" id="kobo.525.2">    }
    </span><strong class="source-inline"><span class="koboSpan" id="kobo.526.1">[HttpGet("{id}")]</span></strong><span class="koboSpan" id="kobo.527.1">
    public IActionResult Get(int id)
    {
      // ..
</span><span class="koboSpan" id="kobo.527.2">    }
    [HttpPost]
    public IActionResult Post(Product product)
    {
         //..
</span><span class="koboSpan" id="kobo.527.3">    }
    [HttpPut]
    public IActionResult Put(int id,
      Product updatedProduct)
    {
//..
</span><span class="koboSpan" id="kobo.527.4">    }
    [HttpDelete]
    public IActionResult Delete(int id)
    {
     //..
</span><span class="koboSpan" id="kobo.527.5">    }
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.528.1">
     Some code blocks have been omitted to make it easier to read and understand the most important points in this
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.529.1">
      class definition.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.530.1">
     The class represents a
    </span>
    <a id="_idIndexMarker189">
    </a>
    <span class="koboSpan" id="kobo.531.1">
     controller that will handle requests to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.532.1">
      product API.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.533.1">
     Let’s analyze some details of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.534.1">
      the code:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.535.1">
       ApiController
      </span>
     </strong>
     <span class="koboSpan" id="kobo.536.1">
      : This is an attribute that is added to a class, causing it to be mapped as an API controller.
     </span>
     <span class="koboSpan" id="kobo.536.2">
      This way, when adding the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.537.1">
       MapController
      </span>
     </strong>
     <span class="koboSpan" id="kobo.538.1">
      configuration to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.539.1">
       Program.cs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.540.1">
      file, all classes marked as attributes will be responsible for processing requests from the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.541.1">
       respective APIs.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.542.1">
       Route
      </span>
     </strong>
     <span class="koboSpan" id="kobo.543.1">
      : This attribute can be used either in a controller, represented by a class, or in an action, represented by a method.
     </span>
     <span class="koboSpan" id="kobo.543.2">
      Its function is to define a URL pattern for the route.
     </span>
     <span class="koboSpan" id="kobo.543.3">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.544.1">
       [controller]
      </span>
     </strong>
     <span class="koboSpan" id="kobo.545.1">
      parameter is a token that is automatically replaced, at runtime, by the class name, without the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.546.1">
       controller
      </span>
     </strong>
     <span class="koboSpan" id="kobo.547.1">
      suffix.
     </span>
     <span class="koboSpan" id="kobo.547.2">
      For the route to take the method name into account, in the case of annotating an action with the route attribute, the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.548.1">
       [action]
      </span>
     </strong>
     <span class="koboSpan" id="kobo.549.1">
      token must
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.550.1">
       be used.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.551.1">
       ProductController
      </span>
     </strong>
     <span class="koboSpan" id="kobo.552.1">
      : This is the name of the class following the MVC convention.
     </span>
     <span class="koboSpan" id="kobo.552.2">
      There is no obligation to use this suffix, but it is a good practice, as controllers do not need to be in the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.553.1">
       Controllers
      </span>
     </strong>
     <span class="koboSpan" id="kobo.554.1">
      folder, making it easier for other members of a development team
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.555.1">
       to read.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.556.1">
       ControllerBase
      </span>
     </strong>
     <span class="koboSpan" id="kobo.557.1">
      : All controller classes should inherit from the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.558.1">
       ControllerBase
      </span>
     </strong>
     <span class="koboSpan" id="kobo.559.1">
      class, which is appropriate for APIs.
     </span>
     <span class="koboSpan" id="kobo.559.2">
      This class provides many properties and methods that are useful for handling
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.560.1">
       HTTP requests.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.561.1">
       HttpGet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.562.1">
      : This attribute determines the HTTP verb that an action should respond to processing.
     </span>
     <span class="koboSpan" id="kobo.562.2">
      For each verb, there is a different attribute.
     </span>
     <span class="koboSpan" id="kobo.562.3">
      In the preceding example, there are two GET methods, but one is an overload, with one parameter.
     </span>
     <span class="koboSpan" id="kobo.562.4">
      For the controller to know which GET method should be requested, a different route must be defined for methods with the same name.
     </span>
     <span class="koboSpan" id="kobo.562.5">
      In this case, the second GET method has an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.563.1">
       {id}
      </span>
     </strong>
     <span class="koboSpan" id="kobo.564.1">
      parameter, which will be included in the route, differentiating the actions.
     </span>
     <span class="koboSpan" id="kobo.564.2">
      The ASP.NET Core 9 framework
     </span>
     <a id="_idIndexMarker190">
     </a>
     <span class="koboSpan" id="kobo.565.1">
      will take care of binding the method’s
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.566.1">
        id
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.567.1">
       parameter.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.568.1">
     As we can see, a big difference in relation to the innovative approach of the minimal API is the ability to segregate responsibility into different controllers.
    </span>
    <span class="koboSpan" id="kobo.568.2">
     Furthermore, the controller-based approach brings other features that are important in large projects, such as various types of utilities, both through the framework and other resources available in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.569.1">
      ControllerBase
     </span>
    </strong>
    <span class="koboSpan" id="kobo.570.1">
     , such as bind resources and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.571.1">
      model validations.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-55">
    <a id="_idTextAnchor055">
    </a>
    <span class="koboSpan" id="kobo.572.1">
     ControllerBase utilities
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.573.1">
     As mentioned
    </span>
    <a id="_idIndexMarker191">
    </a>
    <span class="koboSpan" id="kobo.574.1">
     previously, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.575.1">
      ControllerBase
     </span>
    </strong>
    <span class="koboSpan" id="kobo.576.1">
     class has several properties and methods that are useful for handling HTTP requests, making the APIs capable of handling requests using REST API best practices
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.577.1">
      and conventions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.578.1">
     The standard for communication between applications through HTTP is extensive, and a book entirely dedicated to this subject would be needed in order to cover it properly.
    </span>
    <span class="koboSpan" id="kobo.578.2">
     However, let’s address some patterns used in the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.579.1">
       ProductController
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.580.1">
      class.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.581.1">
     As we learned at the beginning of the chapter, requests in APIs are made to a specific resource, and for each request, there is an intention associated with a verb.
    </span>
    <span class="koboSpan" id="kobo.581.2">
     Each request has a set of information that is sent to the API, such as a body and headers.
    </span>
    <span class="koboSpan" id="kobo.581.3">
     Likewise, after being processed, this request returns headers and, in addition, may contain a body.
    </span>
    <span class="koboSpan" id="kobo.581.4">
     An HTTP status code is also defined in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.582.1">
      the response.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.583.1">
     This entire pattern is abstracted by the methods available in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.584.1">
      ControllerBase
     </span>
    </strong>
    <span class="koboSpan" id="kobo.585.1">
     , which takes care of the return definitions for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.586.1">
      each request.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.587.1">
     Let’s analyze the GET method for retrieving a product
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.588.1">
      by
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.589.1">
       id
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.590.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.591.1">
 public IActionResult Get(int id)
    {
        var product = ProductService.Get(id);
        if (product is null) return </span><strong class="source-inline"><span class="koboSpan" id="kobo.592.1">NotFound</span></strong><span class="koboSpan" id="kobo.593.1">();
        return </span><strong class="source-inline"><span class="koboSpan" id="kobo.594.1">Ok</span></strong><span class="koboSpan" id="kobo.595.1">(product);
    }</span></pre>
   <p>
    <span class="koboSpan" id="kobo.596.1">
     The purpose of this method is to return a product according to the ID, passed as a parameter to the method.
    </span>
    <span class="koboSpan" id="kobo.596.2">
     This API could be used, for example, in a frontend, where the user clicks on a product link to see its details.
    </span>
    <span class="koboSpan" id="kobo.596.3">
     Since the API consumer does not have access to the implementation details, the API needs to be consistent in returning
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.597.1">
      appropriate responses.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.598.1">
     In the case of the preceding method, if the product is not found, a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.599.1">
      NotFound
     </span>
    </strong>
    <span class="koboSpan" id="kobo.600.1">
     response is returned, using the HTTP status code 404.
    </span>
    <span class="koboSpan" id="kobo.600.2">
     This is the same approach as when trying to access a non-existent URL through the browser, which generally displays a 404 message, stating that a resource was
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.601.1">
      not found.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.602.1">
     On the other hand, if
    </span>
    <a id="_idIndexMarker192">
    </a>
    <span class="koboSpan" id="kobo.603.1">
     the product is found, an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.604.1">
      Ok
     </span>
    </strong>
    <span class="koboSpan" id="kobo.605.1">
     response is returned, using the HTTP status code 200.
    </span>
    <span class="koboSpan" id="kobo.605.2">
     Note that the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.606.1">
      Ok
     </span>
    </strong>
    <span class="koboSpan" id="kobo.607.1">
     method has one parameter, which is exactly the product found.
    </span>
    <span class="koboSpan" id="kobo.607.2">
     In this case, this object will be serialized in JSON format and returned to the client.
    </span>
    <span class="koboSpan" id="kobo.607.3">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.608.1">
      Ok
     </span>
    </strong>
    <span class="koboSpan" id="kobo.609.1">
     method is responsible for serializing the object and creating the response taking into account the body, the serialized product object, and the headers, including stating that
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.610.1">
      Content-Type
     </span>
    </strong>
    <span class="koboSpan" id="kobo.611.1">
     is
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.612.1">
      application/json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.613.1">
     .
    </span>
    <span class="koboSpan" id="kobo.613.2">
     This way, the client can process the message
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.614.1">
      return correctly.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.615.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.616.1">
      ControllerBase
     </span>
    </strong>
    <span class="koboSpan" id="kobo.617.1">
     class has several other methods that abstract the complexity of interacting with the HTTP protocol in addition to implementing REST standards
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.618.1">
      and conventions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.619.1">
     It is important to note that APIs serve different types of clients, whether they are web-ready frontends, operating systems, or mobile applications, and they even allow integration between systems.
    </span>
    <span class="koboSpan" id="kobo.619.2">
     Each of these consumers does not have any details about the API implementations, having access only to the signatures of the required methods and parameters, as well as the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.620.1">
      possible returns.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.621.1">
     Therefore, it is necessary to use standards and conventions correctly, making the API consistent and interoperable
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.622.1">
      between consumers.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.623.1">
     More details
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.624.1">
     If you want to know more
    </span>
    <a id="_idIndexMarker193">
    </a>
    <span class="koboSpan" id="kobo.625.1">
     about the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.626.1">
      ControllerBase
     </span>
    </strong>
    <span class="koboSpan" id="kobo.627.1">
     class, see the documentation at the following
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.628.1">
      link:
     </span>
    </span>
    <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.controllerbase?view=aspnetcore-9.0">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.629.1">
       https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.controllerbase?view=aspnetcore-9.0
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.630.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.631.1">
     The ASP.NET Core 9 abstracts most of the complexity involved in this service delivery model by using APIs, in addition to providing other types of functionality such as a consistent validation model and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.632.1">
      object binding.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-56">
    <a id="_idTextAnchor056">
    </a>
    <span class="koboSpan" id="kobo.633.1">
     Working with binding
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.634.1">
     Binds are
    </span>
    <a id="_idIndexMarker194">
    </a>
    <span class="koboSpan" id="kobo.635.1">
     important features available in ASP.NET Core.
    </span>
    <span class="koboSpan" id="kobo.635.2">
     Their main function is to translate or adapt the API request model to the actions that are performed in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.636.1">
      the controller.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.637.1">
     As we observed in our examples of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.638.1">
      ProductController
     </span>
    </strong>
    <span class="koboSpan" id="kobo.639.1">
     call, the methods receive as parameters these primitive types, such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.640.1">
      int
     </span>
    </strong>
    <span class="koboSpan" id="kobo.641.1">
     , or even complex types, such as objects of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.642.1">
      type
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.643.1">
       product
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.644.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.645.1">
     Each method or action has a signature or interface, which describes the attributes required, if any, for the method or action to be processed.
    </span>
    <span class="koboSpan" id="kobo.645.2">
     When you make a request for action and enter the attributes according to the action signature, these will be mapped by the ASP.NET Core pipeline execution flow, which will bind the information for each attribute entered, taking into account its type, attribute name,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.646.1">
      and value.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.647.1">
     For example, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.648.1">
      product
     </span>
    </strong>
    <span class="koboSpan" id="kobo.649.1">
     object has the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.650.1">
      following attributes:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.651.1">
public int Id {get; set;}
public string Name { get; set; }
public decimal Price { get; set; }</span></pre>
   <p>
    <span class="koboSpan" id="kobo.652.1">
     This object represented in JSON format would be defined
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.653.1">
      as follows:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.654.1">
{
  "id": 1,
  "name": "Smartphone",
  "price": 1000.0
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.655.1">
     As we can see, the objects are identical but represented differently.
    </span>
    <span class="koboSpan" id="kobo.655.2">
     ASP.NET Core does the work of transforming the JSON
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.656.1">
      product
     </span>
    </strong>
    <span class="koboSpan" id="kobo.657.1">
     object into a C#
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.658.1">
      product
     </span>
    </strong>
    <span class="koboSpan" id="kobo.659.1">
     object, mapping the properties according to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.660.1">
      the name.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.661.1">
     This is a standard behavior of the framework, but there is the possibility of customizing and even binding different aspects of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.662.1">
      a request.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.663.1">
     As we know, a request has a body, URL, query string parameters, and also parameters that are sent through forms.
    </span>
    <span class="koboSpan" id="kobo.663.2">
     A request has an abstraction in a C# object called
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.664.1">
      HttpRequest
     </span>
    </strong>
    <span class="koboSpan" id="kobo.665.1">
     .
    </span>
    <span class="koboSpan" id="kobo.665.2">
     You can easily access all the properties of a request through the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.666.1">
      Request
     </span>
    </strong>
    <span class="koboSpan" id="kobo.667.1">
     property of the previously mentioned
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.668.1">
       ControllerBase
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.669.1">
      class.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.670.1">
     If it is necessary, for example, to obtain a value in a query string, the following code can
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.671.1">
      be used:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.672.1">
string fullname1 = Request.QueryString["fullname"];
string fullname2 = Request["fullname"];</span></pre>
   <p>
    <span class="koboSpan" id="kobo.673.1">
     However, this
    </span>
    <a id="_idIndexMarker195">
    </a>
    <span class="koboSpan" id="kobo.674.1">
     same value could be obtained from the query string, using the bind model provided by the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.675.1">
       FromQuery
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.676.1">
      attribute:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.677.1">
[HttpGet]
public IActionResult GetTasks([FromQuery]bool
  isCompleted = false)
    {
// ..
</span><span class="koboSpan" id="kobo.677.2">    }</span></pre>
   <p>
    <span class="koboSpan" id="kobo.678.1">
     As we can see in the preceding code,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.679.1">
      isCompleted
     </span>
    </strong>
    <span class="koboSpan" id="kobo.680.1">
     was annotated with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.681.1">
      FromQuery
     </span>
    </strong>
    <span class="koboSpan" id="kobo.682.1">
     attribute.
    </span>
    <span class="koboSpan" id="kobo.682.2">
     This way, ASP.NET will be responsible for binding the query string to the action parameter.
    </span>
    <span class="koboSpan" id="kobo.682.3">
     In this case, it is expected that the query string has the same name as the method parameter.
    </span>
    <span class="koboSpan" id="kobo.682.4">
     But if this is not the case, just use an attribute overload and define the parameter name,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.683.1">
      as follows:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.684.1">
public IActionResult GetTasks</span><strong class="source-inline"><span class="koboSpan" id="kobo.685.1">([FromQuery("completed")]</span></strong><span class="koboSpan" id="kobo.686.1">bool
  isCompleted = false) { /**/ }</span></pre>
   <p>
    <span class="koboSpan" id="kobo.687.1">
     There are other types of attributes that can be used to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.688.1">
      perform binding:
     </span>
    </span>
   </p>
   <table class="No-Table-Style" id="table002">
    <colgroup>
     <col/>
     <col/>
     <col/>
     <col/>
     <col/>
    </colgroup>
    <thead>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.689.1">
           Attribute
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.690.1">
           HTTP verb
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.691.1">
          When
         </span>
        </strong>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.692.1">
           to use
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.693.1">
           Data format
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.694.1">
          Example
         </span>
        </strong>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.695.1">
           of use
          </span>
         </strong>
        </span>
       </p>
      </td>
     </tr>
    </thead>
    <tbody>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.696.1">
           FromBody
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.697.1">
         POST,
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.698.1">
          PUT, PATH
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.699.1">
         Use to bind parameter data from the request body.
        </span>
        <span class="koboSpan" id="kobo.699.2">
         It can only be used once per action method, as it assumes the entire request body is used to bind to the
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.700.1">
          action’s parameter.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.701.1">
          JSON, XML
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.702.1">
          [
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.703.1">
           HttpPost]
          </span>
         </strong>
        </span>
       </p>
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.704.1">
          public IActionResult Create([FromBody] Product product) { ...
         </span>
         <span class="koboSpan" id="kobo.704.2">
          }
         </span>
        </strong>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.705.1">
           FromForm
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.706.1">
          POST
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.707.1">
         Use to bind parameter data from
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.708.1">
          form fields.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.709.1">
         Form data (
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.710.1">
          key-value pairs)
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.711.1">
          [
         </span>
        </strong>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.712.1">
           HttpPost]
          </span>
         </strong>
        </span>
       </p>
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.713.1">
          public IActionResult Update([FromForm] ProductUpdateDto dto) { ...
         </span>
         <span class="koboSpan" id="kobo.713.2">
          }
         </span>
        </strong>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.714.1">
           FromService
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.715.1">
          Any
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.716.1">
         Use to inject services directly into action methods.
        </span>
        <span class="koboSpan" id="kobo.716.2">
         This is useful for obtaining services without using
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.717.1">
          constructor injection.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.718.1">
         Depends on the service
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.719.1">
          being injected
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.720.1">
          public IActionResult Get([FromServices] IProductService productService) { ...
         </span>
         <span class="koboSpan" id="kobo.720.2">
          }
         </span>
        </strong>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.721.1">
           FromHeader
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.722.1">
          Any
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.723.1">
         Use when you need to retrieve data from HTTP headers.
        </span>
        <span class="koboSpan" id="kobo.723.2">
         Useful for tokens or
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.724.1">
          API versioning.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.725.1">
         Simple string or comma-separated values in a
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.726.1">
          single header
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.727.1">
          public IActionResult Get([FromHeader(Name = "X-Custom-Header")] string value) { ...
         </span>
         <span class="koboSpan" id="kobo.727.2">
          }
         </span>
        </strong>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.728.1">
           FromQuery
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.729.1">
          GET
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.730.1">
         Use to bind parameters from the query string of the URL.
        </span>
        <span class="koboSpan" id="kobo.730.2">
         Ideal for filtering or pagination parameters in a
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.731.1">
          RESTful API.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.732.1">
         Simple types such as strings, integers, or custom string-convertible
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.733.1">
          types
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.734.1">
          public IActionResult Search([FromQuery] string keyword) { ...
         </span>
         <span class="koboSpan" id="kobo.734.2">
          }
         </span>
        </strong>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.735.1">
           FromRoute
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.736.1">
          Any
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.737.1">
         Use when parameter values are embedded in the URL path.
        </span>
        <span class="koboSpan" id="kobo.737.2">
         Typically used with REST URLs that include
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.738.1">
          resource IDs.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.739.1">
         Simple types compatible with
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.740.1">
          URL segments
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.741.1">
          [HttpGet("{id}")] public IActionResult GetById([FromRoute] int id) { ...
         </span>
         <span class="koboSpan" id="kobo.741.2">
          }
         </span>
        </strong>
       </p>
      </td>
     </tr>
    </tbody>
   </table>
   <p>
    <span class="koboSpan" id="kobo.742.1">
     Each of these
    </span>
    <a id="_idIndexMarker196">
    </a>
    <span class="koboSpan" id="kobo.743.1">
     parameters can be used as a means of customizing the bind model in each action of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.744.1">
      a controller.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.745.1">
     Custom binds
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.746.1">
     In some cases, the default
    </span>
    <a id="_idIndexMarker197">
    </a>
    <span class="koboSpan" id="kobo.747.1">
     bind model available in ASP.NET Core may be limited in relation to the needs of an application, which can often have other, more complex types.
    </span>
    <span class="koboSpan" id="kobo.747.2">
     With this, it is possible to implement customized binds.
    </span>
    <span class="koboSpan" id="kobo.747.3">
     This implementation is outside the scope of this book, but you can learn more
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.748.1">
      here:
     </span>
    </span>
    <a href="https://learn.microsoft.com/en-us/aspnet/core/mvc/advanced/custom-model-binding?view=aspnetcore-9.0">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.749.1">
       https://learn.microsoft.com/en-us/aspnet/core/mvc/advanced/custom-model-binding?view=aspnetcore-9.0
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.750.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.751.1">
     The binds model available in ASP.NET Core abstracts much of the implementation complexity by taking care of filling in the values that each action requires.
    </span>
    <span class="koboSpan" id="kobo.751.2">
     However, there is no guarantee that the parameters were filled in correctly in accordance with the application’s business rules.
    </span>
    <span class="koboSpan" id="kobo.751.3">
     To do this, you need to perform validations, and ASP.NET Core offers a powerful
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.752.1">
      validation model.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-57">
    <a id="_idTextAnchor057">
    </a>
    <span class="koboSpan" id="kobo.753.1">
     Performing validations
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.754.1">
     When it comes to
    </span>
    <a id="_idIndexMarker198">
    </a>
    <span class="koboSpan" id="kobo.755.1">
     creating robust APIs, model validation is one of the fundamental pillars.
    </span>
    <span class="koboSpan" id="kobo.755.2">
     ASP.NET Core 9 makes this process easier and more powerful than ever, thanks to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.756.1">
      ModelState
     </span>
    </strong>
    <span class="koboSpan" id="kobo.757.1">
     .
    </span>
    <span class="koboSpan" id="kobo.757.2">
     Think of it as a border guard that checks and validates data before it enters the core of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.758.1">
      your application.
     </span>
    </span>
   </p>
   <p>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.759.1">
      ModelState
     </span>
    </strong>
    <span class="koboSpan" id="kobo.760.1">
     is a
    </span>
    <a id="_idIndexMarker199">
    </a>
    <span class="koboSpan" id="kobo.761.1">
     framework in ASP.NET Core that acts to verify that data complies with the rules defined in your models.
    </span>
    <span class="koboSpan" id="kobo.761.2">
     If a piece of data does not meet the validation criteria,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.762.1">
      ModelState
     </span>
    </strong>
    <span class="koboSpan" id="kobo.763.1">
     marks it
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.764.1">
      as invalid.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.765.1">
     Let’s take a look at the product
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.766.1">
      registration API:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.767.1">
[HttpPost]
    public IActionResult Post(Product product)
    {
        if (product == null) return BadRequest();
        </span><strong class="bold"><span class="koboSpan" id="kobo.768.1">if (!ModelState.IsValid)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.769.1">          return BadRequest(ModelState);</span></strong><span class="koboSpan" id="kobo.770.1">
         // ..
</span><span class="koboSpan" id="kobo.770.2">    }</span></pre>
   <p>
    <span class="koboSpan" id="kobo.771.1">
     As we can see, there is a condition that evaluates the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.772.1">
      ModelState.IsValid
     </span>
    </strong>
    <span class="koboSpan" id="kobo.773.1">
     property.
    </span>
    <span class="koboSpan" id="kobo.773.2">
     If false, then an HTTP status code of 400 (for a bad request) is returned, containing a body that will represent the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.774.1">
       ModelState
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.775.1">
      object:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.776.1">
{
    "Name": [
        "The field Name is required"
    ]
}</span></pre>
   <p>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.777.1">
      ModelState
     </span>
    </strong>
    <span class="koboSpan" id="kobo.778.1">
     is
    </span>
    <a id="_idIndexMarker200">
    </a>
    <span class="koboSpan" id="kobo.779.1">
     actually a dictionary, which, when serialized in JSON format, is represented by an object.
    </span>
    <span class="koboSpan" id="kobo.779.2">
     Each object property represents a validated property.
    </span>
    <span class="koboSpan" id="kobo.779.3">
     The value of each object property is represented by an array of strings that contains the
    </span>
    <a id="_idIndexMarker201">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.780.1">
      validation results.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.781.1">
     In order for
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.782.1">
      ModelState
     </span>
    </strong>
    <span class="koboSpan" id="kobo.783.1">
     to consider the model valid or not, it is necessary to annotate the properties of the objects with validation attributes; otherwise, the validations will
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.784.1">
      be disregarded.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.785.1">
     The product class was changed by adding validation to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.786.1">
      Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.787.1">
     attribute, as in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.788.1">
      following code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.789.1">
public class Product
{
    public int Id {get; set;}
    </span><strong class="bold"><span class="koboSpan" id="kobo.790.1">[Required(ErrorMessage ="The field Name is required")]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.791.1">    [MinLength(3, ErrorMessage = "The Name field must have</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.792.1">at least 3 characters.")]</span></strong><span class="koboSpan" id="kobo.793.1">
    public string Name { get; set; }
    public decimal Price { get; set; }
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.794.1">
     As we can see, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.795.1">
      Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.796.1">
     property is considered mandatory and, in addition, must have at least three characters.
    </span>
    <span class="koboSpan" id="kobo.796.2">
     This way, it is possible to combine validation attributes in the same property, and this is
    </span>
    <a id="_idIndexMarker202">
    </a>
    <span class="koboSpan" id="kobo.797.1">
     managed by
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.798.1">
      ModelState
     </span>
    </strong>
    <span class="koboSpan" id="kobo.799.1">
     through the execution flow of an action, provided by ASP.NET
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.800.1">
      Core 9.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.801.1">
     Validations are
    </span>
    <a id="_idIndexMarker203">
    </a>
    <span class="koboSpan" id="kobo.802.1">
     part of an API, whether through attributes added to models or even manually, in the body of an action, using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.803.1">
      ModelState.AddModelError
     </span>
    </strong>
    <span class="koboSpan" id="kobo.804.1">
     method, as shown in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.805.1">
      following example:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.806.1">
if (product.Price &lt; 0) ModelState.AddModelError("Price",
  "The Price field cannot have a value less than zero.");
        if (!ModelState.IsValid)
          return BadRequest(ModelState);</span></pre>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.807.1">
     Other attributes
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.808.1">
     ASP.NET Core also offers several other attributes that
    </span>
    <a id="_idIndexMarker204">
    </a>
    <span class="koboSpan" id="kobo.809.1">
     can be used as model
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.810.1">
      validation:
     </span>
    </span>
    <a href="https://learn.microsoft.com/en-us/aspnet/core/mvc/models/validation?view=aspnetcore-9.0#built-in-attributes">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.811.1">
       https://learn.microsoft.com/en-us/aspnet/core/mvc/models/validation?view=aspnetcore-9.0#built-in-attributes
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.812.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.813.1">
     As we can see, ASP.NET Core 9 provides a great feature for managing the states of models used by APIs, with parameters or even objects, allowing us to have the ability to carry out validations in a rich way on the application’s endpoints, in addition to giving us a simple way to maintain the integrity
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.814.1">
      of information.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.815.1">
     These features become even more powerful with the use of approaches such as documentation, response formatting, and error management.
    </span>
    <span class="koboSpan" id="kobo.815.2">
     Therefore, in the next section, we will see how to make APIs even more consistent
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.816.1">
      for consumers.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-58">
    <a id="_idTextAnchor058">
    </a>
    <span class="koboSpan" id="kobo.817.1">
     Working with documentation
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.818.1">
     APIs
    </span>
    <a id="_idIndexMarker205">
    </a>
    <span class="koboSpan" id="kobo.819.1">
     are a powerful
    </span>
    <a id="_idIndexMarker206">
    </a>
    <span class="koboSpan" id="kobo.820.1">
     resource for delivering an application’s business model through services, and for an API project to be made available properly, it is important to add features that standardize the interaction model
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.821.1">
      with customers.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.822.1">
     To achieve this, every API must be documented, allowing customers to know which resources are available and how this documentation
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.823.1">
      is done.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.824.1">
     So, let’s learn how we can benefit from API feature documentation automatically using Swagger’s NuGet package, which implements the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.825.1">
      OpenAPI specification.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-59">
    <a id="_idTextAnchor059">
    </a>
    <span class="koboSpan" id="kobo.826.1">
     Documenting APIs with Swagger
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.827.1">
     APIs
    </span>
    <a id="_idIndexMarker207">
    </a>
    <span class="koboSpan" id="kobo.828.1">
     are consumed by clients and other applications
    </span>
    <a id="_idIndexMarker208">
    </a>
    <span class="koboSpan" id="kobo.829.1">
     through the HTTP protocol, where there is a request and a response.
    </span>
    <span class="koboSpan" id="kobo.829.2">
     For this communication to happen, it is necessary to have knowledge about what is provided by the API, in this case, which methods are available and which contracts are used to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.830.1">
      establish connections.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.831.1">
     To do this, we have to establish a source of knowledge about the resources made available by APIs, such as methods, HTTP verbs, parameters, and bodies.
    </span>
    <span class="koboSpan" id="kobo.831.2">
     To achieve this objective, it is necessary to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.832.1">
      have documentation.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.833.1">
     However, this documentation needs to be dynamic, since, especially during the development process, APIs can constantly change, adding functionalities or new features.
    </span>
    <span class="koboSpan" id="kobo.833.2">
     It would be laborious to make changes to each bit of documentation and send it to all
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.834.1">
      API consumers.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.835.1">
     ASP.NET Core 9 still supports Swagger for providing API documentation.
    </span>
    <span class="koboSpan" id="kobo.835.2">
     However, Swagger is no longer part of the project template by default as it was in previous releases.
    </span>
    <span class="koboSpan" id="kobo.835.3">
     New projects can now support OpenAPI document generation in controller-based and minimal API applications.
    </span>
    <span class="koboSpan" id="kobo.835.4">
     The OpenAI specification provides a programming language-agnostic approach to API documentation.
    </span>
    <span class="koboSpan" id="kobo.835.5">
     As such, ASP.NET Core 9 provides built-in support for generating endpoint
    </span>
    <a id="_idIndexMarker209">
    </a>
    <span class="koboSpan" id="kobo.836.1">
     information in an application through the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.837.1">
      Microsoft.AspNetCore.OpenAI
     </span>
    </strong>
    <span class="koboSpan" id="kobo.838.1">
     package, avoiding dependencies on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.839.1">
      external libraries.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.840.1">
     Therefore, in
    </span>
    <a id="_idIndexMarker210">
    </a>
    <span class="koboSpan" id="kobo.841.1">
     order to have documentation, as well as an experience of
    </span>
    <a id="_idIndexMarker211">
    </a>
    <span class="koboSpan" id="kobo.842.1">
     using a UI to test the APIs, we will integrate the API project with Swagger, which is easy-to-use suite of API developer tools, in addition to implementing the OpenAPI
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.843.1">
      specification standards.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.844.1">
     OpenAPI Specification
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.845.1">
     The OpenAPI Specification
    </span>
    <a id="_idIndexMarker212">
    </a>
    <span class="koboSpan" id="kobo.846.1">
     is part of the Linux Foundation and aims to specify RESTFul interfaces to provide ease in the development and consumption of APIs.
    </span>
    <span class="koboSpan" id="kobo.846.2">
     You can learn more about OpenAPI
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.847.1">
      at
     </span>
    </span>
    <a href="https://spec.openapis.org/oas/latest.html">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.848.1">
       https://spec.openapis.org/oas/latest.html
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.849.1">
      .
     </span>
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.850.1">
     To learn more about ASP.NET Core 9 OpenAPI, visit the
    </span>
    <a id="_idIndexMarker213">
    </a>
    <span class="koboSpan" id="kobo.851.1">
     following
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.852.1">
      URL:
     </span>
    </span>
    <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/openapi/overview?view=aspnetcore-9.0">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.853.1">
       https://learn.microsoft.com/en-us/aspnet/core/fundamentals/openapi/overview?view=aspnetcore-9.0
      </span>
     </span>
    </a>
   </p>
   <p>
    <span class="koboSpan" id="kobo.854.1">
     When integrating it into your API solution, Swagger acts as a specification generator in the OpenAPI format, which is based on a JSON file, where all the APIs available in your application
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.855.1">
      are described:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.856.1">
{
  "openapi": "3.0.1",
  "info": {
    "title": "API V1",
    "version": "v1"
  },
  "paths": {
    "/api/Todo": {
      "get": {
        "tags": [
          "Todo"
        ],
        "operationId": "ApiTodoGet",
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ToDoItem"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ToDoItem"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ToDoItem"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        …
      }
    },
    "/api/Todo/{id}": {
      "get": {
        …
      },
      "put": {
        …
      },
      "delete": {
        …
      }
    }
  },
  "components": {
    "schemas": {
      "ToDoItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "isCompleted": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      }
    }
  }
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.857.1">
     The
    </span>
    <a id="_idIndexMarker214">
    </a>
    <span class="koboSpan" id="kobo.858.1">
     preceding JSON describes the resources available for an API, the
    </span>
    <a id="_idIndexMarker215">
    </a>
    <span class="koboSpan" id="kobo.859.1">
     response schema, and the available verbs, in addition to the prediction of objects used in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.860.1">
      the API.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.861.1">
     To integrate Swagger into a project, we must add the Nuget package by running the following command on the command line, in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.862.1">
      project directory:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.863.1">
dotnet add package Swashbuckle.AspNetCore</span></pre>
   <p>
    <span class="koboSpan" id="kobo.864.1">
     Next, we must change the Program.cs file.
    </span>
    <span class="koboSpan" id="kobo.864.2">
     We will perform this configuration for the Product MVC project, and you can analyze the changed code, adding Swagger, in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.865.1">
      code below:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.866.1">
var builder = WebApplication.CreateBuilder(args);
builder.Services.AddControllers();
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();
var app = builder.Build();
if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI();
}
app.UseHttpsRedirection();
app.UseAuthorization();
app.MapControllers();
app.Run();</span></pre>
   <p>
    <span class="koboSpan" id="kobo.867.1">
     The implementation consists of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.868.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.869.1">
      Line 4 adds the Swagger generation services through the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.870.1">
        builder.Services.AddSwaggerGen()
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.871.1">
       method.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.872.1">
      Between lines 6 and 10, we have the addition of Swagger to the ASP.NET execution pipeline, through the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.873.1">
       app.UseSwagger()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.874.1">
      method, and also the provision of the UI through the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.875.1">
       app.UseSwaggerUI()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.876.1">
      method.
     </span>
     <span class="koboSpan" id="kobo.876.2">
      These methods are only executed if the application is running in development mode,
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.877.1">
        if (app.Environment.IsDevelopment)
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.878.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.879.1">
     When running the
    </span>
    <a id="_idIndexMarker216">
    </a>
    <span class="koboSpan" id="kobo.880.1">
     application, simply access the API link with the
    </span>
    <a id="_idIndexMarker217">
    </a>
    <span class="koboSpan" id="kobo.881.1">
     swagger suffix, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.882.1">
       Figure 3
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.883.1">
       .7
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.884.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer039">
     <span class="koboSpan" id="kobo.885.1">
      <img alt="Figure 3.7 – Swagger UI for the Product MVC API" src="image/B21788_03_7.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.886.1">
     Figure 3.7 – Swagger UI for the Product MVC API
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.887.1">
     Looking at
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.888.1">
       Figure 3
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.889.1">
      .7
     </span>
    </em>
    <span class="koboSpan" id="kobo.890.1">
     , we can see that the methods available in the product API were listed in the UI, in addition to the specification of the objects worked on the API.
    </span>
    <span class="koboSpan" id="kobo.890.2">
     No changes were required to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.891.1">
      source code.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.892.1">
     Swagger identifies the controllers and actions available in the source code, generates the specification, and consequently generates the UI.
    </span>
    <span class="koboSpan" id="kobo.892.2">
     However, more details can be added to the documentation in order to enrich the API usage model.
    </span>
    <span class="koboSpan" id="kobo.892.3">
     Let’s take a closer look at how to improve documentation using the features available in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.893.1">
      Swagger package.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.894.1">
     Improving the documentation
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.895.1">
     As we learned previously, Swagger is
    </span>
    <a id="_idIndexMarker218">
    </a>
    <span class="koboSpan" id="kobo.896.1">
     added by default in ASP.NET Core 9 API projects and automatically generates a UI containing a minimum version of the usage details of the API, inferring the data by reading the controllers
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.897.1">
      and actions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.898.1">
     As we can see in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.899.1">
       Figure 3
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.900.1">
      .8
     </span>
    </em>
    <span class="koboSpan" id="kobo.901.1">
     , to add a product, it is necessary to provide JSON as the body of the request; in addition, we have a description of the response, containing the HTTP status code 200, which represents
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.902.1">
      the success.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer040">
     <span class="koboSpan" id="kobo.903.1">
      <img alt="Figure 3.8 – Documentation details for an API" src="image/B21788_03_8.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.904.1">
     Figure 3.8 – Documentation details for an API
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.905.1">
     However, if we look at the
    </span>
    <a id="_idIndexMarker219">
    </a>
    <span class="koboSpan" id="kobo.906.1">
     POST method code (made available through the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.907.1">
      ProductController
     </span>
    </strong>
    <span class="koboSpan" id="kobo.908.1">
     class available in the book repository mentioned in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.909.1">
      Technical requirements
     </span>
    </em>
    <span class="koboSpan" id="kobo.910.1">
     section), which registers a product, there is no explicit definition of the HTTP status
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.911.1">
      code 200:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.912.1">
[HttpPost]
    public IActionResult Post(Product product)
    {
        if (product == null) return </span><strong class="source-inline"><span class="koboSpan" id="kobo.913.1">BadRequest();</span></strong><span class="koboSpan" id="kobo.914.1">
        if (product.Price &lt; 0)
          ModelState.AddModelError("Price",
          "The Price field cannot have a value less
          than zero.");
        if (!ModelState.IsValid)
          return BadRequest(ModelState);
        product.Id = ProductService.Products.Count() + 1;
        ProductService.Add(product);
        return </span><strong class="source-inline"><span class="koboSpan" id="kobo.915.1">CreatedAtAction</span></strong><span class="koboSpan" id="kobo.916.1">(nameof(Get),
           new {id = product.Id}, product);
    }</span></pre>
   <p>
    <span class="koboSpan" id="kobo.917.1">
     The method returns two possible HTTP status codes, which are 400, represented by calling the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.918.1">
      BadRequest
     </span>
    </strong>
    <span class="koboSpan" id="kobo.919.1">
     method, and 201, which is represented by the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.920.1">
       CreatedAtAction
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.921.1">
      method.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.922.1">
     As we can see in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.923.1">
       Figure 3
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.924.1">
      .8
     </span>
    </em>
    <span class="koboSpan" id="kobo.925.1">
     , there is a button labeled
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.926.1">
      Try it out
     </span>
    </strong>
    <span class="koboSpan" id="kobo.927.1">
     .
    </span>
    <span class="koboSpan" id="kobo.927.2">
     Upon clicking this button, the UI will be prepared so that it is possible to add the request body, which in this case will be some JSON that represents a product and its respective properties.
    </span>
    <span class="koboSpan" id="kobo.927.3">
     Modify the JSON to add a new
    </span>
    <a id="_idIndexMarker220">
    </a>
    <span class="koboSpan" id="kobo.928.1">
     product, defining the properties as in the example proposed in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.929.1">
       Figure 3
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.930.1">
       .9
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.931.1">
      .
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer041">
     <span class="koboSpan" id="kobo.932.1">
      <img alt="Figure 3.9 – Running an API request from the Swagger UI" src="image/B21788_03_9.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.933.1">
     Figure 3.9 – Running an API request from the Swagger UI
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.934.1">
     After defining the body of the request, click the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.935.1">
      Execute
     </span>
    </strong>
    <span class="koboSpan" id="kobo.936.1">
     button.
    </span>
    <span class="koboSpan" id="kobo.936.2">
     Just make sure your application
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.937.1">
      is running.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.938.1">
     At the end of the execution, the Swagger UI displays the API response, and as we can clearly see in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.939.1">
       Figure 3
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.940.1">
      .10
     </span>
    </em>
    <span class="koboSpan" id="kobo.941.1">
     , we have an HTTP status code of 201, in addition to the JSON of the newly registered product and some information in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.942.1">
      the header.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer042">
     <span class="koboSpan" id="kobo.943.1">
      <img alt="Figure 3.10 – Swagger API Response screen" src="image/B21788_03_10.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.944.1">
     Figure 3.10 – Swagger API Response screen
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.945.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.946.1">
      CreatedAtAction
     </span>
    </strong>
    <span class="koboSpan" id="kobo.947.1">
     method creates a response with HTTP status code 201 and adds a link to the header to access the resource created using the GET method, as highlighted in the preceding figure using the address
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.948.1">
      http://localhost:5037/Product/1
     </span>
    </strong>
    <span class="koboSpan" id="kobo.949.1">
     .
    </span>
    <span class="koboSpan" id="kobo.949.2">
     This address may vary depending on the execution address in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.950.1">
      your environment.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.951.1">
     This type of return is good practice and follows the standards defined in the REST protocol.
    </span>
    <span class="koboSpan" id="kobo.951.2">
     However, although it is not a major problem in the context in which we are presenting the examples, API consumers must be clear about how to consume and what to expect in return to properly deal with each response.
    </span>
    <span class="koboSpan" id="kobo.951.3">
     In the case of the product registration method, there being no information means that this method would also return an error status, which could cause some non-compliance for the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.952.1">
      API consumer.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.953.1">
     To adjust this behavior, we
    </span>
    <a id="_idIndexMarker221">
    </a>
    <span class="koboSpan" id="kobo.954.1">
     must add more information to the API methods using attributes provided by ASP.NET Core 9 such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.955.1">
      ProducesResponseType
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.956.1">
      and
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.957.1">
       Consumes
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.958.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.959.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.960.1">
      ProducesResponseType
     </span>
    </strong>
    <span class="koboSpan" id="kobo.961.1">
     attribute is used to determine the type of HTTP status code that will be returned as a response and also the type of content that will be returned.
    </span>
    <span class="koboSpan" id="kobo.961.2">
     This attribute can also be used in the generic version, typing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.962.1">
      the return.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.963.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.964.1">
      Consumes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.965.1">
     attribute determines the type of content expected by the API.
    </span>
    <span class="koboSpan" id="kobo.965.2">
     The content is defined as a media type and the complete list can be obtained through the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.966.1">
      MediaTypeNames
     </span>
    </strong>
    <span class="koboSpan" id="kobo.967.1">
     class available in the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.968.1">
       System.Net.Mime
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.969.1">
      namespace.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.970.1">
     Let’s analyze the new implementation of the POST method with the addition
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.971.1">
      of attributes:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.972.1">
[HttpPost]
[Consumes(MediaTypeNames.Application.Json)]
[ProducesResponseType&lt;Product&gt;(StatusCodes
  .Status201Created)]
[ProducesResponseType(StatusCodes.Status400BadRequest)]
    public IActionResult Post(Product product)
    {
        // code omitted for readability
    }</span></pre>
   <p>
    <span class="koboSpan" id="kobo.973.1">
     As we can see in the preceding code, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.974.1">
      ProducesResponseType
     </span>
    </strong>
    <span class="koboSpan" id="kobo.975.1">
     attribute can be added as many times as necessary to represent different return types.
    </span>
    <span class="koboSpan" id="kobo.975.2">
     In this example, the HTTP status code 201 is being reported, for created items, and one type of return with the HTTP status
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.976.1">
      code 400.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.977.1">
     When running the
    </span>
    <a id="_idIndexMarker222">
    </a>
    <span class="koboSpan" id="kobo.978.1">
     application again, we can observe the changes made to the code and automatically generated in the Swagger UI, according to
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.979.1">
       Figure 3
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.980.1">
       .11
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.981.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer043">
     <span class="koboSpan" id="kobo.982.1">
      <img alt="Figure 3.11 – API response documentation" src="image/B21788_03_11.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.983.1">
     Figure 3.11 – API response documentation
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.984.1">
     We now have the correct documentation on the aspects involved in the product controller’s POST method, which enables the API to be consumed appropriately by taking into account alternative
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.985.1">
      response flows.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.986.1">
     XML comments
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.987.1">
     In addition to the attributes added to the API methods, it is also possible to use XML comments for each method as part of the Swagger UI documentation.
    </span>
    <span class="koboSpan" id="kobo.987.2">
     To do this, it will be necessary to configure the project so that the documentation XML is generated during the compilation process and is
    </span>
    <a id="_idIndexMarker223">
    </a>
    <span class="koboSpan" id="kobo.988.1">
     obtained from the Swagger UI.
    </span>
    <span class="koboSpan" id="kobo.988.2">
     You can find a complete explanation of this configuration at the
    </span>
    <a id="_idIndexMarker224">
    </a>
    <span class="koboSpan" id="kobo.989.1">
     following
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.990.1">
      address:
     </span>
    </span>
    <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/getting-started-with-swashbuckle?view=aspnetcore-9.0&amp;tabs=visual-studio#xml-comments">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.991.1">
       https://learn.microsoft.com/en-us/aspnet/core/tutorials/getting-started-with-swashbuckle?view=aspnetcore-9.0&amp;tabs=visual-studio#xml-comments
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.992.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.993.1">
     In addition to having the ability to create quality APIs with ASP.NET Core 9, we also have the support of a rich API documentation interface, in addition to the option to execute requests and get more details about the request parameters
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.994.1">
      and response.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.995.1">
     Understanding this documentation approach will greatly help you to generate quality services that can be integrated into different systems and contexts.
    </span>
    <span class="koboSpan" id="kobo.995.2">
     As we progress through the next few chapters, we will further study the use of APIs, documentation, and other technologies such as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.996.1">
      database connections.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-60">
    <a id="_idTextAnchor060">
    </a>
    <span class="koboSpan" id="kobo.997.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.998.1">
     In this chapter, we dove deep into the world of HTTP-delivered APIs, discovering the power they have to provide services to a variety of clients.
    </span>
    <span class="koboSpan" id="kobo.998.2">
     With the robust support of ASP.NET Core, we learned how to make the most of this potential, learning about approaches such as using minimal APIs to create HTTP APIs quickly and efficiently.
    </span>
    <span class="koboSpan" id="kobo.998.3">
     We also explored the creation of robust APIs using controller-based projects.
    </span>
    <span class="koboSpan" id="kobo.998.4">
     We looked at other aspects that involve APIs, such as documentation.
    </span>
    <span class="koboSpan" id="kobo.998.5">
     In the next chapter, we will continue to explore the characteristics of ASP.NET Core 9, understanding how to develop real-time applications
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.999.1">
      using SignalR.
     </span>
    </span>
   </p>
  </div>
 </body></html>