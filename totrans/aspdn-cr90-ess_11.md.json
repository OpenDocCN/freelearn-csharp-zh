["```cs\nusing Microsoft.AspNetCore.Builder;\nusing Microsoft.Extensions.Hosting;\nusing Microsoft.Extensions.Logging;\nvar builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddControllers();\nvar app = builder.Build();\napp.UseRouting();\napp.UseEndpoints(endpoints =>\n{\n    endpoints.MapControllers();\n});\nvar host = app.Services\n  .GetService<IHostApplicationLifetime>();\n// Handle graceful shutdown\nhost.ApplicationStopping.Register(() =>\n{\n    var logger = app.Services\n      .GetService<ILogger<Program>>();\n    logger.LogInformation(\"Application is shutting down...\");\n    // Add more cleanup tasks here\n});\napp.Run();\n```"]