<html><head></head><body>
<div id="_idContainer005">
<h1 id="_idParaDest-6"><a id="_idTextAnchor005"/><span class="koboSpan" id="kobo.1.1">Preface</span></h1>
<p><span class="koboSpan" id="kobo.2.1">If you have worked on distributed applications, infrastructure, or client libraries, you’ve likely encountered numerous ways in which distributed systems </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">can break.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">For example, a default retry policy on your service can bring it down along with all its dependencies. </span><span class="koboSpan" id="kobo.4.2">Race conditions can lead to deadlocks under certain load or result in data leak between user accounts. </span><span class="koboSpan" id="kobo.4.3">User operations that usually take milliseconds can significantly slow down, while service dashboards show no signs of other issues. </span><span class="koboSpan" id="kobo.4.4">Functional problems can cause obscure and inexplicable effects on the </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">user’s end.</span></span></p>
<p><span class="koboSpan" id="kobo.6.1">When working with distributed applications, we rely on telemetry to assess their performance and functionality. </span><span class="koboSpan" id="kobo.6.2">We need even more telemetry to identify and </span><span class="No-Break"><span class="koboSpan" id="kobo.7.1">mitigate issues.</span></span></p>
<p><span class="koboSpan" id="kobo.8.1">In the past, we relied on custom logs and metrics collected using vendor-specific SDKs. </span><span class="koboSpan" id="kobo.8.2">We built custom parsers, processing pipelines, and reporting tools to make </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">telemetry usable.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">However, as applications have become more complex, we require better and more user-friendly approaches to understand what is happening in our systems. </span><span class="koboSpan" id="kobo.10.2">Personally, I find it unproductive to read through megabytes of logs or visually detect anomalies </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">in metrics.</span></span></p>
<p><span class="koboSpan" id="kobo.12.1">Distributed tracing is a technique that allows us to trace operations throughout the entire system. </span><span class="koboSpan" id="kobo.12.2">It provides correlation and causation to our telemetry, enabling us to retrieve all the relevant data describing a specific operation or find all operations based on the context, such as a requested resource or a </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">user identifier.</span></span></p>
<p><span class="koboSpan" id="kobo.14.1">Distributed tracing alone is not enough; we need other telemetry signals such as metrics, events, logs, and profiles, as well as libraries to collect and export them to observability backends. </span><span class="koboSpan" id="kobo.14.2">Fortunately, we have OpenTelemetry for this purpose. </span><span class="koboSpan" id="kobo.14.3">OpenTelemetry is a cloud-native, vendor-neutral telemetry platform available in multiple programming languages. </span><span class="koboSpan" id="kobo.14.4">It offers the core components necessary to collect custom data along with instrumentation libraries for common technologies. </span><span class="koboSpan" id="kobo.14.5">OpenTelemetry standardizes telemetry formats for different signals ensuring correlation, consistency, and structure in the </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">collected data.</span></span></p>
<p><span class="koboSpan" id="kobo.16.1">By leveraging consistent and structured telemetry, different observability vendors can provide tools such as service maps, trace visualizations, error classification, and detection of common properties contributing to failures. </span><span class="koboSpan" id="kobo.16.2">This essentially allows us to automate the error-prone and tedious parts of performance analysis that humans struggle with. </span><span class="koboSpan" id="kobo.16.3">Monitoring and debugging techniques can now become standardized practices across the industry, no longer relying on tribal knowledge, runbooks, or </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">outdated documentation.</span></span></p>
<p><em class="italic"><span class="koboSpan" id="kobo.18.1">Modern Distributed Tracing in .NET</span></em><span class="koboSpan" id="kobo.19.1"> explores all aspects of telemetry collection in .NET applications, with a focus on distributed tracing and performance analysis. </span><span class="koboSpan" id="kobo.19.2">It begins with an overview of the observability challenges and solutions and then delves into the built-in monitoring capabilities offered by modern .NET applications. </span><span class="koboSpan" id="kobo.19.3">These capabilities become even more impressive when used alongside OpenTelemetry. </span><span class="koboSpan" id="kobo.19.4">While shared OpenTelemetry instrumentation libraries can take us a long way, sometimes we still need to write custom instrumentations. </span><span class="koboSpan" id="kobo.19.5">The book shows how to collect custom traces, metrics, and logs while considering performance impact and verbosity. </span><span class="koboSpan" id="kobo.19.6">It also covers the instrumentation of common cloud patterns such as network calls, messaging, and database interactions. </span><span class="koboSpan" id="kobo.19.7">Finally, it discusses the organizational and technical aspects of implementing and evolving observability in </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">existing systems.</span></span></p>
<p><span class="koboSpan" id="kobo.21.1">The observability field is still relatively new and rapidly evolving, which means there are often multiple solutions available for almost any problem. </span><span class="koboSpan" id="kobo.21.2">This book aims to explain fundamental observability concepts and provides several possible solutions to common problems while highlighting the associated trade-offs. </span><span class="koboSpan" id="kobo.21.3">It also helps you gain practical skills to implement and leverage tracing </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">and observability.</span></span></p>
<p><span class="koboSpan" id="kobo.23.1">I hope you find the provided examples useful and use them as a playground for experimentation. </span><span class="koboSpan" id="kobo.23.2">I encourage you to explore new and creative approaches to making distributed systems more observable and to share your findings with </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">the community!</span></span></p>
<h1 id="_idParaDest-7"><a id="_idTextAnchor006"/><span class="koboSpan" id="kobo.25.1">Who this book is for</span></h1>
<p><span class="koboSpan" id="kobo.26.1">This book is for software developers, architects, and system operators running .NET services who want to use modern observability tools and standards. </span><span class="koboSpan" id="kobo.26.2">It offers a holistic approach to performance analysis and end-to-end debugging. </span><span class="koboSpan" id="kobo.26.3">Software testers and support engineers will also find this book useful. </span><span class="koboSpan" id="kobo.26.4">Basic knowledge of the C# programming language and the .NET platform is assumed for grasping the examples of manual instrumentation, but is </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">not necessary.</span></span></p>
<h1 id="_idParaDest-8"><a id="_idTextAnchor007"/><span class="koboSpan" id="kobo.28.1">What this book covers</span></h1>
<p><a href="B19423_01.xhtml#_idTextAnchor016"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.29.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.30.1">, </span><em class="italic"><span class="koboSpan" id="kobo.31.1">Observability Needs of Modern Applications</span></em><span class="koboSpan" id="kobo.32.1">, provides an overview of common monitoring techniques and introduces distributed tracing. </span><span class="koboSpan" id="kobo.32.2">It covers OpenTelemetry – a vendor-agnostic telemetry platform and shows how it addresses observability challenges of distributed applications with correlated </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">telemetry signals.</span></span></p>
<p><a href="B19423_02.xhtml#_idTextAnchor038"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.34.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.35.1">, </span><em class="italic"><span class="koboSpan" id="kobo.36.1">Native Monitoring in .NET</span></em><span class="koboSpan" id="kobo.37.1">, offers an overview of the diagnostic capabilities  provided by .NET out-of-the-box. </span><span class="koboSpan" id="kobo.37.2">These capabilities include structured and correlated logs and counters along with ad-hoc monitoring with the dotnet-monitor tool. </span><span class="koboSpan" id="kobo.37.3">We’ll also instrument the first application with OpenTelemetry and get hands-on experience with </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">distributed tracing.</span></span></p>
<p><a href="B19423_03.xhtml#_idTextAnchor052"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.39.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.40.1">, </span><em class="italic"><span class="koboSpan" id="kobo.41.1">The .NET Observability Ecosystem</span></em><span class="koboSpan" id="kobo.42.1">, explores a broader set of tracing instrumentations and environments. </span><span class="koboSpan" id="kobo.42.2">We’ll learn how to find and evaluate instrumentation libraries, get traces from infrastructure such as Dapr, and finally instrument serverless applications using AWS Lambda and Azure Functions </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">as examples.</span></span></p>
<p><a href="B19423_04.xhtml#_idTextAnchor068"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.44.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.45.1">, </span><em class="italic"><span class="koboSpan" id="kobo.46.1">Low-Level Performance Analysis with Diagnostic Tools</span></em><span class="koboSpan" id="kobo.47.1">, provides an introduction into lower-level .NET diagnostics and performance analysis. </span><span class="koboSpan" id="kobo.47.2">We’ll see how to collect and analyze runtime counters and performance traces to get more observability within the process when distributed tracing does not provide </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">enough input.</span></span></p>
<p><a href="B19423_05.xhtml#_idTextAnchor083"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.49.1">Chapter 5</span></em></span></a><span class="koboSpan" id="kobo.50.1">, </span><em class="italic"><span class="koboSpan" id="kobo.51.1">Configuration and Control Plane</span></em><span class="koboSpan" id="kobo.52.1">, provides an overview of OpenTelemetry configuration and customization. </span><span class="koboSpan" id="kobo.52.2">We’ll explore different sampling strategies and learn how to enrich and filter spans or customize metrics collection. </span><span class="koboSpan" id="kobo.52.3">Finally, we’ll introduce OpenTelemetry Collector – an agent that can take care of many telemetry </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">post-processing tasks.</span></span></p>
<p><a href="B19423_06.xhtml#_idTextAnchor098"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.54.1">Chapter 6</span></em></span></a><span class="koboSpan" id="kobo.55.1">, </span><em class="italic"><span class="koboSpan" id="kobo.56.1">Tracing Your Code</span></em><span class="koboSpan" id="kobo.57.1">, dives into tracing instrumentation with .NET tracing APIs or OpenTelemetry shim. </span><span class="koboSpan" id="kobo.57.2">Here, we’ll learn about the </span><strong class="source-inline"><span class="koboSpan" id="kobo.58.1">Activity</span></strong><span class="koboSpan" id="kobo.59.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.60.1">ActivitySource</span></strong><span class="koboSpan" id="kobo.61.1"> classes used to collect spans, show how to leverage ambient context propagation within the process, and record events and exceptions. </span><span class="koboSpan" id="kobo.61.2">We’ll also cover integration testing for your </span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">instrumentation code.</span></span></p>
<p><a href="B19423_07.xhtml#_idTextAnchor115"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.63.1">Chapter 7</span></em></span></a><span class="koboSpan" id="kobo.64.1">, </span><em class="italic"><span class="koboSpan" id="kobo.65.1">Adding Custom Metrics</span></em><span class="koboSpan" id="kobo.66.1">, delves into the modern .NET metrics API. </span><span class="koboSpan" id="kobo.66.2">You’ll learn about available instruments - counters, gauges, and histograms used to aggregate measurements in different ways and get hands-on experience implementing and using metrics to monitor system health or to investigate </span><span class="No-Break"><span class="koboSpan" id="kobo.67.1">performance issues.</span></span></p>
<p><a href="B19423_08.xhtml#_idTextAnchor131"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.68.1">Chapter 8</span></em></span></a><span class="koboSpan" id="kobo.69.1">, </span><em class="italic"><span class="koboSpan" id="kobo.70.1">Writing Structured and Correlated Logs</span></em><span class="koboSpan" id="kobo.71.1">, provides an overview of logging in .NET focusing on </span><strong class="source-inline"><span class="koboSpan" id="kobo.72.1">Microsoft.Extension.Logging</span></strong><span class="koboSpan" id="kobo.73.1">. </span><span class="koboSpan" id="kobo.73.2">We’ll learn to write structured and queryable logs efficiently and collect them with OpenTelemetry. </span><span class="koboSpan" id="kobo.73.3">We’ll also look into managing logging costs using </span><span class="No-Break"><span class="koboSpan" id="kobo.74.1">OpenTelemetry Collector.</span></span></p>
<p><a href="B19423_09.xhtml#_idTextAnchor148"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.75.1">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.76.1">, </span><em class="italic"><span class="koboSpan" id="kobo.77.1">Best Practices</span></em><span class="koboSpan" id="kobo.78.1">, provides guidance on choosing most suitable telemetry signals depending on application needs and scenarios, and shows how to control telemetry costs with minimal impact on observability. </span><span class="koboSpan" id="kobo.78.2">It also introduces OpenTelemetry semantic conventions – telemetry collection recipes for common patterns </span><span class="No-Break"><span class="koboSpan" id="kobo.79.1">and technologies.</span></span></p>
<p><a href="B19423_10.xhtml#_idTextAnchor161"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.80.1">Chapter 10</span></em></span></a><span class="koboSpan" id="kobo.81.1">, </span><em class="italic"><span class="koboSpan" id="kobo.82.1">Tracing Network Calls</span></em><span class="koboSpan" id="kobo.83.1">, explores network call instrumentation using gRPC as an example. </span><span class="koboSpan" id="kobo.83.2">We’ll learn how to instrument simple request-response calls following RPC semantic conventions and propagate context. </span><span class="koboSpan" id="kobo.83.3">We’ll also cover challenges and possible solutions when instrumenting </span><span class="No-Break"><span class="koboSpan" id="kobo.84.1">streaming calls.</span></span></p>
<p><a href="B19423_11.xhtml#_idTextAnchor174"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.85.1">Chapter 11</span></em></span></a><span class="koboSpan" id="kobo.86.1">, </span><em class="italic"><span class="koboSpan" id="kobo.87.1">Instrumenting Messaging Scenarios</span></em><span class="koboSpan" id="kobo.88.1">, explores instrumentation for asynchronous processing scenarios. </span><span class="koboSpan" id="kobo.88.2">We’ll learn how to trace messages end-to-end, instrument batching scenarios, and introduce messaging-specific metrics allowing to detect scaling and </span><span class="No-Break"><span class="koboSpan" id="kobo.89.1">performance issues.</span></span></p>
<p><a href="B19423_12.xhtml#_idTextAnchor192"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.90.1">Chapter 12</span></em></span></a><span class="koboSpan" id="kobo.91.1">, </span><em class="italic"><span class="koboSpan" id="kobo.92.1">Instrumenting Database Calls</span></em><span class="koboSpan" id="kobo.93.1">, explores database and cache instrumentation with tracing and metrics. </span><span class="koboSpan" id="kobo.93.2">We’ll also cover forwarding external metrics from a Redis instance into our observability backend and use the collected telemetry for performance analysis and caching </span><span class="No-Break"><span class="koboSpan" id="kobo.94.1">strategy optimization.</span></span></p>
<p><a href="B19423_13.xhtml#_idTextAnchor206"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.95.1">Chapter 13</span></em></span></a><span class="koboSpan" id="kobo.96.1">, </span><em class="italic"><span class="koboSpan" id="kobo.97.1">Driving Change</span></em><span class="koboSpan" id="kobo.98.1">, covers organizational and planning aspects related to observability improvements. </span><span class="koboSpan" id="kobo.98.2">We’ll discuss the cost of low observability and suggest several ways to measure them. </span><span class="koboSpan" id="kobo.98.3">We’ll come up with an onboarding plan, talk about common pitfalls, and see how to benefit from better observability in daily </span><span class="No-Break"><span class="koboSpan" id="kobo.99.1">development tasks.</span></span></p>
<p><a href="B19423_14.xhtml#_idTextAnchor220"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.100.1">Chapter 14</span></em></span></a><span class="koboSpan" id="kobo.101.1">, </span><em class="italic"><span class="koboSpan" id="kobo.102.1">Creating Your Own Conventions</span></em><span class="koboSpan" id="kobo.103.1">, provides suggestions on how to collect telemetry consistently across the system starting with a unified OpenTelemetry configuration. </span><span class="koboSpan" id="kobo.103.2">We’ll also learn to define custom semantic conventions and implement them in shared code, making it easy to </span><span class="No-Break"><span class="koboSpan" id="kobo.104.1">follow them.</span></span></p>
<p><a href="B19423_15.xhtml#_idTextAnchor233"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.105.1">Chapter 15</span></em></span></a><span class="koboSpan" id="kobo.106.1">, </span><em class="italic"><span class="koboSpan" id="kobo.107.1">Instrumenting Brownfield Applications</span></em><span class="koboSpan" id="kobo.108.1">, discusses challenges with instrumenting newer part of the system in presence of legacy services. </span><span class="koboSpan" id="kobo.108.2">We’ll suggest solutions that can minimize changes to legacy components and learn to leverage legacy correlation propagation formats, implement minimalistic pass-through context propagation, and forward telemetry from legacy services to the </span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">new backend.</span></span></p>
<h1 id="_idParaDest-9"><a id="_idTextAnchor008"/><span class="koboSpan" id="kobo.110.1">To get the most out of this book</span></h1>
<p><span class="koboSpan" id="kobo.111.1">The examples in this book were developed with .NET 7.0. </span><span class="koboSpan" id="kobo.111.2">Most of them are cross-platform and run in Docker Linux containers or with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.112.1">dotnet</span></strong><span class="koboSpan" id="kobo.113.1"> CLI tools. </span><span class="koboSpan" id="kobo.113.2">Examples were tested on Windows OS with OpenTelemetry version 1.4.0. </span><span class="koboSpan" id="kobo.113.3">They should work with future versions of .NET and OpenTelemetry libraries. </span><span class="koboSpan" id="kobo.113.4">We use pinned versions of OpenTelemetry Collector, Prometheus, Jaeger, and other external images in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.114.1">docker-compose</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.115.1"> files.</span></span></p>
<p><span class="koboSpan" id="kobo.116.1">In </span><a href="B19423_03.xhtml#_idTextAnchor052"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.117.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.118.1">, </span><em class="italic"><span class="koboSpan" id="kobo.119.1">The .NET Observability Ecosystem</span></em><span class="koboSpan" id="kobo.120.1">, we will experiment with AWS and Azure client libraries and serverless environments. </span><span class="koboSpan" id="kobo.120.2">AWS and/or Azure subscriptions are recommended, but not essential. </span><span class="koboSpan" id="kobo.120.3">We will stay within the free tier on AWS and within promotional credits amount available </span><span class="No-Break"><span class="koboSpan" id="kobo.121.1">on Azure.</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="bold"><span class="koboSpan" id="kobo.122.1">Software/hardware covered in </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.123.1">the book</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold"><span class="koboSpan" id="kobo.124.1">Operating </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.125.1">system requirements</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.126.1">.NET </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">SDK 7.0</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.128.1">Windows, macOS, </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">or Linux</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.130.1">OpenTelemetry for .NET </span><span class="No-Break"><span class="koboSpan" id="kobo.131.1">version 1.4.0</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.132.1">Windows, macOS, </span><span class="No-Break"><span class="koboSpan" id="kobo.133.1">or Linux</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.134.1">Docker and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.135.1">docker-compose</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.136.1"> tools</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.137.1">Windows, macOS, </span><span class="No-Break"><span class="koboSpan" id="kobo.138.1">or Linux</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.139.1">.NET Framework 4.6.2 (used in an example of a legacy system in </span><a href="B19423_15.xhtml#_idTextAnchor233"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.140.1">Chapter 15</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.141.1">)</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.142.1">Windows</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.143.1">PerfView tool (in </span><a href="B19423_04.xhtml#_idTextAnchor068"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.144.1">Chapter 4</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.145.1">)</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.146.1">Windows, cross-platform alternatives </span><span class="No-Break"><span class="koboSpan" id="kobo.147.1">are available</span></span></p>
</td>
</tr>
</tbody>
</table>
<p><span class="koboSpan" id="kobo.148.1">While OpenTelemetry guarantees API compatibility in future versions, the semantic conventions mentioned in this book are not stable. </span><span class="koboSpan" id="kobo.148.2">So spans, metrics, events, and attributes may be renamed or changed in a different way. </span><span class="koboSpan" id="kobo.148.3">Please refer to OpenTelemetry specification repo (</span><a href="https://github.com/open-telemetry/opentelemetry-specification"><span class="koboSpan" id="kobo.149.1">https://github.com/open-telemetry/opentelemetry-specification</span></a><span class="koboSpan" id="kobo.150.1">) to find what’s new in the semantic </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">conventions area.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.152.1">If you are using the digital version of this book, we advise you to type the code yourself or access the code from the book’s GitHub repository (a link is available in the next section). </span><span class="koboSpan" id="kobo.152.2">Doing so will help you avoid any potential errors related to the copying and pasting </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.153.1">of code.</span></strong></span></p>
<h1 id="_idParaDest-10"><a id="_idTextAnchor009"/><span class="koboSpan" id="kobo.154.1">Download the example code files</span></h1>
<p><span class="koboSpan" id="kobo.155.1">You can download the example code files for this book from GitHub at </span><a href="https://github.com/PacktPublishing/Modern-Distributed-Tracing-in-.NET"><span class="koboSpan" id="kobo.156.1">https://github.com/PacktPublishing/Modern-Distributed-Tracing-in-.NET</span></a><span class="koboSpan" id="kobo.157.1">. </span><span class="koboSpan" id="kobo.157.2">If there’s an update to the code, it will be updated in the </span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">GitHub repository.</span></span></p>
<p><span class="koboSpan" id="kobo.159.1">We also have other code bundles from our rich catalog of books and videos available at </span><a href="https://github.com/PacktPublishing/"><span class="koboSpan" id="kobo.160.1">https://github.com/PacktPublishing/</span></a><span class="koboSpan" id="kobo.161.1">. </span><span class="koboSpan" id="kobo.161.2">Check </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">them out!</span></span></p>
<h1 id="_idParaDest-11"><a id="_idTextAnchor010"/><span class="koboSpan" id="kobo.163.1">Code in Action</span></h1>
<p><span class="koboSpan" id="kobo.164.1">The Code in Action videos for this book can be viewed </span><span class="No-Break"><span class="koboSpan" id="kobo.165.1">at </span></span><a href="https://packt.link/O10rj"><span class="No-Break"><span class="koboSpan" id="kobo.166.1">https://packt.link/O10rj</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.167.1">.</span></span></p>
<h1 id="_idParaDest-12"><a id="_idTextAnchor011"/><span class="koboSpan" id="kobo.168.1">Download the color images</span></h1>
<p><span class="koboSpan" id="kobo.169.1">We also provide a PDF file that has color images of the screenshots and diagrams used in this book. </span><span class="koboSpan" id="kobo.169.2">You can download it </span><span class="No-Break"><span class="koboSpan" id="kobo.170.1">here: </span></span><a href="https://packt.link/BBBNm"><span class="No-Break"><span class="koboSpan" id="kobo.171.1">https://packt.link/BBBNm</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.172.1">.</span></span></p>
<h1 id="_idParaDest-13"><a id="_idTextAnchor012"/><span class="koboSpan" id="kobo.173.1">Conventions used</span></h1>
<p><span class="koboSpan" id="kobo.174.1">There are a number of text conventions used throughout </span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">this book.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.176.1">Code in text</span></strong><span class="koboSpan" id="kobo.177.1">: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. </span><span class="koboSpan" id="kobo.177.2">Here is an example: “Another option is to pass the </span><strong class="source-inline"><span class="koboSpan" id="kobo.178.1">traceparent</span></strong><span class="koboSpan" id="kobo.179.1"> value in W3C Trace Context format to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.180.1">StartActivity</span></strong><span class="koboSpan" id="kobo.181.1"> method as </span><span class="No-Break"><span class="koboSpan" id="kobo.182.1">a string.”</span></span></p>
<p><span class="koboSpan" id="kobo.183.1">A block of code is set </span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.185.1">
using var activity = Source.StartActivity("DoWork");
try
{
  await DoWorkImpl(workItemId);
}
catch
{
  activity?.SetStatus(ActivityStatusCode.Error);
}</span></pre>
<p><span class="koboSpan" id="kobo.186.1">When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set </span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">in bold:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.188.1">
using var provider = Sdk.CreateTracerProviderBuilder()
  .ConfigureResource(b =&gt; b.AddService("sample"))
</span><strong class="bold"><span class="koboSpan" id="kobo.189.1">  .AddSource("Worker")</span></strong><span class="koboSpan" id="kobo.190.1">
  .AddJaegerExporter()</span></pre>
<p><span class="koboSpan" id="kobo.191.1">Any command-line input or output is written </span><span class="No-Break"><span class="koboSpan" id="kobo.192.1">as follows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.193.1">
$ docker-compose up --build
$ dotnet run</span></pre>
<p><strong class="bold"><span class="koboSpan" id="kobo.194.1">Bold:</span></strong><span class="koboSpan" id="kobo.195.1"> Indicates a new term, an important word, or words that you see onscreen. </span><span class="koboSpan" id="kobo.195.2">For instance, words in menus or dialog boxes appear in </span><strong class="bold"><span class="koboSpan" id="kobo.196.1">bold</span></strong><span class="koboSpan" id="kobo.197.1">. </span><span class="koboSpan" id="kobo.197.2">Here is an example: “Let’s open the trace file with PerfView and then click on the </span><strong class="bold"><span class="koboSpan" id="kobo.198.1">Thread </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.199.1">Time</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.200.1"> option.”</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.201.1">Tips or important notes</span></p>
<p class="callout"><span class="koboSpan" id="kobo.202.1">Appear like this.</span></p>
<h1 id="_idParaDest-14"><a id="_idTextAnchor013"/><span class="koboSpan" id="kobo.203.1">Get in touch</span></h1>
<p><span class="koboSpan" id="kobo.204.1">Feedback from our readers is </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">always welcome.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.206.1">General feedback</span></strong><span class="koboSpan" id="kobo.207.1">: If you have questions about any aspect of this book, email us at </span><a href="mailto:customercare@packtpub.com"><span class="koboSpan" id="kobo.208.1">customercare@packtpub.com</span></a><span class="koboSpan" id="kobo.209.1"> and mention the book title in the subject of </span><span class="No-Break"><span class="koboSpan" id="kobo.210.1">your message.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.211.1">Errata</span></strong><span class="koboSpan" id="kobo.212.1">: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. </span><span class="koboSpan" id="kobo.212.2">If you have found a mistake in this book, we would be grateful if you would report this to us. </span><span class="koboSpan" id="kobo.212.3">Please visit </span><a href="http://www.packtpub.com/support/errata"><span class="koboSpan" id="kobo.213.1">www.packtpub.com/support/errata</span></a><span class="koboSpan" id="kobo.214.1"> and fill in </span><span class="No-Break"><span class="koboSpan" id="kobo.215.1">the form.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.216.1">Piracy</span></strong><span class="koboSpan" id="kobo.217.1">: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. </span><span class="koboSpan" id="kobo.217.2">Please contact us at </span><a href="mailto:copyright@packt.com"><span class="koboSpan" id="kobo.218.1">copyright@packt.com</span></a><span class="koboSpan" id="kobo.219.1"> with a link to </span><span class="No-Break"><span class="koboSpan" id="kobo.220.1">the material.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.221.1">If you are interested in becoming an author</span></strong><span class="koboSpan" id="kobo.222.1">: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please </span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">visit </span></span><a href="http://authors.packtpub.com"><span class="No-Break"><span class="koboSpan" id="kobo.224.1">authors.packtpub.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.225.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.226.1"> Share </span><span class="No-Break"><span class="koboSpan" id="kobo.227.1">Your Thoughts</span></span></p>
<p><span class="koboSpan" id="kobo.228.1">Once you’ve read </span><em class="italic"><span class="koboSpan" id="kobo.229.1">Modern Distributed Tracing in .NET</span></em><span class="koboSpan" id="kobo.230.1">, we’d love to hear your thoughts! </span><span class="koboSpan" id="kobo.230.2">Scan the QR code below to go straight to the Amazon review page for this book and share </span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">your feedback.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer003">
<span class="koboSpan" id="kobo.232.1"><img alt=" Share Your Thoughts" src="image/B19423_QR.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a href=""><span class="koboSpan" id="kobo.233.1">https://packt.link/r/1-837-63613-3</span></a></p>
<p><span class="koboSpan" id="kobo.234.1">Your review is important to us and the tech community and will help us make sure we’re delivering excellent </span><span class="No-Break"><span class="koboSpan" id="kobo.235.1">quality content.</span></span></p>
<h1 id="_idParaDest-15"><a id="_idTextAnchor014"/><span class="koboSpan" id="kobo.236.1">Download a free PDF copy of this book</span></h1>
<p><span class="koboSpan" id="kobo.237.1">Thanks for purchasing </span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">this book!</span></span></p>
<p><span class="koboSpan" id="kobo.239.1">Do you like to read on the go but are unable to carry your print </span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">books everywhere?</span></span></p>
<p><span class="koboSpan" id="kobo.241.1">Is your eBook purchase not compatible with the device of </span><span class="No-Break"><span class="koboSpan" id="kobo.242.1">your choice?</span></span></p>
<p><span class="koboSpan" id="kobo.243.1">Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at </span><span class="No-Break"><span class="koboSpan" id="kobo.244.1">no cost.</span></span></p>
<p><span class="koboSpan" id="kobo.245.1">Read anywhere, any place, on any device. </span><span class="koboSpan" id="kobo.245.2">Search, copy, and paste code from your favorite technical books directly into </span><span class="No-Break"><span class="koboSpan" id="kobo.246.1">your application.</span></span></p>
<p><span class="koboSpan" id="kobo.247.1">The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your </span><span class="No-Break"><span class="koboSpan" id="kobo.248.1">inbox daily</span></span></p>
<p><span class="koboSpan" id="kobo.249.1">Follow these simple steps to get </span><span class="No-Break"><span class="koboSpan" id="kobo.250.1">the benefits:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.251.1">Scan the QR code or visit the </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">link below</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer004">
<span class="koboSpan" id="kobo.253.1"><img alt="Download a free PDF copy of this book" src="image/B19423_QR_Free_PDF.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a href="https://packt.link/free-ebook/9781837636136"><span class="koboSpan" id="kobo.254.1">https://packt.link/free-ebook/9781837636136</span></a></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.255.1">Submit your proof </span><span class="No-Break"><span class="koboSpan" id="kobo.256.1">of purchase</span></span></li>
<li><span class="koboSpan" id="kobo.257.1">That’s it! </span><span class="koboSpan" id="kobo.257.2">We’ll send your free PDF and other benefits to your </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">email directly</span></span></li>
</ol>
</div>


<div class="Content" id="_idContainer006">
<h1 id="_idParaDest-16"><a id="_idTextAnchor015"/><span class="koboSpan" id="kobo.1.1">Part 1: Introducing Distributed Tracing</span></h1>
</div>
<div id="_idContainer007">
<p><span class="koboSpan" id="kobo.2.1">In this part, we’ll introduce the core concepts of distributed tracing and demonstrate how it makes running cloud applications easier. </span><span class="koboSpan" id="kobo.2.2">We’ll auto-instrument our first service and explore the .NET approach to observability, built </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">around OpenTelemetry.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">This part has the </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">following chapters:</span></span></p>
<ul>
<li><a href="B19423_01.xhtml#_idTextAnchor016"><em class="italic"><span class="koboSpan" id="kobo.6.1">Chapter 1</span></em></a><span class="koboSpan" id="kobo.7.1">, </span><em class="italic"><span class="koboSpan" id="kobo.8.1">Observability Needs of Modern Applications</span></em></li>
<li><a href="B19423_02.xhtml#_idTextAnchor038"><em class="italic"><span class="koboSpan" id="kobo.9.1">Chapter 2</span></em></a><span class="koboSpan" id="kobo.10.1">, </span><em class="italic"><span class="koboSpan" id="kobo.11.1">Native Monitoring in .NET</span></em></li>
<li><a href="B19423_03.xhtml#_idTextAnchor052"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 3</span></em></a><span class="koboSpan" id="kobo.13.1">, </span><em class="italic"><span class="koboSpan" id="kobo.14.1">The .NET Observability Ecosystem</span></em></li>
<li><a href="B19423_04.xhtml#_idTextAnchor068"><em class="italic"><span class="koboSpan" id="kobo.15.1">Chapter 4</span></em></a><span class="koboSpan" id="kobo.16.1">, </span><em class="italic"><span class="koboSpan" id="kobo.17.1">Low-Level Performance Analysis with Diagnostic Tools</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer008">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer009">
</div>
</div>
<div>
<div id="_idContainer010">
</div>
</div>
</body></html>