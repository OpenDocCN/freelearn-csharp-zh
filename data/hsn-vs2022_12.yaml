- en: 'Chapter 10: Publishing Projects'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 10 章：发布项目
- en: After finishing a **proof of concept** (**POC**) or a **minimum viable product**
    (**MVP**), (which means a demo or pilot project with the main functionalities
    implemented, as discussed in [*Chapter 8*](B17873_08_ePub.xhtml#_idTextAnchor100),
    *Web Tools and Hot Reload*), we need to deploy our changes to see how the project
    works in a real scenario and share the published project with our customers. Visual
    Studio has a set of tools to deploy our projects. We can choose an option to deploy
    the project in our local environment, but we can also use services in the cloud.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在完成一个 **概念验证**（**POC**）或 **最小可行产品**（**MVP**）（这意味着一个具有主要功能实现的演示或试点项目，如 [*第 8
    章*](B17873_08_ePub.xhtml#_idTextAnchor100)，*Web 工具和热重载* 中所述）后，我们需要将我们的更改部署到实际场景中，以查看项目的工作情况，并与我们的客户分享已发布的项目。Visual
    Studio 提供了一套部署我们项目的工具。我们可以选择在本地环境中部署项目的选项，但也可以使用云中的服务。
- en: In this chapter, you will learn how to deploy your project with just a few clicks
    and Visual Studio 2022\. These tools will help you to save time and reduce complexity
    when you need to deploy.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将学习如何通过几步点击即可使用 Visual Studio 2022 部署您的项目。这些工具将帮助您在需要部署时节省时间并降低复杂性。
- en: 'We will discuss and review the following topics, which are the options to publish
    projects with Visual Studio 2022:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将讨论和回顾以下主题，即使用 Visual Studio 2022 发布项目的选项：
- en: The options to publish a project
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发布项目的选项
- en: Publishing in a folder
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在文件夹中发布
- en: Publishing in **internet information services** (**IIS**)
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 **互联网信息服务**（**IIS**）中发布
- en: Publishing in Microsoft Azure
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Microsoft Azure 中发布
- en: Let's dive in and learn all about publishing projects.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入探讨，了解所有关于发布项目的内容。
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: To publish a project following the steps provided in this chapter, you must
    have previously installed Visual Studio 2022 with the web development workload,
    as shown in [*Chapter 1*](B17873_01_ePub.xhtml#_idTextAnchor013), *Getting Started
    with Visual Studio 2022*. It's important to have the SPA base project that you
    created in [*Chapter 4*](B17873_04_ePub.xhtml#_idTextAnchor052), *Creating Projects
    and Templates*.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 要按照本章提供的步骤发布项目，您必须之前已安装带有 Web 开发工作负载的 Visual Studio 2022，如 [*第 1 章*](B17873_01_ePub.xhtml#_idTextAnchor013)，*使用
    Visual Studio 2022 入门* 所示。拥有您在 [*第 4 章*](B17873_04_ePub.xhtml#_idTextAnchor052)，*创建项目和模板*
    中创建的 SPA 基础项目非常重要。
- en: For the *Publishing in Microsoft Azure* section, you will need to have an Azure
    account with credits to complete the deployment.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 *在 Microsoft Azure 中发布* 部分，您需要一个带有积分的 Azure 账户来完成部署。
- en: 'You can check out the changes made to the project at the following link: [https://github.com/PacktPublishing/Hands-On-Visual-Studio-2022/tree/main/Chapter10](https://github.com/PacktPublishing/Hands-On-Visual-Studio-2022/tree/main/Chapter10).'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在以下链接中查看对项目所做的更改：[https://github.com/PacktPublishing/Hands-On-Visual-Studio-2022/tree/main/Chapter10](https://github.com/PacktPublishing/Hands-On-Visual-Studio-2022/tree/main/Chapter10)。
- en: The options to publish a project
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 发布项目的选项
- en: Visual Studio has two ways to access the **Publish** option and then display
    the possibilities incorporated to deploy a project.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: Visual Studio 有两种方式来访问 **发布**选项，然后显示用于部署项目的集成可能性。
- en: 'In the menu, we can access this option by navigating to **Build** | **Publish
    [Project name]**. By default, the main project in the current solution is selected,
    as shown here:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在菜单中，我们可以通过导航到 **构建** | **发布 [项目名称]** 来访问此选项。默认情况下，当前解决方案中的主项目被选中，如下所示：
- en: '![Figure 10.1 – The Publish SPAProject option in the Build menu'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 10.1 – 构建菜单中的发布 SPAProject 选项'
- en: '](img/Figure_10.01_B17873.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_10.01_B17873.jpg](img/Figure_10.01_B17873.jpg)'
- en: Figure 10.1 – The Publish SPAProject option in the Build menu
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: Figure 10.1 – 构建菜单中的发布 SPAProject 选项
- en: 'Another possibility is to right-click on the project that we want to publish
    in the **Solution Explorer** tab (see *Figure 10.2*):'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种可能性是在 **解决方案资源管理器**选项卡中右键单击我们想要发布的项目（参见 *Figure 10.2*）：
- en: '![Figure 10.2 – The Publish… option on the menu after right-clicking'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 10.2 – 右键单击菜单后的发布…选项'
- en: '](img/Figure_10.02_B17873.jpg)'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_10.02_B17873.jpg](img/Figure_10.02_B17873.jpg)'
- en: Figure 10.2 – The Publish… option on the menu after right-clicking
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: Figure 10.2 – 右键单击菜单后的发布…选项
- en: 'Whatever the chosen option, Visual Studio will display a modal window to give
    you the deployment types supported for the main project in the solution or the
    project selected, as illustrated in the following screenshot:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 无论选择哪个选项，Visual Studio 都会显示一个模态窗口，显示解决方案中主项目或所选项目的支持部署类型，如下截图所示：
- en: '![Figure 10.3 – The options to publish a project in Visual Studio'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.3 – Visual Studio 中发布项目的选项'
- en: '](img/Figure_10.03_B17873.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.03_B17873.jpg)'
- en: Figure 10.3 – The options to publish a project in Visual Studio
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.3 – 在 Visual Studio 中发布项目的选项
- en: 'Let''s review these options one by one:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们逐一回顾这些选项：
- en: '**Azure**: The project will be deployed in Azure using a service, depending
    on the technology used.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure**: 项目将使用服务在 Azure 中部署，具体取决于所使用的技术。'
- en: '**Docker Container Registry**: This option helps us publish a Docker container,
    including our website.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Docker 容器注册表**: 此选项帮助我们发布包含网站的 Docker 容器。'
- en: '**Folder**: This option publishes the project in a folder chosen in the filesystem.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文件夹**: 此选项将项目发布到文件系统中选择的文件夹。'
- en: '**FTP/FTPS Server**: With this option, the files of the publication will be
    transferred to an FTP server.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**FTP/FTPS 服务器**: 使用此选项，出版物的文件将被传输到 FTP 服务器。'
- en: '**Web Server (IIS)**: Deploys the project in IIS, the default server in Windows.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Web 服务器 (IIS)**: 在 IIS 中部署项目，Windows 的默认服务器。'
- en: '**Import Profile**: Allows us to import another configuration to publish a
    project already created.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**导入配置文件**: 允许我们导入另一个配置来发布已创建的项目。'
- en: We will review some of these options in the following sections. We will convert
    the project with the **Azure**, **Folder**, and **Web Server (IIS)** options because
    **Docker Container Registry** is a little more complex to set up, and for FTP/FTPS
    server, we need to have an FTP server running, which is not very common in modern
    solutions.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的几节中，我们将回顾一些这些选项。我们将使用 **Azure**、**文件夹** 和 **Web 服务器 (IIS**) 选项来转换项目，因为
    **Docker 容器注册表** 设置起来稍微复杂一些，并且对于 FTP/FTPS 服务器，我们需要有一个运行的 FTP 服务器，这在现代解决方案中并不常见。
- en: At this point, you know how to access the **Publish** option that Visual Studio
    contains to deploy a web application. Let's now explore a few preferred options
    to publish a project in Visual Studio.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，您已经知道如何访问 Visual Studio 中的 **发布** 选项来部署 Web 应用程序。现在，让我们探索一些发布项目在 Visual
    Studio 中的首选选项。
- en: Publishing in a folder
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在文件夹中发布
- en: One of the most common options for publishing a project is to use our filesystem
    and save the site in a folder, including all the resources to use it in a local
    server, such as IIS, Apache, or NGINX. Visual Studio has an option to publish
    our projects with this approach easily.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 发布项目最常见的选择之一是使用我们的文件系统并将网站保存在文件夹中，包括所有用于在本地服务器（如 IIS、Apache 或 NGINX）中使用的资源。Visual
    Studio 有一个选项，可以轻松地使用这种方法发布我们的项目。
- en: 'You can use any option to navigate to the publishing functionality, which we
    reviewed in the *The options to publish a project* section, and then select **Folder**,
    followed by a click on **Next**:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用任何选项导航到我们之前在 *发布项目的选项* 部分中回顾的发布功能，然后选择 **文件夹**，接着点击 **下一步**：
- en: '![Figure 10.4 – The Folder option to publish a project'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.4 – 发布项目的文件夹选项'
- en: '](img/Figure_10.04_B17873.jpg)'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.04_B17873.jpg)'
- en: Figure 10.4 – The Folder option to publish a project
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.4 – 发布项目的文件夹选项
- en: 'In the next window, we can specify the folder where we want to save the published
    project using the **Browse…** option. We can use absolute and relative paths.
    Then, we can finish the configuration by clicking on **Finish**:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个窗口中，我们可以使用 **浏览…** 选项指定我们想要保存已发布项目的文件夹。我们可以使用绝对路径和相对路径。然后，我们可以通过点击 **完成**
    来完成配置：
- en: '![Figure 10.5 – The folder location to publish the project'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.5 – 发布项目的文件夹位置'
- en: '](img/Figure_10.05_B17873.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.05_B17873.jpg)'
- en: Figure 10.5 – The folder location to publish the project
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.5 – 发布项目的文件夹位置
- en: Important Note
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The folder selected must be empty. If you select a folder that contains files,
    this could create conflicts in the files. Visual Studio will try to replace the
    files with the same name using the files generated in the publishing process.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 选定的文件夹必须是空的。如果您选择一个包含文件的文件夹，这可能会在文件中创建冲突。Visual Studio 将尝试使用发布过程中生成的文件替换同名文件。
- en: 'After completing the publishing configuration, Visual Studio will generate
    a file with the `.pubxml` extension that contains the options we chose before
    in XML format. Now, we can use the **Publish** button to publish the project in
    the selected folder:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 完成发布配置后，Visual Studio 将生成一个以 `.pubxml` 扩展名结尾的文件，该文件包含我们之前选择的选项，并以 XML 格式存储。现在，我们可以使用
    **发布** 按钮将项目发布到所选文件夹：
- en: '![Figure 10.6 – The .pubxml file created with the configuration'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.6 – 使用配置创建的 .pubxml 文件'
- en: '](img/Figure_10.06_B17873.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.06_B17873.jpg)'
- en: Figure 10.6 – The .pubxml file created with the configuration
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.6 – 使用配置创建的 .pubxml 文件
- en: 'After clicking on **Publish**, Visual Studio will show a **Publishing to Folder…**
    message and a console log, where you can check all the steps performed during
    this process. In *Figure 10.7*, you can see the log in the **Output** panel:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**发布**后，Visual Studio 将显示**发布到文件夹…**消息和一个控制台日志，您可以在其中检查在此过程中执行的所有步骤。在*图 10.7*中，您可以在**输出**面板中看到日志：
- en: '![Figure 10.7 – Publishing in progress after clicking on Publish'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.7 – 点击发布后的发布进度'
- en: '](img/Figure_10.7_B17873.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.7_B17873.jpg)'
- en: Figure 10.7 – Publishing in progress after clicking on Publish
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.7 – 点击发布后的发布进度
- en: 'Finally, after waiting for some seconds, we will see a **Publish succeeded**
    confirmation message, which means the process was completed with no issues (see
    *Figure 10.8*):'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，等待几秒钟后，我们将看到**发布成功**确认消息，这意味着过程没有问题完成（见*图 10.8*）：
- en: '![Figure 10.8 – The publish success message and the publish folder'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.8 – 发布成功消息和发布文件夹'
- en: '](img/Figure_10.08_B17873.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.08_B17873.jpg)'
- en: Figure 10.8 – The publish success message and the publish folder
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.8 – 发布成功消息和发布文件夹
- en: In *Figure 10.8*, we can see that the folder on the right side contains all
    the files associated with the publication of our projects.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在*图 10.8*中，我们可以看到右侧的文件夹包含与我们项目发布相关的所有文件。
- en: 'We have some additional settings that we can change using the pencil icon:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有一些可以使用铅笔图标更改的附加设置：
- en: '![Figure 10.9 – The option to delete an existing file in the target location'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.9 – 在目标位置删除现有文件的选项'
- en: '](img/Figure_10.09_B17873.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.09_B17873.jpg)'
- en: Figure 10.9 – The option to delete an existing file in the target location
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.9 – 在目标位置删除现有文件的选项
- en: 'After clicking the **Delete existing files** option, we will see some additional
    settings that we can change according to our needs (see *Figure 10.10*):'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**删除现有文件**选项后，我们将看到一些我们可以根据需要更改的附加设置（见*图 10.10*）：
- en: '![Figure 10.10 – Additional settings to publish a project'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.10 – 发布项目时的附加设置'
- en: '](img/Figure_10.10_B17873.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.10_B17873.jpg)'
- en: Figure 10.10 – Additional settings to publish a project
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.10 – 发布项目时的附加设置
- en: 'Let''s review all the options in *Figure 10.10*:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回顾一下*图 10.10*中的所有选项：
- en: '**Configuration**: We can choose between **Debug** and **Release**. The latter
    is optimized for production.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**配置**：我们可以选择**调试**和**发布**。后者针对生产进行了优化。'
- en: '**Target Framework**: Normally, it''s the same version used in the project,
    but we can select a specific version to run our project.'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**目标框架**：通常，它与项目中使用的版本相同，但我们可以选择一个特定的版本来运行我们的项目。'
- en: '**Deployment Mode**: We can select **Framework-dependent**, which means the
    framework should be installed on the server, or **Self-contained**, which means
    the publication will include the framework and all the dependencies to run the
    project.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**部署模式**：我们可以选择**框架依赖**，这意味着框架应该安装在服务器上，或者**自包含**，这意味着发布将包括框架以及运行项目所需的所有依赖项。'
- en: '**Target Runtime**: This is the system architecture and operating system where
    the application will be published.'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**目标运行时**：这是应用程序将发布的系统架构和操作系统。'
- en: '**Delete all existing files prior to publish**: This allows Visual Studio to
    delete all the existing files in the folder selected for publishing the project.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在发布前删除所有现有文件**：这允许 Visual Studio 删除为发布项目所选文件夹中的所有现有文件。'
- en: Important Note
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要提示
- en: It's best practice to check the **Delete all existing files prior to publish**
    option to avoid conflict with existing files during the publishing process.
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 最好勾选**在发布前删除所有现有文件**选项，以避免在发布过程中与现有文件发生冲突。
- en: You now know how to publish in a folder in Visual Studio. You only need to select
    the folder where you prefer to deploy your application and then use the publish
    option.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在知道如何在 Visual Studio 中发布到文件夹。您只需选择您希望部署应用程序的文件夹，然后使用发布选项。
- en: Publishing in IIS
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 IIS 中发布
- en: IIS is the most popular server in the Windows ecosystem. It is included by default
    in all Windows Server versions, and there is an option to install it on Windows.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: IIS 是 Windows 生态系统中最受欢迎的服务器。它默认包含在所有 Windows Server 版本中，并且可以在 Windows 上安装它。
- en: 'To install IIS in Windows 8, 10, 11, or later, you can follow this guide in
    the *Step 1 – Install IIS and ASP.NET* section of the Microsoft document:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Windows 8、10、11 或更高版本中安装 IIS，您可以在 Microsoft 文档的*步骤 1 – 安装 IIS 和 ASP.NET*部分中遵循此指南：
- en: '[https://docs.microsoft.com/windows/msix/app-installer/web-install-iis](https://docs.microsoft.com/windows/msix/app-installer/web-install-iis)'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://docs.microsoft.com/windows/msix/app-installer/web-install-iis](https://docs.microsoft.com/windows/msix/app-installer/web-install-iis)'
- en: 'You can easily deploy a web application in IIS using Visual Studio. First,
    you need to open the **Publish** option that we reviewed in the *The options to
    publish a project* section and select **Web Server (IIS)** (see *Figure 10.11*):'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用Visual Studio轻松地在IIS中部署Web应用程序。首先，您需要打开我们在*发布项目选项*部分审查的**发布**选项，并选择**Web服务器（IIS）**（见*图10.11*）：
- en: '![Figure 10.11 – The Web server (IIS) option to publish a project'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '![图10.11 – 发布项目的Web服务器（IIS）选项'
- en: '](img/Figure_10.11_B17873.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.11_B17873.jpg)'
- en: Figure 10.11 – The Web server (IIS) option to publish a project
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.11 – 发布项目的Web服务器（IIS）选项
- en: Important Note
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: If you already have a `.pubxml` file in the publishing profiles folder, you
    need to delete it to create a new one with a new configuration.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 如果发布配置文件夹中已经存在`.pubxml`文件，您需要删除它以创建一个新的配置。
- en: 'After selecting **Web Server (IIS)**, you can click on **Next** and continue
    with the process. You will see two options to choose from (see *Figure 10.12*):'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在选择**Web服务器（IIS）**后，您可以点击**下一步**并继续该过程。您将看到两个选项可供选择（见*图10.12*）：
- en: '![Figure 10.12 – The options to deploy in IIS – Web Deploy and Web Deploy Package'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '![图10.12 – 在IIS中部署的选项 – Web Deploy和Web Deploy包'
- en: '](img/Figure_10.12_B17873.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.12_B17873.jpg)'
- en: Figure 10.12 – The options to deploy in IIS – Web Deploy and Web Deploy Package
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.12 – 在IIS中部署的选项 – Web Deploy和Web Deploy包
- en: 'We have two options for deploying in IIS:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在IIS中部署我们有两种选项：
- en: '**Web Deploy**: Deploy the folder, including all the files, in IIS.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Web Deploy**：在IIS中部署文件夹，包括所有文件。'
- en: '`.zip` file, including all the files within the publishing folder.'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.zip`文件，包括发布文件夹内的所有文件。'
- en: In this case, we will select **Web Deploy** and click on **Next**.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我们将选择**Web Deploy**并点击**下一步**。
- en: 'You need to fill in the **Server**, **Site name**, and **Destination URL**
    fields (see *Figure 10.13*):'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要填写**服务器**、**网站名称**和**目标URL**字段（见*图10.13*）：
- en: '![Figure 10.13 – The configuration to publish on a default web site in IIS'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '![图10.13 – 在IIS中发布到默认网站的配置'
- en: '](img/Figure_10.13_B17873.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.13_B17873.jpg)'
- en: Figure 10.13 – The configuration to publish on a default web site in IIS
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.13 – 在IIS中发布到默认网站的配置
- en: We will use the default website created in IIS. If you are already using this
    site with another application, you can set up another site name in IIS.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用在IIS中创建的默认网站。如果您已经使用此网站与其他应用程序一起使用，您可以在IIS中设置另一个网站名称。
- en: Using the **Validate Connection** button, you can check whether Visual Studio
    can create the site and complete the publication using the setup provided. You
    can use the **Finish** button to complete the setup.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 使用**验证连接**按钮，您可以检查Visual Studio是否可以使用提供的设置创建网站并完成发布。您可以使用**完成**按钮来完成设置。
- en: Important Note
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: You need to execute Visual Studio as admin to give access to IIS; otherwise,
    you will receive an error.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要以管理员身份执行Visual Studio以授予对IIS的访问权限；否则，您将收到错误。
- en: 'After completing all the steps, you will get a **Ready to publish** message
    and some options to edit the configuration. We are ready to use the **Publish**
    button:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 完成所有步骤后，您将收到**准备发布**的消息和一些编辑配置的选项。我们现在可以使用**发布**按钮：
- en: '![Figure 10.14 – The project ready to publish using IIS'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '![图10.14 – 使用IIS准备发布的项目'
- en: '](img/Figure_10.14_B17873.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.14_B17873.jpg)'
- en: Figure 10.14 – The project ready to publish using IIS
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.14 – 使用IIS准备发布的项目
- en: 'Automatically, Visual Studio will open in a new window in the browser, with
    the URL of the site that we set up in the configuration (see *Figure 10.13*) in
    the `http://localhost`:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 自动地，Visual Studio将在浏览器的新窗口中打开，显示我们在配置中设置的网站的URL（见*图10.13*）在`http://localhost`：
- en: '![Figure 10.15 – The project running in IIS after publishing it'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '![图10.15 – 发布后在IIS中运行的项目'
- en: '](img/Figure_10.15_B17873.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.15_B17873.jpg)'
- en: Figure 10.15 – The project running in IIS after publishing it
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.15 – 发布后在IIS中运行的项目
- en: You just learned how to deploy a web application in IIS using Visual Studio.
    Visual Studio minimizes the steps to complete the setup and sets all the files
    in a folder inside IIS. Now, let's review another way to deploy an application
    using Azure.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 您刚刚学习了如何使用Visual Studio在IIS中部署Web应用程序。Visual Studio简化了完成设置的步骤，并将所有文件设置在IIS内部的一个文件夹中。现在，让我们回顾另一种使用Azure部署应用程序的方法。
- en: Publishing in Microsoft Azure
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Microsoft Azure中发布
- en: '**Azure** is a cloud provider created by Microsoft, and it''s one of the most
    popular among start-ups and .NET developers. Since Azure and Visual Studio are
    supported by the same company and community, there is good integration between
    the technologies.'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '**Azure** 是由微软创建的云服务提供商，它是初创公司和 .NET 开发者中最受欢迎的之一。由于 Azure 和 Visual Studio 由同一家公司和社区支持，因此这些技术之间有很好的集成。'
- en: 'To deploy our SPAProject in Azure, we need to select a publish option using
    the method we reviewed in the *The options to publish a project* section, select
    **Azure**, and then on the next screen, select **Azure App Service (Windows)**:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Azure 中部署我们的 SPAProject，我们需要使用我们在“发布项目的选项”部分中审查的方法选择发布选项，选择 **Azure**，然后在下一屏幕上选择
    **Azure App Service (Windows)**：
- en: '![Figure 10.16 – The possibilities to publish in Azure'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.16 – 在 Azure 中发布的可能性'
- en: '](img/Figure_10.16_B17873.jpg)'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.16 – B17873.jpg](img/Figure_10.16_B17873.jpg)'
- en: Figure 10.16 – The possibilities to publish in Azure
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.16 – 在 Azure 中发布的可能性
- en: Remember to delete any `.pubxml` file in the project to create a new configuration.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 记得删除项目中的任何 `.pubxml` 文件以创建新的配置。
- en: Important Note
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: To complete the steps in this section and publish the SPAProject in Azure, you
    will need an Azure account with credits.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 要完成本节中的步骤并在 Azure 中发布 SPAProject，您需要一个带有积分的 Azure 账户。
- en: 'Visual Studio provides some options to deploy in Azure. Let''s review them:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: Visual Studio 提供了一些在 Azure 中部署的选项。让我们来回顾一下：
- en: '**Azure App Service (Windows)**: Publish the project in a **platform as a service**
    (**PaaS**) container using Windows as the operating system.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure App Service (Windows)**：使用 Windows 作为操作系统在 **平台即服务**（**PaaS**）容器中发布项目。'
- en: '**Azure App Service (Linux)**: Publish the project in a PaaS container using
    Linux as the operating system.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure App Service (Linux)**：使用 Linux 作为操作系统在 PaaS 容器中发布项目。'
- en: '**Azure App Service Container**: Run up a container in an Azure App using an
    Azure App Service container.'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure App Service 容器**：在 Azure App 中使用 Azure App Service 容器运行容器。'
- en: '**Azure Container Registry**: Publish the application as a Docker image.'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 容器注册库**：将应用程序作为 Docker 镜像发布。'
- en: '**Azure Virtual Machine**: Publish a folder in a virtual machine and then manually
    use IIS to run the app.'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 虚拟机**：在虚拟机中发布文件夹，然后手动使用 IIS 运行应用程序。'
- en: 'After clicking on **Next**, you will get a new window to perform authentication
    in Azure and connect with the services and resources in Azure for your account:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 点击 **下一步** 后，您将获得一个新窗口以在 Azure 中进行身份验证并连接到您的账户中的服务和资源：
- en: '![Figure 10.17 – The Azure account sign-in'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.17 – Azure 账户登录'
- en: '](img/Figure_10.17_B17873.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.17 – B17873.jpg](img/Figure_10.17_B17873.jpg)'
- en: Figure 10.17 – The Azure account sign-in
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.17 – Azure 账户登录
- en: 'In *Figure 10.17*, we see a new window, where we need to authenticate with
    Azure using the **Sign In…** button to continue with the setup and integrate Visual
    Studio with the resources in our Azure account. After performing the authentication,
    we can select the subscription and create a new web app instance using the green
    cross button (see *Figure 10.18*):'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *图 10.17* 中，我们看到一个新窗口，我们需要使用 **登录…** 按钮通过 Azure 进行身份验证以继续设置并将 Visual Studio
    与 Azure 账户中的资源集成。身份验证完成后，我们可以选择订阅并使用绿色十字按钮创建一个新的 Web 应用实例（见 *图 10.18*）：
- en: '![Figure 10.18 – The option to select a subscription and create a new app service'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.18 – 选择订阅并创建新的应用服务的选项'
- en: '](img/Figure_10.18_B17873.jpg)'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.18 – B17873.jpg](img/Figure_10.18_B17873.jpg)'
- en: Figure 10.18 – The option to select a subscription and create a new app service
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.18 – 选择订阅并创建新的应用服务的选项
- en: 'We need to select a hosting plan for our SPAProject:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要为我们的 SPAProject 选择托管计划：
- en: '![Figure 10.19 – The hosting plan for a new app service'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.19 – 新应用服务的托管计划'
- en: '](img/Figure_10.19_B17873.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 10.19 – B17873.jpg](img/Figure_10.19_B17873.jpg)'
- en: Figure 10.19 – The hosting plan for a new app service
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.19 – 新应用服务的托管计划
- en: In this case, we can use a free plan in Azure with limited time to run our web
    app. It's perfect for performing demos and trying this publishing functionality.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我们可以使用 Azure 中的免费计划（有限时间运行我们的 Web 应用）来运行我们的 Web 应用。这对于进行演示和尝试此发布功能非常完美。
- en: Important Note
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: 'To analyze and compare other plans in Azure, you can navigate to the following
    link: [https://azure.microsoft.com/pricing/details/app-service/windows/](https://azure.microsoft.com/pricing/details/app-service/windows/).'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 要分析和比较 Azure 中的其他计划，您可以导航到以下链接：[https://azure.microsoft.com/pricing/details/app-service/windows/](https://azure.microsoft.com/pricing/details/app-service/windows/)。
- en: 'After creating the hosting plan, we can finish the configuration by choosing
    a name and resource group for our project (see *Figure 10.20*):'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建托管计划后，我们可以通过为我们的项目选择一个名称和资源组来完成配置（见 *图10.20*）：
- en: '![Figure 10.20 – The app service configuration for our SAPProject'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '![图10.20 – SAPProject的应用服务配置'
- en: '](img/Figure_10.20_B17873.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.20_B17873.jpg)'
- en: Figure 10.20 – The app service configuration for our SAPProject
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.20 – SAPProject的应用服务配置
- en: 'In *Figure 10.21*, we can see a preview of the project created, and we can
    complete using the **Finish** button:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *图10.21* 中，我们可以看到创建的项目预览，并可以使用 **完成** 按钮完成操作：
- en: '![Figure 10.21 – The web app for the created SPAProject'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '![图10.21 – 创建的SPAProject的Web应用'
- en: '](img/Figure_10.21_B17873.jpg)'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.21_B17873.jpg)'
- en: Figure 10.21 – The web app for the created SPAProject
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.21 – 创建的SPAProject的Web应用
- en: 'Finally, in the last step, we have two options to complete the integration
    with Azure (see *Figure 10.22*):'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在最后一步，我们有两种选择来完成与Azure的集成（见 *图10.22*）：
- en: '![Figure 10.22 – The deployment options in Azure'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '![图10.22 – Azure中的部署选项'
- en: '](img/Figure_10.22_B17873.jpg)'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.22_B17873.jpg)'
- en: Figure 10.22 – The deployment options in Azure
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.22 – Azure中的部署选项
- en: 'Let''s review these options to choose:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回顾这些选项以进行选择：
- en: '`.pubxml` file with the configuration. We need to publish the project manually
    using the **Publish** button.'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.pubxml` 文件包含配置。我们需要使用 **发布** 按钮手动发布项目。'
- en: '`.yml` file that contains **continuous integration** (**CI**) and **continuous
    deployment** (**CD**) configurations to deploy the project after every change
    in code.'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.yml` 文件包含 **持续集成**（**CI**）和 **持续部署**（**CD**）配置，以便在代码更改后部署项目。'
- en: For this example, we will choose **Publish (generates pubxml file)** and click
    on **Finish** to complete the setup.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个示例，我们将选择 **发布（生成pubxml文件**）并点击 **完成** 以完成设置。
- en: 'As with *Figure 10.14,* we will see the `.pubxml` file created and the **Publish**
    button. Click on **Publish** to publish our project in Azure. After publishing
    the project, Visual Studio will open the site using the URL from Azure:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 与 *图10.14* 类似，我们将看到创建的 `.pubxml` 文件和 **发布** 按钮。点击 **发布** 以在Azure中发布我们的项目。项目发布后，Visual
    Studio将使用Azure的URL打开网站：
- en: '![Figure 10.23 – The SPAProject running using an app service in Azure'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '![图10.23 – 在Azure中使用应用服务运行的SPAProject'
- en: '](img/Figure_10.23_B17873.jpg)'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_10.23_B17873.jpg)'
- en: Figure 10.23 – The SPAProject running using an app service in Azure
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.23 – 在Azure中使用应用服务运行的SPAProject
- en: In *Figure 10.23*, we can see a new tab opened by Visual Studio that shows the
    URL of our project in Azure. This URL has the name of the project followed by
    the `azurewebsites.net` domain.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *图10.23* 中，我们可以看到Visual Studio打开的新标签页，显示了Azure中项目的URL。这个URL包含项目的名称，后面跟着 `azurewebsites.net`
    域名。
- en: 'You now know how to publish a project in Azure using only the UI in Visual
    Studio and some clicks. To see more details about the integration between Visual
    Studio and Azure, check out this link: [https://docs.microsoft.com/aspnet/core/tutorials/publish-to-azure-webapp-using-vs](https://docs.microsoft.com/aspnet/core/tutorials/publish-to-azure-webapp-using-vs).'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在知道如何仅使用Visual Studio的UI和一些点击来发布项目。要了解更多关于Visual Studio和Azure之间集成细节的信息，请查看此链接：[https://docs.microsoft.com/aspnet/core/tutorials/publish-to-azure-webapp-using-vs](https://docs.microsoft.com/aspnet/core/tutorials/publish-to-azure-webapp-using-vs)。
- en: After reviewing the main options to deploy an application using Visual Studio,
    we conclude this chapter.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在回顾了使用Visual Studio部署应用程序的主要选项后，我们本章到此结束。
- en: Summary
  id: totrans-166
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: After reading this chapter, you know how to navigate in Visual Studio to access
    the `.pubxml` file.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 在阅读完本章后，您将知道如何在Visual Studio中导航以访问 `.pubxml` 文件。
- en: In [*Chapter 11*](B17873_11_ePub.xhtml#_idTextAnchor130), *Implementing Git
    Integration*, we will review all the tools included in Visual Studio to connect
    with Git repositories and GitHub in particular. You will learn how to see the
    status of your changes using a visual interface and publish your project in a
    public or private repository easily.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [*第11章*](B17873_11_ePub.xhtml#_idTextAnchor130) 中，*实现Git集成*，我们将回顾Visual Studio中包含的所有用于连接Git仓库和GitHub的工具。您将学习如何使用可视化界面查看更改的状态，并轻松地将项目发布到公共或私有仓库。
