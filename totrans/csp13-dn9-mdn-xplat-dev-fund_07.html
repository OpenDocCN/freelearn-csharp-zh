<html><head></head><body><div id="book-content"><div id="sbo-rt-content"><div id="_idContainer433" class="Basic-Text-Frame">
    <h1 class="chapterNumber">7</h1>
    <h1 id="_idParaDest-434" class="chapterTitle">Packaging and Distributing .NET Types</h1>
    <p class="normal">This chapter is about how C# keywords are related to .NET types and the relationship between namespaces and assemblies. You’ll become familiar with how to package and publish your .NET apps and libraries for cross-platform use.</p>
    <p class="normal">There are several online sections for this chapter, and you will find links to them all at the end of the chapter.</p>
    <p class="normal">In an online-only section, <em class="italic">Decompiling .NET assemblies</em>, we cover how to decompile .NET assemblies for learning purposes and why you cannot prevent others from decompiling your code. In another online-only section, <em class="italic">Porting from .NET Framework to modern .NET</em>, you can learn how to use legacy .NET Framework libraries in .NET libraries and how it is possible to port legacy .NET Framework code bases to modern .NET. Finally, in a third online-only section, <em class="italic">Creating source generators</em>, you will learn how to create source generators that can dynamically add source code to your projects—a very powerful feature.</p>
    <p class="normal">This chapter covers the following topics:</p>
    <ul>
      <li class="bulletList">The road to .NET 9</li>
      <li class="bulletList">Understanding .NET components</li>
      <li class="bulletList">Publishing your applications for deployment</li>
      <li class="bulletList">Native ahead-of-time compilation</li>
      <li class="bulletList">Packaging your libraries for NuGet distribution</li>
      <li class="bulletList">Working with preview features</li>
    </ul>
    <h1 id="_idParaDest-435" class="heading-1">The road to .NET 9</h1>
    <p class="normal">This part of the book is about the<a id="_idIndexMarker988"/> functionality in the <strong class="keyWord">Base Class Library</strong> (<strong class="keyWord">BCL</strong>) APIs<a id="_idIndexMarker989"/> provided by .NET and how to reuse functionality across all the different .NET platforms, using .NET Standard.</p>
    <h2 id="_idParaDest-436" class="heading-2">.NET Standard-compatible frameworks</h2>
    <p class="normal">From .NET <a id="_idIndexMarker990"/>Core 2.0 onward, the support for a minimum of .NET Standard 2.0 is important because it provides many of the APIs that were missing from the first version of .NET Core. The 15 years’ worth of libraries and applications that .NET Framework developers had available to them that are relevant for modern development have now been migrated to .NET, and they can run cross-platform on macOS and Linux variants, as well as on Windows.</p>
    <p class="normal">.NET Standard 2.1 added about 3,000 new APIs. Some of those APIs need runtime changes that would break backward compatibility. To summarize:</p>
    <ul>
      <li class="bulletList">.NET Framework 4.8 only implements .NET Standard 2.0.</li>
      <li class="bulletList">.NET Core 3.0, Xamarin, Mono, and Unity implement .NET Standard 2.1.</li>
    </ul>
    <p class="normal">.NET 5 removed the need for .NET Standard because all project types can now target a single version of .NET. The same applies to .NET 6 and later. Each version from .NET 5 onward is backward compatible with previous versions. This means a class library that targets .NET 5 can be used by any .NET 5 or later projects of any type. Now that .NET versions have been released with full support for mobile and desktop apps built using .NET MAUI, the need for .NET Standard has been further reduced.</p>
    <p class="normal">Since you might still need to create class libraries for legacy .NET Framework projects or legacy Xamarin mobile apps, there is still a need to create .NET Standard 2.0 class libraries.</p>
    <div class="note">
      <p class="normal">Officially, you must also use a .NET Standard 2.0 class library to create a source generator even though it’s a rather modern feature of .NET.</p>
    </div>
    <p class="normal">To summarize the <a id="_idIndexMarker991"/>progress that .NET has made since the first version of .NET Core in 2016, I have compared the major .NET Core and modern .NET versions with the equivalent .NET Framework versions in the following list:</p>
    <ul>
      <li class="bulletList"><strong class="keyWord">.NET Core 1.x</strong>: Much <a id="_idIndexMarker992"/>smaller API compared to .NET Framework 4.6.1, which was the current version in March 2016.</li>
      <li class="bulletList"><strong class="keyWord">.NET Core 2.x</strong>: Reached <a id="_idIndexMarker993"/>API parity with .NET Framework 4.7.1 for modern APIs because they both implement .NET Standard 2.0.</li>
      <li class="bulletList"><strong class="keyWord">.NET Core 3.x</strong>: Larger <a id="_idIndexMarker994"/>API compared to .NET Framework for modern APIs because .NET Framework 4.8 does not implement .NET Standard 2.1.</li>
      <li class="bulletList"><strong class="keyWord">.NET 5</strong>: Even larger <a id="_idIndexMarker995"/>API compared to .NET Framework 4.8 for modern APIs, with much-improved performance.</li>
      <li class="bulletList"><strong class="keyWord">.NET 6</strong>: Continued<a id="_idIndexMarker996"/> improvements to performance and expanded APIs, with optional support for mobile apps in .NET MAUI, which was added in May 2022.</li>
      <li class="bulletList"><strong class="keyWord">.NET 7</strong>: Final <a id="_idIndexMarker997"/>unification with support for mobile apps, with .NET MAUI available as an optional workload. This book does not cover .NET MAUI development. Packt has multiple books that specialize in .NET MAUI, and you can find them by searching their website.</li>
      <li class="bulletList"><strong class="keyWord">.NET 8</strong>: Continued <a id="_idIndexMarker998"/>to improve the platform and should be used for all new development if you need long-term support.</li>
      <li class="bulletList"><strong class="keyWord">.NET 9</strong>: Continues<a id="_idIndexMarker999"/> to improve the platform, especially with performance, and should be used if you are comfortable with standard-term support. You can see the .NET 9 release notes for each preview at the <a id="_idIndexMarker1000"/>following link: <a href="https://github.com/dotnet/core/discussions/9234"><span class="url">https://github.com/dotnet/core/discussions/9234</span></a>.</li>
    </ul>
    <p class="normal">You can read more details in the GitHub repository at the following link: <a href="https://github.com/markjprice/cs13net9/blob/main/docs/ch07-features.md"><span class="url">https://github.com/markjprice/cs13net9/blob/main/docs/ch07-features.md</span></a>.</p>
    <div class="note">
      <p class="normal"><strong class="keyWord">More Information</strong>: A useful way to compare two versions of .NET is the APIs of the .NET website. For example, you can compare what’s new in .NET 9 compared to .NET 8 at the following <a id="_idIndexMarker1001"/>link: <a href="https://apisof.net/catalog?diff=net8.0-vs-net9.0"><span class="url">https://apisof.net/catalog?diff=net8.0-vs-net9.0</span></a>.</p>
    </div>
    <h2 id="_idParaDest-437" class="heading-2">Checking your .NET SDKs for updates</h2>
    <p class="normal">Microsoft introduced a<a id="_idIndexMarker1002"/> command with .NET 6 to check the versions of .NET SDKs and runtimes that you have installed, and it warns you if any need updating. For example, enter the following command:</p>
    <pre class="programlisting con"><code class="hljs-con">dotnet sdk check
</code></pre>
    <p class="normal">You will see results, including the status of available updates, as shown in the following partial output:</p>
    <pre class="programlisting con"><code class="hljs-con">.NET SDKs:
Version            Status
-------------------------------------------------------
8.0.400            Patch 8.0.401 is available.
9.0.100            Up to date.
</code></pre>
    <div class="packt_tip">
      <p class="normal"><strong class="keyWord">Good Practice</strong>: To maintain support from Microsoft, you must keep your .NET SDKs and .NET runtimes up to date with the latest patches.</p>
    </div>
    <p class="normal">A <a id="_idIndexMarker1003"/>related third-party<a id="_idIndexMarker1004"/> tool is <code class="inlineCode">dotnet-outdated</code>, which allows you to quickly report on any outdated NuGet packages in your .NET projects. You can learn more about it at the following<a id="_idIndexMarker1005"/> link: <a href="https://github.com/dotnet-outdated/dotnet-outdated"><span class="url">https://github.com/dotnet-outdated/dotnet-outdated</span></a>.</p>
    <h1 id="_idParaDest-438" class="heading-1">Understanding .NET components</h1>
    <p class="normal">.NET is made up of several pieces, which are shown in the following list:</p>
    <ul>
      <li class="bulletList"><strong class="keyWord">Language compilers</strong>: These turn your source code, written with languages such as <a id="_idIndexMarker1006"/>C#, F#, and Visual Basic, into <strong class="keyWord">intermediate language</strong> (<strong class="keyWord">IL</strong>) code<a id="_idIndexMarker1007"/> stored in <a id="_idIndexMarker1008"/>assemblies. With C# 6 and later, Microsoft switched to an open-source rewritten compiler known<a id="_idIndexMarker1009"/> as <strong class="keyWord">Roslyn</strong>, which is also used by Visual Basic.</li>
      <li class="bulletList"><strong class="keyWord">Common Language Runtime</strong> (<strong class="keyWord">CLR</strong>): This runtime loads assemblies, compiles the IL code stored in them into native code instructions for your computer’s <a id="_idIndexMarker1010"/>CPU, and<a id="_idIndexMarker1011"/> executes the code within an environment that manages resources, such as threads and memory.</li>
      <li class="bulletList"><strong class="keyWord">Base Class Libraries </strong>(<strong class="keyWord">BCL</strong>): These are prebuilt assemblies of types packaged and distributed using <a id="_idIndexMarker1012"/>NuGet to perform <a id="_idIndexMarker1013"/>common tasks when building applications. You can use them to quickly build anything you want, rather like combining LEGO™ pieces.</li>
    </ul>
    <h2 id="_idParaDest-439" class="heading-2">Assemblies, NuGet packages, and namespaces</h2>
    <p class="normal">An <strong class="keyWord">assembly</strong> is where <a id="_idIndexMarker1014"/>a type is stored in the filesystem. Assemblies are a mechanism for deploying code. For example, the <code class="inlineCode">System.Data.dll</code> assembly<a id="_idIndexMarker1015"/> contains types to manage data. To use types <a id="_idIndexMarker1016"/>in other assemblies, they must be referenced. Assemblies can be static<a id="_idIndexMarker1017"/> (pre-created) or dynamic (generated at runtime). Dynamic assemblies<a id="_idIndexMarker1018"/> are an advanced feature that we <a id="_idIndexMarker1019"/>will not cover in this book. Assemblies can be compiled into a single file as a DLL (class library) or an EXE (console app).</p>
    <p class="normal">Assemblies are distributed<a id="_idIndexMarker1020"/> as <strong class="keyWord">NuGet packages</strong>, which are files that are downloadable from public online feeds and can contain multiple assemblies and other<a id="_idIndexMarker1021"/> resources. You will also hear<a id="_idIndexMarker1022"/> about <strong class="keyWord">project SDKs</strong>, <strong class="keyWord">workloads</strong>, and <strong class="keyWord">platforms</strong>, which <a id="_idIndexMarker1023"/>are combinations of NuGet packages.</p>
    <p class="normal">Microsoft’s NuGet feed<a id="_idIndexMarker1024"/> is found here: <a href="https://www.nuget.org/"><span class="url">https://www.nuget.org/</span></a>.</p>
    <h2 id="_idParaDest-440" class="heading-2">What is a namespace?</h2>
    <p class="normal">A namespace is<a id="_idIndexMarker1025"/> the address of a type. Namespaces are a mechanism to uniquely identify a type by requiring a full address, rather than just a short name. In the real world, <em class="italic">Bob of 34 Sycamore Street</em> is different from<em class="italic"> Bob of 12 Willow Drive</em>.</p>
    <p class="normal">In .NET, the <code class="inlineCode">IActionFilter</code> interface of the <code class="inlineCode">System.Web.Mvc</code> namespace is different from the <code class="inlineCode">IActionFilter</code> interface of the <code class="inlineCode">System.Web.Http.Filters</code> namespace.</p>
    <h2 id="_idParaDest-441" class="heading-2">Dependent assemblies</h2>
    <p class="normal">If an <a id="_idIndexMarker1026"/>assembly is <a id="_idIndexMarker1027"/>compiled as a class library and provides types for other assemblies to use, then it has the file <a id="_idIndexMarker1028"/>extension <code class="inlineCode">.dll</code> (<strong class="keyWord">dynamic link library</strong>), and it cannot be executed standalone.</p>
    <p class="normal">Likewise, if an assembly is compiled as an application, then it has the file extension <code class="inlineCode">.exe</code> (<strong class="keyWord">executable</strong>) and can <a id="_idIndexMarker1029"/>be executed standalone. Before .NET Core 3, console apps were compiled to <code class="inlineCode">.dll</code> files and had to be executed by the <code class="inlineCode">dotnet run</code> command or a host executable.</p>
    <p class="normal">Any <a id="_idIndexMarker1030"/>assembly<a id="_idIndexMarker1031"/> can reference one or more class library assemblies as dependencies, but you cannot have circular references. So assembly <em class="italic">B</em> cannot reference assembly <em class="italic">A</em> if assembly <em class="italic">A</em> already references assembly <em class="italic">B</em>. The compiler will warn you if you attempt to add a dependency reference that would cause a circular reference. Circular references are often a warning sign of poor code design. If you are sure that you need a circular reference, then use an interface to solve it.</p>
    <h2 id="_idParaDest-442" class="heading-2">Microsoft .NET project SDKs</h2>
    <p class="normal">By default, console <a id="_idIndexMarker1032"/>applications have a dependency reference on the Microsoft .NET project SDK. This platform contains thousands of types in NuGet packages that almost all applications would need, such as the <code class="inlineCode">System.Int32</code> and <code class="inlineCode">System.String</code> types.</p>
    <p class="normal">When using .NET, you reference the dependency assemblies, NuGet packages, and platforms that your application needs in a project file.</p>
    <p class="normal">Let’s explore the relationship between assemblies and namespaces:</p>
    <ol>
      <li class="numberedList" value="1">Use your preferred code editor to create a new project, as defined in the following list:<ul>
          <li class="bulletList level-2">Project template: <strong class="screenText">Console App</strong> / <code class="inlineCode">console</code></li>
          <li class="bulletList level-2">Project file and folder: <code class="inlineCode">AssembliesAndNamespaces</code></li>
          <li class="bulletList level-2">Solution file and folder: <code class="inlineCode">Chapter07</code></li>
        </ul>
      </li>
      <li class="numberedList">Open <code class="inlineCode">AssembliesAndNamespaces.csproj</code>, and note that it is a typical project file for a .NET application, as shown in the following markup:
        <pre class="programlisting code-one"><code class="hljs-code">&lt;Project Sdk=<span class="hljs-string">"Microsoft.NET.Sdk"</span>&gt;
  &lt;PropertyGroup&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
    &lt;TargetFramework&gt;net9<span class="hljs-number">.0</span>&lt;/TargetFramework&gt;
    &lt;Nullable&gt;enable&lt;/Nullable&gt;
    &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;
  &lt;/PropertyGroup&gt;
&lt;/Project&gt;
</code></pre>
      </li>
      <li class="numberedList">After the <code class="inlineCode">&lt;PropertyGroup&gt;</code> section, add a new <code class="inlineCode">&lt;ItemGroup&gt;</code> section to statically import <code class="inlineCode">System.Console</code> for all C# files, using the implicit usings .NET<a id="_idIndexMarker1033"/> SDK feature, as shown in the following markup:
        <pre class="programlisting code-one"><code class="hljs-code">&lt;ItemGroup Label="To simplify use of Console methods."&gt;
  &lt;Using Include=<span class="hljs-string">"System.Console"</span> Static=<span class="hljs-string">"true"</span> /&gt;
&lt;/ItemGroup&gt;
</code></pre>
      </li>
    </ol>
    <h3 id="_idParaDest-443" class="heading-3">PropertyGroup element</h3>
    <p class="normal">The <code class="inlineCode">PropertyGroup</code> element is <a id="_idIndexMarker1034"/>used to define configuration properties that <a id="_idIndexMarker1035"/>control the build process. These properties can include anything, from the output path of the compiled binaries to versioning information. Each property within a <code class="inlineCode">PropertyGroup</code> is defined as a simple name-value pair, as shown in the following markup:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">OutputType</span><span class="hljs-tag">&gt;</span>Exe<span class="hljs-tag">&lt;/</span><span class="hljs-name">OutputType</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">TargetFramework</span><span class="hljs-tag">&gt;</span>net9.0<span class="hljs-tag">&lt;/</span><span class="hljs-name">TargetFramework</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">ImplicitUsings</span><span class="hljs-tag">&gt;</span>enable<span class="hljs-tag">&lt;/</span><span class="hljs-name">ImplicitUsings</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">Nullable</span><span class="hljs-tag">&gt;</span>enable<span class="hljs-tag">&lt;/</span><span class="hljs-name">Nullable</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">RootNamespace</span><span class="hljs-tag">&gt;</span>Packt.Shared<span class="hljs-tag">&lt;/</span><span class="hljs-name">RootNamespace</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">In the preceding example:</p>
    <ul>
      <li class="bulletList"><code class="inlineCode">OutputType</code> specifies the type of output, such as an executable (<code class="inlineCode">Exe</code>) or a library (<code class="inlineCode">Library</code>).</li>
      <li class="bulletList"><code class="inlineCode">TargetFramework</code> specifies the target framework for the project, for example, <code class="inlineCode">net9.0</code>.</li>
      <li class="bulletList"><code class="inlineCode">RootNamespace</code> sets <a id="_idIndexMarker1036"/>the default namespace for the <a id="_idIndexMarker1037"/>project.</li>
    </ul>
    <h3 id="_idParaDest-444" class="heading-3">ItemGroup element</h3>
    <p class="normal">The <code class="inlineCode">ItemGroup</code> element is <a id="_idIndexMarker1038"/>used to<a id="_idIndexMarker1039"/> define collections of items that are included in the build process. Items can be source files, references to other assemblies, package references, and other resources.</p>
    <p class="normal">You often want to define multiple <code class="inlineCode">ItemGroup</code> elements for different purposes. They will all be merged at build time. For example, you might have one <code class="inlineCode">ItemGroup</code> for all your project references and a separate <code class="inlineCode">ItemGroup</code> for all your package references.</p>
    <p class="normal">The <code class="inlineCode">ItemGroup</code> element can have a <code class="inlineCode">Label</code> attribute so that you can document what each section should be used for, as shown in the following markup:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">ItemGroup</span><span class="hljs-tag"> </span><span class="hljs-attr">Label</span><span class="hljs-tag">=</span><span class="hljs-string">"Additional files to include during build."</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">Compile</span><span class="hljs-tag"> </span><span class="hljs-attr">Include</span><span class="hljs-tag">=</span><span class="hljs-string">"Utils.cs"</span><span class="hljs-tag"> /&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">None</span><span class="hljs-tag"> </span><span class="hljs-attr">Include</span><span class="hljs-tag">=</span><span class="hljs-string">"readme.txt"</span><span class="hljs-tag"> /&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">ItemGroup</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">ItemGroup</span><span class="hljs-tag"> </span><span class="hljs-attr">Label</span><span class="hljs-tag">=</span><span class="hljs-string">"NuGet packages for this project."</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">PackageReference</span><span class="hljs-tag"> </span><span class="hljs-attr">Include</span><span class="hljs-tag">=</span><span class="hljs-string">"Newtonsoft.Json"</span><span class="hljs-tag"> </span><span class="hljs-attr">Version</span><span class="hljs-tag">=</span><span class="hljs-string">"13.0.3"</span><span class="hljs-tag"> /&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">ItemGroup</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <h3 id="_idParaDest-445" class="heading-3">Label and Condition attributes</h3>
    <p class="normal">Both <code class="inlineCode">PropertyGroup</code> and <code class="inlineCode">ItemGroup</code> can have a <code class="inlineCode">Label</code> attribute<a id="_idIndexMarker1040"/> that can<a id="_idIndexMarker1041"/> be used to document the purpose of the element, and<a id="_idIndexMarker1042"/> a <code class="inlineCode">Condition</code> attribute<a id="_idIndexMarker1043"/> that can be used to define when they apply. For example, a typical condition might be when building a <code class="inlineCode">DEBUG</code> release, as shown in the following markup:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag"> </span><span class="hljs-attr">Condition</span><span class="hljs-tag">=</span><span class="hljs-string">"'$(CompileConfig)' == 'DEBUG'"</span><span class="hljs-tag"> &gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">Optimization</span><span class="hljs-tag">&gt;</span>false<span class="hljs-tag">&lt;/</span><span class="hljs-name">Optimization</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">Obfuscate</span><span class="hljs-tag">&gt;</span>false<span class="hljs-tag">&lt;/</span><span class="hljs-name">Obfuscate</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">OutputPath</span><span class="hljs-tag">&gt;</span>$(OutputPath)\debug<span class="hljs-tag">&lt;/</span><span class="hljs-name">OutputPath</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <div class="packt_tip">
      <p class="normal"><strong class="keyWord">Warning!</strong> <code class="inlineCode">PropertyGroup</code> and <code class="inlineCode">ItemGroup</code> elements are both at the same level within a root <code class="inlineCode">Project</code> element. Do not nest <code class="inlineCode">ItemGroup</code> elements within <code class="inlineCode">PropertyGroup</code> elements, or vice versa!</p>
    </div>
    <h2 id="_idParaDest-446" class="heading-2">Namespaces and types in assemblies</h2>
    <p class="normal">Many <a id="_idIndexMarker1044"/>common .NET types are<a id="_idIndexMarker1045"/> in the <code class="inlineCode">System.Runtime.dll</code> assembly. There is not always a one-to-one mapping between assemblies and namespaces. A single assembly can contain many namespaces, and a namespace can be defined in many assemblies. You can see the relationship between some assemblies and the namespaces that they supply types for in <em class="italic">Table 7.1</em>:</p>
    <table id="table001-6" class="table-container">
      <tbody>
        <tr>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Assembly</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Example namespaces</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Example types</strong></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Runtime.dll</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System</code>, <code class="inlineCode">System.Collections</code>, <code class="inlineCode">System.Collections.Generic</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Int32</code>, <code class="inlineCode">String</code>, <code class="inlineCode">IEnumerable&lt;T&gt;</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Console.dll</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Console</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Threading.dll</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Threading</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Interlocked</code>, <code class="inlineCode">Monitor</code>, <code class="inlineCode">Mutex</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Xml.XDocument.dll</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Xml.Linq</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">XDocument</code>, <code class="inlineCode">XElement</code>, <code class="inlineCode">XNode</code></p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="packt_figref">Table 7.1: Examples of assemblies and their namespaces</p>
    <h2 id="_idParaDest-447" class="heading-2">NuGet packages</h2>
    <p class="normal">.NET is split into a set of <a id="_idIndexMarker1046"/>packages, distributed using a Microsoft-supported package management technology named NuGet. Each of these packages represents a single assembly of the same name. For example, the <code class="inlineCode">System.Collections</code> package contains the <code class="inlineCode">System.Collections.dll</code> assembly.</p>
    <p class="normal">The following are the benefits<a id="_idIndexMarker1047"/> of packages:</p>
    <ul>
      <li class="bulletList">Packages can be easily distributed on public feeds.</li>
      <li class="bulletList">Packages can be reused.</li>
      <li class="bulletList">Packages can ship on their own schedule.</li>
      <li class="bulletList">Packages can be tested independently of other packages.</li>
      <li class="bulletList">Packages can support different OSes and CPUs by including multiple versions of the same assembly, built for different OSes and CPUs.</li>
      <li class="bulletList">Packages can have dependencies specific to only one library.</li>
      <li class="bulletList">Apps are smaller because unreferenced packages aren’t part of the distribution. <em class="italic">Table 7.2</em> lists some of the more important packages and their important types:</li>
    </ul>
    <table id="table002-6" class="table-container">
      <tbody>
        <tr>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Package</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Important types</strong></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Runtime</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Object</code>, <code class="inlineCode">String</code>, <code class="inlineCode">Int32</code>, <code class="inlineCode">Array</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Collections</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">List&lt;T&gt;</code>, <code class="inlineCode">Dictionary&lt;TKey, TValue&gt;</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Net.Http</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">HttpClient</code>, <code class="inlineCode">HttpResponseMessage</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.IO.FileSystem</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">File</code>, <code class="inlineCode">Directory</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Reflection</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Assembly</code>, <code class="inlineCode">TypeInfo</code>, <code class="inlineCode">MethodInfo</code></p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="packt_figref">Table 7.2: Some important packages and their important types</p>
    <h2 id="_idParaDest-448" class="heading-2">Package sources</h2>
    <p class="normal">Package sources are locations where NuGet<a id="_idIndexMarker1048"/> can look for packages, such as <a href="https://www.nuget.org"><span class="url">https://www.nuget.org</span></a>, local directories, or other package repositories. The <code class="inlineCode">nuget.config</code> file allows you to specify, prioritize, and configure these sources, as well as other related settings.</p>
    <p class="normal">The <code class="inlineCode">nuget.config</code> file uses XML to define package sources, as shown in the following markup:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;?xml version=</span><span class="hljs-string">"</span><span class="hljs-string">1.0"</span><span class="hljs-meta"> encoding=</span><span class="hljs-string">"utf-8"</span><span class="hljs-meta">?&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">configuration</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">packageSources</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">add</span><span class="hljs-tag"> </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">"nuget.org"</span>
<span class="hljs-tag">         </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"https://api.nuget.org/v3/index.json"</span><span class="hljs-tag"> /&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">add</span><span class="hljs-tag"> </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">"MyCustomSource"</span>
<span class="hljs-tag">         </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"https://mycustomsource.com/nuget"</span><span class="hljs-tag"> /&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">packageSources</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">configuration</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">In the preceding configuration:</p>
    <ul>
      <li class="bulletList"><code class="inlineCode">&lt;packageSources&gt;</code>: This section lists all the sources NuGet will use to look for packages.</li>
      <li class="bulletList"><code class="inlineCode">&lt;add key="sourceName" value="sourceUrl"/&gt;</code>: Each <code class="inlineCode">&lt;add&gt;</code> element defines a package source.</li>
    </ul>
    <p class="normal">NuGet can use multiple <code class="inlineCode">nuget.config</code> files located in different directories. The settings are applied in a specific order, with the most specific settings taking precedence:</p>
    <ol>
      <li class="numberedList" value="1">Project directory: <code class="inlineCode">nuget.config</code> in the project directory.</li>
      <li class="numberedList">Solution directory: <code class="inlineCode">nuget.config</code> in the solution directory.</li>
      <li class="numberedList">User directory: <code class="inlineCode">nuget.config</code> in the user’s profile directory—for example, <code class="inlineCode">%AppData%\nuget\nuget.config</code> on Windows.</li>
      <li class="numberedList">Machine-wide configuration: <code class="inlineCode">nuget.config</code> in the machine-wide settings—for example, <code class="inlineCode">%ProgramFiles(x86)%\nuget\config</code> on Windows.</li>
    </ol>
    <p class="normal">NuGet merges these configurations, with settings from more specific files overriding those from less specific files.</p>
    <p class="normal">If no <code class="inlineCode">nuget.config</code> file is<a id="_idIndexMarker1049"/> found, NuGet uses the default package source, which is usually the official NuGet.org repository. This means that, by default, tools like Visual Studio, <code class="inlineCode">dotnet</code>, and <code class="inlineCode">nuget.exe</code> will look for packages on NuGet.org unless otherwise configured.</p>
    <h2 id="_idParaDest-449" class="heading-2">Understanding frameworks</h2>
    <p class="normal">There is a two-way relationship between<a id="_idIndexMarker1050"/> frameworks and packages. Packages define the APIs, while frameworks group packages. A framework without any packages<a id="_idIndexMarker1051"/> would not define any APIs.</p>
    <p class="normal">.NET packages each support a set of frameworks. For example, the <code class="inlineCode">System.IO.FileSystem</code> package version 4.3.0 supports the following frameworks:</p>
    <ul>
      <li class="bulletList">.NET Standard, version 1.3 or later</li>
      <li class="bulletList">.NET Framework, version 4.6 or later</li>
      <li class="bulletList">Six Mono and Xamarin platforms (for example, Xamarin.iOS)</li>
    </ul>
    <div class="packt_tip">
      <p class="normal"><strong class="keyWord">More Information</strong>: You can read the details at the following link: <a href="https://www.nuget.org/packages/System.IO.FileSystem/#supportedframeworks-body-tab"><span class="url">https://www.nuget.org/packages/System.IO.FileSystem/#supportedframeworks-body-tab</span></a>.</p>
    </div>
    <h2 id="_idParaDest-450" class="heading-2">Importing a namespace to use a type</h2>
    <p class="normal">Let’s explore how<a id="_idIndexMarker1052"/> namespaces are related to assemblies and types:</p>
    <ol>
      <li class="numberedList" value="1">In the <code class="inlineCode">AssembliesAndNamespaces</code> project, in <code class="inlineCode">Program.cs</code>, delete the existing statements, and then enter the following code:
        <pre class="programlisting code-one"><code class="hljs-code">XDocument doc = <span class="hljs-keyword">new</span>();
</code></pre>
      </li>
    </ol>
    <div class="note-one">
      <p class="normal">Recent versions of code editors will often automatically add a namespace import statement to fix the problem I want you to see. Please delete the <code class="inlineCode">using</code> statement that your code editor writes for you.</p>
    </div>
    <ol>
      <li class="numberedList" value="2">Build the project and note the compiler error message, as shown in the following output:
        <pre class="programlisting con-one"><code class="hljs-con">CS0246 The type or namespace name 'XDocument' could not be found (are you missing a using directive or an assembly reference?)
</code></pre>
      </li>
    </ol>
    <div class="note-one">
      <p class="normal">The <code class="inlineCode">XDocument</code> type is not recognized because we have not told the compiler what the namespace of the type is. Although this project already has a reference to the assembly that contains the type, we also need to either prefix the type name with its namespace (for example, <code class="inlineCode">System.Xml.Linq.XDocument</code>) or import the namespace.</p>
    </div>
    <ol>
      <li class="numberedList" value="3">Click inside the <code class="inlineCode">XDocument</code> class name. Your code editor displays a light bulb, showing that it recognizes the type and can automatically fix the problem for you.</li>
      <li class="numberedList">Click the light bulb, and select <code class="inlineCode">using System.Xml.Linq;</code> from the menu.</li>
    </ol>
    <p class="normal">This will <em class="italic">import the namespace</em> by adding a <code class="inlineCode">using</code> statement to the top of the file. Once a namespace is imported at the top of a code file, all the types within the namespace are available for use in that code file by just typing their name, without the type name needing to be fully qualified by prefixing it with its namespace.</p>
    <p class="normal">I like to add a comment after importing a namespace to remind me why I need to import it, as shown in the following code:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">using</span> System.Xml.Linq; <span class="hljs-comment">// To use XDocument.</span>
</code></pre>
    <p class="normal">If you do not comment on<a id="_idIndexMarker1053"/> your namespaces, you or other developers will not know why they are imported and might delete them, breaking the code. Conversely, they might never delete imported namespaces “just in case” they are needed, potentially cluttering the code unnecessarily. This is why most modern code editors have features to remove unused namespaces. This technique also subconsciously trains you, while you are learning, to remember which namespace you need to import to use a particular type or extension method.</p>
    <h2 id="_idParaDest-451" class="heading-2">Relating C# keywords to .NET types</h2>
    <p class="normal">One of the<a id="_idIndexMarker1054"/> common questions I get from new C#<a id="_idIndexMarker1055"/> programmers is, “What is the difference between <code class="inlineCode">string</code> with a lowercase s and <code class="inlineCode">String</code> with an uppercase S?”</p>
    <p class="normal">The short answer is easy: none. The long answer is that all C# keywords that represent types like <code class="inlineCode">string</code> or <code class="inlineCode">int</code> are aliases for a .NET type in a class library assembly.</p>
    <p class="normal">When you use the <code class="inlineCode">string</code> keyword, the compiler recognizes it as a <code class="inlineCode">System.String</code> type. When you use the <code class="inlineCode">int</code> type, the compiler recognizes it as a <code class="inlineCode">System.Int32</code> type.</p>
    <p class="normal">Let’s see this in action with some code:</p>
    <ol>
      <li class="numberedList" value="1">In <code class="inlineCode">Program.cs</code>, declare two variables to hold <code class="inlineCode">string</code> values, one using lowercase <code class="inlineCode">string</code> and one using uppercase <code class="inlineCode">String</code>, as shown in the following code:
        <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-built_in">string</span> s1 = <span class="hljs-string">"Hello"</span>;
String s2 = <span class="hljs-string">"</span><span class="hljs-string">World"</span>;
WriteLine(<span class="hljs-string">$"</span><span class="hljs-subst">{s1}</span><span class="hljs-string"> </span><span class="hljs-subst">{s2}</span><span class="hljs-string">"</span>);
</code></pre>
      </li>
      <li class="numberedList">Run the <code class="inlineCode">AssembliesAndNamespaces</code> project, and note that <code class="inlineCode">string</code> and <code class="inlineCode">String</code> both work and literally mean the same thing.</li>
      <li class="numberedList">In <code class="inlineCode">AssembliesAndNamespaces.csproj</code>, add an entry to prevent the <code class="inlineCode">System</code> namespace from being globally imported, as shown in the following markup:
        <pre class="programlisting code-one"><code class="hljs-code">&lt;ItemGroup&gt;
  &lt;Using Remove=<span class="hljs-string">"</span><span class="hljs-string">System"</span> /&gt;
&lt;/ItemGroup&gt;
</code></pre>
      </li>
      <li class="numberedList">In <code class="inlineCode">Program.cs</code>, and the <strong class="screenText">Error List</strong> or <strong class="screenText">PROBLEMS</strong> window, note the compiler<a id="_idIndexMarker1056"/> error message, as shown in the<a id="_idIndexMarker1057"/> following output:
        <pre class="programlisting con-one"><code class="hljs-con">CS0246 The type or namespace name 'String' could not be found (are you missing a using directive or an assembly reference?)
</code></pre>
      </li>
      <li class="numberedList">At the top of <code class="inlineCode">Program.cs</code>, import the <code class="inlineCode">System</code> namespace with a <code class="inlineCode">using</code> statement that will fix the error, as shown in the following code:
        <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword">using</span> System; <span class="hljs-comment">// To use String.</span>
</code></pre>
      </li>
    </ol>
    <div class="packt_tip">
      <p class="normal"><strong class="keyWord">Good Practice</strong>: When you have a choice, use the C# keyword instead of the actual type because the keywords do not need a namespace to be imported.</p>
    </div>
    <h2 id="_idParaDest-452" class="heading-2">Mapping C# aliases to .NET types</h2>
    <p class="normal"><em class="italic">Table 7.3</em> shows<a id="_idIndexMarker1058"/> the 18 C# type keywords along <a id="_idIndexMarker1059"/>with their actual .NET types:</p>
    <table id="table003-4" class="table-container">
      <tbody>
        <tr>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Keyword</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">.NET type</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord"> </strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Keyword</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">.NET type</strong></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">string</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.String</code></p>
          </td>
          <td class="table-cell"/>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">char</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Char</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">sbyte</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.SByte</code></p>
          </td>
          <td class="table-cell"/>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">byte</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Byte</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">short</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Int16</code></p>
          </td>
          <td class="table-cell"/>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">ushort</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.UInt16</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">int</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Int32</code></p>
          </td>
          <td class="table-cell"/>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">uint</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.UInt32</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">long</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Int64</code></p>
          </td>
          <td class="table-cell"/>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">ulong</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.UInt64</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">nint</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.IntPtr</code></p>
          </td>
          <td class="table-cell"/>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">nuint</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.UIntPtr</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">float</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Single</code></p>
          </td>
          <td class="table-cell"/>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">double</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Double</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">decimal</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Decimal</code></p>
          </td>
          <td class="table-cell"/>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">bool</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Boolean</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">object</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Object</code></p>
          </td>
          <td class="table-cell"/>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">dynamic</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">System.Dynamic.DynamicObject</code></p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="packt_figref">Table 7.3: C# type keywords and their actual .NET types</p>
    <p class="normal">Other .NET programming language compilers can do the same thing. For example, the Visual Basic .NET language has a type named <code class="inlineCode">Integer</code>, which is its alias for <code class="inlineCode">System.Int32</code>.</p>
    <h2 id="_idParaDest-453" class="heading-2">Understanding native-sized integers</h2>
    <p class="normal">C# 9 introduced <a id="_idIndexMarker1060"/>the <code class="inlineCode">nint</code> and <code class="inlineCode">nuint</code> keyword aliases for <strong class="keyWord">native-sized integers</strong>, meaning that the storage size for the integer value is platform-specific. They store a 32-bit integer in a 32-bit process and <code class="inlineCode">sizeof()</code> returns 4 bytes; they store a 64-bit integer in a 64-bit process and <code class="inlineCode">sizeof()</code> returns 8 bytes. The aliases represent pointers to the integer value in memory, which is why their .NET names are <code class="inlineCode">IntPtr</code> and <code class="inlineCode">UIntPtr</code>. The actual storage type will be either <code class="inlineCode">System.Int32</code> or <code class="inlineCode">System.Int64</code>, depending on the process.</p>
    <p class="normal">In a 64-bit process, the<a id="_idIndexMarker1061"/> following code:</p>
    <pre class="programlisting code"><code class="hljs-code">WriteLine(<span class="hljs-string">$"Environment.Is64BitProcess = </span><span class="hljs-subst">{Environment.Is64BitProcess}</span><span class="hljs-string">"</span>);
WriteLine(<span class="hljs-string">$"int.MaxValue = </span><span class="hljs-subst">{</span><span class="hljs-built_in">int</span><span class="hljs-subst">.MaxValue:N0}</span><span class="hljs-string">"</span>);
WriteLine(<span class="hljs-string">$"nint.MaxValue = </span><span class="hljs-subst">{</span><span class="hljs-built_in">nint</span><span class="hljs-subst">.MaxValue:N0}</span><span class="hljs-string">"</span>);
</code></pre>
    <p class="normal">produces this output:</p>
    <pre class="programlisting con"><code class="hljs-con">Environment.Is64BitProcess = True
int.MaxValue = 2,147,483,647
nint.MaxValue = 9,223,372,036,854,775,807
</code></pre>
    <h2 id="_idParaDest-454" class="heading-2">Revealing the location of a type</h2>
    <p class="normal">Most code editors provide <a id="_idIndexMarker1062"/>built-in documentation for .NET types. Let’s start by making sure that you have the expected experience with Visual Studio by checking that you have the relevant option set correctly, and then explore:</p>
    <ol>
      <li class="numberedList" value="1">If you are using Visual Studio, then make sure you have disabled the Source Link feature:<ol class="alphabeticList level-2" style="list-style-type: lower-alpha;">
          <li class="alphabeticList level-2" value="1">Navigate to <strong class="screenText">Tools</strong> | <strong class="screenText">Options</strong>.</li>
          <li class="alphabeticList level-2">In the search box, enter <code class="inlineCode">navigation to source</code>.</li>
          <li class="alphabeticList level-2">Select <strong class="screenText">Advanced</strong> in the <strong class="screenText">Text Editor</strong> | <strong class="screenText">C#</strong> section.</li>
          <li class="alphabeticList level-2">Clear the <strong class="screenText">Enable navigation to Source Link and Embedded sources</strong> checkbox, and then click <strong class="screenText">OK</strong>.</li>
        </ol>
      </li>
      <li class="numberedList">Right-click on <code class="inlineCode">XDocument</code> and choose <strong class="screenText">Go to Definition</strong>.</li>
      <li class="numberedList">Navigate to the top of the code file, expand the collapsed region, and note that the assembly filename is <code class="inlineCode">System.Xml.XDocument.dll</code> but the class is in the <code class="inlineCode">System.Xml.Linq</code> namespace, as shown in the following code and <em class="italic">Figure 7.1</em>:
        <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-meta">#</span><span class="hljs-keyword">region</span><span class="hljs-meta"> Assembly System.Runtime, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</span>
<span class="hljs-comment">// C:\Program Files\dotnet\packs\Microsoft.NETCore.App.Ref\9.0.0\ref\net9.0\System.Runtime.dll</span>
<span class="hljs-meta">#</span><span class="hljs-keyword">endregion</span>
</code></pre>
      </li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B22322_07_01.png" alt="" width="812" height="291"/></figure>
    <p class="packt_figref">Figure 7.1: Assembly and namespace that contains the XDocument type</p>
    <ol>
      <li class="numberedList" value="4">Close the <strong class="screenText">XDocument [from metadata]</strong> tab.</li>
      <li class="numberedList">Right-click inside <code class="inlineCode">string</code> or <code class="inlineCode">String</code> and choose <strong class="screenText">Go to Definition</strong>.</li>
      <li class="numberedList">Navigate to the top of the code file, expand the collapsed region, and note that the <a id="_idIndexMarker1063"/>assembly filename is <code class="inlineCode">System.Runtime.dll</code> but the class is in the <code class="inlineCode">System</code> namespace.</li>
    </ol>
    <p class="normal">Your code editor is technically lying to you. If you remember when we wrote code in <em class="chapterRef">Chapter 2</em>, <em class="italic">Speaking C#</em>, when we revealed the extent of the C# vocabulary, we discovered that the <code class="inlineCode">System.Runtime.dll</code> assembly contains zero types.</p>
    <p class="normal">What the <code class="inlineCode">System.Runtime.dll</code> assembly does contain are type-forwarders. These are special types that appear to exist in an assembly but are implemented elsewhere. In this case, they are implemented deep inside the .NET runtime using highly optimized code.</p>
    <p class="normal">You might want to use a type-forwarder if you refactor a type to move it from its original assembly to a different one. Without defining a type-forwarder, any projects that reference the original assembly will not find the type in it, and a runtime exception will be thrown. You can read more about this contrived example at the following link: <a href="https://learn.microsoft.com/en-us/dotnet/standard/assembly/type-forwarding"><span class="url">https://learn.microsoft.com/en-us/dotnet/standard/assembly/type-forwarding</span></a>.</p>
    <h2 id="_idParaDest-455" class="heading-2">Sharing code with legacy platforms using .NET Standard</h2>
    <p class="normal">Before .NET Standard, there were <strong class="keyWord">Portable Class Libraries</strong> (<strong class="keyWord">PCLs</strong>). With PCLs, you could create a library of code and explicitly<a id="_idIndexMarker1064"/> specify which <a id="_idIndexMarker1065"/>platforms you want the library to support, such as Xamarin, Silverlight, and Windows 8. Your library could then use the intersection of APIs that are supported by the specified platforms.</p>
    <p class="normal">Microsoft realized that this was unsustainable, so they created .NET Standard—a single API that all future .NET platforms would support. There are older versions of .NET Standard, but .NET Standard 2.0 was an attempt to unify all important recent .NET platforms. .NET Standard 2.1 was released in late 2019, but only .NET Core 3.0 and that year’s version of Xamarin support its new features. For the rest of this book, I will use the term .NET Standard to mean .NET Standard 2.0.</p>
    <p class="normal">.NET Standard is like HTML5 in that they are both standards that a platform should support. Just as Google’s Chrome browser and Microsoft’s Edge browser implement the HTML5 standard, .NET Core, .NET Framework, and Xamarin all implement .NET Standard. If you want to create a library of types that will work across variants of legacy .NET, you can do so most easily with .NET Standard.</p>
    <div class="packt_tip">
      <p class="normal"><strong class="keyWord">Good Practice</strong>: Since many of the API additions in .NET Standard 2.1 required runtime changes, and .NET Framework is Microsoft’s legacy platform, which needs to remain as unchanged as possible, .NET Framework 4.8 remained on .NET Standard 2.0 rather than implementing .NET Standard 2.1. If you need to support .NET Framework customers, then you should create class libraries on .NET Standard 2.0, even though it is not the latest and does not support all the recent language and BCL new features.</p>
    </div>
    <p class="normal">Your choice of <a id="_idIndexMarker1066"/>which .NET Standard version to target comes down to a balance between maximizing platform support and available functionality. An older version supports more platforms but has a smaller set of APIs. A newer version supports fewer platforms but has a larger set of APIs. Generally, you should choose the lowest version that supports all the APIs that you need.</p>
    <h2 id="_idParaDest-456" class="heading-2">Understanding defaults for class libraries with different SDKs</h2>
    <p class="normal">When <a id="_idIndexMarker1067"/>using the <code class="inlineCode">dotnet</code> SDK tool to create a class library, it might be useful to know which target framework will be used by default, as shown in <em class="italic">Table 7.4</em>:</p>
    <table id="table004-4" class="table-container">
      <tbody>
        <tr>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">SDK</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Default target framework for new class libraries</strong></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal">.NET Core 3.1</p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">netstandard2.0</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal">.NET 6</p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">net6.0</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal">.NET 7</p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">net7.0</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal">.NET 8</p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">net8.0</code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal">.NET 9</p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">net9.0</code></p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="packt_figref">Table 7.4: .NET SDKs and their default target framework for new class libraries</p>
    <p class="normal">Of course, just because a class library targets a specific version of .NET by default, it does not mean that you cannot change it after creating a class library project using the default template.</p>
    <p class="normal">You can manually set <a id="_idIndexMarker1068"/>the target framework to a value that supports the projects that need to reference that library, as shown in <em class="italic">Table 7.5</em>:</p>
    <table id="table005-3" class="table-container">
      <tbody>
        <tr>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Class library target framework</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Can be used by projects that target the following</strong></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">netstandard2.0</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">.NET Framework 4.6.1 or later, .NET Core 2 or later, .NET 5 or later, Mono 5.4 or later, Xamarin.Android 8 or later, and Xamarin.iOS 10.14 or later</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">netstandard2.1</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">.NET Core 3 or later, .NET 5 or later, Mono 6.4 or later, Xamarin.Android 10 or later, and Xamarin.iOS 12.16 or later</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">net6.0</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">.NET 6 or later</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">net7.0</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">.NET 7 or later</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">net8.0</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">.NET 8 or later</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">net9.0</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">.NET 9 or later</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="packt_figref">Table 7.5: Class library target frameworks and the projects that can use them</p>
    <div class="packt_tip">
      <p class="normal"><strong class="keyWord">Good Practice</strong>: Always check the target framework of a class library, and then manually change it to something more appropriate if necessary. Make a conscious decision about what it should be rather than accepting the default.</p>
    </div>
    <h2 id="_idParaDest-457" class="heading-2">Creating a .NET Standard class library</h2>
    <p class="normal">We will create a class<a id="_idIndexMarker1069"/> library using .NET Standard 2.0 so that it can be used across all important .NET legacy platforms and cross-platform on Windows, macOS, and Linux OSes, while also having access to a wide set of .NET APIs:</p>
    <ol>
      <li class="numberedList" value="1">Use your preferred code editor to add a new <strong class="screenText">Class Library</strong> / <code class="inlineCode">classlib</code> project, named <code class="inlineCode">SharedLibrary</code>, that targets .NET Standard 2.0 for the <code class="inlineCode">Chapter07</code> solution:<ul>
          <li class="bulletList level-2">If you use Visual Studio, when prompted for the <strong class="screenText">Target Framework</strong>, select <strong class="screenText">.NET Standard 2.0</strong>, and then configure the startup project for the solution to the current selection.</li>
          <li class="bulletList level-2">If you use VS Code, include a switch to target .NET Standard 2.0, as shown in the following command:
            <pre class="programlisting con"><code class="hljs-con">dotnet new classlib -f netstandard2.0
</code></pre>
          </li>
        </ul>
      </li>
    </ol>
    <div class="packt_tip-one">
      <p class="normal"><strong class="keyWord">Good Practice</strong>: If you need to create types that use new features in .NET 9, as well as types that only use .NET Standard 2.0 features, then you can create two separate class libraries: one targeting .NET Standard 2.0 and one targeting .NET 0.</p>
    </div>
    <ol>
      <li class="numberedList" value="2">Build the <code class="inlineCode">SharedLibrary</code> project.</li>
    </ol>
    <p class="normal">An alternative to<a id="_idIndexMarker1070"/> manually creating two class libraries is to create one that supports <strong class="keyWord">multi-targeting</strong>. If you would like me to add a section about multi-targeting to the next edition, please let me know. You can read about multi-targeting <a id="_idIndexMarker1071"/>here: <a href="https://learn.microsoft.com/en-us/dotnet/standard/library-guidance/cross-platform-targeting#multi-targeting"><span class="url">https://learn.microsoft.com/en-us/dotnet/standard/library-guidance/cross-platform-targeting#multi-targeting</span></a>.</p>
    <h2 id="_idParaDest-458" class="heading-2">Controlling the .NET SDK</h2>
    <p class="normal">By default, executing <code class="inlineCode">dotnet</code> commands uses the highest version of the .NET SDK installed. There may be <a id="_idIndexMarker1072"/>times when you want to control which SDK is used.</p>
    <p class="normal">For example, once .NET 10 becomes available in preview, starting in February 2025, or the final version becomes available in November 2025, you might install it. But you would probably want your experience to match the book steps, which use the .NET 9 SDK. But once you install a .NET 10 SDK, it will be used by default.</p>
    <p class="normal">You can control the .NET SDK used by default by using a <code class="inlineCode">global.json</code> file, which contains the version to use. The <code class="inlineCode">dotnet</code> command searches the current folder and then each ancestor folder in turn for a <code class="inlineCode">global.json</code> file, seeing if it should use a different .NET SDK version.</p>
    <p class="normal">You do not need to complete the following steps, but if you want to try and do not already have .NET 8 SDK installed, then you can install it from the following link:</p>
    <p class="normal"><a href="https://dotnet.microsoft.com/download/dotnet/8.0"><span class="url">https://dotnet.microsoft.com/download/dotnet/8.0</span></a></p>
    <ol>
      <li class="numberedList" value="1">Create a subdirectory/folder in the <code class="inlineCode">Chapter07</code> folder named <code class="inlineCode">ControlSDK</code>.</li>
      <li class="numberedList">On Windows, start <strong class="screenText">Command Prompt</strong> or <strong class="screenText">Windows Terminal</strong>. On macOS, start <strong class="screenText">Terminal</strong>. If you are using VS Code, then you can use the integrated terminal.</li>
      <li class="numberedList">In the <code class="inlineCode">ControlSDK</code> folder, at the command prompt or terminal, enter a command to list the installed .NET SDKs, as shown in the following command:
        <pre class="programlisting con-one"><code class="hljs-con">dotnet --list-sdks
</code></pre>
      </li>
      <li class="numberedList">Note the results and the version number of the latest .NET 8 SDK installed, as shown highlighted in the following output:
        <pre class="programlisting con-one"><code class="hljs-con"><span class="code-highlight"><strong class="hljs-con-slc">8.0.400</strong></span> [C:\Program Files\dotnet\sdk]
<span class="code-highlight"><strong class="hljs-con-slc">9.0.100 </strong></span>[C:\Program Files\dotnet\sdk]
</code></pre>
      </li>
      <li class="numberedList">Create a <code class="inlineCode">global.json</code> file that forces the use of the latest .NET 8 SDK that you have installed (which might be later than mine), as shown in the following <a id="_idIndexMarker1073"/>command:
        <pre class="programlisting con-one"><code class="hljs-con">dotnet new globaljson --sdk-version 8.0.400
</code></pre>
      </li>
      <li class="numberedList">Note the result, as shown in the following output:
        <pre class="programlisting con-one"><code class="hljs-con">The template "global.json file" was created successfully.
</code></pre>
      </li>
      <li class="numberedList">Use your preferred code editor to open the <code class="inlineCode">global.json</code> file and review its contents, as shown in the following markup:
        <pre class="programlisting code-one"><code class="hljs-code">{
  <span class="hljs-string">"sdk"</span>: {
    <span class="hljs-string">"version"</span>: <span class="hljs-string">"8.0.400"</span>
  }
}
</code></pre>
      </li>
    </ol>
    <div class="note-one">
      <p class="normal">For example, to open it with VS Code, enter the command <code class="inlineCode">code global.json</code>.</p>
    </div>
    <ol>
      <li class="numberedList" value="8">In the <code class="inlineCode">ControlSDK</code> folder, at the command prompt or terminal, enter a command to create a class library project, as shown in the following command:
        <pre class="programlisting con-one"><code class="hljs-con">dotnet new classlib
</code></pre>
      </li>
      <li class="numberedList">If you do not have the .NET 8 SDK installed, then you will see an error, as shown in the following output:
        <pre class="programlisting con-one"><code class="hljs-con">Could not execute because the application was not found or a compatible .NET SDK is not installed.
</code></pre>
      </li>
      <li class="numberedList">If you do <a id="_idIndexMarker1074"/>have the .NET 8 SDK installed, then a class library project will be created that targets .NET 8 by default, as shown highlighted in the following markup:
        <pre class="programlisting code-one"><code class="hljs-code">&lt;Project Sdk=<span class="hljs-string">"Microsoft.NET.Sdk"</span>&gt;
  &lt;PropertyGroup&gt;
    <span class="code-highlight"><strong class="hljs-slc">&lt;TargetFramework&gt;net8</strong><strong class="hljs-number-slc">.0</strong><strong class="hljs-slc">&lt;/TargetFramework&gt;</strong></span>
    &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;
    &lt;Nullable&gt;enable&lt;/Nullable&gt;
  &lt;/PropertyGroup&gt;
&lt;/Project&gt;
</code></pre>
      </li>
    </ol>
    <h2 id="_idParaDest-459" class="heading-2">Mixing SDKs and framework targets</h2>
    <p class="normal">Many organizations decide to<a id="_idIndexMarker1075"/> target a long-term support version of .NET to get up to three years of support from Microsoft. Doing this does not mean you lose the benefits of improvements to the C# language during the lifetime of the .NET runtime that you need to target.</p>
    <p class="normal">You can easily continue to target the .NET 9 runtime while installing and using future C# compilers, as shown in <em class="italic">Figure 7.2</em> and illustrated in the following list:</p>
    <ol>
      <li class="numberedList" value="1"><strong class="keyWord">November 2024</strong>: Install .NET SDK 9.0.100, and use it to build projects that target .NET 9 and use the C# 13 compiler by default. Every month, update to .NET 9 SDK patches on the development computer and update to .NET 9 runtime patches on any deployment computers.</li>
      <li class="numberedList"><strong class="keyWord">February 2025</strong>: Optionally, install .NET SDK 10 Preview 1 to explore the new C# 14 language and .NET 10 library features. Note that you won’t be able to use new library features while targeting .NET 9. Previews are released monthly between February and October each year. Read the monthly announcements to find out about the new features in that preview at the following link: <a href="https://github.com/dotnet/Announcements/issues"><span class="url">https://github.com/dotnet/Announcements/issues</span></a>.</li>
      <li class="numberedList"><strong class="keyWord">November 2025</strong>: Install .NET SDK 10.0.100, and use it to build projects that continue to target .NET 9 and use the C# 14 compiler for its new features. You will use a fully supported SDK and fully supported runtime.</li>
      <li class="numberedList"><strong class="keyWord">February 2026</strong>: Optionally, install .NET 11 previews to explore new C# 15 language and .NET 11 library features. Start planning for any new library and ASP.NET Core features in .NET 10 and .NET 11 that can be applied to your .NET 9 projects when you are ready to migrate.</li>
      <li class="numberedList"><strong class="keyWord">November 2026</strong>: Install .NET 11.0.100 SDK, and use it to build projects that<a id="_idIndexMarker1076"/> target .NET 10 and use the C# 15 compiler.</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B22322_07_02.png" alt="" width="812" height="445"/></figure>
    <p class="packt_figref">Figure 7.2: Targeting .NET 8 for long-term support while using the latest C# compilers</p>
    <p class="normal">When deciding to install a .NET SDK, remember that the latest is used by default to build any .NET projects. Once you’ve installed a .NET 9 SDK preview, it will be used by default for all projects, unless you force the use of an older, fully supported SDK version like 8.0.100 or a later patch.</p>
    <h1 id="_idParaDest-460" class="heading-1">Publishing your code for deployment</h1>
    <p class="normal">If you <a id="_idIndexMarker1077"/>write a novel and you want other people to<a id="_idIndexMarker1078"/> read it, you must publish it.</p>
    <p class="normal">Most developers write code for other developers to use in their own projects, or for users to run as an app. To do so, you must publish your code as packaged class libraries or executable applications.</p>
    <p class="normal">There are three ways <a id="_idIndexMarker1079"/>to publish and <a id="_idIndexMarker1080"/>deploy a .NET application. They are:</p>
    <ul>
      <li class="bulletList"><strong class="keyWord">Framework-dependent deployment</strong> (<strong class="keyWord">FDD</strong>)</li>
      <li class="bulletList"><strong class="keyWord">Framework-dependent executable</strong> (<strong class="keyWord">FDE</strong>)</li>
      <li class="bulletList"><strong class="keyWord">Self-contained</strong></li>
    </ul>
    <p class="normal">If you choose to deploy your application and its package dependencies, but not .NET itself, then you rely on .NET already being on the target computer. This works well for web applications deployed to a server because .NET and lots of other web applications are likely already on the server.</p>
    <p class="normal">FDD means you deploy a DLL that must be executed by the <code class="inlineCode">dotnet</code> command-line tool. FDE means you deploy an EXE that can be run directly from the command line. Both require the appropriate version of the .NET runtime to be installed on a system.</p>
    <p class="normal">Sometimes, you want to be able to give someone a USB stick containing your application, built for their OS, and know that it can execute on their computer. You would want to perform a self-contained deployment. While the size of the deployment files will be larger, you’ll know that it will work.</p>
    <h2 id="_idParaDest-461" class="heading-2">Creating a console app to publish</h2>
    <p class="normal">Let’s <a id="_idIndexMarker1081"/>explore how to publish a console app:</p>
    <ol>
      <li class="numberedList" value="1">Use <a id="_idIndexMarker1082"/>your preferred code editor to add a new <strong class="screenText">Console App</strong> / <code class="inlineCode">console</code> project named <code class="inlineCode">DotNetEverywhere</code> to the <code class="inlineCode">Chapter07</code> solution. Make sure you target .NET 9.</li>
      <li class="numberedList">Modify the project file to statically import the <code class="inlineCode">System.Console</code> class into all C# files.</li>
      <li class="numberedList">In <code class="inlineCode">Program.cs</code>, delete the existing statements, and then add a statement to output a message, saying that the console app can run everywhere, and some information about the OS, as shown in the following code:
        <pre class="programlisting code-one"><code class="hljs-code">WriteLine(<span class="hljs-string">"I can run everywhere!"</span>);
WriteLine(<span class="hljs-string">$"OS Version is </span><span class="hljs-subst">{Environment.OSVersion}</span><span class="hljs-string">."</span>);
<span class="hljs-keyword">if</span> (OperatingSystem.IsMacOS())
{
  WriteLine(<span class="hljs-string">"I am macOS."</span>);
}
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (OperatingSystem.IsWindowsVersionAtLeast(
<span class="hljs-keyword">  </span>major: <span class="hljs-number">10</span>, build: <span class="hljs-number">22000</span>))
{
  WriteLine(<span class="hljs-string">"I am Windows 11."</span>);
}
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (OperatingSystem.IsWindowsVersionAtLeast(major: <span class="hljs-number">10</span>))
{
  WriteLine(<span class="hljs-string">"I am Windows 10."</span>);
}
<span class="hljs-keyword">else</span>
{
  WriteLine(<span class="hljs-string">"I am some other mysterious OS."</span>);
}
WriteLine(<span class="hljs-string">"Press any key to stop me."</span>);
ReadKey(intercept: <span class="hljs-literal">true</span>); <span class="hljs-comment">// Do not output the key that was pressed.</span>
</code></pre>
      </li>
      <li class="numberedList">Run the <code class="inlineCode">DotNetEverywhere</code> project, and note the results when run on Windows 11, as shown in the following output:
        <pre class="programlisting con-one"><code class="hljs-con">I can run everywhere!
OS Version is Microsoft Windows NT 10.0.22000.0.
I am Windows 11.
Press any key to stop me.
</code></pre>
      </li>
      <li class="numberedList">In <code class="inlineCode">DotNetEverywhere.csproj</code>, add the <strong class="keyWord">runtime identifiers </strong>(<strong class="keyWord">RIDs</strong>) to target three OSes inside the <code class="inlineCode">&lt;PropertyGroup&gt;</code> element, as shown highlighted <a id="_idIndexMarker1083"/>in the following markup:
        <pre class="programlisting code-one"><code class="hljs-code">&lt;Project Sdk=<span class="hljs-string">"Microsoft.NET.Sdk"</span>&gt;
  &lt;PropertyGroup&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
    &lt;TargetFramework&gt;net9<span class="hljs-number">.0</span>&lt;/TargetFramework&gt;
    &lt;Nullable&gt;enable&lt;/Nullable&gt;
    &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;
<span class="code-highlight"><strong class="hljs-slc">    &lt;RuntimeIdentifiers&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">      win-x64;osx-arm64;linux-x64</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    &lt;/RuntimeIdentifiers&gt;</strong></span>
  &lt;/PropertyGroup&gt;
&lt;/Project&gt;
</code></pre>
        <ul>
          <li class="bulletList level-2">The <code class="inlineCode">win-x64</code> RID value means Windows on an x64-compatible CPU. Use the <code class="inlineCode">win-arm64</code> RID value to deploy to a Windows ARM device.</li>
          <li class="bulletList level-2">The <code class="inlineCode">osx-arm64</code> RID value means macOS on Apple Silicon.</li>
          <li class="bulletList level-2">The <code class="inlineCode">linux-x64</code> RID value means most desktop distributions of Linux, like Ubuntu, CentOS, Debian, or Fedora on an x64-compatible CPU. Use <code class="inlineCode">linux-arm</code> for Raspbian or Raspberry Pi OS 32-bit. Use <code class="inlineCode">linux-arm64</code> for a <a id="_idIndexMarker1084"/>Raspberry Pi running Ubuntu 64-bit.</li>
        </ul>
      </li>
    </ol>
    <div class="note">
      <p class="normal">You can check the latest allowed RID values<a id="_idIndexMarker1085"/> at the following link: <a href="https://learn.microsoft.com/en-us/dotnet/core/rid-catalog#known-rids"><span class="url">https://learn.microsoft.com/en-us/dotnet/core/rid-catalog#known-rids</span></a>.</p>
    </div>
    <div class="packt_tip">
      <p class="normal"><strong class="keyWord">Warning!</strong> There are two elements that you can use to specify runtime identifiers. Use <code class="inlineCode">&lt;RuntimeIdentifier&gt;</code> if you only need to specify one. Use <code class="inlineCode">&lt;RuntimeIdentifiers&gt;</code> if you need to specify multiple, as we did in the preceding example. If you use the wrong one, then the compiler will give an error, and it can be difficult to understand why with only one character difference!</p>
    </div>
    <h2 id="_idParaDest-462" class="heading-2">Understanding dotnet commands</h2>
    <p class="normal">When you <a id="_idIndexMarker1086"/>install <a id="_idIndexMarker1087"/>the .NET SDK, it includes a <strong class="keyWord">command-line interface</strong> (<strong class="keyWord">CLI</strong>) named <code class="inlineCode">dotnet</code>.</p>
    <p class="normal">The .NET CLI<a id="_idIndexMarker1088"/> has commands that work on the current folder to create a new project, using templates:</p>
    <ol>
      <li class="numberedList" value="1">On Windows, start <strong class="screenText">Command Prompt</strong> or <strong class="screenText">Windows Terminal</strong>. On macOS, start <strong class="screenText">Terminal</strong>. If you prefer to use Visual Studio or VS Code, then you can use the integrated terminal.</li>
      <li class="numberedList">Enter the <code class="inlineCode">dotnet new list</code> (or <code class="inlineCode">dotnet new -l</code> or <code class="inlineCode">dotnet new --list</code> with older SDKs) command to list your currently installed templates, the most common of which are shown in <em class="italic">Table 7.6</em>:</li>
    </ol>
    <table id="table006-3" class="table-container">
      <tbody>
        <tr>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Template Name</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Short Name</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Language</strong></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">.NET MAUI App</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">maui</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">C#</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">.NET MAUI Blazor App</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">maui-blazor</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">C#</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">ASP.NET Core Empty</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">web</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">C# and F#</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">ASP.NET Core gRPC Service</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">grpc</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">C#</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">ASP.NET Core Web API</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">webapi</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">C# and F#</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">ASP.NET Core Web API (native AOT)</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">webapiaot</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">C#</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">ASP.NET Core Web App (Model-View-Controller)</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">mvc</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">C# and F#</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Blazor Web App</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">blazor</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">C#</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Class Library</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">classlib</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">C#, F#, and VB</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Console App</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">console</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">C#, F#, and VB</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">EditorConfig File</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">editorconfig</code></p>
          </td>
          <td class="table-cell"/>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">global.json File</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">globaljson</code></p>
          </td>
          <td class="table-cell"/>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Solution File</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">sln</code></p>
          </td>
          <td class="table-cell"/>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">xUnit Test Project</code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">xunit</code></p>
          </td>
          <td class="table-cell"/>
        </tr>
      </tbody>
    </table>
    <p class="packt_figref">Table 7.6: Project template full and short names</p>
    <div class="note">
      <p class="normal">.NET MAUI projects are not supported for Linux. The team has said they have left that work to the open source community. If you need to create a truly cross-platform graphical app, then take a look at Avalonia<a id="_idIndexMarker1089"/> at the following link: <a href="https://avaloniaui.net/"><span class="url">https://avaloniaui.net/</span></a>.</p>
    </div>
    <h2 id="_idParaDest-463" class="heading-2">Getting information about .NET and its environment</h2>
    <p class="normal">It is useful to see<a id="_idIndexMarker1090"/> what .NET SDKs and runtimes are currently installed, alongside information about the OS, as shown in the following command:</p>
    <pre class="programlisting con"><code class="hljs-con">dotnet --info
</code></pre>
    <p class="normal">Note the results, as shown in the following partial output:</p>
    <pre class="programlisting con"><code class="hljs-con">.NET SDK:
 Version:   9.0.100
 Commit:    81a714c6d3
 Workload version:  9.0.100-manifests.bbb3781c
 MSBuild version:   17.12.0
Runtime Environment:
 OS Name:     Windows
 OS Version:  10.0.26100
 OS Platform: Windows
 RID:         win-arm64
 Base Path:   C:\Program Files\dotnet\sdk\9.0.100\
.NET workloads installed:
Configured to use loose manifests when installing new manifests.
 [aspire]
   Installation Source: VS 17.12.35309.182, VS 17.11.35303.130
   Manifest Version:    9.0.0/0.0.100
   Manifest Path:       C:\Program Files\dotnet\sdk-manifests\9.0.100\microsoft.net.sdk.aspire\9.0.0\WorkloadManifest.json
   Install Type:        FileBased
Host (useful for support):
  Version: 9.0.0
  Architecture: arm64
  Commit:  static
.NET SDKs installed:
  8.0.400 [C:\Program Files\dotnet\sdk]
  9.0.100 [C:\Program Files\dotnet\sdk]
.NET runtimes installed:
  Microsoft.AspNetCore.App 8.0.8 [...\dotnet\shared\Microsoft.AspNetCore.App]
...
</code></pre>
    <h2 id="_idParaDest-464" class="heading-2">Managing projects using the dotnet CLI</h2>
    <p class="normal">The .NET CLI has the following <a id="_idIndexMarker1091"/>commands that work on the project in the current folder, enabling you to manage the project:</p>
    <ul>
      <li class="bulletList"><code class="inlineCode">dotnet help</code>: This<a id="_idIndexMarker1092"/> shows the command-line help.</li>
      <li class="bulletList"><code class="inlineCode">dotnet new</code>: This<a id="_idIndexMarker1093"/> creates a new .NET project or file.</li>
      <li class="bulletList"><code class="inlineCode">dotnet tool</code>: This<a id="_idIndexMarker1094"/> installs or manages tools that extend the .NET experience.</li>
      <li class="bulletList"><code class="inlineCode">dotnet workload</code>: This<a id="_idIndexMarker1095"/> manages optional workloads like .NET MAUI.</li>
      <li class="bulletList"><code class="inlineCode">dotnet restore</code>: This <a id="_idIndexMarker1096"/>downloads dependencies for the project.</li>
      <li class="bulletList"><code class="inlineCode">dotnet build</code>: This<a id="_idIndexMarker1097"/> builds, aka compiles, a .NET project. A new switch introduced with .NET 8 is <code class="inlineCode">--tl</code> (meaning terminal logger), which provides a modern output. For example, it provides real-time information about what the build is doing. You can learn more at the <a id="_idIndexMarker1098"/>following link: <a href="https://learn.microsoft.com/en-us/dotnet/core/tools/dotnet-build#options"><span class="url">https://learn.microsoft.com/en-us/dotnet/core/tools/dotnet-build#options</span></a>.</li>
      <li class="bulletList"><code class="inlineCode">dotnet build-server</code>: This<a id="_idIndexMarker1099"/> interacts with servers started by a build.</li>
      <li class="bulletList"><code class="inlineCode">dotnet msbuild</code>: This <a id="_idIndexMarker1100"/>runs MS Build Engine commands.</li>
      <li class="bulletList"><code class="inlineCode">dotnet clean</code>: This<a id="_idIndexMarker1101"/> removes the temporary outputs from a build.</li>
      <li class="bulletList"><code class="inlineCode">dotnet test</code>: This <a id="_idIndexMarker1102"/>builds and then runs unit tests for the project.</li>
      <li class="bulletList"><code class="inlineCode">dotnet run</code>: This <a id="_idIndexMarker1103"/>builds and then runs the project.</li>
      <li class="bulletList"><code class="inlineCode">dotnet pack</code>: This<a id="_idIndexMarker1104"/> creates a NuGet package for the project.</li>
      <li class="bulletList"><code class="inlineCode">dotnet publish</code>: This<a id="_idIndexMarker1105"/> builds and then publishes the project, either with dependencies or as a self-contained application. In .NET 7 and earlier, this published the <code class="inlineCode">Debug</code> configuration by default. In .NET 8 and later, it now publishes the <code class="inlineCode">Release</code> configuration by default.</li>
      <li class="bulletList"><code class="inlineCode">dotnet add</code>: This <a id="_idIndexMarker1106"/>adds a reference to a package or class library to the project.</li>
      <li class="bulletList"><code class="inlineCode">dotnet remove</code>: This<a id="_idIndexMarker1107"/> removes a reference to a package or class library from the project.</li>
      <li class="bulletList"><code class="inlineCode">dotnet list</code>: This <a id="_idIndexMarker1108"/>lists the package or class library references for the project.</li>
      <li class="bulletList"><code class="inlineCode">dotnet package search</code>: This <a id="_idIndexMarker1109"/>allows you to search one or more package sources for packages that match a search term. The command format is <code class="inlineCode">dotnet package search [search term] [options]</code>. You can <a id="_idIndexMarker1110"/>learn more at the following link: <a href="https://devblogs.microsoft.com/nuget/announcing-nuget-6-9/#support-for-dotnet-search-command"><span class="url">https://devblogs.microsoft.com/nuget/announcing-nuget-6-9/#support-for-dotnet-search-command</span></a>.</li>
    </ul>
    <h2 id="_idParaDest-465" class="heading-2">Publishing a self-contained app</h2>
    <p class="normal">Now that you have seen <a id="_idIndexMarker1111"/>some example <code class="inlineCode">dotnet</code> tool commands, we can publish our cross-platform console app:</p>
    <ol>
      <li class="numberedList" value="1">At the command prompt or terminal, make sure that you are in the <code class="inlineCode">DotNetEverywhere</code> folder.</li>
      <li class="numberedList">Enter a command to build and publish the self-contained release version of the console application for Windows, as shown in the following command:
        <pre class="programlisting con-one"><code class="hljs-con">dotnet publish -c Release -r win-x64 --self-contained
</code></pre>
        <div class="note-one">
          <p class="normal">The publishing process can take a while, so be patient.</p>
        </div>
      </li>
    </ol>
    <ol>
      <li class="numberedList" value="3">Note that the build engine restores any needed packages, compiles the project source code into an assembly DLL, and creates a <code class="inlineCode">publish</code> folder, as shown in the following output:
        <pre class="programlisting con-one"><code class="hljs-con">MSBuild version 17.11.0+14c24b2d3 for .NET
  Determining projects to restore...
  All projects are up-to-date for restore.
  DotNetEverywhere -&gt; C:\cs13net9\Chapter07\DotNetEverywhere\bin\Release\net9.0\win-x64\DotNetEverywhere.dll
  DotNetEverywhere -&gt; C:\cs13net9\Chapter07\DotNetEverywhere\bin\Release\net9.0\win-x64\publish\
</code></pre>
      </li>
      <li class="numberedList">Enter the following commands to build and publish the release versions for <a id="_idIndexMarker1112"/>the macOS and Linux variants, as shown in the following commands:
        <pre class="programlisting con-one"><code class="hljs-con">dotnet publish -c Release -r osx-arm64 --self-contained
dotnet publish -c Release -r linux-x64 --self-contained
</code></pre>
      </li>
    </ol>
    <div class="packt_tip-one">
      <p class="normal"><strong class="keyWord">Good Practice</strong>: You could automate these commands by using a scripting language like PowerShell and execute the script file on any OS, using the cross-platform PowerShell Core. I have done this for you at the following link: <a href="https://github.com/markjprice/cs13net9/tree/main/scripts/publish-scripts"><span class="url">https://github.com/markjprice/cs13net9/tree/main/scripts/publish-scripts</span></a>.</p>
    </div>
    <ol>
      <li class="numberedList" value="5">Open Windows <strong class="screenText">File Explorer</strong> or a macOS <strong class="screenText">Finder</strong> window, navigate to <code class="inlineCode">DotNetEverywhere\bin\Release\net9.0</code>, and note the output folders for the five OSes.</li>
      <li class="numberedList">In the <code class="inlineCode">win-x64</code> folder, open the <code class="inlineCode">publish</code> folder, and note all the supporting assemblies, like <code class="inlineCode">Microsoft.CSharp.dll</code>.</li>
      <li class="numberedList">Select the <code class="inlineCode">DotNetEverywhere</code> executable file, and note that it is 154 KB, as shown in <em class="italic">Figure 7.3</em>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B22322_07_03.png" alt="" width="812" height="233"/></figure>
    <p class="packt_figref">Figure 7.3: The DotNetEverywhere executable file for Windows 64-bit</p>
    <ol>
      <li class="numberedList" value="8">If you are on Windows with an x64-compatible chip, then double-click to execute the program and note the result, as shown in the following output:
        <pre class="programlisting con-one"><code class="hljs-con">I can run everywhere!
OS Version is Microsoft Windows NT 10.0.26100.0.
I am Windows 11.
Press any key to stop me.
</code></pre>
      </li>
    </ol>
    <div class="note-one">
      <p class="normal">I executed the program on my Surface Laptop 7, so I targeted and built for the <code class="inlineCode">win-arm64</code> architecture. The preceding output shows the results on my computer.</p>
    </div>
    <ol>
      <li class="numberedList" value="9">Press <a id="_idIndexMarker1113"/>any key to close the console app and its window.</li>
      <li class="numberedList">Note that the total size of the <code class="inlineCode">publish</code> folder and all its files is 68.3 MB.</li>
      <li class="numberedList">In the <code class="inlineCode">osx-arm64</code> folder, select the <code class="inlineCode">publish</code> folder, note all the supporting assemblies, and then select the <code class="inlineCode">DotNetEverywhere</code> executable file. Note that the executable is 125 KB and the <code class="inlineCode">publish</code> folder is about 73.9 MB. There is no <code class="inlineCode">.exe</code> file extension for published applications on macOS, so the filename will not have an extension.</li>
    </ol>
    <p class="normal">If you copy any of those <code class="inlineCode">publish</code> folders to the appropriate <strong class="keyWord">operating system</strong> (<strong class="keyWord">OS</strong>), the console app will run; this is because it is a self-contained, deployable .NET application. For example, here it is on macOS:</p>
    <pre class="programlisting con"><code class="hljs-con">I can run everywhere!
OS Version is Unix 13.5.2
I am macOS.
Press any key to stop me.
</code></pre>
    <p class="normal">This example <a id="_idIndexMarker1114"/>used a console app, but you could just as easily create an ASP.NET Core website or web service, or a Windows Forms or WPF app. Of course, you can only deploy Windows desktop apps to Windows computers, not Linux or macOS.</p>
    <h2 id="_idParaDest-466" class="heading-2">Publishing a single-file app</h2>
    <p class="normal">If you know that .NET is <a id="_idIndexMarker1115"/>already installed on the computer on which you want to run your app, then you can use the extra flags when you publish your app for release to say that it does not need to be self-contained and that you want to publish it as a single file (if possible), as shown in the following command (which must be entered on a single line):</p>
    <pre class="programlisting con"><code class="hljs-con">dotnet publish -r win-x64 -c Release --no-self-contained
/p:PublishSingleFile=true
</code></pre>
    <p class="normal">This will generate two files: <code class="inlineCode">DotNetEverywhere.exe</code> and <code class="inlineCode">DotNetEverywhere.pdb</code>. The <code class="inlineCode">.exe</code> file is the executable. The <code class="inlineCode">.pdb</code> file is<a id="_idIndexMarker1116"/> a <strong class="keyWord">program debug database</strong> file that stores debugging information.</p>
    <p class="normal">If you prefer the <code class="inlineCode">.pdb</code> file to be embedded in the <code class="inlineCode">.exe</code> file (for example, to ensure that it is deployed with its assembly), then add a <code class="inlineCode">&lt;DebugType&gt;</code> element to the <code class="inlineCode">&lt;PropertyGroup&gt;</code> element in your <code class="inlineCode">.csproj</code> file and set it to <code class="inlineCode">embedded</code>, as shown highlighted in the following markup:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">OutputType</span><span class="hljs-tag">&gt;</span>Exe<span class="hljs-tag">&lt;/</span><span class="hljs-name">OutputType</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">TargetFramework</span><span class="hljs-tag">&gt;</span>net9.0<span class="hljs-tag">&lt;/</span><span class="hljs-name">TargetFramework</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">Nullable</span><span class="hljs-tag">&gt;</span>enable<span class="hljs-tag">&lt;/</span><span class="hljs-name">Nullable</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">ImplicitUsings</span><span class="hljs-tag">&gt;</span>enable<span class="hljs-tag">&lt;/</span><span class="hljs-name">ImplicitUsings</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">RuntimeIdentifiers</span><span class="hljs-tag">&gt;</span>
win-x64;osx-arm64;linux-x64
<span class="hljs-tag">&lt;/</span><span class="hljs-name">RuntimeIdentifiers</span><span class="hljs-tag">&gt;</span>
<span class="code-highlight"><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">DebugType</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">embedded</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">DebugType</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">If you cannot assume that .NET is already installed on a computer, then although Linux also only generates the two files, expect the following additional files for Windows: <code class="inlineCode">coreclr.dll</code>, <code class="inlineCode">clrjit.dll</code>, <code class="inlineCode">clrcompression.dll</code>, and <code class="inlineCode">mscordaccore.dll</code>.</p>
    <p class="normal">Let’s see an example for Windows:</p>
    <ol>
      <li class="numberedList" value="1">At the command prompt or terminal, in the <code class="inlineCode">DotNetEverywhere</code> folder, enter the command to build the self-contained release version of the console app for Windows, as shown in the following command:
        <pre class="programlisting con-one"><code class="hljs-con">dotnet publish -c Release -r win-x64 --self-contained /p:PublishSingleFile=true
</code></pre>
      </li>
      <li class="numberedList">Navigate to the <code class="inlineCode">DotNetEverywhere\bin\Release\net9.0\win-x64\publish</code> folder and select the <code class="inlineCode">DotNetEverywhere</code> executable file. Note that the <a id="_idIndexMarker1117"/>executable is now 62.6 MB, and there is also a <code class="inlineCode">.pdb</code> file that is 11 KB. The sizes of these files on your system will vary.</li>
    </ol>
    <h2 id="_idParaDest-467" class="heading-2">Reducing the size of apps using app trimming</h2>
    <p class="normal">One of the problems with<a id="_idIndexMarker1118"/> deploying a .NET app as a self-contained app is that the .NET libraries take up a lot of space. One of the biggest needs is to reduce the size of Blazor WebAssembly components because all the .NET libraries need to be downloaded to the browser.</p>
    <p class="normal">Luckily, you can reduce this size by not packaging unused assemblies with your deployments. Introduced with .NET Core 3, the app trimming system can identify the assemblies needed by your code and remove those that are not needed. This was known as <code class="inlineCode">copyused</code> trim mode.</p>
    <p class="normal">With .NET 5, the <a id="_idIndexMarker1119"/>trimming went further by removing individual types, and even members, like methods from within an assembly if they are not used. For example, with a <strong class="keyWord">Hello World</strong> console app, the <code class="inlineCode">System.Console.dll</code> assembly is trimmed from 61.5 KB to 31.5 KB. This was known as <code class="inlineCode">link</code> trim mode, but it was not enabled by default.</p>
    <p class="normal">With .NET 6, Microsoft added annotations to their libraries to indicate how they can be safely trimmed, so the trimming of types and members was made the default.</p>
    <p class="normal">With .NET 7, Microsoft renamed <code class="inlineCode">link</code> to <code class="inlineCode">full</code> and <code class="inlineCode">copyused</code> to <code class="inlineCode">partial</code>.</p>
    <p class="normal">The catch is how well the trimming identifies unused assemblies, types, and members. If your code is dynamic, perhaps using reflection, then it might not work correctly, so Microsoft also allows manual control.</p>
    <p class="normal">There are two ways to enable type-level and member-level, aka <code class="inlineCode">full</code>, trimming. Since this level of trimming is the default with .NET 6 or later, all we need to do is enable trimming without setting a trim level or mode.</p>
    <p class="normal">The first way is to add an element to the project file, as shown in the following markup:</p>
    <pre class="programlisting code"><code class="hljs-code">&lt;PublishTrimmed&gt;<span class="hljs-literal">true</span>&lt;/PublishTrimmed&gt; &lt;!--Enable trimming.--&gt;
</code></pre>
    <p class="normal">The second way is to add a flag when publishing, as shown highlighted in the following command:</p>
    <pre class="programlisting con"><code class="hljs-con">dotnet publish ... <span class="code-highlight"><strong class="hljs-con-slc">-p:PublishTrimmed=True</strong></span>
</code></pre>
    <p class="normal">There are two ways to enable assembly-level, aka <code class="inlineCode">partial</code>, trimming.</p>
    <p class="normal">The first way is to add two elements to the project file, as shown in the following markup:</p>
    <pre class="programlisting code"><code class="hljs-code">&lt;PublishTrimmed&gt;<span class="hljs-literal">true</span>&lt;/PublishTrimmed&gt; &lt;!--Enable trimming.--&gt;
&lt;TrimMode&gt;<span class="hljs-keyword">partial</span>&lt;/TrimMode&gt; &lt;!--Set assembly-level trimming.--&gt;
</code></pre>
    <p class="normal">The second <a id="_idIndexMarker1120"/>way is to add two flags when publishing, as shown highlighted in the following command:</p>
    <pre class="programlisting con"><code class="hljs-con">dotnet publish ... <span class="code-highlight"><strong class="hljs-con-slc">-p:PublishTrimmed=True -p:TrimMode=partial</strong></span>
</code></pre>
    <h2 id="_idParaDest-468" class="heading-2">Controlling where build artifacts are created</h2>
    <p class="normal">Traditionally, each project has its own <code class="inlineCode">bin</code> and <code class="inlineCode">obj</code> subfolders where temporary files are created during the build process. When you publish, the files are created in the <code class="inlineCode">bin</code> folder.</p>
    <p class="normal">You might prefer to put all these temporary files and folders somewhere else. Introduced with .NET 8 is the ability to control where build<a id="_idIndexMarker1121"/> artifacts are created. Let’s see how:</p>
    <ol>
      <li class="numberedList" value="1">At the command prompt or terminal for the <code class="inlineCode">Chapter07</code> folder, enter the following command:
        <pre class="programlisting code-one"><code class="hljs-code">dotnet new buildprops --use-artifacts
</code></pre>
      </li>
      <li class="numberedList">Note the success message, as shown in the following output:
        <pre class="programlisting con-one"><code class="hljs-con">The template "MSBuild Directory.Build.props file" was created successfully.
</code></pre>
        <div class="note-one">
          <p class="normal">We could have created this file in the <code class="inlineCode">cs13net9</code> folder, and it would then affect all projects in all chapters.</p>
        </div>
      </li>
    </ol>
    <ol>
      <li class="numberedList" value="3">In the <code class="inlineCode">Chapter07</code> folder, open the <code class="inlineCode">Directory.Build.props</code> file, as shown in the following markup:
        <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">Project</span><span class="hljs-tag">&gt;</span>
<span class="hljs-comment">&lt;!-- See https://aka.ms/dotnet/msbuild/customize for more details on</span>
<span class="hljs-comment">customizing your build --&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">    &lt;</span><span class="hljs-name">ArtifactsPath</span><span class="hljs-tag">&gt;</span>$(MSBuildThisFileDirectory)artifacts<span class="hljs-tag">&lt;/</span><span class="hljs-name">ArtifactsPath</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">Project</span><span class="hljs-tag">&gt;</span>
</code></pre>
      </li>
      <li class="numberedList">Build any project or the whole solution.</li>
      <li class="numberedList">In the <code class="inlineCode">Chapter07</code> folder, note that there is now an <code class="inlineCode">artifacts</code> folder that contains subfolders for any recently built projects.</li>
      <li class="numberedList">You can delete this file, or rename it to something like <code class="inlineCode">Directory.Build.props.disabled</code> so that it does not affect the rest of this chapter by building these artifacts in a folder that you do not expect based on default <a id="_idIndexMarker1122"/>behavior. This is optional but recommended.</li>
    </ol>
    <div class="packt_tip">
      <p class="normal"><strong class="keyWord">Warning!</strong> If you leave this build configuration enabled, then remember that your build artifacts are now created in this new folder structure.</p>
    </div>
    <h1 id="_idParaDest-469" class="heading-1">Native ahead-of-time compilation</h1>
    <p class="normal">Native AOT <a id="_idIndexMarker1123"/>produces assemblies that are:</p>
    <ul>
      <li class="bulletList"><strong class="keyWord">Self-contained</strong>, meaning<a id="_idIndexMarker1124"/> they can run on systems that do not have the .NET runtime installed.</li>
      <li class="bulletList"><strong class="keyWord">Ahead-of-time (AOT) compiled for native code</strong>, meaning a faster startup time and a potentially <a id="_idIndexMarker1125"/>smaller memory footprint.</li>
    </ul>
    <p class="normal">Native AOT compiles IL code to native code at the time of writing, rather than at runtime<a id="_idIndexMarker1126"/> using the <strong class="keyWord">Just in Time (JIT)</strong> compiler. But native AOT assemblies must target a specific runtime environment like Windows x64 or Linux Arm.</p>
    <p class="normal">Since native AOT happens at publish time, you should remember that while you are debugging and working live on a project in your code editor, it still uses the runtime JIT compiler, not native AOT, even if you have AOT enabled in the project!</p>
    <p class="normal">However, some features that are incompatible with native AOT will be disabled or throw exceptions, and a source analyzer is enabled to show warnings about potential code incompatibilities.</p>
    <h2 id="_idParaDest-470" class="heading-2">Limitations of native AOT</h2>
    <p class="normal">Native AOT has<a id="_idIndexMarker1127"/> limitations that apply to projects that enable it, some of which are shown in the following list:</p>
    <ul>
      <li class="bulletList">No dynamic loading of assemblies.</li>
      <li class="bulletList">No runtime code generation, for example, using <code class="inlineCode">System.Reflection.Emit</code>.</li>
      <li class="bulletList">It requires trimming, which has its own limitations, as we covered in the previous section.</li>
      <li class="bulletList">The projects must be self-contained, so they must embed any libraries they call, which increases their size.</li>
    </ul>
    <p class="normal">Although your own assemblies might not use the features listed above, major parts of .NET itself do. For example, ASP.NET Core MVC (including web API services that use controllers) and EF Core do runtime code generation to implement their functionality.</p>
    <p class="normal">The .NET teams are hard at work making as much of .NET compatible with native AOT as possible, as soon as possible. But .NET 9 only includes basic support for ASP.NET Core if you use Minimal APIs, and no support for EF Core.</p>
    <p class="normal">My guess is that .NET 10 will include support for ASP.NET Core MVC and some parts of EF Core, but it could take until .NET 11 or .NET 12 before we can all confidently use most of .NET and know we can build our assemblies with native AOT to gain the benefits.</p>
    <p class="normal">The native AOT publishing process includes code analyzers to warn you if you use any features that are not supported, but not all packages have been annotated to work well with these yet.</p>
    <p class="normal">The most common annotation used to indicate that a type or member does not support AOT is the <code class="inlineCode">[RequiresDynamicCode]</code> attribute.</p>
    <div class="note">
      <p class="normal"><strong class="keyWord">More Information</strong>: You can learn more about AOT warnings<a id="_idIndexMarker1128"/> at the following link: <a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/native-aot/fixing-warnings"><span class="url">https://learn.microsoft.com/en-us/dotnet/core/deploying/native-aot/fixing-warnings</span></a>.</p>
    </div>
    <h2 id="_idParaDest-471" class="heading-2">Reflection and native AOT</h2>
    <p class="normal">Reflection is<a id="_idIndexMarker1129"/> frequently used for runtime inspection of type <code class="inlineCode">metadata</code>, dynamic invocation of members, and code generation.</p>
    <p class="normal">Native AOT does allow <a id="_idIndexMarker1130"/>some reflection features, but the trimming performed during the native AOT compilation process cannot statically determine when a type has members that might be only accessed via reflection. These members would be removed by AOT, which would then cause a runtime exception.</p>
    <div class="note">
      <p class="normal"><strong class="keyWord">Good Practice</strong>: Developers must annotate their types with <code class="inlineCode">[DynamicallyAccessedMembers]</code> to indicate a member that is only dynamically accessed via reflection and should, therefore, be left untrimmed.</p>
    </div>
    <h2 id="_idParaDest-472" class="heading-2">Requirements for native AOT</h2>
    <p class="normal">There are additional requirements<a id="_idIndexMarker1131"/> for different OSes:</p>
    <ul>
      <li class="bulletList">On Windows, you must install the Visual Studio <strong class="screenText">Desktop development with C++</strong> workload with all default components.</li>
      <li class="bulletList">On Linux, you must install the compiler toolchain and developer packages for libraries that the .NET runtime depends on. For example, for Ubuntu 18.04 or later: <code class="inlineCode">sudo apt-get install clang zlib1g-dev</code>.</li>
      <li class="bulletList"><strong class="keyWord">Warning!</strong> Cross-platform native AOT publishing is not supported. This means that you must run the publish action on the OS that you will deploy to. For example, you cannot publish a native AOT project on Linux to later run on Windows, and vice versa.</li>
    </ul>
    <h2 id="_idParaDest-473" class="heading-2">Enabling native AOT for a project</h2>
    <p class="normal">To enable native<a id="_idIndexMarker1132"/> AOT publishing in a project, add the <code class="inlineCode">&lt;PublishAot&gt;</code> element to the project file, as shown highlighted in the following markup:</p>
    <pre class="programlisting code"><code class="hljs-code">  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;net9<span class="hljs-number">.0</span>&lt;/TargetFramework&gt;
<span class="code-highlight"><strong class="hljs-slc">    &lt;PublishAot&gt;</strong><strong class="hljs-literal-slc">true</strong><strong class="hljs-slc">&lt;/PublishAot&gt;</strong></span>
</code></pre>
    <h2 id="_idParaDest-474" class="heading-2">Building a native AOT project</h2>
    <p class="normal">Now, let’s see a <a id="_idIndexMarker1133"/>practical example using the new AOT option for a console app:</p>
    <ol>
      <li class="numberedList" value="1">In the solution named <code class="inlineCode">Chapter07</code>, add a native AOT-compatible console app project, as<a id="_idIndexMarker1134"/> defined in the following list:<ul>
          <li class="bulletList level-2">Project template: <strong class="screenText">Console App</strong> / <code class="inlineCode">console --aot</code></li>
          <li class="bulletList level-2">Solution file and folder: <code class="inlineCode">Chapter07</code></li>
          <li class="bulletList level-2">Project file and folder: <code class="inlineCode">AotConsole</code></li>
          <li class="bulletList level-2">Do not use top-level statements: Cleared</li>
          <li class="bulletList level-2">Enable native AOT publish: Selected</li>
        </ul>
      </li>
    </ol>
    <div class="note-one">
      <p class="normal">If your code editor does not yet provide the option for AOT, create a traditional console app, and then you will need to manually enable AOT, as shown in step 2, or use the <code class="inlineCode">dotnet</code> CLI.</p>
    </div>
    <ol>
      <li class="numberedList" value="2">In the project file, note that native AOT publishing is enabled, as well as invariant globalization, as shown highlighted in the following markup:
        <pre class="programlisting code-one"><code class="hljs-code">&lt;Project Sdk=<span class="hljs-string">"Microsoft.NET.Sdk.Web"</span>&gt;
  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;net9<span class="hljs-number">.0</span>&lt;/TargetFramework&gt;
    &lt;Nullable&gt;enable&lt;/Nullable&gt;
    &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;
<span class="code-highlight"><strong class="hljs-slc">    &lt;PublishAot&gt;</strong><strong class="hljs-literal-slc">true</strong><strong class="hljs-slc">&lt;/PublishAot&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    &lt;InvariantGlobalization&gt;</strong><strong class="hljs-literal-slc">true</strong><strong class="hljs-slc">&lt;/InvariantGlobalization&gt;</strong></span>
  &lt;/PropertyGroup&gt;
&lt;/Project&gt;
</code></pre>
      </li>
    </ol>
    <div class="note-one">
      <p class="normal">Explicitly setting invariant globalization to <code class="inlineCode">true</code> is new in the <strong class="screenText">Console App</strong> project template with .NET 8. It is designed to make a console app non-culture-specific so that it can be deployed anywhere in the world and have the same behavior. If you set this property to <code class="inlineCode">false</code>, or if the element is missing, then the console app will default to the culture of the current computer it is hosted on. You can read more about invariant globalization mode at the following link: <a href="https://github.com/dotnet/runtime/blob/main/docs/design/features/globalization-invariant-mode.md"><span class="url">https://github.com/dotnet/runtime/blob/main/docs/design/features/globalization-invariant-mode.md</span></a>.</p>
    </div>
    <ol>
      <li class="numberedList" value="3">Modify the<a id="_idIndexMarker1135"/> project file to statically import the <code class="inlineCode">System.Console</code> class in all C# files.</li>
      <li class="numberedList">In <code class="inlineCode">Program.cs</code>, delete any existing statements, and then add statements to output the current culture and OS version, as shown in the following code:
        <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword">using</span> System.Globalization; <span class="hljs-comment">// To use CultureInfo.</span>
WriteLine(<span class="hljs-string">"</span><span class="hljs-string">This is an ahead-of-time (AOT) compiled console app."</span>);
WriteLine(<span class="hljs-string">"Current culture: {0}"</span>, CultureInfo.CurrentCulture.DisplayName);
WriteLine(<span class="hljs-string">"OS version: {0}"</span>, Environment.OSVersion);
Write(<span class="hljs-string">"Press any key to exit."</span>);
ReadKey(intercept: <span class="hljs-literal">true</span>); <span class="hljs-comment">// Do not output the key that was pressed.</span>
</code></pre>
      </li>
      <li class="numberedList">Run the <a id="_idIndexMarker1136"/>console app project and note that the culture is invariant, as shown in the following output:
        <pre class="programlisting con-one"><code class="hljs-con">This is an ahead-of-time (AOT) compiled console app.
Current culture: Invariant Language (Invariant Country)
OS version: Microsoft Windows NT 10.0.22621.0
</code></pre>
        <div class="packt_tip">
          <p class="normal"><strong class="keyWord">Warning!</strong> Actually, the console app is not AOT-compiled; it is still currently JIT-compiled because we have not yet published it.</p>
        </div>
      </li>
    </ol>
    <h2 id="_idParaDest-475" class="heading-2">Publishing a native AOT project</h2>
    <p class="normal">A console app that functions<a id="_idIndexMarker1137"/> correctly during development when the code is untrimmed and JIT-compiled could still fail once you publish it using native AOT, as the code is then trimmed and JIT-compiled, and therefore, it is different code with different behavior. You should, therefore, perform a publish action before assuming your project will work.</p>
    <p class="normal">If your project does not produce any AOT warnings at publish time, you can then be confident that your service will work after publishing for AOT.</p>
    <p class="normal">Let’s publish our console app:</p>
    <ol>
      <li class="numberedList" value="1">At the command prompt or terminal for the <code class="inlineCode">AotConsole</code> project, publish the console app using native AOT, as shown in the following command:
        <pre class="programlisting con-one"><code class="hljs-con">dotnet publish
</code></pre>
      </li>
      <li class="numberedList">Note the message about generating native code, as shown in the following<a id="_idIndexMarker1138"/> output:
        <pre class="programlisting con-one"><code class="hljs-con">MSBuild version 17.8.0+4ce2ff1f8 for .NET
  Determining projects to restore...
  Restored C:\cs13net9\Chapter07\AotConsole\AotConsole.csproj (in 173 ms).
  AotConsole -&gt; C:\cs13net9\Chapter07\AotConsole\bin\Release\net9.0\win-x64\AotConsole.dll
  Generating native code
  AotConsole -&gt; C:\cs13net9\Chapter07\AotConsole\bin\Release\net9.0\win-x64\publish\
</code></pre>
      </li>
      <li class="numberedList">Start <strong class="screenText">File Explorer</strong>, open the <code class="inlineCode">bin\Release\net9.0\win-x64\publish</code> folder, and note that the <code class="inlineCode">AotConsole.exe</code> file is about 1.2 MB. The <code class="inlineCode">AotConsole.pdb</code> file is only needed for debugging.</li>
      <li class="numberedList">Run the <code class="inlineCode">AotConsole.exe</code> and note that the console app has the same behavior as before.</li>
      <li class="numberedList">In <code class="inlineCode">Program.cs</code>, import namespaces to work with dynamic code assemblies, as shown in the following code:
        <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword">using</span> System.Reflection; <span class="hljs-comment">// To use AssemblyName.</span>
<span class="hljs-keyword">using</span> System.Reflection.Emit; <span class="hljs-comment">// To use AssemblyBuilder.</span>
</code></pre>
      </li>
      <li class="numberedList">In <code class="inlineCode">Program.cs</code>, create a dynamic assembly builder, as shown in the following code:
        <pre class="programlisting code-one"><code class="hljs-code">AssemblyBuilder ab = AssemblyBuilder.DefineDynamicAssembly(
  <span class="hljs-keyword">new</span> AssemblyName(<span class="hljs-string">"MyAssembly"</span>), AssemblyBuilderAccess.Run);
</code></pre>
      </li>
      <li class="numberedList">At the command prompt or terminal for the <code class="inlineCode">AotConsole</code> project, publish the console app using native AOT, as shown in the following command:
        <pre class="programlisting con-one"><code class="hljs-con">dotnet publish
</code></pre>
      </li>
      <li class="numberedList">Note the warning about calling the <code class="inlineCode">DefineDynamicAssembly</code> method, which the .NET team has decorated with the <code class="inlineCode">[RequiresDynamicCode]</code> attribute, as <a id="_idIndexMarker1139"/>shown in the following output:
        <pre class="programlisting con-one"><code class="hljs-con">C:\cs13net9\Chapter07\AotConsole\Program.cs(9,22): warning IL3050: Using member 'System.Reflection.Emit.AssemblyBuilder.DefineDynamicAssembly(AssemblyName, AssemblyBuilderAccess)' which has 'RequiresDynamicCodeAttribute' can break functionality when AOT compiling. Defining a dynamic assembly requires dynamic code. [C:\cs13net9\Chapter07\AotConsole\AotConsole.csproj]
</code></pre>
      </li>
      <li class="numberedList">Comment out the statement that we cannot use in an AOT project.</li>
    </ol>
    <div class="note">
      <p class="normal"><strong class="keyWord">More Information</strong>: You can learn more about native AOT<a id="_idIndexMarker1140"/> at the following link: <a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/native-aot/"><span class="url">https://learn.microsoft.com/en-us/dotnet/core/deploying/native-aot/</span></a>.</p>
    </div>
    <h1 id="_idParaDest-476" class="heading-1">Packaging your libraries for NuGet distribution</h1>
    <p class="normal">Before we learn how to create and package our own libraries, we will review how a project can use an existing package.</p>
    <h2 id="_idParaDest-477" class="heading-2">Referencing a NuGet package</h2>
    <p class="normal">Let’s say that you want to add a <a id="_idIndexMarker1141"/>package created by a third-party developer, for example, <code class="inlineCode">Newtonsoft.Json</code>, a popular package for working with<a id="_idIndexMarker1142"/> the <strong class="keyWord">JavaScript Object Notation</strong> (<strong class="keyWord">JSON</strong>) serialization format:</p>
    <ol>
      <li class="numberedList" value="1">In the <code class="inlineCode">AssembliesAndNamespaces</code> project, add a reference to the <code class="inlineCode">Newtonsoft.Json</code> NuGet package, either using the GUI for Visual Studio or the <code class="inlineCode">dotnet add package</code> command using the CLI.</li>
    </ol>
    <div class="note-one">
      <p class="normal">With the April release of C# Dev Kit, you can now manage your NuGet packages directly from VS Code using some commands in the command palette, as described at the following link: <a href="https://devblogs.microsoft.com/nuget/announcing-nuget-commands-in-c-dev-kit/"><span class="url">https://devblogs.microsoft.com/nuget/announcing-nuget-commands-in-c-dev-kit/</span></a>.</p>
    </div>
    <ol>
      <li class="numberedList" value="2">Open the <code class="inlineCode">AssembliesAndNamespaces.csproj</code> file and note that a package reference has been added, as shown in the following markup:
        <pre class="programlisting code-one"><code class="hljs-code">&lt;ItemGroup&gt;
  &lt;PackageReference Include=<span class="hljs-string">"Newtonsoft.Json"</span>
                    Version=<span class="hljs-string">"13.0.3"</span> /&gt;
&lt;/ItemGroup&gt;
</code></pre>
      </li>
    </ol>
    <p class="normal">If you have a more recent version of the <code class="inlineCode">Newtonsoft.Json</code> package, then it has been updated since this chapter was written.</p>
    <h2 id="_idParaDest-478" class="heading-2">Fixing dependencies</h2>
    <p class="normal">To consistently restore <a id="_idIndexMarker1143"/>packages and write reliable code, it’s important that you <strong class="keyWord">fix dependencies</strong>. Fixing dependencies means you are using the same family of packages released for a specific version of .NET, for example, SQLite for .NET 9, as shown highlighted in the following markup:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">Project</span><span class="hljs-tag"> </span><span class="hljs-attr">Sdk</span><span class="hljs-tag">=</span><span class="hljs-string">"Microsoft.NET.Sdk"</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">OutputType</span><span class="hljs-tag">&gt;</span>Exe<span class="hljs-tag">&lt;/</span><span class="hljs-name">OutputType</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">TargetFramework</span><span class="hljs-tag">&gt;</span>net9.0<span class="hljs-tag">&lt;/</span><span class="hljs-name">TargetFramework</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">Nullable</span><span class="hljs-tag">&gt;</span>enable<span class="hljs-tag">&lt;/</span><span class="hljs-name">Nullable</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">ImplicitUsings</span><span class="hljs-tag">&gt;</span>enable<span class="hljs-tag">&lt;/</span><span class="hljs-name">ImplicitUsings</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">ItemGroup</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">PackageReference</span><span class="hljs-tag"> </span><span class="hljs-attr">Version</span><span class="hljs-tag">=</span><span class="hljs-string">"9.0.0"</span>
<span class="hljs-tag">      </span><span class="hljs-attr">Include</span><span class="hljs-tag">=</span><span class="hljs-string">"</span><span class="hljs-string">Microsoft.EntityFrameworkCore.Sqlite"</span><span class="hljs-tag"> /&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">ItemGroup</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">Project</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">To fix<a id="_idIndexMarker1144"/> dependencies, every package should have a single version with no additional qualifiers. Additional qualifiers include betas (<code class="inlineCode">beta1</code>), release candidates (<code class="inlineCode">rc4</code>), and wildcards (<code class="inlineCode">*</code>).</p>
    <p class="normal">Wildcards allow future versions to be automatically referenced and used because they always represent the most recent release. Wildcards are, therefore, dangerous because they could result in the use of future incompatible packages that break your code.</p>
    <p class="normal">This can be worth the risk while writing a book where new preview versions are released every month and you do not want to keep updating the preview package references, as I did during 2024, and as shown in the following markup:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">PackageReference</span><span class="hljs-tag"> </span><span class="hljs-attr">Version</span><span class="hljs-tag">=</span><span class="hljs-string">"9.0.0-preview.*"</span>
<span class="hljs-tag">  </span><span class="hljs-attr">Include</span><span class="hljs-tag">=</span><span class="hljs-string">"Microsoft.EntityFrameworkCore.Sqlite"</span><span class="hljs-tag"> /&gt;</span>
</code></pre>
    <p class="normal">To also automatically use the release candidates that arrive in September and October each year, you can make the pattern even more flexible, as shown in the following markup:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">PackageReference</span><span class="hljs-tag"> </span><span class="hljs-attr">Version</span><span class="hljs-tag">=</span><span class="hljs-string">"9.0-*"</span>
<span class="hljs-tag">  </span><span class="hljs-attr">Include</span><span class="hljs-tag">=</span><span class="hljs-string">"Microsoft.EntityFrameworkCore.Sqlite"</span><span class="hljs-tag"> /&gt;</span>
</code></pre>
    <p class="normal">If you use the <code class="inlineCode">dotnet add package</code> command or Visual Studio’s <strong class="screenText">Manage NuGet Packages</strong>, then it will by default use the latest specific version of a package. But if you copy and paste configuration from a blog article or manually add a reference yourself, you might include wildcard qualifiers.</p>
    <p class="normal">The following<a id="_idIndexMarker1145"/> dependencies are examples of NuGet package references that are <em class="italic">not</em> fixed and, therefore, should be avoided unless you know the implications:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">PackageReference</span><span class="hljs-tag"> </span><span class="hljs-attr">Include</span><span class="hljs-tag">=</span><span class="hljs-string">"System.Net.Http"</span><span class="hljs-tag"> </span><span class="hljs-attr">Version</span><span class="hljs-tag">=</span><span class="hljs-string">"4.1.0-*"</span><span class="hljs-tag"> /&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">PackageReference</span><span class="hljs-tag"> </span><span class="hljs-attr">Include</span><span class="hljs-tag">=</span><span class="hljs-string">"Newtonsoft.Json"</span><span class="hljs-tag"> </span><span class="hljs-attr">Version</span><span class="hljs-tag">=</span><span class="hljs-string">"13.0.2-beta1"</span><span class="hljs-tag"> /&gt;</span>
</code></pre>
    <div class="packt_tip">
      <p class="normal"><strong class="keyWord">Good Practice</strong>: Microsoft guarantees that if you fix your dependencies to what ships with a specific version of .NET, for example, <code class="inlineCode">9.0.0</code>, those packages will all work together. Almost always fix your dependencies, especially in production deployments.</p>
    </div>
    <h2 id="_idParaDest-479" class="heading-2">Packaging a library for NuGet</h2>
    <p class="normal">Now, let’s <a id="_idIndexMarker1146"/>package the <code class="inlineCode">SharedLibrary</code> project that you created earlier:</p>
    <ol>
      <li class="numberedList" value="1">In the <code class="inlineCode">SharedLibrary</code> project, note that the class library targets .NET Standard 2.0 and, therefore, by default, uses the C# 7.3 compiler. Explicitly specify the C# 12 compiler, as shown in the following markup:
        <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">Project</span><span class="hljs-tag"> </span><span class="hljs-attr">Sdk</span><span class="hljs-tag">=</span><span class="hljs-string">"Microsoft.NET.Sdk"</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">TargetFramework</span><span class="hljs-tag">&gt;</span>netstandard2.0<span class="hljs-tag">&lt;/</span><span class="hljs-name">TargetFramework</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">LangVersion</span><span class="hljs-tag">&gt;</span>12<span class="hljs-tag">&lt;/</span><span class="hljs-name">LangVersion</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">Project</span><span class="hljs-tag">&gt;</span>
</code></pre>
      </li>
      <li class="numberedList">In the <code class="inlineCode">SharedLibrary</code> project, rename the <code class="inlineCode">Class1.cs</code> file <code class="inlineCode">StringExtensions.cs</code>.</li>
      <li class="numberedList">Modify its contents to provide some useful extension methods to validate various text values, using regular expressions, as shown in the <a id="_idIndexMarker1147"/>following code:
        <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword">using</span> System.Text.RegularExpressions; <span class="hljs-comment">// To use Regex.</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Packt.Shared</span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">StringExtensions</span>
{
  <span class="hljs-keyword">public</span><span class="hljs-function"> </span><span class="hljs-keyword">static</span><span class="hljs-function"> </span><span class="hljs-built_in">bool</span><span class="hljs-function"> </span><span class="hljs-title">IsValidXmlTag</span><span class="hljs-function">(</span><span class="hljs-keyword">this</span><span class="hljs-params"> </span><span class="hljs-built_in">string</span><span class="hljs-params"> input</span><span class="hljs-function">)</span>
  {
    <span class="hljs-keyword">return</span> Regex.IsMatch(input,
      <span class="hljs-string">@"^&lt;([a-z]+)([^&lt;]+)*(?:&gt;(.*)&lt;\/\1&gt;|\s+\/&gt;)$"</span>);
  }
  <span class="hljs-keyword">public</span><span class="hljs-function"> </span><span class="hljs-keyword">static</span><span class="hljs-function"> </span><span class="hljs-built_in">bool</span><span class="hljs-function"> </span><span class="hljs-title">IsValidPassword</span><span class="hljs-function">(</span><span class="hljs-keyword">this</span><span class="hljs-params"> </span><span class="hljs-built_in">string</span><span class="hljs-params"> input</span><span class="hljs-function">)</span>
  {
    <span class="hljs-comment">// Minimum of eight valid characters.</span>
    <span class="hljs-keyword">return</span> Regex.IsMatch(input, <span class="hljs-string">"^[a-zA-Z0-9_-]{8,}$"</span>);
  }
  <span class="hljs-keyword">public</span><span class="hljs-function"> </span><span class="hljs-keyword">static</span><span class="hljs-function"> </span><span class="hljs-built_in">bool</span><span class="hljs-function"> </span><span class="hljs-title">IsValidHex</span><span class="hljs-function">(</span><span class="hljs-keyword">this</span><span class="hljs-params"> </span><span class="hljs-built_in">string</span><span class="hljs-params"> input</span><span class="hljs-function">)</span>
  {
    <span class="hljs-comment">// Three or six valid hex number characters.</span>
    <span class="hljs-keyword">return</span> Regex.IsMatch(input,
      <span class="hljs-string">"^#?([a-fA-F0-9]{3}|[a-fA-F0-9]{6})$"</span>);
  }
}
</code></pre>
      </li>
    </ol>
    <div class="note-one">
      <p class="normal">You will learn how to write regular expressions in <em class="chapterRef">Chapter 8</em>, <em class="italic">Working with Common .NET Types</em>.</p>
    </div>
    <ol>
      <li class="numberedList" value="4">In <code class="inlineCode">SharedLibrary.csproj</code>, modify its contents, as shown highlighted in the following markup, and note the following:<ul>
          <li class="bulletList level-2"><code class="inlineCode">PackageId</code> must be globally unique, so you must use a different value if you want to publish this NuGet package to the <a href="https://www.nuget.org/"><span class="url">https://www.nuget.org/</span></a> public feed for others to reference and download.</li>
          <li class="bulletList level-2"><code class="inlineCode">PackageLicenseExpression</code> must be<a id="_idIndexMarker1148"/> a value from <a href="https://spdx.org/licenses/"><span class="url">https://spdx.org/licenses/</span></a>, or you could specify a custom license.</li>
        </ul>
        <div class="packt_tip">
          <p class="normal"><strong class="keyWord">Warning!</strong> If you rely on IntelliSense to edit the file, then it could mislead you to use deprecated tag names. For example, <code class="inlineCode">&lt;PackageIconUrl&gt;</code> is deprecated in favor of <code class="inlineCode">&lt;PackageIcon&gt;</code>. Sometimes, you cannot trust automated tools to help you correctly! The recommended tag names are documented in the <strong class="keyWord">MSBuild Property</strong> column in<a id="_idIndexMarker1149"/> the table found at the following link: <a href="https://learn.microsoft.com/en-us/nuget/reference/msbuild-targets#pack-target"><span class="url">https://learn.microsoft.com/en-us/nuget/reference/msbuild-targets#pack-target</span></a>.</p>
        </div>
        <ul>
          <li class="bulletList level-2">All the other elements are self-explanatory:
            <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">Project</span><span class="hljs-tag"> </span><span class="hljs-attr">Sdk</span><span class="hljs-tag">=</span><span class="hljs-string">"Microsoft.NET.Sdk"</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">TargetFramework</span><span class="hljs-tag">&gt;</span>netstandard2.0<span class="hljs-tag">&lt;/</span><span class="hljs-name">TargetFramework</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">LangVersion</span><span class="hljs-tag">&gt;</span>12<span class="hljs-tag">&lt;/</span><span class="hljs-name">LangVersion</span><span class="hljs-tag">&gt;</span>
    <span class="code-highlight"><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">GeneratePackageOnBuild</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">true</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">GeneratePackageOnBuild</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">PackageId</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">Packt.CSdotnet.SharedLibrary</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">PackageId</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">PackageVersion</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">9.0.0.0</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">PackageVersion</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">Title</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">C# 13 and .NET 9 Shared Library</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">Title</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">Authors</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">Mark J Price</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">Authors</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">PackageLicenseExpression</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">      MS-PL</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">PackageLicenseExpression</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">PackageProjectUrl</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">      https://github.com/markjprice/cs13net9</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">PackageProjectUrl</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">PackageReadmeFile</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">readme.md</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">PackageReadmeFile</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">PackageIcon</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">packt-csdotnet-sharedlibrary.png</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">PackageIcon</strong><strong class="hljs-tag-slc">&gt;</strong></span>
    <span class="code-highlight"><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">PackageRequireLicenseAcceptance</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">true</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">PackageRequireLicenseAcceptance</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">PackageReleaseNotes</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">      Example shared library packaged for NuGet.</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">PackageReleaseNotes</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">Description</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">      Three extension methods to validate a string value.</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">Description</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">Copyright</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">      Copyright © 2016-2023 Packt Publishing Limited</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">Copyright</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">PackageTags</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">string extensions packt csharp dotnet</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">PackageTags</strong><strong class="hljs-tag-slc">&gt;</strong></span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">ItemGroup</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">None</strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc">Include</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"packt-csdotnet-sharedlibrary.png"</strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc">          </strong><strong class="hljs-attr-slc">PackagePath</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"\"</strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc">Pack</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"true"</strong><strong class="hljs-tag-slc"> /&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">None</strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc">Include</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"readme.md"</strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc">          </strong><strong class="hljs-attr-slc">PackagePath</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"\"</strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc">Pack</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"true"</strong><strong class="hljs-tag-slc"> /&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">ItemGroup</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">Project</span><span class="hljs-tag">&gt;</span>
</code></pre>
            <div class="note-one">
              <p class="normal"><code class="inlineCode">&lt;None&gt;</code> represents a file that does not participate in the build process. <code class="inlineCode">Pack="true"</code> means the file will be included in the NuGet package created in the specified package path location. You can learn more at the following link: <a href="https://learn.microsoft.com/en-us/nuget/reference/msbuild-targets#packing-an-icon-image-file"><span class="url">https://learn.microsoft.com/en-us/nuget/reference/msbuild-targets#packing-an-icon-image-file</span></a>.</p>
            </div>
          </li>
        </ul>
      </li>
    </ol>
    <div class="packt_tip-one">
      <p class="normal"><strong class="keyWord">Good Practice</strong>: Configuration property values that are <code class="inlineCode">true</code> or <code class="inlineCode">false</code> values cannot have any whitespace.</p>
    </div>
    <ol>
      <li class="numberedList" value="5">Download the<a id="_idIndexMarker1150"/> icon file and save it in the <code class="inlineCode">SharedLibrary</code> project folder from the following link: <a href="https://github.com/markjprice/cs13net9/blob/main/code/Chapter07/SharedLibrary/packt-csdotnet-sharedlibrary.png"><span class="url">https://github.com/markjprice/cs13net9/blob/main/code/Chapter07/SharedLibrary/packt-csdotnet-sharedlibrary.png</span></a>.</li>
      <li class="numberedList">In the <code class="inlineCode">SharedLibrary</code> project folder, create a file named <code class="inlineCode">readme.md</code>, with some basic information about the package, as shown in the following markup:
        <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-meta"># README for C# 13 and .NET 9 Shared Library</span>
This <span class="hljs-keyword">is</span> a shared library that readers build <span class="hljs-keyword">in</span> the book,
*C<span class="hljs-meta"># 13 and .NET 9 - Modern Cross-Platform Development Fundamentals*.</span>
</code></pre>
      </li>
      <li class="numberedList">Build the release assembly:<ul>
          <li class="bulletList level-2">In Visual Studio, select <strong class="screenText">Release</strong> in the toolbar, and then navigate to <strong class="screenText">Build</strong> | <strong class="screenText">Build SharedLibrary</strong>.</li>
          <li class="bulletList level-2">In VS Code, in <strong class="screenText">Terminal</strong>, enter <code class="inlineCode">dotnet build -c Release</code>.</li>
        </ul>
      </li>
    </ol>
    <p class="normal-one">If we had not set <code class="inlineCode">&lt;GeneratePackageOnBuild&gt;</code> to <code class="inlineCode">true</code> in the project file, then we would have had to create a NuGet package manually using the following additional steps:</p>
    <ul>
      <li class="bulletList level-2">In Visual Studio, navigate to <strong class="screenText">Build</strong> | <strong class="screenText">Pack SharedLibrary</strong>.</li>
      <li class="bulletList level-2">In VS Code, in <strong class="screenText">Terminal</strong>, enter <code class="inlineCode">dotnet pack -c Release</code>.</li>
    </ul>
    <h2 id="_idParaDest-480" class="heading-2">Publishing a package to a public NuGet feed</h2>
    <p class="normal">If you want everyone <a id="_idIndexMarker1151"/>to be able to download and use your NuGet package, then you must upload it to a public NuGet feed like Microsoft’s:</p>
    <ol>
      <li class="numberedList" value="1">Start your<a id="_idIndexMarker1152"/> favorite browser and navigate to the following link: <a href="https://www.nuget.org/packages/manage/upload"><span class="url">https://www.nuget.org/packages/manage/upload</span></a>.</li>
      <li class="numberedList">You will need to sign up for, and then sign in with, a Microsoft account at <a href="https://www.nuget.org/"><span class="url">https://www.nuget.org/</span></a> if you want to upload a NuGet package for other developers to reference as a dependency package.</li>
      <li class="numberedList">Click the <strong class="screenText">Browse...</strong> button and select the <code class="inlineCode">.nupkg</code> file that was created by generating the NuGet package. The folder path should be <code class="inlineCode">cs13net9\Chapter07\SharedLibrary\bin\Release</code> and the file is named <code class="inlineCode">Packt.CSdotnet.SharedLibrary.9.0.0.nupkg</code>.</li>
      <li class="numberedList">Verify that the information you entered in the <code class="inlineCode">SharedLibrary.csproj</code> file has been correctly filled in, and then click <strong class="screenText">Submit</strong>.</li>
      <li class="numberedList">Wait a few seconds, and then you will see a success message, showing that your package has been uploaded, as shown in <em class="italic">Figure 7.4</em>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B22322_07_04.png" alt="" width="812" height="570"/></figure>
    <p class="packt_figref">Figure 7.4: A NuGet package upload message</p>
    <div class="packt_tip-one">
      <p class="normal"><strong class="keyWord">Good Practice</strong>: If you get an error, then review the project file for mistakes, or read more information about the <code class="inlineCode">PackageReference</code> format at <a href="https://learn.microsoft.com/en-us/nuget/reference/msbuild-targets"><span class="url">https://learn.microsoft.com/en-us/nuget/reference/msbuild-targets</span></a>.</p>
    </div>
    <ol>
      <li class="numberedList" value="6">Click <a id="_idIndexMarker1153"/>the <strong class="screenText">Frameworks</strong> tab, and note that because we targeted .NET Standard 2.0, our class library can be used by every .NET platform, as shown in <em class="italic">Figure 7.5</em>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B22322_07_05.png" alt="" width="812" height="501"/></figure>
    <p class="packt_figref">Figure 7.5: .NET Standard 2.0 class library package can be used by all .NET platforms</p>
    <h2 id="_idParaDest-481" class="heading-2">Publishing a package to a private NuGet feed</h2>
    <p class="normal">Organizations can<a id="_idIndexMarker1154"/> host their own private NuGet feeds. This can be a handy way for many developer teams to share work. You can read more at the following link: <a href="https://learn.microsoft.com/en-us/nuget/hosting-packages/overview"><span class="url">https://learn.microsoft.com/en-us/nuget/hosting-packages/overview</span></a>.</p>
    <h2 id="_idParaDest-482" class="heading-2">Exploring NuGet packages with a tool</h2>
    <p class="normal">A handy tool named <strong class="keyWord">NuGet Package Explorer</strong>, for opening and reviewing more details about a NuGet <a id="_idIndexMarker1155"/>package, was created by Uno Platform. As well as being a website, it can be installed as a cross-platform app. Let’s see what it can do:</p>
    <ol>
      <li class="numberedList" value="1">Start your favorite browser and navigate to the following link: <a href="https://nuget.info"><span class="url">https://nuget.info</span></a>.</li>
      <li class="numberedList">In the search box, enter <code class="inlineCode">Packt.CSdotnet.SharedLibrary</code>.</li>
      <li class="numberedList">Select the package <strong class="screenText">v9.0.0</strong> published by <strong class="screenText">Mark J Price</strong>, and then click the <strong class="screenText">Open</strong> button.</li>
      <li class="numberedList">In the <strong class="screenText">Contents</strong> section, expand the <code class="inlineCode">lib</code> folder and the <code class="inlineCode">netstandard2.0</code> folder.</li>
      <li class="numberedList">Select <code class="inlineCode">SharedLibrary.dll</code>, and note the details, as shown in <em class="italic">Figure 7.6</em>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B22322_07_06.png" alt="" width="812" height="501"/></figure>
    <p class="packt_figref">Figure 7.6: Exploring my package using NuGet Package Explorer from Uno Platform</p>
    <ol>
      <li class="numberedList" value="6">If you want to use this <a id="_idIndexMarker1156"/>tool locally in the future, click the <strong class="screenText">Install</strong> button in your browser.</li>
      <li class="numberedList">Close your browser.</li>
    </ol>
    <p class="normal">Not all browsers support installing web apps like this. I recommend Chrome for testing and development.</p>
    <h2 id="_idParaDest-483" class="heading-2">Testing your class library package</h2>
    <p class="normal">You will now test your uploaded <a id="_idIndexMarker1157"/>package by referencing it in the <code class="inlineCode">AssembliesAndNamespaces</code> project:</p>
    <ol>
      <li class="numberedList" value="1">In the <code class="inlineCode">AssembliesAndNamespaces</code> project, add a reference to your (or my) package, as shown highlighted in the following markup:
        <pre class="programlisting code-one"><code class="hljs-code">&lt;ItemGroup&gt;
  &lt;PackageReference Include=<span class="hljs-string">"Newtonsoft.Json"</span> Version=<span class="hljs-string">"13.0.3"</span> /&gt;
<span class="code-highlight"><strong class="hljs-slc">  &lt;PackageReference Include=</strong><strong class="hljs-string-slc">"Packt.CSdotnet.SharedLibrary"</strong></span>
<span class="code-highlight"><strong class="hljs-slc">                    Version=</strong><strong class="hljs-string-slc">"9.0.0"</strong><strong class="hljs-slc"> /&gt;</strong></span>
&lt;/ItemGroup&gt;
</code></pre>
      </li>
      <li class="numberedList">Build the <code class="inlineCode">AssembliesAndNamespaces</code> project.</li>
      <li class="numberedList">In <code class="inlineCode">Program.cs</code>, import the <code class="inlineCode">Packt.Shared</code> namespace.</li>
      <li class="numberedList">In <code class="inlineCode">Program.cs</code>, prompt the<a id="_idIndexMarker1158"/> user to enter some <code class="inlineCode">string</code> values, and then validate them using the extension methods in the package, as shown in the following code:
        <pre class="programlisting code-one"><code class="hljs-code">Write(<span class="hljs-string">"Enter a color value in hex: "</span>);
<span class="hljs-built_in">string</span>? hex = ReadLine();
WriteLine(<span class="hljs-string">"Is {0} a valid color value? {1}"</span>,
  arg0: hex, arg1: hex.IsValidHex());
Write(<span class="hljs-string">"Enter a XML element: "</span>);
<span class="hljs-built_in">string</span>? xmlTag = ReadLine();
WriteLine(<span class="hljs-string">"Is {0} a valid XML element? {1}"</span>,
  arg0: xmlTag, arg1: xmlTag.IsValidXmlTag());
Write(<span class="hljs-string">"Enter a password: "</span>);
<span class="hljs-built_in">string</span>? password = ReadLine();
WriteLine(<span class="hljs-string">"Is {0} a valid password? {1}"</span>,
  arg0: password, arg1: password.IsValidPassword());
</code></pre>
      </li>
      <li class="numberedList">Run the <code class="inlineCode">AssembliesAndNamespaces</code> project, enter some values as prompted, and view the results, as shown in the following output:
        <pre class="programlisting con-one"><code class="hljs-con">Enter a color value in hex: 00ffc8
Is 00ffc8 a valid color value? True
Enter an XML element: &lt;h1 class="&lt;" /&gt;
Is &lt;h1 class="&lt;" /&gt; a valid XML element? False
Enter a password: secretsauce
Is secretsauce a valid password? True
</code></pre>
      </li>
    </ol>
    <h1 id="_idParaDest-484" class="heading-1">Working with preview features</h1>
    <p class="normal">It is a challenge for <a id="_idIndexMarker1159"/>Microsoft to deliver some new features that have cross-cutting effects across many parts of .NET, like the runtime, language compilers, and API libraries. It is the classic chicken and egg problem. What do you do first?</p>
    <p class="normal">From a practical perspective, it means that although Microsoft might have completed most of the work needed for a feature, the whole thing might not be ready until very late in their now annual cycle of .NET releases, which is too late for proper testing in “the wild.”</p>
    <p class="normal">So from .NET 6 onward, Microsoft will include preview features in <strong class="keyWord">general availability</strong> (<strong class="keyWord">GA</strong>) releases. Developers can <a id="_idIndexMarker1160"/>opt into these preview features and provide Microsoft with feedback. In a later GA release, they can be enabled for everyone.</p>
    <div class="note">
      <p class="normal">It is important to note that this topic is about <em class="italic">preview features</em>. This is different from a preview version of .NET or Visual Studio. Microsoft releases preview versions of Visual Studio and .NET while developing them to get feedback from developers, and then they do a final GA release. With GA, the feature is available for everyone. Before GA, the only way to get the new functionality was to install a preview version. <em class="italic">Preview features</em> are different because they are installed with GA releases and must be optionally enabled.</p>
    </div>
    <p class="normal">For example, when Microsoft released .NET SDK 6.0.200 in February 2022, it included the C# 11 compiler as a preview feature. This meant that .NET 6 developers could optionally set the language version to <code class="inlineCode">preview</code> and then start exploring C# 11 features, like raw string literals and the <code class="inlineCode">required</code> keyword.</p>
    <p class="normal">Once .NET SDK 7.0.100 was released in November 2022, any .NET 6 developer who wanted to continue to use the C# 11 compiler would then need to use the .NET 7 SDK for their .NET 6 projects and set the target framework to <code class="inlineCode">net6.0</code>, with a <code class="inlineCode">&lt;LangVersion&gt;</code> set to <code class="inlineCode">11</code>. This way, they use the supported .NET 7 SDK with the supported C# 11 compiler to build .NET 6 projects.</p>
    <p class="normal">In November 2025, Microsoft is <a id="_idIndexMarker1161"/>likely to release .NET 10 SDK with a C# 14 compiler. You can then install and use the .NET 10 SDK to gain the benefits of whatever new features are available in C# 14, while still targeting .NET 9, as shown highlighted in the following <code class="inlineCode">Project</code> file:</p>
    <pre class="programlisting code"><code class="hljs-code">&lt;Project Sdk=<span class="hljs-string">"Microsoft.NET.Sdk"</span>&gt;
  &lt;PropertyGroup&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
<span class="code-highlight"><strong class="hljs-slc">    &lt;TargetFramework&gt;net9</strong><strong class="hljs-number-slc">.0</strong><strong class="hljs-slc">&lt;/TargetFramework&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    &lt;LangVersion&gt;</strong><strong class="hljs-number-slc">14</strong><strong class="hljs-slc">&lt;/LangVersion&gt; &lt;!--Requires .NET </strong><strong class="hljs-number-slc">10</strong><strong class="hljs-slc"> SDK GA--&gt;</strong></span>
    &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;
    &lt;Nullable&gt;enable&lt;/Nullable&gt;
  &lt;/PropertyGroup&gt;
&lt;/Project&gt;
</code></pre>
    <div class="note">
      <p class="normal"><strong class="keyWord">Good Practice</strong>: Preview features are not supported in production code. Preview features are likely to have breaking changes before the final release. Enable preview features at your own risk. Switch to a GA-release future SDK like .NET 11 to use new compiler features, while still targeting older but longer-supported versions of .NET like .NET 8 or 10.</p>
    </div>
    <h2 id="_idParaDest-485" class="heading-2">Requiring preview features</h2>
    <p class="normal">The <code class="inlineCode">[RequiresPreviewFeatures]</code> attribute is <a id="_idIndexMarker1162"/>used to indicate assemblies, types, or members that use, and, therefore, require warnings about, preview features. A code analyzer can scan for this attribute and then generate warnings if needed. If your code does not use any preview features, you will not see any warnings. If your code does use any preview features, then you will see warnings. Your code should also be decorated with this attribute to warn other developers that your code uses preview features.</p>
    <h2 id="_idParaDest-486" class="heading-2">Enabling preview features</h2>
    <p class="normal">In the <code class="inlineCode">Project</code> file, add <a id="_idIndexMarker1163"/>an element to enable preview features and an element to enable preview language features, as shown highlighted in the following markup:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">Project</span><span class="hljs-tag"> </span><span class="hljs-attr">Sdk</span><span class="hljs-tag">=</span><span class="hljs-string">"Microsoft.NET.Sdk"</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">OutputType</span><span class="hljs-tag">&gt;</span>Exe<span class="hljs-tag">&lt;/</span><span class="hljs-name">OutputType</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">TargetFramework</span><span class="hljs-tag">&gt;</span>net9.0<span class="hljs-tag">&lt;/</span><span class="hljs-name">TargetFramework</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">Nullable</span><span class="hljs-tag">&gt;</span>enable<span class="hljs-tag">&lt;/</span><span class="hljs-name">Nullable</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">ImplicitUsings</span><span class="hljs-tag">&gt;</span>enable<span class="hljs-tag">&lt;/</span><span class="hljs-name">ImplicitUsings</span><span class="hljs-tag">&gt;</span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">EnablePreviewFeatures</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">true</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">EnablePreviewFeatures</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">LangVersion</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">preview</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">LangVersion</strong><strong class="hljs-tag-slc">&gt;</strong></span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">PropertyGroup</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">Project</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <h2 id="_idParaDest-487" class="heading-2">Method interceptors</h2>
    <p class="normal">An interceptor<a id="_idIndexMarker1164"/> is a method that substitutes a call to an interceptable method with a call to itself. This is an advanced feature most commonly used in source <a id="_idIndexMarker1165"/>generators. If you are interested, then I might add a section about them to the ninth edition.</p>
    <div class="note">
      <p class="normal"><strong class="keyWord">More Information</strong>: You can learn more<a id="_idIndexMarker1166"/> about interceptors at the following link: <a href="https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-12#interceptors"><span class="url">https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-12#interceptors</span></a>.</p>
    </div>
    <h1 id="_idParaDest-488" class="heading-1">Practicing and exploring</h1>
    <p class="normal">Test your knowledge and understanding by answering some questions, getting some hands-on practice, and researching the topics of this chapter further.</p>
    <h2 id="_idParaDest-489" class="heading-2">Exercise 7.1 – Online material</h2>
    <p class="normal">Online material can be extra content written by me for this book, or it can be references to content created by Microsoft or third parties.</p>
    <h3 id="_idParaDest-490" class="heading-3">Experimental MSBuild editor</h3>
    <p class="normal">MSBuild is an essential component of the .NET development experience, yet it can be difficult for both new and experienced developers to navigate. To help developers better understand their project files and utilize advanced features that require direct project file editing, the Microsoft team is introducing an experimental MSBuild editor. This new editor offers a deeper understanding of MSBuild files beyond what the current XML schema provides.</p>
    <p class="normal">If you want to try out the extension, search for <strong class="screenText">MSBuild Editor</strong> in the Visual Studio Extension Manager. Currently, the extension is only available for Visual Studio, but efforts are underway to port it to VS Code.</p>
    <p class="normal">You can learn more about the new MSBuild editor experience at the following link:</p>
    <p class="normal"><a href="https://devblogs.microsoft.com/visualstudio/experimental-msbuild-editor/"><span class="url">https://devblogs.microsoft.com/visualstudio/experimental-msbuild-editor/</span></a></p>
    <h3 id="_idParaDest-491" class="heading-3">Improving performance in .NET</h3>
    <p class="normal">Microsoft has made significant improvements to .NET performance in the past few years. You should review the blog posts written by Stephen Toub to learn what the team changed and why. His posts are famously long, detailed, and brilliant!</p>
    <p class="normal">You can find the posts about the improvements at the following links:</p>
    <ul>
      <li class="bulletList"><a href="https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-core/"><span class="url">https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-core/</span></a> - 25 pages</li>
      <li class="bulletList"><a href="https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-core-2-1/"><span class="url">https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-core-2-1/</span></a> - 20 pages</li>
      <li class="bulletList"><a href="https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-core-3-0/"><span class="url">https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-core-3-0/</span></a> - 41 pages</li>
      <li class="bulletList"><a href="https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-5/"><span class="url">https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-5/</span></a> - 43 pages</li>
      <li class="bulletList"><a href="https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-6/"><span class="url">https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-6/</span></a> - 100 pages</li>
      <li class="bulletList"><a href="https://devblogs.microsoft.com/dotnet/performance_improvements_in_net_7/"><span class="url">https://devblogs.microsoft.com/dotnet/performance_improvements_in_net_7/</span></a> - 156 pages</li>
      <li class="bulletList"><a href="https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-8/"><span class="url">https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-8/</span></a> - 218 pages</li>
      <li class="bulletList"><a href="https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-9/"><span class="url">https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-9/</span></a> - 307 pages</li>
    </ul>
    <h3 id="_idParaDest-492" class="heading-3">Decompiling .NET assemblies</h3>
    <p class="normal">To learn about decompiling .NET assemblies, you can read the following link:</p>
    <p class="normal"><a href="https://github.com/markjprice/cs13net9/blob/main/docs/ch07-decompiling.md"><span class="url">https://github.com/markjprice/cs13net9/blob/main/docs/ch07-decompiling.md</span></a></p>
    <h3 id="_idParaDest-493" class="heading-3">Porting from .NET Framework to modern .NET</h3>
    <p class="normal">If you are interested in porting legacy projects from .NET Framework to modern .NET, then I have written an online-only section at the following link:</p>
    <p class="normal"><a href="https://github.com/markjprice/cs13net9/blob/main/docs/ch07-porting.md"><span class="url">https://github.com/markjprice/cs13net9/blob/main/docs/ch07-porting.md</span></a></p>
    <h2 id="_idParaDest-494" class="heading-2">Exercise 7.2 – Practice exercises</h2>
    <p class="normal">Practice exercises to dive deeper into the topics of this chapter.</p>
    <h3 id="_idParaDest-495" class="heading-3">Creating source generators</h3>
    <p class="normal">If you are interested in creating source generators, then I have written an online-only section at the following link:</p>
    <p class="normal"><a href="https://github.com/markjprice/cs13net9/blob/main/docs/ch07-source-generators.md"><span class="url">https://github.com/markjprice/cs13net9/blob/main/docs/ch07-source-generators.md</span></a></p>
    <p class="normal">You can find examples of source generators at the following link:</p>
    <p class="normal"><a href="https://github.com/amis92/csharp-source-generators"><span class="url">https://github.com/amis92/csharp-source-generators</span></a></p>
    <h3 id="_idParaDest-496" class="heading-3">Explore PowerShell</h3>
    <p class="normal">PowerShell is Microsoft’s scripting language for automating tasks on every OS. Microsoft recommends VS Code with the PowerShell extension to write PowerShell scripts.</p>
    <p class="normal">Since PowerShell is its own extensive language, there is not enough space in this book to cover it. You can learn about some key concepts from a Microsoft training module at the following link: <a href="https://learn.microsoft.com/en-us/training/modules/introduction-to-powershell/"><span class="url">https://learn.microsoft.com/en-us/training/modules/introduction-to-powershell/</span></a>.</p>
    <p class="normal">You can read the official documentation at the following link: <a href="https://learn.microsoft.com/en-us/powershell/"><span class="url">https://learn.microsoft.com/en-us/powershell/</span></a>.</p>
    <h2 id="_idParaDest-497" class="heading-2">Exercise 7.3 – Test your knowledge</h2>
    <p class="normal">Answer the following questions:</p>
    <ol>
      <li class="numberedList" value="1">What is the difference between a namespace and an assembly?</li>
      <li class="numberedList">How do you reference another project in a <code class="inlineCode">.csproj</code> file?</li>
      <li class="numberedList">What is the benefit of a tool like ILSpy?</li>
      <li class="numberedList">Which .NET type does the C# <code class="inlineCode">float</code> alias represent?</li>
      <li class="numberedList">What are the <code class="inlineCode">&lt;PropertyGroup&gt;</code> and <code class="inlineCode">&lt;ItemGroup&gt;</code> elements used for in a .NET project file?</li>
      <li class="numberedList">What is the difference between framework-dependent and self-contained deployments of .NET applications?</li>
      <li class="numberedList">What is a RID?</li>
      <li class="numberedList">What is the difference between the <code class="inlineCode">dotnet pack</code> and <code class="inlineCode">dotnet publish</code> commands?</li>
      <li class="numberedList">How can you control the sources that a build process uses to download NuGet packages?</li>
      <li class="numberedList">What are some limitations of using AOT compilation?</li>
    </ol>
    <h2 id="_idParaDest-498" class="heading-2">Exercise 7.4 – Explore topics</h2>
    <p class="normal">Use the links on the following page to learn more details about the topics covered in this chapter:</p>
    <p class="normal"><a href="https://github.com/markjprice/cs13net9/blob/main/docs/book-links.md#chapter-7---packaging-and-distributing-net-types"><span class="url">https://github.com/markjprice/cs13net9/blob/main/docs/book-links.md#chapter-7---packaging-and-distributing-net-types</span></a></p>
    <h1 id="_idParaDest-499" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, we:</p>
    <ul>
      <li class="bulletList">Reviewed the journey of .NET for BCL functionality.</li>
      <li class="bulletList">Explored the relationship between assemblies and namespaces.</li>
      <li class="bulletList">Saw options to publish an app for distribution to multiple OSes.</li>
      <li class="bulletList">Learned how to publish to native AOT for faster startup and a smaller memory footprint.</li>
      <li class="bulletList">Packaged and distributed a class library.</li>
      <li class="bulletList">Learned how to activate preview features.</li>
    </ul>
    <p class="normal">In the next chapter, you will learn about some common BCL types that are included with modern .NET.</p>
  </div>
</div></div></body></html>