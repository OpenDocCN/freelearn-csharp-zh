<html><head></head><body>
        

                            
                    <h1 class="header-title">Virtual Reality</h1>
                
            
            
                
<p class="mce-root">In the previous chapter, we explored several processes and techniques to diagnose our Unity games to help improve performance. We did this by optimizing scripts, garbage collection, and graphic rendering. We also looked at how to deploy our Unity game for multiple distribution platforms.</p>
<p class="mce-root">In this chapter, we are going to examine Unity's capabilities in regards to virtual reality. We will start with a quick introduction to virtual reality, including hardware requirements, and then look at how to create a virtual reality game using the Unity game engine. This is a bonus chapter and does not require you to own expensive virtual reality hardware. The purpose of the chapter is to give you an introduction to virtual reality and its possibilities with the Unity game engine.</p>
<p>Specifically, we will cover the following content in this chapter:</p>
<ul>
<li>Welcome to virtual reality </li>
<li>Enabling virtual reality in Unity</li>
<li>Starter content</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Welcome to virtual reality</h1>
                
            
            
                
<p>Virtual reality is not a new term, but it has gained tremendous attention lately. The advent of 3D graphics and stereoscopes contributed to the state of virtual reality as it exists today. The following diagram illustrates the basic concept of stereoscopes and how they create virtual 3D images:</p>
<div><img height="280" width="333" src="img/8ad20066-be78-4848-883c-5d7818d0e4d4.png"/></div>
<p>As you can see, the same image is presented twice from different angles. This results in a virtual 3D image. The same concept exists for videos.</p>
<p>Conceptually, virtual reality is fairly simple. It is the creation of a synthetic and believable virtual environment or world. There are two basic components: hardware and software. The hardware components typically involve a headset that has an individual lens for each eye and one or more display panels behind each lens. Most often, we are inserting our mobile phone into the headset, instead of having the display panels. Specialized lenses are used to focus the light from the mobile phone surface onto your eye's retina. </p>
<p>To see the value of the specialized lenses, hold your mobile phone up to your eyes at a distance of approximately 2 inches. Your eyes are not able to focus on the screen—it is too close. Specialized lenses allow us to see the screen that close. </p>
<p>Some advanced headsets include movement and positional tracking hardware, such as the following examples:</p>
<ul>
<li><strong>Inertial Measurement Units</strong> (<strong>IMUs</strong>) for high-speed motion tracking</li>
<li>Various techniques for positional tracking such as with cameras, lasers, and magnetic fields</li>
</ul>
<p>The software component consists of the game or simulation software the user interacts with. Creating that content and instantiating it in a virtual reality game or simulation is where the heavy lifting is for virtual reality.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Development tools</h1>
                
            
            
                
<p>There is an increasing number of virtual reality hardware and software solutions available. At the time of this book's publication, Unity had native support for Oculus, Gear VR, OpenVR, and PlayStation VR. What follows are some brief descriptions of each of them.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Oculus</h1>
                
            
            
                
<p>Oculus is the umbrella term that incorporates Oculus VR, a division of Facebook, and Oculus Rift, the virtual reality headset.</p>
<p>You can learn more about Oculus at the following official websites:</p>
<ul>
<li><strong>Hardware site</strong>: <a href="https://www.oculus.com/">https://www.oculus.com/</a></li>
<li><strong>Developer site</strong>: <a href="https://developer.oculus.com/">https://developer.oculus.com/</a></li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">GearVR</h1>
                
            
            
                
<p>GearVR is a headset that a mobile phone is inserted into. It requires one of the following:</p>
<ul>
<li>Samsung Galaxy S6</li>
<li>Samsung Galaxy S6 Edge</li>
<li>Samsung Galaxy S6 Edge+</li>
<li>Samsung Galaxy S7</li>
<li>Samsung Galaxy S7 Edge</li>
<li>Samsung Galaxy S8</li>
<li>Samsung Galaxy S8+</li>
</ul>
<p>You can learn more about GearVR at the official website, <a href="http://www.samsung.com/global/galaxy/gear-vr/">http://www.samsung.com/global/galaxy/gear-vr/</a>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">OpenVR</h1>
                
            
            
                
<p>OpenVR is a <strong>Software Development Kit</strong> (<strong>SDK</strong>) containing a runtime and an <strong>Application Programing Interface</strong> (<strong>API</strong>). OpenVR supports generic access to multiple VR hardware. This type of access negates the need to develop for specific virtual reality hardware.</p>
<p>You can learn more about OpenVR at the GitHub website, <a href="https://github.com/ValveSoftware/openvr">https://github.com/ValveSoftware/openvr</a>.<a href="https://github.com/ValveSoftware/openvr"/></p>


            

            
        
    

        

                            
                    <h1 class="header-title">PlayStation VR</h1>
                
            
            
                
<p>PlayStation virtual reality, formally referred to as Project Morpheus, is Sony Interactive Entertainment's VR solution for the PlayStation hardware platforms.</p>
<p>You can learn more about PlayStation VR at the following official websites:</p>
<ul>
<li><strong>Hardware</strong>: <a href="https://www.playstation.com/en-us/explore/playstation-vr/">https://www.playstation.com/en-us/explore/playstation-vr/</a></li>
<li><strong>Development</strong>: <a href="https://www.playstation.com/en-us/develop/">https://www.playstation.com/en-us/develop/</a></li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Enabling virtual reality in Unity</h1>
                
            
            
                
<p>Enabling virtual reality in Unity consists of two basic steps. The process begins with ensuring you have the requisite SDK or runtime environment installed, with the next step being the configuration of the Unity project. We will look at both of these steps in this section, followed by hardware and software recommendations from Unity technologies.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Requisite SDKs</h1>
                
            
            
                
<p>As an example, if you are developing a virtual reality game for the Oculus Rift device, you will have the following packages available to you at the Oculus developers, site (<a href="https://developer.oculus.com/downloads/">https://developer.oculus.com/downloads/</a>):<a href="https://developer.oculus.com/downloads/"/></p>
<ul>
<li><strong>Oculus Utilities for Unity</strong>: This is the core package for developing virtual reality games. Since Unity supports Oculus Rift natively, this package is optional. In addition to containing the Oculus <kbd>OVRPlugin</kbd>, this package includes prefabs, scripts, sample scenes, and other assets to help get you started.</li>
<li><strong>Oculus Avatar SDK</strong>: This SDK is helpful if you are implementing a hand presence or make use of touch controllers in your virtual reality game. You can also use this package to incorporate avatars created in Oculus Home.</li>
<li><strong>Oculus Platform SDK</strong>: The platform SDK is used for incorporating the following components into your virtual reality game: Achievements, cloud storage, in-app purchases, matchmaking, and voice chat. This SDK contains a sample app, which can help you get started a lot faster than developing any of these functionalities from scratch.</li>
<li><strong>Oculus Sample Framework for Unity 5 Project</strong>: This sample project lets you learn by seeing working scenes. It also demonstrates virtual reality functionalities, such as crosshairs, driving, first-person movement, and hand presence.</li>
<li><strong>Cubemap Viewer</strong>: This tool provides a virtual reality cubemap viewing application. You can use this to preview cubemap snapshots before submitting them as part of the app store submission process.</li>
<li><strong>Oculus Remote Monitor for OS X</strong>: This client tool connects to mobile virtual reality applications that are running on remote devices for the purposes of capturing data, displaying data, and storing data. The reported purpose of this data capturing, displaying, and storing is for performance evaluation and testing.</li>
<li><strong>Oculus Remote Monitor for Windows</strong>: This tool is similar to the Oculus Remote Monitor for OS X.</li>
</ul>
<p>There are also several audio packages available to you. These packages are:</p>
<ul>
<li>Oculus Ambisonics Starter Pack</li>
<li>Oculus Audio Loudness Meter</li>
<li>Oculus Audio Pack 1</li>
<li>Oculus Audio Profiler for Windows</li>
<li>Oculus Lipsync Unity</li>
<li>Oculus OVRVoiceMod for Unity 5</li>
<li>Oculus Spatializer DAW Mac</li>
<li>Oculus Spatializer DAW Windows</li>
<li>Oculus Spatializer FMOD</li>
<li>Oculus Spatializer Native</li>
<li>Oculus Spatializer Unity</li>
<li>Oculus Spatializer Wwise</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Configuring your Unity project</h1>
                
            
            
                
<p>Once all the necessary SDKs are installed, you are ready to create a new Unity project. You do this the same way you would with any other Unity project. With the new project open, you will select Edit | Project Settings | Player. That will expose the PlayerSettings in the Inspector panel. As you can see in the following screenshot, there is an Other Settings option:</p>
<div><img height="374" width="305" src="img/63d9c94b-30a0-4681-a4ca-e79776ade280.png"/></div>
<p>Clicking on the Other Settings button displays several options that can be toggled. To enable virtual reality, you will need to select the Virtual Reality Supported checkbox. As illustrated in the following screenshot, toggling that option on reveals the virtual reality SDKs:</p>
<div><img height="275" width="281" src="img/e9c02e7e-568c-4b58-b253-474223221f16.png"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title">Recommendations from Unity technologies</h1>
                
            
            
                
<p>Having capable hardware and up-to-date software are key components of ensuring a good gameplay experience in virtual reality games. There are a few key considerations to make that can greatly impact the user experience. These include:</p>
<ul>
<li>Ensuring graphics drivers are up to date</li>
<li>Ensuring the frame rate matches the head-mounted display's refresh rate</li>
<li>Having updated core processors</li>
<li>Having updated graphics cards</li>
<li>Ensuring you have sufficient volatile memory</li>
</ul>
<p>The operating system on the playback device is also important. With Oculus as an example, the following are supported:</p>
<ul>
<li>Windows 7, 8, 8.1, and 10</li>
<li>Android OS Lollipop 5.1 and later</li>
</ul>
<p>You have probably noticed that Mac OS was not listed. At the time of writing, Oculus no longer supports OS X. This means that you will need to use Unity on a Windows PC to develop natively supported virtual reality games for Oculus.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Starter content</h1>
                
            
            
                
<p>In the game industry, hardware manufacturers want you to buy their products and software toolmakers want you to use their software. And, with both hardware and software, their creators want you to develop games so people can play them. To be more specific, VR headset manufacturers would like to sell as many headsets as possible, so they encourage developers by providing them with free tools and assets. This is not an evil plan, rather a symbiotic relationship between hardware manufacturers and game developers.</p>
<p>Any look at the Unity Asset Store is a snapshot in time because of the dynamic nature of the store. At the time of writing, there were several free VR-related assets from various hardware manufacturers. This section reviews those assets.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Oculus VR</h1>
                
            
            
                
<p>Oculus VR provides several free assets in the Unity Asset Store to support your development for Oculus Rift and Samsung Gear VR. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Oculus Sample Framework</h1>
                
            
            
                
<p>The first pack is the Oculus Sample Framework. It contains three sample scenes as well as guidelines on how to accomplish fundamental VR-related functionality. This partial list of scripts gives you an idea of the types of functionality that you can discover using this free asset package:</p>
<ul>
<li>Boundary</li>
<li>Camera rig</li>
<li>Debug head controller</li>
<li>Display</li>
<li>Grabbable</li>
<li>Grabber</li>
<li>Haptics</li>
<li>Haptics Clip</li>
<li>Input</li>
<li>On Complete Listener</li>
<li>Overlay</li>
<li>Platform Menu</li>
<li>Reset Orientation</li>
<li>Touch Pad</li>
<li>Tracker</li>
</ul>
<p>There are also animations, materials, meshes, prefabs, scenes, shaders, and textures as part of this asset package. In addition, there are also help text files. </p>
<p>Using this asset package is a great way to kick-start your virtual reality exploration.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Oculus Stereo Shading Re-Projection Sample</h1>
                
            
            
                
<p>In August 2017, Oculus released the Oculus Stereo Shading Re-Projection Sample asset package to the Unity Asset Store. This package provided an innovative technique to optimize VR rendering. The technique uses a two-pass approach. In the first pass, rendered pixels from one eye are re-projected to the other eye. Then, in a second rendering pass, the gaps are filled in.</p>
<p>The Oculus Stereo Shading Re-Projection Sample asset package contains an instructional text file and all necessary content, such as materials, prefabs, shaders, scripts, textures, and a scene. </p>
<p>Oculus VR reports that this re-projection approach saves over 20% GPU cost per frame. Your results might vary, but the sheer possibility of optimization on this scale makes checking this asset package out a must.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Oculus Integration</h1>
                
            
            
                
<p>The Oculus Integration asset package provides scripting examples for the Oculus Rift, Gear VR, and Touch. These examples include:</p>
<ul>
<li>Input and haptics</li>
<li>Layered rendering</li>
<li>Platform:
<ul>
<li>Achievements</li>
<li>Cloud Storage</li>
<li>Entitlement Check</li>
<li>Identities</li>
<li>In-App Purchases</li>
<li>Keys</li>
<li>Leaderboards</li>
<li>Matchmaking</li>
<li>Peer-to-Peer Networking</li>
<li>Rooms</li>
<li>Voice over IP (VoIP)</li>
</ul>
</li>
<li>Rendering Audio:
<ul>
<li>Room Model Settings for Reverb</li>
<li>Room Model Settings for Early Reflections</li>
<li>Spatializer Fine-Tuning</li>
</ul>
</li>
<li>Rendering Avatars:
<ul>
<li>Personalized Appearances</li>
<li>Social Presence</li>
<li>Touch and Hand Modeling</li>
</ul>
</li>
<li>Rendering Social</li>
<li>Room Scale</li>
<li>Tracking</li>
</ul>
<p>This is a tremendous list of samples provided by Oculus, making our entry into virtual reality game development much easier and helping to ensure our success.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Vive software</h1>
                
            
            
                
<p>Vive software provides several free assets in the Unity Asset Store to support your development for the HTC Vive. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Vive Stereo Rendering Toolkit</h1>
                
            
            
                
<p>The Vive Stereo Rendering Toolkit includes a set of reusable game assets that can be used to create stereoscopic rendering effects. This toolkit is compatible with Unity's native VR rendering.</p>
<p>The stereoscopic rendering effects include the following:</p>
<ul>
<li>Basic example</li>
<li>Callbacks example</li>
<li>Mirror example</li>
<li>Portal door example</li>
<li>Renderer creation example</li>
</ul>
<p>The meshes, materials, textures, shaders, and scripts associated with the stereoscopic rendering effects are included in the asset package.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Vive Input Utility</h1>
                
            
            
                
<p>The Vive Input Utility is a plugin that gives you access to the Vive device status, including the Vive Tracker. The plugin has the following features:</p>
<ul>
<li>Collider event</li>
<li>Pointer 3D</li>
<li>Pose tracker</li>
<li>Vive input utility
<ul>
<li>2D drag and drop</li>
<li>3D drag and drop</li>
<li>Teleport</li>
</ul>
</li>
</ul>
<p>The plugin also contains materials, prefabs, scripts, animations, models, sprites, and shaders to support the examples in the asset package. This package also includes several tutorials. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Vive Media Decoder</h1>
                
            
            
                
<p>The Vive Media Decoder plugin can be used to support streaming on Windows. The plugin provides support for Windows 7 and DirectX 11. The two primary features of this plugin are:</p>
<ul>
<li>High-performance decoding</li>
<li>Video streaming</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">NVIDIA</h1>
                
            
            
                
<p>NVIDIA is the leading manufacturer of the GPUs that we use in our gaming computers. They have several free assets in the Unity Asset Store to help showcase the power of their GPUs. Two of these free assets are specific to VR and are covered in this section.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">NVIDIA VRWorks</h1>
                
            
            
                
<p>This asset package contains a text-based guide and scripts and shaders for creating the following:</p>
<ul>
<li>Lens-Matched Shading</li>
<li>Multi-Res Shading</li>
<li>Single-Pass Stereo</li>
<li>VR SLI</li>
</ul>
<p>To use this package, you must have the following:</p>
<ul>
<li>Windows PC</li>
<li>DX11</li>
<li>NVIDA Geforce 9 or higher</li>
<li>VS 2015 redistribution</li>
<li>Unity 2017.1.0b6 or higher</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">NVIDIA VR Samples</h1>
                
            
            
                
<p>This package helps showcase the capabilities of modern GPUs and has the VRWorks package integrated. Samples included in this asset package include:</p>
<ul>
<li>Anti-aliasing</li>
<li>Bloom and flares</li>
<li>Blur</li>
<li>Camera motion</li>
<li>Color correction</li>
<li>Contrast</li>
<li>Cease shading</li>
<li>Depth of field</li>
<li>Edge detection</li>
<li>Fish eye</li>
<li>Global fog</li>
<li>Grayscale</li>
<li>Image effects</li>
<li>Motion blur</li>
<li>Noise and grain</li>
<li>Noise and scratches</li>
<li>Post effects</li>
<li>Quads</li>
<li>Screen overlay</li>
<li>Screen space ambient obscurance and occlusion</li>
<li>Sepia tone</li>
<li>Sun shafts</li>
<li>Tilt shift</li>
<li>Tone mapping</li>
<li>Triangles</li>
<li>Twirl</li>
<li>Vignette and chromatic aberration</li>
<li>Vortex</li>
</ul>
<p>The shaders, textures, models, scenes, animations, controllers, meshes, audio, fonts, materials, prefabs, and scripts supporting the examples are all included in the asset package.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Unity Technologies</h1>
                
            
            
                
<p>Unity Technologies, the company that makes Unity and owns the Asset Store, has a robust VR Samples asset package. It contains a menu and four mini-games that can be used to help you get started in creating virtual reality games for Oculus DK2 and GearVR. </p>
<p>Here are the basics included in the asset package:</p>
<ul>
<li>Floating World-Space GUI</li>
<li>Static World-Space GUI</li>
<li>Flyer</li>
<li>Maze</li>
<li>Shooter</li>
</ul>
<p>As you would expect, all the related shaders, audio, fonts, materials, textures, animations, controllers, mixers, meshes, models, prefabs, scenes, and scripts are included.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Summary</h1>
                
            
            
                
<p class="mce-root">In this chapter, we examined Unity's capabilities in regard to virtual reality. We started with a quick introduction to virtual reality, including hardware requirements, and then looked at how to create a virtual reality game using the Unity game engine. We also took a look at the available starter content from the Unity Asset Store.</p>
<p class="mce-root">Having read this book, you will have the ability to create your own dynamic games using Unity and you will have an idea of what is required to start making virtual reality games. You are getting started at a good time: virtual reality is still a very young technology. For example, the human eye requires approximately 16,000 x 16,000 pixels per eye for a photographic-quality virtual reality experience, but best current VR displays provide up to 1080 x 780. So we have a long way to go with this technology, and its future is promising.</p>


            

            
        
    </body></html>