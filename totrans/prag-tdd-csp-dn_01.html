<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer029">
<h1 class="chapter-number" id="_idParaDest-15"><a id="_idTextAnchor014"/>1</h1>
<h1 id="_idParaDest-16"><a id="_idTextAnchor015"/>Writing Your First TDD Implementation</h1>
<p>I’ve always liked books that start with a quick end-to-end demo about the proposed subject before diving into the details. That gives me a sense of what I am going to learn. I wanted to share with you the same experience by beginning this book with a tiny application.</p>
<p>Here, we will simulate minimal business requirements, and while implementing them, we will touch on <strong class="bold">unit testing</strong> and <strong class="bold">test-driven development</strong> (<strong class="bold">TDD</strong>) concepts. Don’t worry if a concept is not clear or requires further explanation, as this chapter purposely skims over topics to give you a flavor. By the end of the book, we will have covered all the concepts that were skimmed over.</p>
<p>Also, note that we will use the terms <em class="italic">unit testing</em> and <em class="italic">TDD</em> interchangeably with little distinction. The difference will be clearer by <a href="B18370_05.xhtml#_idTextAnchor114"><em class="italic">Chapter 5</em></a>, <em class="italic">Test-Driven Development Explained</em>.</p>
<p>In this chapter, you will cover the following topics:</p>
<ul>
<li>Choosing your <strong class="bold">integrated development environment</strong> (<strong class="bold">IDE</strong>)</li>
<li>Building a solution skeleton with unit testing</li>
<li>Implementing requirements with TDD</li>
</ul>
<p>By the end of the chapter, you will be comfortable writing basic unit tests using <strong class="bold">xUnit</strong> and have a fair understanding of what TDD is.</p>
<h1 id="_idParaDest-17"><a id="_idTextAnchor016"/>Technical requirements</h1>
<p>The code for this chapter can be found at the following GitHub repository:</p>
<p><a href="https://github.com/PacktPublishing/Pragmatic-Test-Driven-Development-in-C-Sharp-and-.NET/tree/main/ch01">https://github.com/PacktPublishing/Pragmatic-Test-Driven-Development-in-C-Sharp-and-.NET/tree/main/ch01</a></p>
<h1 id="_idParaDest-18"><a id="_idTextAnchor017"/>Choosing your IDE</h1>
<p>From a TDD perspective, different IDEs <a id="_idIndexMarker000"/>will affect your productivity. TDD implementation can be boosted by IDEs that have rich code refactoring and code generation capabilities, and selecting the right one will reduce repetitive—and potentially boring—tasks.</p>
<p>In the following sections, I have presented three popular IDEs with C# support: <strong class="bold">Visual Studio</strong> (<strong class="bold">VS</strong>), <strong class="bold">VS Code</strong>, and <strong class="bold">JetBrains Rider</strong>.</p>
<h2 id="_idParaDest-19"><a id="_idTextAnchor018"/>Microsoft VS</h2>
<p>This chapter and the rest of the<a id="_idIndexMarker001"/> book will use <em class="italic">VS 2022 Community Edition</em>—this should also work with the <em class="italic">Professional</em> and <em class="italic">Enterprise</em> editions. Individual developers can use <em class="italic">VS Community Edition</em> for free to create their own <a id="_idIndexMarker002"/>free or paid applications. Organizations can also use it under some restrictions. For the full license and product details, visit <a href="https://visualstudio.microsoft.com/vs/community/">https://visualstudio.microsoft.com/vs/community/</a>.</p>
<p>If you have an earlier version of VS and do not want to upgrade, then you can have <em class="italic">VS 2022 Community Edition</em> installed side by side with previous versions.</p>
<p>Both the <em class="italic">Windows</em> and <em class="italic">Mac</em> editions of <em class="italic">VS 2022</em> have the required tools to build our code and run the tests. I have done all the projects, screenshots, and instructions in this book using the <em class="italic">Windows</em> edition. You can<a id="_idIndexMarker003"/> download VS from <a href="https://visualstudio.microsoft.com/downloads/">https://visualstudio.microsoft.com/downloads/</a>.</p>
<p>When installing VS, you will need at least the <strong class="bold">ASP.NET and web development</strong> box selected to be able to follow along with the book, as illustrated in the following screenshot:</p>
<div>
<div class="IMG---Figure" id="_idContainer008">
<img alt="Figure 1.1 – VS installation dialog " height="611" src="image/Figure_1.1_B18370.jpg" width="1265"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.1 – VS installation dialog</p>
<p>If you have VS previously<a id="_idIndexMarker004"/> installed, you can check if <strong class="bold">ASP.NET and web development</strong> is already installed by following these steps:</p>
<ol>
<li>Go to Windows <strong class="bold">Settings</strong> | <strong class="bold">Apps</strong> | <strong class="bold">Apps &amp; features</strong>.</li>
<li>Search for <strong class="source-inline">Visual Studio</strong> under <strong class="bold">App list</strong>.</li>
<li>Select the vertical ellipsis (the three vertical dots).</li>
<li>Select <strong class="bold">Modify</strong>, as shown in the following screenshot:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer009">
<img alt="Figure 1.2 – Modifying VS installation " height="599" src="image/Figure_1.2_B18370.jpg" width="679"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.2 – Modifying VS installation</p>
<p>VS is big, as it contains plenty of<a id="_idIndexMarker005"/> components to install. Also, after installation, it is the slowest to load, in comparison with <em class="italic">Rider</em> and <em class="italic">VS Code</em>.</p>
<h3>ReSharper</h3>
<p><strong class="bold">JetBrains ReSharper</strong> is a popular <a id="_idIndexMarker006"/>commercial plugin for VS. ReSharper adds multiple features to VS; however, from a TDD standpoint, we are interested in the following <a id="_idIndexMarker007"/>aspects:</p>
<ul>
<li><strong class="bold">Refactoring</strong>: ReSharper adds many refactoring features that come in handy when you reach the refactoring stage of TDD.</li>
<li><strong class="bold">Code generation</strong>: Generating code with ReSharper is particularly useful when creating your unit tests first, then generating code after.</li>
<li><strong class="bold">Unit testing</strong>: ReSharper supercharges the unit testing tools in VS and has support for more unit testing frameworks.</li>
</ul>
<p>ReSharper is a subscription-based product with a 30-day trial. I would recommend you to start first with VS without ReSharper, then add it later when you are familiar with the capabilities of VS so that you recognize the benefits of adding ReSharper.</p>
<p class="callout-heading">Note</p>
<p class="callout">Each new release of VS adds additional code refactoring and code generation capabilities similar to those of ReSharper. However, as of now, ReSharper has more advanced features.</p>
<p>In this book, the <a id="_idIndexMarker008"/>discussion on ReSharper will be limited to this section. You can download ReSharper here: <a href="https://www.jetbrains.com/resharper/">https://www.jetbrains.com/resharper/</a>.</p>
<h2 id="_idParaDest-20"><a id="_idTextAnchor019"/>JetBrains Rider</h2>
<p><em class="italic">JetBrains</em>, the company behind <em class="italic">Rider</em>, is the same company behind the popular <em class="italic">ReSharper</em> VS plugin. If <a id="_idIndexMarker009"/>you have chosen <strong class="bold">JetBrains Rider</strong> for your .NET development, then you have all the features that are<a id="_idIndexMarker010"/> required in this book. Rider has the following:</p>
<ul>
<li>A powerful <strong class="bold">unit test runner</strong> that competes with <strong class="bold">Test Explorer</strong> of VS</li>
<li>Feature-rich code refactoring and code generation capabilities with more advanced features than those of VS 2022</li>
</ul>
<p>The aforementioned points are crucial for building a system <em class="italic">TDD-style</em>; however, I have chosen VS for this book rather than Rider. Although the instructions in this book are meant for VS 2022, they can be applied to Rider, taking into consideration that Rider has a different menu system and shortcuts.</p>
<p class="callout-heading">Note</p>
<p class="callout"><strong class="bold">VS .NET</strong> (VS release with .NET support) was released in February 2002, while Rider is more recent and was released in August 2017; so, VS is more established between .NET developers. I have nominated VS for this book over Rider for this reason.</p>
<p>You can download Rider here: <a href="https://www.jetbrains.com/rider/">https://www.jetbrains.com/rider/</a>.</p>
<h2 id="_idParaDest-21"><a id="_idTextAnchor020"/>VS Code</h2>
<p>If you are a fan of VS Code, you will be<a id="_idIndexMarker011"/> pleased to know that Microsoft <a id="_idIndexMarker012"/>added native support for visual unit testing (which is essential for TDD) in July 2021, with the version 1.59 release.</p>
<p>VS Code is a lightweight IDE—it has good native refactoring options and a bunch of third-party refactoring plugins. The simplicity and elegance of VS Code attract many TDD practitioners, but the available C# features—especially those used in TDD—are not as advanced as those of VS or Rider.</p>
<p>I will be using <em class="italic">VS</em> in this book, but you <a id="_idIndexMarker013"/>can adapt the examples to VS Code where relevant. To download VS Code, you can visit <a href="https://visualstudio.microsoft.com/downloads/">https://visualstudio.microsoft.com/downloads/</a>.</p>
<h2 id="_idParaDest-22"><a id="_idTextAnchor021"/>.NET and C# versions</h2>
<p>VS 2022 comes with <strong class="bold">.NET 6</strong> and <strong class="bold">C# 10</strong> support. This is what we will be using for the purposes of this chapter and the<a id="_idIndexMarker014"/> rest of the book. </p>
<p>I initiated a small poll to gather some public opinion in my LinkedIn group—you can see the results here:</p>
<div>
<div class="IMG---Figure" id="_idContainer010">
<img alt="Figure 1.3 – LinkedIn IDE poll results " height="446" src="image/Figure_1.3_B18370.jpg" width="892"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.3 – LinkedIn IDE poll results</p>
<p>As you can see, VS has the highest usage of 58%, with 18% who use the ReSharper plugin with VS, then Rider comes second at 24%, then in third place comes VS Code with 18%. However, given that this is only 45 votes, it is meant to give you an indication and would definitely not reflect the market.</p>
<p>Picking the right IDE is a debatable subject between developers. I know that every time I ask a developer practicing<a id="_idIndexMarker015"/> TDD about their chosen IDE, they would swear by how good their IDE is! In conclusion, use the IDE that makes you more productive.</p>
<h1 id="_idParaDest-23"><a id="_idTextAnchor022"/>Building a solution skeleton with unit testing</h1>
<p>Now that we’ve got the technical<a id="_idIndexMarker016"/> requirements out of the way, it’s time to build our first implementation. For this chapter, and to keep<a id="_idIndexMarker017"/> the focus on TDD concepts, let’s start with simple business requirements.</p>
<p>Let’s assume that you are a developer, working for a<a id="_idIndexMarker018"/> fictitious company called <strong class="bold">Unicorn Quality Solutions Inc.</strong> (<strong class="bold">UQS</strong>), which produces high-quality software.</p>
<h2 id="_idParaDest-24"><a id="_idTextAnchor023"/>Requirements</h2>
<p>The software teams in <strong class="bold">UQS</strong> follow an agile <a id="_idIndexMarker019"/>approach and describe business requirements in terms of a <strong class="bold">user story</strong>.</p>
<p>You are working on a math library that is packaged to be consumed by other developers. You can think of this as if you are building a feature within a <strong class="bold">NuGet library</strong> to be used by other applications. You’ve picked a user story to implement, as outlined here:</p>
<p class="callout-heading"><strong class="bold">Story Title:</strong></p>
<p class="callout"><em class="italic">Integers Division</em></p>
<p class="callout"><strong class="bold">Story Description:</strong></p>
<p class="callout"><em class="italic">As a math library client, I want a method to divide two integers</em></p>
<p class="callout"><strong class="bold">Acceptance Criteria:</strong></p>
<p class="callout"><em class="italic">Supports an Int32 input and a decimal output</em></p>
<p class="callout"><em class="italic">Supports high-precision return with no/minimal rounding</em></p>
<p class="callout"><em class="italic">Supports dividing divisible and indivisible integers</em></p>
<p class="callout"><em class="italic">Throws a DivideByZeroException when dividing by 0</em></p>
<h2 id="_idParaDest-25"><a id="_idTextAnchor024"/>Creating a project skeleton</h2>
<p>You will need<a id="_idIndexMarker020"/> two C# projects for this story. One is the <strong class="bold">class library</strong> that will contain the production code and a<a id="_idIndexMarker021"/> second library for unit testing the class library.</p>
<p class="callout-heading">Note</p>
<p class="callout">Class libraries enable you to modularize functionality that can be used by multiple applications. When compiled, they will generate <strong class="bold">dynamic-link library</strong> (<strong class="bold">DLL</strong>) files. A class library cannot run on its own, but it can run as part of an application.</p>
<p>If you have not worked with a class library before, for the purposes of this book, you can treat it like a console app or a web app.</p>
<h3>Creating a class library project</h3>
<p>We are going to create the <a id="_idIndexMarker022"/>same projects set up in two<a id="_idIndexMarker023"/> ways—via the <strong class="bold">graphical user interface</strong> (<strong class="bold">GUI</strong>) and via the .NET <strong class="bold">command-line interface</strong> (<strong class="bold">CLI</strong>). Choose what you prefer or what you are<a id="_idIndexMarker024"/> familiar with.</p>
<h4>Via the GUI</h4>
<p>To create a class library, run <a id="_idIndexMarker025"/>VS and then follow these steps:</p>
<ol>
<li value="1">From the menu, select <strong class="bold">File</strong> | <strong class="bold">New</strong> | <strong class="bold">Project</strong>.</li>
<li>Look for <strong class="source-inline">Class Library (C#)</strong>.</li>
<li>Select the rectangle containing <strong class="bold">Class Library (C#)</strong> | hit <strong class="bold">Next</strong>. The <strong class="bold">Add a new project</strong> dialog will display, as follows:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer011">
<img alt="Figure 1.4 – Finding the Class Library (C#) project template " height="824" src="image/Figure_1.4_B18370.jpg" width="962"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.4 – Finding the Class Library (C#) project template</p>
<p class="callout-heading">Important Note</p>
<p class="callout">Make sure you can see the <strong class="bold">C#</strong> tag in the box and do <em class="italic">NOT</em> select the <strong class="bold">Class Library (.NET Framework)</strong> item. We are using .NET (not classical .NET Framework).</p>
<ol>
<li value="4">In the <strong class="bold">Configure your new project</strong> dialog, type <strong class="source-inline">Uqs.Arithmetic</strong> in the <strong class="bold">Project name</strong> field<a id="_idIndexMarker026"/> and <strong class="source-inline">UqsMathLib</strong> in the <strong class="bold">Solution name</strong> field, then hit <strong class="bold">Next</strong>. The process is illustrated in the following screenshot:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer012">
<img alt="Figure 1.5 – Configure your new project dialog " height="584" src="image/Figure_1.5_B18370.jpg" width="641"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.5 – Configure your new project dialog</p>
<ol>
<li value="5">In the <strong class="bold">Additional information</strong> window, select <strong class="source-inline">.NET 6.0 (Long-term support)</strong> and hit <strong class="bold">Create</strong>. The <a id="_idIndexMarker027"/>process is<a id="_idIndexMarker028"/> illustrated in the following screenshot:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer013">
<img alt="Figure 1.6 – Additional information " height="386" src="image/Figure_1.6_B18370.jpg" width="808"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.6 – Additional information</p>
<p>We now have a class library project within the solution, using the <em class="italic">VS GUI</em>.</p>
<h4>Via the CLI</h4>
<p>If you prefer to create<a id="_idIndexMarker029"/> your project via the CLI, here are the required commands:</p>
<ol>
<li value="1">Create a directory called <strong class="source-inline">UqsMathLib</strong> (<strong class="source-inline">md UqsMathLib</strong>).</li>
<li>Navigate to this directory via your terminal (<strong class="source-inline">cd UqsMathLib</strong>), as illustrated in the following screenshot:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer014">
<img alt="Figure 1.7 – Command Prompt showing the commands " height="241" src="image/Figure_1.7_B18370.jpg" width="487"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.7 – Command Prompt showing the commands</p>
<ol>
<li value="3">Create a solution file (<strong class="source-inline">.sln</strong>) that will be generated with the same name as the directory—that is, <strong class="source-inline">UqsMathLib.sln</strong>—by running the following c<a id="_idTextAnchor025"/>ommand:<p class="source-code"><strong class="bold">dotnet new sln</strong></p></li>
<li>Create a new class library called <strong class="source-inline">Uqs.Arithmetic</strong> in a directory with the same name and use <em class="italic">.NET 6.0</em>. Here’s the code you need to execute:<p class="source-code"><strong class="bold">dotnet new classlib -o Uqs.Arithmetic -f net6.0 </strong></p></li>
<li>Add the newly created project to the solution file by running the following command:<p class="source-code"><strong class="bold">dotnet sln add Uqs.Arithmetic </strong></p></li>
</ol>
<p>We now have a class library project within the solution, using the <em class="italic">CLI</em>.</p>
<h3>Creating a unit testing project</h3>
<p>Currently, we have a solution with one class library project. Next, we want to add the unit test library to our solution. For this, we will use <strong class="bold">xUnit Test Project</strong>.</p>
<p>xUnit.net is a free, open source, unit testing tool for .NET. It is licensed under Apache 2. VS natively supports adding and running xUnit projects, so no special tool or plugin is needed to use xUnit.</p>
<p>We will be going into more details about xUnit in <a href="B18370_03.xhtml#_idTextAnchor066"><em class="italic">Chapter 3</em></a>, <em class="italic">Getting Started with Unit Testing</em>.</p>
<p>We will follow a common convention for naming unit test projects: <strong class="source-inline">[ProjectName].Tests.Unit</strong>. Thus, our project will be called <strong class="source-inline">Uqs.Arithmetic.Tests.Unit</strong>.</p>
<p>We will create a unit test project in two ways, so you can pick whatever suits you best.</p>
<h4>Via the GUI</h4>
<p>To create a <a id="_idIndexMarker030"/>unit testing project, go to <strong class="bold">Solution Explorer</strong> in VS, then follow these steps:</p>
<ol>
<li value="1">Right-click on the solution file (<strong class="source-inline">UqsMathLib</strong>).</li>
<li>Go to <strong class="bold">Add</strong> | <strong class="bold">New Project…</strong>, as illustrated in the following screenshot:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer015">
<img alt="Figure 1.8 – Creating a new project in a solution " height="1215" src="image/Figure_1.8_B18370.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.8 – Creating a new project in a solution</p>
<ol>
<li value="3">Look for <strong class="bold">xUnit Test Project</strong> | hit <strong class="bold">Next</strong>.</li>
<li>Set the <strong class="bold">Project name</strong> value as <strong class="source-inline">Uqs.Arithmetic.Tests.Unit</strong>.</li>
<li>Hit <strong class="bold">Next</strong> | select <strong class="bold">.NET 6.0</strong> | hit <strong class="bold">Create</strong>.</li>
</ol>
<p>You have created a project via the <a id="_idIndexMarker031"/>VS GUI, but we still need to set the unit test project to have a reference to the class library. To do so, follow these steps:</p>
<ol>
<li value="1">In VS Solution Explorer, right-click on <strong class="bold">Dependencies</strong> in <strong class="source-inline">Uqs.Arithmetic.Tests.Unit</strong>.</li>
<li>Select <strong class="bold">Add Project Reference…</strong>.</li>
<li>Tick <strong class="source-inline">Uqs.Arithmetic</strong> and hit <strong class="bold">OK</strong>.</li>
</ol>
<p>We now have our solution fully constructed via the VS GUI. You may choose to do the same GUI steps in the CLI instead. In the next section, we will do exactly that.</p>
<h4>Via the CLI</h4>
<p>Currently, we have<a id="_idIndexMarker032"/> a solution with one class library project. Now, we want to add the unit test library to our solution.</p>
<p>Create a new xUnit project called <strong class="source-inline">Uqs.Arithmetic.Tests.Unit</strong> in a directory with the same name and use .NET 6.0. Here’s the code you need to execute:</p>
<p class="source-code">dotnet new xunit -o Uqs.Arithmetic.Tests.Unit -f net6.0</p>
<p>Add the newly created project to the solution file by running the following command:</p>
<p class="source-code">dotnet sln add Uqs.Arithmetic.Tests.Unit</p>
<p>We now have two projects in our solution. As the unit test project will be testing the class library, the project should have a reference to the class library.</p>
<p>You have created a project via the CLI, but we still need to set the unit test project to have a reference to the class library. To do so, add a project reference from <strong class="source-inline">Uqs.Arithmetic.Tests.Unit</strong> to <strong class="source-inline">Uqs.Arithmetic</strong>, like so:  </p>
<p class="source-code">dotnet add Uqs.Arithmetic.Tests.Unit reference </p>
<p class="source-code">   Uqs.Arithmetic</p>
<p>We now have our solution fully constructed via the CLI.</p>
<h3>Final solution</h3>
<p>Whichever <a id="_idIndexMarker033"/>method you’ve used to create the solution—either the VS GUI or the CLI—you should now have the same files created. Now, you can open the solution in VS, and you’ll see this:</p>
<div>
<div class="IMG---Figure" id="_idContainer016">
<img alt="Figure 1.9 – The final created solution structure " height="414" src="image/Figure_1.9_B18370.jpg" width="521"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.9 – The final created solution structure</p>
<p>To start from a clean slate, delete <strong class="source-inline">Class1.cs</strong> as we won’t be using it—it was added automatically by the <a id="_idIndexMarker034"/>template.</p>
<p>The logical structure of our two projects looks like this:</p>
<div>
<div class="IMG---Figure" id="_idContainer017">
<img alt="Figure 1.10 – Projects’ logical structure " height="229" src="image/Figure_1.10_B18370.jpg" width="976"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.10 – Projects’ logical structure</p>
<p>What we’ve created so far are two projects: one that will be shipped to production at some stage (<strong class="source-inline">Uqs.Arithmetic</strong>) and one to test this project (<strong class="source-inline">Uqs.Arithmetic.Tests.Unit</strong>). The solution file links the two projects together.</p>
<p>Now that we have finished the less fun part of building the project skeleton and setting the dependencies, we can now start the more fun one, which is directly related to unit testing.</p>
<h2 id="_idParaDest-26"><a id="_idTextAnchor026"/>Familiarizing yourself with built-in test tools</h2>
<p>We have reached the stage where<a id="_idIndexMarker035"/> we need to look into how to discover and execute tests, and to do that, we need to understand which tools <a id="_idIndexMarker036"/>are available to us.</p>
<p>We have code that is already generated by the xUnit template—look at the code inside <strong class="source-inline">UnitTest1.cs</strong>, as displayed here:</p>
<pre class="source-code"><strong class="bold">using Xunit;</strong>
namespace Uqs.Arithmetic.Tests.Unit;
public class UnitTest1
{
    <strong class="bold">[Fact]</strong>
    public void Test1()
    {
    }
}</pre>
<p>This is a normal C# class. <strong class="source-inline">Fact</strong> is an attribute from xUnit. It simply tells any xUnit-compatible tool that the method decorated with <strong class="source-inline">Fact</strong> is a <strong class="bold">unit test method</strong>. xUnit-compatible tools such as <strong class="bold">Test Explorer</strong> and <strong class="bold">.NET CLI Test Command</strong> should be able to find this method in your solution and run it.</p>
<p>Following the trend of the previous sections, we will utilize the available test tools in two ways—via the VS GUI and via the CLI.</p>
<h3>Via the GUI</h3>
<p>VS comes with a GUI as a test <a id="_idIndexMarker037"/>runner to discover and execute tests—it is called <strong class="bold">Test Explorer</strong>. To see <a id="_idIndexMarker038"/>how a test runner would discover test methods, from the menu, go to <strong class="bold">Test</strong> | <strong class="bold">Test Explorer</strong>. You will see the following screen:</p>
<div>
<div class="IMG---Figure" id="_idContainer018">
<img alt="Figure 1.11 – Test Explorer showing unexecuted tests " height="309" src="image/Figure_1.11_B18370.jpg" width="995"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.11 – Test Explorer showing unexecuted tests</p>
<p>As you can see, it detected all the tests in our solution, showing the tests in a <em class="italic">Project Name &gt; Namespace &gt; Class &gt; Method</em> hierarchy. Also, you can see that the test hierarchy is grayed out and has an exclamation mark. This is a sign that the tests were never run. You can click on<a id="_idIndexMarker039"/> the upper-left <strong class="bold">Run</strong> button (shortcut keys: <em class="italic">Ctrl</em> + <em class="italic">R</em>, <em class="italic">T</em>. This is pressing and holding <em class="italic">Ctrl</em> then pressing <em class="italic">R</em> and quickly switching from <em class="italic">R</em> to <em class="italic">T</em>) and run this test. This will build your project and will execute the code within the methods decorated with <strong class="source-inline">Fact</strong>. The results are shown here:</p>
<div>
<div class="IMG---Figure" id="_idContainer019">
<img alt="Figure 1.12 – Test Explorer showing executed test results " height="327" src="image/Figure_1.12_B18370.jpg" width="995"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.12 – Test Explorer showing executed test results</p>
<p>Don’t expect anything fancy as we have an empty shell, but at least the tests will turn <em class="italic">green</em> and you will know that your setup is working. You can similarly discover and execute tests using the CLI.</p>
<h3>Via the CLI</h3>
<p>You can also execute the same<a id="_idIndexMarker040"/> test by using Command Prompt, going to the solution directory, and executing the following command:</p>
<p class="source-code">dotnet test</p>
<p>This is what you are going to get:</p>
<div>
<div class="IMG---Figure" id="_idContainer020">
<img alt="Figure 1.13 – .NET Test command discovering and executing tests " height="575" src="image/Figure_1.13_B18370.jpg" width="1378"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.13 – .NET Test command discovering and executing tests</p>
<p>Running commands <a id="_idIndexMarker041"/>such as this will come in handy later on when we want to automate test running.</p>
<h1 id="_idParaDest-27"><a id="_idTextAnchor027"/>Implementing requirements with TDD</h1>
<p>Before writing <a id="_idIndexMarker042"/>any code, it makes sense that we understand some terminologies and conventions to tune our brain on unit test-related keywords. So, we will briefly touch on <strong class="bold">system under test</strong> (<strong class="bold">SUT</strong>), <strong class="bold">red/green</strong> tests, and <strong class="bold">Arrange-Act-Assert</strong> (<strong class="bold">AAA</strong>). More details on these terminologies will follow in later chapters, but for now, we will cover the minimum to get a few tests running.</p>
<p>While we are learning about terminology and conventions, we will ease into our implementation. One thing that you might find new or unordinary is writing a unit test first, then writing production code later. This is one main aspect of TDD, and you will first experience it in this section.</p>
<h2 id="_idParaDest-28"><a id="_idTextAnchor028"/>SUT</h2>
<p>We refer to the code<a id="_idIndexMarker043"/> that you usually write to build a <a id="_idIndexMarker044"/>product as <strong class="bold">production code</strong>. Typical <strong class="bold">object-oriented</strong> (<strong class="bold">OO</strong>) production <a id="_idIndexMarker045"/>code looks like this:</p>
<pre class="source-code">public class <strong class="bold">ClassName</strong>
{
    public Type <strong class="bold">MethodName</strong>(…)
    {
        // Code that does something useful
    }
    // more code
}</pre>
<p>When we test this code, the unit test will call <strong class="source-inline">MethodName</strong> and assess the behavior of this method. When <strong class="source-inline">MethodName</strong> is executed, it may call other parts of the class and may use/call other classes. The code <a id="_idIndexMarker046"/>executed by <strong class="source-inline">MethodName</strong> is called SUT or <strong class="bold">code under test</strong> (<strong class="bold">CUT</strong>). However, the term <em class="italic">SUT</em> is used more often.</p>
<p>The SUT will have an entry point that will be executed by the unit tests. The entry point is usually the method that we are calling from the unit tests. The following screenshot should clarify the idea of a SUT and a SUT entry point:</p>
<div>
<div class="IMG---Figure" id="_idContainer021">
<img alt="Figure 1.14 – Unit tests operating on a SUT " height="699" src="image/Figure_1.14_B18370.jpg" width="1378"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.14 – Unit tests operating on a SUT</p>
<p>In the previous screenshot, you<a id="_idIndexMarker047"/> can see multiple unit tests calling the same SUT entry point. A detailed discussion of SUT is available in <a href="B18370_03.xhtml#_idTextAnchor066"><em class="italic">Chapter 3</em></a>, <em class="italic">Getting Started with Unit Testing</em>.</p>
<h2 id="_idParaDest-29"><a id="_idTextAnchor029"/>Testing class</h2>
<p>A typical unit testing class <a id="_idIndexMarker048"/>uses the same names from the SUT, by convention. This is<a id="_idIndexMarker049"/> what a typical unit testing class looks like:</p>
<pre class="source-code">public class <strong class="bold">ClassName</strong>Tests
{
    [Fact]
    public void <strong class="bold">MethodName</strong>_Condition1_Expectation1()
    {
        // Unit Testing Code that will call <strong class="bold">MethodName</strong>
    }
    // Other tests…
    [Fact]
    public void <strong class="bold">MethodName</strong>_ConditionN_ExpectationN()
    {
        // Unit Testing Code that will call <strong class="bold">MethodName</strong>
    }
    …
}</pre>
<p>Notice that the <strong class="source-inline">ClassName</strong> and <strong class="source-inline">MethodName</strong> methods in the two previous snippets are not a coincidence. We <a id="_idIndexMarker050"/>want them to be the same, again, by convention. To start forming our test class, we need to design the class name and the method name.</p>
<h4>Class name</h4>
<p>From the requirements, we will need a <a id="_idIndexMarker051"/>class that will contain all our division methods, so let’s simply call the class <strong class="source-inline">Division</strong>; and if we were to create a unit test class to test the <strong class="source-inline">Division</strong> class, our unit test name would be called <strong class="source-inline">DivisionTests</strong>. Next, we will rename the <strong class="source-inline">UnitTest1</strong> class <strong class="source-inline">DivisionTests</strong> and rename the file as well so that it appears as <strong class="source-inline">DivisionTests.cs</strong>.</p>
<p class="callout-heading">Tip</p>
<p class="callout">You can set your text cursor anywhere within the class name in the source code (in the previous case, it was <strong class="source-inline">UnitTest1</strong>) and hit <em class="italic">Ctrl</em> + <em class="italic">R</em>, <em class="italic">R</em> (hold <em class="italic">Ctrl</em> then press <em class="italic">R</em> quickly twice). Type the new name <strong class="source-inline">DivisionTests</strong> and hit <em class="italic">Enter</em>. This will also rename the file if the <strong class="bold">Rename symbol’s file</strong> checkbox is ticked.</p>
<h4>Method name</h4>
<p>Luckily, the requirements are<a id="_idIndexMarker052"/> simple, so our method name will simply be <strong class="source-inline">Divide</strong>. <strong class="source-inline">Divide</strong> will be accepting two integer (<strong class="source-inline">int32</strong>) arguments, per the requirements, and returns a <strong class="source-inline">decimal</strong> value. We will go ahead and refactor our existing unit test from <strong class="source-inline">Test1</strong> to <strong class="source-inline">Divide_Condition1_Expectation1</strong>.</p>
<p class="callout-heading">Note</p>
<p class="callout"><strong class="bold">Arithmetic terminology-naming reminder</strong>: If we have 10 / 5 = 2, then 10 is the dividend, 5 is the divisor, and 2 is the quotient.</p>
<h2 id="_idParaDest-30"><a id="_idTextAnchor030"/>Conditions and expectations</h2>
<p>When we test, we are setting a <a id="_idIndexMarker053"/>condition and defining what we expect when this <a id="_idIndexMarker054"/>condition is met. We start with the <em class="italic">core case</em>, also known as the <em class="italic">positive path</em> or the <em class="italic">happy path</em>. We finish all the positive paths first before going <a id="_idIndexMarker055"/>to other cases. Our mission in unit tests boils down to determining the condition and its expectation and having a unit test for every combination.</p>
<p>To show the relationship between the method we are testing (the method in our SUT) and the associated condition and expectation, we will employ a well-used convention, as illustrated in the following code snippet:</p>
<pre class="source-code">[Fact]
public void <strong class="bold">MethodName_Condition_Expectation</strong>()
{
…</pre>
<p>Here are random examples of unit test method names to familiarize you with the previous convention:</p>
<ul>
<li><strong class="source-inline">SaveUserDetails_MissingEmailAddress_EmailIsMissing</strong></li>
<li><strong class="source-inline">ValidateUserCredentials_HashedPasswordDoesntMatch_False</strong></li>
<li><strong class="source-inline">GetUserById_IdDoesntExist_UserNotFoundException</strong></li>
</ul>
<p>We will see more examples while designing our unit tests.</p>
<p>The core requirement is dividing two integers. The straightforward and simplest implementation is dividing two divisible integers and getting back a whole number. Our condition is <em class="italic">divisible integers</em> and we expect a <em class="italic">whole number</em>. Now, we should update the signature of our unit test to  <strong class="source-inline">Divide_DivisibleIntegers_WholeNumber</strong> and write the body of the test method, as follows:</p>
<pre class="source-code">[Fact]
public void Divide_DivisibleIntegers_WholeNumber()
{
    int dividend = 10;
    int divisor = 5;
    decimal expectedQuotient = 2;
    decimal actualQuotient = Division.Divide(dividend, 
        divisor);
    Assert.Equal(expectedQuotient, actualQuotient);
}</pre>
<p>This code doesn’t compile as the <strong class="source-inline">Division</strong> class doesn’t exist at this stage, and we know that already as we have a squiggly line under <strong class="source-inline">Division</strong>. This is one of the rare occasions where not being able to compile due to a missing class is good. This indicates that our <em class="italic">test has failed</em>, which is also good!</p>
<p>While it does look silly that the test has failed because the code doesn’t compile as the <strong class="source-inline">Division</strong> SUT class is missing, this means that there is no SUT code yet. In <a href="B18370_05.xhtml#_idTextAnchor114"><em class="italic">Chapter 5</em></a>, <em class="italic">Test-Driven Development Explained</em>, we will understand the reason behind considering the no-compilation case.</p>
<p><strong class="source-inline">Assert</strong> is a class from the xUnit library. The <strong class="source-inline">Equal</strong> static method has many overloads, one of which we are using here:</p>
<pre class="source-code">public static void Equal&lt;T&gt;(T expected, T actual) </pre>
<p>When run, this method will flag to the xUnit framework if what we expect and what we’ve actually got are equal. When we run this test, if the result of this assertion is <strong class="source-inline">true</strong>, then the test has passed.</p>
<h2 id="_idParaDest-31"><a id="_idTextAnchor031"/>Red/green</h2>
<p>Failure is what we were looking for. In later<a id="_idIndexMarker056"/> chapters, we will discuss why. For now, it is sufficient to know that we need to start with a failed build (compilation) or failed test (failed assertion), then change that to a passed one. The fail/pass<a id="_idIndexMarker057"/> is also known as the <strong class="bold">red/green refactor technique</strong>, which mimics the idea of <em class="italic">bad/good</em> and <em class="italic">stop/go</em>.</p>
<p>We need to add the <strong class="source-inline">Division</strong> class and the <strong class="source-inline">Divide</strong> method and write the minimal code to make the test pass. Create a new file called <strong class="source-inline">Division.cs</strong> in the <strong class="source-inline">Uqs.Arithmetic</strong> project, like this:</p>
<pre class="source-code">namespace Uqs.Arithmetic;
public class Division
{
    public static decimal Divide(int dividend, int divisor)
    {
        decimal quotient = dividend / divisor;
        return quotient;
    }
}</pre>
<p class="callout-heading">Tip</p>
<p class="callout">You can create a class by placing the text cursor anywhere within the class name (in the previous case, it was <strong class="source-inline">Division</strong>) and hitting <em class="italic">Ctrl</em> + <em class="italic">.</em> (hold down the <em class="italic">Ctrl</em> key and then press <em class="italic">.</em>). Select <strong class="bold">Generate new type…</strong>, then from the <strong class="bold">Project</strong> dropdown, select <strong class="source-inline">Uqs.Arithmetic</strong>, and then hit <strong class="bold">OK</strong>. Then, to generate the method, place your text cursor on <strong class="source-inline">Divide</strong> and hit <em class="italic">Ctrl</em> + <em class="italic">.</em>, select <strong class="bold">Generate method ‘Division.Divide’</strong>, and then you get the method shell in <strong class="source-inline">Division</strong> ready for your code.</p>
<p>It is important to remember that <em class="italic">dividing two integers in C# will return an integer</em>. I have seen senior developers fail to remember this, which led to bad consequences. In the code that we implemented, we have only covered the integers division that will yield a whole quotient. This should satisfy our test.</p>
<p>We are now ready to<a id="_idIndexMarker058"/> run our test with Test Explorer, so hit <em class="italic">Ctrl</em> + <em class="italic">R</em>, <em class="italic">A</em>, which will build your projects, then run all the tests (currently one test). You’ll notice that Test Explorer indicates green, and there is a green bullet with a tick mark between the test name and the <strong class="source-inline">Fact</strong> attribute. When clicked, it will show you some testing-related options, as illustrated in the following screenshot:</p>
<div>
<div class="IMG---Figure" id="_idContainer022">
<img alt="Figure 1.15 – VS unit testing balloon " height="304" src="image/Figure_1.15_B18370.jpg" width="1058"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.15 – VS unit testing balloon</p>
<p>For the sake of completion, the full concept<a id="_idIndexMarker059"/> name is <strong class="bold">red/green/refactor</strong>, but we won’t be explaining the <strong class="bold">refactor</strong> bit here and will leave this for <a href="B18370_05.xhtml#_idTextAnchor114"><em class="italic">Chapter 5</em></a>, <em class="italic">Test-Driven Development Explained</em>.</p>
<h2 id="_idParaDest-32"><a id="_idTextAnchor032"/>The AAA pattern</h2>
<p>Unit testing practitioners <a id="_idIndexMarker060"/>noticed that test code format falls into a certain <a id="_idIndexMarker061"/>structure pattern. First, we <a id="_idIndexMarker062"/>declare some variables and do some preparations. This stage is called <strong class="bold">Arrange</strong>.</p>
<p>The second stage is when we invoke the SUT. In the previous test, it was the line on which we called the <strong class="source-inline">Divide</strong> method. This stage<a id="_idIndexMarker063"/> is called <strong class="bold">Act</strong>.</p>
<p>The third stage is where we validate <a id="_idIndexMarker064"/>our assumption—this is where we have the <strong class="source-inline">Assert</strong> class being used. This stage is, not surprisingly, called <strong class="bold">Assert</strong>.</p>
<p>Developers usually divide <a id="_idIndexMarker065"/>each unit test with comments to denote these<a id="_idIndexMarker066"/> three stages, so if we apply this to our previous unit test, the method would look like this:</p>
<pre class="source-code">[Fact]
public void Divide_DivisibleIntegers_WholeNumber()
{
    <strong class="bold">// Arrange</strong>
    int dividend = 10;
    int divisor = 5;
    decimal expectedQuotient = 2;
    <strong class="bold">// Act</strong>
    decimal actualQuotient = Division.Divide(dividend,
       divisor);
    <strong class="bold">// Assert</strong>
    Assert.Equal(expectedQuotient, actualQuotient);
}</pre>
<p>You can learn more about the <strong class="bold">AAA</strong> pattern in <a href="B18370_03.xhtml#_idTextAnchor066"><em class="italic">Chapter 3</em></a>, <em class="italic">Getting Started with Unit Testing</em>.</p>
<h2 id="_idParaDest-33"><a id="_idTextAnchor033"/>More tests</h2>
<p>We haven’t finished implementing the requirements. We need to add them iteratively, by adding a new test, checking that it fails, implementing it, then making it pass, and then repeating it!</p>
<p>We are going to add a few more tests in the next sections to cover all the requirements, and we are also going to add some other tests to increase the quality.</p>
<h3>Dividing two indivisible numbers</h3>
<p>We need to cover a case <a id="_idIndexMarker067"/>where two numbers are not divisible, so we add another unit testing method under the first one, like so:</p>
<pre class="source-code">[Fact]
public void Divide_<strong class="bold">IndivisibleIntegers</strong>_<strong class="bold">DecimalNumber</strong>()
{
    // Arrange
    int dividend = 10;
    int divisor = <strong class="bold">4</strong>;
    decimal expectedQuotient = <strong class="bold">2.5m</strong>;
    …
}</pre>
<p>This unit test method is similar to the previous one, but the name of the method has changed to reflect the new condition and expectation. Also, the numbers have changed to fit the new condition and expectation.</p>
<p>Run the test by employing any of the following methods:</p>
<ul>
<li>Clicking the blue bullet that appears below <strong class="source-inline">Fact</strong>, then clicking <strong class="bold">Run</strong></li>
<li>Opening <strong class="bold">Test</strong> | <strong class="bold">Test Explorer</strong>, selecting the new <strong class="source-inline">test name</strong> code, and clicking the <strong class="bold">Run</strong> button</li>
<li>Pressing <em class="italic">Ctrl</em> + <em class="italic">R</em>, <em class="italic">A</em>, which will run all tests</li>
</ul>
<p>You will notice that the test will fail—this is good! We have not implemented the division that will yield a decimal yet. We can go ahead and do it now, as follows:</p>
<pre class="source-code">decimal quotient = <strong class="bold">(decimal)</strong>dividend / divisor;</pre>
<p class="callout-heading">Note</p>
<p class="callout">Dividing two integers in C# will return an integer, but dividing a decimal by an integer returns a decimal, therefore you almost always have to cast the dividend or the divisor—or both—to a decimal.</p>
<p>Run the test again, and<a id="_idIndexMarker068"/> this time it should pass.</p>
<h3>Division-by-zero test</h3>
<p>Yes—bad things happen when <a id="_idIndexMarker069"/>you divide by zero. Let’s check whether our code can handle this, as follow<a id="_idTextAnchor034"/>s:</p>
<pre class="source-code">[Fact]
public void Divide_ZeroDivisor_DivideByZeroException()
{
    // Arrange
    int dividend = 10;
    int divisor = 0;
    
    // Act
    Exception e = Record.Exception(() =&gt; 
        Division.Divide(dividend, divisor));
    // Assert
    Assert.IsType&lt;DivideByZeroException&gt;(e);
}</pre>
<p>The <strong class="source-inline">Record</strong> class is another member of the xUnit framework. The <strong class="source-inline">Exception</strong> method records whether the SUT has raised any <strong class="source-inline">Exception</strong> object and returns <strong class="source-inline">null</strong> if there is none. This is the method’s signature:</p>
<pre class="source-code">public static Exception Exception(Func&lt;object&gt; testCode)</pre>
<p><strong class="source-inline">IsType</strong> is a method that compares the class type between the angle brackets to the class type of the object that we passed as an argument, as illustrated in the following code snippet:</p>
<pre class="source-code">public static T IsType&lt;T&gt;(object @object)</pre>
<p>When you run this test, it <a id="_idIndexMarker070"/>will pass! My first impression would be one of suspicion. The problem is that when it passes without writing explicit code, we don’t know yet whether this is a true or a coincidental pass—a false positive. There are many ways to validate whether this pass is incidental; the quickest way—for now—is to debug the code of <strong class="source-inline">Divide_ZeroDivisor_DivideByZeroException</strong>.</p>
<p>Click the <strong class="bold">Test Bullet</strong>, and then click the <strong class="bold">Debug</strong> link, as illustrated in the following screenshot:</p>
<div>
<div class="IMG---Figure" id="_idContainer023">
<img alt="Figure 1.16 – The Debug option in the unit testing balloon " height="160" src="image/Figure_1.16_B18370.jpg" width="536"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.16 – The Debug option in the unit testing balloon</p>
<p>You will hit the exception directly, as illustrated in the following screenshot:</p>
<div>
<div class="IMG---Figure" id="_idContainer024">
<img alt="Figure 1.17 – Exception dialog " height="374" src="image/Figure_1.17_B18370.jpg" width="1015"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.17 – Exception dialog</p>
<p>You’ll notice that the exception is happening at the right place at the division line, so this is what we actually wanted. While this method violated our initial attempt of red/green, having a pass immediately is still a genuine case that you would encounter in day-to-day coding.</p>
<h3>Testing extremes</h3>
<p>The story did not mention testing the extremes, but as a<a id="_idIndexMarker071"/> developer, you know that most software bugs come from <strong class="bold">edge cases</strong>.</p>
<p>You want to build more confidence in your existing code, and you want to make sure that it can handle extremes well, as you’d expect it to.</p>
<p>The extreme values of an <strong class="source-inline">int</strong> data type can be obtained by these two constant fields of <strong class="source-inline">int</strong>:</p>
<ul>
<li><strong class="source-inline">int.MaxValue</strong> = <img alt="" height="34" src="image/Formula_1.1_B18370.png" width="575"/></li>
<li><strong class="source-inline">int.MinValue</strong> = <img alt="" height="35" src="image/Formula_1.2_B18370.png" width="467"/></li>
</ul>
<p>What we need to do is to test the following cases (note that we will only test for 12 decimal digits):</p>
<ul>
<li><strong class="source-inline">int.MaxValue / int.MinValue = -0.999999999534  </strong></li>
<li><strong class="source-inline">(-int.MaxValue) / int.MinValue = 0.999999999534</strong></li>
<li><strong class="source-inline">int.MinValue / int.MaxValue = -1.000000000466</strong></li>
<li><strong class="source-inline">int.MinValue / (-int.MaxValue) = 1.000000000466</strong></li>
</ul>
<p>So, we will need four unit tests to cover each case. However, there is a trick available in most unit test frameworks, including xUnit. We don’t have to write four unit tests—we can do this instead:</p>
<pre class="source-code">[<strong class="bold">Theory</strong>]
[<strong class="bold">InlineData</strong>( int.MaxValue,  int.MinValue, -0.999999999534)]
[<strong class="bold">InlineData</strong>(-int.MaxValue,  int.MinValue,  0.999999999534)]
[<strong class="bold">InlineData</strong>( int.MinValue,  int.MaxValue, -1.000000000466)]
[<strong class="bold">InlineData</strong>( int.MinValue, -int.MaxValue,  1.000000000466)]
public void Divide_ExtremeInput_CorrectCalculation(
    <strong class="bold">int dividend, int divisor, decimal expectedQuotient</strong>)
{
    // Arrange
    // Act
    decimal actualQuotient = Division.Divide(dividend, 
        divisor);
    // Assert
    Assert.Equal(expectedQuotient, actualQuotient, 12);
}</pre>
<p>Notice that now we have <strong class="source-inline">Theory</strong> rather than <strong class="source-inline">Fact</strong>. This is xUnit’s way of declaring that the unit test method is <a id="_idIndexMarker072"/>parametrized. Also, notice that we have four <strong class="source-inline">InlineData</strong> attributes; as you will have already figured out, each one of them corresponds to a test case.</p>
<p>Our unit test method and the <strong class="source-inline">InlineData</strong> attributes have three parameters. When running the unit tests, each parameter will map to the corresponding unit test method’s parameter in the same order. The following screenshot shows how each parameter in the <strong class="source-inline">InlineData</strong> attribute corresponds to a parameter in the <strong class="source-inline">Divide_ExtremeInput_CorrectCalculation</strong> method:</p>
<div>
<div class="IMG---Figure" id="_idContainer027">
<img alt="Figure 1.18 – InlineData parameters are mapped to the decorated method parameters " height="302" src="image/Figure_1.18_B18370.jpg" width="1049"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.18 – InlineData parameters are mapped to the decorated method parameters</p>
<p>For assertion, we are using an overload of the <strong class="source-inline">Equal</strong> method that supports decimal <strong class="bold">precision</strong>, as illustrated in the following code snippet:</p>
<pre class="source-code">static void Equal(decimal expected, decimal actual, 
    <strong class="bold">int precision</strong>)</pre>
<p>Run the tests, and you’ll notice that Test<a id="_idIndexMarker073"/> Explorer treats the four attributes as separate tests, as depicted in the following screenshot:</p>
<div>
<div class="IMG---Figure" id="_idContainer028">
<img alt="Figure 1.19 – VS Test Explorer showing grouped tests " height="340" src="image/Figure_1.19_B18370.jpg" width="1199"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.19 – VS Test Explorer showing grouped tests</p>
<p class="callout-heading">Even More Tests</p>
<p class="callout">For brevity, and given that this chapter is a limited introduction, we didn’t explore all possible testing scenarios—take, for example, <strong class="source-inline">int.MaxValue/int.MaxValue</strong>, <strong class="source-inline">int.MinValue/int.MinValue</strong>, <strong class="source-inline">0/number</strong>, and <strong class="source-inline">0/0</strong>.</p>
<p>The limits of the required tests are going to be discussed in later chapters, along with their pros and cons.</p>
<p>Writing tests before writing the code is not to every developer’s taste and might look unintuitive at the beginning, but you have a complete book to make you decide for yourself. In <a href="B18370_05.xhtml#_idTextAnchor114"><em class="italic">Chapter 5</em></a>, <em class="italic">Test-Driven Development Explained</em>, you will dig deeper into implementation and best<a id="_idIndexMarker074"/> practices.</p>
<h1 id="_idParaDest-34"><a id="_idTextAnchor035"/>Summary</h1>
<p>While this chapter is meant for a quick implementation, I trust you did have a taste of what TDD is and picked up some skills, such as <em class="italic">xUnit</em>, <em class="italic">Test Explorer</em>, <em class="italic">test first</em>, <em class="italic">red/green</em>, and a few conventions.</p>
<p>For a start, we have picked easy examples—of course—so, we have got no <strong class="bold">dependency injection</strong> (<strong class="bold">DI</strong>), nor mocking or anything fancy, because the stimulating stuff is coming next. So, I hope this chapter has made you excited about the rest of the book.</p>
<p>If you are like me when I first encountered TDD, you might be wondering the following: <em class="italic">Why test first?</em> <em class="italic">Isn’t this too much unit testing code?</em> <em class="italic">Is unit testing effective?</em> <em class="italic">What is the difference between unit testing and TDD?</em> <em class="italic">How many tests should I write?</em> You may have other questions too—these will be answered gradually while you progress through the book, and I promise I will make the answers as clear as possible.</p>
<p>In the next chapter, we will touch on a design pattern called DI, which is an essential requirement for working with TDD.</p>
<h1 id="_idParaDest-35"><a id="_idTextAnchor036"/>Further reading</h1>
<p>To learn more about the topics discussed in the chapter, you can refer to the following links:</p>
<ul>
<li>Class libraries: <a href="https://docs.microsoft.com/en-us/dotnet/standard/class-libraries">https://docs.microsoft.com/en-us/dotnet/standard/class-libraries</a></li>
<li>xUnit: <a href="https://xunit.net/">https://xunit.net/</a></li>
</ul>
</div>
</div>
</body></html>