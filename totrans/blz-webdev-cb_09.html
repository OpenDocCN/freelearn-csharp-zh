<html><head></head><body>
  <div id="_idContainer047">
   <h1 class="chapter-number" id="_idParaDest-308">
    <a id="_idTextAnchor308">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     9
    </span>
   </h1>
   <h1 id="_idParaDest-309">
    <a id="_idTextAnchor309">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Exploring Navigation and Routing
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     Routing and navigation are essential features in any modern web application.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     In a Blazor Web App, routing is the process that maps URLs to Razor components, allowing users to navigate between different views.
    </span>
    <span class="koboSpan" id="kobo.3.3">
     Navigation refers to the actions and processes involved in moving from one route to another, whether through user interactions, programmatic commands, or other means.
    </span>
    <span class="koboSpan" id="kobo.3.4">
     Blazor provides a flexible routing system that supports both static and interactive routing, depending on how you configure
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.4.1">
      the application.
     </span>
    </span>
   </p>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.5.1">
      Static routing
     </span>
    </strong>
    <span class="koboSpan" id="kobo.6.1">
     occurs
    </span>
    <a id="_idIndexMarker440">
    </a>
    <span class="koboSpan" id="kobo.7.1">
     during static server-side rendering when prerendering is enabled.
    </span>
    <span class="koboSpan" id="kobo.7.2">
     In this mode, the Blazor router, defined by the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.8.1">
      Router
     </span>
    </strong>
    <span class="koboSpan" id="kobo.9.1">
     component in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.10.1">
      Routes.razor
     </span>
    </strong>
    <span class="koboSpan" id="kobo.11.1">
     , performs routing based on the HTTP request path, mapping URLs directly to components.
    </span>
    <span class="koboSpan" id="kobo.11.2">
     Conversely, when the Blazor router is set to an interactive render mode, it automatically
    </span>
    <a id="_idIndexMarker441">
    </a>
    <span class="koboSpan" id="kobo.12.1">
     transitions from static to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.13.1">
      interactive routing
     </span>
    </strong>
    <span class="koboSpan" id="kobo.14.1">
     after the initial rendering on the server is completed.
    </span>
    <span class="koboSpan" id="kobo.14.2">
     Interactive routing uses the document’s URL (the URL in the browser’s address bar) to determine which component to render dynamically, allowing an application to respond to user interactions and navigate without performing full HTTP requests.
    </span>
    <span class="koboSpan" id="kobo.14.3">
     This approach enables dynamic content updates and seamless navigation within
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.15.1">
      the application.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.16.1">
     When comparing routing in Blazor to routing in ASP.NET Core, there are both similarities and key differences to consider.
    </span>
    <span class="koboSpan" id="kobo.16.2">
     ASP.NET Core primarily uses controllers and actions for routing, where routes are typically defined in a centralized manner, often using attribute-based or conventional routing.
    </span>
    <span class="koboSpan" id="kobo.16.3">
     In contrast, Blazor’s routing is component-based, directly mapping URLs to Razor components instead of controller actions.
    </span>
    <span class="koboSpan" id="kobo.16.4">
     This component-based approach in Blazor allows a more modular and encapsulated routing experience, where each component can manage its own navigation logic.
    </span>
    <span class="koboSpan" id="kobo.16.5">
     Additionally, Blazor supports navigation within a client-side browser, without requiring full-page reloads, which is a significant difference from traditional server-side routing in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.17.1">
      ASP.NET Core.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.18.1">
     In this chapter, we will cover aspects of routing and navigation in Blazor web apps using .NET 9.
    </span>
    <span class="koboSpan" id="kobo.18.2">
     We will begin with enabling routes from multiple assemblies, essential for building modular applications and scenarios where you’ll leverage external NuGet packages.
    </span>
    <span class="koboSpan" id="kobo.18.3">
     Then, we will explore parameterized routes, where you will learn to create dynamic and flexible URLs with route parameters.
    </span>
    <span class="koboSpan" id="kobo.18.4">
     Then, we will discuss implementing unified
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.19.1">
      deep linking
     </span>
    </strong>
    <span class="koboSpan" id="kobo.20.1">
     for centralizing route definitions for easier management.
    </span>
    <span class="koboSpan" id="kobo.20.2">
     We will also cover handling incorrect
    </span>
    <a id="_idIndexMarker442">
    </a>
    <span class="koboSpan" id="kobo.21.1">
     navigation requests and controlling navigation history to enhance the user experience.
    </span>
    <span class="koboSpan" id="kobo.21.2">
     Near the end, we will explain how to execute asynchronous operations during navigation and cancel long-running tasks when users navigate away.
    </span>
    <span class="koboSpan" id="kobo.21.3">
     Lastly, we will explore how to prevent unintentional data loss by prompting users about unsaved changes before navigating away
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.22.1">
      from forms.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.23.1">
     By the end of this chapter, you will understand how routing works in Blazor and how to implement various routing and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.24.1">
      navigation scenarios.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.25.1">
     Routing and navigation are critical components that often impact entire application behavior.
    </span>
    <span class="koboSpan" id="kobo.25.2">
     However, the recipes in this chapter are fully independent and don’t build on one another.
    </span>
    <span class="koboSpan" id="kobo.25.3">
     This approach also means you can review and implement each recipe in isolation.
    </span>
    <span class="koboSpan" id="kobo.25.4">
     Recipes begin with instructions on what working directory you should create and which sample files you need to execute the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.26.1">
      following task.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.27.1">
     In this chapter, we’re going to cover the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.28.1">
      following recipes:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.29.1">
      Enabling routes from
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.30.1">
       multiple assemblies
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.31.1">
      Working with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.32.1">
       parameterized routes
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.33.1">
      Working with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.34.1">
       query parameters
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.35.1">
      Implementing unified
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.36.1">
       deep linking
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.37.1">
      Handling incorrect
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.38.1">
       navigation requests
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.39.1">
      Executing an asynchronous operation
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.40.1">
       with navigation
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.41.1">
      Canceling a long-running task when users
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.42.1">
       navigate away
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.43.1">
      Controlling
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.44.1">
       navigation history
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-310">
    <a id="_idTextAnchor310">
    </a>
    <span class="koboSpan" id="kobo.45.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.46.1">
     Before diving in, make sure that you have
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.47.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.48.1">
      .NET 9
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.49.1">
       SDK installed
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.50.1">
      A modern IDE (that supports
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.51.1">
       Blazor development)
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.52.1">
      A modern web browser (that
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.53.1">
       supports WebAssembly)
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.54.1">
      A
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.55.1">
       Blazor project
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.56.1">
     We will build all recipes in a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.57.1">
      BlazorCookbook.App
     </span>
    </strong>
    <span class="koboSpan" id="kobo.58.1">
     project, so all references will reflect that assembly.
    </span>
    <span class="koboSpan" id="kobo.58.2">
     Make sure you adjust assembly references to match
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.59.1">
      your project.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.60.1">
     You can find all the code written in this chapter and code samples on GitHub
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.61.1">
      at:
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/Blazor-Web-Development-Cookbook/tree/main/BlazorCookbook.App.Client/Chapters/Chapter09">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.62.1">
       https://github.com/PacktPublishing/Blazor-Web-Development-Cookbook/tree/main/BlazorCookbook.App.Client/Chapters/Chapter09
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.63.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-311">
    <a id="_idTextAnchor311">
    </a>
    <span class="koboSpan" id="kobo.64.1">
     Enabling routes from multiple assemblies
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.65.1">
     You might want to modularize your Blazor application by spreading routes across multiple assemblies.
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.66.1">
      Modularization
     </span>
    </strong>
    <span class="koboSpan" id="kobo.67.1">
     is the practice of breaking down an application into smaller, manageable, and independent
    </span>
    <a id="_idIndexMarker443">
    </a>
    <span class="koboSpan" id="kobo.68.1">
     modules, each responsible for a specific functionality.
    </span>
    <span class="koboSpan" id="kobo.68.2">
     It’s an ideal development approach when working in big or distributed teams, as each team can deliver features independently.
    </span>
    <span class="koboSpan" id="kobo.68.3">
     Modularization is also
    </span>
    <a id="_idIndexMarker444">
    </a>
    <span class="koboSpan" id="kobo.69.1">
     beneficial in larger applications, as you can encapsulate different features in separate assemblies.
    </span>
    <span class="koboSpan" id="kobo.69.2">
     Blazor allows you to discover routable components from additional assemblies through the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.70.1">
      Router
     </span>
    </strong>
    <span class="koboSpan" id="kobo.71.1">
     component’s API, for interactive routing, and the endpoint convention builder, for static
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.72.1">
      route setups.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.73.1">
     Let’s learn how to allow users to navigate to a component from an assembly different than our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.74.1">
      base project.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-312">
    <a id="_idTextAnchor312">
    </a>
    <span class="koboSpan" id="kobo.75.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.76.1">
     Before we extend assemblies, where Blazor scans for routable components, copy the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.77.1">
      BlazorCookbook.Library
     </span>
    </strong>
    <span class="koboSpan" id="kobo.78.1">
     project from the GitHub repository to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.79.1">
      your solution.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-313">
    <a id="_idTextAnchor313">
    </a>
    <span class="koboSpan" id="kobo.80.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.81.1">
     Follow these steps to allow Blazor to discover routes from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.82.1">
      different assemblies:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.83.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.84.1">
       BlazorCookbook.App
      </span>
     </strong>
     <span class="koboSpan" id="kobo.85.1">
      server-side project of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.86.1">
       your solution.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.87.1">
      Open
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.88.1">
       BlazorCookbook.App.csproj
      </span>
     </strong>
     <span class="koboSpan" id="kobo.89.1">
      and add a reference to the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.90.1">
        BlazorCookbook.Library
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.91.1">
       project:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.92.1">
&lt;ItemGroup&gt;
  &lt;ProjectReference
    Include="..\BlazorCookbook.App.Client\
    BlazorCookbook.App.Client.csproj" /&gt;
  &lt;ProjectReference
    Include="..\BlazorCookbook.Library\
    BlazorCookbook.Library.csproj" /&gt;
&lt;/ItemGroup&gt;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.93.1">
      Open the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.94.1">
       Program.cs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.95.1">
      and locate a
     </span>
     <a id="_idIndexMarker445">
     </a>
     <span class="koboSpan" id="kobo.96.1">
      component mapping section.
     </span>
     <span class="koboSpan" id="kobo.96.2">
      Use the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.97.1">
       AddAdditionalAssemblies()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.98.1">
      method to map routes from the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.99.1">
        ExternalEventManager
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.100.1">
       assembly:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.101.1">
using BlazorCookbook.Library.Chapter09.Recipe01;
//other registrations and pipelines
app.MapRazorComponents&lt;App&gt;()
    .AddInteractiveServerRenderMode()
    .AddInteractiveWebAssemblyRenderMode()
    .AddAdditionalAssemblies(
        typeof(_Imports).Assembly,
        typeof(ExternalEventManager).Assembly
    );</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.102.1">
      Open the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.103.1">
       Routes
      </span>
     </strong>
     <span class="koboSpan" id="kobo.104.1">
      component and extend the array attached to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.105.1">
       AdditionalAssemblies
      </span>
     </strong>
     <span class="koboSpan" id="kobo.106.1">
      parameter with the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.107.1">
        ExternalEventManager
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.108.1">
       assembly:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.109.1">
@using BlazorCookbook.Library.Chapter09.Recipe01
&lt;Router AppAssembly="@typeof(Program).Assembly"
        AdditionalAssemblies="new[]
        {
            typeof(Client._Imports).Assembly,
            typeof(ExternalEventManager).Assembly
        }"&gt;
    @* router configuration *@
&lt;/Router&gt;</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-314">
    <a id="_idTextAnchor314">
    </a>
    <span class="koboSpan" id="kobo.110.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.111.1">
     In this recipe, we add all the configurations for routable component discoverability in the server-side project
    </span>
    <a id="_idIndexMarker446">
    </a>
    <span class="koboSpan" id="kobo.112.1">
     of the solution.
    </span>
    <span class="koboSpan" id="kobo.112.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.113.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.114.1">
     , we find the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.115.1">
      BlazorCookbook.App
     </span>
    </strong>
    <span class="koboSpan" id="kobo.116.1">
     project configuration file and reference the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.117.1">
      BlazorCookbook.Library
     </span>
    </strong>
    <span class="koboSpan" id="kobo.118.1">
     project that you’ve copied from the GitHub repository.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.119.1">
      BlazorCookbook.Library
     </span>
    </strong>
    <span class="koboSpan" id="kobo.120.1">
     contains an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.121.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.122.1">
     component, and we want our users to be able to navigate
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.123.1">
      to it.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.124.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.125.1">
      step 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.126.1">
     , we set up the discoverability of the static routing that might come from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.127.1">
      BlazorCookbook.Library
     </span>
    </strong>
    <span class="koboSpan" id="kobo.128.1">
     .
    </span>
    <span class="koboSpan" id="kobo.128.2">
     We navigate to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.129.1">
      Program.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.130.1">
     file of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.131.1">
      BlazorCookbook.App
     </span>
    </strong>
    <span class="koboSpan" id="kobo.132.1">
     project and locate where we build the endpoint convention of the application.
    </span>
    <span class="koboSpan" id="kobo.132.2">
     The endpoint route builder starts from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.133.1">
      MapRazorComponents()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.134.1">
     method call.
    </span>
    <span class="koboSpan" id="kobo.134.2">
     At the end of the builder, we call the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.135.1">
      AddAdditionalAssemblies()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.136.1">
     method to map all the static routes from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.137.1">
      BlazorCookbook.App.Client
     </span>
    </strong>
    <span class="koboSpan" id="kobo.138.1">
     project.
    </span>
    <span class="koboSpan" id="kobo.138.2">
     Now, we extend the additional assemblies’ array with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.139.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.140.1">
     assembly.
    </span>
    <span class="koboSpan" id="kobo.140.2">
     To make the registration type-safe, rather than a simple string, we use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.141.1">
      typeof()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.142.1">
     method.
    </span>
    <span class="koboSpan" id="kobo.142.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.143.1">
      typeof()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.144.1">
     method in .NET allows us to obtain the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.145.1">
      Type
     </span>
    </strong>
    <span class="koboSpan" id="kobo.146.1">
     object for a given type name, enabling reflection and metadata access at runtime.
    </span>
    <span class="koboSpan" id="kobo.146.2">
     Additionally, it allows retrieval of the assembly containing the type, which solves our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.147.1">
      requirement perfectly.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.148.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.149.1">
      step 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.150.1">
     , we navigate to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.151.1">
      Routes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.152.1">
     component, still in the server-side project, to extend the discoverability of interactive routes.
    </span>
    <span class="koboSpan" id="kobo.152.2">
     Here, we find our application
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.153.1">
      Router
     </span>
    </strong>
    <span class="koboSpan" id="kobo.154.1">
     configuration.
    </span>
    <span class="koboSpan" id="kobo.154.2">
     By specifying assemblies with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.155.1">
      AppAssembly
     </span>
    </strong>
    <span class="koboSpan" id="kobo.156.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.157.1">
      AdditionalAssemblies
     </span>
    </strong>
    <span class="koboSpan" id="kobo.158.1">
     parameters,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.159.1">
      Router
     </span>
    </strong>
    <span class="koboSpan" id="kobo.160.1">
     dynamically discovers and maps routes to components defined in those assemblies.
    </span>
    <span class="koboSpan" id="kobo.160.2">
     In our case, again, we find that the client-side project assembly is
    </span>
    <a id="_idIndexMarker447">
    </a>
    <span class="koboSpan" id="kobo.161.1">
     already attached to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.162.1">
      AdditionalAssemblies
     </span>
    </strong>
    <span class="koboSpan" id="kobo.163.1">
     parameter of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.164.1">
      Router
     </span>
    </strong>
    <span class="koboSpan" id="kobo.165.1">
     .
    </span>
    <span class="koboSpan" id="kobo.165.2">
     We extend the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.166.1">
      AdditionalAssemblies
     </span>
    </strong>
    <span class="koboSpan" id="kobo.167.1">
     with reference to the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.168.1">
       ExternalEventManager
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.169.1">
      assembly.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-315">
    <a id="_idTextAnchor315">
    </a>
    <span class="koboSpan" id="kobo.170.1">
     Working with parameterized routes
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.171.1">
     In Blazor, parameterized routes allow you to pass parameters through the URL, making your application more dynamic and flexible.
    </span>
    <span class="koboSpan" id="kobo.171.2">
     By leveraging route parameters, you can create components that
    </span>
    <a id="_idIndexMarker448">
    </a>
    <span class="koboSpan" id="kobo.172.1">
     respond to specific URL segments and render content based on those parameters.
    </span>
    <span class="koboSpan" id="kobo.172.2">
     You can also use route parameters to persist the component state and allow users to bookmark it (which we explored at the beginning of
    </span>
    <a href="B22020_05.xhtml#_idTextAnchor165">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.173.1">
        Chapter 5
       </span>
      </em>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.174.1">
      ).
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.175.1">
     Let’s extend component routing with parametrized routes, enforcing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.176.1">
      parameter constraints.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-316">
    <a id="_idTextAnchor316">
    </a>
    <span class="koboSpan" id="kobo.177.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.178.1">
     Before exploring parametrized routing, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.179.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.180.1">
      Create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.181.1">
       Chapter09
      </span>
     </strong>
     <span class="koboSpan" id="kobo.182.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.183.1">
       Recipe02
      </span>
     </strong>
     <span class="koboSpan" id="kobo.184.1">
      directory – this will be your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.185.1">
       working directory
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.186.1">
      Copy
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.187.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.188.1">
      from the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.189.1">
       Chapter09
      </span>
     </strong>
     <span class="koboSpan" id="kobo.190.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.191.1">
       Recipe01
      </span>
     </strong>
     <span class="koboSpan" id="kobo.192.1">
      directory in the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.193.1">
       BlazorCookbook.Library
      </span>
     </strong>
     <span class="koboSpan" id="kobo.194.1">
      project or the matching directory in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.195.1">
       GitHub repository
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-317">
    <a id="_idTextAnchor317">
    </a>
    <span class="koboSpan" id="kobo.196.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.197.1">
     Follow these steps to implement routes with parameters and intercept
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.198.1">
      their values:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.199.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.200.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.201.1">
      component and extend its routes with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.202.1">
       parametrized options:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.203.1">
@page "/ch09r02"
@page "/ch09r02/{eventId:guid}"
@page "/ch09r02/{eventId:guid}/venues/{venue?}"</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.204.1">
      In
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.205.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.206.1">
      , initialize the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.207.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.208.1">
      block with two parameters –
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.209.1">
       EventId
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.210.1">
       and
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.211.1">
        Venue
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.212.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.213.1">
@code {
    [Parameter] public Guid EventId { get; set; }
    [Parameter] public string Venue { get; set; }
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.214.1">
      Extend the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.215.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.216.1">
      markup by constructing a conditional display
     </span>
     <a id="_idIndexMarker449">
     </a>
     <span class="koboSpan" id="kobo.217.1">
      of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.218.1">
       Venue
      </span>
     </strong>
     <span class="koboSpan" id="kobo.219.1">
      and
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.220.1">
        EventId
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.221.1">
       values:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.222.1">
@if (EventId == default) return;
&lt;p&gt;Event ID: @EventId&lt;/p&gt;
&lt;p&gt;In @(Venue ?? </span><span class="koboSpan" id="kobo.222.2">"all venues")&lt;/p&gt;</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-318">
    <a id="_idTextAnchor318">
    </a>
    <span class="koboSpan" id="kobo.223.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.224.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.225.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.226.1">
     , we navigate to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.227.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.228.1">
     and extend the routing there.
    </span>
    <span class="koboSpan" id="kobo.228.2">
     We add a new route that expects an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.229.1">
      eventId
     </span>
    </strong>
    <span class="koboSpan" id="kobo.230.1">
     parameter by placing the parameter name in curly braces.
    </span>
    <span class="koboSpan" id="kobo.230.2">
     We also declare that it must be of type
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.231.1">
      guid
     </span>
    </strong>
    <span class="koboSpan" id="kobo.232.1">
     .
    </span>
    <span class="koboSpan" id="kobo.232.2">
     Blazor also supports route parameter constraints, which enhance your application’s security by automatically rejecting parameter values that don’t meet the specified constraints.
    </span>
    <span class="koboSpan" id="kobo.232.3">
     Users providing incompatible values will receive a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.233.1">
      404
     </span>
    </strong>
    <span class="koboSpan" id="kobo.234.1">
     error status code.
    </span>
    <span class="koboSpan" id="kobo.234.2">
     While the route parameter name is case-insensitive, the constraint must follow the configured casing.
    </span>
    <span class="koboSpan" id="kobo.234.3">
     As constraint support is limited, in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.235.1">
      See also
     </span>
    </em>
    <span class="koboSpan" id="kobo.236.1">
     section for this recipe, there’s a link to all currently supported data types.
    </span>
    <span class="koboSpan" id="kobo.236.2">
     In the last route we add, we declare the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.237.1">
      venue?
     </span>
    </strong>
    <span class="koboSpan" id="kobo.238.1">
     optional route parameter by adding a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.239.1">
      ?
     </span>
    </strong>
    <span class="koboSpan" id="kobo.240.1">
     symbol at the end.
    </span>
    <span class="koboSpan" id="kobo.240.2">
     Having an optional parameter means users can navigate to the page whether they provide the value of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.241.1">
      venue
     </span>
    </strong>
    <span class="koboSpan" id="kobo.242.1">
     or not, and we can adjust the display
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.243.1">
      logic accordingly.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.244.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.245.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.246.1">
     , we initialize a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.247.1">
      @code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.248.1">
     block in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.249.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.250.1">
     and declare two parameters,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.251.1">
      EventId
     </span>
    </strong>
    <span class="koboSpan" id="kobo.252.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.253.1">
      Venue
     </span>
    </strong>
    <span class="koboSpan" id="kobo.254.1">
     , matching the names of the parameters added in the routes but following the Pascal case convention.
    </span>
    <span class="koboSpan" id="kobo.254.2">
     That’s all it takes to enable Blazor to bind route parameters to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.255.1">
      component’s properties.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.256.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.257.1">
      step 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.258.1">
     , we construct a
    </span>
    <a id="_idIndexMarker450">
    </a>
    <span class="koboSpan" id="kobo.259.1">
     simple markup in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.260.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.261.1">
     .
    </span>
    <span class="koboSpan" id="kobo.261.2">
     Below the existing
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.262.1">
      h1
     </span>
    </strong>
    <span class="koboSpan" id="kobo.263.1">
     element, we check whether
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.264.1">
      EventId
     </span>
    </strong>
    <span class="koboSpan" id="kobo.265.1">
     was set in the route and render its value in a paragraph.
    </span>
    <span class="koboSpan" id="kobo.265.2">
     Lastly, we add another paragraph, below
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.266.1">
      EventId
     </span>
    </strong>
    <span class="koboSpan" id="kobo.267.1">
     , to display the current value of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.268.1">
      Venue
     </span>
    </strong>
    <span class="koboSpan" id="kobo.269.1">
     or a message indicating that the user is viewing all venues (if
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.270.1">
      Venue
     </span>
    </strong>
    <span class="koboSpan" id="kobo.271.1">
     was not provided in the route).
    </span>
    <span class="koboSpan" id="kobo.271.2">
     With this setup, you can test how different routes impact the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.272.1">
      component’s behavior.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-319">
    <a id="_idTextAnchor319">
    </a>
    <span class="koboSpan" id="kobo.273.1">
     There’s more…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.274.1">
     Alternatively, you can implement a
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.275.1">
      catch’em all
     </span>
    </em>
    <span class="koboSpan" id="kobo.276.1">
     pattern to intercept route parameters.
    </span>
    <span class="koboSpan" id="kobo.276.2">
     You can intercept an
    </span>
    <a id="_idIndexMarker451">
    </a>
    <span class="koboSpan" id="kobo.277.1">
     entire route segment into a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.278.1">
      string parameter:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.279.1">
@page "/ch09r02/{*path}"
@code {
    [Parameter] public string Path {get; set; }
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.280.1">
     We still declare the route parameter in curly braces and a matching
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.281.1">
      string
     </span>
    </strong>
    <span class="koboSpan" id="kobo.282.1">
     parameter in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.283.1">
      @code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.284.1">
     block, similar to other routing cases.
    </span>
    <span class="koboSpan" id="kobo.284.2">
     However, to indicate that we want to intercept an entire route segment, we prefix the parameter name with a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.285.1">
      *
     </span>
    </strong>
    <span class="koboSpan" id="kobo.286.1">
     symbol.
    </span>
    <span class="koboSpan" id="kobo.286.2">
     For example, when a user navigates to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.287.1">
      /ch09r02/im/definitely/lost
     </span>
    </strong>
    <span class="koboSpan" id="kobo.288.1">
     , Blazor assigns
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.289.1">
      im/definitely/lost
     </span>
    </strong>
    <span class="koboSpan" id="kobo.290.1">
     to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.291.1">
      Path
     </span>
    </strong>
    <span class="koboSpan" id="kobo.292.1">
     value.
    </span>
    <span class="koboSpan" id="kobo.292.2">
     You can still mix standard route parameters and constraints as long as the catch-all route segment parameter is the last in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.293.1">
      route path.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-320">
    <a id="_idTextAnchor320">
    </a>
    <span class="koboSpan" id="kobo.294.1">
     See also
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.295.1">
     For the full list of data types that Blazor supports as route parameter constraints, check out the following Microsoft
    </span>
    <a id="_idIndexMarker452">
    </a>
    <span class="koboSpan" id="kobo.296.1">
     documentation
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.297.1">
      link:
     </span>
    </span>
    <a href="https://learn.microsoft.com/en-us/aspnet/core/blazor/fundamentals/routing?view=aspnetcore-9.0#route-constraints">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.298.1">
       https://learn.microsoft.com/en-us/aspnet/core/blazor/fundamentals/routing?view=aspnetcore-9.0#route-constraints
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.299.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-321">
    <a id="_idTextAnchor321">
    </a>
    <span class="koboSpan" id="kobo.300.1">
     Working with query parameters
    </span>
   </h1>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.301.1">
      Query strings
     </span>
    </strong>
    <span class="koboSpan" id="kobo.302.1">
     and parameters are
    </span>
    <a id="_idIndexMarker453">
    </a>
    <span class="koboSpan" id="kobo.303.1">
     parts of a URL that allow you to pass optional data to a web application.
    </span>
    <span class="koboSpan" id="kobo.303.2">
     They appear
    </span>
    <a id="_idIndexMarker454">
    </a>
    <span class="koboSpan" id="kobo.304.1">
     after the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.305.1">
      ?
     </span>
    </strong>
    <span class="koboSpan" id="kobo.306.1">
     symbol in a URL and consist of key-value pairs, separated by
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.307.1">
      =
     </span>
    </strong>
    <span class="koboSpan" id="kobo.308.1">
     and joined by
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.309.1">
      &amp;
     </span>
    </strong>
    <span class="koboSpan" id="kobo.310.1">
     .
    </span>
    <span class="koboSpan" id="kobo.310.2">
     The use of query parameters is useful for filtering data, pagination, and passing user-specific information without altering the URL
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.311.1">
      structure significantly.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.312.1">
     Let’s enhance the routing by allowing the conditional passing of an event date that will be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.313.1">
      loaded dynamically.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-322">
    <a id="_idTextAnchor322">
    </a>
    <span class="koboSpan" id="kobo.314.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.315.1">
     Before exploring query parameters, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.316.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.317.1">
      Create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.318.1">
       Chapter09
      </span>
     </strong>
     <span class="koboSpan" id="kobo.319.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.320.1">
       Recipe03
      </span>
     </strong>
     <span class="koboSpan" id="kobo.321.1">
      directory – this will be your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.322.1">
       working directory
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.323.1">
      Copy
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.324.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.325.1">
      from the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.326.1">
       Working with parameterized routes
      </span>
     </em>
     <span class="koboSpan" id="kobo.327.1">
      recipe or the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.328.1">
       Chapter09
      </span>
     </strong>
     <span class="koboSpan" id="kobo.329.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.330.1">
       Recipe02
      </span>
     </strong>
     <span class="koboSpan" id="kobo.331.1">
      directory in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.332.1">
       GitHub repository
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-323">
    <a id="_idTextAnchor323">
    </a>
    <span class="koboSpan" id="kobo.333.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.334.1">
     Follow these instructions to intercept values from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.335.1">
      query parameters:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.336.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.337.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.338.1">
      block of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.339.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.340.1">
      and introduce a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.341.1">
       Date
      </span>
     </strong>
     <span class="koboSpan" id="kobo.342.1">
      parameter, but use a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.343.1">
       SupplyParameterFromQuery
      </span>
     </strong>
     <span class="koboSpan" id="kobo.344.1">
      attribute to indicate that Blazor should intercept it from the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.345.1">
       query string:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.346.1">
[SupplyParameterFromQuery]
public DateTime Date { get; set; }</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.347.1">
      At the end of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.348.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.349.1">
      markup, check whether
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.350.1">
       Date
      </span>
     </strong>
     <span class="koboSpan" id="kobo.351.1">
      is available and render another paragraph with the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.352.1">
        Date
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.353.1">
       value:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.354.1">
@if (Date == DateTime.MinValue) return;
&lt;p&gt;On @Date&lt;/p&gt;</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-324">
    <a id="_idTextAnchor324">
    </a>
    <span class="koboSpan" id="kobo.355.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.356.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.357.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.358.1">
     , we navigate to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.359.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.360.1">
     and declare a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.361.1">
      Date
     </span>
    </strong>
    <span class="koboSpan" id="kobo.362.1">
     parameter.
    </span>
    <span class="koboSpan" id="kobo.362.2">
     Instead of using the standard
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.363.1">
      Parameter
     </span>
    </strong>
    <span class="koboSpan" id="kobo.364.1">
     attribute, we leverage the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.365.1">
      SupplyParameterFromQuery
     </span>
    </strong>
    <span class="koboSpan" id="kobo.366.1">
     variant, instructing Blazor to intercept parameters from the query string.
    </span>
    <span class="koboSpan" id="kobo.366.2">
     There’s no need to manipulate routes; simply annotating the parameter with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.367.1">
      SupplyParameterFromQuery
     </span>
    </strong>
    <span class="koboSpan" id="kobo.368.1">
     enables
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.369.1">
      this functionality.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.370.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.371.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.372.1">
     , we extend the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.373.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.374.1">
     markup.
    </span>
    <span class="koboSpan" id="kobo.374.2">
     We check whether the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.375.1">
      Date
     </span>
    </strong>
    <span class="koboSpan" id="kobo.376.1">
     value matches
    </span>
    <a id="_idIndexMarker455">
    </a>
    <span class="koboSpan" id="kobo.377.1">
     the default value of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.378.1">
      DateTime
     </span>
    </strong>
    <span class="koboSpan" id="kobo.379.1">
     , which indicates that the parameter was not in the query string.
    </span>
    <span class="koboSpan" id="kobo.379.2">
     If Blazor intercepts the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.380.1">
      Date
     </span>
    </strong>
    <span class="koboSpan" id="kobo.381.1">
     parameter, we render a paragraph displaying its value.
    </span>
    <span class="koboSpan" id="kobo.381.2">
     However, it’s important to note that the format of the date provided in the query string needs to match the culture settings of the application.
    </span>
    <span class="koboSpan" id="kobo.381.3">
     By default, Blazor and .NET expect dates in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.382.1">
      MM-DD-YYYY
     </span>
    </strong>
    <span class="koboSpan" id="kobo.383.1">
     format, which is a default format in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.384.1">
      en-US
     </span>
    </strong>
    <span class="koboSpan" id="kobo.385.1">
     culture, reflecting the United States standard.
    </span>
    <span class="koboSpan" id="kobo.385.2">
     If the date is provided in a different format, such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.386.1">
      DD-MM-YYYY
     </span>
    </strong>
    <span class="koboSpan" id="kobo.387.1">
     , it may not be parsed correctly unless the application’s culture is set appropriately.
    </span>
    <span class="koboSpan" id="kobo.387.2">
     This can be adjusted either globally or within specific components by configuring the appropriate culture settings, ensuring that Blazor interprets the date in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.388.1">
      desired format.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-325">
    <a id="_idTextAnchor325">
    </a>
    <span class="koboSpan" id="kobo.389.1">
     There’s more…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.390.1">
     When your C# parameter name differs from the one provided in a query string, or when a parameter key is present multiple times in a query string and you need to intercept all values into an array, you must explicitly declare the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.391.1">
      Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.392.1">
     property of the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.393.1">
       SupplyParameterFromQuery
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.394.1">
      attribute:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.395.1">
[SupplyParameterFromQuery(Name = "seat")]
public string[] Seats { get; set; }</span></pre>
   <p>
    <span class="koboSpan" id="kobo.396.1">
     With this code, Blazor will intercept all the query parameters attached to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.397.1">
      seat
     </span>
    </strong>
    <span class="koboSpan" id="kobo.398.1">
     key and store them in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.399.1">
      Seats
     </span>
    </strong>
    <span class="koboSpan" id="kobo.400.1">
     array.
    </span>
    <span class="koboSpan" id="kobo.400.2">
     You can then use that array to highlight or reserve seats with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.401.1">
      specific numbers.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-326">
    <a id="_idTextAnchor326">
    </a>
    <span class="koboSpan" id="kobo.402.1">
     See also
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.403.1">
     If you’d like to learn
    </span>
    <a id="_idIndexMarker456">
    </a>
    <span class="koboSpan" id="kobo.404.1">
     more about globalization and culture settings in Blazor, check out the Microsoft Learn resource
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.405.1">
      here:
     </span>
    </span>
    <a href="https://learn.microsoft.com/en-us/aspnet/core/blazor/globalization-localization#globalization">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.406.1">
       https://learn.microsoft.com/en-us/aspnet/core/blazor/globalization-localization#globalization
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.407.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-327">
    <a id="_idTextAnchor327">
    </a>
    <span class="koboSpan" id="kobo.408.1">
     Implementing unified deep linking
    </span>
   </h1>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.409.1">
      Deep linking
     </span>
    </strong>
    <span class="koboSpan" id="kobo.410.1">
     in a web application is the ability to link directly to specific content or functionality.
    </span>
    <span class="koboSpan" id="kobo.410.2">
     Implementing a
    </span>
    <a id="_idIndexMarker457">
    </a>
    <span class="koboSpan" id="kobo.411.1">
     unified deep linking service in your application centralizes route management, making the application more maintainable and scalable.
    </span>
    <span class="koboSpan" id="kobo.411.2">
     It’s much easier to manage routing changes and avoid inconsistencies with all routes in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.412.1">
      one place.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.413.1">
     Let’s move some routes to a static deep links container and update component routing to leverage these unified
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.414.1">
      deep links.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-328">
    <a id="_idTextAnchor328">
    </a>
    <span class="koboSpan" id="kobo.415.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.416.1">
     Before we encapsulate routes into a dedicated container, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.417.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.418.1">
      Create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.419.1">
       Chapter03
      </span>
     </strong>
     <span class="koboSpan" id="kobo.420.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.421.1">
       Recipe04
      </span>
     </strong>
     <span class="koboSpan" id="kobo.422.1">
      directory – this will be your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.423.1">
       working directory
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.424.1">
      Copy
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.425.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.426.1">
      from the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.427.1">
       Working with query parameters
      </span>
     </em>
     <span class="koboSpan" id="kobo.428.1">
      recipe or the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.429.1">
       Chapter09
      </span>
     </strong>
     <span class="koboSpan" id="kobo.430.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.431.1">
       Recipe03
      </span>
     </strong>
     <span class="koboSpan" id="kobo.432.1">
      directory in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.433.1">
       GitHub repository
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-329">
    <a id="_idTextAnchor329">
    </a>
    <span class="koboSpan" id="kobo.434.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.435.1">
     Follow these steps to introduce a container for routes in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.436.1">
      your application:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.437.1">
      This time, create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.438.1">
       DeepLinks
      </span>
     </strong>
     <span class="koboSpan" id="kobo.439.1">
      static class, not
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.440.1">
       a component:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.441.1">
public static class DeepLinks
{
    // you will define routes here
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.442.1">
      Inside the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.443.1">
       DeepLinks
      </span>
     </strong>
     <span class="koboSpan" id="kobo.444.1">
      class, define three
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.445.1">
       const
      </span>
     </strong>
     <span class="koboSpan" id="kobo.446.1">
      routes that match the ones you have
     </span>
     <a id="_idIndexMarker458">
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.447.1">
       in
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.448.1">
        ExternalEventManager
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.449.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.450.1">
public const string
    LandingPage = "/ch09r04",
    EventPage = "/ch09r04/{eventId:guid}",
    EventAtVenuePage =
        "/ch09r04/{eventId:guid}/venues/{venue?}";</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.451.1">
      Navigate to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.452.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.453.1">
      , and replace the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.454.1">
       @page
      </span>
     </strong>
     <span class="koboSpan" id="kobo.455.1">
      directives with the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.456.1">
       @attribute
      </span>
     </strong>
     <span class="koboSpan" id="kobo.457.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.458.1">
       [Route]
      </span>
     </strong>
     <span class="koboSpan" id="kobo.459.1">
      attributes.
     </span>
     <span class="koboSpan" id="kobo.459.2">
      Instead of providing the routes explicitly, leverage the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.460.1">
        DeepLinks
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.461.1">
       constants:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.462.1">
@attribute [Route(DeepLinks.LandingPage)]
@attribute [Route(DeepLinks.EventPage)]
@attribute [Route(DeepLinks.EventAtVenuePage)]</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-330">
    <a id="_idTextAnchor330">
    </a>
    <span class="koboSpan" id="kobo.463.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.464.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.465.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.466.1">
     , we create a new
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.467.1">
      DeepLinks
     </span>
    </strong>
    <span class="koboSpan" id="kobo.468.1">
     class.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.469.1">
      DeepLinks
     </span>
    </strong>
    <span class="koboSpan" id="kobo.470.1">
     is not a component but, rather, a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.471.1">
      static
     </span>
    </strong>
    <span class="koboSpan" id="kobo.472.1">
     class, as it represents a fixed library that should be easily accessible in the entire application and won’t change through the application’s lifetime.
    </span>
    <span class="koboSpan" id="kobo.472.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.473.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.474.1">
     , we declare three
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.475.1">
      const
     </span>
    </strong>
    <span class="koboSpan" id="kobo.476.1">
     routes for the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.477.1">
      LandingPage
     </span>
    </strong>
    <span class="koboSpan" id="kobo.478.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.479.1">
      EventPage
     </span>
    </strong>
    <span class="koboSpan" id="kobo.480.1">
     , and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.481.1">
      EventAtVenuePage
     </span>
    </strong>
    <span class="koboSpan" id="kobo.482.1">
     pages inside
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.483.1">
      DeepLinks
     </span>
    </strong>
    <span class="koboSpan" id="kobo.484.1">
     .
    </span>
    <span class="koboSpan" id="kobo.484.2">
     These routes match the ones we already have explicitly declared in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.485.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.486.1">
     , so we copy those
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.487.1">
      values here.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.488.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.489.1">
      step 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.490.1">
     , we navigate to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.491.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.492.1">
     and replace all
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.493.1">
      @page
     </span>
    </strong>
    <span class="koboSpan" id="kobo.494.1">
     directives with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.495.1">
      @attribute
     </span>
    </strong>
    <span class="koboSpan" id="kobo.496.1">
     .
    </span>
    <span class="koboSpan" id="kobo.496.2">
     With
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.497.1">
      @attribute
     </span>
    </strong>
    <span class="koboSpan" id="kobo.498.1">
     , we can leverage the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.499.1">
      [Route]
     </span>
    </strong>
    <span class="koboSpan" id="kobo.500.1">
     attribute, which accepts a route as a parameter.
    </span>
    <span class="koboSpan" id="kobo.500.2">
     We use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.501.1">
      DeepLinks
     </span>
    </strong>
    <span class="koboSpan" id="kobo.502.1">
     route repository to explicitly construct the same routing we had with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.503.1">
      @page
     </span>
    </strong>
    <span class="koboSpan" id="kobo.504.1">
     directives.
    </span>
    <span class="koboSpan" id="kobo.504.2">
     Even though we’ve encapsulated routes in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.505.1">
      string
     </span>
    </strong>
    <span class="koboSpan" id="kobo.506.1">
     variables, Blazor still respects the constraints and optionality of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.507.1">
      route parameters.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.508.1">
     You can leverage the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.509.1">
      DeepLinks
     </span>
    </strong>
    <span class="koboSpan" id="kobo.510.1">
     class to safely set up navigation links in the application menu or
    </span>
    <a id="_idIndexMarker459">
    </a>
    <span class="koboSpan" id="kobo.511.1">
     anywhere else.
    </span>
    <span class="koboSpan" id="kobo.511.2">
     By having routes as named objects, you avoid mistyping and reduce the risk of errors in your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.512.1">
      routing configuration.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-331">
    <a id="_idTextAnchor331">
    </a>
    <span class="koboSpan" id="kobo.513.1">
     There’s more…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.514.1">
     You can extend the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.515.1">
      DeepLinks
     </span>
    </strong>
    <span class="koboSpan" id="kobo.516.1">
     class with methods that allow you to generate stateful links and enable a more flexible and dynamic way to create URLs with route parameters.
    </span>
    <span class="koboSpan" id="kobo.516.2">
     For instance, you can implement a method that accepts
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.517.1">
      EventId
     </span>
    </strong>
    <span class="koboSpan" id="kobo.518.1">
     and places it correctly in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.519.1">
      EventPage
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.520.1">
      route template:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.521.1">
public const string
    EventPage = "/ch09r04/{eventId:guid}";
public static string GetPage(Guid eventId)
    =&gt; EventPage.Replace("{eventId:guid}", $"{eventId}");</span></pre>
   <p>
    <span class="koboSpan" id="kobo.522.1">
     When rendering a grid with events, you can leverage the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.523.1">
      GetPage()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.524.1">
     method and safely generate links to the event page with details.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.525.1">
      GetPage()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.526.1">
     accepts the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.527.1">
      eventId
     </span>
    </strong>
    <span class="koboSpan" id="kobo.528.1">
     parameter and uses the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.529.1">
      Replace()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.530.1">
     extension method to insert parameters into the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.531.1">
      EventPage
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.532.1">
      route template.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-332">
    <a id="_idTextAnchor332">
    </a>
    <span class="koboSpan" id="kobo.533.1">
     Handling incorrect navigation requests
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.534.1">
     Graceful handling of incorrect navigation requests is mandatory in modern web development to ensure a smooth and user-friendly experience.
    </span>
    <span class="koboSpan" id="kobo.534.2">
     By preventing users from encountering confusing error
    </span>
    <a id="_idIndexMarker460">
    </a>
    <span class="koboSpan" id="kobo.535.1">
     messages or broken links, you make your application feel professional and reliable.
    </span>
    <span class="koboSpan" id="kobo.535.2">
     While we have already covered unauthorized navigation in
    </span>
    <a href="B22020_08.xhtml#_idTextAnchor273">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.536.1">
        Chapter 8
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.537.1">
     , other error states might unexpectedly occur.
    </span>
    <span class="koboSpan" id="kobo.537.2">
     How you handle broken links or mistyped URLs defines the quality of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.538.1">
      user experience.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.539.1">
     Let’s implement a global, safe redirection to a friendly error page when users face unexpected
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.540.1">
      navigation exceptions.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-333">
    <a id="_idTextAnchor333">
    </a>
    <span class="koboSpan" id="kobo.541.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.542.1">
     Before implementing the safe redirection, you must have something to redirect to.
    </span>
    <span class="koboSpan" id="kobo.542.2">
     If you have been following along
    </span>
    <a id="_idIndexMarker461">
    </a>
    <span class="koboSpan" id="kobo.543.1">
     with the entire book or just scaffolded your project, you already have a routable
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.544.1">
      Error
     </span>
    </strong>
    <span class="koboSpan" id="kobo.545.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.545.2">
     Otherwise, you can get it from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.546.1">
      Modules
     </span>
    </strong>
    <span class="koboSpan" id="kobo.547.1">
     directory in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.548.1">
      GitHub repository.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-334">
    <a id="_idTextAnchor334">
    </a>
    <span class="koboSpan" id="kobo.549.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.550.1">
     Follow these steps to add a global safe redirection when user
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.551.1">
      navigation fails:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.552.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.553.1">
       Program
      </span>
     </strong>
     <span class="koboSpan" id="kobo.554.1">
      file of the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.555.1">
       server-side project.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.556.1">
      After all the existing middleware registrations, use the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.557.1">
       UseStatusCodePagesWithRedirects()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.558.1">
      extension method of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.559.1">
       WebApplication
      </span>
     </strong>
     <span class="koboSpan" id="kobo.560.1">
      to register an error redirection middleware and redirect users to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.561.1">
       /
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.562.1">
        error
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.563.1">
       route:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.564.1">
//...
</span><span class="koboSpan" id="kobo.564.2">//other middleware registrations
app.UseAntiforgery();
app.UseStatusCodePagesWithRedirects("/error");
//...</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-335">
    <a id="_idTextAnchor335">
    </a>
    <span class="koboSpan" id="kobo.565.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.566.1">
     In Blazor apps, before the introduction of Blazor web apps, you would use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.567.1">
      NotFound
     </span>
    </strong>
    <span class="koboSpan" id="kobo.568.1">
     parameter of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.569.1">
      Router
     </span>
    </strong>
    <span class="koboSpan" id="kobo.570.1">
     to handle users navigating to an unavailable route.
    </span>
    <span class="koboSpan" id="kobo.570.2">
     Blazor web apps still support the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.571.1">
      NotFound
     </span>
    </strong>
    <span class="koboSpan" id="kobo.572.1">
     parameter for backward compatibility, but leveraging the server-side middleware pipeline to resolve status codes provides much
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.573.1">
      more flexibility.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.574.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.575.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.576.1">
     , we navigate to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.577.1">
      Program
     </span>
    </strong>
    <span class="koboSpan" id="kobo.578.1">
     file of the server-side project, where we configure the server-side middleware pipeline.
    </span>
    <span class="koboSpan" id="kobo.578.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.579.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.580.1">
     , we locate where the existing middleware registrations end and use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.581.1">
      UseStatusCodePagesWithRedirects()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.582.1">
     method to extend the middleware pipeline.
    </span>
    <span class="koboSpan" id="kobo.582.2">
     With
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.583.1">
      UseStatusCodePagesWithRedirects()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.584.1">
     , we define that whenever a server request results in an unhandled error status code, users get redirected to an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.585.1">
      /error
     </span>
    </strong>
    <span class="koboSpan" id="kobo.586.1">
     page.
    </span>
    <span class="koboSpan" id="kobo.586.2">
     With the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.587.1">
      Error
     </span>
    </strong>
    <span class="koboSpan" id="kobo.588.1">
     component, we can customize the message, details, and next steps that our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.589.1">
      users see.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.590.1">
     The added benefit of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.591.1">
      UseStatusCodePagesWithRedirects()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.592.1">
     is that it covers all unsuccessful
    </span>
    <a id="_idIndexMarker462">
    </a>
    <span class="koboSpan" id="kobo.593.1">
     status codes, not just the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.594.1">
      route not
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.595.1">
       found
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.596.1">
      case.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-336">
    <a id="_idTextAnchor336">
    </a>
    <span class="koboSpan" id="kobo.597.1">
     See also
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.598.1">
     We’ve covered
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.599.1">
      UseStatusCodePagesWithRedirects()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.600.1">
     , as it’s the method most commonly used in UI-based applications.
    </span>
    <span class="koboSpan" id="kobo.600.2">
     However, it’s just one of the options from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.601.1">
      UseStatusCodePages()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.602.1">
     family of methods.
    </span>
    <span class="koboSpan" id="kobo.602.2">
     Handling ranges from simple text status representation to fully customized exception-handling logic
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.603.1">
      and retries.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.604.1">
     You can find all available options, with examples of when and how to use each, in the Microsoft
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.605.1">
      docs:
     </span>
    </span>
    <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/error-handling?view=aspnetcore-9.0#usestatuscodepages">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.606.1">
       https://learn.microsoft.com/en-us/aspnet/core/fundamentals/error-handling?view=aspnetcore-9.0#usestatuscodepages
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.607.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-337">
    <a id="_idTextAnchor337">
    </a>
    <span class="koboSpan" id="kobo.608.1">
     Executing an asynchronous operation with navigation
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.609.1">
     In modern web applications, executing common logic during navigation can be crucial for maintaining a seamless user
    </span>
    <a id="_idIndexMarker463">
    </a>
    <span class="koboSpan" id="kobo.610.1">
     experience and gathering valuable insights.
    </span>
    <span class="koboSpan" id="kobo.610.2">
     You can implement navigation event logging and achieve a better understanding of user behavior, identify the most
    </span>
    <a id="_idIndexMarker464">
    </a>
    <span class="koboSpan" id="kobo.611.1">
     frequently used features, and improve them accordingly.
    </span>
    <span class="koboSpan" id="kobo.611.2">
     You can also implement periodic security checks and refresh a user’s access
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.612.1">
      token seamlessly.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.613.1">
     Let’s log all navigation requests inside the application to understand better which features users use the most so that you can
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.614.1">
      prioritize them.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-338">
    <a id="_idTextAnchor338">
    </a>
    <span class="koboSpan" id="kobo.615.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.616.1">
     We will work inside the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.617.1">
      Routes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.618.1">
     component, which you must already have, as it’s an integral part of the Blazor application.
    </span>
    <span class="koboSpan" id="kobo.618.2">
     No preparation is required in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.619.1">
      this recipe.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-339">
    <a id="_idTextAnchor339">
    </a>
    <span class="koboSpan" id="kobo.620.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.621.1">
     Follow these instructions to trigger an operation on all navigation inside
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.622.1">
      the app:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.623.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.624.1">
       Routes
      </span>
     </strong>
     <span class="koboSpan" id="kobo.625.1">
      component
     </span>
     <a id="_idIndexMarker465">
     </a>
     <span class="koboSpan" id="kobo.626.1">
      and inject a
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.627.1">
        Logger
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.628.1">
       instance:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.629.1">
@inject ILogger&lt;Routes&gt; Logger</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.630.1">
      Initialize an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.631.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.632.1">
      block in the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.633.1">
       Routes
      </span>
     </strong>
     <span class="koboSpan" id="kobo.634.1">
      component, and implement a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.635.1">
       LogNavigation()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.636.1">
      method
     </span>
     <a id="_idIndexMarker466">
     </a>
     <span class="koboSpan" id="kobo.637.1">
      that accepts
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.638.1">
       NavigationContext
      </span>
     </strong>
     <span class="koboSpan" id="kobo.639.1">
      and logs the path that the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.640.1">
       user entered:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.641.1">
@code {
    private void LogNavigation(
        NavigationContext context)
        =&gt; Logger.LogInformation(
            "User entered: {Path}",
            context.Path);
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.642.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.643.1">
       Routes
      </span>
     </strong>
     <span class="koboSpan" id="kobo.644.1">
      markup, locate
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.645.1">
       Router
      </span>
     </strong>
     <span class="koboSpan" id="kobo.646.1">
      and attach the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.647.1">
       LogNavigation()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.648.1">
      method to its
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.649.1">
        OnNavigateAsync
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.650.1">
       callback:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.651.1">
&lt;Router AppAssembly="@typeof(Program).Assembly"
        AdditionalAssemblies="new[]
        {
            typeof(Client._Imports).Assembly,
            typeof(ExternalEventManager).Assembly
        }"
        OnNavigateAsync="@LogNavigation"&gt;
    @* here's further router configuration *@
&lt;/Router&gt;</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-340">
    <a id="_idTextAnchor340">
    </a>
    <span class="koboSpan" id="kobo.652.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.653.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.654.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.655.1">
     , we navigate to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.656.1">
      Routes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.657.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.657.2">
     You learned about
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.658.1">
      Routes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.659.1">
     in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.660.1">
      Enabling routes from multiple assemblies
     </span>
    </em>
    <span class="koboSpan" id="kobo.661.1">
     recipe.
    </span>
    <span class="koboSpan" id="kobo.661.2">
     First, we inject an instance of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.662.1">
      ILogger
     </span>
    </strong>
    <span class="koboSpan" id="kobo.663.1">
     .
    </span>
    <span class="koboSpan" id="kobo.663.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.664.1">
      ILogger
     </span>
    </strong>
    <span class="koboSpan" id="kobo.665.1">
     interface simplifies logging information in applications and allows you to log messages with
    </span>
    <a id="_idIndexMarker467">
    </a>
    <span class="koboSpan" id="kobo.666.1">
     different severity levels (such as information, warning, or error) without depending on a
    </span>
    <a id="_idIndexMarker468">
    </a>
    <span class="koboSpan" id="kobo.667.1">
     specific logging implementation.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.668.1">
      ILogger
     </span>
    </strong>
    <span class="koboSpan" id="kobo.669.1">
     allows you to provide a logger category, which is then reflected in logs, implying the log source.
    </span>
    <span class="koboSpan" id="kobo.669.2">
     In our case, we declare the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.670.1">
      Routes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.671.1">
     as the logger category.
    </span>
    <span class="koboSpan" id="kobo.671.2">
     You can find more logging resources in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.672.1">
      See also
     </span>
    </em>
    <span class="koboSpan" id="kobo.673.1">
     section at the end of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.674.1">
      the recipe.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.675.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.676.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.677.1">
     , we initialize an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.678.1">
      @code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.679.1">
     block and implement a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.680.1">
      LogNavigation()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.681.1">
     method.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.682.1">
      LogNavigation()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.683.1">
     accepts
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.684.1">
      NavigationContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.685.1">
     , which provides information about the navigation event.
    </span>
    <span class="koboSpan" id="kobo.685.2">
     By accessing the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.686.1">
      Path
     </span>
    </strong>
    <span class="koboSpan" id="kobo.687.1">
     property of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.688.1">
      NavigationContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.689.1">
     , we can pass the navigation destination path to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.690.1">
      Logger
     </span>
    </strong>
    <span class="koboSpan" id="kobo.691.1">
     and log the path the user
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.692.1">
      navigated to.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.693.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.694.1">
      step 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.695.1">
     , we move to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.696.1">
      Routes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.697.1">
     markup.
    </span>
    <span class="koboSpan" id="kobo.697.2">
     Here, we find the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.698.1">
      Router
     </span>
    </strong>
    <span class="koboSpan" id="kobo.699.1">
     construction.
    </span>
    <span class="koboSpan" id="kobo.699.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.700.1">
      Router
     </span>
    </strong>
    <span class="koboSpan" id="kobo.701.1">
     component exposes an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.702.1">
      OnNavigateAsync
     </span>
    </strong>
    <span class="koboSpan" id="kobo.703.1">
     callback, so we attach the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.704.1">
      LogNavigation()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.705.1">
     method there.
    </span>
    <span class="koboSpan" id="kobo.705.2">
     Now, with each navigation request,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.706.1">
      Router
     </span>
    </strong>
    <span class="koboSpan" id="kobo.707.1">
     will invoke the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.708.1">
      OnNavigateAsync
     </span>
    </strong>
    <span class="koboSpan" id="kobo.709.1">
     callback and trigger the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.710.1">
      LogNavigation()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.711.1">
     method, effectively logging every path our users enter inside
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.712.1">
      the application.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.713.1">
     By default, you will have a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.714.1">
      Console
     </span>
    </strong>
    <span class="koboSpan" id="kobo.715.1">
     logger registered, but you can freely extend the logging behavior to cover your business use case.
    </span>
    <span class="koboSpan" id="kobo.715.2">
     You can either implement your own logger or find multiple NuGet packages that support logging from different
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.716.1">
      hosting models.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-341">
    <a id="_idTextAnchor341">
    </a>
    <span class="koboSpan" id="kobo.717.1">
     See also
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.718.1">
     You can learn more about logging by checking out the Microsoft learning
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.719.1">
      resources:
     </span>
    </span>
    <a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/logging">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.720.1">
       https://learn.microsoft.com/en-us/dotnet/core/extensions/logging
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.721.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-342">
    <a id="_idTextAnchor342">
    </a>
    <span class="koboSpan" id="kobo.722.1">
     Canceling a long-running task when users navigate away
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.723.1">
     Depending on the traffic in your
    </span>
    <a id="_idIndexMarker469">
    </a>
    <span class="koboSpan" id="kobo.724.1">
     application, long-running tasks can negatively impact performance and user experience if you don’t properly manage them.
    </span>
    <span class="koboSpan" id="kobo.724.2">
     With components rendered in SSR mode, the server handles cancellations for you, similar to what happens in web API projects.
    </span>
    <span class="koboSpan" id="kobo.724.3">
     But in interactive modes, when state is persisted either on the server or the client side when users navigate away from a page where a long-running task is in progress, it’s essential that you gracefully cancel the task to free up resources and prevent
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.725.1">
      unnecessary processing.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.726.1">
     Let’s implement a graceful cancellation of long-running tasks with the help of Blazor’s
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.727.1">
      NavigationManager
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.728.1">
      and
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.729.1">
       CancellationToken
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.730.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-343">
    <a id="_idTextAnchor343">
    </a>
    <span class="koboSpan" id="kobo.731.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.732.1">
     Before we explore graceful cancellation of a long-running task when a user navigates away, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.733.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.734.1">
      Create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.735.1">
       Chapter09
      </span>
     </strong>
     <span class="koboSpan" id="kobo.736.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.737.1">
       Recipe07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.738.1">
      directory – this will be your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.739.1">
       working directory
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.740.1">
      Copy the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.741.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.742.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.743.1">
       DeepLinks
      </span>
     </strong>
     <span class="koboSpan" id="kobo.744.1">
      files from the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.745.1">
       Implementing unified deep linking
      </span>
     </em>
     <span class="koboSpan" id="kobo.746.1">
      recipe or the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.747.1">
       Chapter09
      </span>
     </strong>
     <span class="koboSpan" id="kobo.748.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.749.1">
       Recipe04
      </span>
     </strong>
     <span class="koboSpan" id="kobo.750.1">
      directory in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.751.1">
       GitHub repository
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.752.1">
      As
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.753.1">
       DeepLinks
      </span>
     </strong>
     <span class="koboSpan" id="kobo.754.1">
      contains recipe-specific routes and routes in the application must be unique, update the paths with
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.755.1">
       ch09r07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.756.1">
      to reflect the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.757.1">
       current recipe
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.758.1">
      Copy the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.759.1">
       Source
      </span>
     </strong>
     <span class="koboSpan" id="kobo.760.1">
      file from the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.761.1">
       Chapter09
      </span>
     </strong>
     <span class="koboSpan" id="kobo.762.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.763.1">
       Data
      </span>
     </strong>
     <span class="koboSpan" id="kobo.764.1">
      directory in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.765.1">
       GitHub repository
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-344">
    <a id="_idTextAnchor344">
    </a>
    <span class="koboSpan" id="kobo.766.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.767.1">
     Follow these steps to trigger graceful cancellation when a user
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.768.1">
      navigates away:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.769.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.770.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.771.1">
      component, and then enhance it to render it in
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.772.1">
       InteractiveWebAssembly
      </span>
     </strong>
     <span class="koboSpan" id="kobo.773.1">
      mode and implement
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.774.1">
       IDisposable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.775.1">
      .
     </span>
     <span class="koboSpan" id="kobo.775.2">
      We will
     </span>
     <a id="_idIndexMarker470">
     </a>
     <span class="koboSpan" id="kobo.776.1">
      address the resulting compilation
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.777.1">
       error shortly:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.778.1">
@rendermode InteractiveWebAssembly
@implements IDisposable</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.779.1">
      At the top of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.780.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.781.1">
      block of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.782.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.783.1">
      ,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.784.1">
       inject
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.785.1">
        NavigationManager
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.786.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.787.1">
[Inject] private NavigationManager Nav { get; init; }</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.788.1">
      Below the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.789.1">
       Nav
      </span>
     </strong>
     <span class="koboSpan" id="kobo.790.1">
      injection, declare a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.791.1">
       _cts
      </span>
     </strong>
     <span class="koboSpan" id="kobo.792.1">
      variable of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.793.1">
       type
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.794.1">
        CancellationTokenSource
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.795.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.796.1">
private CancellationTokenSource _cts;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.797.1">
      At the end of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.798.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.799.1">
      block of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.800.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.801.1">
      , implement a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.802.1">
       CancelTask()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.803.1">
      method, matching the signature for an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.804.1">
       EventHandler
      </span>
     </strong>
     <span class="koboSpan" id="kobo.805.1">
      object returning
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.806.1">
       LocationChangedEventArgs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.807.1">
      , which acts as a proxy to call the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.808.1">
       Cancel()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.809.1">
      method of the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.810.1">
        _cts
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.811.1">
       object:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.812.1">
private void CancelTask(object sender,
    LocationChangedEventArgs args) =&gt; _cts?.Cancel();</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.813.1">
      Below the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.814.1">
       CancelTask()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.815.1">
      method, override the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.816.1">
       OnInitialized()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.817.1">
      life cycle method and subscribe the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.818.1">
       CancelTask()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.819.1">
      method to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.820.1">
       LocationChanged
      </span>
     </strong>
     <span class="koboSpan" id="kobo.821.1">
      event exposed by the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.822.1">
       injected
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.823.1">
        Nav
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.824.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.825.1">
protected override void OnInitialized()
    =&gt; Nav.LocationChanged += CancelTask;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.826.1">
      Next to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.827.1">
       OnInitialized()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.828.1">
      , implement a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.829.1">
       Dispose()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.830.1">
      method required by the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.831.1">
       IDisposable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.832.1">
      interface, where
     </span>
     <a id="_idIndexMarker471">
     </a>
     <span class="koboSpan" id="kobo.833.1">
      you safely unsubscribe from the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.834.1">
       LocationChanged
      </span>
     </strong>
     <span class="koboSpan" id="kobo.835.1">
      event and gracefully dispose of the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.836.1">
        _cts
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.837.1">
       instance:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.838.1">
public void Dispose()
{
    Nav.LocationChanged -= CancelTask;
    _cts?.Dispose();
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.839.1">
      To complete the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.840.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.841.1">
      block, implement a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.842.1">
       GetAsync()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.843.1">
      method, where you get
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.844.1">
       eventId
      </span>
     </strong>
     <span class="koboSpan" id="kobo.845.1">
      from
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.846.1">
       Source
      </span>
     </strong>
     <span class="koboSpan" id="kobo.847.1">
      , and redirect the user to the event
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.848.1">
       details page:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.849.1">
private async Task GetAsync()
{
    _cts = new();
    var eventId = await Source.LoadAsync(_cts.Token);
    if (_cts.IsCancellationRequested) return;
    Nav.NavigateTo($"/ch09r07/{eventId}");
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.850.1">
      Move to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.851.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.852.1">
      markup area, and below the header, replace the fast-return clause when
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.853.1">
       EventId
      </span>
     </strong>
     <span class="koboSpan" id="kobo.854.1">
      is not set with a rendering of a button, allowing users to load an event if it has not
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.855.1">
       yet loaded:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.856.1">
@if (EventId == default)
{
    &lt;button class="btn btn-primary"
            @onclick="@GetAsync"&gt;
        Get event
    &lt;/button&gt;
    return;
}</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-345">
    <a id="_idTextAnchor345">
    </a>
    <span class="koboSpan" id="kobo.857.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.858.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.859.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.860.1">
     , we navigate to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.861.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.862.1">
     component and declare it to render in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.863.1">
      InteractiveWebAssembly
     </span>
    </strong>
    <span class="koboSpan" id="kobo.864.1">
     mode, as we want to monitor the execution of a long-running task to cancel it if needed.
    </span>
    <span class="koboSpan" id="kobo.864.2">
     We also need
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.865.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.866.1">
     to implement
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.867.1">
      IDisposable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.868.1">
     .
    </span>
    <span class="koboSpan" id="kobo.868.2">
     Declaring the component as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.869.1">
      IDisposable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.870.1">
     results in a compilation error, but we will resolve it
    </span>
    <a id="_idIndexMarker472">
    </a>
    <span class="koboSpan" id="kobo.871.1">
     before the end of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.872.1">
      the recipe.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.873.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.874.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.875.1">
     , we inject a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.876.1">
      NavigationManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.877.1">
     instance at the top of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.878.1">
      @code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.879.1">
     block of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.880.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.881.1">
     .
    </span>
    <span class="koboSpan" id="kobo.881.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.882.1">
      NavigationManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.883.1">
     instance allows us to react to navigation and location changes.
    </span>
    <span class="koboSpan" id="kobo.883.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.884.1">
      step 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.885.1">
     , we set up the backbone of graceful task cancellation by declaring a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.886.1">
      CancellationTokenSource
     </span>
    </strong>
    <span class="koboSpan" id="kobo.887.1">
     variable.
    </span>
    <span class="koboSpan" id="kobo.887.2">
     With
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.888.1">
      CancellationTokenSource
     </span>
    </strong>
    <span class="koboSpan" id="kobo.889.1">
     , we can signal and manage cancellation requests for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.890.1">
      asynchronous operations.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.891.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.892.1">
      step 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.893.1">
     , we implement a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.894.1">
      CancelTask()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.895.1">
     method with a signature matching an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.896.1">
      EventHandler
     </span>
    </strong>
    <span class="koboSpan" id="kobo.897.1">
     object returning
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.898.1">
      LocationChangedEventArgs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.899.1">
     .
    </span>
    <span class="koboSpan" id="kobo.899.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.900.1">
      CancelTask()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.901.1">
     method’s responsibility is to invoke
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.902.1">
      Cancel()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.903.1">
     of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.904.1">
      _cts
     </span>
    </strong>
    <span class="koboSpan" id="kobo.905.1">
     instance and cancel all running operations, depending on that instance.
    </span>
    <span class="koboSpan" id="kobo.905.2">
     We leverage the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.906.1">
      ?
     </span>
    </strong>
    <span class="koboSpan" id="kobo.907.1">
     operator, called a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.908.1">
      null-conditional operator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.909.1">
     , as it
    </span>
    <a id="_idIndexMarker473">
    </a>
    <span class="koboSpan" id="kobo.910.1">
     allows us to invoke a method or access to a member only if the preceding object (
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.911.1">
      _cts
     </span>
    </strong>
    <span class="koboSpan" id="kobo.912.1">
     in this case) is not
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.913.1">
      null
     </span>
    </strong>
    <span class="koboSpan" id="kobo.914.1">
     .
    </span>
    <span class="koboSpan" id="kobo.914.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.915.1">
      step 5
     </span>
    </em>
    <span class="koboSpan" id="kobo.916.1">
     , we override the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.917.1">
      OnInitialized()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.918.1">
     life cycle method of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.919.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.920.1">
     and subscribe
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.921.1">
      CancelTask()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.922.1">
     to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.923.1">
      LocationChanged
     </span>
    </strong>
    <span class="koboSpan" id="kobo.924.1">
     event exposed by
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.925.1">
      Nav
     </span>
    </strong>
    <span class="koboSpan" id="kobo.926.1">
     .
    </span>
    <span class="koboSpan" id="kobo.926.2">
     Blazor triggers the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.927.1">
      LocationChanged
     </span>
    </strong>
    <span class="koboSpan" id="kobo.928.1">
     event whenever a user navigates to a new location within the application.
    </span>
    <span class="koboSpan" id="kobo.928.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.929.1">
      step 6
     </span>
    </em>
    <span class="koboSpan" id="kobo.930.1">
     , we complete the implementation of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.931.1">
      IDisposable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.932.1">
     by constructing a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.933.1">
      Dispose()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.934.1">
     method.
    </span>
    <span class="koboSpan" id="kobo.934.2">
     In the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.935.1">
      Dispose()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.936.1">
     method, we safely unsubscribe from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.937.1">
      LocationChanged
     </span>
    </strong>
    <span class="koboSpan" id="kobo.938.1">
     event to prevent memory leaks.
    </span>
    <span class="koboSpan" id="kobo.938.2">
     We also dispose of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.939.1">
      _cts
     </span>
    </strong>
    <span class="koboSpan" id="kobo.940.1">
     instance using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.941.1">
      Dispose()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.942.1">
     method it exposes.
    </span>
    <span class="koboSpan" id="kobo.942.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.943.1">
      step 7
     </span>
    </em>
    <span class="koboSpan" id="kobo.944.1">
     , we complete the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.945.1">
      @code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.946.1">
     block by implementing a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.947.1">
      GetAsync()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.948.1">
     method to test the graceful cancellation of a long-running task.
    </span>
    <span class="koboSpan" id="kobo.948.2">
     As part of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.949.1">
      GetAsync()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.950.1">
     , we initialize a new
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.951.1">
      _cts
     </span>
    </strong>
    <span class="koboSpan" id="kobo.952.1">
     instance and call the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.953.1">
      LoadAsync()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.954.1">
     method of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.955.1">
      Source
     </span>
    </strong>
    <span class="koboSpan" id="kobo.956.1">
     class, passing in a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.957.1">
      CancellationToken
     </span>
    </strong>
    <span class="koboSpan" id="kobo.958.1">
     sourced from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.959.1">
      _cts
     </span>
    </strong>
    <span class="koboSpan" id="kobo.960.1">
     instance.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.961.1">
      CancellationToken
     </span>
    </strong>
    <span class="koboSpan" id="kobo.962.1">
     allows
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.963.1">
      LoadAsync()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.964.1">
     to be aware of any cancellation requests as it executes.
    </span>
    <span class="koboSpan" id="kobo.964.2">
     As we expect loading cancellations, we add a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.965.1">
      _cts
     </span>
    </strong>
    <span class="koboSpan" id="kobo.966.1">
     state-check.
    </span>
    <span class="koboSpan" id="kobo.966.2">
     With the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.967.1">
      IsCancellationRequested
     </span>
    </strong>
    <span class="koboSpan" id="kobo.968.1">
     property, we can verify whether cancellation was requested and short-circuit the code execution.
    </span>
    <span class="koboSpan" id="kobo.968.2">
     Lastly, if
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.969.1">
      LoadAsync()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.970.1">
     completes, we redirect the user to the appropriate event
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.971.1">
      details page.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.972.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.973.1">
      step 8
     </span>
    </em>
    <span class="koboSpan" id="kobo.974.1">
     , we move to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.975.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.976.1">
     markup and add a simple button, allowing users to trigger
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.977.1">
      GetAsync()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.978.1">
     and put the implementation to the test.
    </span>
    <span class="koboSpan" id="kobo.978.2">
     You can run the application and click the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.979.1">
      Get event
     </span>
    </strong>
    <span class="koboSpan" id="kobo.980.1">
     button.
    </span>
    <span class="koboSpan" id="kobo.980.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.981.1">
      LoadAsync()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.982.1">
     method from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.983.1">
      Source
     </span>
    </strong>
    <span class="koboSpan" id="kobo.984.1">
     has a hardcoded delay of five seconds and logs status messages to your browser console.
    </span>
    <span class="koboSpan" id="kobo.984.2">
     If you
    </span>
    <a id="_idIndexMarker474">
    </a>
    <span class="koboSpan" id="kobo.985.1">
     navigate away from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.986.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.987.1">
     page before the timer elapses, you will see that the saving request you’ve queued was
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.988.1">
      gracefully canceled.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer046">
     <span class="koboSpan" id="kobo.989.1">
      <img alt="Figure 9.1: Messages in the browser console, indicating graceful task cancellation" src="image/Figure_9.1_B22020.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.990.1">
     Figure 9.1: Messages in the browser console, indicating graceful task cancellation
    </span>
   </p>
   <h1 id="_idParaDest-346">
    <a id="_idTextAnchor346">
    </a>
    <span class="koboSpan" id="kobo.991.1">
     Controlling navigation history
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.992.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.993.1">
      NavigationManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.994.1">
     in Blazor uses
    </span>
    <a id="_idIndexMarker475">
    </a>
    <span class="koboSpan" id="kobo.995.1">
     the browser’s
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.996.1">
      History API
     </span>
    </strong>
    <span class="koboSpan" id="kobo.997.1">
     to maintain navigation history.
    </span>
    <span class="koboSpan" id="kobo.997.2">
     Manipulating navigation history is particularly useful when authenticating users with
    </span>
    <a id="_idIndexMarker476">
    </a>
    <span class="koboSpan" id="kobo.998.1">
     external identity providers, where users are redirected back to an application after authentication.
    </span>
    <span class="koboSpan" id="kobo.998.2">
     It’s also beneficial when displaying intermediate pages that allow users to configure their application, but you want to restrict them from going backward in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.999.1">
      that process.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1000.1">
     Let’s simulate intermediate page removal from the browser history and force users to navigate to the last stable page when they try to return to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1001.1">
      intermediate stage.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-347">
    <a id="_idTextAnchor347">
    </a>
    <span class="koboSpan" id="kobo.1002.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1003.1">
     Before we explore browser navigation history manipulations, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1004.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1005.1">
      Create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1006.1">
       Chapter09
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1007.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1008.1">
       Recipe08
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1009.1">
      directory – this will be your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1010.1">
       working directory
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1011.1">
      Copy the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1012.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1013.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1014.1">
       DeepLinks
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1015.1">
      files from the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1016.1">
       Canceling a long running task when users navigate away
      </span>
     </em>
     <span class="koboSpan" id="kobo.1017.1">
      recipe or the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1018.1">
       Chapter09
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1019.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1020.1">
       Recipe07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1021.1">
      directory in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1022.1">
       GitHub repository
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1023.1">
      As
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1024.1">
       DeepLinks
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1025.1">
      contains recipe-specific routes and routes in the application must be unique, update the paths with
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1026.1">
       ch09r08
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1027.1">
      to reflect the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1028.1">
       current recipe
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1029.1">
      Copy the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1030.1">
       Source
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1031.1">
      file
     </span>
     <a id="_idIndexMarker477">
     </a>
     <span class="koboSpan" id="kobo.1032.1">
      from the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1033.1">
       Chapter09
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1034.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1035.1">
       Data
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1036.1">
      directory in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1037.1">
       GitHub repository
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-348">
    <a id="_idTextAnchor348">
    </a>
    <span class="koboSpan" id="kobo.1038.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1039.1">
     Follow these steps to replace an entry in the browser’s
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1040.1">
      navigation history:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1041.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1042.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1043.1">
      block of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1044.1">
       ExternalEventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1045.1">
      and find the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1046.1">
        GetAsync()
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1047.1">
       method.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1048.1">
      Inside
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1049.1">
       GetAsync()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1050.1">
      , when invoking the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1051.1">
       NavigateTo()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1052.1">
      method of the injected
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1053.1">
       NavigationManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1054.1">
      , explicitly set the additional
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1055.1">
       replace
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1056.1">
      parameter
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1057.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1058.1">
        true
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1059.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1060.1">
private async Task GetAsync()
{
    //... </span><span class="koboSpan" id="kobo.1060.2">event getting logic
    Nav.NavigateTo($"/ch09r08/{eventId}",
        replace: true);
}</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-349">
    <a id="_idTextAnchor349">
    </a>
    <span class="koboSpan" id="kobo.1061.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1062.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1063.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.1064.1">
     , we navigate to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1065.1">
      ExternalEventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1066.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1066.2">
     Here, in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1067.1">
      @code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1068.1">
     block, we have a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1069.1">
      GetAsync()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1070.1">
     method that users trigger when retrieving event details from an external source.
    </span>
    <span class="koboSpan" id="kobo.1070.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1071.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.1072.1">
     , we extend the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1073.1">
      GetAsync()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1074.1">
     navigation logic by passing
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1075.1">
      true
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1076.1">
     as the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1077.1">
      replace
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1078.1">
     argument.
    </span>
    <span class="koboSpan" id="kobo.1078.2">
     With the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1079.1">
      replace
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1080.1">
     argument in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1081.1">
      NavigationManager.NavigateTo()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1082.1">
     , we ensure that the current entry in the browser’s history is replaced with the new URL rather than adding a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1083.1">
      new entry.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1084.1">
     If a user hasn’t loaded any event yet, we will display a page with a button allowing them to load an event.
    </span>
    <span class="koboSpan" id="kobo.1084.2">
     After
    </span>
    <a id="_idIndexMarker478">
    </a>
    <span class="koboSpan" id="kobo.1085.1">
     clicking the button, they get redirected to the event details page automatically.
    </span>
    <span class="koboSpan" id="kobo.1085.2">
     From there, when users try to navigate back, they will land on whatever page they were on before getting the event.
    </span>
    <span class="koboSpan" id="kobo.1085.3">
     The browser will not be aware of the intermediate step of loading the event in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1086.1">
      first place.
     </span>
    </span>
   </p>
  </div>
 </body></html>