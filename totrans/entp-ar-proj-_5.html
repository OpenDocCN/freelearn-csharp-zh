<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">AR for Marketing with EasyAR</h1>
                </header>
            
            <article>
                
<p>This chapter will introduce you to EasyAR, an easy and intuitive AR SDK with multiple functionalities <span class="mceItemHidden">that<span> </span><span class="hiddenGrammarError">can be</span><span> </span>used alone or, like in this chapter, integrated into<span> </span><span class="hiddenSpellError">Unity 3D</span>. You will learn what image-based AR is and how it works with<span> </span><span class="hiddenSpellError">EasyAR</span><span> </span>by using your own images as markers. You will also learn how to import a custom 3D model into Unity to display it using AR over an image marker. Finally, you will create an augmented catalog where your furniture will come to life.</span></p>
<p><span class="mceItemHidden">This chapter has two main goals: to learn<span> </span><span class="hiddenSpellError">EasyAR</span><span> </span>and its features and to understand the possibilities of AR as a marketing tool.<span> Nowadays, </span><span class="hiddenSpellError">EasyAR</span><span> </span>is, along with<span> </span><span class="hiddenSpellError">Vuforia</span>, one of the most versatile AR SDKs that<span> </span><span class="hiddenGrammarError">can be</span><span> </span>used for many purposes. By the end of this chapter, you will have the basic skills to continue improving the current project or create new and improved ones by exploring the rest of the functionalities<span> </span><span class="hiddenSpellError">EasyAR</span><span> </span>has to offer. As you will see, AR is a very powerful marketing tool for different purposes, such as impacting the user, presenting the product in a more visual and appealing way, and offering discounts and prizes that are integrated into the AR experience. The idea of this chapter is that, by the end of it, you<span> </span></span>will understand the basic use of AR in this field so that you can explore its possibilities afterward.</p>
<div class="packt_infobox"><span class="mceItemHidden">Important! In this chapter, we will be using<span> </span><span class="hiddenSpellError">Unity 3D, so</span> if you haven't done it already, we recommend that you read <a href="54a1260e-a741-4eb5-9c98-01350fcba94b.xhtml">Chapter 2</a>, <em>Introduction to Unity for AR Development</em>, first to familiarize yourself with its layout, nomenclature, and features.</span></div>
<p>In this chapter, we will be covering the following topics:</p>
<ul>
<li>Using AR for marketing</li>
<li>Understanding EasyAR</li>
<li>Building image-based AR</li>
<li>Working with custom 3D models</li>
<li>Creating an AR catalog</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p>The technical requirements for this chapter are as follows:</p>
<ul>
<li>A Unity 3D-supporting computer (see the latest requirements here: <a href="https://unity3d.com/es/unity/system-requirements">https://unity3d.com/es/unity/system-requirements</a>).<span> </span>This chapter's example project has been developed on a Windows 10 x 64 computer.</li>
<li>Unity 3D (2019.1.2f1 in this book).</li>
<li>Microsoft Visual Studio Community 2017 (included in the Unity installation).</li>
<li>EasyAR SDK (3.0.1 in this book).</li>
<li>A mobile device with Android 4.2 and above, or iOS 8.0 and above <span>(EasyAR requirements: <a href="https://www.easyar.com/doc/EasyAR%20SDK/Getting%20Started/3.0/Platform-Requirements.html">https://www.easyar.com/doc/EasyAR%20SDK/Getting%20Started/3.0/Platform-Requirements.html</a></span><span>)</span>. The project has been tested on a Samsung Galaxy A5 (2017) and a Pocophone F1.</li>
</ul>
<p>The resources and code files for this chapter can be found here: <a href="https://github.com/PacktPublishing/Enterprise-Augmented-Reality-Projects/tree/master/Chapter05">https://github.com/PacktPublishing/Enterprise-Augmented-Reality-Projects/tree/master/Chapter05</a>.</p>
<div class="packt_infobox">The project in this chapter has been tested using a Windows 10 PC, and a Samsung Galaxy A5 (2017) and Pocophone F1 Android devices. For iOS development, you will also need to develop using an Apple computer because Unity will build an Xcode project.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using AR for marketing</h1>
                </header>
            
            <article>
                
<p>Marketing is one of the first fields where AR landed when it first began. The visual impact of this technology makes it very attractive to potential customers, and it can be used from generating a <em>wow effect</em> to explaining the qualities of the products.</p>
<p><span>When it began, AR was mainly used to impact users. A new technology, close to the concept of </span><span class="hiddenSpellError">holography</span><span>, that let us see ourselves and others surrounded by virtual elements and characters, was a good enticement. Big brands started using it in commercial centers where people could see themselves on a big screen next to virtual animals, dinosaurs, or famous characters. With mobile devices being widespread,</span> <span>AR marketing techniques have changed: the user is now in charge of the experience and can interact with it. Brands could now go beyond the <em>wow</em> effect and create functional experiences to promote and sell their products. Examples of this include augmented catalogs that show the products in 3D over their flat images, virtual mirrors where you can </span><span>buy</span><span> the glasses that you are trying on in AR, packages that come to life to explain the elements inside the fabrication process, and so on.</span></p>
<p><span>The main idea behind AR's marketing success is that it has </span><span class="hiddenGrammarError">to be</span><span> meaningful and engaging to </span><span>make sure</span><span> that users will want to download the app and use it and, after the experience, they will </span><span>remember</span><span> your brand, will return to you, or will have purchased from you.</span></p>
<p>In this chapter, we are going to use AR to create a furniture catalog where chairs will come to life from its pages. We will also give users the possibility to change these chairs' colors.</p>
<p>When focusing on using mobile devices to view the catalog's pages, we want our potential customers to see the product from all its angles so that they can get a better idea of what they are buying and feel more attached to the product. The possibility of customizing certain aspects of the product, such as its color, in real-time can help spark an interest in it.</p>
<p>For our project, we will be using the real catalog pages and 3D models from the company Euro Seating (<a href="https://www.euroseating.com/en/">https://www.euroseating.com/en/</a>), a seating manufacturer that's present in more than 100 countries all over the world. Using their high-quality 3D models and real catalog will help us visualize this project as a real-life AR application that can be used in any other marketing context.</p>
<p>The models and images that will be used in this chapter have been released by the company for their use in the context of this book.</p>
<p>Before we start working on this project, let's have a quick look at what EasyAR is and how to integrate it into Unity.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Understanding EasyAR</h1>
                </header>
            
            <article>
                
<p>EasyAR is a multiplatform augmented reality SDK for Android, iOS, UWP, Windows, Mac, and Unity editor. An AR engine <span>allows us to create AR solutions in an easy way and</span> offers multiple AR features, including the following:</p>
<ul>
<li><strong>Planar image tracking</strong>: A technology that recognizes and tracks the position, rotation, and scale of a previously selected image in the real world, such as a book cover, photograph, or a business card.</li>
<li><strong>Surface tracking (SLAM)</strong>: A technology to detect surfaces and keep track of the objects within it.</li>
<li><strong>3D object tracking</strong>: A technology to localize and track the position and orientation of real 3D objects instead of flat images.</li>
<li><strong>Screen recording</strong>: A feature that allows us to take videos of the AR scene while we are playing it.</li>
</ul>
<p>Some of the main features of EasyAR are as follows:</p>
<ul>
<li>It has an intuitive target management interface so that targets can be generated at runtime without us having to upload or download anything from their website, such as other tools.</li>
<li>It supports both local and cloud recognition.</li>
<li>It supports multitracking (simultaneous multiple target tracking) of different targets and the same targets.</li>
<li>It supports 3D tracking to detect and track 3D objects with rich textures <span>in real environments.</span></li>
</ul>
<p>EasyAR has a web-based platform through which users can register their projects and obtain the licenses that they need in order to test and release their applications. EasyAR SDK is available in two different kinds of editions:</p>
<ul>
<li>EasyAR SDK Basic is free for commercial use without any kind of limitations or watermarks. It offers AR capacities based on image targets, it can load and recognize up to 1,000 offline targets, and it supports multi-target tracking, surface recognition, transparent and streaming video playback, and QR recognition. We need to make it known that the app has been developed with EasyAR.</li>
<li>EasyAR SDK Pro includes all the features of the Basic edition, plus 3D object tracking, multi-type target detection, and screen recording. The Pro edition costs $499.00 per license key, but offers a free trial version with limited uses (up to 100 per day). A feature comparison, pricing, and payment details are listed on the EasyAR SDK product page <a href="https://www.easyar.com/view/sdk.html">https://www.easyar.com/view/sdk.html</a>.</li>
</ul>
<p>For our project, the functionalities from the basic license will be enough. Let's get started with EasyAR.</p>
<div class="packt_infobox"><span>Before we start using EasyAR SDK, we need to integrate it into Unity (take a look at <a href="54a1260e-a741-4eb5-9c98-01350fcba94b.xhtml">Chapter 2</a>, <em>Introduction to Unity for AR Development</em>, <em>Preparing your system for Unity</em> section to learn how to install and use Unity for the first time).</span></div>
<p>In order to download and import EasyAR SDK into Unity, follow these steps:</p>
<ol>
<li>Create an account by navigating to EasyAR's web page at <a href="https://www.easyar.com/view/signUp.html">https://www.easyar.com/view/signUp.html</a>. You will need to accept the developer agreement to create one. </li>
<li><span>After creating your account, you will receive a confirmation email so that you can activate it and log in.</span></li>
<li>Once you're logged in, go to the EasyAR download page (<a href="https://www.easyar.com/view/download.html">https://www.easyar.com/view/download.html</a>) and, in the right-hand column, in the Unity Packages section, select <span class="packt_screen">EasyARSense_3.0.1-final_Basic_Unity.zip</span> to download it. This package contains the engine and the basic examples for the different uses of the tool. Unzip it to obtain the <kbd>.unitypackage</kbd> file.</li>
<li>Now, we can create the Unity project. Open the Unity Hub and, from the top bar, click on <span class="packt_screen">NEW</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1803 image-border" src="assets/546df083-c1ad-4a74-b857-0145b74ede9e.png" style="width:73.92em;height:28.33em;"/></p>
<div class="mce-root CDPAlignCenter CDPAlign packt_figref">Opening<span> </span>Unity Hub to create a new project</div>
<ol start="5">
<li><span><span>Give the project a <span class="packt_screen">Name</span> and a <span class="packt_screen">Location</span> and click on <span class="packt_screen">CREATE</span></span></span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1804 image-border" src="assets/647581e8-eb46-4b3d-8151-3ac4e8bba705.png" style="width:60.67em;height:37.33em;"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">Giving the project a name and location</div>
<ol start="6">
<li><span>Once the project has been created, import the EasyAR package into Unity. To do so, once you've unzipped the compressed file, you can either double-click on the resultant</span> <kbd>.unitypackage</kbd> <span>file (the quickest way) or, from inside Unity, you can click on</span> <span class="packt_screen">Assets</span>|<span class="packt_screen">Import Package</span>|<span class="packt_screen">Custom Package...</span> <span>and select the <kbd>.unitypackage</kbd> file.</span></li>
</ol>
<ol start="7">
<li><span>A</span><span> new window</span> <span>will appear with all the files inside the EasyAR package. <span>Click on </span><span class="packt_screen">Import:</span></span></li>
</ol>
<div class="CDPAlignCenter CDPAlign packt_figref"><img class="aligncenter size-full wp-image-1559 image-border" src="assets/f680ba2a-dbd5-40c1-893b-3b8b419a1ec3.png" style="width:90.75em;height:72.58em;"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Importing EasyAR SDK into Unity</div>
<ol start="8">
<li>As you will see, four new folders will appear on your <span class="packt_screen">Project</span> <span>window: <span class="packt_screen">EasyAR</span> and</span> <span class="packt_screen"><span>Plugins</span></span><span>, which include the main resources and code to build EasyAR for different platforms, and <span class="packt_screen">Samples</span> and <span class="packt_screen">StreamingAssets</span>, which contain the sample resources and code:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign packt_figref"><img class="aligncenter size-full wp-image-1560 image-border" src="assets/8a9d3cba-5468-4922-9551-9a273418fd4c.png" style="width:18.92em;height:12.75em;"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Four new folders have been added to the project</div>
<p>At this point, we have a new clean project with the EasyAR engine and samples included. In the next section, we will learn how to use it to build an app that detects a real image and displays a virtual cube on it.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Building image-based AR</h1>
                </header>
            
            <article>
                
<p>You can build AR using different techniques; the most common one is image-based AR, which consists of tracking a previously selected image (target) and superposing the virtual content to it while taking into account the image's position, rotation, and size. This kind of tracking requires the use of different algorithms that differentiate images one from another through characteristic points of the design, and position the image in three dimensions on the camera feed. Don't worry—EasyAR will do this work for you. All you will need to do is decide which images will act as the targets and what virtual content will go on top of them. </p>
<p>To create this project, we will use EasyAR's <span class="packt_screen">ImageTarget</span> sample project as a reference since it already has all the components we need for our app. But before we start with the AR elements, we will set up our project folders:</p>
<ol>
<li class="mce-root">The first thing we are going to do is create our personal <kbd>Assets</kbd> folder, <kbd>@MyAssets</kbd>, <span>to differentiate it from the rest of the assets we've imported into </span>Unity. Here, we will add all the external resources, such as marker images and 3D models. For that, right-click on the <span class="packt_screen">Project</span> window and select <span class="packt_screen">Create</span>|<span class="packt_screen">Folder</span>. Name it <kbd>@MyAssets</kbd>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1561 image-border" src="assets/7ebc128e-cb27-40e2-be32-afff6c5c28f5.png" style="width:57.83em;height:62.58em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Create a new folder under the main Assets folder a<span>nd call it</span><span> </span>@MyAssets</div>
<ol start="2">
<li class="mce-root">Inside this, create three other folders called <kbd>Images</kbd>, <kbd>Models</kbd>, and <kbd>Scripts</kbd>:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1562 image-border" src="assets/684d9859-15d8-4541-9820-b68a13f362d8.png" style="width:26.08em;height:20.08em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">@MyAssets folder with the three folders inside it</div>
<div class="packt_infobox">Note: This project currently has six folders under the <kbd>Assets</kbd> folder. As you can see, projects tend to increase in size quickly and before we realize it, our resources are lost in the chaos of folders and files. Taking a couple of minutes to create a basic structure for our project folders is always good practice.</div>
<ol start="3">
<li>Now, we can create our AR scene. As we mentioned earlier, we will use EasyAR's sample scene as a reference. To do that, from the <span class="packt_screen">Project</span> window, double-click on the <span class="packt_screen">HelloAR_ImageTarget</span> scene located at <span class="packt_screen">Assets</span>|<span class="packt_screen">Samples</span>|<span class="packt_screen">Scenes</span> to open it:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1563 image-border" src="assets/2e6487aa-aac0-408f-994b-050f7267160a.png" style="width:126.25em;height:74.33em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">The HelloAR_ImageTarget sample scene</div>
<p style="padding-left: 60px"><span>Here, we have all the elements we need to replicate our own AR project. </span></p>
<ol start="4">
<li>Now, click on <span class="packt_screen">File</span>|<span class="packt_screen">Save As...</span> and save the scene inside the <span class="packt_screen">Assets</span>|<span class="packt_screen">Scenes</span> folder with the name <kbd>ARScene</kbd>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1564 image-border" src="assets/6b673900-3aac-4055-a0f7-94c165d30f8b.png" style="width:15.83em;height:11.00em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Saving the scene with another name</div>
<p>By doing this, we've created a duplicate of the sample scene. If anything happens to our scene, we can always go back to the original one.</p>
<p><span><span>Now that we have the initial scene, we can take a look at each component and customize them for our needs.</span></span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Understanding our AR scene</h1>
                </header>
            
            <article>
                
<p>An AR scene has two main components that are common to any image-based AR SDK:</p>
<ul>
<li><strong>The ARCamera</strong>: The camera object that will receive the feed from the camera device and process those frames in search of the selected image (target).</li>
<li><strong>The ImageTarget</strong>: The representation of the real image where we will put the virtual elements. When the camera finds this <span class="packt_screen">ImageTarget</span> in the real world, it shows the virtual elements attached to it.</li>
</ul>
<p>In EasyAR, we have three main elements (apart from the <span class="packt_screen">Directional Light</span>):</p>
<ul>
<li>The <span class="packt_screen">Main Camera</span>, which is the element that will render the image coming from our mobile device.</li>
<li><span class="packt_screen">EasyAR_Setup</span><span>, which is in charge of the main operations of the app, such as initializing and handling the EasyAR engine, attaching the physical camera device to the</span> <span class="packt_screen">Main Camera</span><span> element of the scene, or </span><span><span>implementing the image target detection and tracking through the <span class="packt_screen">ImageTracker</span>:</span></span></li>
</ul>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1565 image-border" src="assets/edc5513f-49fb-456d-8600-6a001f9df4e5.png" style="width:13.00em;height:11.83em;"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">The EasyAR_Setup element and its elements</div>
<ul>
<li><span class="packt_screen">ImageTarget</span>, which is the representation of the image we want to recognize. It contains the virtual elements that will appear and disappear when the image is detected/lost in the real world. In this case, the <span class="packt_screen">ImageTarget</span> already comes with two children: a <span class="packt_screen">Quad</span>, which represents the image we will track, and a <span class="packt_screen">Cube</span>, which we will use to initially test the scene. The values of the image to recognize appear in the <span class="packt_screen">Inspector</span> window in the <span class="packt_screen">Image Target Controller</span>, as shown in the following screenshot:</li>
</ul>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1566 image-border" src="assets/fb508f0f-c89e-4172-9f69-fb16572479cd.png" style="width:48.42em;height:23.92em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign"><span>ImageTarget with its children on the left and the component values on the right</span></div>
<p>The parameters in the <span class="packt_screen">Image Target Controller</span> are as follows: </p>
<ul>
<li><span class="packt_screen">Target Name</span>: <span>The target's name. This doesn't have to be the image's name. </span></li>
<li><span class="packt_screen">Target Path</span>: This is the full path to the image we want to use as a target. It's directly related to the <span><span class="packt_screen">Type </span></span>option.</li>
<li><span class="packt_screen">Target Size</span>: Size of the target. We will usually leave it at <kbd>1</kbd>.</li>
<li><span class="packt_screen">Type</span>: Whether the image of the target will be stored <span>inside the assets of the project (specifically, the</span> <kbd>StreamingAssets</kbd> <span>folder, which we already have in our <span class="packt_screen">Project</span> window) or if the <span class="packt_screen">Target Path</span> is absolute.</span></li>
<li><span class="packt_screen">Image Tracker</span>: This is the <span class="packt_screen">ImageTracker</span> that will search for this <span class="packt_screen">ImageTarget</span> in the camera feed.</li>
<li><span class="packt_screen">Target Type</span>: Here, we will be using the first option, <span class="packt_screen">Local Image</span>, since our image will be included locally inside the project.</li>
</ul>
<p>Now that we have seen the main elements of the scene, the next thing we need to do is create<span> our own target. </span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Preparing the target</h1>
                </header>
            
            <article>
                
<p>Let's create our target. We'll start by adding the necessary images and resources to our project. Follow these steps to do so:</p>
<ol>
<li><span>Drag the </span><kbd>Target_Maia.jpg</kbd><span> image located in the</span> <kbd>Images</kbd> <span>folder from the project resources provided to the</span> <kbd>StreamingAssets</kbd> <span>folder, and the </span><kbd>Target_Maia_texture.jpg</kbd> image <span>to our</span><kbd>@MyAssets/Images</kbd><span><span> folder, as shown in the following screenshot:</span></span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><span><span><img class="aligncenter size-full wp-image-1567 image-border" src="assets/5346fd8d-a2d6-487d-a10e-1e00c026d635.png" style="width:31.58em;height:8.92em;"/></span></span></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Target_Maia.jpg and Target_Maia_texture.jpg images in their respective folders</div>
<p style="padding-left: 60px"><span>The first image will be our target. We will use the second image, which is smaller than the first one, to guide us on the target's size in the</span> editor.<span> </span></p>
<div style="padding-left: 60px" class="packt_infobox"><span>We can't reuse the image from the</span> <kbd>StreamingAssets</kbd> <span>folder because the files in this folder are not processed by the Unity editor, so they can't be used inside the scene directly like regular files.</span></div>
<ol start="2">
<li>In the <span class="packt_screen">Hierarchy</span> window, select the <span class="packt_screen">ImageTarget</span> and change the <span class="packt_screen">Name</span> and <span class="packt_screen">Path</span> values in the <span class="packt_screen">Insp</span><span class="packt_screen">ector</span> window, as shown in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1568 image-border" src="assets/1181f49f-436f-4c7f-86e5-2ed936290923.png" style="width:18.42em;height:13.50em;"/><span> </span></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Image Target Behaviour parameters</div>
<p style="padding-left: 60px"><span>With these parameters, we are telling </span><span class="packt_screen">ImageTracker</span><span> </span><span>to find the target called</span><span> </span><kbd>Target_Maia.jpg</kbd><span> inside the streaming assets of the project.</span></p>
<div class="packt_tip packt_infobox">Note: You can use the folders inside the <kbd>StreamingAssets</kbd> folder to organize your targets. In that case, you will have to add the folder to the <span class="packt_screen">Target Path</span> property (for example, <kbd>MyFolder/Target_Maia.jpg</kbd>).</div>
<ol start="3">
<li>The <span class="packt_screen">ImageTarget</span> doesn't have an image associated with it, meaning that we can't actually see it in the editor. To visualize how our target will look, and especially to see how the virtual content will look over the real image (size, position), we will use the <span class="packt_screen">Quad</span> element we already have as a child of the <span class="packt_screen">ImageTarget</span>. By the end of the project, when we no longer need it, we will delete this <span class="packt_screen">Quad</span> element. Drag the <kbd>@MyAssets/Images/Target_Maia_texture</kbd><span class="packt_screen"> </span>image from the <span class="packt_screen">Projec</span><span class="packt_screen">t</span> window to the <span class="packt_screen">Quad</span> to make it its texture:</li>
</ol>
<div class="CDPAlignCenter CDPAlign packt_figref"><img class="aligncenter size-full wp-image-1569 image-border" src="assets/d3edb798-81ec-4c2d-bdd3-fd881800b87c.png" style="width:28.50em;height:29.33em;"/><span> </span></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Target_Maia_texture being dragged to the Quad</div>
<ol start="4">
<li>Now, we have to adjust the aspect ratio of the <span class="packt_screen">Quad</span> so that it matches our image's aspect ratio. We'll do that by setting the <span class="packt_screen">Y</span> scale to <kbd>0.7</kbd>, as shown in the following screenshot:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1570 image-border" src="assets/23f61534-7e0a-43e2-87d9-89a84944fa1e.png" style="width:35.17em;height:13.50em;"/><span> </span></div>
<div class="packt_figref CDPAlignCenter CDPAlign">The Quad's Transform component and its values</div>
<p>Our scene is ready. We have the <span class="packt_screen">Main Camera</span>, the <span class="packt_screen">EasyAR_Setup</span>, our <span class="packt_screen">ImageTarget</span> has the path to the image we want to recognize in it, and the <span class="packt_screen">Quad</span> and a <span class="packt_screen">Cube</span> are children so that they will appear when the marker is recognized. The next thing we need to do is get the EasyAR key to test the scene.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Obtaining the key</h1>
                </header>
            
            <article>
                
<p>To test the current scene, we need to add the key to the EasyAR GameObject. This key is generated by EasyAR to license the app:</p>
<ol>
<li>Go to the EasyAR develop center (<a href="https://www.easyar.com/view/developCenter.html#license">https://www.easyar.com/view/developCenter.html#license</a>), log in if you aren't already, and click on <span class="packt_screen">Add SDK License Key</span>.</li>
<li>There, select <span class="packt_screen">EasyAR SDK Basic</span> and provide the following details:</li>
</ol>
<ul>
<li style="padding-left: 30px"><span class="packt_screen">App Name</span>: <kbd>AR Catalogue</kbd></li>
<li style="padding-left: 30px"><span class="packt_screen">Bundle ID (iOS)</span>: <kbd>com.banana.arcatalogue</kbd> (you only need to fill this in if you are going to build your app on iOS)</li>
<li style="padding-left: 30px"><span class="packt_screen">Package Name (Android)</span>: <kbd>com.banana.arcatalogue</kbd> (you only need to fill this in if you are going to build your app on Android)</li>
</ul>
<div class="packt_tip">These names correspond to the app name and bundles (<em>com.companyname.productname</em>) in Unity. <br/>
<br/>
If you want to change these names in the future, you will have to make sure to change them in the key generation panel and copy/paste the resulting key into Unity again.</div>
<ol start="3">
<li>Select the created key in the panel and copy the <span class="packt_screen">SDK License Key</span> <span>(valid for </span><span>EasyAR SDK 3.x)</span><span> </span>into the <span class="packt_screen">Easy AR Key</span> element located in <span class="packt_screen">Assets</span>|<span class="packt_screen">EasyAR</span>|<span class="packt_screen">Common</span>|<span class="packt_screen">Resources</span>:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1571 image-border" src="assets/02201c86-3071-426a-8a91-bb036b0df763.png" style="width:64.67em;height:29.00em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">EasyARKey settings script</div>
<p>Once we have the key, we are ready to test the scene.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Testing the scene</h1>
                </header>
            
            <article>
                
<p>Now, let's test the scene: press <em>Ctrl</em> + <em>S</em> to save everything again, make sure you have a webcam connected to your computer and hit the play button at the top of the Toolbar. The system should launch the webcam automatically. If you point at the marker (either printed or displayed in the screen), you should see the quad in the background and the cube popping from it in the <span class="packt_screen">Game</span> view:</p>
<div class="packt_tip">To view the scene in full-screen mode, you can press <span class="packt_screen">Maximize on Play</span> in the top right of the <span class="packt_screen">Game</span> view before pressing play.</div>
<div class="CDPAlignCenter CDPAlign packt_figref"><img class="aligncenter size-full wp-image-1805 image-border" src="assets/4889b53e-6ea7-4868-9637-b753ac862afb.png" style="width:41.25em;height:26.92em;"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">The Game window maximized, showing the cube appearing in AR over the target</div>
<p>Hit the play button again to stop the simulation.</p>
<div class="packt_tip packt_infobox"><strong>Important!</strong> Remember that to hit the play button to stop the simulation or any changes that are made in the scene afterward while you're still in simulation mode won't be saved.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Troubleshooting</h1>
                </header>
            
            <article>
                
<p>If you can't see the AR scene correctly, you can go to the <span class="packt_screen">Console</span> tab (it's in the bottom bar <span>or the tab next to the </span><span class="packt_screen">Game</span><span> view)</span> and look at the information there.</p>
<p>If everything worked correctly, it should show only information messages, namely the successful initialization of EasyAR, its version, and so on. However, if there is an error message of <span><span class="packt_screen">404 Not Found</span></span>, this means that the target has not been set up properly. Please review all the steps, especially the <span class="packt_screen">Path<span> </span></span>parameter in the <span class="packt_screen">ImageTarget<span> </span></span>to make sure it's pointing to the correct file. In the following screenshot, the target name is <kbd>Target_Maia2.jpg</kbd> instead of <kbd>Target_Maia.jpg</kbd>:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1806 image-border" src="assets/45350b9c-c471-4d95-bf2d-7a2937ba699f.png" style="width:57.42em;height:28.25em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">The console showing common information messages and an error</div>
<p>In any case, you can try to troubleshoot the errors either in the Unity forums (<a href="https://forum.unity.com/">https://forum.unity.com/</a>) or in the EasyAR forums (<a href="https://forum-test.easyar.com/">https://forum-test.easyar.com/</a>).</p>
<div class="packt_infobox"><span>This step of testing the scene is not necessary, although it's highly recommended. Building an app into a device takes time, so it's advisable to test it first and make sure it works as you want it to.</span></div>
<p><span>Now, let's build the app.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Building the app</h1>
                </header>
            
            <article>
                
<p><span>To build a new Android app, there are some steps you will always have to follow:</span></p>
<ol>
<li><span>The first thing you need to do is select the platform. For that, click on <span class="packt_screen">File</span></span>|<span><span class="packt_screen">Build Settings</span>.</span></li>
<li>Click on <span class="packt_screen">Add Open Scenes</span> <span>to add our current scene to the (empty) list of scenes that will be built in the app.</span></li>
<li>Under <span class="packt_screen">Platfor</span><span class="packt_screen">m</span><span>, select</span> <span class="packt_screen">And</span><span class="packt_screen">roid</span> <span>and click on</span> <span class="packt_screen">Switch Platform</span><span>. Wait until Unity recompiles the resources for the selected platform:</span></li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1807 image-border" src="assets/00344579-73e2-4330-ab0d-bc617b599db0.png" style="width:52.17em;height:41.33em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">The Build Settings window with the current scene added and the Android platform selected</div>
<ol start="4">
<li>Then, click on <span class="packt_screen">Player Settings...</span> to configure the app settings. In the pop-up window, we are going to change a few things for the time being:</li>
</ol>
<ul>
<li style="padding-left: 30px"><span class="packt_screen">Company Name</span>: <kbd>Banana</kbd></li>
<li style="padding-left: 30px"><span class="packt_screen">Product Name</span>: <kbd>AR Catalogue</kbd></li>
</ul>
<div class="packt_infobox">These names are the same ones we used in the generation of the EasyAR key code.</div>
<p style="padding-left: 60px">The following image shows the <span class="packt_screen">Project Settings</span> window with the newly added <span class="packt_screen">Company Name</span> and <span class="packt_screen">Product Name</span> fields:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img src="assets/d4378309-a5cd-40c0-8221-6f819e827595.png" style="width:35.33em;height:21.25em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Filling in the company and product names in Project Settings</div>
<ol start="5">
<li>Then, on <span class="packt_screen">Other Settings</span>|<span class="packt_screen">Identification</span>, <span>set the following:</span></li>
</ol>
<ul>
<li style="padding-left: 30px"><span class="packt_screen">Package name</span>: <kbd>com.banana.arcatalogue</kbd> (make sure it matches the name from the EasyAR key generation, otherwise the app will launch an error on its initialization saying the package name doesn't match the key)</li>
<li style="padding-left: 30px"><span class="packt_screen">Version</span>: <kbd>1.0</kbd></li>
<li style="padding-left: 30px"><span class="packt_screen">Minimum API Level</span>: <kbd>Android 5.0 'Lollipop' (API level 21)</kbd></li>
<li style="padding-left: 30px"><span class="packt_screen">Target API Level</span>: <kbd>Automatic (highest installed):</kbd></li>
</ul>
<div class="packt_infobox"><span>According to EasyAR's documentation, the SDK is compatible with Android 4.2 and above, but for performance reasons, and in order to have a fluid AR experience on users' devices, we recommend setting the minimum API level to 5.0.</span></div>
<div class="mce-root CDPAlignCenter CDPAlign packt_figref"><img class="aligncenter size-full wp-image-1602 image-border" src="assets/50277197-413b-4e50-a372-2fa284426ea4.png" style="width:25.42em;height:7.42em;"/></div>
<div class="mce-root CDPAlignCenter CDPAlign packt_figref">Identification section inside the Other Settings tab</div>
<ol start="6">
<li class="mce-root">In case you have Android SDK installed outside Unity, before opening the <span class="packt_screen">Player Settings</span>, Unity will most likely tell you it found an Android SDK and whether you want to use it. If that's the case, click <span class="packt_screen">Yes</span>:</li>
</ol>
<div class="CDPAlignCenter packt_figref CDPAlign"><img src="assets/70cf358f-00ee-43b5-a7c6-f1646b4cf6d1.png" style="width:22.33em;height:8.92em;"/></div>
<div class="mce-root packt_figref CDPAlignCenter CDPAlign">Using the installed SDK if we already have it installed</div>
<ol start="7">
<li>Close the <span class="packt_screen">Player Settings</span> window, connect your mobile device to the computer with a USB cable, and make sure your device has USB debugging activated in order to deploy the app directly into it from Unity. To activate this option, the general steps are as follows:</li>
</ol>
<ul>
<li style="padding-left: 30px">Enable <span class="packt_screen">Developer Mode</span> by going to <span class="packt_screen">Settings</span>|<span class="packt_screen">About Device</span>.</li>
<li style="padding-left: 30px">Then, tap seven times on the build number until a notification appears stating that the <span class="packt_screen">Developer Options</span> are available.</li>
<li style="padding-left: 30px">Go to the <span class="packt_screen">Developer Options</span> and activate <span class="packt_screen">USB Debugging</span> to allow the computer to install and start the app on it.</li>
</ul>
<div class="packt_infobox"><strong>Important!</strong> As we mentioned earlier, these steps are general. If you have any doubts, please try to find the specific case for your device as the names of the options may vary from one manufacturer to another.</div>
<ul>
<li>Now, click on <span class="packt_screen">Build And Run</span> in the <span class="packt_screen">Build Settings</span> window, call your APK <kbd>arcatalogue.apk</kbd>, and hit <span class="packt_screen">Save</span>. Unity will immediately start the compilation by looking for the Android SDK <em>(</em>if it doesn't detect it, it will ask you to select the folder where it's installed<em>)</em> and searching for a suitable device (if the device isn't plugged in correctly or <span class="packt_screen">USB Debugging</span> isn't activated, it will tell you it can't find the device). Then, it will start the building process until it copies the APK into the device and launches it.</li>
<li>Once the app has launched, point the camera to the target in order to see the cube:</li>
</ul>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1574 image-border" src="assets/ca8a9d00-c772-4f0c-a530-61f0701208fa.png" style="width:30.00em;height:20.42em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Screenshot of the cube over the target on a mobile device</div>
<div class="packt_tip">If for any reason, you don't want/can't build the APK into the mobile device, you can use <span class="packt_screen">Build</span> instead of <span class="packt_screen">Build And Run</span> to create the APK without installing it.<br/>
<br/>
When the compilation process finishes, you will have to manually copy the resulting APK into your device and install it.</div>
<div class="packt_infobox">Note: This process is for Android devices only. To compile the app on an iOS device, you have to build and run the Unity project from an Apple computer and, when the building process finishes, it will automatically launch Xcode where the building will end up (you will have to assign your Apple ID in order to play the app on an iOS device, just like you need to with any other iOS app developed in Xcode).</div>
<p>In this section, you have learned how to use EasyAR to detect an image and display a virtual cube on it. Now, we will substitute the test cube for an external 3D model we will import into our project.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Working with custom 3D models</h1>
                </header>
            
            <article>
                
<p class="mce-root">In the previous section, we learned how to create a simple AR app with EasyAR to display a cube. In this section, we are going to import our own 3D model into Unity to visualize over the target and play with its materials and textures.</p>
<p class="mce-root">For this project, we are going to work with <kbd>fbx</kbd>, an exported format that allows us to include materials, textures, and animations. To see a list of all the exported and native 3D formats Unity accepts, please visit<span> </span><a href="https://docs.unity3d.com/Manual/3D-formats.html">https://docs.unity3d.com/Manual/3D-formats.html</a>.</p>
<p>Before including the models in our project<span>, we will make a few changes to our scene to improve it:</span></p>
<ol>
<li>Select <span class="packt_screen">Directional Light</span> in the <span class="packt_screen">Hierarchy </span>window. Then, in the <span class="packt_screen">Inspector</span> window, set the <span class="packt_screen">Shadow Type</span> to <span class="packt_screen">No Shadows</span>. Shadows are quite resource-consuming  and, in this case, the AR experience will benefit from not having shadows:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1575 image-border" src="assets/b1f4166a-3e06-4ed8-9d30-652a141d1f92.png" style="width:22.17em;height:22.83em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Directional Light properties in the Inspector window</div>
<p class="mce-root"/>
<ol start="2">
<li>Now, select <span class="packt_screen">ImageTarget</span> and change its <span class="packt_screen">Transform</span> values so it rotates on the x axis. This way, in the scene, the objects will appear to be popping up from the ground:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1576 image-border" src="assets/503818a1-c5f2-45c8-b015-5b17070e6254.png" style="width:30.67em;height:7.25em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">ImageTarget Transform values</div>
<ol start="3">
<li>Finally, select <span class="packt_screen">Main Camera</span> and rotate and move it so that it's pointing at the target:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1577 image-border" src="assets/89e3c519-631f-409c-8b6f-c4205535a693.png" style="width:31.25em;height:7.42em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Main Camera Transform values</div>
<p>Now, it's time to include the 3D models. Let's get started:</p>
<ol>
<li class="mce-root"><span>Delete the <span class="packt_screen">Cube</span> from inside </span><span class="packt_screen">ImageTarget</span><span> in the </span><span class="packt_screen">Hierarchy</span><span> window by right-clicking on it and selecting </span><span class="packt_screen">Delete</span><span>, or just by selecting it and pressing </span><em>Delete</em><span><span> on your keyboard:</span></span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1603 image-border" src="assets/0346646c-90bc-43bf-b231-81eff556c250.png" style="width:13.50em;height:13.42em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Deleting the Cube model</div>
<ol start="2">
<li class="mce-root">Drag the <kbd>Models/Maia</kbd> folder from the code resources <span>provided </span>into the <span class="packt_screen">Project </span>window on <kbd>@MyAssets/Models</kbd>. This will import the <kbd>.fbx</kbd> mesh object and its texture files inside the <kbd>textures</kbd> folder, as shown in the following screenshot. </li>
<li class="mce-root">Drag the <kbd>maia.fbx</kbd> file inside <span class="packt_screen">ImageTarget</span>. Remember to make sure it's inside <span class="packt_screen">ImageTarget</span> so that it appears/disappears when the target does. Move, rotate, and scale the model until it looks good over the target:</li>
</ol>
<div class="mce-root packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1604 image-border" src="assets/27013ab8-85e0-43d6-af18-e5ed143ccfd2.png" style="width:123.92em;height:71.50em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">The maia model inside the target</div>
<ol start="4">
<li>Now, hit the play button at the top of the Toolbar to test the current scene. The moment the target is detected, the seat will appear:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1809 image-border" src="assets/3ade5339-d007-4126-ae38-b243d3ed9f31.png" style="width:120.17em;height:74.42em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">The seat appears when the target is detected</div>
<ol start="5">
<li>Hit the play button once more to stop the simulation and then save the scene (<em>Ctrl</em> + <em>S</em>). Connect the mobile device to your computer and press <em>Ctrl</em> + <em>B</em>, or go to <span class="packt_screen">File</span>|<span class="packt_screen">Build Settings</span>|<span class="packt_screen">Build And Run</span>, to build the app into your device.</li>
</ol>
<p>Now that we have our basic AR scene, in the next section, we will create our AR catalog by adding another chair and creating the UI to allow users to interact with our furniture.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating an AR catalog</h1>
                </header>
            
            <article>
                
<p>Now that we have created the basic scene, we will create a small AR catalog:</p>
<ul>
<li>We will use two <span class="packt_screen">ImageTargets</span> to show two different chairs.</li>
<li>We will allow users to change the color of the chairs while they are looking at them.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Modifying the AR scene</h1>
                </header>
            
            <article>
                
<p>In this section, we are going to modify the current AR scene by adding a new <span class="packt_screen">ImageTarge</span>t. To do this, we will follow the same steps that we followed in the previous section:</p>
<ol>
<li>From the resources of the project, drag the <span><kbd>Target_Prince.jpg</kbd> image into the </span><kbd>Assets/StreamingAssets</kbd> folder.</li>
<li>Then, drag the <span><kbd>Target_Prince_texture.jpg</kbd> image into the </span><kbd>Assets/@MyAssets/Images</kbd> folder:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1579 image-border" src="assets/8b300b54-127d-4ee8-9207-ad98d9999abc.png" style="width:62.50em;height:18.92em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Target_Prince and Target_Prince_texture in their respective folders</div>
<ol start="3">
<li>Then, drag <span>the </span><kbd>Prince</kbd><span> folder, which contains the model, </span>into <kbd>Assets/@MyAssets/Models</kbd>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1580 image-border" src="assets/d8f05a51-3720-49ce-955e-d7a0c49cc1a1.png" style="width:30.00em;height:14.50em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">The prince model</div>
<ol start="4">
<li>Right-click the <span class="packt_screen">ImageTarget </span>and select <span class="packt_screen">Duplicate</span> so that we can use it as template for the new <span class="packt_screen">ImageTarget</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1581 image-border" src="assets/cb18f1ae-ed52-4350-946d-96402a4551bb.png" style="width:18.50em;height:14.17em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Duplicating the ImageTarget</div>
<ol start="5">
<li>Rename the first <span class="packt_screen">ImageTarget</span> to <kbd>ImageTargetMaia</kbd> and the current one to <kbd>ImageTargetPrince</kbd> so that you can distinguish between them. Move them on the scene so that they don't overlap.</li>
<li>Copy the following <span class="packt_screen">Target Name</span> and <span class="packt_screen">Path</span> parameters into the <span class="packt_screen">Image Target Controller </span>of our <span class="packt_screen">ImageTargetPrince</span> in the <span class="packt_screen">Inspector</span> window:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1582 image-border" src="assets/f7873427-c8f0-4ca2-903d-d700e781c817.png" style="width:25.67em;height:18.58em;"/><span> </span></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Image Target Controller parameters</div>
<ol start="7">
<li>Drag the <kbd>Target_Prince_texture.jpg</kbd> image from the <kbd>Assets/@MyAssets/Images</kbd> folder onto the <span class="packt_screen">Project</span> window to the <span class="packt_screen">Quad</span> of <span class="packt_screen">ImageTargetPrince</span> in the <span class="packt_screen">Hierarchy</span> window in order to apply it as a texture.</li>
<li>Remove the <span class="packt_screen">maia</span> model from <span class="packt_screen">ImageTargetPrince</span> (right-click and <span class="packt_screen">Delete</span>) and drag the <span class="packt_screen">prince</span> model there instead.</li>
<li>Move, rotate, and scale the <span class="packt_screen">prince</span> model until it's in the middle of the marker and looks good.</li>
</ol>
<p>The following screenshot shows our scene with the two <span class="packt_screen">ImageTargets</span> and their respective seats:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1583 image-border" src="assets/75853f8e-0e7a-4017-980b-c00cff999ccd.png" style="width:124.00em;height:69.67em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">The scene with the two targets and models</div>
<ol start="10">
<li>Before testing our scene, let's hide the <span class="packt_screen">Quad</span> objects so that they don't appear in AR and we only see the chairs. For that, select both <span class="packt_screen">Quad</span> GameObjects (<em>Ctrl </em>+<em> </em>left click for multiple selection) and uncheck their <span class="packt_screen">Mesh Renderer</span> components:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1584 image-border" src="assets/06fb0be6-e507-4416-aea6-a9438a8ce752.png" style="width:45.17em;height:15.83em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Hiding the Quad GameObjects</div>
<ol start="11">
<li>Now, hit play to tes<span>t that ev</span><span>erything is set up correctly. Point with the camera to one of the targets and then to the other to see the chairs.</span></li>
<li>Hit play again to st<span>op the simulation and continue making changes.</span></li>
<li><span>At the moment,</span> <span class="packt_screen">ImageTracker</span> <span>of the</span> <span class="packt_screen">EasyAR_Setup</span> Ga<span>meObject has been set to detect only one marker at a time. Let's increase this value to</span> <kbd>2</kbd> <span>so that our users can see both chairs together:</span></li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1585 image-border" src="assets/75c3f7ed-b9bf-44be-8383-6717b9f8006c.png" style="width:51.17em;height:17.25em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Changing the number of simultaneous targets</div>
<p>Now, test this out—<span>you should see</span> both chairs appear at the same time.</p>
<p><span><span>The next thing we need to do is create the script that will let the user change the textures of the seats.</span></span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating the controller script</h1>
                </header>
            
            <article>
                
<p>In this section, we are going to create a script that will control the scene and allow our users to change the textures of the seats. Let's get started:</p>
<ol>
<li>In <span class="packt_screen">@MyAssets</span>|<span class="packt_screen">Scripts</span>, create a new C# script by right-clicking and selecting <span class="packt_screen">Create</span>|<span class="packt_screen">New C# Script</span>. Call it <kbd>MainController</kbd> and double-click on it to open it in Visual Studio:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1810 image-border" src="assets/8368436e-b918-4df8-b93b-e0fff782e303.png" style="width:52.00em;height:45.58em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Creating a new C# Script in the @MyAssets/Scripts folder</div>
<ol start="2">
<li>If you installed Unity by following the steps in <a href="54a1260e-a741-4eb5-9c98-01350fcba94b.xhtml">Chapter 2</a>, <em>Introduction to Unity for AR Development</em>, you will already have Visual Studio installed and configured, and it will open the script with the default code, as shown in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1587 image-border" src="assets/a97b27f0-f8e0-4f09-a9b5-ac875a3d9d83.png" style="width:77.42em;height:53.67em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">MainController script in Visual Studio</div>
<ol start="3">
<li>If you installed Visual Studio prior to Unity or used another program such as MonoDevelop, you can configure Unity to open scripts with it by clicking on <span><span class="packt_screen">Edit</span></span>|<span><span class="packt_screen">Preferences</span></span>|<span><span class="packt_screen">External Tools</span></span>|<span><span class="packt_screen">External Script Editor</span>, as shown in the following screenshot:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1811 image-border" src="assets/c00fba1d-773d-4505-bf86-8ed2d6f6cf71.png" style="width:93.42em;height:57.25em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Preferences window with Visual Studio assigned as the External Script Editor</div>
<ol start="4">
<li>In the script, start by adding the following lines after the class declaration:</li>
</ol>
<pre style="padding-left: 60px">public class MainController : MonoBehaviour<br/>{<br/>    public Material[] materials; <br/> public Texture2D[] textures; <br/>... </pre>
<p style="padding-left: 60px">Here, we are declaring the <kbd>materials</kbd> array, which is where we will store the materials of both chairs. We will use it to change those materials' texture properties. The <kbd>textures</kbd> array will contain the actual images (red and blue) that we will apply to those materials. Both variables are public because we will initialize them from the Unity editor.</p>
<ol start="5">
<li>Inside the <kbd>Start()</kbd> method, add the following loop:</li>
</ol>
<pre style="padding-left: 60px">foreach (Material material in materials)<br/>{<br/>    material.mainTexture = textures[0];<br/>}</pre>
<p style="padding-left: 60px">With this loop, we are assigning each material inside the <kbd>materials</kbd> array to the first image of the <kbd>textures</kbd> array.</p>
<ol start="6">
<li>After the <kbd>Update()</kbd> method, we are going to create a new method:</li>
</ol>
<pre style="padding-left: 60px">public void ChangeColor()<br/>{<br/>    foreach (Material material in materials)<br/>    {<br/>        if (material.mainTexture == textures[0])<br/>            material.mainTexture = textures[1];<br/>        else<br/>            material.mainTexture = textures[0];<br/>    }<br/>}</pre>
<p style="padding-left: 60px">This method changes <span>the texture (red or blue) of the materials of the chairs. It checks which texture is selected and assigns the other one to both chairs.</span></p>
<ol start="7">
<li>Now, go back to the Unity editor and drag the script to the <span class="packt_screen">EasyAR_Setup</span> GameObje<span>ct so that the script will affect the current scene. <br/></span></li>
</ol>
<div class="packt_tip"><span>Remember that a script will only be executed if it's attached to one GameObject (or more) of the scene. Otherwise, it will only exist in the <span class="packt_screen">Projects</span> window but not in the actual scene.<br/>
<br/></span> <span>Since this script doesn't make direct reference to the element it's attached to, it could go on any element that is active in the scene all the time (so it's always available). We have put it in <span class="packt_screen">EasyAR_Setup</span> because it's a root element that fulfills this rule.</span></div>
<ol start="8">
<li>Unfold the two variables of the script, that is, <span class="packt_screen">Materials</span> and <span class="packt_screen">Textures</span>, and, in <span class="packt_screen">Materials</span>, set <span class="packt_screen">Size</span> to <kbd>2</kbd> and select <span class="packt_screen">tela</span> and <span class="packt_screen">Material #5</span>. These are the materials that correspond to the fabric in each model:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1588 image-border" src="assets/d12450a8-01ca-4493-8049-6b986ed1772c.png" style="width:82.25em;height:53.33em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Assigning the materials to the variables</div>
<ol start="9">
<li>In <span class="packt_screen">Textures</span>, <span>set <span class="packt_screen">Size</span> to</span> <kbd>2</kbd> <span>and select the red and the blue elements, that is,</span> <span class="packt_screen">Acapulco 3011</span> and <span class="packt_screen">Acapulco PANTONE 2935 C</span>:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1589 image-border" src="assets/029cd049-d80b-4809-a93a-714bf5a8fe1c.png" style="width:33.00em;height:25.33em;"/><span> </span></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Assigning the textures to the variables</div>
<p>The <span class="packt_screen">Controller</span> script is ready. Now, we have to create the user interface and the button that will trigger the color change through the <kbd>ChangeColor()</kbd> method we have just created.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating the interface</h1>
                </header>
            
            <article>
                
<p>Let's create a simple interface to allow our users to change the features of the AR objects they are seeing. Let's get started:</p>
<ol>
<li>First, right-click on the <span class="packt_screen">Hierarchy</span> window and select <span class="packt_screen">UI</span>|<span class="packt_screen">Canvas</span>. The <span class="packt_screen">Canvas</span> element is the main element on the Unity interface and contains all the other elements:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1590 image-border" src="assets/fec51d15-663b-43bf-9a39-32b4780fb0f2.png" style="width:21.92em;height:40.75em;"/><span> </span></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Creating a Canvas element on the scene</div>
<ol start="2">
<li>By default, the <span class="packt_screen">Canvas</span> is located in the (0,0) point, facing back, overlaying the whole 3D scene, and with the current screen size. Double-click on its name in the <span class="packt_screen">Hierarchy</span> window so that the scene focuses on it.</li>
<li>In the <span class="packt_screen">Inspector</span> window, include the following values for <span class="packt_screen">Canvas Scaler</span>:</li>
</ol>
<ul>
<li style="padding-left: 30px"><span class="packt_screen">UI Scale Mode</span>: <span class="packt_screen">Scale With Screen Size</span>. With this parameter, we are telling the canvas to adapt itself to the different screen sizes (useful when compiling for different mobile devices).</li>
<li style="padding-left: 30px">For <span class="packt_screen">Reference Resolution</span>, we will use <kbd>1280</kbd> x <kbd>720</kbd>.</li>
<li style="padding-left: 30px"><span class="packt_screen">Screen Match Mode</span> allows us to adapt the UI elements to the width and/or height of the screen. A value of <kbd>0.5</kbd> tells it to adapt to both:</li>
</ul>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1591 image-border" src="assets/2cf66ef6-f684-4ebd-a239-6b6dafaa8929.png" style="width:33.17em;height:19.33em;"/><span> </span></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Canvas Scaler values on the Inspector window</div>
<p style="padding-left: 90px" class="CDPAlignLeft CDPAlign"><span>To </span>manipulate the U<span>I elements (move, scale, and so on), select their specific tool in the toolbar:</span></p>
<p style="padding-left: 90px" class="CDPAlignCenter CDPAlign"><img src="assets/3c51c2b7-b993-4d5e-ae82-452a53d4e3ef.png"/></p>
<ol start="4">
<li>We are going to use an icon for our color button. For that, import the <kbd>circle_icon.png</kbd> image into <kbd>Assets/@MyAssets/Images</kbd>. Select it in the <span class="packt_screen">Project</span> window. Then, in the <span class="packt_screen">Inspector</span> window, modify its <span class="packt_screen">Texture Type</span> so that it's <span class="packt_screen">Sprite</span> <span class="packt_screen">(2D and UI)</span> in order to use it in the UI. Then press <span class="packt_screen">Apply</span> to save this change:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1592 image-border" src="assets/a12b98da-01de-4613-9c26-fc90666bbd29.png" style="width:64.83em;height:44.75em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Converting circle_icon into a sprite image</div>
<ol start="5">
<li>Now, right-click on <span><span class="packt_screen">Canvas</span> </span>in the <span class="packt_screen">Hierarchy</span> window and select <span class="packt_screen">UI/Button</span>:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><span> </span><span><img class="aligncenter size-full wp-image-1812 image-border" src="assets/29595d2f-5fc3-40a9-9849-e317fbb0d271.png" style="width:39.25em;height:49.58em;"/></span></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Creating a button inside the canvas element</div>
<ol start="6">
<li>We don't need the text component that comes with the <span class="packt_screen">Button</span>, so right-click on it and <span class="packt_screen">Delete</span> it:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1594 image-border" src="assets/4b02d15e-62a6-459c-a0f5-9d6eb551bcd6.png" style="width:17.25em;height:18.33em;"/><span> </span></div>
<div class="mce-root packt_figref CDPAlignCenter CDPAlign">Deleting the text component of the button</div>
<ol start="7">
<li>Change the button's name to <kbd>Color_button</kbd> and assign the icon we previously imported into its <span class="packt_screen">Image</span> component <span>to </span><span class="packt_screen">Source Image</span>. Click on the <span class="packt_screen">Preserve Aspect</span> checkbox to make sure it's always round:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1595 image-border" src="assets/1f01c16b-e9b8-438e-9463-5f610fc46714.png" style="width:24.00em;height:18.83em;"/><span> </span></div>
<div class="packt_figref CDPAlignCenter CDPAlign">The Color_button image component in the Inspector window</div>
<ol start="8">
<li>Now, let's place the button in the top-right corner of the screen. For the <span class="packt_screen">Rect Transform</span> component, click on the square and select the top-right option to move the button's anchors:</li>
</ol>
<div class="CDPAlignCenter CDPAlign packt_figref"><img class="aligncenter size-full wp-image-1596 image-border" src="assets/b08afc56-276f-4671-a3b0-e590a0cd7969.png" style="width:31.33em;height:37.00em;"/><span> </span></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Selecting the top-right anchor for the button</div>
<ol start="9">
<li>Then, change the <span class="packt_screen">PosX</span>, <span class="packt_screen">PosY</span>, <span class="packt_screen">Width</span>, and <span class="packt_screen">Height</span> values to adjust the button's position and scale, as follows:</li>
</ol>
<div class="CDPAlignCenter CDPAlign packt_figref"><img class="aligncenter size-full wp-image-1597 image-border" src="assets/ee2401cb-7b7e-4d72-aef9-671e0dd857df.png" style="width:19.67em;height:14.33em;"/>  </div>
<div class="CDPAlignCenter CDPAlign packt_figref">The button's new Rect Transform values</div>
<ol start="10">
<li>Now, with the button selected,<span class="packt_screen"> </span>under the <span class="packt_screen">Button</span> component on the <span class="packt_screen">Inspector</span> window, go to the <kbd>On Click ()</kbd> method and press the <span class="packt_screen">+</span> symbol to create a new action:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1598 image-border" src="assets/8ff41c9a-10aa-4c62-8795-e2f6d7898095.png" style="width:20.00em;height:25.42em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Creating a new action in the On Click() method</div>
<ol start="11">
<li>Drag the <span class="packt_screen">EasyAR_Setup</span> <span>element from the</span> <span class="packt_screen">Hierarchy</span> <span>window to the</span> <span class="packt_screen">None (Object)</span> <span>box and, from the drop-down menu on the right, select</span> <span class="packt_screen">MainController</span>|<span class="packt_screen">ChangeColor</span><span>. With this, we are telling the UI that whenever the</span> <span class="packt_screen">Color_button</span> <span>is pressed, the</span> <kbd>ChangeColor()</kbd> <span>method from the</span> <kbd>MainController</kbd> <span>class that's attached to the</span> <span class="packt_screen">EasyAR_Setup</span> GameObj<span>ect will be executed:</span></li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"> <img class="aligncenter size-full wp-image-1599 image-border" src="assets/dd26cb74-1cc4-4e0d-af5d-67a415f5cc51.png" style="width:26.42em;height:21.00em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Selecting the ChangeColor() method for the Color_button</div>
<ol start="12">
<li>Play the scene to test it. You will see that when you click on <span class="packt_screen">Color_button</span>, the texture of the chairs changes. However, there is still a small detail: the button is not intuitive because it doesn't change its own color. To solve this, we are going to add a few lines to our code in Visual Studio.</li>
<li>Go back to Visual Studio and in the <kbd>MainController</kbd> script import the <kbd>UnityEngine</kbd> <kbd>UI</kbd> library at the beginning of the file: </li>
</ol>
<pre style="padding-left: 60px">using UnityEngine.UI;</pre>
<ol start="14">
<li>Add the following variables <em>before</em> the <kbd>Start()</kbd> method:</li>
</ol>
<pre style="padding-left: 60px">public Image color_button;<br/>private Color32 red = new Color32(159, 40, 40, 255);<br/>private Color32 blue = new Color32(40, 74, 159, 255);</pre>
<p style="padding-left: 60px">We'll use the first one to assign the button in Unity editor (that's why it's <kbd>public</kbd>) and the two colors as reference.</p>
<ol start="15">
<li>Add the following line inside the <kbd>Start()</kbd> method, after the loop segment, to initialize the button to <kbd>red</kbd>:</li>
</ol>
<pre style="padding-left: 60px"><span>color_button.color = red;</span></pre>
<ol start="16">
<li>Add the following lines <em>inside</em> the <kbd>ChangeColor()</kbd> method:</li>
</ol>
<pre style="padding-left: 60px">if (color_button.color == red)<br/> color_button.color = blue;<br/>else<br/> color_button.color = red;</pre>
<p style="padding-left: 60px">Here, we are telling the button to evaluate the current color and, if it's <kbd>red</kbd>, to change it to <kbd>blue</kbd> and vice versa. This way, the button will change its color at the same time as the textures of the seats do.</p>
<ol start="17">
<li>Finally, in the Unity editor, drag the <span class="packt_screen">Color_button</span> GameObject to the <span class="packt_screen">Color_button</span> variable on the <kbd>EasyAR_Setup</kbd> GameObject to assign it:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1600 image-border" src="assets/0566cae6-2bd5-499e-bc09-3784bbf0d2d7.png" style="width:37.17em;height:20.08em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">The Color_button GameObject dragged to the last variable of the Main Controller</div>
<ol start="18">
<li>
<p>Save and test the scene in the editor to see how the button changes color initially and whenever it's pressed.</p>
</li>
</ol>
<ol start="19">
<li>Now, <span class="packt_screen">Build And Run</span> the app in your mobile device and enjoy seeing how the seats come to life in AR:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1601 image-border" src="assets/1af10cc5-713d-4bd7-809b-78abf4b16a82.png" style="width:28.58em;height:14.83em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Mobile phone screenshot with both seats in red</div>
<p>You can move the camera around the seats, get close to them, or move the targets to see them in detail. You can press the color button to switch their texture color. Now that the app is complete, you can even delete the Quad planes from the scene since they are no longer needed. With this, your project is ready.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, you learned how to create an AR catalog using the EasyAR SDK. You learned how to import the SDK into Unity and create a scene showing a cube on an <span class="packt_screen">ImageTarget</span>. Then, you learned how to import models from outside Unity and modify some of their features, such as materials and textures. Then, you merged the models into the initial scene to make a seat come to life from its catalog. Finally, you added a script and UI elements to control the color of the models.</p>
<p>By the end of this chapter, you have acquired the basic skills to continue developing with EasyAR and try out some of its other features. For that, we recommend opening the rest of the sample scenes located at <span class="packt_screen">Assets | Samples | Scenes</span> and try them out to understand how they work. You have also acquired an understanding of how AR can be used to create a catalog, magazine, or similar product for marketing. You can now improve this project in order to, for example, link the products with e-commerce, offering the consumer the full experience and attracting them to buy your products. You can now use basic tools to create your own AR experiences in marketing.</p>
<p>In the next chapter, you will learn how to use another SDK, Vuforia, to place the same seat models in a real environment, instead of using <span class="packt_screen">ImageTargets</span>. You will learn how to use Vuforia's Ground Plane features to place and manipulate 3D models on flat surfaces, such as tables or on the ground, to create an interactive retail experience.</p>


            </article>

            
        </section>
    </body></html>