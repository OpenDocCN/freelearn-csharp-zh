<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">To iOS with Xamarin</h1>
                </header>
            
            <article>
                
<p class="mce-root">In this chapter, we will be looking at these recipes:</p>
<ul>
<li>Installing Visual Studio for Mac</li>
<li>Hello iOS – creating a Xamarin iOS app</li>
<li>Creating the .NET Standard 2.0 library</li>
<li>Putting things together and testing the application</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p>Readers should have a basic knowledge of C#. They should also have a basic knowledge of using Visual Studio, installing packages using NuGet, and referencing libraries within projects from other projects.</p>
<p class="mce-root">The code files for this chapter can be found on GitHub:<br/>
<a href="https://github.com/PacktPublishing/DotNET-Standard-2-Cookbook/tree/master/Chapter08">https://github.com/PacktPublishing/DotNET-Standard-2-Cookbook/tree/master/Chapter08</a></p>
<p class="mce-root">Check out the following video to see the code in action:<br/>
<a href="https://goo.gl/fG1ErJ">https://goo.gl/fG1ErJ</a></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Introduction</h1>
                </header>
            
            <article>
                
<p>Xamarin is a development platform that allows you to build native applications for iOS, Android, and Windows. The most amazing thing about Xamarin is that you can use your existing C# skills to develop these applications. At the beginning, Xamarin was called Xamarin Studio and was used for building applications in both macOS and Windows. Windows users had the extra privilege of using Visual Studio. After its acquisition by Microsoft, Xamarin Studio became Visual Studio for Mac. In this chapter, we will be using Visual Studio for Mac to build our applications, throughout the recipes. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installing Visual Studio for Mac</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will be looking at how to get Visual Studio for Mac and install it. We will also be looking at setting up a few other things.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Make sure you have a Mac to complete this recipe. Currently, I am using macOS High Sierra version 10.13.3. Also make sure you have already installed the latest version of XCode. XCode is required, alongside Visual Studio, for Mac to build iOS applications.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Let's open up your favorite browser.</li>
<li>Type <a href="https://www.xamarin.com/download">https://www.xamarin.com/download</a> in the address bar and press <em>Enter</em>.</li>
<li>You should see a screen similar to this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-818 image-border" src="assets/14a6727e-719b-4e77-8f26-db4c38ef8f09.png" style="width:41.75em;height:35.92em;"/></div>
<ol start="4">
<li>Now, fill in your details and press the <span class="packt_screen">Download VS for Mac Community</span><strong> </strong>button. </li>
<li>This will download a file to the <kbd>Downloads</kbd> directory by default, named  <kbd>VisualStudioForMacInstaller__215259590.1517557727.dmg</kbd> or something similar (the end numbers might change when you download it.)</li>
<li>Double-click on that file.</li>
</ol>
<ol start="7">
<li>You should see a window similar to this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-819 image-border" src="assets/b848f119-fae7-45d4-aa6e-15df9607ae24.png" style="width:17.50em;height:19.50em;"/></div>
<ol start="8">
<li>Double-click on the down arrow. In the next screen, choose the components to be installed:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-820 image-border" src="assets/f10758c4-2865-4038-8080-3b51658ac601.png" style="width:52.33em;height:28.67em;"/></div>
<ol start="9">
<li>Click the <span class="packt_screen">Install</span> button to install all the components. Make sure you have selected <span class="packt_screen">Android</span> and <span class="packt_screen">iOS</span>.</li>
<li>After a successful installation, you should see this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-821 image-border" src="assets/806dfbab-e7ba-4498-b11e-d29730d476fb.png" style="width:42.08em;height:28.58em;"/></div>
<ol start="11">
<li>Now, you can click <span class="packt_screen">Done</span> to exit and start <span class="packt_screen">Visual Studio for Mac</span> to launch the IDE:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-822 image-border" src="assets/7d6ac192-bd59-465e-9f99-0d01c7beca64.png" style="width:59.75em;height:35.50em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Visual Studio for Mac</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>These are simple steps for installing Visual Studio for Mac. In step 8, you should see <span class="packt_screen">Install</span> instead of <span class="packt_screen">Update</span>. This screen appeared because I already have a version of Visual Studio for Mac installed.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Hello iOS – Creating a Xamarin iOS app</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will be creating our first iOS application. This will be a <kbd>Hello World</kbd> type of application. Later on, we will change this application to use a .NET Standard 2.0 library.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Make sure you have completed the previous recipe and installed Visual Studio for Mac. Also, make sure you have XCode installed alongside Visual Studio for Mac.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open <span class="packt_screen">Finder</span>.</li>
<li>Click <span class="packt_screen">Applications</span> in the left-hand pane.</li>
<li>Now, double-click on the Visual Studio icon.</li>
<li>Now, click on the <span class="packt_screen">New Project</span> button.</li>
<li>In the <span class="packt_screen">Choose a template for your project</span> dialog box, scroll down till you reach the <span class="packt_screen">other</span> section.</li>
<li>Select <span class="packt_screen">Miscellaneous</span> and, under <span class="packt_screen">Generic</span>, select <span class="packt_screen">Blank Solution</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><strong><img class="alignnone size-full wp-image-823 image-border" src="assets/a78f2955-3fb0-4626-9a15-e6c05a57b3a5.png" style="width:42.92em;height:31.17em;"/><br/></strong></div>
<ol start="7">
<li>Now, click the <span class="packt_screen">Next</span> button.</li>
<li>In the <span class="packt_screen">Solution Name:</span> textbox, type <kbd>Chapter8.Xamarin</kbd>. Also make sure you have selected a proper location: </li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-824 image-border" src="assets/dd1fadee-247e-46c8-bafd-40b18bbcdc11.png" style="width:52.08em;height:37.83em;"/></div>
<ol start="9">
<li>Now, click <span class="packt_screen">Create</span>.</li>
<li>Now, the <span class="packt_screen">Solution Explorer</span> should look like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-825 image-border" src="assets/1e4a4df0-0a42-4902-b963-9b16fff192f9.png" style="width:25.17em;height:7.42em;"/></div>
<ol start="11">
<li>Now, <em>Ctrl</em> + click on the <span class="packt_screen">Chapter8.Xamarin</span> label and select <span class="packt_screen">Add </span> | <span class="packt_screen">New Project</span>.</li>
<li>Select <span class="packt_screen">App</span> under the iOS section in the left-hand pane and select <span class="packt_screen">Single View App</span> in the right-hand pane.</li>
<li>Make sure <span class="packt_screen">C#</span> is selected as the programming language:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-826 image-border" src="assets/7902ab69-3413-47d6-bc6f-bbebcb8ed5dd.png" style="width:49.67em;height:36.17em;"/></div>
<ol start="14">
<li>Click the <span class="packt_screen">Next</span> button.</li>
<li>The <span class="packt_screen">New Project</span> dialog box will be displayed.</li>
<li>Type <kbd>Chapter8.Xamarin.iOSApp</kbd> in the <span class="packt_screen">App Name:</span> textbox, <kbd>com.chapter8</kbd> in the <span class="packt_screen">Organization Identifier:</span> textbox, and uncheck <span class="packt_screen">iPad</span> from the devices. Leave the <span class="packt_screen">Target:</span> OS as it is:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-827 image-border" src="assets/846187d5-f89a-4900-a60e-2fc279bca039.png" style="width:54.83em;height:39.83em;"/></div>
<ol start="17">
<li>Click <span class="packt_screen">Next</span>.</li>
<li>Leave everything as it is and click <span class="packt_screen">Create</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-828 image-border" src="assets/3d2f89e6-fafc-4c71-bed9-9e5ec24fe000.png" style="width:51.92em;height:37.67em;"/></div>
<ol start="19">
<li>Now, the <span class="packt_screen">Solution Explorer</span> should look like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-829 image-border" src="assets/a3d87b1b-ba63-478d-8234-64268c4298d2.png" style="width:28.58em;height:27.33em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Solution Explorer</div>
<ol start="20">
<li>Now, press the <em>command</em> + <em>return</em> to debug the application or press the Play button on top of the <span class="packt_screen">Solution Explorer</span>.</li>
</ol>
<ol start="21">
<li>Now, you should see the iOS emulator kicking in, which displays the first screen of the app:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-830 image-border" src="assets/fa0a3cf1-187e-4a83-95f8-814cbebff80e.png" style="width:20.08em;height:39.50em;"/></div>
<ol start="22">
<li>Congratulations! You have tested your first iOS application.</li>
<li>Now, stop the debugger by pressing <em>shift</em> + <em>command</em> + <em>return</em>.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In steps 1 to 3, we opened Visual Studio for Mac and, in steps 6 to 9, we created a blank solution. We assigned a proper name to the solution as well. This blank solution will act as the base throughout this chapter. In steps 11 to 18, we added an iOS Single View app to the solution. In step 16, we added an <span class="packt_screen">Organization Identifier</span>, which is a unique identifier for recognizing your app when you deploy to the app store. A single view app is a starter template to help developers build for iOS and has one custom <kbd>ViewController</kbd> to start with. We gave it a proper name too. At the end, in steps 20 to 23, we tested the default template generated by Visual Studio for Mac.</p>
<p>We will come back to this application in a later recipe and add a few controls and some code.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating the .NET Standard 2.0 library</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will be building a .NET Standard 2.0 library using Visual Studio for Mac. We will be using the same solution from the previous recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Make sure you have completed the previous recipe that added an iOS project. If so, let's get started with adding the library and writing some code.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open Finder.</li>
<li>Click <span class="packt_screen">Applications</span> in the left-hand pane.</li>
<li>Now, double-click on the Visual Studio icon.</li>
</ol>
<ol start="4">
<li>Now, click on <span class="packt_screen">Open</span>, locate the <kbd>Chapter8.Xamarin</kbd> solution, and open it.</li>
<li>The <span class="packt_screen">Solution Explorer</span> should look like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-831 image-border" src="assets/19ceee1b-11ea-491d-82fe-deef98f4065f.png" style="width:27.83em;height:26.58em;"/></div>
<ol start="6">
<li>Now, <em>control (^)</em> + click on the <kbd>Chapter8.Xamarin</kbd> label and select <span class="packt_screen">Add</span> | <span class="packt_screen">New Project</span>.</li>
<li>In the <span class="packt_screen">New Project</span> dialog box, scroll down the left-hand pane till you see the <span class="packt_screen">Multi Platform</span> section.</li>
</ol>
<ol start="8">
<li>Click on <span class="packt_screen">Library</span> and select <span class="packt_screen">.NET Standard Library</span> under <span class="packt_screen">General</span> in the right-hand pane. Also make sure <span class="packt_screen">C#</span> is selected:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-832 image-border" src="assets/ad785431-3e8c-48a9-907c-14fb3dd26ede.png" style="width:47.92em;height:34.83em;"/></div>
<ol start="9">
<li>Click <span class="packt_screen">Next</span>.</li>
<li>Select <span class="packt_screen">Target Framework:</span> as <span class="packt_screen">.NET Standard 2.0</span> and click <span class="packt_screen">Next</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-833 image-border" src="assets/baf09ab9-1b2e-42f0-b6ae-9e2f442746f6.png" style="width:48.42em;height:35.08em;"/></div>
<ol start="11">
<li>In the <span class="packt_screen">Project Name:</span> textbox, type <kbd>Chapter8.Xamarin.iOSLib</kbd> as the name and leave the rest:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-834 image-border" src="assets/48bd28d9-b5d8-4753-9dee-3502097e6a8a.png" style="width:47.50em;height:34.50em;"/></div>
<ol start="12">
<li>Click <span class="packt_screen">Create</span>.</li>
</ol>
<ol start="13">
<li>Now, the <span class="packt_screen">Solution Explorer</span> should look like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-836 image-border" src="assets/3f3a1b99-45b9-4af9-8133-6492e7c0b7d5.png" style="width:23.67em;height:28.08em;"/></div>
<ol start="14">
<li>Select the <kbd>Class1.cs</kbd> label and press <em>command</em> + <em>R</em> to rename.</li>
<li>Rename it <kbd>HelloLib.cs</kbd>.</li>
<li>Make sure you change the class name as well from <kbd>Class1</kbd> to <kbd>HelloLib</kbd>.</li>
<li>Now, inside the <kbd>HelloLib</kbd> class, add the following code:</li>
</ol>
<pre><span><span>      public</span><span> </span><span>string</span><span> </span><span>SayHello</span><span>(</span><span>string</span><span> </span><span>yourName</span><span>)</span><br/><span>      {</span><br/><span>          return</span><span> </span><span>$"</span><span>Hello </span><span>{</span><span>yourName</span><span>}</span><span>, Greetings from iOS</span><span>"</span><span>;</span><br/><span>      }</span></span></pre>
<ol start="18">
<li>Click <span class="packt_screen">Build</span> | <span class="packt_screen">Build All</span> to check that all syntax is correct.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p class="mce-root">In steps 1 to 4, we opened the solution we created in the previous recipe. In steps 6 to 12, we added a .NET Standard 2.0 library to the solution. Now, the solution has two projects, an iOS project and a .NET Standard 2.0 library project. In steps 14 to 16, we renamed the class created by Visual Studio. We also renamed the actual class name to match the file name.</p>
<p>In step 17, we added a public method that takes a <kbd>string</kbd> parameter and returns a string as a welcome message. Finally, we performed a quick build to check for the correct syntax.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Putting things together and testing the application</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will be adding some controls to the iOS application and using the .NET Standard 2.0 library created in the previous recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Make sure you have completed the previous two recipes. They are required in order to continue. If you have already completed them, let's perform a quick build and start.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open Finder.</li>
<li>Click <span class="packt_screen">Applications</span> in the left-hand pane.</li>
<li>Double-click on the Visual Studio icon.</li>
<li>Click on <span class="packt_screen">Open</span>, locate the <kbd>Chapter8.Xamarin</kbd> solution, and open it.</li>
</ol>
<ol start="5">
<li>The <span class="packt_screen">Solution Explorer</span> should look like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-837 image-border" src="assets/3e93c5d9-975e-4daf-8a02-c9d419caee84.png" style="width:23.42em;height:27.83em;"/></div>
<ol start="6">
<li>Now, expand the <kbd>Chapter8.Xamarin.iOSApp</kbd> project node.</li>
<li>Double-click on the <kbd>Main.storyboard</kbd> file.</li>
<li>This will open the storyboard tab for your application.</li>
</ol>
<ol start="9">
<li>You should see the default layout of the iOS application as follows:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-838 image-border" src="assets/550a0a06-9990-46db-8536-d1b3cbdda88a.png" style="width:57.50em;height:34.17em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Default layout of the iOS application</div>
<ol start="10">
<li>Now, select the <span class="packt_screen">Toolbox</span> window.</li>
<li>Click inside the <kbd>search</kbd> textbox and type <kbd>Button</kbd>.</li>
<li>Now, drag a <span class="packt_screen">Button</span> control to the main white area of the canvas, in the middle.</li>
<li>Select the button. In the <span class="packt_screen">Properties</span> window, type <kbd>Say Hello</kbd> under the <span class="packt_screen">Title</span> label and type <kbd>HelloButton</kbd> in the <span class="packt_screen">Name</span> property.</li>
</ol>
<ol start="14">
<li>Now, your canvas should look like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-839 image-border" src="assets/dda17003-4a1c-4c10-8cf5-d19cf1f78f45.png" style="width:25.83em;height:36.08em;"/></div>
<ol start="15">
<li>Now, in the <span class="packt_screen">Solution Explorer</span>, <em>control (^)</em> + click on the <span class="packt_screen">References</span> label and select <span class="packt_screen">Edit References</span>.</li>
<li>In the <span class="packt_screen">Edit References</span> dialog box, click on the <span class="packt_screen">Projects</span> tab.</li>
</ol>
<ol start="17">
<li>Check <kbd>Chapter8.Xamarin.iOSLib</kbd> in the list and click <span class="packt_screen">OK</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-840 image-border" src="assets/985fa586-af0d-4e88-9397-bd7f5eba14a0.png" style="width:51.17em;height:23.67em;"/></div>
<ol start="18">
<li>Now, double-click on the <kbd>VeiwController.cs</kbd> file to open its code.</li>
<li>Scroll up till you reach the <kbd>using</kbd> directives and add the following <kbd>using</kbd> directive to access the library:</li>
</ol>
<pre><span>      using Chapter8.Xamarin.iOSLib;<span><br/></span></span></pre>
<ol start="20">
<li>Now, scroll down till you reach the <kbd>ViewDidLoad()</kbd> method.</li>
<li>Add the following code next to the <kbd>base.ViewDidLoad()</kbd> line:</li>
</ol>
<pre><span><span>      HelloButton.TouchUpInside += (object sender, EventArgs e) =&gt;<br/>      {<br/>          var greetings = new HelloLib();<br/>          var message = greetings.SayHello("Fiqri Ismail");<br/><br/>          //Create an alert box    <br/>          var greetingsAlert = UIAlertController.Create("Hello", <br/>              message, UIAlertControllerStyle.Alert);<br/>          greetingsAlert.AddAction(UIAlertAction.Create("OK", <br/>              UIAlertActionStyle.Default, null));<br/><br/>          PresentViewController(greetingsAlert, true, null);<br/>       };</span></span></pre>
<ol start="22">
<li>Now, let's press <em>command</em> + <em>return</em> to debug the application.</li>
<li>You should see the following output:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-841 image-border" src="assets/52649291-6cf4-4086-864c-c20a000cd5bc.png" style="width:18.25em;height:35.92em;"/></div>
<ol start="24">
<li>Now click on the <span class="packt_screen">Say Hello</span> button:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-842 image-border" src="assets/4af51ea2-746b-4464-8710-19e027003a9d.png" style="width:20.67em;height:40.58em;"/></div>
<ol start="25">
<li>Now, click <span class="packt_screen">OK</span> and stop debugging.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In steps 1 to 6, we opened an existing project solution. In steps 10 to 13, we added a simple button control to the canvas. After that, we changed the <span class="packt_screen">Title</span> and <span class="packt_screen">Name</span> properties of the button. In step 17, we added the reference to the library from the iOS project. Again, in step 19, we added a reference to the .NET Standard library from the code level.</p>
<p>In step 21, we added code to trigger the button touch up event. This event triggers when you touch and move up your finger on an actual device, but in the emulator it triggers when you click the button. We added the code inside the <kbd>ViewDidLoad()</kbd> method. This method triggers after the View is loaded. In the first two lines of the code, we created an instance of the <kbd>HelloLib</kbd> class from the library. Then, we executed the <kbd>SayHello</kbd> method and saved the return value in a variable.</p>
<p>Then, we created an alert box to display the <span class="packt_screen">Calcutta</span> message with an <span class="packt_screen">OK</span> button. Finally, in steps 23 and 24, we tested the iOS application we had just built.</p>
<p> </p>


            </article>

            
        </section>
    </body></html>