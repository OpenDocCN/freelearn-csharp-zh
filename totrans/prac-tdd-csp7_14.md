# 更好的起点

你已经到达了《使用 C# 7 进行实用测试驱动开发》的最后一章。我们感谢你。但是，你作为**测试驱动开发**（**TDD**）实践者的旅程才刚刚开始。很快，你将有机会以 TDD 专家的身份重新加入世界。

在本章中，我们将总结前几章的主要主题，并给你一些指导，帮助你继续这次航行。在本章中，我们将了解：

+   为什么 TDD 很重要

+   通过测试来增长应用程序

+   将 TDD 引入你的团队

+   以 TDD 专家的身份重新加入世界

# 我们所涵盖的内容

你可能还不是专家。这没关系。有时你可能会遇到困难或怀疑 TDD 的好处。不用担心。阅读这本书只是成为 TDD 大师旅程中的一步。这条路很长，但值得你投入时间和精力。你是一位专业人士，一位致力于自己行业的工匠。

到现在为止，你应该对自己的开发环境设置感到自信。你可以配置你选择的 IDE 来运行你的单元测试套件。你应该对选择测试运行器和该选择所涉及的具体细微差别和功能感到舒适。当然，你知道如何组装一套全面的单元测试。

你可以通过测试来引导应用程序的生长。现在重构应该变得轻而易举，因为你有了信心在不引入破坏性更改的情况下移动代码。你可以向应用程序的利益相关者展示正确性，并且通过你的测试提供了对回归错误的信心。

在 TDD 领域，世界是完美的。你会 wonder 你是如何在没有你新获得的知识的情况下生活的。让我们花点时间回顾一下我们学到了什么。

# 前进之路

那么，接下来你该怎么做呢？希望你对 TDD 的热情和你第一次成功编译软件应用程序时一样。每一次成功的测试都是你辛勤工作和对当前问题理解的证明。为每一次小的胜利欢呼，因为这是你的成就。通过在测试中引入越来越多的功能来验证你的理解。

在你继续职业生涯的过程中，选择以 TDD 的方式操作取决于你。遵守这一哲学以及你保持 TDD 心态的好坏完全取决于你。如果你的老板不熟悉 TDD，不要气馁。你不需要许可。

继续通过测试来增长应用程序。如果别人询问 TDD，分享你的知识和热情。向你的团队引入这一实践，但不要强迫那些尚未准备好的人。

# TDD 是一种个人实践

首先，TDD 是一种个人实践。它不应该是任何人预算上的一个条目。TDD 是那些深深关心自己工艺的人开发高质量软件的方式。

如果你怀疑你可能会从你的团队、经理或项目赞助者那里得到反对，那么没有必要让他们参与以这种方式开发软件的决定。

通常，让开发团队知道系统中存在测试以避免破坏它们是更好的，但并不一定需要寻求许可。

你不需要任何人的许可来做好的工作。

# 你不需要许可

如果你在一个原本不是这样开始的项中引入 TDD，你可能会被问及谁给了你这样做许可。你不需要任何人的许可来做好的工作。TDD 是一种个人实践，以确保你交付高质量的软件。你不需要任何人的许可来做这件事。

为你的工作感到自豪，尽你所能做到最好。随着你成长并对 TDD 更加舒适，它很可能会成为你交付软件的默认方法。

# 通过测试来增长应用

容易陷入**大设计前期**的陷阱。这些设计会议很重要，但会议产生的成果是探索性的想法，而不是逐字逐句的攻击计划。应用应该通过你，开发者所编写的测试来有机地增长。

在开发绿色字段应用时，使用 TDD 开始要容易得多。从一开始就考虑测试的设计要容易得多，而不是在以后尝试重新设计测试。如果你的应用从一开始就考虑测试，那么将受益匪浅。在测试的指导下，你的软件将更简单，更容易增长和维护。

假设需求和期望已经明确定义，增强功能可以通过测试轻松添加到系统中。如果一个用户故事已经很好地定义，那么需求可以轻松地转化为一系列新的测试。随后，可以通过使新测试通过来轻松地将新的生产代码添加到系统中。假设有一个现有的全面的单元测试套件，引入新缺陷或更改现有行为的恐惧应该是最小的。

缺陷可以在发现时解决。只需编写一个或多个测试来定义预期的行为，并在进行中修改生产代码。可能会发现更多缺陷，或者现有的行为，以及由此产生的现有测试可能需要更改。不用担心，测试套件在那里是为了防止错误，并给你，开发者，一种安全感。

# 向你的团队引入 TDD

到目前为止，你可能非常兴奋地想要与你的组织和你所在的团队成员分享 TDD 的奇妙世界。请注意，其他人可能没有同样的热情。对于从未尝试过的人来说，编写单元测试可能是一个令人畏惧的建议。对于你团队中的某些人来说，这个想法可能有一些负面含义。

作为开发者，我们被付薪水的目的是成为专家。我们被期望有答案。当引入新事物和未知事物时，这可能是一种令人焦虑的经历。努力减少团队在学习新事物时可能感到的焦虑。记住当你听到 TDD 这个术语而不知道从何开始时的感受。想想你在拿起这本书之前的感觉。

向团队介绍 TDD（测试驱动开发）有好的方法，也有不那么好的方法。如果你真的希望你的团队能够采纳这种实践，那么考虑一下如何让他们对这种前景感到兴奋。

# 不要强迫任何人使用 TDD

与向团队介绍 TDD 相关的无数悲惨故事。一个过于热情的成员试图把 TDD 的优点强加给其他团队成员。项目领导者可能会反对，并试图完全禁止这个过程。

如果一个团队决定整体采纳这种实践，确保每个团队成员都有发言权。每个人的意见都很重要。如果团队成员不支持，队友可能会退缩，甚至可能离开项目或公司。

# TDD 的趣味化

通过将过程游戏化，让新团队接触 TDD 是一个很好的方法。慢慢地介绍这个主题，让人们对新技能的学习前景感到兴奋。为团队创造友好的竞争或挑战。

午餐和学习会是一个介绍主题的好方法。YouTube 和 Pluralsight 等网站上有很多视频教程，这对你的团队来说可以是一个很好的介绍和社交分享活动。

代码 Kata（编程练习）是让某人接触 TDD 的极好方式。这些 20 分钟的简短练习足够简单，可以让人们熟悉基本原理。随着成员对练习越来越熟悉，逐渐引入更多复杂性和不同的挑战。

代码挑战和/或家庭作业可能是让团队参与的好方法。你应该对谁在什么情况下工作得最好有所了解。有些人可能更喜欢家庭作业和独立工作，而其他人可能对个人挑战更有反应。

# 展示团队的好处

你最好的选择是慢慢地引入测试。如果你正在努力解决缺陷，考虑用测试包裹现有的方法或函数以验证缺陷。修正代码以允许新测试通过。与你的队友分享你的结果。解释这个过程有多容易，以及可能节省了多少时间和精力。不要施加压力，只需告知即可。

在现有应用程序中添加新功能是探索 TDD 与团队一起的好时机。如果你能向同事展示如何使用 TDD 在现有应用程序中开发新功能，这可能很有用。在开发者熟悉的应用程序中引入 TDD 这样的新概念可能更容易。在熟悉的应用程序中，未知因素被降至最低，焦点可以放在 TDD 上。

如果你开始了一个新的项目，为了使用 TDD 开发这个应用程序的一部分，可能有益于承担这个应用程序的一部分。如果至少有一部分应用程序是用 TDD 开发的，那么可以用它来向团队中的其他人展示基础知识。使用这个应用程序的这部分作为例子，你可能会说服其他人探索将 TDD 扩展到应用程序的其余部分。

一定要跟踪进度。你可能会发现，个人或应用程序的部分更适合 TDD。如果有人遇到困难，他们可能很难承认自己的问题。留心观察，并在可能的情况下提供帮助。

# 审查结果

当向团队介绍 TDD 时，要准备好解决与 TDD 新手经常相关的问题。会编写一些无用的测试，它们没有任何价值。寻找这些和其他问题在测试套件中。

如果你的团队目前没有使用拉取请求或代码审查，现在是一个引入这一实践的好时机。养成审查所编写测试的习惯。这将有助于发现任何潜在的问题点。这也带来了额外的益处，即更多地了解你可能不熟悉的系统部分。

如果你正在处理一个现有项目，或者任何你能够控制的新的功能，首先使用 TDD 来开发这个功能。如果你有代码审查流程，确保审查者知道，并向他们展示通过测试。

# 重新以 TDD 专家的身份加入世界

现在是时候以 TDD 专家的身份重新加入世界了。如果你还没有完全觉得自己像专家，不要担心。你很可能比至少一个同事或同行知道得多。对他们来说，你是拥有可以分享的知识的专业人士。去分享那些知识吧。但记住，总有更多东西可以学习。

# 寻找一个导师

寻找一个或多个导师可能是有益的。在你所在的社区中，可能有人了解 TDD，并愿意与你交谈。他们可能是你公司的员工，也可能是你所在城市的技术社区成员。找到他们，并提议请他们吃午餐或喝咖啡。你可能会发现，他们很高兴找到愿意并渴望讨论 TDD 作为一种实践的人。

用户组和聚会是建立人脉的好地方。寻找你所在地区可以参加的会议。近年来，TDD（测试驱动开发）已经成为一个热门话题，你很可能找到附近的会议。编程语言可能与你的日常使用不同（例如，Java 与 C#），但整体原则可能是有益的。此外，接触新的不同语言有助于你探索你可能不熟悉的范式。

Twitter 现在是另一个极好的资源。如今活跃在 Twitter 和其他社交媒体上的技术专业人士数量令人震惊。以前从未有过与行业巨头交谈的可能。不要害怕在 Twitter 和其他平台上联系技术专家，并表达你获取知识的兴趣。你可能会对你的回应感到惊讶。

# 成为导师

与寻找导师一样，你也可以考虑成为导师。成为导师的场所同样适用。通过教学你会学到更多。与他人分享你的知识，并从你所教授的人那里学到同样多的东西。

用户组和聚会总是希望有人来演讲。考虑准备一个演示文稿，分享你对 TDD 的兴趣。这可以是 5 到 15 分钟的闪电演讲，一个小时的演讲，或者一整天的研讨会。

# 练习，练习，再练习

医生和律师之所以将他们所做的事情定义为“实践”，是有原因的。像这些职业一样，计算机程序员完全沉浸在软件开发实践中。这是一种需要练习的实践。

养成每天花前 20 分钟做不同 Code Kata 的习惯。使用 TDD 解决一个新的谜题。用新的或不同的技术解决你以前解决的问题。尝试不同的方法来开发解决方案。在你的技艺上花时间，并训练自己寻找可测试和可验证的替代解决方案。

审查你的工作。确保你真正是通过测试来推动你的应用程序开发。核实你实际上是在测试你的应用程序，而不仅仅是走形式。

最重要的是，享受乐趣！

# 摘要

我们的旅程已经结束，但不要害怕。你现在已经准备好作为一个 TDD 大师进入这个世界。

你不仅理解了如何以 TDD 心态进行开发，你还知道为什么 TDD 对于开发可测试、可扩展和可维护的软件应用如此重要。你的 IDE 已经设置好以测试 C#和/或 JavaScript 应用程序，并且你对软件质量有一个持续的反馈循环。

你理解了定义和测试应用程序边界的的重要性，以及抽象化第三方代码（包括.NET 框架）的好处。间谍、模拟和伪造，以及如何最好地使用它们，现在已经被充分理解。

使用 TDD 来接近绿色田野应用程序，现在应该几乎是一件微不足道的事情。将整体应用程序的更广泛问题分解成可以独立开发的具有意义的块。你已经学习了不同的应用程序开发方法，例如：从前到后、从后到前和从内到外。选择最合适的方法。

使用 TDD 将需求和要求故事转换为工作软件应该是一件轻而易举的事情！利用你已掌握的所有技能来测试边界，测试小的、独立的单元。

抽象化第三方库，包括.NET 框架。移除对诸如`DateTime`和 Entity Framework 之类的依赖。你已经学会了如何将你的应用与特定的实现解耦，以便你的应用可测试，同时也更加灵活，并且在未来更容易修改。

当需求发生变化时会发生什么？如果发现了一个错误会发生什么？没问题，更改一个测试或编写一个新的测试来覆盖新的需求或防御已发现的错误。然后，编写一些新的代码或更改一些现有的代码，以确保所有新的/修改后的测试通过。如果你做得正确，你应该可以放心地做出这些更改，因为我们的现有测试套件将防止你引入新的错误。

现在市面上有很多应用缺乏足够的（任何？）测试覆盖率。甚至更少的应用是按照测试优先的原则编写的。你现在已经意识到，那些没有考虑到可测试性的遗留应用存在的一些主要问题，并且知道如何最好地纠正这些问题。

你知道如何安全地修改一个没有考虑到测试的遗留应用，并且知道如何添加测试以最小化在修改现有代码时引入新错误的可能性。

记住，TDD（测试驱动开发）是一个个人选择。你不需要任何人的许可来做好的工作。现在，以 TDD 专家的身份重新加入世界吧！
