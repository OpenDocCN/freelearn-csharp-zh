<html><head></head><body><div class="chapter" title="Chapter&#xA0;4.&#xA0;Views">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h1 class="title"><a id="ch04"/>&#13;
 Chapter 4. Views</h1>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>Views are the actual output of the application that is delivered to the user. It is what they actually see when they access your application from the screen. All the components, be it menus, input elements, dialog boxes, and everything the user sees comes from your Views only. If you do not provide good user experience when accessing your application, users will not care how great your application is. So, Views play a critical role when building an ASP.NET MVC application.</p>&#13;
<p>In this chapter, we'll cover the following topics:</p>&#13;
<div class="itemizedlist">&#13;
<ul class="itemizedlist">&#13;
<li class="listitem">The purpose of View Engine and Razor View Engine</li>&#13;
<li class="listitem">Programming in Razor View Engine and different programming constructs</li>&#13;
<li class="listitem">Layout in ASP.NET Core and its features</li>&#13;
<li class="listitem">HTML Helpers</li>&#13;
<li class="listitem">Partial Views</li>&#13;
<li class="listitem">Tag Helpers</li>&#13;
</ul>&#13;
</div>&#13;
<div class="section" title="The View engine and the Razor View engine">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h1 class="title"><a id="ch04lvl1sec30"/>&#13;
 The View engine and the Razor View engine</h1>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>As discussed in <a class="link" title="Chapter 1. Introduction to ASP.NET Core" href="text00014.html#page">Chapter 1</a>&#13;
 , <span class="emphasis">&#13;
<em>Introduction to ASP.NET Core</em>&#13;
</span>&#13;
 , a browser can only understand HTML, CSS, and JavaScript. The purpose of the View engine is to generate the HTML code from your View and send it to the browser so that it can understand the content. Primarily, there are two different types of View engines—Razor View engine and Webform View engine. Although these two View engines come out of the box with ASP.NET MVC, you can use any custom View engine.</p>&#13;
<div class="section" title="Razor View engine">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h2 class="title"><a id="ch04lvl2sec25"/>&#13;
 Razor View engine</h2>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>The Razor View engine is the default and recommended View engine in ASP.NET Core, and going forward, this may be the only View engine coming out of the box when you install ASP.NET MVC.</p>&#13;
<p>You can mix a C# code and HTML code in your Razor View and the Razor View engine is intelligent enough to distinguish between these two and generate the expected output. In some scenarios, we may have to give additional information to Razor View to produce the appropriate results. Razor code blocks start with the <code class="literal">@</code>&#13;
 symbol and do not require a closing <code class="literal">@</code>&#13;
 .</p>&#13;
<div class="section" title="Programming in Razor View engine">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h3 class="title"><a id="ch04lvl3sec14"/>&#13;
 Programming in Razor View engine</h3>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>Programming in Razor View engine is just like you program in C#. The difference is that, in Razor View engine, your C# code will get mixed with HTML to produce the desired HTML output.</p>&#13;
</div>&#13;
<div class="section" title="Variables in Razor View">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h3 class="title"><a id="ch04lvl3sec15"/>&#13;
 Variables in Razor View</h3>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>You can declare a variable inside the razor block and use that variable using the <code class="literal">@</code>&#13;
 symbol.</p>&#13;
<div class="note" title="Note">&#13;
<h3 class="title"><a id="note4"/>&#13;
 Note</h3>&#13;
<p>For all the examples in this chapter, we will only present the code samples of the view.</p>&#13;
</div>&#13;
<p>Let's discuss this with an example.</p>&#13;
<div class="orderedlist">&#13;
<ol class="orderedlist arabic">&#13;
<li class="listitem" value="1">Create a <code class="literal">Controllers</code>&#13;
 folder and a Controller called <code class="literal">HomeController</code>&#13;
 .</li>&#13;
<li class="listitem" value="2">Create a folder called <code class="literal">Views</code>&#13;
 , a subfolder called <code class="literal">Home</code>&#13;
 , and a View file called <code class="literal">Index.cshtml</code>&#13;
 by right-clicking the context menu and selecting <span class="strong">&#13;
<strong>Add</strong>&#13;
</span>&#13;
 | <span class="strong">&#13;
<strong>New Item</strong>&#13;
</span>&#13;
 and then <span class="strong">&#13;
<strong>MVC Razor View</strong>&#13;
</span>&#13;
 from the list.</li>&#13;
</ol>&#13;
<div style="height:10px; width: 1px"/>&#13;
</div>&#13;
<p>The <code class="literal">HomeController.cs</code>&#13;
 file will have following code:</p>&#13;
<pre class="programlisting">public class HomeController : Controller
{
  // GET: /&lt;controller&gt;/
  public IActionResult Index()
  {
    return View();
  }
}</pre>&#13;
<p>Next is the updated Razor View where we will declare a variable and use it. The first five lines and the last two lines are simple HTML elements.</p>&#13;
<p>We will concentrate on the lines that are bold. Then, we will create a Razor block using <code class="literal">@</code>&#13;
 { … } and declaring a variable inside it. The Razor block ends with the closing curly bracket. The snippet <code class="literal">Value:</code>&#13;
 is considered as simple HTML text. As we would like to use the razor variable value, we will use <code class="literal">@i</code>&#13;
 to instruct the Razor View engine that <code class="literal">i</code>&#13;
 is not a normal HTML text; and it is a Razor construct and is to be treated accordingly. The complete HTML code is as follows:</p>&#13;
<pre class="programlisting">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt; Views demo&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
<span class="strong">
<strong>    @{</strong>&#13;

</span>&#13;


<span class="strong">
<strong>       int i = 5;
</strong>&#13;

</span>&#13;


<span class="strong">
<strong>     }
</strong>&#13;

</span>&#13;

     Value: @i 
  &lt;/body&gt;
&lt;/html&gt;</pre>&#13;
<p>When you run the application, you'll see the following output:</p>&#13;
<div class="mediaobject"><img src="Image00042.jpg" alt="Variables in Razor View"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>Please note that when you access the razor variable, you will need to use the <code class="literal">@</code>&#13;
 symbol. Without this, Razor View engine sees the <code class="literal">i</code>&#13;
 as text and not as an expression.</p>&#13;
<p>The following screenshot is the result you will get when you access the variable without <code class="literal">@</code>&#13;
  symbol:</p>&#13;
<div class="mediaobject"><img src="Image00043.jpg" alt="Variables in Razor View"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<div class="section" title="The for loop">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h4 class="title"><a id="ch04lvl4sec0"/>&#13;
 The for loop</h4>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>You can use most of the programming constructs available in C# in Razor View. The following piece of code is the <code class="literal">for</code>&#13;
 loop construct where we loop through five times and print the variable name:</p>&#13;
<pre class="programlisting">@{
   for (int i = 0; i &lt; 5; i++)
   {
     &lt;li&gt;@(i+1)&lt;/li&gt;
   }
 }</pre>&#13;
<p>The following are a few points to be noted:</p>&#13;
<div class="itemizedlist">&#13;
<ul class="itemizedlist">&#13;
<li class="listitem">As the for loop is a razor code, we should enclose the loop with the <code class="literal">@</code>&#13;
 symbol to indicate that the code that follows is a Razor code and not normal HTML.</li>&#13;
<li class="listitem">Whenever we use an HTML element or tag, Razor View engine falls back to HTML mode. If you want to use any Razor expression within the HTML tags, you will want to include the <code class="literal">@</code>&#13;
 symbol again to tell the Razor View engine that whatever follows is a Razor code and not an HTML element. This is the reason we use the <code class="literal">@</code>&#13;
 symbol again in the preceding expression, even within the parent root-level razor code.</li>&#13;
</ul>&#13;
</div>&#13;
<p>The complete code for the View is as follows:</p>&#13;
<pre class="programlisting">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt; Views demo&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;ul&gt;
    @{
       for (int i = 0; i &lt; 5; i++)
       {
         &lt;li&gt;@(i+1)&lt;/li&gt;
       }
     }
    &lt;/ul&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>&#13;
</div>&#13;
<div class="section" title="The while loop">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h4 class="title"><a id="ch04lvl4sec1"/>&#13;
 The while loop</h4>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>The following piece of code is the <code class="literal">while</code>&#13;
 loop implementation for the same loop. Please note that the emboldened expressions increment the variable i. We will not use the @ symbol as it is not within the HTML element:</p>&#13;
<pre class="programlisting">@{
   int i = 0;
   while(i&lt;5)
   {
     &lt;li&gt;@(i + 1)&lt;/li&gt;
<span class="strong">
<strong>     i++;
</strong>&#13;

</span>&#13;

   }
 }</pre>&#13;
</div>&#13;
<div class="section" title="The foreach loop">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h4 class="title"><a id="ch04lvl4sec2"/>&#13;
 The foreach loop</h4>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>The <code class="literal">foreach</code>&#13;
 loop in Razor View is the same as the <code class="literal">foreach</code>&#13;
 loop in C#. In the following code, we will initialize a list of integers, iterate through the list and print it as a list item:</p>&#13;
<pre class="programlisting">&lt;ul&gt;
  @{
     List&lt;int&gt; integers = new List&lt;int&gt;
     {
       1,2,3,4,5
     };
     foreach (int i in integers)
     {
       &lt;li&gt;@i&lt;/li&gt;
     }
   }
&lt;/ul&gt;</pre>&#13;
</div>&#13;
<div class="section" title="The if condition">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h4 class="title"><a id="ch04lvl4sec3"/>&#13;
 The if condition</h4>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>In the following code, we will check if the value of the variable is less than 10. If it is less than 10, we will print <code class="literal">i is less than 10</code>&#13;
 , otherwise, we will say <code class="literal">i is greater than 10</code>&#13;
 . You may wonder why we have to include the <code class="literal">text</code>&#13;
 tag and what its purpose is. As we are inside the Razor View code block, the text <code class="literal">i is less than 10</code>&#13;
 will be considered as Razor expression, but it is not.</p>&#13;
<p>This <code class="literal">text</code>&#13;
 tag is to instruct the Razor View engine that whatever follows the <code class="literal">text</code>&#13;
 tag is to be considered as a text and not as a Razor expression:</p>&#13;
<pre class="programlisting">@{
   int i = 5;
   if (i &lt; 10)
   {
     &lt;text&gt;i is less than 10&lt;/text&gt;
   }
   else
   {
     &lt;text&gt;i is greater than 10&lt;/text&gt;
   }
 }</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;

<div class="section" title="Layout">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h1 class="title"><a id="ch04lvl1sec31"/>&#13;
 Layout</h1>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>In all the previous examples we discussed, we have done the complete View coding in a single file. This will result in a lack of flexibility and reduced reusability.</p>&#13;
<p>Consider the following web page structure where the <span class="strong">&#13;
<strong>Top Section</strong>&#13;
</span>&#13;
 contains the company logo or banner and the <span class="strong">&#13;
<strong>Side Section</strong>&#13;
</span>&#13;
 contains the links to various sections of the site. The <span class="strong">&#13;
<strong>Content Section</strong>&#13;
</span>&#13;
 changes for every page.</p>&#13;
<div class="mediaobject"><img src="Image00044.jpg" alt="Layout"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>If we code the complete content in a single view, we may have to duplicate the <span class="strong">&#13;
<strong>Top Section</strong>&#13;
</span>&#13;
 and <span class="strong">&#13;
<strong>Side Section</strong>&#13;
</span>&#13;
 in every page. If we want to change anything in the <span class="strong">&#13;
<strong>Side Section</strong>&#13;
</span>&#13;
 , we will have to change all the files. This clearly shows that a single View file is not the best solution.</p>&#13;
<p>The layout comes to the rescue in this scenario. The layout defines the site structure that can be reused across all the web pages. The layout does not even need to have something like the top section or side section; it can contain even a simple HTML structure where you can have common content and the body content will be rendered from individual view.</p>&#13;
<p>Let's build our first layout. In order to use the layout, you will need to have the following three things:</p>&#13;
<div class="orderedlist">&#13;
<ol class="orderedlist arabic">&#13;
<li class="listitem" value="1">Inform the name of the layout file—this information should be made available in <code class="literal">_ViewStart.cshtml</code>&#13;
 . By convention, the names of all the shared files will start with an underscore and this file is located directly under the <code class="literal">Views</code>&#13;
 folder.</li>&#13;
<li class="listitem" value="2">Create the Layout file—by convention, the name of the file is <code class="literal">_Layout.cshtml</code>&#13;
 and it will be located in the <code class="literal">Shared</code>&#13;
 folder. All the shared content, such as partial views, will also be available here. Partial Views will be discussed later in this chapter.</li>&#13;
<li class="listitem" value="3">Create the content View file—this View file is almost same as the earlier View files that we created so far with only one difference; only page-specific content will be available in this file, and this means that you'll not have any <code class="literal">html</code>&#13;
 , <code class="literal">head</code>&#13;
 , or <code class="literal">title</code>&#13;
 tags here.<div class="mediaobject"><img src="Image00045.jpg" alt="Layout"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
</li>&#13;
</ol>&#13;
<div style="height:10px; width: 1px"/>&#13;
</div>&#13;
<p>After the creation of <code class="literal">_ViewStart.cshtml</code>&#13;
 , <code class="literal">_Layout.cshtml</code>&#13;
 , and page-specific View files, the folder structure will be like the preceding snapshot.</p>&#13;
<div class="section" title="Creating _ViewStart.cshtml">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h2 class="title"><a id="ch04lvl2sec26"/>&#13;
 Creating _ViewStart.cshtml</h2>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>Right-click on the <span class="strong">&#13;
<strong>Views</strong>&#13;
</span>&#13;
 folder and select <span class="strong">&#13;
<strong>Add New Item</strong>&#13;
</span>&#13;
 from the <span class="strong">&#13;
<strong>Context</strong>&#13;
</span>&#13;
 menu. Then, select <span class="strong">&#13;
<strong>MVC View Start Page</strong>&#13;
</span>&#13;
 from the <span class="strong">&#13;
<strong>Add New Item</strong>&#13;
</span>&#13;
 dialog box as shown in the following screenshot:</p>&#13;
<div class="mediaobject"><img src="Image00046.jpg" alt="Creating _ViewStart.cshtml"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>When you click the <span class="strong">&#13;
<strong>Add</strong>&#13;
</span>&#13;
 button, it will create a file with the following content:</p>&#13;
<pre class="programlisting">@{
   Layout = "_Layout";
 }</pre>&#13;
</div>&#13;
<div class="section" title="Creating _Layout.cshtml">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h2 class="title"><a id="ch04lvl2sec27"/>&#13;
 Creating _Layout.cshtml</h2>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>Create a folder called <span class="strong">&#13;
<strong>Shared</strong>&#13;
</span>&#13;
 within the <span class="strong">&#13;
<strong>Views</strong>&#13;
</span>&#13;
 folder. Then, right-click on the <span class="strong">&#13;
<strong>Shared</strong>&#13;
</span>&#13;
 folder and select <span class="strong">&#13;
<strong>Add New Item</strong>&#13;
</span>&#13;
 from the <span class="strong">&#13;
<strong>Context</strong>&#13;
</span>&#13;
 menu as shown in the following screenshot:</p>&#13;
<div class="mediaobject"><img src="Image00047.jpg" alt="Creating _Layout.cshtml"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>When you click the <span class="strong">&#13;
<strong>Add</strong>&#13;
</span>&#13;
 button, it will create <span class="strong">&#13;
<strong>_Layout.cshtml</strong>&#13;
</span>&#13;
 with the following content:</p>&#13;
<pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta name="viewport" content="width=device-width" /&gt;
&lt;title&gt;@ViewBag.Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div&gt;
<span class="strong">
<strong>@RenderBody()
</strong>&#13;

</span>&#13;


&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>&#13;
<p>The preceding layout file is a simple HTML content with a couple of Razor expressions. <code class="literal">@ViewBag</code>&#13;
 . The title is used to display the title information passed from the Controller and <code class="literal">@RenderBody</code>&#13;
 is the Razor expression that calls the page specific View and merges that content over there.</p>&#13;
</div>&#13;
<div class="section" title="Adding a page-specific View">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h2 class="title"><a id="ch04lvl2sec28"/>&#13;
 Adding a page-specific View</h2>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>Before adding the View, we will need to add an action method in our <code class="literal">HomeController</code>&#13;
  file from which we will be calling our page-specific view.</p>&#13;
<p>Let's add an action method named <code class="literal">Index2</code>&#13;
 as follows:</p>&#13;
<pre class="programlisting">public IActionResult Index2()
{
  ViewBag.Title = "This is Index2";
  return View();
}</pre>&#13;
<p>The <code class="literal">ViewBag</code>&#13;
  is used to pass information from the Controller to the View. Here, we are passing the <code class="literal">Title</code>&#13;
 information from the action method to the View.</p>&#13;
<p>Now, right-click on the <code class="literal">Views</code>&#13;
 folder, select <span class="strong">&#13;
<strong>Add</strong>&#13;
</span>&#13;
 | <span class="strong">&#13;
<strong>New Item</strong>&#13;
</span>&#13;
 , select <span class="strong">&#13;
<strong>MVC View Page</strong>&#13;
</span>&#13;
 , and save the file as <code class="literal">Index2.cshtml</code>&#13;
 .</p>&#13;
<p>In the generated view, I have added simple <code class="literal">Hello</code>&#13;
 text. This text will be rendered in the body of the layout page. The complete code of the View file is as follows:</p>&#13;
<pre class="programlisting">@*
For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
 …
 }
 Hello. This text will be rendered in body of the layout page 
</pre>&#13;
<p>Everything is set now. Run the application and type the URL <code class="literal">http://localhost:50132/Home/Index2</code>&#13;
 in the browser. Please note that the port number after the local host may vary when you run the application from your PC.</p>&#13;
<div class="mediaobject"><img src="Image00048.jpg" alt="Adding a page-specific View"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>As expected, you'll see the text seen in the preceding picture. However, our point is not about the text. It's about the structure of the generated HTML content.</p>&#13;
<p>View the source by pressing <span class="emphasis">&#13;
<em>Ctrl</em>&#13;
</span>&#13;
 + <span class="emphasis">&#13;
<em>U</em>&#13;
</span>&#13;
 (on the Chrome browser in Windows). You'll see the following HTML content:</p>&#13;
<div class="mediaobject"><img src="Image00049.jpg" alt="Adding a page-specific View"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>The top content (the <code class="literal">html</code>&#13;
 , <code class="literal">head</code>&#13;
 , <code class="literal">body</code>&#13;
 , and <code class="literal">div</code>&#13;
  opening tags) and bottom content (the <code class="literal">html</code>&#13;
 , <code class="literal">head</code>&#13;
 , <code class="literal">body</code>&#13;
 , and <code class="literal">div</code>&#13;
  closing tags) come from the layout file and the text comes from the View specific to the page.</p>&#13;
</div>&#13;
</div>&#13;

<div class="section" title="Generating HTML">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h1 class="title"><a id="ch04lvl1sec32"/>&#13;
 Generating HTML</h1>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>As discussed in <a class="link" title="Chapter 1. Introduction to ASP.NET Core" href="text00014.html#page">Chapter 1</a>&#13;
 , <span class="emphasis">&#13;
<em>Introduction to ASP.NET Core</em>&#13;
</span>&#13;
 , browsers can understand only HTML, CSS, and JavaScript, irrespective of the technology that you use to build the web application. This holds true when building the application in ASP.NET MVC as well.</p>&#13;
<p>Most applications get the user input, process the input, and then store the required information in the database to retrieve them later. In the context of web applications, Form HTML elements are used to get the user input.</p>&#13;
<p>The following are a couple of ways to generate HTML elements in ASP.NET Core:</p>&#13;
<div class="itemizedlist">&#13;
<ul class="itemizedlist">&#13;
<li class="listitem">HTML Helpers</li>&#13;
<li class="listitem">Tag Helpers</li>&#13;
</ul>&#13;
</div>&#13;
<p>HTML Helpers are server-side methods that aid in generating HTML elements, which can be understood by the browsers. HTML helpers were the primary method of generating the HTML elements up till ASP.NET MVC 5.</p>&#13;
<p>Tag Helpers, introduced in ASP.NET Core, also produce HTML elements. Tag helpers, which we will discuss in a later section of this chapter, will look just like HTML elements where you add attributes to identify them as Tag Helpers. The advantage of using Tag helpers over HTML helpers is that the user interfaces designers/engineers do not need to worry about Razor code. They just code with HTML elements and additional attributes.</p>&#13;
<p>Before discussing HTML helpers and Tag helpers, let's take a step back and talk about why we need them in the first place.</p>&#13;
<p>Let's consider a simple form, as shown in the following picture, where we would like to get the user's name and their age. If the user enters her age, we will display <code class="literal">You are eligible to vote!</code>&#13;
 . If not, we will display <code class="literal">You are not eligible to vote now</code>&#13;
 :</p>&#13;
<div class="mediaobject"><img src="Image00050.jpg" alt="Generating HTML"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>The following is the HTML code to show the preceding simple form:</p>&#13;
<pre class="programlisting">&lt;form&gt;
  &lt;table&gt;
    &lt;tr&gt;
      &lt;td&gt;
        &lt;label for="txtName"&gt;Name&lt;/label&gt;
      &lt;/td&gt;
      &lt;td&gt;
        &lt;input type="text" id="txtName" /&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
   &lt;tr&gt;
     &lt;td&gt;
       &lt;label for="txtAge"&gt;Age&lt;/label&gt;
     &lt;/td&gt;
     &lt;td&gt;
      &lt;input type="text" id="txtAge" /&gt;
     &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
     &lt;td colspan="2"&gt;
       &lt;input type="submit"  /&gt;
     &lt;/td&gt;
   &lt;/tr&gt;
  &lt;/table&gt;
&lt;/form&gt;</pre>&#13;
<p>This method of coding HTML elements directly is time-consuming and error-prone. For example, in the preceding form, the label and input HTML elements refer to the same element (<code class="literal">txtName</code>&#13;
 in the first group and <code class="literal">txtAge</code>&#13;
 in the second group). If we hand-code the HTML element, there is a possibility of a typo error in building the HTML element.</p>&#13;
<div class="section" title="HTML Helpers">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h2 class="title"><a id="ch04lvl2sec29"/>&#13;
 HTML Helpers</h2>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>HTML helpers are server-side methods that generate HTML for you. We can generate the same form using HTML helpers as follows (<code class="literal">HTML.BeginForm</code>&#13;
 , <code class="literal">@Html.Label</code>&#13;
 , and <code class="literal">@Html.TextBox</code>&#13;
 generate the HTML <code class="literal">form</code>&#13;
 element, label, and textbox elements, respectively):</p>&#13;
<pre class="programlisting">@using (Html.BeginForm())
 {
   &lt;table&gt;        
     &lt;tr&gt; 
       &lt;td&gt;@Html.Label("Name")&lt;/td&gt;
       &lt;td&gt;@Html.TextBox("txtName")&lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
       &lt;td&gt;@Html.Label("Age")&lt;/td&gt;
       &lt;td&gt;@Html.TextBox("txtAge")&lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
       &lt;td colspan="2"&gt;&lt;input type="submit" value="Submit" /&gt;&lt;/td&gt;
     &lt;/tr&gt; 
   &lt;/table&gt;
}</pre>&#13;
<div class="mediaobject"><img src="Image00051.jpg" alt="HTML Helpers"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>You might wonder why we need to use HTML helpers when we can write the HTML code manually. Things will get more complex when we pass the model from the Controller to the view. Using HTML helpers, we can directly build <code class="literal">form</code>&#13;
 elements from <code class="literal">Models</code>&#13;
  files so that they will pick the names from the <code class="literal">Models</code>&#13;
 that you are using.</p>&#13;
<p>For example, let's create a folder called <code class="literal">Models</code>&#13;
 and a class called <code class="literal">Person</code>&#13;
 . This class will act as a model as shown in the following screenshot:</p>&#13;
<div class="mediaobject"><img src="Image00052.jpg" alt="HTML Helpers"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>The <code class="literal">Person</code>&#13;
  class is just a POCO (Plain Old C# Object) class and will act as a model. The complete code for this class is as follows:</p>&#13;
<pre class="programlisting">public class Person
{
  public int PersonId { get; set; }
  public string Name { get; set; }
  public int Age { get; set; }
}</pre>&#13;
<p>Let's create a new action method called <code class="literal">ValidateAge</code>&#13;
 . In this method, we will create an empty <code class="literal">Person</code>&#13;
 class and pass the Model to the View. We will also create a dynamic property called <code class="literal">Title</code>&#13;
 in <code class="literal">ViewBag</code>&#13;
 so that we can display this value in View:</p>&#13;
<pre class="programlisting">[HttpGet]
public IActionResult ValidateAge()
{
  ViewBag.Title = "Validate Age for voting";
  Person person1 = new Person();
  return View(person1);
}</pre>&#13;
<p>In the view, create the <code class="literal">form</code>&#13;
 using the following HTML Helpers:</p>&#13;
<pre class="programlisting">@model Chapter4.Models.Person
@using (Html.BeginForm("ValidateAge", "Home", FormMethod.Post))
 {
   &lt;table&gt;
     &lt;tr&gt;
       &lt;td&gt;@Html.LabelFor(Model =&gt; Model.Name) &lt;/td&gt;
       &lt;td&gt;@Html.TextBoxFor(Model =&gt; Model.Name) &lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
       &lt;td&gt;@Html.LabelFor(Model =&gt; Model.Age)&lt;/td&gt;
       &lt;td&gt;@Html.TextBoxFor(Model =&gt; Model.Age)&lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
       &lt;td colspan="2"&gt;&lt;input type="submit" value="Submit" /&gt;&lt;/td&gt;
     &lt;/tr&gt;
   &lt;/table&gt;
}</pre>&#13;
<p>In the first line, we are telling the View that we are passing the Model of type <code class="literal">Person</code>&#13;
 class. This enables you to use the strong type of Model, that is, when you type Model and a dot, <span class="strong">&#13;
<strong>IntelliSense</strong>&#13;
</span>&#13;
 provides you with all the properties of the <code class="literal">Person</code>&#13;
 class</p>&#13;
<p>In the second line, we are using the overloaded <code class="literal">BeginForm</code>&#13;
 HTML helpers which accept three parameters—the action method name, the Controller name, and the <code class="literal">Form</code>&#13;
 method.</p>&#13;
<p>Simply, when the user submits the form, the information should be passed to the mentioned action of the Controller.</p>&#13;
<p>In the <code class="literal">LabelFor</code>&#13;
 and <code class="literal">TextBox</code>&#13;
 For HTML helpers, we are just passing Model properties (name and age); it automatically queries and gets the Model properties and builds the respective HTML elements. This is one of the primary advantages of using HTML helpers. Without using the HTML helpers, this process might become complex.</p>&#13;
<p>Now, let's write the respective <code class="literal">POST</code>&#13;
 action method in the same way. In the following <code class="literal">POST</code>&#13;
 action method, based on the age entered in the form, we set the dynamic property as <code class="literal">Message</code>&#13;
 .</p>&#13;
<pre class="programlisting">[HttpPost]
public IActionResult ValidateAge(Person person1)
{
  if(person1.Age&gt;=18)
  {
    ViewBag.Message = "You are eligible to Vote!";
  }
  else
  {
    ViewBag.Message = "Sorry.You are not old enough to vote!";
  }
  return View();
}</pre>&#13;
<p>It is to be noted that both the <code class="literal">GET</code>&#13;
 and <code class="literal">POST</code>&#13;
 action method refer to the same View —<code class="literal">ValidateAge.cshtml</code>&#13;
 . Add the following content to the View just above the form element:</p>&#13;
<pre class="programlisting">@if(ViewBag.Message!=null)
 {
   &lt;b&gt;@ViewBag.Message&lt;/b&gt;
 }</pre>&#13;
<p>Once the user submits the form, the <code class="literal">POST</code>&#13;
 action method sets the dynamic <code class="literal">Message</code>&#13;
 property in <code class="literal">ViewBag</code>&#13;
 . However, the value of this property will be null when the View is rendered as part of the <code class="literal">GET</code>&#13;
 request. If the value is not null, insert the message at the top of the page.</p>&#13;
<p>When you run the application, you'll get the following output:</p>&#13;
<div class="mediaobject"><img src="Image00053.jpg" alt="HTML Helpers"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
</div>&#13;
</div>&#13;

<div class="section" title="Partial View">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h1 class="title"><a id="ch04lvl1sec33"/>&#13;
 Partial View</h1>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>Partial Views are just Views that can be reused across your application. Partial Views can be thought of as pluggable reusable blocks that you can call from anywhere and have the content of the partial view displayed.</p>&#13;
<p>Consider the following structure of a web page—it's the same layout page that we used earlier, but with a couple of changes. The <span class="strong">&#13;
<strong>Latest News</strong>&#13;
</span>&#13;
 block is added to the <span class="strong">&#13;
<strong>Side Section</strong>&#13;
</span>&#13;
 and the <span class="strong">&#13;
<strong>Login</strong>&#13;
</span>&#13;
 block is added to the <span class="strong">&#13;
<strong>Top Section</strong>&#13;
</span>&#13;
 . These blocks are not restricted to the <span class="strong">&#13;
<strong>Top Section</strong>&#13;
</span>&#13;
 or <span class="strong">&#13;
<strong>Side Section</strong>&#13;
</span>&#13;
 and can be used anywhere in your application, including your <span class="strong">&#13;
<strong>Content Section</strong>&#13;
</span>&#13;
  as shown in the following figure:</p>&#13;
<div class="mediaobject"><img src="Image00054.jpg" alt="Partial View"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>These Partial Views are not restricted to static content and can contain <code class="literal">form</code>&#13;
 elements. In the preceding screenshot, the <span class="strong">&#13;
<strong>Latest News</strong>&#13;
</span>&#13;
  Partial View contains the text content and the login Partial View contains <code class="literal">form</code>&#13;
 elements to get the e-mail ID and password.</p>&#13;
<p>Location of Partial Views—Framework does not restrict the location of the Partial View. However, by convention, if your Partial View will be used only by your Controller, you can create that Partial View in the Controller-specific Views folder. For example, if your Partial View will only be used in <code class="literal">HomeController</code>&#13;
 file, you can create that Partial View in the <code class="literal">Views\Home</code>&#13;
 folder.</p>&#13;
<p>Let's take look at how to create a Partial View and use it.</p>&#13;
<p>As discussed earlier, a Partial View is just like a normal View. So, we will create a Partial View in the same way we create normal View.</p>&#13;
<p>Right-click on the <code class="literal">Shared</code>&#13;
 folder and select <span class="strong">&#13;
<strong>Add</strong>&#13;
</span>&#13;
 | <span class="strong">&#13;
<strong>New Item</strong>&#13;
</span>&#13;
 . By convention, like all shared content, the name of the Partial View will also start with "<code class="literal">_</code>&#13;
 "(underscore), as shown in the following screenshot:</p>&#13;
<div class="mediaobject"><img src="Image00055.jpg" alt="Partial View"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<div class="note" title="Note">&#13;
<h3 class="title"><a id="tip5"/>&#13;
 Tip</h3>&#13;
<p>We are creating this Partial View based on the assumption that it can be used from anywhere in the application.</p>&#13;
</div>&#13;
<p>In the generated Partial View, I have added the following simple static content—a text and a simple table:</p>&#13;
<pre class="programlisting">&lt;b&gt;This content and below table is coming from partial view&lt;/b&gt;
&lt;table border="1"&gt; 
  &lt;tr&gt;
    &lt;th&gt;Employee No&lt;/th&gt;
    &lt;th&gt;Employee Name&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt; 
    &lt;td&gt;10012&lt;/td&gt;
    &lt;td&gt;Jon Skeet&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;10013&lt;/td&gt;
    &lt;td&gt;Scott Guthrie&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;</pre>&#13;
<div class="section" title="Calling the Partial View">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h2 class="title"><a id="ch04lvl2sec30"/>&#13;
 Calling the Partial View</h2>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>A Partial View can be called using the <code class="literal">@Html.Partial</code>&#13;
 HTML helper.</p>&#13;
<p>In our case, we will be calling the Partial View from <code class="literal">Index2.cshtml</code>&#13;
 file. The parameter that you pass will be the name of the partial file. It will search for the Partial View by that name and render that complete content as part of the <code class="literal">Index2.cshtml</code>&#13;
  file.</p>&#13;
<p>The content of <code class="literal">Index2.html</code>&#13;
  file will now be as follows:</p>&#13;
<pre class="programlisting">Hello. This text will be rendered in body of the layout page&lt;br/&gt; &lt;br/&gt; &lt;br/&gt;

@Html.Partial("_PartialHelloWorld")</pre>&#13;
<p>Now, run the application and access the URL <code class="literal">http://localhost:50132/Home/Index2</code>&#13;
 . You'll see the following output:</p>&#13;
<div class="mediaobject"><img src="Image00056.jpg" alt="Calling the Partial View"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
</div>&#13;
</div>&#13;

<div class="section" title="View components">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h1 class="title"><a id="ch04lvl1sec34"/>&#13;
 View components</h1>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>View components are a new feature introduced in ASP.NET Core, they are almost similar to Partial Views but is more powerful. When you use Partial Views, you have dependency over the Controller. However, when you use the <code class="literal">ViewComponent</code>&#13;
 attribute, you do not have to depend on the Controller, so we will establish separation of concerns and have better testability. Even though the existing Partial View HTML helper is still supported, it is preferable to use the View component whenever you want to show a reusable piece of information when you are using .NET Core.</p>&#13;
<div class="section" title="Creating a View component">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h2 class="title"><a id="ch04lvl2sec31"/>&#13;
 Creating a View component</h2>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>You can create a <code class="literal">ViewComponent</code>&#13;
 using any of the following:</p>&#13;
<div class="itemizedlist">&#13;
<ul class="itemizedlist">&#13;
<li class="listitem">Create a class by deriving from the <code class="literal">ViewComponent</code>&#13;
 attribute</li>&#13;
<li class="listitem">Decorate a class with the <code class="literal">[ViewComponent]</code>&#13;
 attribute or derive it from the class that has the <code class="literal">[ViewComponent]</code>&#13;
 attribute</li>&#13;
<li class="listitem">You can use the convention by creating a class that ends with a suffix <code class="literal">ViewComponent</code>&#13;
 attribute</li>&#13;
</ul>&#13;
</div>&#13;
<p>Whatever option you choose, this <code class="literal">ViewComponent</code>&#13;
  should be public, non-nested, and non-abstract classes.</p>&#13;
<p>Like Controllers, you can use the Dependency Injection (via a constructor) in the <code class="literal">ViewComponent</code>&#13;
 attribute as well. As the <code class="literal">ViewComponent</code>&#13;
  attribute is separate from the Controller lifecycle, you may not be able to use the action filters in <code class="literal">ViewComponents</code>&#13;
 .</p>&#13;
<p>There is a method called <code class="literal">Invoke</code>&#13;
 (or <code class="literal">InvokeAync</code>&#13;
 , the asynchronous equivalent of <code class="literal">Invoke</code>&#13;
 ), that will return the <code class="literal">IComponentViewResult</code>&#13;
 interface. This method is similar to the action method of the Controller that will return the View.</p>&#13;
<p>Let's get our hands dirty by creating a <code class="literal">ViewComponent</code>&#13;
 attribute.</p>&#13;
<p>Create a new folder called <code class="literal">ViewComponents</code>&#13;
 in your project and a new class called <code class="literal">SimpleViewComponent</code>&#13;
 , as shown in the following screenshot:</p>&#13;
<div class="mediaobject"><img src="Image00057.jpg" alt="Creating a View component"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>The <code class="literal">SimpleViewComponent</code>&#13;
 file that we created will look like the following:</p>&#13;
<pre class="programlisting">using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using Microsoft.AspNet.Mvc;

namespace Chapter4.ViewComponents
{
  public class SimpleViewComponent :ViewComponent
  {
    public IViewComponentResult Invoke()
    {
      var data = GetSampleData();
      return View(data);
    }
    /// &lt;summary&gt;
    /// This is a simple private method to return some dummy data
    /// &lt;/summary&gt;
    /// &lt;returns&gt;&lt;/returns&gt;

    private List&lt;string&gt; GetSampleData()
    {
      List&lt;string&gt; data = new List&lt;string&gt;();
      data.Add("One");
      data.Add("Two");
      data.Add("Three");
      return data;
    }
  }
}</pre>&#13;
<p>We just have a couple of methods, one to populate the data and the other is the <code class="literal">Invoke</code>&#13;
 method where we will render the View.</p>&#13;
<p>Once you have created the <code class="literal">ViewComponent</code>&#13;
 attribute, you will need to include the <code class="literal">ViewComponent</code>&#13;
 namespace in the <code class="literal">Views\_ViewImports.cshtml</code>&#13;
 file so that the <code class="literal">ViewComponents</code>&#13;
 attributes can be available for all the Views. The highlighted code snippet in the following is added to the View:</p>&#13;
<pre class="programlisting">@using Chapter4
@using Chapter4.Models
<span class="strong">
<strong>@using Chapter4.ViewComponents
</strong>&#13;

</span>&#13;


@addTagHelper "*, Microsoft.AspNet.Mvc.TagHelpers"</pre>&#13;
<p>We have created the <code class="literal">ViewComponent</code>&#13;
 and made them available to all of the Views. A simple action method in the <code class="literal">HomeController</code>&#13;
 file just returns the View:</p>&#13;
<pre class="programlisting">public ActionResult Sample()
{
return View();
}</pre>&#13;
<p>In the associated View, we can just invoke the component as shown in the following code snippet:</p>&#13;
<pre class="programlisting">&lt;p&gt;
  This is a sample web page &lt;br/&gt;
  &lt;div&gt;
    @Component.Invoke("Simple")
  &lt;/div&gt; 
&lt;/p&gt;</pre>&#13;
<p>When you invoke the component, it will search in the following two folders:</p>&#13;
<div class="itemizedlist">&#13;
<ul class="itemizedlist">&#13;
<li class="listitem">The <code class="literal">Views\&lt;controller_name&gt;\Components\&lt;view component name&gt;\&lt;view name&gt;</code>&#13;
 folder</li>&#13;
<li class="listitem">The <code class="literal">Views\Shared\Components\&lt;view_component_name&gt;/&lt;view_name&gt;</code>&#13;
 folder</li>&#13;
</ul>&#13;
</div>&#13;
<p>The default View name of the View component is <code class="literal">Default</code>&#13;
 , which makes your file name for the View <code class="literal">Default.cshtml</code>&#13;
 . So, we will need to create the <code class="literal">Default.cshtml</code>&#13;
  file in <code class="literal">Views\Shared\Simple\Default.cshtml</code>&#13;
 folder, as shown in the following screenshot:</p>&#13;
<div class="mediaobject"><img src="Image00058.jpg" alt="Creating a View component"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>In the the View (<code class="literal">Default.cshtml</code>&#13;
 file) of the <code class="literal">ViewComponent</code>&#13;
 file, we are just iterating the items in the model and displaying them as an unordered list item, as shown in the following code:</p>&#13;
<pre class="programlisting">@model IEnumerable&lt;string&gt;

&lt;h3&gt; Sample list&lt;/h3&gt;
&lt;ul&gt;
  @foreach(var item in Model)
  {
    &lt;li&gt;@item&lt;/li&gt;
  }
&lt;/ul&gt;</pre>&#13;
<p>When you run the application and access the URL (<code class="literal">http://localhost:50132/Home/Sample</code>&#13;
 ), you should see the following output:</p>&#13;
<div class="mediaobject"><img src="Image00059.jpg" alt="Creating a View component"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>The first line, <span class="strong">&#13;
<strong>This is a sample web page</strong>&#13;
</span>&#13;
 , comes from the parent View file (<code class="literal">sample.cshtml</code>&#13;
 ) whereas the subsequent list comes from <code class="literal">ViewComponent</code>&#13;
 attribute.</p>&#13;
<p>The <code class="literal">ViewComponent</code>&#13;
 attributes are usually referred in the Views. However, if you want to call the <code class="literal">ViewComponent</code>&#13;
 directly from your Controller, you can do so.</p>&#13;
<p>I have called the <code class="literal">Sample</code>&#13;
 action method to call the Simple <code class="literal">ViewComponent</code>&#13;
 directly instead of calling it through some other View as follows:</p>&#13;
<pre class="programlisting">public ActionResult Sample()
{
  return ViewComponent("Simple");
  //return View();
}</pre>&#13;
<div class="mediaobject"><img src="Image00060.jpg" alt="Creating a View component"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>Thus, these <code class="literal">ViewComponents</code>&#13;
 have far more flexibility and features, such as Dependency Injection, when compared to old HTML Partial Views. This ensures <code class="literal">ViewComponents</code>&#13;
  are separately tested.</p>&#13;
</div>&#13;
</div>&#13;

<div class="section" title="Tag Helpers">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h1 class="title"><a id="ch04lvl1sec35"/>&#13;
 Tag Helpers</h1>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>Tag Helpers are a new feature in ASP.NET Core; they help generate the HTML elements. In HTML helpers, we will write a C#/Razor code to generate the HTML. The disadvantage associated with this approach is that many frontend engineers will not know C#/Razor code. They work on plain HTML, CSS, and JavaScript. Tag Helpers look just like HTML code but have all the features of server-side rendering. You can even build your custom Tag Helper for your needs.</p>&#13;
<p>Let's take a look at how to use a Tag Helper. In order to use the Tag helper, you will need to install the <code class="literal">Microsoft.AspNet.Mvc.TagHelpers</code>&#13;
 NuGet package.</p>&#13;
<p>Open the <span class="strong">&#13;
<strong>Package Manager Console</strong>&#13;
</span>&#13;
  window by selecting <span class="strong">&#13;
<strong>View</strong>&#13;
</span>&#13;
  | <span class="strong">&#13;
<strong>Other Windows</strong>&#13;
</span>&#13;
  | <span class="strong">&#13;
<strong>Package Manager Console</strong>&#13;
</span>&#13;
 , as shown in the following screenshot:</p>&#13;
<div class="mediaobject"><img src="Image00061.jpg" alt="Tag Helpers"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>You can install <code class="literal">TagHelpers</code>&#13;
 methods by entering the following command in the <span class="strong">&#13;
<strong>Package Manager Console</strong>&#13;
</span>&#13;
  window, the following command:</p>&#13;
<pre class="programlisting">
<span class="strong">
<strong>Install-Package Microsoft.AspNet.Mvc.TagHelpers -Pre</strong>&#13;

</span>&#13;


</pre>&#13;
<p>The following response will appear when you've entered the command:</p>&#13;
<div class="mediaobject"><img src="Image00062.jpg" alt="Tag Helpers"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>Once the <code class="literal">TagHelpers</code>&#13;
 package is installed, we will need to call <code class="literal">ViewImports</code>&#13;
 file, where we will add the <code class="literal">TagHelpers</code>&#13;
 directive so that Tag Helpers are available to our Views.</p>&#13;
<p>Right-click on the <code class="literal">Views</code>&#13;
 folder and select the <span class="strong">&#13;
<strong>Add New Item</strong>&#13;
</span>&#13;
 option from the <span class="strong">&#13;
<strong>Context</strong>&#13;
</span>&#13;
 menu; you'll see the following screen:</p>&#13;
<div class="mediaobject"><img src="Image00063.jpg" alt="Tag Helpers"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>Add the following content to the <code class="literal">_ViewImports.cs</code>&#13;
 file. The first couple of lines tells ASP.NET MVC to include the necessary namespaces. The last line tells ASP.NET MVC to include all the <code class="literal">TagHelpers</code>&#13;
 available in <code class="literal">Microsoft.AspNet.Mvc.TagHelpers</code>&#13;
 . The first parameter indicates the name of TagHelper. We have used *, which means that we may want to use all the Tag Helpers. The second parameter indicates the assembly where the <code class="literal">TagHelpers</code>&#13;
 will be available:</p>&#13;
<pre class="programlisting">@using Chapter4
@using Chapter4.Models
@addTagHelper "*, Microsoft.AspNet.Mvc.TagHelpers"</pre>&#13;
<p>As we are creating the <code class="literal">_ViewImports.cshtml</code>&#13;
 file directly under the <code class="literal">Views</code>&#13;
 folder, as shown in the following screenshot, the Tag Helpers will be available for all the Views:</p>&#13;
<div class="mediaobject"><img src="Image00064.jpg" alt="Tag Helpers"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>Had we included the <code class="literal">_ViewImports.cshtml</code>&#13;
 file under the <code class="literal">Home</code>&#13;
 folder, the Tag Helpers would be available only for the Views under the <code class="literal">Home</code>&#13;
 folder.</p>&#13;
<p>Let's add a simple action method called <code class="literal">Index3</code>&#13;
 in the <code class="literal">HomeController</code>&#13;
 file, and in the associated View, we will use Tag Helpers as shown in the following code:</p>&#13;
<pre class="programlisting">public IActionResult Index3()
{
  ViewBag.Title = "This is Index3";
  Person person = new Person();
  return View(person);
}</pre>&#13;
<p>Add the corresponding View (<code class="literal">Index3.cshtml</code>&#13;
 file) for the <code class="literal">Index3</code>&#13;
 action method with the following code:</p>&#13;
<pre class="programlisting">@model Chapter4.Models.Person
&lt;form asp-controller="Home" asp-action="Index3"&gt; 
  &lt;table&gt;
    &lt;tr&gt; 
      &lt;td&gt;&lt;<span class="strong">
<strong>labelasp-for</strong>&#13;

</span>&#13;

="Name"&gt;&lt;/<span class="strong">
<strong>label</strong>&#13;

</span>&#13;

&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input asp-for="Name" /&gt;&lt;/td&gt; 
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;<span class="strong">
<strong>labelasp-for</strong>&#13;

</span>&#13;

="Age"&gt;&lt;/<span class="strong">
<strong>label</strong>&#13;

</span>&#13;

&gt;&lt;/td&gt;
      &lt;td&gt;&lt;<span class="strong">
<strong>inputasp-for</strong>&#13;

</span>&#13;

="Age" /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td colspan="2"&gt;&lt;input type="submit" value="Submit" /&gt;&lt;/td&gt;
    &lt;/tr&gt; 
  &lt;/table&gt;
&lt;/<span class="strong">
<strong>form</strong>&#13;

</span>&#13;

&gt;</pre>&#13;
<p>The following are a few things that you need to note in the preceding code, for the use of Tag Helpers:</p>&#13;
<div class="itemizedlist">&#13;
<ul class="itemizedlist">&#13;
<li class="listitem">All the form elements look just like standard HTML elements with just a few changes in the attributes. This makes frontend developers work independently, without learning HTML/Razor code and thus more easily achieving the separation which concerns.</li>&#13;
<li class="listitem">The first line of the preceding view indicates the type of model data passed to the view from the Controller.</li>&#13;
<li class="listitem">The Form element has a couple of attributes named <code class="literal">asp-controller</code>&#13;
 and <code class="literal">asp-action</code>&#13;
  which represent Controller names and action method names respectively.</li>&#13;
<li class="listitem">The Label and input tag helpers are just like HTML elements, with just an additional <code class="literal">asp-for</code>&#13;
 attribute. The values for these attributes represent the model properties. You can take advantage of IntelliSense when entering the values for these attributes.</li>&#13;
</ul>&#13;
</div>&#13;
<div class="section" title="Creating custom Tag Helpers">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h2 class="title"><a id="ch04lvl2sec32"/>&#13;
 Creating custom Tag Helpers</h2>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>ASP.NET Core provides many built-in Tag Helpers to help you create the necessary HTML elements for many scenarios. However, this process is not comprehensive and is exhaustive. Sometimes, you may want to make some changes in the generated HTML element, or you may want to create an HTML element with new properties or a new HTML element altogether. You are not restricted to using only the existing Tag Helpers in the ASP.NET Core application. You can create your own Tag Helper if the existing Tag Helpers do not suit your needs. Let's create a simple Tag Helper to create an e-mail link:</p>&#13;
<pre class="programlisting">&lt;a href="mailto:mugil@dotnetodyssey.com"&gt; 
</pre>&#13;
<p>There are a couple of ways to create Tag Helpers to implement the <code class="literal">ITagHelper</code>&#13;
 interface or inherit the <code class="literal">TagHelper</code>&#13;
 class. The <code class="literal">TagHelper</code>&#13;
 class has a <code class="literal">Process</code>&#13;
 method that you can override to write your custom Tag Helpers. The <code class="literal">TagHelper</code>&#13;
 class also has the <code class="literal">TagHelperOutput</code>&#13;
 parameter, which you can use to write and generate the desired output HTML. So, it is preferable to create Tag Helpers by inheriting from the <code class="literal">TagHelper</code>&#13;
 class.</p>&#13;
<p>Our objective is to write a custom e-mail Tag Helper so that when someone uses that Tag Helper, which is <code class="literal">&lt;email mailTo="mugil@greatestretailstore.com"&gt;&lt;/email&gt;</code>&#13;
 , it should be converted to the following line of code:</p>&#13;
<pre class="programlisting">&lt;a href="mailto:mugil@greatestretailstore.com"&gt;Drop us a mail&lt;/a&gt; 
</pre>&#13;
<p>The following are the steps that need to be performed to create the custom Tag Helper in the ASP.NET Core application.</p>&#13;
<p>Create a folder called <code class="literal">TagHelper</code>&#13;
 and add a new item named the <code class="literal">EmailTagHelper.cs</code>&#13;
 file. By convention, all Tag Helpers class should end with <code class="literal">TagHelper</code>&#13;
 , even though we can override this convention.</p>&#13;
<div class="mediaobject"><img src="Image00065.jpg" alt="Creating custom Tag Helpers"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>Once you have created the file, you will need to override the <code class="literal">Process</code>&#13;
 method to generate the desired HTML output:</p>&#13;
<pre class="programlisting">using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using Microsoft.AspNet.Razor.TagHelpers;

namespace Chapter4.TagHelpers
{
  public class EmailTagHelper : TagHelper
  {
    public override void Process(TagHelperContext context, TagHelperOutput output)
    {
      string emailTo= context.AllAttributes["mailTo"].Value.ToString();
      output.TagName = "a";
      output.Attributes["href"] = "mailto:" + emailTo;
      output.Content.SetContent("Drop us a mail");
    }
  }
}</pre>&#13;
<p>The parameters used in the preceding code are explained as follows:</p>&#13;
<div class="itemizedlist">&#13;
<ul class="itemizedlist">&#13;
<li class="listitem">The <code class="literal">context</code>&#13;
 parameter will give you all the information that you supply at Tag Helper. For example, in the <code class="literal">&lt;emailmailTo="mugil@greatestretailstore.com"&gt;&lt;/email&gt;</code>&#13;
  Tag Helper, you can get the <code class="literal">mailTo</code>&#13;
 attribute and its associated value from the <code class="literal">context</code>&#13;
 parameter. In the first line of the preceding <code class="literal">Process</code>&#13;
 method, we will get the <code class="literal">mailTo</code>&#13;
 attribute value and use that value to create an attribute in the generated HTML (anchor tag).</li>&#13;
<li class="listitem">The <code class="literal">output</code>&#13;
 parameter is of type <code class="literal">TagHelperOutput</code>&#13;
 , which is used to generate the desired HTML output.</li>&#13;
<li class="listitem">The <code class="literal">output.Content.SetContent</code>&#13;
  parameter will set the text that is to be displayed for the anchor tag.</li>&#13;
</ul>&#13;
</div>&#13;
<p>We have created the e-mail Tag Helper. Now, we have to make it available to our Views so that we can make use of that Tag Helper in our Views. Edit <code class="literal">Views\_ViewImports.cshtml</code>&#13;
 to include the namespace of the <code class="literal">TagHelpers</code>&#13;
 and add the associated <code class="literal">TagHelpers</code>&#13;
 . In the following <code class="literal">_ViewImports.cshtml</code>&#13;
 file, we have added the content highlighted in bold:</p>&#13;
<pre class="programlisting">@using Chapter4
@using Chapter4.Models
<span class="strong">
<strong>@using Chapter4.TagHelpers
</strong>&#13;

</span>&#13;

@addTagHelper "*, Microsoft.AspNet.Mvc.TagHelpers" 
<span class="strong">
<strong>@addTagHelper "*, Chapter4"</strong>&#13;

</span>&#13;


</pre>&#13;
<p>The "<code class="literal">*</code>&#13;
 " symbol in the following line tells the view engine to include all the TagHelpers in the <code class="literal">Chapter4</code>&#13;
 namespace:</p>&#13;
<pre class="programlisting">
<span class="strong">
<strong>@addTagHelper "*, Chapter4"</strong>&#13;

</span>&#13;


</pre>&#13;
<p>You can only specific <code class="literal">TagHelpers</code>&#13;
 , For example, the following line will include only the <code class="literal">EmailTagHelper</code>&#13;
  so it is available for our Views:</p>&#13;
<pre class="programlisting">
<span class="strong">
<strong>@addTagHelper "Chapter4.TagHelpers.EmailTagHelper, Chapter4" </strong>&#13;

</span>&#13;


</pre>&#13;
<p>Let's create a simple action method in our Home Controller. In the view of the associated action method, we will use the e-mail Tag Helper:</p>&#13;
<pre class="programlisting">public IActionResult AboutUs()
{
  return View();
}</pre>&#13;
<p>The following is the view of the preceding <code class="literal">AboutUs</code>&#13;
 action method:</p>&#13;
<pre class="programlisting">&lt;h3&gt;About Us&lt;/h3&gt;
We are one of the biggest electronics retail store serving millions of people across the nation. blah.blah. blah &lt;br/&gt;

If you want to hear great offers from us 
&lt;email mailTo="mugil@greatestretailstore.com"&gt;&lt;/email&gt;</pre>&#13;
<p>When you run the application and access the <code class="literal">http://localhost:50132/Home/AboutUs</code>&#13;
 URL, you will see the following output:</p>&#13;
<div class="mediaobject"><img src="Image00066.jpg" alt="Creating custom Tag Helpers"/>&#13;
</div>&#13;
<p style="clear:both; height: 1em;"/>&#13;
<p>Here, we created an anchor tag with the <code class="literal">mailto</code>&#13;
 attribute and the email value as the <code class="literal">href</code>&#13;
 attribute value.</p>&#13;
<p>I have opened the <span class="strong">&#13;
<strong>Developer Tools</strong>&#13;
</span>&#13;
 window (Press <span class="emphasis">&#13;
<em>F12</em>&#13;
</span>&#13;
 to do this and select the <span class="strong">&#13;
<strong>DOM Explorer</strong>&#13;
</span>&#13;
 tab) to see the generated HTML.</p>&#13;
</div>&#13;
</div>&#13;

<div class="section" title="Summary">&#13;
<div class="titlepage">&#13;
<div>&#13;
<div>&#13;
<h1 class="title"><a id="ch04lvl1sec36"/>&#13;
 Summary</h1>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
<p>In this chapter, you learned what a View engine is and how to build a View using the Razor view engine. We also discussed different programming constructs that you can make use of in Razor to produce the desired HTML output. Then, you learned about Layout and how to provide a consistent site structure across all of the pages in your ASP.NET MVC application. Later, we discussed how to promote re-usability using Partial Views with an example. Finally, you learned how to use Tag Helpers to produce clean HTML.</p>&#13;
</div>&#13;

<h1>读累了记得休息一会哦~</h1>
<p> </p>
<p><strong>公众号：古德猫宁李</strong></p>
<ul>
<li>电子书搜索下载</li>
<li>书单分享</li>
<li>书友学习交流</li>

<p> </p>
</ul>
<p><strong>网站：</strong><a href="https://www.chenjin5.com">沉金书屋 https://www.chenjin5.com</a></p>
<ul>
<li>电子书搜索下载</li>
<li>电子书打包资源分享</li>
<li>学习资源分享</li>

</ul>
</body></html>