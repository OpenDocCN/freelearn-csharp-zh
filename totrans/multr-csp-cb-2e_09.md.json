["```cs\n    using System;\n    using System.IO;\n    using System.Linq;\n    using System.Text;\n    using System.Threading.Tasks;\n    using static System.Console;\n    using static System.Text.Encoding;\n    ```", "```cs\n    const int BUFFER_SIZE = 4096;\n\n    static async Task ProcessAsynchronousIO()\n    {\n      using (var stream = new FileStream(\n        \"test1.txt\", FileMode.Create, FileAccess.ReadWrite, FileShare.None, BUFFER_SIZE))\n      {\n        WriteLine($\"1\\. Uses I/O Threads: {stream.IsAsync}\");\n\n        byte[] buffer = UTF8.GetBytes(CreateFileContent());\n        var writeTask = Task.Factory.FromAsync(\n          stream.BeginWrite, stream.EndWrite, buffer, 0, buffer.Length, null);\n\n        await writeTask;\n      }\n\n      using (var stream = new FileStream(\"test2.txt\", FileMode.Create, FileAccess.ReadWrite,FileShare.None, BUFFER_SIZE, FileOptions.Asynchronous))\n      {\n        WriteLine($\"2\\. Uses I/O Threads: {stream.IsAsync}\");\n\n        byte[] buffer = UTF8.GetBytes(CreateFileContent());\n        var writeTask = Task.Factory.FromAsync(\n          stream.BeginWrite, stream.EndWrite, buffer, 0, buffer.Length, null);\n\n        await writeTask;\n      }\n\n      using (var stream = File.Create(\"test3.txt\", BUFFER_SIZE, FileOptions.Asynchronous))\n      using (var sw = new StreamWriter(stream))\n      {\n        WriteLine($\"3\\. Uses I/O Threads: {stream.IsAsync}\");\n        await sw.WriteAsync(CreateFileContent());\n      }\n\n      using (var sw = new StreamWriter(\"test4.txt\", true))\n      {\n        WriteLine($\"4\\. Uses I/O Threads: {((FileStream)sw.BaseStream).IsAsync}\");\n        await sw.WriteAsync(CreateFileContent());\n      }\n\n      WriteLine(\"Starting parsing files in parallel\");\n\n      var readTasks = new Task<long>[4];\n      for (int i = 0; i < 4; i++)\n      {\n        string fileName = $\"test{i + 1}.txt\";\n        readTasks[i] = SumFileContent(fileName);\n      }\n\n      long[] sums = await Task.WhenAll(readTasks);\n\n      WriteLine($\"Sum in all files: {sums.Sum()}\");\n\n      WriteLine(\"Deleting files...\");\n\n      Task[] deleteTasks = new Task[4];\n      for (int i = 0; i < 4; i++)\n      {\n        string fileName = $\"test{i + 1}.txt\";\n        deleteTasks[i] = SimulateAsynchronousDelete(fileName);\n      }\n\n      await Task.WhenAll(deleteTasks);\n\n      WriteLine(\"Deleting complete.\");\n    }\n\n    static string CreateFileContent()\n    {\n      var sb = new StringBuilder();\n      for (int i = 0; i < 100000; i++)\n      {\n        sb.Append($\"{new Random(i).Next(0, 99999)}\");\n        sb.AppendLine();\n      }\n      return sb.ToString();\n    }\n\n    static async Task<long> SumFileContent(string fileName)\n    {\n      using (var stream = new FileStream(fileName, FileMode.Open, FileAccess.Read,FileShare.None, BUFFER_SIZE, FileOptions.Asynchronous))\n      using (var sr = new StreamReader(stream))\n      {\n        long sum = 0;\n        while (sr.Peek() > -1)\n        {\n          string line = await sr.ReadLineAsync();\n          sum += long.Parse(line);\n        }\n\n        return sum;\n      }\n    }\n\n    static Task SimulateAsynchronousDelete(string fileName)\n    {\n      return Task.Run(() => File.Delete(fileName));\n    }\n    ```", "```cs\n    var t = ProcessAsynchronousIO();\n    t.GetAwaiter().GetResult();\n    ```", "```cs\n    using System;\n    using System.IO;\n    using System.Net;\n    using System.Net.Http;\n    using System.Threading.Tasks;\n    using static System.Console;\n    ```", "```cs\n    static async Task GetResponseAsync(string url)\n    {\n      using (var client = new HttpClient())\n      {\n        HttpResponseMessage responseMessage = await client.GetAsync(url);\n        string responseHeaders = responseMessage.Headers.ToString();\n        string response = await responseMessage.Content.ReadAsStringAsync();\n\n        WriteLine(\"Response headers:\");\n        WriteLine(responseHeaders);\n        WriteLine(\"Response body:\");\n        WriteLine(response);\n      }\n    }\n\n    class AsyncHttpServer\n    {\n      readonly HttpListener _listener;\n      const string RESPONSE_TEMPLATE = \n            \"<html><head><title>Test</title></head><body><h2>Testpage</h2>\" +\n    \"<h4>Today is: {0}</h4></body></html>\";\n\n      public AsyncHttpServer(int portNumber)\n      {\n        _listener = new HttpListener();\n        _listener.Prefixes.Add($\"http://localhost:{portNumber}/\");\n      }\n\n      public async Task Start()\n      {\n        _listener.Start();\n\n        while (true)\n        {\n          var ctx = await _listener.GetContextAsync();\n          WriteLine(\"Client connected...\");\n          var response = string.Format(RESPONSE_TEMPLATE, DateTime.Now);\n\n          using (var sw = new StreamWriter(ctx.Response.OutputStream))\n          {\n            await sw.WriteAsync(response);\n            await sw.FlushAsync();\n          }\n        }\n      }\n\n      public async Task Stop()\n      {\n        _listener.Abort();\n      }\n    }\n    ```", "```cs\n    var server = new AsyncHttpServer(1234);\n    var t = Task.Run(() => server.Start());\n    WriteLine(\"Listening on port 1234\\. Open http://localhost:1234 in your browser.\");\n    WriteLine(\"Trying to connect:\");\n    WriteLine();\n\n    GetResponseAsync(\"http://localhost:1234\").GetAwaiter().GetResult();\n\n    WriteLine();\n    WriteLine(\"Press Enter to stop the server.\");\n    ReadLine();\n\n    server.Stop().GetAwaiter().GetResult();\n    ```", "```cs\n    using System;\n    using System.Data;\n    using System.Data.SqlClient;\n    using System.IO;\n    using System.Reflection;\n    using System.Threading.Tasks;\n    using static System.Console;\n    ```", "```cs\n    static async Task ProcessAsynchronousIO(string dbName)\n    {\n      try\n      {\n        const string connectionString =\n                @\"Data Source=(LocalDB)\\MSSQLLocalDB;Initial Catalog=master;\" +\n                \"Integrated Security=True\";\n\n        string outputFolder = Path.GetDirectoryName(\n                Assembly.GetExecutingAssembly().Location);\n\n        string dbFileName = Path.Combine(outputFolder, $\"{dbName}.mdf\");\n        string dbLogFileName = Path.Combine(outputFolder, $\"{dbName}_log.ldf\");\n\n        string dbConnectionString = \n          @\"Data Source=(LocalDB)\\MSSQLLocalDB;\" +\n          $\"AttachDBFileName={dbFileName};Integrated Security=True;\";\n\n        using (var connection = new SqlConnection(connectionString))\n        {\n          await connection.OpenAsync();\n\n          if (File.Exists(dbFileName))\n          {\n            WriteLine(\"Detaching the database...\");\n\n            var detachCommand = new SqlCommand(\"sp_detach_db\", connection);\n            detachCommand.CommandType = CommandType.StoredProcedure;\n            detachCommand.Parameters.AddWithValue(\"@dbname\", dbName);\n\n            await detachCommand.ExecuteNonQueryAsync();\n\n            WriteLine(\"The database was detached succesfully.\");\n            WriteLine(\"Deleting the database...\");\n\n            if(File.Exists(dbLogFileName)) File.Delete(dbLogFileName);\n            File.Delete(dbFileName);\n\n            WriteLine(\"The database was deleted succesfully.\");\n          }\n\n          WriteLine(\"Creating the database...\");\n          string createCommand = \n                    $\"CREATE DATABASE {dbName} ON (NAME = N'{dbName}', FILENAME = \" +\n                    $\"'{dbFileName}')\";\n          var cmd = new SqlCommand(createCommand, connection);\n\n          await cmd.ExecuteNonQueryAsync();\n          WriteLine(\"The database was created succesfully\");\n        }\n\n        using (var connection = new SqlConnection(dbConnectionString))\n        {\n          await connection.OpenAsync();\n\n          var cmd = new SqlCommand(\"SELECT newid()\", connection);\n          var result = await cmd.ExecuteScalarAsync();\n\n          WriteLine($\"New GUID from DataBase: {result}\");\n\n          cmd = new SqlCommand(\n    @\"CREATE TABLE [dbo].[CustomTable]( [ID] [int] IDENTITY(1,1) NOT NULL, \" + \n    \"[Name] [nvarchar](50) NOT NULL, CONSTRAINT [PK_ID] PRIMARY KEY CLUSTERED \" + \n    \" ([ID] ASC) ON [PRIMARY]) ON [PRIMARY]\", connection);\n\n                await cmd.ExecuteNonQueryAsync();\n\n          WriteLine(\"Table was created succesfully.\");\n\n          cmd = new SqlCommand(\n    @\"INSERT INTO [dbo].[CustomTable] (Name) VALUES ('John');\n    INSERT INTO [dbo].[CustomTable] (Name) VALUES ('Peter');\n    INSERT INTO [dbo].[CustomTable] (Name) VALUES ('James');\n    INSERT INTO [dbo].[CustomTable] (Name) VALUES ('Eugene');\", connection);\n          await cmd.ExecuteNonQueryAsync();\n\n          WriteLine(\"Inserted data succesfully\");\n          WriteLine(\"Reading data from table...\");\n\n          cmd = new SqlCommand(@\"SELECT * FROM [dbo].[CustomTable]\", connection);\n          using (SqlDataReader reader = await cmd.ExecuteReaderAsync())\n          {\n            while (await reader.ReadAsync())\n            {\n              var id = reader.GetFieldValue<int>(0);\n              var name = reader.GetFieldValue<string>(1);\n\n              WriteLine(\"Table row: Id {0}, Name {1}\", id, name);\n            }\n          }\n        }\n      }\n      catch(Exception ex)\n      {\n        WriteLine(\"Error: {0}\", ex.Message);\n      }\n    }\n    ```", "```cs\n    const string dataBaseName = \"CustomDatabase\";\n    var t = ProcessAsynchronousIO(dataBaseName);\n    t.GetAwaiter().GetResult();\n    Console.WriteLine(\"Press Enter to exit\");\n    Console.ReadLine();\n    ```", "```cs\n    using System;\n    using System.ServiceModel;\n    using System.ServiceModel.Description;\n    using System.Threading.Tasks;\n    using static System.Console;\n    ```", "```cs\n    const string SERVICE_URL = \"http://localhost:1234/HelloWorld\";\n\n    static async Task RunServiceClient()\n    {\n      var endpoint = new EndpointAddress(SERVICE_URL);\n      var channel = ChannelFactory<IHelloWorldServiceClient>\n            .CreateChannel(new BasicHttpBinding(), endpoint);\n\n      var greeting = await channel.GreetAsync(\"Eugene\");\n      WriteLine(greeting);\n    }\n\n    [ServiceContract(Namespace = \"Packt\", Name = \"HelloWorldServiceContract\")]\n    public interface IHelloWorldService\n    {\n      [OperationContract]\n      string Greet(string name);\n    }\n\n    [ServiceContract(Namespace = \"Packt\", Name = \"HelloWorldServiceContract\")]\n    public interface IHelloWorldServiceClient\n    {\n      [OperationContract]\n      string Greet(string name);\n\n      [OperationContract]\n      Task<string> GreetAsync(string name);\n    }\n\n    public class HelloWorldService : IHelloWorldService\n    {\n      public string Greet(string name)\n      {\n        return $\"Greetings, {name}!\";\n      }\n    }\n    ```", "```cs\n    ServiceHost host = null;\n\n    try\n    {\n      host = new ServiceHost(typeof (HelloWorldService), new Uri(SERVICE_URL));\n      var metadata = host.Description.Behaviors.Find<ServiceMetadataBehavior>() \n            ?? new ServiceMetadataBehavior();\n\n      metadata.HttpGetEnabled = true;\n      metadata.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;\n      host.Description.Behaviors.Add(metadata);\n\n      host.AddServiceEndpoint(ServiceMetadataBehavior.MexContractName, \n            MetadataExchangeBindings.CreateMexHttpBinding(), \"mex\");\n\n      var endpoint = host.AddServiceEndpoint(typeof (IHelloWorldService),new BasicHttpBinding(), SERVICE_URL);\n\n      host.Faulted += (sender, e) => WriteLine(\"Error!\");\n\n      host.Open();\n\n      WriteLine(\"Greeting service is running and listening on:\");\n      WriteLine($\"{endpoint.Address} ({endpoint.Binding.Name})\");\n\n      var client = RunServiceClient();\n      client.GetAwaiter().GetResult();\n\n      WriteLine(\"Press Enter to exit\");\n      ReadLine();\n    }\n    catch (Exception ex)\n    {\n      WriteLine($\"Error in catch block: {ex}\");\n    }\n    finally\n    {\n      if (null != host)\n      {\n        if (host.State == CommunicationState.Faulted)\n        {\n          host.Abort();\n        }\n        else\n        {\n          host.Close();\n        }\n      }\n    }\n    ```", "```cs\nnetsh http add urlacl url=http://+:1234/HelloWorld user=machine\\user\n```"]