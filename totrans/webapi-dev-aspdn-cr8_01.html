<html><head></head><body>
<div id="_idContainer006">
<h1 class="chapter-number" id="_idParaDest-14"><a id="_idTextAnchor012"/><span class="koboSpan" id="kobo.1.1">1</span></h1>
<h1 id="_idParaDest-15"><a id="_idTextAnchor013"/><span class="koboSpan" id="kobo.2.1">Fundamentals of Web APIs</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In today’s world, </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">web APIs</span></strong><span class="koboSpan" id="kobo.5.1"> are the backbone of the web. </span><span class="koboSpan" id="kobo.5.2">Millions of people use web APIs every day to purchase commodities, book a flight, get weather information, and more. </span><span class="koboSpan" id="kobo.5.3">In this chapter, we will learn about the fundamentals of web APIs. </span><span class="koboSpan" id="kobo.5.4">You might be wondering why we will start with the fundamental concepts. </span><span class="koboSpan" id="kobo.5.5">The answer is simple – we need to understand the basic concepts of web APIs before we </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">build one.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">This chapter introduces a couple of different web API styles, such as a REST-based API, a </span><strong class="bold"><span class="koboSpan" id="kobo.8.1">remote procedure call</span></strong><span class="koboSpan" id="kobo.9.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.10.1">RPC</span></strong><span class="koboSpan" id="kobo.11.1">)-based API, a GraphQL API, and a real-time API. </span><span class="koboSpan" id="kobo.11.2">We will also learn about how to design them. </span><span class="koboSpan" id="kobo.11.3">If you would like to start developing a web API, feel free to jump to the </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">next chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.13.1"> In this chapter, we’ll be covering the </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.15.1">What is a </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">web API?</span></span></li>
<li><span class="koboSpan" id="kobo.17.1">What is a </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">REST API?</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">Designing a </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">REST-based API</span></span></li>
<li><span class="koboSpan" id="kobo.21.1">What are RPC and </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">GraphQL APIs?</span></span></li>
<li><span class="koboSpan" id="kobo.23.1">What is a </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">real-time API?</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.25.1">After reading this chapter, you will have a basic understanding of web APIs and be able to pick the right style for your project. </span><span class="koboSpan" id="kobo.25.2">Let’s </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">get started!</span></span></p>
<h1 id="_idParaDest-16"><a id="_idTextAnchor014"/><span class="koboSpan" id="kobo.27.1">What is a web API?</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.28.1">API</span></strong><span class="koboSpan" id="kobo.29.1"> stands for </span><strong class="bold"><span class="koboSpan" id="kobo.30.1">application programming interface</span></strong><span class="koboSpan" id="kobo.31.1">. </span><span class="koboSpan" id="kobo.31.2">A web API, as the name suggests, is a </span><a id="_idIndexMarker000"/><span class="koboSpan" id="kobo.32.1">set </span><a id="_idIndexMarker001"/><span class="koboSpan" id="kobo.33.1">of programming interfaces for the web. </span><span class="koboSpan" id="kobo.33.2">For example, when you book a flight on a website, the browser makes a request to the airline’s server through a web API to access the airline’s database. </span><span class="koboSpan" id="kobo.33.3">The airline’s server then returns the information about the flight to the browser, allowing you to book your flight </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">in it.</span></span></p>
<p><span class="koboSpan" id="kobo.35.1">APIs have been delivered by organizations for decades. </span><span class="koboSpan" id="kobo.35.2">With the appearance of the World Wide Web, people needed a way to communicate between the server and </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">the client.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">We can</span><a id="_idIndexMarker002"/><span class="koboSpan" id="kobo.38.1"> build web APIs using different technologies, such as Java, Python, Ruby, PHP, .NET, and so on. </span><span class="koboSpan" id="kobo.38.2">Also, they have various styles. </span><span class="koboSpan" id="kobo.38.3">You might have heard of </span><a id="_idIndexMarker003"/><span class="koboSpan" id="kobo.39.1">terms such as </span><strong class="bold"><span class="koboSpan" id="kobo.40.1">SOAP</span></strong><span class="koboSpan" id="kobo.41.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.42.1">Web Service</span></strong><span class="koboSpan" id="kobo.43.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.44.1">REST</span></strong><span class="koboSpan" id="kobo.45.1">. </span><span class="koboSpan" id="kobo.45.2">They</span><a id="_idIndexMarker004"/><span class="koboSpan" id="kobo.46.1"> are all based on</span><a id="_idIndexMarker005"/><span class="koboSpan" id="kobo.47.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.48.1">HTTP</span></strong><span class="koboSpan" id="kobo.49.1"> protocol but communicate in </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">different ways.</span></span></p>
<p><span class="koboSpan" id="kobo.51.1">In this book, we consider web APIs as a wider concept than REST. </span><span class="koboSpan" id="kobo.51.2">In the digital world, the way machines communicate with each other changes as either the demands or the infrastructure evolves. </span><span class="koboSpan" id="kobo.51.3">In the 1990s, people focused on how to improve the internal networks that used the same platforms. </span><span class="koboSpan" id="kobo.51.4">TCP/IP came to be the standard for this kind of communication. </span><span class="koboSpan" id="kobo.51.5">After a few years, people needed to find a way to optimize communication across multiple platforms. </span><span class="koboSpan" id="kobo.51.6">Web Services appeared, and they used the </span><strong class="bold"><span class="koboSpan" id="kobo.52.1">Simple Object Access Protocol</span></strong><span class="koboSpan" id="kobo.53.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.54.1">SOAP</span></strong><span class="koboSpan" id="kobo.55.1">), which</span><a id="_idIndexMarker006"/><span class="koboSpan" id="kobo.56.1"> was defined for enterprises, and it ensured that programs built on different platforms could easily </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">exchange data.</span></span></p>
<p><span class="koboSpan" id="kobo.58.1">However, SOAP XML is quite heavy, which means it requires more bandwidth for its usage. </span><span class="koboSpan" id="kobo.58.2">In the</span><a id="_idIndexMarker007"/><span class="koboSpan" id="kobo.59.1"> early 2000s, </span><strong class="bold"><span class="koboSpan" id="kobo.60.1">Windows Communication Foundation</span></strong><span class="koboSpan" id="kobo.61.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.62.1">WCF</span></strong><span class="koboSpan" id="kobo.63.1">) was released by Microsoft. </span><span class="koboSpan" id="kobo.63.2">This helped developers manage the complexities of working with SOAP. </span><span class="koboSpan" id="kobo.63.3">WCF is RPC-based but still uses SOAP as the underlying protocol. </span><span class="koboSpan" id="kobo.63.4">Over time, some old standards, such as SOAP, have been transitioned to REST APIs, which will be discussed in the next section. </span><span class="koboSpan" id="kobo.63.5">We will start with REST APIs and then move on to the other styles of web-based APIs, such as gRPC APIs, GraphQL APIs, and </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">Signal</span><a id="_idTextAnchor015"/><span class="koboSpan" id="kobo.65.1">R APIs.</span></span></p>
<h1 id="_idParaDest-17"><a id="_idTextAnchor016"/><span class="koboSpan" id="kobo.66.1">What is a REST API?</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.67.1">REST</span></strong><span class="koboSpan" id="kobo.68.1">, also </span><a id="_idIndexMarker008"/><span class="koboSpan" id="kobo.69.1">known as </span><strong class="bold"><span class="koboSpan" id="kobo.70.1">Representational State Transfer</span></strong><span class="koboSpan" id="kobo.71.1">, is an architectural </span><a id="_idIndexMarker009"/><span class="koboSpan" id="kobo.72.1">style of web APIs that was created by Roy Fielding in his Ph.D. </span><span class="koboSpan" id="kobo.72.2">dissertation </span><em class="italic"><span class="koboSpan" id="kobo.73.1">Architectural Styles and the Design of Network-based Software Architectures</span></em><span class="koboSpan" id="kobo.74.1"> in 2000. </span><span class="koboSpan" id="kobo.74.2">Today, generally speaking, REST APIs are based on HTTP, but actually, Roy Fielding’s paper just outlines the core concepts and constraints for understanding an architectural style, and it does not require any specific protocol for REST-based architecture, such as HTTP. </span><span class="koboSpan" id="kobo.74.3">However, since HTTP is the most widely used protocol for web APIs, we will use HTTP as the protocol for </span><span class="No-Break"><span class="koboSpan" id="kobo.75.1">REST APIs.</span></span></p>
<p><span class="koboSpan" id="kobo.76.1">Just keep in mind</span><a id="_idIndexMarker010"/><span class="koboSpan" id="kobo.77.1"> that REST is just a style, not a rule. </span><span class="koboSpan" id="kobo.77.2">When you build a web API, you do not have to follow the REST style. </span><span class="koboSpan" id="kobo.77.3">You can use any other style you like. </span><span class="koboSpan" id="kobo.77.4">You can build a web API that works well, but it might not be </span><em class="italic"><span class="koboSpan" id="kobo.78.1">REST enough</span></em><span class="koboSpan" id="kobo.79.1">. </span><span class="koboSpan" id="kobo.79.2">REST is the recommended style because it helps us establish constraints, which contribute to the design of web APIs. </span><span class="koboSpan" id="kobo.79.3">It also helps developers easily integrate with other REST APIs if they follow the </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">same style.</span></span></p>
<p><span class="koboSpan" id="kobo.81.1">The core concept of REST is the term </span><em class="italic"><span class="koboSpan" id="kobo.82.1">representational state transfer</span></em><span class="koboSpan" id="kobo.83.1">. </span><span class="koboSpan" id="kobo.83.2">Think about a web system, which is a collection of resources. </span><span class="koboSpan" id="kobo.83.3">For example, it might have a resource called </span><em class="italic"><span class="koboSpan" id="kobo.84.1">books</span></em><span class="koboSpan" id="kobo.85.1">. </span><span class="koboSpan" id="kobo.85.2">The collection of books is a resource. </span><span class="koboSpan" id="kobo.85.3">A book is a resource too. </span><span class="koboSpan" id="kobo.85.4">When you request the list of the books, you select a link (for example, </span><a href="http://www.example.com/books"><span class="koboSpan" id="kobo.86.1">http://www.example.com/books</span></a><span class="koboSpan" id="kobo.87.1">), which will return a JSON string that contains all the books, resulting in the next resource’s representation, such as the link of a specific book (for example, </span><a href="http://www.example.com/books/1"><span class="koboSpan" id="kobo.88.1">http://www.example.com/books/1</span></a><span class="koboSpan" id="kobo.89.1">). </span><span class="koboSpan" id="kobo.89.2">You can continue to request the book with this link. </span><span class="koboSpan" id="kobo.89.3">In this process, the representation state is transferred to the client and rendered for </span><span class="No-Break"><span class="koboSpan" id="kobo.90.1">the user.</span></span></p>
<p><span class="koboSpan" id="kobo.91.1">There are loads of resources that explain REST. </span><span class="koboSpan" id="kobo.91.2">If you would like to know more about REST, you can read the following article on Wikipedia: </span><em class="italic"><span class="koboSpan" id="kobo.92.1">REST: The Web Framework for Representational State </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.93.1">Transfer</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.94.1"> (</span></span><a href="https://en.wikipedia.org/wiki/Representational_state_transfer"><span class="No-Break"><span class="koboSpan" id="kobo.95.1">https://en.wikipedia.org/wiki/Representational_state</span><span id="_idTextAnchor017"/><span class="koboSpan" id="kobo.96.1">_transfer</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.97.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.98.1">Let’s take a look at the constraints of REST, following which we will show you a simple example of </span><span class="No-Break"><span class="koboSpan" id="kobo.99.1">REST APIs.</span></span></p>
<h2 id="_idParaDest-18"><a id="_idTextAnchor018"/><span class="koboSpan" id="kobo.100.1">The constraints of REST</span></h2>
<p><span class="koboSpan" id="kobo.101.1">Roy Fielding’s paper </span><a id="_idIndexMarker011"/><span class="koboSpan" id="kobo.102.1">defines the following six constraints for </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">REST APIs:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.104.1">Client-server</span></strong><span class="koboSpan" id="kobo.105.1">: This </span><a id="_idIndexMarker012"/><span class="koboSpan" id="kobo.106.1">pattern enforces the principle of separation of concerns. </span><span class="koboSpan" id="kobo.106.2">The server and the client act independently. </span><span class="koboSpan" id="kobo.106.3">The client sends the request and the server responds, following which the client receives and interprets the response. </span><span class="koboSpan" id="kobo.106.4">The client does not need to know how the server works, and </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">vice versa.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.108.1">Statelessness</span></strong><span class="koboSpan" id="kobo.109.1">: The</span><a id="_idIndexMarker013"/><span class="koboSpan" id="kobo.110.1"> server does not maintain any state of the client. </span><span class="koboSpan" id="kobo.110.2">The client should provide the necessary information in the request. </span><span class="koboSpan" id="kobo.110.3">This stateless protocol is important to scale out the capacity of the server because it does not need to remember the session state of </span><span class="No-Break"><span class="koboSpan" id="kobo.111.1">the clients.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.112.1">Cacheability</span></strong><span class="koboSpan" id="kobo.113.1">: The</span><a id="_idIndexMarker014"/><span class="koboSpan" id="kobo.114.1"> response of the server must implicitly or explicitly contain information about whether the response is cacheable, allowing the client and intermediaries to cache the response. </span><span class="koboSpan" id="kobo.114.2">The cache can be performed on the client machine in memory, in browser cache storage, or</span><a id="_idIndexMarker015"/><span class="koboSpan" id="kobo.115.1"> in a </span><strong class="bold"><span class="koboSpan" id="kobo.116.1">content delivery network</span></strong><span class="koboSpan" id="kobo.117.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.118.1">CDN</span></strong><span class="koboSpan" id="kobo.119.1">). </span><span class="koboSpan" id="kobo.119.2">It is also important to improve the scalability and performance of </span><span class="No-Break"><span class="koboSpan" id="kobo.120.1">web APIs.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.121.1">The layered system</span></strong><span class="koboSpan" id="kobo.122.1">: The</span><a id="_idIndexMarker016"/><span class="koboSpan" id="kobo.123.1"> client does not know how it is connected to the server. </span><span class="koboSpan" id="kobo.123.2">There may be multiple layers between the client and the server. </span><span class="koboSpan" id="kobo.123.3">For example, a security layer, a proxy, or a load balancer can be placed between the client and the server without impacting the client or </span><span class="No-Break"><span class="koboSpan" id="kobo.124.1">server code.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.125.1">Code on demand (optional)</span></strong><span class="koboSpan" id="kobo.126.1">: The</span><a id="_idIndexMarker017"/><span class="koboSpan" id="kobo.127.1"> client can request code from the server for client-side use. </span><span class="koboSpan" id="kobo.127.2">For example, the web browser can request JavaScript files to perform </span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">some tasks.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.129.1">Uniform interface</span></strong><span class="koboSpan" id="kobo.130.1">: This</span><a id="_idIndexMarker018"/><span class="koboSpan" id="kobo.131.1"> one is essential for a RESTful system. </span><span class="koboSpan" id="kobo.131.2">It contains resource identification, resource manipulation through representations, self-descriptive messages, and hypermedia as the engine of the application state. </span><span class="koboSpan" id="kobo.131.3">It simplifies and decouples the architecture of the system, which enables each part to </span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">evolve independently.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.133.1">If you feel these principles are a little bit distant or theoretical, let’s l</span><a id="_idTextAnchor019"/><span class="koboSpan" id="kobo.134.1">ook at </span><span class="No-Break"><span class="koboSpan" id="kobo.135.1">an example.</span></span></p>
<h2 id="_idParaDest-19"><a id="_idTextAnchor020"/><span class="koboSpan" id="kobo.136.1">A REST API example</span></h2>
<p><span class="koboSpan" id="kobo.137.1">The</span><a id="_idIndexMarker019"/><span class="koboSpan" id="kobo.138.1"> website </span><a href="https://jsonplaceholder.typicode.com/"><span class="koboSpan" id="kobo.139.1">https://jsonplaceholder.typicode.com/</span></a><span class="koboSpan" id="kobo.140.1"> is a fake REST API that generates fake JSON data. </span><span class="koboSpan" id="kobo.140.2">Open the following link in your browser: </span><a href="https://jsonplaceholder.typicode.com/posts"><span class="koboSpan" id="kobo.141.1">https://jsonplaceholder.typicode.com/posts</span></a><span class="koboSpan" id="kobo.142.1">. </span><span class="koboSpan" id="kobo.142.2">You will see a JSON </span><span class="No-Break"><span class="koboSpan" id="kobo.143.1">string returned:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.144.1">
[  {
    "userId": 1,
    "id": 1,
    "title": "sunt aut facere repellat provident occaecati excepturi optio reprehenderit",
    "body": "quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto"
  },
  {
    "userId": 1,
    "id": 2,
    "title": "qui est esse",
    "body": "est rerum tempore vitae\nsequi sint nihil reprehenderit dolor beatae ea dolores neque\nfugiat blanditiis voluptate porro vel nihil molestiae ut reiciendis\nqui aperiam non debitis possimus qui neque nisi nulla"
  },
...
</span><span class="koboSpan" id="kobo.144.2">]</span></pre>
<p><span class="koboSpan" id="kobo.145.1">From the preceding request, we can get the resource for the collection of </span><span class="No-Break"><span class="koboSpan" id="kobo.146.1">the posts.</span></span></p>
<p><span class="koboSpan" id="kobo.147.1">Now, we can request a specific post by its ID. </span><span class="koboSpan" id="kobo.147.2">For example, we can request the post with ID </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">1</span></strong><span class="koboSpan" id="kobo.149.1"> using the following URL: </span><a href="https://jsonplaceholder.typicode.com/posts/1"><span class="koboSpan" id="kobo.150.1">https://jsonplaceholder.typicode.com/posts/1</span></a><span class="koboSpan" id="kobo.151.1">. </span><span class="koboSpan" id="kobo.151.2">The response is </span><span class="No-Break"><span class="koboSpan" id="kobo.152.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.153.1">
{  "userId": 1,
  "id": 1,
  "title": "sunt aut facere repellat provident occaecati excepturi optio reprehenderit",
  "body": "quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto"
}</span></pre>
<p><span class="koboSpan" id="kobo.154.1">And that’s it! </span><span class="koboSpan" id="kobo.154.2">The</span><a id="_idIndexMarker020"/><span class="koboSpan" id="kobo.155.1"> URLs we used in the preceding examples are the identifiers of the resources. </span><span class="koboSpan" id="kobo.155.2">The responses (the JSON strings) are the representations of the resources. </span><span class="koboSpan" id="kobo.155.3">A resource is manipulated through hypertext representations that are transferred in messages between clients </span><span class="No-Break"><span class="koboSpan" id="kobo.156.1">and servers.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.157.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.158.1">Some documents use URI. </span><span class="koboSpan" id="kobo.158.2">A </span><strong class="bold"><span class="koboSpan" id="kobo.159.1">Uniform Resource Identifier</span></strong><span class="koboSpan" id="kobo.160.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.161.1">URI</span></strong><span class="koboSpan" id="kobo.162.1">) is a unique sequence </span><a id="_idIndexMarker021"/><span class="koboSpan" id="kobo.163.1">of characters that identifies a logical or physical resource used by web technologies. </span><span class="koboSpan" id="kobo.163.2">It might use a location, name, or both. </span><span class="koboSpan" id="kobo.163.3">A </span><strong class="bold"><span class="koboSpan" id="kobo.164.1">Uniform Resource Locator </span></strong><span class="koboSpan" id="kobo.165.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.166.1">URL</span></strong><span class="koboSpan" id="kobo.167.1">) is a</span><a id="_idIndexMarker022"/><span class="koboSpan" id="kobo.168.1"> type of URI that points to a resource over a network. </span><span class="koboSpan" id="kobo.168.2">It defines its protocol, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.169.1">http</span></strong><span class="koboSpan" id="kobo.170.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.171.1">https</span></strong><span class="koboSpan" id="kobo.172.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.173.1">ftp</span></strong><span class="koboSpan" id="kobo.174.1">. </span><span class="koboSpan" id="kobo.174.2">Nowadays, the term </span><em class="italic"><span class="koboSpan" id="kobo.175.1">URL</span></em><span class="koboSpan" id="kobo.176.1"> remains widely used, so, we will use that in this book. </span><span class="koboSpan" id="kobo.176.2">However, we should know they have different scopes. </span><span class="koboSpan" id="kobo.176.3">URI is the superset </span><span class="No-Break"><span class="koboSpan" id="kobo.177.1">of URL.</span></span></p>
<p><span class="koboSpan" id="kobo.178.1">To get a post resource, we send a </span><strong class="source-inline"><span class="koboSpan" id="kobo.179.1">GET</span></strong><span class="koboSpan" id="kobo.180.1"> request. </span><span class="koboSpan" id="kobo.180.2">There are some other methods for manipulating resources, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.181.1">POST</span></strong><span class="koboSpan" id="kobo.182.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">PUT</span></strong><span class="koboSpan" id="kobo.184.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.185.1">PATCH</span></strong><span class="koboSpan" id="kobo.186.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.187.1">DELETE</span></strong><span class="koboSpan" id="kobo.188.1">, as </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">shown here:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-1">
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.190.1">HTTP method</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.191.1">URL</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.192.1">Operation</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.193.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.194.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.195.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.196.1">posts</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.197.1">Read</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.198.1">Read the collection of </span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">the posts</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.200.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.201.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.202.1">posts/1</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.203.1">Read</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.204.1">Read a post by </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">its ID</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.206.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.207.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.208.1">posts/1/comments</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.209.1">Read</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.210.1">Read the comments of </span><span class="No-Break"><span class="koboSpan" id="kobo.211.1">the post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.212.1">POST</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.213.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.214.1">posts</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.215.1">Create</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.216.1">Create a </span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">new post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.218.1">PUT</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.219.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.220.1">posts/1</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.221.1">Update</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.222.1">Update a post by </span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">its ID</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.224.1">PATCH</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.225.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.226.1">posts/1</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.227.1">Update (partial)</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.228.1">Update part of a post by </span><span class="No-Break"><span class="koboSpan" id="kobo.229.1">its ID</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">DELETE</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.231.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">posts/1</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.233.1">Delete</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.234.1">Delete a post by </span><span class="No-Break"><span class="koboSpan" id="kobo.235.1">its ID</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.236.1">Table 1.1 – HTTP methods and URLs for manipulating resources</span></p>
<p><span class="koboSpan" id="kobo.237.1">There are other </span><a id="_idIndexMarker023"/><span class="koboSpan" id="kobo.238.1">methods that are less frequently used, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">HEAD</span></strong><span class="koboSpan" id="kobo.240.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">OPTIONS</span></strong><span class="koboSpan" id="kobo.242.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.244.1">TRACE</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.246.1">As we can see, the HTTP </span><a id="_idIndexMarker024"/><span class="koboSpan" id="kobo.247.1">methods are mapped to the </span><strong class="bold"><span class="koboSpan" id="kobo.248.1">create, update, read, and delete</span></strong><span class="koboSpan" id="kobo.249.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.250.1">CURD</span></strong><span class="koboSpan" id="kobo.251.1">) operations. </span><span class="koboSpan" id="kobo.251.2">But was it always </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">this way</span><a id="_idTextAnchor021"/><span class="koboSpan" id="kobo.253.1">?</span></span></p>
<h2 id="_idParaDest-20"><a id="_idTextAnchor022"/><span class="koboSpan" id="kobo.254.1">Is my web API RESTful?</span></h2>
<p><span class="koboSpan" id="kobo.255.1">As already mentioned, REST is not a rule or a specification. </span><span class="koboSpan" id="kobo.255.2">There is no </span><em class="italic"><span class="koboSpan" id="kobo.256.1">official</span></em><span class="koboSpan" id="kobo.257.1"> standard for REST APIs. </span><span class="koboSpan" id="kobo.257.2">Contrary to popular opinion, it does not require JSON. </span><span class="koboSpan" id="kobo.257.3">Furthermore, it does not require the use of CRUD patterns. </span><span class="koboSpan" id="kobo.257.4">But REST implementation does make use of standards, such as HTTP, URL, JSON, XML, and so on. </span><span class="koboSpan" id="kobo.257.5">People apply HTTP methods and JSON to implement REST, but they may not intentionally apply the constraints as originally described in Fielding’s paper. </span><span class="koboSpan" id="kobo.257.6">This leads people to disagree on whether their APIs are RESTful or not. </span><span class="koboSpan" id="kobo.257.7">Many developers describe their APIs as RESTful, even though these APIs do not satisfy all of the constraints described in </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">Fielding’s paper.</span></span></p>
<p><span class="koboSpan" id="kobo.259.1">Frankly, it is not beneficial to argue whether a web API is </span><em class="italic"><span class="koboSpan" id="kobo.260.1">REST enough</span></em><span class="koboSpan" id="kobo.261.1"> or not. </span><span class="koboSpan" id="kobo.261.2">The goal is to make something work, rather than wasting time on a discussion of this kind of problem. </span><span class="koboSpan" id="kobo.261.3">Not everyone has read the original paper. </span><span class="koboSpan" id="kobo.261.4">Technology also evolves rapidly. </span><span class="koboSpan" id="kobo.261.5">There is a Chinese saying: </span><em class="italic"><span class="koboSpan" id="kobo.262.1">It doesn’t matter whether it is a white cat or a black cat; as long as it catches mice, it is a </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.263.1">good cat.</span></em></span></p>
<p><span class="koboSpan" id="kobo.264.1">However, it would be ideal if we follow conventions when we start a greenfield project. </span><span class="koboSpan" id="kobo.264.2">Generally, a REST-based API is defined with the </span><span class="No-Break"><span class="koboSpan" id="kobo.265.1">following aspects:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.266.1">A base URL, which is the root of the API, such </span><span class="No-Break"><span class="koboSpan" id="kobo.267.1">as </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.268.1">http://api.example.com</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.269.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.270.1">Semantics of HTTP methods, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.271.1">GET</span></strong><span class="koboSpan" id="kobo.272.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.273.1">POST</span></strong><span class="koboSpan" id="kobo.274.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.275.1">PUT</span></strong><span class="koboSpan" id="kobo.276.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.277.1">DELETE</span></strong><span class="koboSpan" id="kobo.278.1">, and </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">so on.</span></span></li>
<li><span class="koboSpan" id="kobo.280.1">A media type, which defines state transition data elements, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.281.1">application/json</span></strong><span class="koboSpan" id="kobo.282.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.283.1">application/xml</span></strong><span class="koboSpan" id="kobo.284.1">, and </span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">so on.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.286.1">In this book, we will try to follow these conventions when we develop the REST APIs with </span><span class="No-Break"><span class="koboSpan" id="kobo.287.1">ASP.NET Core.</span></span></p>
<p><span class="koboSpan" id="kobo.288.1">Now that we have had an overview of a REST API, let’s see how to design one following </span><span class="No-Break"><span class="koboSpan" id="kobo.289.1">the conventions</span><a id="_idTextAnchor023"/><span class="koboSpan" id="kobo.290.1">.</span></span></p>
<h1 id="_idParaDest-21"><a id="_idTextAnchor024"/><span class="koboSpan" id="kobo.291.1">Designing a REST-based API</span></h1>
<p><span class="koboSpan" id="kobo.292.1">To build a</span><a id="_idIndexMarker025"/><span class="koboSpan" id="kobo.293.1"> REST-based API, there are many steps to take before we write code. </span><span class="koboSpan" id="kobo.293.2">The development team needs to communicate with stakeholders and analyze the requirements. </span><span class="koboSpan" id="kobo.293.3">Then, they need to write user stories (or job stories) to define the desired outcomes. </span><span class="koboSpan" id="kobo.293.4">This requires the insights of domain experts or subject matter experts. </span><span class="koboSpan" id="kobo.293.5">We will not cover this part in this book. </span><span class="koboSpan" id="kobo.293.6">Instead, next, we will focus on the API design, which is closer to what </span><span class="No-Break"><span class="koboSpan" id="kobo.294.1">developers do.</span></span></p>
<p><span class="koboSpan" id="kobo.295.1">In the past few years, the concept of </span><strong class="bold"><span class="koboSpan" id="kobo.296.1">API-first</span></strong><span class="koboSpan" id="kobo.297.1"> has gained more traction. </span><span class="koboSpan" id="kobo.297.2">The API-first approach means that the APIs are treated as first-class citizens for your project. </span><span class="koboSpan" id="kobo.297.3">This creates a contract for how the API is supposed to behave before any code is written. </span><span class="koboSpan" id="kobo.297.4">In this way, the development teams can work in parallel because the contract will be established first. </span><span class="koboSpan" id="kobo.297.5">Developers do not have to wait for the API to be released before integrating with frontend or mobile apps. </span><span class="koboSpan" id="kobo.297.6">They can mock and test the APIs based on the contract. </span><span class="koboSpan" id="kobo.297.7">Using tools such</span><a id="_idIndexMarker026"/><span class="koboSpan" id="kobo.298.1"> as </span><strong class="bold"><span class="koboSpan" id="kobo.299.1">Swagger</span></strong><span class="koboSpan" id="kobo.300.1">, the process of building APIs can be automated, such as API documentation, mock APIs, SDKs, and so on. </span><span class="koboSpan" id="kobo.300.2">Automation can significantly speed up the development of APIs and applications, which helps to increase the speed </span><span class="No-Break"><span class="koboSpan" id="kobo.301.1">to market.</span></span></p>
<p><span class="koboSpan" id="kobo.302.1">Here are some steps </span><a id="_idIndexMarker027"/><span class="koboSpan" id="kobo.303.1">we can follow to design a </span><span class="No-Break"><span class="koboSpan" id="kobo.304.1">REST-based API:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.305.1">Identify </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">the resources.</span></span></li>
<li><span class="koboSpan" id="kobo.307.1">Define the relationships </span><span class="No-Break"><span class="koboSpan" id="kobo.308.1">between resources.</span></span></li>
<li><span class="koboSpan" id="kobo.309.1">Identify </span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">operation events.</span></span></li>
<li><span class="koboSpan" id="kobo.311.1">Design the URL paths </span><span class="No-Break"><span class="koboSpan" id="kobo.312.1">for resources.</span></span></li>
<li><span class="koboSpan" id="kobo.313.1">Map API operations to </span><span class="No-Break"><span class="koboSpan" id="kobo.314.1">HTTP methods.</span></span></li>
<li><span class="koboSpan" id="kobo.315.1">Assign </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">response codes.</span></span></li>
<li><span class="koboSpan" id="kobo.317.1">Document </span><span class="No-Break"><span class="koboSpan" id="kobo.318.1">the API.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.319.1">If you are familiar with the preceding steps, you can skip them. </span><span class="koboSpan" id="kobo.319.2">However, if you are not, read the </span><span class="No-Break"><span class="koboSpan" id="kobo.320.1">following sections.</span></span></p>
<p><span class="koboSpan" id="kobo.321.1">A popular </span><a id="_idIndexMarker028"/><span class="koboSpan" id="kobo.322.1">API description format is </span><strong class="bold"><span class="koboSpan" id="kobo.323.1">OpenAPI Specification</span></strong><span class="koboSpan" id="kobo.324.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.325.1">OAS</span></strong><span class="koboSpan" id="kobo.326.1">). </span><span class="koboSpan" id="kobo.326.2">We can use it to describe API modeling and other details of an API. </span><span class="koboSpan" id="kobo.326.3">We do not need to include the implementation details at this stage, because we just want to make a contract. </span><span class="koboSpan" id="kobo.326.4">SwaggerHub (</span><a href="https://app.swaggerhub.com/home"><span class="koboSpan" id="kobo.327.1">https://app.swaggerhub.com/home</span></a><span class="koboSpan" id="kobo.328.1">) is a tool we can </span><a id="_idIndexMarker029"/><span class="koboSpan" id="kobo.329.1">use to design </span><span class="No-Break"><span class="koboSpan" id="kobo.330.1">a</span><a id="_idTextAnchor025"/><span class="koboSpan" id="kobo.331.1">n API.</span></span></p>
<h2 id="_idParaDest-22"><a id="_idTextAnchor026"/><span class="koboSpan" id="kobo.332.1">Identifying the resources</span></h2>
<p><span class="koboSpan" id="kobo.333.1">REST-based APIs </span><a id="_idIndexMarker030"/><span class="koboSpan" id="kobo.334.1">center on resources. </span><span class="koboSpan" id="kobo.334.2">A resource is a collection of data, such as a collection of posts or a collection of users. </span><span class="koboSpan" id="kobo.334.3">A resource is identified by a URL. </span><span class="koboSpan" id="kobo.334.4">The client requests a resource using the URL, and the server responds with a representation of the resource. </span><span class="koboSpan" id="kobo.334.5">The representation of the resource is sent in the hypertext format, which can be interpreted by the widest possible range </span><span class="No-Break"><span class="koboSpan" id="kobo.335.1">of clients.</span></span></p>
<p><span class="koboSpan" id="kobo.336.1">It is important to identify the scope of the domain and the relationships between the resources. </span><span class="koboSpan" id="kobo.336.2">For example, if you are building a blog system, you may have a collection of posts, and each post has a collection of comments. </span><span class="koboSpan" id="kobo.336.3">The scope of an API may evolve as time goes by. </span><span class="koboSpan" id="kobo.336.4">More resources may be added to the current domain, or some resources will be removed. </span><span class="koboSpan" id="kobo.336.5">Also, relationships </span><span class="No-Break"><span class="koboSpan" id="kobo.337.1">may change.</span></span></p>
<p><span class="koboSpan" id="kobo.338.1">Let’s start small. </span><span class="koboSpan" id="kobo.338.2">We</span><a id="_idIndexMarker031"/><span class="koboSpan" id="kobo.339.1"> can use the blog system as an example. </span><span class="koboSpan" id="kobo.339.2">After the requirement analysis, we can identify the </span><span class="No-Break"><span class="koboSpan" id="kobo.340.1">following resources:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.341.1">Posts</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.342.1">Categories</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.343.1">Comments</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.344.1">Users</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.345.1">Tags</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.346.1">You may want to include some properties of each resource in this step. </span><span class="koboSpan" id="kobo.346.2">For example, a post has a title, a body, and a published datetime. </span><span class="koboSpan" id="kobo.346.3">A comment has a body, a publish datetime. </span><span class="koboSpan" id="kobo.346.4">A user has a name and an email. </span><span class="koboSpan" id="kobo.346.5">You may find more properties </span><span class="No-Break"><span class="koboSpan" id="kobo.347.1">during deve</span><a id="_idTextAnchor027"/><span class="koboSpan" id="kobo.348.1">lopment.</span></span></p>
<h2 id="_idParaDest-23"><a id="_idTextAnchor028"/><span class="koboSpan" id="kobo.349.1">Defining the relationships between resources</span></h2>
<p><span class="koboSpan" id="kobo.350.1">Once the </span><a id="_idIndexMarker032"/><span class="koboSpan" id="kobo.351.1">resources are identified, we can define the relationships between them. </span><span class="koboSpan" id="kobo.351.2">For example, a post has a collection of comments. </span><span class="koboSpan" id="kobo.351.3">A comment has a post. </span><span class="koboSpan" id="kobo.351.4">A user has a collection </span><span class="No-Break"><span class="koboSpan" id="kobo.352.1">of posts.</span></span></p>
<p><span class="koboSpan" id="kobo.353.1">The relationship is defined by how these resources relate to each other. </span><span class="koboSpan" id="kobo.353.2">Sometimes, these relationships exist in the database as well, but sometimes, they are specific to the REST </span><span class="No-Break"><span class="koboSpan" id="kobo.354.1">resources only.</span></span></p>
<p><span class="koboSpan" id="kobo.355.1">There are some terms we can use to describe </span><span class="No-Break"><span class="koboSpan" id="kobo.356.1">the relationships:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.357.1">Independent resource</span></strong><span class="koboSpan" id="kobo.358.1">: This </span><a id="_idIndexMarker033"/><span class="koboSpan" id="kobo.359.1">resource can exist independently. </span><span class="koboSpan" id="kobo.359.2">It does not require another resource to exist. </span><span class="koboSpan" id="kobo.359.3">An independent resource can reference other independent or dependent resources. </span><span class="koboSpan" id="kobo.359.4">For example, a post is an independent resource, and it can reference its author. </span><span class="koboSpan" id="kobo.359.5">The authors resource is also an </span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">independent resource.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.361.1">Dependent resource</span></strong><span class="koboSpan" id="kobo.362.1">: This resource requires another resource to exist. </span><span class="koboSpan" id="kobo.362.2">It can still </span><a id="_idIndexMarker034"/><span class="koboSpan" id="kobo.363.1">reference other independent or dependent resources, but it cannot exist without the existence of the parent resource. </span><span class="koboSpan" id="kobo.363.2">For example, a comment requires a post as its parent resource; otherwise, it cannot exist. </span><span class="koboSpan" id="kobo.363.3">A comment can reference its author, which is an </span><span class="No-Break"><span class="koboSpan" id="kobo.364.1">independent resource.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.365.1">Principal key (or primary key)</span></strong><span class="koboSpan" id="kobo.366.1">: This resource has a unique identifier. </span><span class="koboSpan" id="kobo.366.2">It may be the </span><a id="_idIndexMarker035"/><span class="koboSpan" id="kobo.367.1">primary key of the resource in the database. </span><span class="koboSpan" id="kobo.367.2">For example, a post has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.368.1">Id</span></strong><span class="koboSpan" id="kobo.369.1"> property, which can uniquely </span><span class="No-Break"><span class="koboSpan" id="kobo.370.1">identify itself.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.371.1">Foreign key</span></strong><span class="koboSpan" id="kobo.372.1">: This </span><a id="_idIndexMarker036"/><span class="koboSpan" id="kobo.373.1">dependent resource has a property to reference the principal resource, which stores the principal key of the principal resource. </span><span class="koboSpan" id="kobo.373.2">For example, a comment has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.374.1">PostId</span></strong><span class="koboSpan" id="kobo.375.1"> property, which references </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">a post.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.377.1">There are three </span><a id="_idIndexMarker037"/><span class="koboSpan" id="kobo.378.1">relationship types that these resources </span><span class="No-Break"><span class="koboSpan" id="kobo.379.1">can have:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.380.1">One-to-many</span></strong><span class="koboSpan" id="kobo.381.1">: This is </span><a id="_idIndexMarker038"/><span class="koboSpan" id="kobo.382.1">when a resource has many related resources. </span><span class="koboSpan" id="kobo.382.2">For example, a user has many posts, but a post has only one author. </span><span class="koboSpan" id="kobo.382.3">This is also called the </span><em class="italic"><span class="koboSpan" id="kobo.383.1">parent-child (children)</span></em><span class="koboSpan" id="kobo.384.1"> relationship, which is the most common pattern for relationships we can see in the REST-based </span><span class="No-Break"><span class="koboSpan" id="kobo.385.1">API world.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.386.1">One-to-one</span></strong><span class="koboSpan" id="kobo.387.1">: This is</span><a id="_idIndexMarker039"/><span class="koboSpan" id="kobo.388.1"> when a resource has one related resource. </span><span class="koboSpan" id="kobo.388.2">For example, a post has a single author, and one house has only one address. </span><span class="koboSpan" id="kobo.388.3">The one-to-one relationship is a special case of the </span><span class="No-Break"><span class="koboSpan" id="kobo.389.1">one-to-many relationship.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.390.1">Many-to-many</span></strong><span class="koboSpan" id="kobo.391.1">: This</span><a id="_idIndexMarker040"/><span class="koboSpan" id="kobo.392.1"> is when a resource has many related resources and vice versa. </span><span class="koboSpan" id="kobo.392.2">For example, a blog has many tags, and a tag has many blogs. </span><span class="koboSpan" id="kobo.392.3">A movie can have many genres, and a genre can have many movies. </span><span class="koboSpan" id="kobo.392.4">In many systems, a user can have many roles, and a role can</span><a id="_idTextAnchor029"/><span class="koboSpan" id="kobo.393.1"> have </span><span class="No-Break"><span class="koboSpan" id="kobo.394.1">many users.</span></span></li>
</ul>
<h2 id="_idParaDest-24"><a id="_idTextAnchor030"/><span class="koboSpan" id="kobo.395.1">Identifying operations</span></h2>
<p><span class="koboSpan" id="kobo.396.1">Next, we </span><a id="_idIndexMarker041"/><span class="koboSpan" id="kobo.397.1">can think about what operations are needed for each resource. </span><span class="koboSpan" id="kobo.397.2">These operations may come from user stories that are defined beforehand. </span><span class="koboSpan" id="kobo.397.3">Generally, each resource has its CRUD operations. </span><span class="koboSpan" id="kobo.397.4">Note that the operations may include more beyond CRUD. </span><span class="koboSpan" id="kobo.397.5">For example, a post can be published, or it can be unpublished. </span><span class="koboSpan" id="kobo.397.6">A comment can be approved, or it can be rejected. </span><span class="koboSpan" id="kobo.397.7">During this process, we may need to create a new resource or property to reflect </span><span class="No-Break"><span class="koboSpan" id="kobo.398.1">the operation.</span></span></p>
<p><span class="koboSpan" id="kobo.399.1">It is important to consider the scope of the domain. </span><span class="koboSpan" id="kobo.399.2">CRUD operations are easy to understand, but for some complicated relationships, we may need help from </span><span class="No-Break"><span class="koboSpan" id="kobo.400.1">domain experts.</span></span></p>
<p><span class="koboSpan" id="kobo.401.1">When we work on these operations, we need to include important input and output details. </span><span class="koboSpan" id="kobo.401.2">We will use them in the next steps. </span><span class="koboSpan" id="kobo.401.3">However, it is not necessary to include all the details of each resource. </span><span class="koboSpan" id="kobo.401.4">We have enough time later to capture the </span><span class="No-Break"><span class="koboSpan" id="kobo.402.1">complete design.</span></span></p>
<p><span class="koboSpan" id="kobo.403.1">For the example of the blog system, we can identify these operations for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.404.1">Post</span></strong><span class="koboSpan" id="kobo.405.1"> resource (including but not limited to </span><span class="No-Break"><span class="koboSpan" id="kobo.406.1">the following):</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table002">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.407.1">Operation name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.408.1">Resource(s)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.409.1">Input</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.410.1">Output</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.411.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.412.1">createPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.413.1">Post, category, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.414.1">user, tag</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.415.1">Post detail</span></span></p>
</td>
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.416.1">Create a </span><span class="No-Break"><span class="koboSpan" id="kobo.417.1">new post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.418.1">listPosts()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.419.1">Post</span></strong></span></p>
</td>
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.420.1">A list </span><span class="No-Break"><span class="koboSpan" id="kobo.421.1">of posts</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.422.1">List </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">all posts</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.424.1">listPostsByCategory()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.425.1">Post </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.426.1">and category</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.427.1">Category ID</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.428.1">A list </span><span class="No-Break"><span class="koboSpan" id="kobo.429.1">of posts</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.430.1">List posts </span><span class="No-Break"><span class="koboSpan" id="kobo.431.1">by category</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.432.1">listPostsByTag()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.433.1">Post </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.434.1">and tag</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.435.1">Tag or </span><span class="No-Break"><span class="koboSpan" id="kobo.436.1">Tag ID</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.437.1">A list </span><span class="No-Break"><span class="koboSpan" id="kobo.438.1">of posts</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.439.1">List posts </span><span class="No-Break"><span class="koboSpan" id="kobo.440.1">by tag</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.441.1">searchPosts()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.442.1">Post</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.443.1">Search keyword</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.444.1">A list </span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">of posts</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.446.1">Search for Posts by title, author, </span><span class="No-Break"><span class="koboSpan" id="kobo.447.1">and content</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.448.1">viewPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.449.1">Post, category, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.450.1">and user</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.451.1">Post ID</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.452.1">Post detail</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.453.1">View a </span><span class="No-Break"><span class="koboSpan" id="kobo.454.1">post detail</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.455.1">deletePost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.456.1">Post</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.457.1">Post ID</span></span></p>
</td>
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.458.1">Delete </span><span class="No-Break"><span class="koboSpan" id="kobo.459.1">a post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.460.1">updatePost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.461.1">Post </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.462.1">and category</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.463.1">Post detail</span></span></p>
</td>
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.464.1">Update </span><span class="No-Break"><span class="koboSpan" id="kobo.465.1">a post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.466.1">publishPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.467.1">Post</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.468.1">Post ID</span></span></p>
</td>
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.469.1">Publish </span><span class="No-Break"><span class="koboSpan" id="kobo.470.1">a post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.471.1">unpublishPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.472.1">Post</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.473.1">Post ID</span></span></p>
</td>
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.474.1">Unpublish </span><span class="No-Break"><span class="koboSpan" id="kobo.475.1">a post</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.476.1">Table 1.2 – Operations for the Post resource</span></p>
<p><span class="koboSpan" id="kobo.477.1">For some</span><a id="_idIndexMarker042"/><span class="koboSpan" id="kobo.478.1"> operations, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.479.1">createPost</span></strong><span class="koboSpan" id="kobo.480.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.481.1">deletePost</span></strong><span class="koboSpan" id="kobo.482.1">, the output is the results of the operation. </span><span class="koboSpan" id="kobo.482.2">This can be represented with the HTTP status code. </span><span class="koboSpan" id="kobo.482.3">We will discuss </span><span class="No-Break"><span class="koboSpan" id="kobo.483.1">this later.</span></span></p>
<p><span class="koboSpan" id="kobo.484.1">We can list more operations for other resources </span><span class="No-Break"><span class="koboSpan" id="kobo.485.1">as well.</span></span><a id="_idTextAnchor031"/></p>
<h2 id="_idParaDest-25"><a id="_idTextAnchor032"/><span class="koboSpan" id="kobo.486.1">Designing the URL paths for resources</span></h2>
<p><span class="koboSpan" id="kobo.487.1">The next</span><a id="_idIndexMarker043"/><span class="koboSpan" id="kobo.488.1"> step is to design the URL paths for</span><a id="_idIndexMarker044"/><span class="koboSpan" id="kobo.489.1"> each resource. </span><span class="koboSpan" id="kobo.489.2">The clients use URLs to access the resources. </span><span class="koboSpan" id="kobo.489.3">Even though REST is not a standard, there are some guidelines or conventions for designing </span><span class="No-Break"><span class="koboSpan" id="kobo.490.1">URL path</span><a id="_idTextAnchor033"/><span class="koboSpan" id="kobo.491.1">s.</span></span></p>
<p><span class="koboSpan" id="kobo.492.1">Using nouns instead </span><span class="No-Break"><span class="koboSpan" id="kobo.493.1">of verbs</span></span></p>
<p><span class="koboSpan" id="kobo.494.1">The</span><a id="_idIndexMarker045"/><span class="koboSpan" id="kobo.495.1"> operation events we identified in the previous step are some actions, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.496.1">Create</span></strong><span class="koboSpan" id="kobo.497.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.498.1">List</span></strong><span class="koboSpan" id="kobo.499.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.500.1">View</span></strong><span class="koboSpan" id="kobo.501.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.502.1">Delete</span></strong><span class="koboSpan" id="kobo.503.1">, and so on. </span><span class="koboSpan" id="kobo.503.2">However, the URL paths are not usually presented by verbs. </span><span class="koboSpan" id="kobo.503.3">Because HTTP methods such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.504.1">GET</span></strong><span class="koboSpan" id="kobo.505.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.506.1">POST</span></strong><span class="koboSpan" id="kobo.507.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.508.1">PUT</span></strong><span class="koboSpan" id="kobo.509.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.510.1">DELETE</span></strong><span class="koboSpan" id="kobo.511.1"> are already verbs, it is not </span><a id="_idIndexMarker046"/><span class="koboSpan" id="kobo.512.1">necessary to include verbs in the URL paths. </span><span class="koboSpan" id="kobo.512.2">Instead, we should use nouns to represent the resources – for </span><span class="No-Break"><span class="koboSpan" id="kobo.513.1">example, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.514.1">/po</span><a id="_idTextAnchor034"/><span class="koboSpan" id="kobo.515.1">sts</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.516.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.517.1">Using plural nouns to represent collections</span></h3>
<p><span class="koboSpan" id="kobo.518.1">If a </span><a id="_idIndexMarker047"/><span class="koboSpan" id="kobo.519.1">resource is a collection, we should use plural nouns to represent the resource. </span><span class="koboSpan" id="kobo.519.2">For example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">/posts</span></strong><span class="koboSpan" id="kobo.521.1"> is the URL path for the collection of posts. </span><span class="koboSpan" id="kobo.521.2">To get a single post by its ID, we can </span><span class="No-Break"><span class="koboSpan" id="kobo.522.1">use </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.523.1">/posts/{pos</span><a id="_idTextAnchor035"/><span class="koboSpan" id="kobo.524.1">tId}</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.525.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.526.1">Using logical nesting to represent relationships</span></h3>
<p><span class="koboSpan" id="kobo.527.1">For the</span><a id="_idIndexMarker048"/><span class="koboSpan" id="kobo.528.1"> resources that have a relationship, normally, the child resource (i.e., the dependent resource) should be nested under the parent resource, and the path should include the parent identifier. </span><span class="koboSpan" id="kobo.528.2">However, this does not reflect the database structure. </span><span class="koboSpan" id="kobo.528.3">For example, a post can have a collection of comments; the URL looks like </span><strong class="source-inline"><span class="koboSpan" id="kobo.529.1">/posts/{postId}/comments</span></strong><span class="koboSpan" id="kobo.530.1">. </span><span class="koboSpan" id="kobo.530.2">It clearly shows that the comments are related to </span><span class="No-Break"><span class="koboSpan" id="kobo.531.1">the post.</span></span></p>
<p><span class="koboSpan" id="kobo.532.1">However, if the relationships are too deep or complicated, the nesting URL path can be too long. </span><span class="koboSpan" id="kobo.532.2">In this case, we can rethink how to better represent those resources. </span><span class="koboSpan" id="kobo.532.3">For example, if we want to retrieve an author’s information from one comment, we could use </span><strong class="source-inline"><span class="koboSpan" id="kobo.533.1">/posts/{postId}/comments/{commentId}/author</span></strong><span class="koboSpan" id="kobo.534.1">. </span><span class="koboSpan" id="kobo.534.2">But this goes too far. </span><span class="koboSpan" id="kobo.534.3">Instead, if we know the </span><strong class="source-inline"><span class="koboSpan" id="kobo.535.1">UserId</span></strong><span class="koboSpan" id="kobo.536.1"> of the author, we can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.537.1">/users/{userId}</span></strong><span class="koboSpan" id="kobo.538.1">. </span><span class="koboSpan" id="kobo.538.2">Avoid using deep nesting in URL paths because it makes an API more complicated and </span><span class="No-Break"><span class="koboSpan" id="kobo.539.1">not rea</span><a id="_idTextAnchor036"/><span class="koboSpan" id="kobo.540.1">dable.</span></span></p>
<h3><span class="koboSpan" id="kobo.541.1">Allowing filtering, sorting, and pagination</span></h3>
<p><span class="koboSpan" id="kobo.542.1">Returning</span><a id="_idIndexMarker049"/><span class="koboSpan" id="kobo.543.1"> all records simultaneously is not a </span><a id="_idIndexMarker050"/><span class="koboSpan" id="kobo.544.1">good idea. </span><span class="koboSpan" id="kobo.544.2">We can use filtering, sorting, and pagination to return a subset of the </span><a id="_idIndexMarker051"/><span class="koboSpan" id="kobo.545.1">records that a client needs. </span><span class="koboSpan" id="kobo.545.2">These operations can improve the performance of the APIs and provide a better </span><span class="No-Break"><span class="koboSpan" id="kobo.546.1">user experience.</span></span></p>
<p><span class="koboSpan" id="kobo.547.1">For example, if </span><a id="_idIndexMarker052"/><span class="koboSpan" id="kobo.548.1">we want to search a list of posts </span><a id="_idIndexMarker053"/><span class="koboSpan" id="kobo.549.1">for a specific keyword, we </span><a id="_idIndexMarker054"/><span class="koboSpan" id="kobo.550.1">can use a query parameter, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.551.1">/posts?search=keyword</span></strong><span class="koboSpan" id="kobo.552.1">. </span><span class="koboSpan" id="kobo.552.2">If we want to sort posts by the date, we can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.553.1">/posts?sort=date</span></strong><span class="koboSpan" id="kobo.554.1">. </span><span class="koboSpan" id="kobo.554.2">To get the second page of the posts, we can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.555.1">/posts?page=2</span></strong><span class="koboSpan" id="kobo.556.1">. </span><span class="koboSpan" id="kobo.556.2">These query parameters can be combined with</span><a id="_idTextAnchor037"/> <span class="No-Break"><span class="koboSpan" id="kobo.557.1">each other.</span></span></p>
<h3><span class="koboSpan" id="kobo.558.1">What if I cannot find a proper verb in HTTP methods for an operation?</span></h3>
<p><span class="koboSpan" id="kobo.559.1">Generally, HTTP methods can represent CRUD operations. </span><span class="koboSpan" id="kobo.559.2">However, in the real world, there are many more complexities! </span><span class="koboSpan" id="kobo.559.3">For example, besides the basic CRUD operations, there are other operations, such as publishing or unpublishing a post. </span><span class="koboSpan" id="kobo.559.4">So, what HTTP methods should </span><span class="No-Break"><span class="koboSpan" id="kobo.560.1">we use?</span></span></p>
<p><span class="koboSpan" id="kobo.561.1">This is where things can get tricky. </span><span class="koboSpan" id="kobo.561.2">This subject is open to debate, but remember that we are not arguing whether an API is </span><em class="italic"><span class="koboSpan" id="kobo.562.1">RESTful</span></em><span class="koboSpan" id="kobo.563.1"> enough. </span><span class="koboSpan" id="kobo.563.2">We just want to make </span><span class="No-Break"><span class="koboSpan" id="kobo.564.1">it work.</span></span></p>
<p><span class="koboSpan" id="kobo.565.1">There are different approaches for </span><span class="No-Break"><span class="koboSpan" id="kobo.566.1">these scenarios:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.567.1">One possible solution could be treating such operations like a sub-resource. </span><span class="koboSpan" id="kobo.567.2">So, you can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.568.1">/posts/{postId}/publish</span></strong><span class="koboSpan" id="kobo.569.1"> to publish a post. </span><span class="koboSpan" id="kobo.569.2">GitHub uses the following URL to star a gist: </span><strong class="source-inline"><span class="koboSpan" id="kobo.570.1">/gists/{gist_id}/star</span></strong><span class="koboSpan" id="kobo.571.1">. </span><span class="koboSpan" id="kobo.571.2">For more information, check </span><span class="No-Break"><span class="koboSpan" id="kobo.572.1">out </span></span><a href="https://docs.github.com/en/rest/gists/gists#star-a-gist"><span class="No-Break"><span class="koboSpan" id="kobo.573.1">https://docs.github.com/en/rest/gists/gists#star-a-gist</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.574.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.575.1">The post should have an </span><strong class="source-inline"><span class="koboSpan" id="kobo.576.1">IsPublished</span></strong><span class="koboSpan" id="kobo.577.1"> field to indicate whether it is published. </span><span class="koboSpan" id="kobo.577.2">So, actually, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.578.1">publish</span></strong><span class="koboSpan" id="kobo.579.1"> action is an update action, which updates the </span><strong class="source-inline"><span class="koboSpan" id="kobo.580.1">IsPublished</span></strong><span class="koboSpan" id="kobo.581.1"> field only. </span><span class="koboSpan" id="kobo.581.2">Then, you can treat it the same as the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.582.1">updatePost()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.583.1"> operation.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.584.1">Here are some resource URLs for the </span><span class="No-Break"><span class="koboSpan" id="kobo.585.1">blog system:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table003">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.586.1">Operation name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.587.1">URL</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.588.1">Input</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.589.1">Output</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.590.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.591.1">createPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.592.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.593.1">posts</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.594.1">Post detail</span></span></p>
</td>
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.595.1">Create a </span><span class="No-Break"><span class="koboSpan" id="kobo.596.1">new post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.597.1">listPosts()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.598.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.599.1">posts</span></strong></span></p>
</td>
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.600.1">A list </span><span class="No-Break"><span class="koboSpan" id="kobo.601.1">of posts</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.602.1">List </span><span class="No-Break"><span class="koboSpan" id="kobo.603.1">all posts</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.604.1">listPostsByCategory()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.605.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.606.1">posts?categoryId={categoryId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.607.1">Category ID</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.608.1">A list </span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">of posts</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.610.1">List posts </span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">by category</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.612.1">listPostsByTag()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.613.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.614.1">posts?tag={tagId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.615.1">Tag or </span><span class="No-Break"><span class="koboSpan" id="kobo.616.1">Tag ID</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.617.1">A list </span><span class="No-Break"><span class="koboSpan" id="kobo.618.1">of posts</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.619.1">List posts </span><span class="No-Break"><span class="koboSpan" id="kobo.620.1">by tag</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.621.1">searchPosts()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.622.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">posts?search={keyword}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.624.1">Search keyword</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.625.1">A list </span><span class="No-Break"><span class="koboSpan" id="kobo.626.1">of posts</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.627.1">Search for posts by title, author, </span><span class="No-Break"><span class="koboSpan" id="kobo.628.1">and content</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">viewPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.630.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">posts/{postId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.632.1">Post ID</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.633.1">Post detail</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.634.1">View a </span><span class="No-Break"><span class="koboSpan" id="kobo.635.1">post detail</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.636.1">deletePost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.637.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.638.1">posts/{postId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.639.1">Post ID</span></span></p>
</td>
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.640.1">Delete </span><span class="No-Break"><span class="koboSpan" id="kobo.641.1">a post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.642.1">updatePost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.643.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.644.1">posts/{postId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.645.1">Post detail</span></span></p>
</td>
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.646.1">Update </span><span class="No-Break"><span class="koboSpan" id="kobo.647.1">a post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.648.1">publishPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.649.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.650.1">posts/{postId}/publish</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.651.1">Post ID</span></span></p>
</td>
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.652.1">Publish </span><span class="No-Break"><span class="koboSpan" id="kobo.653.1">a post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.654.1">unpublishPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.655.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.656.1">posts/{postId}/unpublish</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.657.1">Post ID</span></span></p>
</td>
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.658.1">Unpublish </span><span class="No-Break"><span class="koboSpan" id="kobo.659.1">a post</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.660.1">Table 1.3 – URLs for the Post resource</span></p>
<p><span class="koboSpan" id="kobo.661.1">Some URLs are identical, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.662.1">deletePost()</span></strong><span class="koboSpan" id="kobo.663.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.664.1">updatePost()</span></strong><span class="koboSpan" id="kobo.665.1">, because we will use HTTP methods to differentiate </span><span class="No-Break"><span class="koboSpan" id="kobo.666.1">those operations.</span></span></p>
<h2 id="_idParaDest-26"><a id="_idTextAnchor038"/><span class="koboSpan" id="kobo.667.1">Mapping API operations to HTTP methods</span></h2>
<p><span class="koboSpan" id="kobo.668.1">Next, we</span><a id="_idIndexMarker055"/><span class="koboSpan" id="kobo.669.1"> need to identify which HTTP method is appropriate for each operation. </span><span class="koboSpan" id="kobo.669.2">As we mentioned before, there are some common HTTP methods for CRUD operations. </span><span class="koboSpan" id="kobo.669.3">For example, when we request a resource, we should use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.670.1">GET</span></strong><span class="koboSpan" id="kobo.671.1"> method. </span><span class="koboSpan" id="kobo.671.2">When we create a new resource, we should use the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.672.1">POST</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.673.1"> method.</span></span></p>
<p><span class="koboSpan" id="kobo.674.1">When we map the API operations to HTTP methods, we also need to consider the safety of the operations and HTTP methods. </span><span class="koboSpan" id="kobo.674.2">There are three types of safety for </span><span class="No-Break"><span class="koboSpan" id="kobo.675.1">HTTP operations:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.676.1">Safe</span></strong><span class="koboSpan" id="kobo.677.1">: The </span><a id="_idIndexMarker056"/><span class="koboSpan" id="kobo.678.1">operation is safe. </span><span class="koboSpan" id="kobo.678.2">It does not change any state of the resource. </span><span class="koboSpan" id="kobo.678.3">For example, if we send a </span><strong class="source-inline"><span class="koboSpan" id="kobo.679.1">GET</span></strong><span class="koboSpan" id="kobo.680.1"> request to </span><strong class="source-inline"><span class="koboSpan" id="kobo.681.1">/posts/{postId}</span></strong><span class="koboSpan" id="kobo.682.1">, it will return the same result, no matter how many times the same request is sent. </span><span class="koboSpan" id="kobo.682.2">For some cases, the resource might be updated by a third party, and the next </span><strong class="source-inline"><span class="koboSpan" id="kobo.683.1">GET</span></strong><span class="koboSpan" id="kobo.684.1"> request will return the updated result. </span><span class="koboSpan" id="kobo.684.2">But this was not caused by the client, so it is important to understand whether the state change is caused by the client who sent </span><span class="No-Break"><span class="koboSpan" id="kobo.685.1">the request.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.686.1">Idempotent</span></strong><span class="koboSpan" id="kobo.687.1">: The</span><a id="_idIndexMarker057"/><span class="koboSpan" id="kobo.688.1"> operation is idempotent, which means it makes state changes to the target resource, but it will produce the same result if the same input is provided. </span><span class="koboSpan" id="kobo.688.2">Note that idempotency does not mean that the server must return the same response. </span><span class="koboSpan" id="kobo.688.3">For example, if we want to delete a post, we can send a </span><strong class="source-inline"><span class="koboSpan" id="kobo.689.1">DELETE</span></strong><span class="koboSpan" id="kobo.690.1"> request to </span><strong class="source-inline"><span class="koboSpan" id="kobo.691.1">/posts/{postId}</span></strong><span class="koboSpan" id="kobo.692.1"> to delete it. </span><span class="koboSpan" id="kobo.692.2">If the request is a success, we will get a </span><strong class="source-inline"><span class="koboSpan" id="kobo.693.1">200 OK</span></strong><span class="koboSpan" id="kobo.694.1"> or a </span><strong class="source-inline"><span class="koboSpan" id="kobo.695.1">204 No Content</span></strong><span class="koboSpan" id="kobo.696.1"> response. </span><span class="koboSpan" id="kobo.696.2">If we send the same request to </span><strong class="source-inline"><span class="koboSpan" id="kobo.697.1">/posts/{postId}</span></strong><span class="koboSpan" id="kobo.698.1"> again, it may return a </span><strong class="source-inline"><span class="koboSpan" id="kobo.699.1">404 Not found</span></strong><span class="koboSpan" id="kobo.700.1"> response because the</span><a id="_idIndexMarker058"/><span class="koboSpan" id="kobo.701.1"> resource was already deleted, but it will not cause any other side effects. </span><span class="koboSpan" id="kobo.701.2">If an operation is idempotent and the client knows whether the previous request failed, it is safe to reissue the request without any </span><span class="No-Break"><span class="koboSpan" id="kobo.702.1">side effects.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.703.1">Unsafe</span></strong><span class="koboSpan" id="kobo.704.1">: The</span><a id="_idIndexMarker059"/><span class="koboSpan" id="kobo.705.1"> operation is unsafe. </span><span class="koboSpan" id="kobo.705.2">It makes state changes to the target resource. </span><span class="koboSpan" id="kobo.705.3">If the request is sent again, it cannot guarantee the same result. </span><span class="koboSpan" id="kobo.705.4">For example, we can send a </span><strong class="source-inline"><span class="koboSpan" id="kobo.706.1">POST</span></strong><span class="koboSpan" id="kobo.707.1"> request to </span><strong class="source-inline"><span class="koboSpan" id="kobo.708.1">/posts</span></strong><span class="koboSpan" id="kobo.709.1"> to create a new post. </span><span class="koboSpan" id="kobo.709.2">If we send the same </span><strong class="source-inline"><span class="koboSpan" id="kobo.710.1">POST</span></strong><span class="koboSpan" id="kobo.711.1"> request again, it will create another new post with the same title and content, and </span><span class="No-Break"><span class="koboSpan" id="kobo.712.1">so on.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.713.1">All safe </span><a id="_idIndexMarker060"/><span class="koboSpan" id="kobo.714.1">methods are also idempotent, but not all idempotent methods are safe. </span><span class="koboSpan" id="kobo.714.2">The following table lists the safety of each </span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">HTTP method:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table004">
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.716.1">HTTP method</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.717.1">Safe</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.718.1">Idempotent</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.719.1">Common operations</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.720.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.721.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.722.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.723.1">Read, list, view, search, show, </span><span class="No-Break"><span class="koboSpan" id="kobo.724.1">and retrieve</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.725.1">HEAD</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.726.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.727.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.728.1">HEAD</span></strong><span class="koboSpan" id="kobo.729.1"> is used to check the availability of a resource without actually </span><span class="No-Break"><span class="koboSpan" id="kobo.730.1">downloading it.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.731.1">OPTIONS</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.732.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.733.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.734.1">OPTIONS</span></strong><span class="koboSpan" id="kobo.735.1"> is used to retrieve the available HTTP methods for a </span><span class="No-Break"><span class="koboSpan" id="kobo.736.1">given resource.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.737.1">TRACE</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.738.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.739.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.740.1">TRACE</span></strong><span class="koboSpan" id="kobo.741.1"> is used to get diagnostic information about a </span><span class="No-Break"><span class="koboSpan" id="kobo.742.1">request/response cycle.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.743.1">PUT</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.744.1">No</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.745.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.746.1">Update </span><span class="No-Break"><span class="koboSpan" id="kobo.747.1">and replace</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.748.1">DELETE</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.749.1">No</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.750.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.751.1">Delete, remove, </span><span class="No-Break"><span class="koboSpan" id="kobo.752.1">and clear</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.753.1">POST</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.754.1">No</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.755.1">No</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.756.1">Create, add, </span><span class="No-Break"><span class="koboSpan" id="kobo.757.1">and update</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.758.1">PATCH</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.759.1">No</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.760.1">No</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.761.1">Update</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.762.1">Table 1.4 – Safety of HTTP methods</span></p>
<p><span class="koboSpan" id="kobo.763.1">The </span><a id="_idIndexMarker061"/><span class="koboSpan" id="kobo.764.1">following table shows how operations are mapped to </span><span class="No-Break"><span class="koboSpan" id="kobo.765.1">HTTP methods:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table005">
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.766.1">Operation name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.767.1">URL</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.768.1">HTTP method</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.769.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.770.1">createPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.771.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.772.1">posts</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.773.1">POST</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.774.1">Create a </span><span class="No-Break"><span class="koboSpan" id="kobo.775.1">new post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.776.1">listPosts()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.777.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.778.1">posts</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.779.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.780.1">List </span><span class="No-Break"><span class="koboSpan" id="kobo.781.1">all posts</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.782.1">listPostsByCategory()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.783.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.784.1">posts?categoryId={categoryId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.785.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.786.1">List posts </span><span class="No-Break"><span class="koboSpan" id="kobo.787.1">by category</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.788.1">listPostsByTag()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.789.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.790.1">posts?tag={tagId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.791.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.792.1">List posts </span><span class="No-Break"><span class="koboSpan" id="kobo.793.1">by tag</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.794.1">searchPosts()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.795.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.796.1">posts?search={keyword}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.797.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.798.1">Search for posts by title, author, </span><span class="No-Break"><span class="koboSpan" id="kobo.799.1">and content</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.800.1">viewPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.801.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.802.1">posts/{postId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.803.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.804.1">View a </span><span class="No-Break"><span class="koboSpan" id="kobo.805.1">post detail</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.806.1">deletePost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.807.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.808.1">posts/{postId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.809.1">DELETE</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.810.1">Delete </span><span class="No-Break"><span class="koboSpan" id="kobo.811.1">a post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.812.1">updatePost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.813.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.814.1">posts/{postId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.815.1">PUT</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.816.1">Update </span><span class="No-Break"><span class="koboSpan" id="kobo.817.1">a post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.818.1">publishPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.819.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.820.1">posts/{postId}/publish</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.821.1">PUT</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.822.1">Publish </span><span class="No-Break"><span class="koboSpan" id="kobo.823.1">a post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.824.1">unpublishPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.825.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.826.1">posts/{postId}/unpublish</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.827.1">PUT</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.828.1">Unpublish </span><span class="No-Break"><span class="koboSpan" id="kobo.829.1">a post</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.830.1">Table 1.5 – Mapping HTTP methods for the Post resource</span></p>
<p><span class="koboSpan" id="kobo.831.1">You may have</span><a id="_idIndexMarker062"/><span class="koboSpan" id="kobo.832.1"> seen some other cases, such as using </span><strong class="source-inline"><span class="koboSpan" id="kobo.833.1">POST</span></strong><span class="koboSpan" id="kobo.834.1"> to update a resource. </span><span class="koboSpan" id="kobo.834.2">That works, but it does not follow the HTTP standard. </span><span class="koboSpan" id="kobo.834.3">Generally speaking, we can state </span><span class="No-Break"><span class="koboSpan" id="kobo.835.1">the following:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.836.1">GET</span></strong><span class="koboSpan" id="kobo.837.1"> is used to </span><span class="No-Break"><span class="koboSpan" id="kobo.838.1">read resources.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.839.1">POST</span></strong><span class="koboSpan" id="kobo.840.1"> is used to create child resources with a server-defined URL, such </span><span class="No-Break"><span class="koboSpan" id="kobo.841.1">as </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.842.1">/posts</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.843.1">.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.844.1">PUT</span></strong><span class="koboSpan" id="kobo.845.1"> is used to create or replace the resource with a client-defined URL, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.846.1">/posts/{postId}</span></strong><span class="koboSpan" id="kobo.847.1">.. </span><span class="koboSpan" id="kobo.847.2">In many cases, </span><strong class="source-inline"><span class="koboSpan" id="kobo.848.1">PUT </span></strong><span class="koboSpan" id="kobo.849.1">can also be used to update </span><span class="No-Break"><span class="koboSpan" id="kobo.850.1">a resource.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.851.1">PATCH</span></strong><span class="koboSpan" id="kobo.852.1"> is used to update parts of the resource with a client-defined URL, such </span><span class="No-Break"><span class="koboSpan" id="kobo.853.1">as </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.854.1">/posts/{postId}</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.855.1">.</span></span><a id="_idTextAnchor039"/></li>
</ul>
<h2 id="_idParaDest-27"><a id="_idTextAnchor040"/><span class="koboSpan" id="kobo.856.1">Assigning response codes</span></h2>
<p><span class="koboSpan" id="kobo.857.1">It is time </span><a id="_idIndexMarker063"/><span class="koboSpan" id="kobo.858.1">to assign the HTTP response codes for </span><a id="_idIndexMarker064"/><span class="koboSpan" id="kobo.859.1">the operations. </span><span class="koboSpan" id="kobo.859.2">There are some main response </span><span class="No-Break"><span class="koboSpan" id="kobo.860.1">code categories:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.861.1">2xx</span></strong><strong class="bold"><span class="koboSpan" id="kobo.862.1"> codes – success</span></strong><span class="koboSpan" id="kobo.863.1">: The action requested by the client was received, understood, </span><span class="No-Break"><span class="koboSpan" id="kobo.864.1">and accepted.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.865.1">3xx</span></strong><strong class="bold"><span class="koboSpan" id="kobo.866.1"> codes – redirection</span></strong><span class="koboSpan" id="kobo.867.1">: The client must take additional action to complete the request. </span><span class="koboSpan" id="kobo.867.2">It is often used to indicate that the client should be redirected to a </span><span class="No-Break"><span class="koboSpan" id="kobo.868.1">new location.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.869.1">4xx</span></strong><strong class="bold"><span class="koboSpan" id="kobo.870.1"> code – client errors</span></strong><span class="koboSpan" id="kobo.871.1">: The operation was not successful, but the client can </span><span class="No-Break"><span class="koboSpan" id="kobo.872.1">try again.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.873.1">5xx</span></strong><strong class="bold"><span class="koboSpan" id="kobo.874.1"> codes – server errors</span></strong><span class="koboSpan" id="kobo.875.1">: The server has encountered an error or is incapable of performing the request. </span><span class="koboSpan" id="kobo.875.2">The client can retry in </span><span class="No-Break"><span class="koboSpan" id="kobo.876.1">the future.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.877.1">A common</span><a id="_idIndexMarker065"/><span class="koboSpan" id="kobo.878.1"> issue is that some developers invent their own response codes. </span><span class="koboSpan" id="kobo.878.2">For example, if we create a new post, we expect the server to return a </span><strong class="source-inline"><span class="koboSpan" id="kobo.879.1">201 Created</span></strong><span class="koboSpan" id="kobo.880.1"> response code. </span><span class="koboSpan" id="kobo.880.2">Some developers may use </span><strong class="source-inline"><span class="koboSpan" id="kobo.881.1">200 OK</span></strong><span class="koboSpan" id="kobo.882.1"> and include a status code in the response body. </span><span class="koboSpan" id="kobo.882.2">This is not a good idea. </span><span class="koboSpan" id="kobo.882.3">There are many layers between the server and the client. </span><span class="koboSpan" id="kobo.882.4">Using your own codes will probably cause problems for these middleware components. </span><span class="koboSpan" id="kobo.882.5">Make sure to use the right code for the right reason. </span><span class="koboSpan" id="kobo.882.6">Here are some common </span><span class="No-Break"><span class="koboSpan" id="kobo.883.1">response codes:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table006">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="bold"><span class="koboSpan" id="kobo.884.1">HTTP </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.885.1">response code</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.886.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.887.1">200 OK</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.888.1">The standard response for successful </span><span class="No-Break"><span class="koboSpan" id="kobo.889.1">HTTP requests.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.890.1">201 Created</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.891.1">The request has been fulfilled, resulting in a new resource </span><span class="No-Break"><span class="koboSpan" id="kobo.892.1">being created.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.893.1">202 Accepted</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.894.1">The request has been accepted for processing, but processing has not </span><span class="No-Break"><span class="koboSpan" id="kobo.895.1">been completed.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.896.1">204 </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.897.1">No Content</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.898.1">The server has successfully processed the request but does not return any content. </span><span class="koboSpan" id="kobo.898.2">This is common for </span><span class="No-Break"><span class="koboSpan" id="kobo.899.1">delete operations.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.900.1">400 </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.901.1">Bad Request</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.902.1">The server cannot understand or process the request due to a client error, such as malformed syntax, a request size too large, or invalid input. </span><span class="koboSpan" id="kobo.902.2">The client should not repeat the request </span><span class="No-Break"><span class="koboSpan" id="kobo.903.1">without modifications.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.904.1">401 Unauthorized</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.905.1">The request requires </span><span class="No-Break"><span class="koboSpan" id="kobo.906.1">user authentication.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.907.1">403 Forbidden</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.908.1">The server understood the request but is refusing action. </span><span class="koboSpan" id="kobo.908.2">This may be due to the fact that the client does not have the necessary permissions or is attempting a </span><span class="No-Break"><span class="koboSpan" id="kobo.909.1">prohibited action.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.910.1">404 </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.911.1">Not Found</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.912.1">The requested resource could not </span><span class="No-Break"><span class="koboSpan" id="kobo.913.1">be found.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.914.1">500 Internal </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.915.1">Server Error</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.916.1">A generic error message. </span><span class="koboSpan" id="kobo.916.2">The server encountered an unexpected condition, so it cannot process the request, and no more specific messages are suitable at </span><span class="No-Break"><span class="koboSpan" id="kobo.917.1">this time.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.918.1">503 </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.919.1">Service Unavailable</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.920.1">The server is currently unable to handle the request due to temporary overloading or maintenance of the server. </span><span class="koboSpan" id="kobo.920.2">The response should contain a </span><strong class="source-inline"><span class="koboSpan" id="kobo.921.1">Retry-After</span></strong><span class="koboSpan" id="kobo.922.1"> header if possible so that the client can retry after the </span><span class="No-Break"><span class="koboSpan" id="kobo.923.1">estimated time,</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.924.1">Table 1.6 – Common HTTP response codes</span></p>
<p><span class="koboSpan" id="kobo.925.1">Here is</span><a id="_idIndexMarker066"/><span class="koboSpan" id="kobo.926.1"> the table that </span><a id="_idIndexMarker067"/><span class="koboSpan" id="kobo.927.1">shows the response codes for </span><span class="No-Break"><span class="koboSpan" id="kobo.928.1">each operation:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table007">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.929.1">Operation name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.930.1">URL</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.931.1">HTTP method</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.932.1">Response</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.933.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.934.1">createPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.935.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.936.1">posts</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.937.1">POST</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.938.1">Post, 201</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.939.1">Create a </span><span class="No-Break"><span class="koboSpan" id="kobo.940.1">new post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.941.1">listPosts()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.942.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.943.1">posts</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.944.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.945.1">Post[], 200</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.946.1">List </span><span class="No-Break"><span class="koboSpan" id="kobo.947.1">all posts</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.948.1">listPostsByCategory()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.949.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.950.1">posts?categoryId={categoryId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.951.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.952.1">Post[], 200</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.953.1">List posts </span><span class="No-Break"><span class="koboSpan" id="kobo.954.1">by category</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.955.1">listPostsByTag()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.956.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.957.1">posts?tag={tagId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.958.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.959.1">Post[], 200</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.960.1">List posts </span><span class="No-Break"><span class="koboSpan" id="kobo.961.1">by tag</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.962.1">searchPosts()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.963.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.964.1">posts?search={keyword}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.965.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.966.1">Post[], 200</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.967.1">Search for posts by title, author, </span><span class="No-Break"><span class="koboSpan" id="kobo.968.1">and content</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.969.1">viewPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.970.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.971.1">posts/{postId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.972.1">GET</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.973.1">Post, 200</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.974.1">View a </span><span class="No-Break"><span class="koboSpan" id="kobo.975.1">post detail</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.976.1">deletePost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.977.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.978.1">posts/{postId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.979.1">DELETE</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.980.1">204, 404</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.981.1">Delete </span><span class="No-Break"><span class="koboSpan" id="kobo.982.1">a post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.983.1">updatePost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.984.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.985.1">posts/{postId}</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.986.1">PUT</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.987.1">200</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.988.1">Update </span><span class="No-Break"><span class="koboSpan" id="kobo.989.1">a post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.990.1">publishPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.991.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.992.1">posts/{postId}/publish</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.993.1">PUT</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.994.1">200</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.995.1">Publish </span><span class="No-Break"><span class="koboSpan" id="kobo.996.1">a post</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.997.1">unpublishPost()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.998.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.999.1">posts/{postId}/unpublish</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1000.1">PUT</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1001.1">200</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.1002.1">Unpublish </span><span class="No-Break"><span class="koboSpan" id="kobo.1003.1">a post</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor041"/><span class="koboSpan" id="kobo.1004.1">Table 1.7 – Response codes for the Post resource</span></p>
<p><span class="koboSpan" id="kobo.1005.1">It is </span><a id="_idIndexMarker068"/><span class="koboSpan" id="kobo.1006.1">essential to </span><a id="_idIndexMarker069"/><span class="koboSpan" id="kobo.1007.1">utilize the correct response code in order to prevent any misunderstandings. </span><span class="koboSpan" id="kobo.1007.2">This will ensure that all communication is clear and concise, thus avoiding any </span><span class="No-Break"><span class="koboSpan" id="kobo.1008.1">potential confusion.</span></span></p>
<h3><span class="koboSpan" id="kobo.1009.1">What if I want to create my own status codes?</span></h3>
<p><span class="koboSpan" id="kobo.1010.1">Technically, you</span><a id="_idIndexMarker070"/><span class="koboSpan" id="kobo.1011.1"> can create your own status codes, but in practice, please stick as closely to the standards as possible. </span><span class="koboSpan" id="kobo.1011.2">If you invent your own status codes, that would be risky. </span><span class="koboSpan" id="kobo.1011.3">Your users might be in trouble consuming your APIs because they do not know your status codes. </span><span class="koboSpan" id="kobo.1011.4">You should think about what the benefits are to have your own status  codes. </span><span class="koboSpan" id="kobo.1011.5">The convention is to respect the HTTP status codes defined in RFC. </span><span class="koboSpan" id="kobo.1011.6">Before you create your own status codes, make sure you check the list of HTTP status codes first. </span><span class="koboSpan" id="kobo.1011.7">Do not create your own status code unless you have strong reasons. </span><span class="koboSpan" id="kobo.1011.8">You can find more information </span><span class="No-Break"><span class="koboSpan" id="kobo.1012.1">here: </span></span><a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes"><span class="No-Break"><span class="koboSpan" id="kobo.1013.1">https://en.wikipedia.org/wiki/List_of_HTTP_status_codes</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1014.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1015.1">However, there might be some special situations where you want to indicate a more specific status in the response. </span><span class="koboSpan" id="kobo.1015.2">For example, you might have an API that can process a task, but it might fail for different reasons. </span><span class="koboSpan" id="kobo.1015.3">You might want to indicate a more detailed message in the response to let your users know what happened, rather than returning a common </span><strong class="source-inline"><span class="koboSpan" id="kobo.1016.1">4xx</span></strong><span class="koboSpan" id="kobo.1017.1"> code. </span><span class="koboSpan" id="kobo.1017.2">You should think about the business logic carefully and differentiate between HTTP status codes and business status codes. </span><span class="koboSpan" id="kobo.1017.3">If you cannot find a proper code in the HTTP status codes, and you do want to show a business-related status in the response, you can choose the HTTP status code to indicate the category of the response, and then attach a response body that contains your business status code. </span><span class="koboSpan" id="kobo.1017.4">For example, you can return a response as </span><span class="No-Break"><span class="koboSpan" id="kobo.1018.1">shown here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1019.1">
400 Bad Request{ "error_code": 1, "message": "The post is locked and cannot be updated."}</span></pre>
<p><span class="koboSpan" id="kobo.1020.1">So, the HTTP status </span><a id="_idIndexMarker071"/><span class="koboSpan" id="kobo.1021.1">code represents the common status of the operation, and in the response body, you can include some information that is specific to your system. </span><span class="koboSpan" id="kobo.1021.2">We will discuss how to handle errors using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1022.1">Problem Details</span></strong><span class="koboSpan" id="kobo.1023.1"> object in </span><a href="B18971_16.xhtml#_idTextAnchor671"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1024.1">Chapter 16</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1025.1">.</span></span></p>
<h2 id="_idParaDest-28"><a id="_idTextAnchor042"/><span class="koboSpan" id="kobo.1026.1">Documenting the API</span></h2>
<p><span class="koboSpan" id="kobo.1027.1">OpenAPI is a</span><a id="_idIndexMarker072"/><span class="koboSpan" id="kobo.1028.1"> popular REST API specification. </span><span class="koboSpan" id="kobo.1028.2">It is a</span><a id="_idIndexMarker073"/><span class="koboSpan" id="kobo.1029.1"> programming language-agnostic interface description for REST APIs, allowing both humans and computers to discover and understand the capabilities of a service without access to source code. </span><span class="koboSpan" id="kobo.1029.2">Similar to an interface, it describes the inputs and outputs of an API, as well as how they should be transmitted. </span><span class="koboSpan" id="kobo.1029.3">It is also known as the </span><span class="No-Break"><span class="koboSpan" id="kobo.1030.1">Swagger specification.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.1031.1">Swagger versus OpenAPI</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1032.1">Sometimes, </span><em class="italic"><span class="koboSpan" id="kobo.1033.1">Swagger</span></em><span class="koboSpan" id="kobo.1034.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.1035.1">OpenAPI</span></em><span class="koboSpan" id="kobo.1036.1"> are used interchangeably. </span><span class="koboSpan" id="kobo.1036.2">The Swagger project was </span><a id="_idIndexMarker074"/><span class="koboSpan" id="kobo.1037.1">developed in early 2010s to define a simple contract for an API that contains everything needed to produce or consume an API. </span><span class="koboSpan" id="kobo.1037.2">It was donated to the OpenAPI initiative in 2015. </span><span class="koboSpan" id="kobo.1037.3">So, OpenAPI refers to the API specification, and Swagger refers to the open-source and commercial projects from SmartBear, which work with the OpenAPI specification. </span><span class="koboSpan" id="kobo.1037.4">In short, OpenAPI is a specification, and Swagger is tooling that uses the OpenAPI specification. </span><span class="koboSpan" id="kobo.1037.5">Swagger UI is also one of the Swagger tools. </span><span class="koboSpan" id="kobo.1037.6">At the time of writing, the latest version of OpenAPI </span><span class="No-Break"><span class="koboSpan" id="kobo.1038.1">was 3.1.0.</span></span></p>
<p><span class="koboSpan" id="kobo.1039.1">We can use SwaggerHub to design an API based on the previous steps. </span><span class="koboSpan" id="kobo.1039.2">Here is an example, which defines a simple API for a </span><span class="No-Break"><span class="koboSpan" id="kobo.1040.1">blog system:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1041.1">
openapi: 3.0.0servers:
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/yanxiaodi/MyBlog/1.0.0
info:
  description: This is a simple API
  version: '1.0.0'
  title: Sample Blog System API
  contact:
    email: you@your-company.com
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
tags:
  - name: admins
    description: Secured Admin-only calls
  - name: developers
    description: Operations available to regular developers
paths:
  /posts:
    get:
      tags:
        - developers
      summary: searches posts
      operationId: searchPost
      description: |
        By passing in the appropriate options, you can search for
        available blogs in the system
      parameters:
        - in: query
          name: searchString
          description: pass an optional search string for looking up post
          required: false
          schema:
            type: string
        - in: query
          name: skip
          description: number of records to skip for pagination
          schema:
            type: integer
            format: int32
            minimum: 0
        - in: query
          name: limit
          description: maximum number of records to return
          schema:
            type: integer
            format: int32
            minimum: 0
            maximum: 50
      responses:
        '200':
          description: search results matching criteria
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Post'
        '400':
          description: bad input parameter</span></pre>
<p><span class="koboSpan" id="kobo.1042.1">The other file of this file has </span><span class="No-Break"><span class="koboSpan" id="kobo.1043.1">been omitted.</span></span></p>
<p><span class="koboSpan" id="kobo.1044.1">The preceding </span><a id="_idIndexMarker075"/><span class="koboSpan" id="kobo.1045.1">API documentation is a YAML file, which defines two models (resources) – </span><strong class="source-inline"><span class="koboSpan" id="kobo.1046.1">Post</span></strong><span class="koboSpan" id="kobo.1047.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1048.1">Category</span></strong><span class="koboSpan" id="kobo.1049.1"> – and two operations – </span><strong class="source-inline"><span class="koboSpan" id="kobo.1050.1">GET</span></strong><span class="koboSpan" id="kobo.1051.1"> for searching posts and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1052.1">POST</span></strong><span class="koboSpan" id="kobo.1053.1"> for creating a new post. </span><span class="koboSpan" id="kobo.1053.2">For each operation, there are details about the input and output, including the expected </span><span class="No-Break"><span class="koboSpan" id="kobo.1054.1">response codes.</span></span></p>
<p><span class="koboSpan" id="kobo.1055.1">After the API design is done, we can share the API documentation with other developers for integrations, as </span><span class="No-Break"><span class="koboSpan" id="kobo.1056.1">shown here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer005">
<span class="koboSpan" id="kobo.1057.1"><img alt="Figure 1.1 – The SwaggerHub UI" src="image/B18971_01_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1058.1">Figure 1.1 – The SwaggerHub UI</span></p>
<p><span class="koboSpan" id="kobo.1059.1">Note that </span><a id="_idIndexMarker076"/><span class="koboSpan" id="kobo.1060.1">you might need to add more properties, based on your user stories and domains, before you share the API documentation with other teams. </span><span class="koboSpan" id="kobo.1060.2">The API contract should be quite stable; otherwise, it will impact </span><span class="No-Break"><span class="koboSpan" id="kobo.1061.1">the consumers.</span></span></p>
<p><span class="koboSpan" id="kobo.1062.1">We have explained how to design a REST API. </span><span class="koboSpan" id="kobo.1062.2">If you would like to learn how to start developing with ASP.NET Core, you can move on to </span><a href="B18971_02.xhtml#_idTextAnchor068"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1063.1">Chapter 2</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1064.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1065.1">REST API is one of the most popular API styles. </span><span class="koboSpan" id="kobo.1065.2">In the next section, we will introduce other API styles, such as RPC APIs, GraphQL APIs, and </span><span class="No-Break"><span class="koboSpan" id="kobo.1066.1">real-tim</span><a id="_idTextAnchor043"/><span class="koboSpan" id="kobo.1067.1">e APIs.</span></span></p>
<h1 id="_idParaDest-29"><a id="_idTextAnchor044"/><span class="koboSpan" id="kobo.1068.1">RPC and GraphQL APIs</span></h1>
<p><span class="koboSpan" id="kobo.1069.1">While REST-based APIs are widely used in many scenarios today, it is not the only style of web API. </span><span class="koboSpan" id="kobo.1069.2">For some scenarios, RPC-based APIs or GraphQL APIs may be better suited. </span><span class="koboSpan" id="kobo.1069.3">It is important to understand the advantages and disadvantages of each style of API so that you can choose the right styles for </span><span class="No-Break"><span class="koboSpan" id="kobo.1070.1">your sce</span><a id="_idTextAnchor045"/><span class="koboSpan" id="kobo.1071.1">narios.</span></span></p>
<h2 id="_idParaDest-30"><a id="_idTextAnchor046"/><span class="koboSpan" id="kobo.1072.1">What is an RPC-based API?</span></h2>
<p><span class="koboSpan" id="kobo.1073.1">RPC has </span><a id="_idIndexMarker077"/><span class="koboSpan" id="kobo.1074.1">existed for many years. </span><span class="koboSpan" id="kobo.1074.2">It is the earliest, simplest form of web interaction. </span><span class="koboSpan" id="kobo.1074.3">It is like a local call in some other languages, but it executes over a network. </span><span class="koboSpan" id="kobo.1074.4">The client is given a list of available methods. </span><span class="koboSpan" id="kobo.1074.5">Each method takes pre-defined, typed, and ordered parameters, returning a structured response result. </span><span class="koboSpan" id="kobo.1074.6">So, the client can run on a different machine or in a different process but still work with the server, such as in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1075.1">same application.</span></span></p>
<p><span class="koboSpan" id="kobo.1076.1">In this way, the client is tightly coupled to the server. </span><span class="koboSpan" id="kobo.1076.2">If the server changes these methods or any parameters, the client will be affected. </span><span class="koboSpan" id="kobo.1076.3">Developers must update the code of the client to match the new server methods. </span><span class="koboSpan" id="kobo.1076.4">This can be a disadvantage of RPC-based APIs, but it can offer </span><span class="No-Break"><span class="koboSpan" id="kobo.1077.1">better performance.</span></span></p>
<p><span class="koboSpan" id="kobo.1078.1">The remote procedures are defined </span><a id="_idIndexMarker078"/><span class="koboSpan" id="kobo.1079.1">with the </span><strong class="bold"><span class="koboSpan" id="kobo.1080.1">interface definition language</span></strong><span class="koboSpan" id="kobo.1081.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1082.1">IDL</span></strong><span class="koboSpan" id="kobo.1083.1">). </span><span class="koboSpan" id="kobo.1083.2">The IDL defines the methods and parameters of the remote procedure. </span><span class="koboSpan" id="kobo.1083.3">Normally, some code generators can generate the client and server stubs based on the IDL. </span><span class="koboSpan" id="kobo.1083.4">The code is strongly typed, which provides better type safety and </span><span class="No-Break"><span class="koboSpan" id="kobo.1084.1">error handling.</span></span></p>
<p><span class="koboSpan" id="kobo.1085.1">To implement an RPC-based API, there are some specifications for different languages. </span><span class="koboSpan" id="kobo.1085.2">For example,  WCF was a popular framework for RPC a couple of years ago. </span><span class="koboSpan" id="kobo.1085.3">Some other popular frameworks include XML-RPC, SOAP PRC, JSON-RPC, </span><span class="No-Break"><span class="koboSpan" id="kobo.1086.1">and gRPC.</span></span></p>
<p><span class="koboSpan" id="kobo.1087.1">Because RPC is like a local method call, you often see verbs in the method names. </span><span class="koboSpan" id="kobo.1087.2">Unlike REST, RPC supports various operations beyond CRUD. </span><span class="koboSpan" id="kobo.1087.3">Here is an example of a JSON-RPC request </span><span class="No-Break"><span class="koboSpan" id="kobo.1088.1">and response:</span></span></p>
<p><span class="No-Break"><span class="koboSpan" id="kobo.1089.1">Request:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1090.1">
POST https://rpc.example.com/calculator-service HTTP/1.1Content-Type: application/json
Content-Length: ...Accept: application/json
{"jsonrpc": "2.0", "method": "subtract", "params": [42, 23], "id": 1}</span></pre>
<p><span class="No-Break"><span class="koboSpan" id="kobo.1091.1">Response:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1092.1">
{ "jsonrpc": "2.0", "result": 19, "id": 3 }</span></pre> <p><span class="koboSpan" id="kobo.1093.1">One of the </span><a id="_idIndexMarker079"/><span class="koboSpan" id="kobo.1094.1">most popular RPC frameworks is gRPC, which we will discuss in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1095.1">nex</span><a id="_idTextAnchor047"/><span class="koboSpan" id="kobo.1096.1">t section.</span></span></p>
<h3><span class="koboSpan" id="kobo.1097.1">What is gRPC?</span></h3>
<p><span class="koboSpan" id="kobo.1098.1">One of </span><a id="_idIndexMarker080"/><span class="koboSpan" id="kobo.1099.1">the</span><a id="_idIndexMarker081"/><span class="koboSpan" id="kobo.1100.1"> most popular RPC frameworks is gRPC. </span><span class="koboSpan" id="kobo.1100.2">It is a high-performance, open-source modern RPC framework for building network services and distributed applications. </span><span class="koboSpan" id="kobo.1100.3">gRPC was initially created by Google, which used a RPC framework called Stubby. </span><span class="koboSpan" id="kobo.1100.4">In March 2015, Google decided to make it open-source, resulting in gRPC, which is now used in many organizations outside </span><span class="No-Break"><span class="koboSpan" id="kobo.1101.1">of Google.</span></span></p>
<p><span class="koboSpan" id="kobo.1102.1">gRPC has some </span><a id="_idIndexMarker082"/><span class="koboSpan" id="kobo.1103.1">awesome features, such as </span><span class="No-Break"><span class="koboSpan" id="kobo.1104.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1105.1">Interoperability</span></strong><span class="koboSpan" id="kobo.1106.1">: gRPC uses a </span><strong class="bold"><span class="koboSpan" id="kobo.1107.1">Protocol Buffer</span></strong><span class="koboSpan" id="kobo.1108.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1109.1">protobuf</span></strong><span class="koboSpan" id="kobo.1110.1">) file to declare services and messages, which </span><a id="_idIndexMarker083"/><span class="koboSpan" id="kobo.1111.1">enables gRPC to be completely language- and platform-agnostic. </span><span class="koboSpan" id="kobo.1111.2">You can find gRPC tools and libraries for all major programming languages </span><span class="No-Break"><span class="koboSpan" id="kobo.1112.1">and platforms.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1113.1">Performance</span></strong><span class="koboSpan" id="kobo.1114.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1115.1">protobuf</span></strong><span class="koboSpan" id="kobo.1116.1"> is a binary format, which has a smaller size and faster performance than JSON. </span><span class="koboSpan" id="kobo.1116.2">It is not readable by humans, but it is readable by computers. </span><span class="koboSpan" id="kobo.1116.3">HTTP/2 also supports multiplexing requests over a single connection. </span><span class="koboSpan" id="kobo.1116.4">It needs fewer resources, even in </span><span class="No-Break"><span class="koboSpan" id="kobo.1117.1">slower networks.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1118.1">Streaming</span></strong><span class="koboSpan" id="kobo.1119.1">: gRPC is based on the HTTP/2 protocol, which makes it support </span><span class="No-Break"><span class="koboSpan" id="kobo.1120.1">bidirectional streaming.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1121.1">Productivity</span></strong><span class="koboSpan" id="kobo.1122.1">: Developers author protobuf files (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1123.1">.proto</span></strong><span class="koboSpan" id="kobo.1124.1">) to describe services with input and output. </span><span class="koboSpan" id="kobo.1124.2">Then, they can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1125.1">.proto</span></strong><span class="koboSpan" id="kobo.1126.1"> files to generate stubs for different languages or platforms. </span><span class="koboSpan" id="kobo.1126.2">It is similar to the OpenAPI specification. </span><span class="koboSpan" id="kobo.1126.3">Teams can focus on</span><a id="_idIndexMarker084"/><span class="koboSpan" id="kobo.1127.1"> business logic and work on the same service </span><span class="No-Break"><span class="koboSpan" id="kobo.1128.1">in parallel.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1129.1">Security</span></strong><span class="koboSpan" id="kobo.1130.1">: gRPC is designed to be secure. </span><span class="koboSpan" id="kobo.1130.2">HTTP/2 is built on top of </span><strong class="bold"><span class="koboSpan" id="kobo.1131.1">Transport Layer Security</span></strong><span class="koboSpan" id="kobo.1132.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1133.1">TLS</span></strong><span class="koboSpan" id="kobo.1134.1">) end-to-end </span><a id="_idIndexMarker085"/><span class="koboSpan" id="kobo.1135.1">encrypted connection. </span><span class="koboSpan" id="kobo.1135.2">It also supports client </span><span class="No-Break"><span class="koboSpan" id="kobo.1136.1">certificate authentication.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1137.1">With these </span><a id="_idIndexMarker086"/><span class="koboSpan" id="kobo.1138.1">benefits, gRPC is a good choice for microservices-style architecture. </span><span class="koboSpan" id="kobo.1138.2">It can efficiently connect services in and across data centers, even across load balancers. </span><span class="koboSpan" id="kobo.1138.3">It is applicable in the last mile of distributed systems because service-to-service communication needs low latency and high performance. </span><span class="koboSpan" id="kobo.1138.4">Also, the polyglot systems may have multiple languages or platforms, and gRPC can support different languages </span><span class="No-Break"><span class="koboSpan" id="kobo.1139.1">and platforms.</span></span></p>
<p><span class="koboSpan" id="kobo.1140.1">Here is an example of a gRPC </span><strong class="source-inline"><span class="koboSpan" id="kobo.1141.1">.</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1142.1">proto</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1143.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1144.1">
syntax = "proto3";option csharp_namespace = "GrpcGreeter";
package greet;
service Greeter {
  // Sends a greeting message.
</span><span class="koboSpan" id="kobo.1144.2">  rpc SayHello (HelloRequest) returns (HelloReply);
}
// The request message containing the user's name.
</span><span class="koboSpan" id="kobo.1144.3">message HelloRequest {
  string name = 1;
}
// The response message containing the greeting.
</span><span class="koboSpan" id="kobo.1144.4">message HelloReply {
  string message = 1;
}</span></pre>
<p><span class="koboSpan" id="kobo.1145.1">ASP.NET Core </span><a id="_idIndexMarker087"/><span class="koboSpan" id="kobo.1146.1">provides great support for gRPC. </span><span class="koboSpan" id="kobo.1146.2">With the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1147.1">.proto</span></strong><span class="koboSpan" id="kobo.1148.1"> file, the .NET types for services, clients, and messages can be automatically generated in a .NET project. </span><span class="koboSpan" id="kobo.1148.2">We will learn how to develop the gRPC service in </span><a href="B18971_11.xhtml#_idTextAnchor438"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1149.1">Chapter 11</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1150.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1151.1">However, gRPC</span><a id="_idIndexMarker088"/><span class="koboSpan" id="kobo.1152.1"> is not a silver bullet. </span><span class="koboSpan" id="kobo.1152.2">There are several factors we need to consider before we </span><span class="No-Break"><span class="koboSpan" id="kobo.1153.1">choose gRPC:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1154.1">Tight coupling due to protocol changes</span></strong><span class="koboSpan" id="kobo.1155.1">: The client and server are tightly coupled because of the protocol. </span><span class="koboSpan" id="kobo.1155.2">Once the protocol changes, the client and server must be updated, even just changing the order of </span><span class="No-Break"><span class="koboSpan" id="kobo.1156.1">the parameters.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1157.1">Non-human readable format</span></strong><span class="koboSpan" id="kobo.1158.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1159.1">protobuf</span></strong><span class="koboSpan" id="kobo.1160.1"> is a non-human readable format, so debugging is not convenient. </span><span class="koboSpan" id="kobo.1160.2">Developers need additional tools to analyze </span><span class="No-Break"><span class="koboSpan" id="kobo.1161.1">the payloads.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1162.1">Limited browser support</span></strong><span class="koboSpan" id="kobo.1163.1">: gRPC heavily relies on HTTP/2, but browsers cannot support gRPC natively. </span><span class="koboSpan" id="kobo.1163.2">That is why it is more suitable for service-to-service communication. </span><span class="koboSpan" id="kobo.1163.3">There are some projects, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1164.1">grpcweb</span></strong><span class="koboSpan" id="kobo.1165.1">, that can provide a library to perform conversions between gRPC </span><span class="No-Break"><span class="koboSpan" id="kobo.1166.1">and HTTP/1.1.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1167.1">No edge caching</span></strong><span class="koboSpan" id="kobo.1168.1">: gRPC uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1169.1">POST</span></strong><span class="koboSpan" id="kobo.1170.1"> method, which is not cacheable for </span><span class="No-Break"><span class="koboSpan" id="kobo.1171.1">the clients.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1172.1">A steeper learning curve</span></strong><span class="koboSpan" id="kobo.1173.1">: Unlike REST, which is human-readable, many teams find gRPC challenging to learn. </span><span class="koboSpan" id="kobo.1173.2">They need to learn protobuf and HTTP/2 and look for proper tools to deal with the </span><span class="No-Break"><span class="koboSpan" id="kobo.1174.1">message content.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1175.1">So, should we c</span><a id="_idTextAnchor048"/><span class="koboSpan" id="kobo.1176.1">hoose gRPC </span><span class="No-Break"><span class="koboSpan" id="kobo.1177.1">or REST?</span></span></p>
<h3><span class="koboSpan" id="kobo.1178.1">Should I use gRPC instead of a REST API?</span></h3>
<p><span class="koboSpan" id="kobo.1179.1">It is </span><a id="_idIndexMarker089"/><span class="koboSpan" id="kobo.1180.1">challenging to choose gRPC over REST for most server-client scenarios. </span><span class="koboSpan" id="kobo.1180.2">A REST-based API is well supported by all browsers, so it has a wider adoption nowadays. </span><span class="koboSpan" id="kobo.1180.3">If you need to support browser clients, REST is a better choice compared with gRPC. </span><span class="koboSpan" id="kobo.1180.4">However, gRPC has some features that are useful in certain circumstances, such as high-performance communication, real-time communication, low bandwidth, and multiple language environments. </span><span class="koboSpan" id="kobo.1180.5">So, it is a good choice for </span><span class="No-Break"><span class="koboSpan" id="kobo.1181.1">microservices-style architecture.</span></span></p>
<p><span class="koboSpan" id="kobo.1182.1">In a microservices architecture, the services are loosely coupled, and each one does a specific task or processes specific data. </span><span class="koboSpan" id="kobo.1182.2">They need to be able to communicate with each other with simplicity and efficiency without considering browser compatibility. </span><span class="koboSpan" id="kobo.1182.3">gRPC is suitable for this scenario because it is based on HTTP/2, which is a high-performance protocol and provides bidirectional streaming, binary messaging, and multiplexing. </span><strong class="bold"><span class="koboSpan" id="kobo.1183.1">Dapr</span></strong><span class="koboSpan" id="kobo.1184.1">, which</span><a id="_idIndexMarker090"/><span class="koboSpan" id="kobo.1185.1"> is a portable, event-driven runtime for microservices, implements gRPC APIs so that apps can communicate with each other via gRPC. </span><span class="koboSpan" id="kobo.1185.2">We will not discuss Dapr in this book, but if you are interested, you can find more information </span><span class="No-Break"><span class="koboSpan" id="kobo.1186.1">here: </span></span><a href="https://dapr.io/"><span class="No-Break"><span class="koboSpan" id="kobo.1187.1">https://dapr.io/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1188.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1189.1">In conclusion, using gRPC or REST depends on y</span><a id="_idTextAnchor049"/><span class="koboSpan" id="kobo.1190.1">our </span><span class="No-Break"><span class="koboSpan" id="kobo.1191.1">use-case demands.</span></span></p>
<h3><span class="koboSpan" id="kobo.1192.1">gRPC API design</span></h3>
<p><span class="koboSpan" id="kobo.1193.1">The</span><a id="_idIndexMarker091"/><span class="koboSpan" id="kobo.1194.1"> gRPC API design process is very similar to the REST API design process. </span><span class="koboSpan" id="kobo.1194.2">In fact, the first three steps are similar to the REST API design process. </span><span class="koboSpan" id="kobo.1194.3">We need to identify the resources, define the relationships between resources, and identify operation events </span><span class="No-Break"><span class="koboSpan" id="kobo.1195.1">as well.</span></span></p>
<p><span class="koboSpan" id="kobo.1196.1">Next, use the information from the first three steps to design and document the gRPC API. </span><span class="koboSpan" id="kobo.1196.2">When we convert the operation events to gRPC operations, there are some differences. </span><span class="koboSpan" id="kobo.1196.3">REST API uses HTTP methods to represent the operations. </span><span class="koboSpan" id="kobo.1196.4">In gRPC, these operations are like the methods of the service, which means we can use verbs in the method names. </span><span class="koboSpan" id="kobo.1196.5">For example, the method to get a post can be represented </span><span class="No-Break"><span class="koboSpan" id="kobo.1197.1">as </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1198.1">GetPost()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1199.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1200.1">gRPC uses protobuf as the IDL. </span><span class="koboSpan" id="kobo.1200.2">When we design a gRPC API, we actually need to author the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1201.1">.proto</span></strong><span class="koboSpan" id="kobo.1202.1"> files. </span><span class="koboSpan" id="kobo.1202.2">These </span><strong class="source-inline"><span class="koboSpan" id="kobo.1203.1">.proto</span></strong><span class="koboSpan" id="kobo.1204.1"> files consist of </span><span class="No-Break"><span class="koboSpan" id="kobo.1205.1">two parts:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1206.1">The definition of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1207.1">gRPC service</span></span></li>
<li><span class="koboSpan" id="kobo.1208.1">The messages that are used in </span><span class="No-Break"><span class="koboSpan" id="kobo.1209.1">the service</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1210.1">This is similar to the REST OpenAPI definition but has a different syntax. </span><span class="koboSpan" id="kobo.1210.2">Each request needs a type-defined message that includes the sorted input parameters. </span><span class="koboSpan" id="kobo.1210.3">Each response returns a message, an array of messages, or an error status response. </span><span class="koboSpan" id="kobo.1210.4">We can have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1211.1">.proto</span></strong><span class="koboSpan" id="kobo.1212.1"> file for</span><a id="_idIndexMarker092"/><span class="koboSpan" id="kobo.1213.1"> the blog system, as </span><span class="No-Break"><span class="koboSpan" id="kobo.1214.1">shown here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1215.1">
option csharp_namespace = "GrpcMyBlogs";syntax = "proto3";
package myBlogs;
service Greeter {
  rpc GetPost(GetPostRequest) returns (Post);
  rpc CreatePost(CreatePostRequest) returns (Post);
  rpc UpdatePost(UpdatePostRequest) returns (Post);
  rpc SearchPosts(SearchPostsRequest) returns (SearchPostsResponse);
  // More methods...
</span><span class="koboSpan" id="kobo.1215.2">  ...
</span><span class="koboSpan" id="kobo.1215.3">}
message GetPostRequest {
  string post_id = 1;
}
message CreatePostRequest {
  string category_id = 1;
  string title = 2;
  string content = 3;
  // More properties below
  ...
</span><span class="koboSpan" id="kobo.1215.4">}
message UpdatePostRequest {
  string post_id = 1;
  string category_id = 2;
  string title = 3;
  string content = 4;
  // More properties below
  ...
</span><span class="koboSpan" id="kobo.1215.5">}
message SearchPostsRequest {
  string keyword = 1;
}
message Post {
  string post_id = 1;
  Category category = 2;
  string title = 3;
  string content = 4;
  // More properties below
  ...
</span><span class="koboSpan" id="kobo.1215.6">}
message Category {
  string category_id = 1;
  string name = 2;
  // More properties below
  ...
</span><span class="koboSpan" id="kobo.1215.7">}
message SearchPostsResponse {
  int32 page_number = 1;
  int32 page_size = 2 [default = 10];
  repeated Post posts = 3;
}</span></pre>
<p><span class="koboSpan" id="kobo.1216.1">That’s it! </span><span class="koboSpan" id="kobo.1216.2">Now, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1217.1">.proto</span></strong><span class="koboSpan" id="kobo.1218.1"> file has a basic gRPC service definition, including the message </span><a id="_idIndexMarker093"/><span class="koboSpan" id="kobo.1219.1">definitions. </span><span class="koboSpan" id="kobo.1219.2">Next, we can use various tools to generate the code for the gRPC service and the client. </span><span class="koboSpan" id="kobo.1219.3">In the development stage, we may need to frequently change the gRPC protocol definition by updating the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1220.1">.proto</span></strong><span class="koboSpan" id="kobo.1221.1"> files. </span><span class="koboSpan" id="kobo.1221.2">The changes will be reflected in the generated code. </span><span class="koboSpan" id="kobo.1221.3">So, please consider carefully before you publish the service for consumption. </span><span class="koboSpan" id="kobo.1221.4">We will discuss more about gRPC in </span><a href="B18971_11.xhtml#_idTextAnchor438"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1222.1">Chapter 11</span></em></span></a><span class="koboSpan" id="kobo.1223.1">. </span><span class="koboSpan" id="kobo.1223.2">If you would like to start gRPC development with .NET 8 now, please jump to </span><span class="No-Break"><span class="koboSpan" id="kobo.1224.1">that chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.1225.1">Next, let’s </span><a id="_idTextAnchor050"/><span class="koboSpan" id="kobo.1226.1">look at the </span><span class="No-Break"><span class="koboSpan" id="kobo.1227.1">GraphQL API.</span></span></p>
<h2 id="_idParaDest-31"><a id="_idTextAnchor051"/><span class="koboSpan" id="kobo.1228.1">What is a GraphQL API?</span></h2>
<p><span class="koboSpan" id="kobo.1229.1">Think about </span><a id="_idIndexMarker094"/><span class="koboSpan" id="kobo.1230.1">the scenarios </span><a id="_idIndexMarker095"/><span class="koboSpan" id="kobo.1231.1">that use REST APIs. </span><span class="koboSpan" id="kobo.1231.2">We may find </span><span class="No-Break"><span class="koboSpan" id="kobo.1232.1">some issues:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1233.1">Over-fetching</span></strong><span class="koboSpan" id="kobo.1234.1">: This is when a client downloads more information than is actually required. </span><span class="koboSpan" id="kobo.1234.2">Let’s say we have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1235.1">/posts</span></strong><span class="koboSpan" id="kobo.1236.1"> endpoint, which returns a list of the posts. </span><span class="koboSpan" id="kobo.1236.2">When we show a post list page, we only need some properties such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1237.1">Title</span></strong><span class="koboSpan" id="kobo.1238.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1239.1">PublishDate</span></strong><span class="koboSpan" id="kobo.1240.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1241.1">Category</span></strong><span class="koboSpan" id="kobo.1242.1">. </span><span class="koboSpan" id="kobo.1242.2">But the posts returned from the endpoint may contain more information about the posts, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1243.1">IsPublished</span></strong><span class="koboSpan" id="kobo.1244.1">, which is useless </span><span class="No-Break"><span class="koboSpan" id="kobo.1245.1">for clients.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1246.1">Under-fetching and the n+1 problem</span></strong><span class="koboSpan" id="kobo.1247.1">: Under-fetching is when the endpoint does not provide sufficient required information. </span><span class="koboSpan" id="kobo.1247.2">The client will have to make more requests to fetch the missing information. </span><span class="koboSpan" id="kobo.1247.3">For example, the API may provide a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1248.1">/posts/{postId}</span></strong><span class="koboSpan" id="kobo.1249.1"> endpoint that shows the post information and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1250.1">/posts/{postId}/related</span></strong><span class="koboSpan" id="kobo.1251.1"> endpoint that shows related posts. </span><span class="koboSpan" id="kobo.1251.2">If we want to show a post detail, the client will need to call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1252.1">/posts/{postId}</span></strong><span class="koboSpan" id="kobo.1253.1"> endpoint, but</span><a id="_idIndexMarker096"/><span class="koboSpan" id="kobo.1254.1"> the related posts are not provided in the response. </span><span class="koboSpan" id="kobo.1254.2">So, the client will have to make another request to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1255.1">/posts/{postId}/related</span></strong><span class="koboSpan" id="kobo.1256.1"> to get the related posts. </span><span class="koboSpan" id="kobo.1256.2">The N+1 problem often refers to the parent-child relationship. </span><span class="koboSpan" id="kobo.1256.3">The endpoint that returns the collection resource does not provide enough information about the child resources for the clients. </span><span class="koboSpan" id="kobo.1256.4">For example, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1257.1">/posts</span></strong><span class="koboSpan" id="kobo.1258.1"> endpoint returns a list of posts, but the response does not have the content summary for each post. </span><span class="koboSpan" id="kobo.1258.2">To show the content summary on the post list page, the client will have to call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1259.1">/posts/{postId}</span></strong><span class="koboSpan" id="kobo.1260.1"> endpoint for each post to get the content summary. </span><span class="koboSpan" id="kobo.1260.2">So, the total number of requests will be </span><strong class="source-inline"><span class="koboSpan" id="kobo.1261.1">n + 1</span></strong><span class="koboSpan" id="kobo.1262.1">, where </span><strong class="source-inline"><span class="koboSpan" id="kobo.1263.1">n</span></strong><span class="koboSpan" id="kobo.1264.1"> is the number </span><span class="No-Break"><span class="koboSpan" id="kobo.1265.1">of posts.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1266.1">The over- and under-fetching problems are some of the most common problems with REST-based APIs. </span><span class="koboSpan" id="kobo.1266.2">Because REST-based APIs center on resources, for each endpoint, the response structure is fixed and encoded in the URL, so it is not flexible for </span><span class="No-Break"><span class="koboSpan" id="kobo.1267.1">client requirements.</span></span></p>
<p><span class="koboSpan" id="kobo.1268.1">These problems can be overcome with a GraphQL API. </span><span class="koboSpan" id="kobo.1268.2">A GraphQL API is another API style, which offers powerful query capabilities. </span><span class="koboSpan" id="kobo.1268.3">It supports fetching data with a flexible structure based on the client’s needs. </span><span class="koboSpan" id="kobo.1268.4">It can fetch data by a resource identifier, paginated listing, filtering, and sorting. </span><span class="koboSpan" id="kobo.1268.5">It also supports mutating data </span><a id="_idTextAnchor052"/><span class="koboSpan" id="kobo.1269.1">as well, like CRUD </span><span class="No-Break"><span class="koboSpan" id="kobo.1270.1">in REST.</span></span></p>
<h3><span class="koboSpan" id="kobo.1271.1">Introduction to GraphQL</span></h3>
<p><span class="koboSpan" id="kobo.1272.1">GraphQL is a </span><a id="_idIndexMarker097"/><span class="koboSpan" id="kobo.1273.1">powerful query language for executing queries with a flexible data structure. </span><span class="koboSpan" id="kobo.1273.2">It was developed internally by Facebook in 2012, following which it was released publicly in 2015. </span><span class="koboSpan" id="kobo.1273.3">Now, it is open-source and maintained by a large community of companies and individuals from all around </span><span class="No-Break"><span class="koboSpan" id="kobo.1274.1">the world.</span></span></p>
<p><span class="koboSpan" id="kobo.1275.1">GraphQL solves the over- and under-fetching problem by providing more flexibility and efficiency. </span><span class="koboSpan" id="kobo.1275.2">It is not tied to any database or storage engine, nor to any specific languages. </span><span class="koboSpan" id="kobo.1275.3">There are many libraries to implement GraphQL services and clients. </span><span class="koboSpan" id="kobo.1275.4">A GraphQL service defines types and fields on your resource types, and then provides functions for each field on </span><span class="No-Break"><span class="koboSpan" id="kobo.1276.1">each type.</span></span></p>
<p><span class="koboSpan" id="kobo.1277.1">Unlike REST, which uses </span><em class="italic"><span class="koboSpan" id="kobo.1278.1">resources</span></em><span class="koboSpan" id="kobo.1279.1"> as its core concept and defines URLs that return a fixed data structure for each resource, the conceptual model of GraphQL is an entity graph. </span><span class="koboSpan" id="kobo.1279.2">So, all GraphQL operations are performed through a single HTTP </span><strong class="source-inline"><span class="koboSpan" id="kobo.1280.1">POST</span></strong><span class="koboSpan" id="kobo.1281.1">- or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1282.1">GET</span></strong><span class="koboSpan" id="kobo.1283.1">-based endpoint, which is usually </span><strong class="source-inline"><span class="koboSpan" id="kobo.1284.1">/graphql</span></strong><span class="koboSpan" id="kobo.1285.1">. </span><span class="koboSpan" id="kobo.1285.2">It is completely flexible and allows the client to decide what data structure it needs. </span><span class="koboSpan" id="kobo.1285.3">The GraphQL service receives GraphQL queries to validate whether a query refers to the correct types and fields defined, and then it executes the functions to return the correct data structure. </span><span class="koboSpan" id="kobo.1285.4">The format of requests and responses </span><span class="No-Break"><span class="koboSpan" id="kobo.1286.1">is JSON.</span></span></p>
<p><span class="koboSpan" id="kobo.1287.1">Besides </span><a id="_idIndexMarker098"/><span class="koboSpan" id="kobo.1288.1">solving the over- and under-fetching problem, GraphQL has some </span><span class="No-Break"><span class="koboSpan" id="kobo.1289.1">other advantages:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1290.1">GraphQL reduces the complexity of maintaining API versions. </span><span class="koboSpan" id="kobo.1290.2">There is only one endpoint and one version of the graph. </span><span class="koboSpan" id="kobo.1290.3">It allows the API to evolve without breaking the </span><span class="No-Break"><span class="koboSpan" id="kobo.1291.1">existing clients.</span></span></li>
<li><span class="koboSpan" id="kobo.1292.1">GraphQL uses a strong type system to define the types and fields in a schema using SDL. </span><span class="koboSpan" id="kobo.1292.2">The schema behaves as the contract, which reduces the miscommunication between the client and the server. </span><span class="koboSpan" id="kobo.1292.3">Developers can develop frontend applications by mocking the required data structures. </span><span class="koboSpan" id="kobo.1292.4">Once the server is ready, they can switch to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1293.1">actual API.</span></span></li>
<li><span class="koboSpan" id="kobo.1294.1">GraphQL does not define the specific application architecture, which means it can work on top of an existing REST API to reuse </span><span class="No-Break"><span class="koboSpan" id="kobo.1295.1">some code.</span></span></li>
<li><span class="koboSpan" id="kobo.1296.1">The payload is smaller because clients get what they exactly request </span><span class="No-Break"><span class="koboSpan" id="kobo.1297.1">without over-fetching.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1298.1">However, there are also</span><a id="_idIndexMarker099"/><span class="koboSpan" id="kobo.1299.1"> some disadvantages of </span><span class="No-Break"><span class="koboSpan" id="kobo.1300.1">using GraphQL:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1301.1">GraphQL presents a high learning curve for REST </span><span class="No-Break"><span class="koboSpan" id="kobo.1302.1">API developers.</span></span></li>
<li><span class="koboSpan" id="kobo.1303.1">The implementation of the server is more complicated. </span><span class="koboSpan" id="kobo.1303.2">The query could </span><span class="No-Break"><span class="koboSpan" id="kobo.1304.1">be complex.</span></span></li>
<li><span class="koboSpan" id="kobo.1305.1">GraphQL uses a single endpoint, which means it cannot leverage the full capabilities of HTTP. </span><span class="koboSpan" id="kobo.1305.2">It does not support HTTP content negotiation for multiple media types </span><span class="No-Break"><span class="koboSpan" id="kobo.1306.1">beyond JSON.</span></span></li>
<li><span class="koboSpan" id="kobo.1307.1">It is challenging to enforce the authorization because, normally, the API gateway enforces access control based on URLs. </span><span class="koboSpan" id="kobo.1307.2">Rate-limiting is also often associated with the path and HTTP methods. </span><span class="koboSpan" id="kobo.1307.3">So, you need more consideration to adopt the </span><span class="No-Break"><span class="koboSpan" id="kobo.1308.1">new style.</span></span></li>
<li><span class="koboSpan" id="kobo.1309.1">Caching is </span><a id="_idIndexMarker100"/><span class="koboSpan" id="kobo.1310.1">complicated to implement because the service does not know what data </span><span class="No-Break"><span class="koboSpan" id="kobo.1311.1">clients need.</span></span></li>
<li><span class="koboSpan" id="kobo.1312.1">File uploads are not allowed, so a separate A</span><a id="_idTextAnchor053"/><span class="koboSpan" id="kobo.1313.1">PI for file handling </span><span class="No-Break"><span class="koboSpan" id="kobo.1314.1">is needed.</span></span></li>
</ul>
<h3><span class="koboSpan" id="kobo.1315.1">GraphQL API design</span></h3>
<p><span class="koboSpan" id="kobo.1316.1">A GraphQL query</span><a id="_idIndexMarker101"/><span class="koboSpan" id="kobo.1317.1"> is flexible, so clients can send various queries based on their requirements. </span><span class="koboSpan" id="kobo.1317.2">To design the GraphQL API, we need to define the GraphQL schema first, which is the core of every </span><span class="No-Break"><span class="koboSpan" id="kobo.1318.1">GraphQL API.</span></span></p>
<p><span class="koboSpan" id="kobo.1319.1">GraphQL uses the GraphQL SDL to define GraphQL schemas. </span><span class="koboSpan" id="kobo.1319.2">SDL has a type system that allows us to define the data structure, like the other strongly typed languages, such as C#, Java, TypeScript, Go, and </span><span class="No-Break"><span class="koboSpan" id="kobo.1320.1">so on.</span></span></p>
<p><span class="koboSpan" id="kobo.1321.1">We can define the following types and fields in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1322.1">GraphQL schema:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1323.1">
type Query {  posts: [Post]
  post(id: ID!): Post
}
type Post {
  id: ID!
</span><span class="koboSpan" id="kobo.1323.2">  title: String
  content: String
  category: Category
  publishDate: String
  isPublished: Boolean
  relatedPosts: [Post]
}
type Category {
  id: ID!
</span><span class="koboSpan" id="kobo.1323.3">  name: String
}</span></pre>
<p><span class="koboSpan" id="kobo.1324.1">A GraphQL request</span><a id="_idIndexMarker102"/><span class="koboSpan" id="kobo.1325.1"> uses a query language to describe the desired fields and structure the client needs. </span><span class="koboSpan" id="kobo.1325.2">The following is a </span><span class="No-Break"><span class="koboSpan" id="kobo.1326.1">simple query:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1327.1">
{  posts {
    id
    title
    content
    category {
      id
      name
    }
    publishDate
    // If we do not need the `isPublished` field, we can omit it.
</span><span class="koboSpan" id="kobo.1327.2">    // isPublished
    relatedPosts {
      id
      title
      category {
        id
        name
      }
      publishDate
    }
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.1328.1">In the preceding query, we can omit the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1329.1">isPublished</span></strong><span class="koboSpan" id="kobo.1330.1"> field and include related posts in the response, so </span><a id="_idIndexMarker103"/><span class="koboSpan" id="kobo.1331.1">the client does not need to send </span><span class="No-Break"><span class="koboSpan" id="kobo.1332.1">more requests.</span></span></p>
<p><span class="koboSpan" id="kobo.1333.1">To modify data or perform a calculation logic, GraphQL establishes a convention called </span><em class="italic"><span class="koboSpan" id="kobo.1334.1">mutation</span></em><span class="koboSpan" id="kobo.1335.1">. </span><span class="koboSpan" id="kobo.1335.2">We can think of mutation as a way to update the data. </span><span class="koboSpan" id="kobo.1335.3">The following request is </span><span class="No-Break"><span class="koboSpan" id="kobo.1336.1">a mutation:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1337.1">
mutation {  createPost(
    categoryId: ID!
</span><span class="koboSpan" id="kobo.1337.2">    title: String!
</span><span class="koboSpan" id="kobo.1337.3">    content: String!
</span><span class="koboSpan" id="kobo.1337.4">  ) {
    post {
      id
      title
      content
      category {
        id
        name
      }
      publishDate
      isPublished
    }
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.1338.1">There are some tools to </span><a id="_idIndexMarker104"/><span class="koboSpan" id="kobo.1339.1">generate GraphQL documents and test the service, such as GraphiQL,GraphQL Playground, and so on. </span><span class="koboSpan" id="kobo.1339.2">We will not discuss GraphQL much further now. </span><span class="koboSpan" id="kobo.1339.3">In </span><a href="B18971_12.xhtml#_idTextAnchor484"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1340.1">Chapter 12</span></em></span></a><span class="koboSpan" id="kobo.1341.1">, we will learn how to use ASP.NET Core 8 to develop </span><span class="No-Break"><span class="koboSpan" id="kobo.1342.1">GraphQL APIs.</span></span></p>
<p><span class="koboSpan" id="kobo.1343.1">Next, we will discuss another API</span><a id="_idTextAnchor054"/><span class="koboSpan" id="kobo.1344.1"> style, which is the </span><span class="No-Break"><span class="koboSpan" id="kobo.1345.1">real-time API.</span></span></p>
<h1 id="_idParaDest-32"><a id="_idTextAnchor055"/><span class="koboSpan" id="kobo.1346.1">Real-time APIs</span></h1>
<p><span class="koboSpan" id="kobo.1347.1">We have </span><a id="_idIndexMarker105"/><span class="koboSpan" id="kobo.1348.1">introduced some web API styles, such as REST-based APIs, gRPC APIs, and GraphQL APIs. </span><span class="koboSpan" id="kobo.1348.2">They all follow the request/response pattern – the client sends a request to the server, and the server returns a response. </span><span class="koboSpan" id="kobo.1348.3">This pattern is easy to understand. </span><span class="koboSpan" id="kobo.1348.4">However, this pattern may not be suitable for </span><span class="No-Break"><span class="koboSpan" id="kobo.1349.1">some scenarios.</span></span></p>
<p><span class="koboSpan" id="kobo.1350.1">Let’s say we have an application that contains two parts – the server, which is a fire station, and the clients, which are the fire engines. </span><span class="koboSpan" id="kobo.1350.2">How can we notify the fire engines when an </span><span class="No-Break"><span class="koboSpan" id="kobo.1351.1">incident occurs?</span></span></p>
<p><span class="koboSpan" id="kobo.1352.1">If we use the request/response pattern, the clients need to send requests to the server to get the latest notification regarding the incident. </span><span class="koboSpan" id="kobo.1352.2">But what is the best frequency of sending requests? </span><span class="koboSpan" id="kobo.1352.3">1 minute, or 10 seconds? </span><span class="koboSpan" id="kobo.1352.4">Think about how urgent the incident is. </span><span class="koboSpan" id="kobo.1352.5">If the fire engine gets a notification after a 10-second delay, this might be a problem, as the fire might be more serious and urgent! </span><span class="koboSpan" id="kobo.1352.6">So, what about sending requests every 1 second? </span><span class="koboSpan" id="kobo.1352.7">Then, the server would be very busy, and most of the time, it just returns a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1353.1">No incident</span></strong><span class="koboSpan" id="kobo.1354.1"> response. </span><span class="koboSpan" id="kobo.1354.2">With the request/response pattern, the server cannot push the notifications to the clients, so it is not suitable for this case. </span><span class="koboSpan" id="kobo.1354.3">This lea</span><a id="_idTextAnchor056"/><span class="koboSpan" id="kobo.1355.1">ds us to the problem of </span><span class="No-Break"><span class="koboSpan" id="kobo.1356.1">API polling.</span></span></p>
<h2 id="_idParaDest-33"><a id="_idTextAnchor057"/><span class="koboSpan" id="kobo.1357.1">The problem with API polling</span></h2>
<p><span class="koboSpan" id="kobo.1358.1">The request/response pattern </span><a id="_idIndexMarker106"/><span class="koboSpan" id="kobo.1359.1">has limitations. </span><span class="koboSpan" id="kobo.1359.2">The server cannot notify the clients about what changes are happening on the server side. </span><span class="koboSpan" id="kobo.1359.3">If the client needs to get the latest data, it has to frequently send requests to the server before receiving </span><span class="No-Break"><span class="koboSpan" id="kobo.1360.1">any updates.</span></span></p>
<p><span class="koboSpan" id="kobo.1361.1">For example, if the client would like to know when a new post is published, it needs to call </span><strong class="source-inline"><span class="koboSpan" id="kobo.1362.1">/posts/latest</span></strong><span class="koboSpan" id="kobo.1363.1"> to get the latest post. </span><span class="koboSpan" id="kobo.1363.2">The client may set up an interval to send the request periodically. </span><span class="koboSpan" id="kobo.1363.3">This pattern is called API polling, which is a common solution for clients that need to be updated for </span><span class="No-Break"><span class="koboSpan" id="kobo.1364.1">resource changes.</span></span></p>
<p><span class="koboSpan" id="kobo.1365.1">API polling does not have many differences from the common REST APIs. </span><span class="koboSpan" id="kobo.1365.2">It can be implemented based on the request/response pattern. </span><span class="koboSpan" id="kobo.1365.3">However, it is not the ideal solution for this kind of scenario. </span><span class="koboSpan" id="kobo.1365.4">Normally, the frequency of resource changes is not predictable, so it is hard to decide the frequency of the requests. </span><span class="koboSpan" id="kobo.1365.5">If the interval is too short, the client may send too many unnecessary requests and the server will handle too many queries. </span><span class="koboSpan" id="kobo.1365.6">However, if the interval is too long, the clients cannot get the latest changes in time. </span><span class="koboSpan" id="kobo.1365.7">In particular, if the application needs to notify clients in real-time, then the system would be </span><span class="No-Break"><span class="koboSpan" id="kobo.1366.1">very busy.</span></span></p>
<p><span class="koboSpan" id="kobo.1367.1">There are more challenges when we use </span><span class="No-Break"><span class="koboSpan" id="kobo.1368.1">API polling:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1369.1">The logic to check the resource changes is complex. </span><span class="koboSpan" id="kobo.1369.2">It may implement the logic in the server, so the server needs to check the timestamp in the request and then query the data, based on the timestamp. </span><span class="koboSpan" id="kobo.1369.3">Alternatively, the client queries all the data and compares the collection with the data from the previous request. </span><span class="koboSpan" id="kobo.1369.4">It brings a lot </span><span class="No-Break"><span class="koboSpan" id="kobo.1370.1">of complexity.</span></span></li>
<li><span class="koboSpan" id="kobo.1371.1">It is hard to check whether a specific event has occurred – for example, creating resources and </span><span class="No-Break"><span class="koboSpan" id="kobo.1372.1">updating resources.</span></span></li>
<li><span class="koboSpan" id="kobo.1373.1">Rate-limiting may block the client from sending too many requests at the </span><span class="No-Break"><span class="koboSpan" id="kobo.1374.1">desired intervals.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1375.1">The ideal way to solve the problem of API polling is to allow the server to send events to the clients in real-time, rather than constantly polling and implementing the logic to check for changes. </span><span class="koboSpan" id="kobo.1375.2">This is a different pattern from the request/response pattern. </span><span class="koboSpan" id="kobo.1375.3">It supports real-time communication between servers and clients, which enables new possibilities for the application.</span><a id="_idTextAnchor058"/><span class="koboSpan" id="kobo.1376.1"> This is what a real-time API </span><span class="No-Break"><span class="koboSpan" id="kobo.1377.1">can do.</span></span></p>
<h2 id="_idParaDest-34"><a id="_idTextAnchor059"/><span class="koboSpan" id="kobo.1378.1">What is a real-time API?</span></h2>
<p><span class="koboSpan" id="kobo.1379.1">A real-time API goes</span><a id="_idIndexMarker107"/><span class="koboSpan" id="kobo.1380.1"> beyond the traditional REST APIs. </span><span class="koboSpan" id="kobo.1380.2">It provides </span><span class="No-Break"><span class="koboSpan" id="kobo.1381.1">some benefits:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1382.1">The application can respond to internal events in real-time. </span><span class="koboSpan" id="kobo.1382.2">For example, if a new post is published, the client can get the </span><span class="No-Break"><span class="koboSpan" id="kobo.1383.1">notification immediately.</span></span></li>
<li><span class="koboSpan" id="kobo.1384.1">It can improve API efficiency by reducing the number of requests. </span><span class="koboSpan" id="kobo.1384.2">The clients do not need API polling to check the resource changes. </span><span class="koboSpan" id="kobo.1384.3">Instead, the server sends messages to clients when some events occur. </span><span class="koboSpan" id="kobo.1384.4">It reduces the resources required </span><span class="No-Break"><span class="koboSpan" id="kobo.1385.1">during communication.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1386.1">Some technologies can implement real-time APIs, such as long polling, </span><strong class="bold"><span class="koboSpan" id="kobo.1387.1">Server-Sent Events</span></strong><span class="koboSpan" id="kobo.1388.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1389.1">SSE</span></strong><span class="koboSpan" id="kobo.1390.1">), WebSocket, SignalR, and </span><span class="No-Break"><span class="koboSpan" id="kobo.1391.1">gRPC stream</span><a id="_idTextAnchor060"/><span class="koboSpan" id="kobo.1392.1">ing.</span></span></p>
<p><span class="koboSpan" id="kobo.1393.1">Let’s take a quick look </span><span class="No-Break"><span class="koboSpan" id="kobo.1394.1">at these.</span></span></p>
<h3><span class="koboSpan" id="kobo.1395.1">Long polling</span></h3>
<p><span class="koboSpan" id="kobo.1396.1">The </span><a id="_idIndexMarker108"/><span class="koboSpan" id="kobo.1397.1">API polling problem we described previously is called short polling or regular polling, which is easy to implement but less efficient. </span><span class="koboSpan" id="kobo.1397.2">The client cannot receive an update from the server in real-time. </span><span class="koboSpan" id="kobo.1397.3">To overcome this issue, long polling is </span><span class="No-Break"><span class="koboSpan" id="kobo.1398.1">another choice.</span></span></p>
<p><span class="koboSpan" id="kobo.1399.1">Long polling is a variation of short polling, but it is based on </span><em class="italic"><span class="koboSpan" id="kobo.1400.1">Comet</span></em><span class="koboSpan" id="kobo.1401.1">, which is a web application model in which a long-held HTTPS request allows a web server to push data to a browser, without it having to request it explicitly. </span><span class="koboSpan" id="kobo.1401.2">Comet contains multiple techniques to implement long polling. </span><span class="koboSpan" id="kobo.1401.3">It also has many names, such as Ajax push, HTTP streaming, and HTTP </span><span class="No-Break"><span class="koboSpan" id="kobo.1402.1">server push.</span></span></p>
<p><span class="koboSpan" id="kobo.1403.1">To use long polling, the client sends the request to the server but with the expectation that the server may not respond immediately. </span><span class="koboSpan" id="kobo.1403.2">When the server receives the request, if there is no new data for the client, the server will keep the connection alive. </span><span class="koboSpan" id="kobo.1403.3">If there is something available, the server will send the response to the client and complete the open request. </span><span class="koboSpan" id="kobo.1403.4">The client receives the response and usually makes a new request right away or after a pre-defined interval to establish the connection again. </span><span class="koboSpan" id="kobo.1403.5">The operation is repeated. </span><span class="koboSpan" id="kobo.1403.6">In this way, it can effectively emulate the server </span><span class="No-Break"><span class="koboSpan" id="kobo.1404.1">push feature.</span></span></p>
<p><span class="koboSpan" id="kobo.1405.1">There are some</span><a id="_idIndexMarker109"/><span class="koboSpan" id="kobo.1406.1"> considerations when using long polling. </span><span class="koboSpan" id="kobo.1406.2">The server needs to manage multiple connections and preserve the session state. </span><span class="koboSpan" id="kobo.1406.3">If the architecture becomes more complex (for example, when multiple servers or load balancers are in use), then it leads to the session stickiness issue, which means the subsequent client requests with the same session must be routed to the same server to which the original request was handled. </span><span class="koboSpan" id="kobo.1406.4">It is hard to scale the application. </span><span class="koboSpan" id="kobo.1406.5">Also, it is hard to manage the message order. </span><span class="koboSpan" id="kobo.1406.6">If the browser has two tabs open and sends multiple requests simultaneously to write data, the server will not know which request is </span><span class="No-Break"><span class="koboSpan" id="kobo.1407.1">the latest.</span></span></p>
<p><span class="koboSpan" id="kobo.1408.1">Long polling is supported by many web browsers. </span><span class="koboSpan" id="kobo.1408.2">In recent years, SSE and WebSocket have been widely adopted, so long polling is not the first choice anymore. </span><span class="koboSpan" id="kobo.1408.3">Now, it is usually accompanied by other technologies or as a fallback. </span><span class="koboSpan" id="kobo.1408.4">For example, SignalR uses long polling as a fallback w</span><a id="_idTextAnchor061"/><span class="koboSpan" id="kobo.1409.1">hen WebSocket and SSE are </span><span class="No-Break"><span class="koboSpan" id="kobo.1410.1">not available.</span></span></p>
<h3><span class="koboSpan" id="kobo.1411.1">SSE</span></h3>
<p><span class="koboSpan" id="kobo.1412.1">SSE is a server</span><a id="_idIndexMarker110"/><span class="koboSpan" id="kobo.1413.1"> push technology that allows the server to send events to the web browser. </span><span class="koboSpan" id="kobo.1413.2">SSE was first proposed in 2004 as part of the </span><em class="italic"><span class="koboSpan" id="kobo.1414.1">WHATWG Web Applications 1.0</span></em><span class="koboSpan" id="kobo.1415.1">. </span><span class="koboSpan" id="kobo.1415.2">It is based on the EventSource API, which is a standard API of HTML5. </span><span class="koboSpan" id="kobo.1415.3">The Opera web browser implemented this feature in 2006. </span><span class="koboSpan" id="kobo.1415.4">Now, all modern browsers </span><span class="No-Break"><span class="koboSpan" id="kobo.1416.1">support SSE.</span></span></p>
<p><span class="koboSpan" id="kobo.1417.1">In SSE, the client behaves as a subscriber, initializing the connection by creating a new JavaScript </span><strong class="source-inline"><span class="koboSpan" id="kobo.1418.1">EventSource</span></strong><span class="koboSpan" id="kobo.1419.1"> object, passing the URL of the endpoint to the server over a regular HTTP </span><strong class="source-inline"><span class="koboSpan" id="kobo.1420.1">GET</span></strong><span class="koboSpan" id="kobo.1421.1"> request with the media type of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1422.1">text/event-stream</span></strong><span class="koboSpan" id="kobo.1423.1">. </span><span class="koboSpan" id="kobo.1423.2">Once connected, the server keeps the connection open and pushes new events separated by a newline character to the client, until it has no more events to send, or until the client explicitly closes the connection by calling the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1424.1">EventSource.close()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1425.1"> method.</span></span></p>
<p><span class="koboSpan" id="kobo.1426.1">If the client lost the connection for any reason, it could reconnect to receive new events. </span><span class="koboSpan" id="kobo.1426.2">To recover from the failure, the client can provide a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1427.1">Last-Event-ID</span></strong><span class="koboSpan" id="kobo.1428.1"> header to the server to specify the last event ID that the client received. </span><span class="koboSpan" id="kobo.1428.2">Then, the server can use this information to determine whether the client missed </span><span class="No-Break"><span class="koboSpan" id="kobo.1429.1">any events.</span></span></p>
<p><span class="koboSpan" id="kobo.1430.1">SSE is suitable for scenarios where real-time notifications have to be sent to the client when the data changes from the server, in order to keep a user interface in sync with the latest data state. </span><span class="koboSpan" id="kobo.1430.2">Examples include Twitter updates, stock price updates, news feeds, alerts, and </span><span class="No-Break"><span class="koboSpan" id="kobo.1431.1">so on.</span></span></p>
<p><span class="koboSpan" id="kobo.1432.1">The limitation of SSE is that it is unidirectional, so it cannot be used to send data from the client to the server. </span><span class="koboSpan" id="kobo.1432.2">Once the client connects to the server, it can receive responses only, but it cannot send new requests on the same connection. </span><span class="koboSpan" id="kobo.1432.3">If you need bidirectional communi</span><a id="_idTextAnchor062"/><span class="koboSpan" id="kobo.1433.1">cation, WebSocket may be a </span><span class="No-Break"><span class="koboSpan" id="kobo.1434.1">better option.</span></span></p>
<h3><span class="koboSpan" id="kobo.1435.1">WebSocket</span></h3>
<p><span class="koboSpan" id="kobo.1436.1">WebSocket is </span><a id="_idIndexMarker111"/><span class="koboSpan" id="kobo.1437.1">a protocol that provides full-duplex communication between a client and a server within a single TCP connection. </span><span class="koboSpan" id="kobo.1437.2">It allows the client to send requests to the server, while the server can push events and responses back to the client in real-time. </span><span class="koboSpan" id="kobo.1437.3">WebSocket was first referenced as a TCP-based socket API in the HTML5 specification. </span><span class="koboSpan" id="kobo.1437.4">In 2008, the WebSocket protocol was standardized by W3C. </span><span class="koboSpan" id="kobo.1437.5">Google Chrome was the first browser to support WebSocket in 2009. </span><span class="koboSpan" id="kobo.1437.6">Now, WebSocket is supported in most modern browsers, including Google Chrome, Microsoft Edge, Firefox, Safari, </span><span class="No-Break"><span class="koboSpan" id="kobo.1438.1">and Opera.</span></span></p>
<p><span class="koboSpan" id="kobo.1439.1">Unlike the HTTP protocol, WebSocket enables a two-way ongoing conversation between the client and server. </span><span class="koboSpan" id="kobo.1439.2">The communication is usually done over a TCP port </span><strong class="source-inline"><span class="koboSpan" id="kobo.1440.1">443</span></strong><span class="koboSpan" id="kobo.1441.1"> connection (or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1442.1">80</span></strong><span class="koboSpan" id="kobo.1443.1"> if there is an unsecure connection), so it can be easily configured in </span><span class="No-Break"><span class="koboSpan" id="kobo.1444.1">a firewall.</span></span></p>
<p><span class="koboSpan" id="kobo.1445.1">From a WebSocket perspective, the message content is opaque. </span><span class="koboSpan" id="kobo.1445.2">A subprotocol is required to specify an agreement between the client and server. </span><span class="koboSpan" id="kobo.1445.3">WebSocket can support both text and binary format subprotocols. </span><span class="koboSpan" id="kobo.1445.4">As part of the initial handshake process, the client can specify which subprotocols it supports. </span><span class="koboSpan" id="kobo.1445.5">Then, the server must pick one of the protocols that the client supports. </span><span class="koboSpan" id="kobo.1445.6">This is called subprotocol negotiation. </span><span class="koboSpan" id="kobo.1445.7">You can find many subprotocols officially registered </span><span class="No-Break"><span class="koboSpan" id="kobo.1446.1">here: </span></span><a href="https://www.iana.org/assignments/websocket/websocket.xml"><span class="No-Break"><span class="koboSpan" id="kobo.1447.1">https://www.iana.org/assignments/websocket/websocket.xml</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1448.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1449.1">The WebSocket protocol defines </span><strong class="source-inline"><span class="koboSpan" id="kobo.1450.1">ws</span></strong><span class="koboSpan" id="kobo.1451.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1452.1">wss</span></strong><span class="koboSpan" id="kobo.1453.1"> as the URI schemas that are used for unencrypted and encrypted connections, respectively. </span><span class="koboSpan" id="kobo.1453.2">It is always recommended to use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1454.1">wss</span></strong><span class="koboSpan" id="kobo.1455.1"> to make sure the transport security layer encrypts data. </span><span class="koboSpan" id="kobo.1455.2">For example, we can use the following code to create a WebSocket connection </span><span class="No-Break"><span class="koboSpan" id="kobo.1456.1">in JavaScript:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1457.1">
const socket = new WebSocket('wss://websocket.example.com/ws/updates');</span></pre> <p><span class="koboSpan" id="kobo.1458.1">WebSocket does not define how to manage the events for the connections, such as reconnection, authentication, and so on. </span><span class="koboSpan" id="kobo.1458.2">The client and server would need to manage those events. </span><span class="koboSpan" id="kobo.1458.3">There are various libraries to implement WebSocket for different languages. </span><span class="koboSpan" id="kobo.1458.4">For example, </span><em class="italic"><span class="koboSpan" id="kobo.1459.1">Socket.IO</span></em><span class="koboSpan" id="kobo.1460.1"> (</span><a href="https://socket.io"><span class="koboSpan" id="kobo.1461.1">https://socket.io</span></a><span class="koboSpan" id="kobo.1462.1">) is a popular library that implements WebSocket servers and clients in JavaScript, Java, Python, and </span><span class="No-Break"><span class="koboSpan" id="kobo.1463.1">so on.</span></span></p>
<p><span class="koboSpan" id="kobo.1464.1">WebSocket</span><a id="_idIndexMarker112"/><span class="koboSpan" id="kobo.1465.1"> is a great choice for real-time communications, such as online games, sales updates, sports updates, online chat, real-time dashboards, and </span><span class="No-Break"><span class="koboSpan" id="kobo.1466.1">so on.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.1467.1">Uni-directional versus bidirectional</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1468.1">Uni-directional communication is like a radio. </span><span class="koboSpan" id="kobo.1468.2">SSE is uni-directional because the server broadcasts data to clients, but clients cannot send data to the server. </span><span class="koboSpan" id="kobo.1468.3">Bidirectional communication supports two-way communication. </span><span class="koboSpan" id="kobo.1468.4">There are two types of bidirectional communication – half-duplex </span><span class="No-Break"><span class="koboSpan" id="kobo.1469.1">and full-duplex.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.1470.1">Half-duplex communication is like a walkie-talkie. </span><span class="koboSpan" id="kobo.1470.2">Both the server and client can send messages to each other, but only one party may send messages at </span><span class="No-Break"><span class="koboSpan" id="kobo.1471.1">a time.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.1472.1">Full-duplex communication is like a telephone. </span><span class="koboSpan" id="kobo.1472.2">The message can be sent from either side </span><a id="_idTextAnchor063"/><span class="koboSpan" id="kobo.1473.1">at the same time. </span><span class="koboSpan" id="kobo.1473.2">WebSocket </span><span class="No-Break"><span class="koboSpan" id="kobo.1474.1">is full-duplex.</span></span></p>
<h3><span class="koboSpan" id="kobo.1475.1">gRPC streaming</span></h3>
<p><span class="koboSpan" id="kobo.1476.1">We</span><a id="_idIndexMarker113"/><span class="koboSpan" id="kobo.1477.1"> introduced gRPC in the previous section. </span><span class="koboSpan" id="kobo.1477.2">As we mentioned, gRPC is based on the HTTP/2 protocol, which provides a foundation for long-lived, real-time communication. </span><span class="koboSpan" id="kobo.1477.3">Unlike HTTP/1.1, which requires a new TCP socket connection for each request, one HTTP/2 connection can be used for one or more simultaneous requests, so this avoids the overhead of creating new connections for each request. </span><span class="koboSpan" id="kobo.1477.4">Also, HTTP/2 supports pushing data to clients without them having to request it. </span><span class="koboSpan" id="kobo.1477.5">It is a huge improvement over the request/response pattern </span><span class="No-Break"><span class="koboSpan" id="kobo.1478.1">of HTTP/1.1.</span></span></p>
<p><span class="koboSpan" id="kobo.1479.1">gRPC takes advantage of the HTTP/2 protocol to support bidirectional communication. </span><span class="koboSpan" id="kobo.1479.2">A gRPC service supports these </span><span class="No-Break"><span class="koboSpan" id="kobo.1480.1">streaming combinations:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1481.1">Unary (</span><span class="No-Break"><span class="koboSpan" id="kobo.1482.1">No streaming)</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.1483.1">Server-to-client streaming</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.1484.1">Client-to-server streaming</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.1485.1">Bidirectional streaming</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1486.1">Both gRPC and </span><a id="_idIndexMarker114"/><span class="koboSpan" id="kobo.1487.1">WebSocket support full-duplex communication, but, unlike WebSocket, gRPC uses </span><strong class="source-inline"><span class="koboSpan" id="kobo.1488.1">protobuf</span></strong><span class="koboSpan" id="kobo.1489.1"> by default, so it does not need to select a subprotocol. </span><span class="koboSpan" id="kobo.1489.2">However, browsers have no built-in support for gRPC, so gRPC streaming is oft</span><a id="_idTextAnchor064"/><span class="koboSpan" id="kobo.1490.1">en used for </span><span class="No-Break"><span class="koboSpan" id="kobo.1491.1">service-to-service communication.</span></span></p>
<h2 id="_idParaDest-35"><a id="_idTextAnchor065"/><span class="koboSpan" id="kobo.1492.1">Which real-time communication technology is best for your application?</span></h2>
<p><span class="koboSpan" id="kobo.1493.1">There are a couple </span><a id="_idIndexMarker115"/><span class="koboSpan" id="kobo.1494.1">of choices for your real-time application. </span><span class="koboSpan" id="kobo.1494.2">So, how do we choose? </span><span class="koboSpan" id="kobo.1494.3">It is important to note that it depends on the circumstances and constraints of your application. </span><span class="koboSpan" id="kobo.1494.4">For example, do you need a push-only application or bidirectional communication? </span><span class="koboSpan" id="kobo.1494.5">Do you want to support most browsers or just server-to-service communication? </span><span class="koboSpan" id="kobo.1494.6">Do you need to push data to multiple clients or just </span><span class="No-Break"><span class="koboSpan" id="kobo.1495.1">one client?</span></span></p>
<p><span class="koboSpan" id="kobo.1496.1">Fortunately, Microsoft </span><a id="_idIndexMarker116"/><span class="koboSpan" id="kobo.1497.1">provides </span><strong class="bold"><span class="koboSpan" id="kobo.1498.1">SignalR</span></strong><span class="koboSpan" id="kobo.1499.1"> in ASP.NET Core to implement real-time communication. </span><span class="koboSpan" id="kobo.1499.2">SignalR is an open-source library that enables real-time communication between clients and servers. </span><span class="koboSpan" id="kobo.1499.3">It can automatically manage the connections and allow servers to send messages to all connected clients or a specific group of clients. </span><span class="koboSpan" id="kobo.1499.4">Note that SignalR encapsulates multiple technologies, including WebSocket, SSE, and long polling. </span><span class="koboSpan" id="kobo.1499.5">It hides the details and the complex implementations of these protocols. </span><span class="koboSpan" id="kobo.1499.6">As a result, we do not need to worry about which technology is used for real-time communication. </span><span class="koboSpan" id="kobo.1499.7">SignalR automatically chooses the best transport method for your application. </span><span class="koboSpan" id="kobo.1499.8">WebSocket is the default protocol. </span><span class="koboSpan" id="kobo.1499.9">If WebSocket is unavailable, SignalR will fall back to SSE, and then </span><span class="No-Break"><span class="koboSpan" id="kobo.1500.1">long polling.</span></span></p>
<p><span class="koboSpan" id="kobo.1501.1">SignalR is a good</span><a id="_idIndexMarker117"/><span class="koboSpan" id="kobo.1502.1"> choice for </span><span class="No-Break"><span class="koboSpan" id="kobo.1503.1">these scenarios:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1504.1">When clients require high-frequency updates or alerts/notifications from the server – for example, games, social networks, voting, auctions, maps, and </span><span class="No-Break"><span class="koboSpan" id="kobo.1505.1">so on</span></span></li>
<li><span class="koboSpan" id="kobo.1506.1">Dashboard and monitoring applications – for example, system dashboard applications, instant diagram applications, sales data monitoring applications, and </span><span class="No-Break"><span class="koboSpan" id="kobo.1507.1">so on</span></span></li>
<li><span class="koboSpan" id="kobo.1508.1">Collaborative applications – for example, chat applications,whiteboard applications, and </span><a id="_idIndexMarker118"/><span class="No-Break"><span class="koboSpan" id="kobo.1509.1">so on</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1510.1">ASP.NET Core also provides good support to gRPC. </span><span class="koboSpan" id="kobo.1510.2">So, the next question is, how do you choose between gRPC </span><span class="No-Break"><span class="koboSpan" id="kobo.1511.1">and SignalR?</span></span></p>
<p><span class="koboSpan" id="kobo.1512.1">Here are some thoughts you may want </span><span class="No-Break"><span class="koboSpan" id="kobo.1513.1">to consider:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1514.1">If your need to build a real-time application that supports multiple clients (browsers), you may use SignalR because it is well-supported by browsers, and gPRC </span><span class="No-Break"><span class="koboSpan" id="kobo.1515.1">is not.</span></span></li>
<li><span class="koboSpan" id="kobo.1516.1">If you need to build a distributed application or a microservices architecture application where you want to communicate between multiple servers, you may use gRPC because it is more suitable for server-to-server communication, and</span><a id="_idTextAnchor066"/><span class="koboSpan" id="kobo.1517.1"> is more efficient than SignalR in </span><span class="No-Break"><span class="koboSpan" id="kobo.1518.1">this scenario.</span></span></li>
</ul>
<h1 id="_idParaDest-36"><a id="_idTextAnchor067"/><span class="koboSpan" id="kobo.1519.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1520.1">In this chapter, we introduced some different API styles, including REST-based APIs, gRPC APIs, and GraphQL APIs, and explored how to design them. </span><span class="koboSpan" id="kobo.1520.2">We also introduced a couple of different ways to implement real-time communication, including WebSocket, gRPC streaming, and SignalR. </span><span class="koboSpan" id="kobo.1520.3">So far, we have not touched on much code, but we have reviewed the basic concepts of </span><span class="No-Break"><span class="koboSpan" id="kobo.1521.1">web APIs.</span></span></p>
<p><span class="koboSpan" id="kobo.1522.1">In the next chapter, we will start to learn how to use ASP.NET Core to </span><span class="No-Break"><span class="koboSpan" id="kobo.1523.1">implement them.</span></span></p>
</div>
</body></html>