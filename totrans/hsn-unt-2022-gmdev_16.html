<html><head></head><body>
  <div id="_idContainer842" class="Basic-Text-Frame">
    <h1 class="chapterNumber">16</h1>
    <h1 id="_idParaDest-198" class="chapterTitle">Creating a UI with the UI Toolkit</h1>
    <p class="normal">In the previous chapter, we discussed how to create user interfaces using <strong class="keyWord">uGUI</strong> (also known as <strong class="keyWord">Canvas</strong>), one of the most common Unity UI systems, but as we already mentioned, this is not the only one. While so far, uGUI is the most preferred option, Unity is working on a replacement called <strong class="keyWord">UI Toolkit</strong>, and even if it doesn’t have feature parity with uGUI yet, we thought it is worth covering it in this book.</p>
    <p class="normal">The idea of this chapter is to create the same UI we created previously but with UI Toolkit, so you can get an idea of how creating a UI in Unity will look soon.</p>
    <p class="normal">In this chapter, we will examine the following UI concepts: </p>
    <ul>
      <li class="bulletList">Why learn UI Toolkit?</li>
      <li class="bulletList">Creating a UI with UI Toolkit</li>
      <li class="bulletList">Making a responsive UI with UI Toolkit</li>
    </ul>
    <p class="normal">By the end of the chapter, you will know how to use UI Toolkit to create basic UIs for our game, redoing the UI we did in the last chapter as a point of reference. So, let’s start by discussing the following question first: why are we using UI Toolkit?</p>
    <h1 id="_idParaDest-199" class="heading-1">Why learn UI Toolkit?</h1>
    <p class="normal">I know the topic <a id="_idIndexMarker1044"/>of this chapter might sound a little bit confusing; we just learned how to use a whole Unity system to create our UI, and now we are learning another one! Why didn’t we just learn this new one? </p>
    <p class="normal">Well, the first part of the answer is that UI Toolkit doesn’t have feature parity with uGUI yet, meaning that it doesn’t have all the features necessary to use it in real production environments. Another thing to take into account is that even if UI Toolkit is stable enough, it’s still a relatively new system, and there are still lots of games in development that were created on older Unity versions that don’t support it. This means that in order to land a job in this industry, we need to get a decent amount of exposure to uGUI due to most games being created with this technology. This happens because it’s not safe or practical to update an already-tested and working game with new technologies; such changes could lead to a major rework of the game to make it compatible with the new versions. Also, this could potentially introduce tons of bugs that could delay the release of new versions—not to mention the time it will take to remake a full app with a new system.</p>
    <p class="normal">That being said, we <a id="_idIndexMarker1045"/>believe it’s still worth learning the basic concepts of UI Toolkit to be prepared to use it in newer Unity versions, so let’s dive into it now.</p>
    <h1 id="_idParaDest-200" class="heading-1">Creating a UI with UI Toolkit</h1>
    <p class="normal">In this section, we<a id="_idIndexMarker1046"/> are going to learn how to create UI Documents, an<a id="_idIndexMarker1047"/> asset that will define the elements our UI has. To do this, we are going to discuss the following concepts:</p>
    <ul>
      <li class="bulletList">Creating UI Documents</li>
      <li class="bulletList">Editing UI Documents</li>
      <li class="bulletList">Creating UI Stylesheets</li>
    </ul>
    <p class="normal">Let’s start by seeing how we can create our first UI Document.</p>
    <h2 id="_idParaDest-201" class="heading-2">Creating UI Documents</h2>
    <p class="normal">When creating a UI <a id="_idIndexMarker1048"/>with uGUI, we need to create GameObjects and attach components like <strong class="screenText">Button</strong>, <strong class="screenText">Image</strong>, or <strong class="screenText">Text</strong>, but with UI Toolkit, we need to create a <strong class="keyWord">UI Document</strong> instead. UI Document is a special kind of asset that will contain the definition of the elements our UI will have and its hierarchy. We will have a GameObject with a <strong class="screenText">UI Document </strong>component (yes, it’s called the same, so pay attention here) that will reference this UI document asset and render its contents. It’s like a mesh asset that contains information about the Mesh, and the <code class="inlineCode">MeshRenderer</code> component that will render it. In this case, the elements to render are contained in an asset and we have a component that reads the asset and renders its content (UI in this case).</p>
    <p class="normal">UI Documents are actually plain text files. You can open one with a text editor and easily see its contents. If you do that and you are familiar with HTML, you will recognize the XML-like format used to define the elements our UI will be composed of; Unity calls this format <strong class="keyWord">UXML</strong>. With UI Toolkit, Unity is attempting to make it easy for web developers to jump into Unity and create UIs. In the following code, you can see the typical look of an UXML document’s<a id="_idIndexMarker1049"/> file contents:</p>
    <pre class="programlisting code"><code class="hljs-code">&lt;ui:UXML 
   xmlns:ui=<span class="hljs-string">"</span><span class="hljs-string">UnityEngine.UIElements"</span> 
   xsi=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span> 
   engine=<span class="hljs-string">"UnityEngine.UIElements"</span> 
   editor=<span class="hljs-string">"UnityEditor.UIElements"</span> 
   noNamespaceSchemaLocation=<span class="hljs-string">"../../UIElementsSchema/UIElements.xsd"</span> 
   editor-extension-mode=<span class="hljs-string">"False"</span>&gt;
    &lt;ui:Button tabindex=<span class="hljs-string">"-1"</span> <span class="hljs-built_in">text</span>=<span class="hljs-string">"Button"</span> 
              display-tooltip-<span class="hljs-built_in">when</span>-elided=<span class="hljs-string">"true"</span> /&gt;
    &lt;ui:Scroller high-value=<span class="hljs-string">"100"</span> 
                direction=<span class="hljs-string">"Horizontal"</span>
                 value=<span class="hljs-string">"42"</span> /&gt;
    &lt;ui:VisualElement&gt;
        &lt;ui:Label tabindex=<span class="hljs-string">"-1"</span> 
                 <span class="hljs-built_in">text</span>=<span class="hljs-string">"Label"</span> 
                 display-tooltip-<span class="hljs-built_in">when</span>-elided=<span class="hljs-string">"true"</span> /&gt;
        &lt;ui:Label tabindex=<span class="hljs-string">"-1"</span> 
                 <span class="hljs-built_in">text</span>=<span class="hljs-string">"Label"</span> 
                 display-tooltip-<span class="hljs-built_in">when</span>-elided=<span class="hljs-string">"true"</span> /&gt;
    &lt;<span class="hljs-regexp">/ui:VisualElement&gt;</span>
<span class="hljs-regexp">&lt;/ui</span>:UXML&gt;
</code></pre>
    <div class="note">
      <p class="normal"> Don’t worry if you don’t know XML; we will explain the core concepts in this chapter. Also, don’t worry about the UXML format; later in this chapter, we will be using a visual editor called <strong class="keyWord">UI Builder</strong> to edit <a id="_idIndexMarker1050"/>our UI without writing UXML at all, but it is worth knowing how it actually works.</p>
    </div>
    <p class="normal">In order to create a UI Document and add it to the scene, we need to do the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Click the <strong class="screenText">+ </strong>|<strong class="screenText"> UI Toolkit</strong> |<strong class="screenText"> UI Document</strong> option in the <strong class="screenText">Project</strong> view to create a UI Document asset and name it <code class="inlineCode">GameHUD</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_01.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.1: Creating the UI Document asset</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Click the <strong class="screenText">Game Object</strong> |<strong class="screenText"> UI Tookit</strong> | <strong class="screenText">UI Document</strong> option to create a GameObject in <a id="_idIndexMarker1051"/>your scene with the UI Document component, which is capable of rendering the UI Document.</li>
      <li class="numberedList">Select it and drag the <strong class="screenText">GameHUD</strong> UI Document asset (the one created in <em class="italic">step 1</em>) to the <strong class="screenText">Source Asset</strong> property of the UI Document GameObject (the one created in <em class="italic">step 2</em>):</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_02.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.2: Making the UI Document component to render our UI Document asset</p>
    <p class="normal">And that’s it! Of course, we won’t see anything yet on our screen as the UI Document is blank, so let’s start adding elements to it.</p>
    <h2 id="_idParaDest-202" class="heading-2">Editing UI Documents</h2>
    <p class="normal">As our goal is to <a id="_idIndexMarker1052"/>recreate the same UI we created in the last chapter, let’s start with the simplest part: adding the player avatar to the top-left corner. One option would be to open the UI Document asset with any text editor and start writing the UXML code, but luckily, we have an easier way, which is using the <strong class="screenText">UI Builder</strong> editor. This editor allows us to generate the UXML code visually, by dragging and dropping elements. </p>
    <p class="normal">In order to do that, let’s first see how the <strong class="screenText">UI Builder</strong> window works:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Double-click the <strong class="screenText">GameHUD</strong> asset in the Project view to make <strong class="screenText">UI Builder</strong> open it:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_03.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.3: The UI Builder editor</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">In the <strong class="screenText">Hierarchy</strong> panel inside the UI Builder (<em class="italic">not</em> the <strong class="screenText">Hierarchy</strong> panel we’ve used so far in previous chapters), select <code class="inlineCode">GameHUD.uxml</code>, which is the container element of the UI.</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_04.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.4: Selecting the asset name in Hierarchy to edit the general UI settings</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Look at the <strong class="screenText">Inspector</strong> panel at the right of the UI Builder window (<em class="italic">not</em> the <strong class="screenText">Inspector</strong> we’ve used so far to modify GameObjects). Set the <strong class="screenText">Size</strong> property to a <strong class="screenText">Width</strong> of <code class="inlineCode">1920</code> and a <strong class="screenText">Height</strong> of <code class="inlineCode">1080</code>. This will allow us to view how our UI will look in this resolution. You can later change this value to see how it adapts to different sizes, but more on that later:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_05.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.5: Setting the preview UI resolution</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">You can pan the viewport to navigate the UI by pressing the <em class="italic">Mouse Wheel Button</em> (also known as <em class="italic">Middle Button</em>) and moving the mouse. On Mac, you can also press <em class="italic">Option + Command</em> and click and drag any free area of the viewport (places without our UI) to do the same.</li>
      <li class="numberedList">You can also use the <em class="italic">Mouse Scroll Wheel</em> to zoom in and out. Finally, you can use the zoom percentage selection at the top-left part of the <strong class="screenText">viewport</strong> and the <strong class="screenText">Fit Canvas</strong> button<a id="_idIndexMarker1053"/> to automatically fit the entire UI in your <strong class="screenText">viewport</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_06.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.6: Setting the preview zoom</p>
    <p class="normal">Now that we know the basics of UI Builder, let’s add our image to the UI:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Drag the <strong class="screenText">VisualElement</strong> icon from the <strong class="screenText">Library</strong> at the bottom left to the <strong class="screenText">Hierarchy</strong> section on the left. This will create a basic UI element capable of rendering an image and much more:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_07.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.7: Creating a Visual Element</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Select the <strong class="screenText">VisualElement</strong> in the <strong class="screenText">Hierarchy</strong> (under <code class="inlineCode">GameHUD.uxml</code>) and look at the <strong class="screenText">Inspector</strong> at the right part of the UI Builder window (again, not the regular Unity Inspector panel) for the <strong class="screenText">Position</strong> section. Expand it if not already expanded (using the arrow on the left).</li>
      <li class="numberedList">Set <strong class="screenText">Position</strong> to <strong class="screenText">Absolute</strong> in order to allow us to move our element freely around the UI. Later in this chapter, in the <em class="italic">Using relative positions</em> section, we<a id="_idIndexMarker1054"/> will explain how <strong class="screenText">Relative</strong> mode works:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_08.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.8: Setting our UI Element to be freely moved around</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Open the <strong class="screenText">Size</strong> section and set <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> to <code class="inlineCode">100</code> to make our UI element have a non-zero size. This way, we can see its area in the <strong class="screenText">Viewport</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_09.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.9: Setting our UI Element size</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">In the <strong class="screenText">Viewport</strong> pane, you can drag your element around and use the blue rectangles in the corners to change its size. Position your element at the top-left corner of the UI. If you don’t see your element in the <strong class="screenText">Viewport</strong>, select it in the <strong class="screenText">Hierarchy</strong> (the one of UI Builder):</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_10.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.10: Moving VisualElements</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">In order to set an exact position, you can set the <strong class="screenText">Left</strong> and <strong class="screenText">Top</strong> values of the <strong class="screenText">Position</strong> section<a id="_idIndexMarker1055"/> in the <strong class="screenText">Inspector</strong> to specify the exact <em class="italic">x</em> and <em class="italic">y</em> coordinates respectively, expressed in pixels:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_11.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.11: Setting the Position</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">In the <strong class="screenText">Background</strong> section of the <strong class="screenText">Inspector</strong>, set the <strong class="screenText">Image</strong> mode to <strong class="screenText">Sprite</strong> using the combo box at the right of the <strong class="screenText">Image</strong> property. This allows us to apply a sprite as the background of our element. </li>
      <li class="numberedList">Drag the sprite asset (the image) of our player avatar we imported in <em class="chapterRef">Chapter 15</em>, <em class="italic">User Interface Design</em>, from the <strong class="screenText">Project</strong> panel to the <strong class="screenText">Image</strong> property in order to set it. Also, you can use the target button (circle button with the dot in the middle) to select the sprite asset from the picker window:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_12.png" alt=""/></figure>
    <p class="packt_figref"> Figure 16.12: Setting the Background image of the element</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="9">Return to the regular <strong class="screenText">Game</strong> panel to see the results. If you don’t see a change, you can turn off and on the GameObject that renders our UI (the one we created with the UI Document).</li>
    </ol>
    <p class="normal">Now that we have created the player avatar, we can create the player health bar by doing the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Repeat the<a id="_idIndexMarker1056"/> previous <em class="italic">steps</em> <em class="italic">1</em> to<em class="italic"> 6</em> to create a new element that will serve as the player health bar container. It won’t have any image as it will just be the container of the rest of the elements that will compose the health bar.</li>
      <li class="numberedList">Position it right next to the player avatar and set a width and height to resemble a classic health bar. Remember you can do this by dragging the image and the squares at the corners, or through the <strong class="screenText">Size</strong> and<strong class="screenText"> Position</strong> properties as we did before.</li>
      <li class="numberedList">Drag a new <strong class="screenText">VisualElement</strong> to the Hierarchy, as we did in <em class="italic">step 1</em>, but this time drop it over the element created in <em class="italic">step 1</em>. This will make this new element a child of it, which will make that element’s position and size depend on its parent, the same as what happened when we parented Canvas objects in <em class="chapterRef">Chapter 15</em>,<em class="italic"> User Interface Design</em>.</li>
      <li class="numberedList">Select the parent Visual Element and in the <strong class="screenText">Inspector</strong>, set the <strong class="screenText">Name</strong> property to <code class="inlineCode">PlayerHealth</code> to easily identify it. Do the same with the child element, calling it <code class="inlineCode">Filling</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_13.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.13: Parenting and naming Visual Elements</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Select the <strong class="screenText">Filling</strong> element in the <strong class="screenText">Hierarchy</strong> and look at the <strong class="screenText">Inspector</strong>.</li>
      <li class="numberedList">In the <strong class="screenText">Background</strong> section, set the <strong class="screenText">Color</strong> property to red, clicking on the color box and using the <strong class="screenText">Color Picker</strong>. This will fill our UI Element background with plain red instead of using an image:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_14.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.14: Setting a pure red background for our element </p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">As usual, set the <strong class="screenText">Position</strong> to <strong class="screenText">Absolute</strong>, and also the <strong class="screenText">Left</strong> and <strong class="screenText">Top</strong> properties to <code class="inlineCode">0</code>. As this is a<a id="_idIndexMarker1057"/> child of another element, the position will be relative to its parent position, so by specifying a <strong class="screenText">Left</strong> and <strong class="screenText">Top</strong> value of <code class="inlineCode">0</code>, we are saying that we will be at 0 pixels from the left and top sides of our parent. This means that if our parent moves, this child element will move along with it.</li>
      <li class="numberedList">Set <strong class="screenText">Size</strong>’s <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> to <code class="inlineCode">100</code> and change the unit of measurement from <code class="inlineCode">px</code> (pixels) to <code class="inlineCode">%</code> (percentage) by clicking on the <strong class="screenText">px</strong> button and selecting <strong class="screenText">%</strong>. This will make the <strong class="screenText">Filling</strong> element size the same as its parent (100 percent the parent size):</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_15.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.15: Setting our size as the same size as our parent element</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="9">Add a new <strong class="screenText">VisualElement</strong> as a child of <strong class="screenText">PlayerHealth</strong> (a sibling of <strong class="screenText">Filling</strong>) and call it <code class="inlineCode">Border</code>.</li>
      <li class="numberedList">Set the <strong class="screenText">Position</strong> and <strong class="screenText">Size</strong> as we did in <em class="italic">steps</em> <em class="italic">7</em> and <em class="italic">8</em> for the <strong class="screenText">Filling</strong> element, but don’t set the background color.</li>
      <li class="numberedList">Set the <strong class="screenText">Background</strong> section’s <strong class="screenText">Image</strong> property to be the same border image we used in the previous chapter. Remember to set the <strong class="screenText">Image</strong> mode to <strong class="screenText">Sprite</strong> instead of <strong class="screenText">Texture</strong>.</li>
      <li class="numberedList">Set the <strong class="screenText">Slice</strong> property in the <strong class="screenText">Background</strong> section to <code class="inlineCode">15</code>. This applies the nine-slices technique we used in <em class="chapterRef">Chapter 15</em>,<em class="italic"> User Interface Design</em>, to expand an object without<a id="_idIndexMarker1058"/> stretching it: </li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_16.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.16: Setting the nine-slices sizes in the element directly </p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="13">Select the <strong class="screenText">Filling</strong> visual element in the <strong class="screenText">Hierarchy</strong> and set its <strong class="screenText">Size</strong> section’s <strong class="screenText">Width</strong> property to simulate the <strong class="screenText">Fill Amount</strong> property of the images we used in <em class="chapterRef">Chapter 11</em>, <em class="italic">User Interface Design</em>. Later, we will change this <strong class="screenText">Size</strong> to be directly proportional to the player’s health number via code:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_17.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.17: Health bar result</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="14">Repeat <em class="italic">steps</em> <em class="italic">1 </em>to<em class="italic"> 12</em> to create the bottom of the <strong class="screenText">Base Health</strong> bar. Remember the filling must be green this time. Alternatively, you can just copy and paste the <strong class="screenText">PlayerHealth</strong> container, but I recommend you repeat the steps for learning purposes.</li>
    </ol>
    <p class="normal">In previous steps, we basically saw how to compose several UI Elements to create a complex object. We needed a parent container element to drive the size of our child’s so that the inner elements adapt to it, especially the filling, which requires a percentage value to represent the current player health. </p>
    <p class="normal">Now we have our Life Bar! Well, not quite yet; those red corners from the filling that our border doesn’t cover are pretty rough! We will improve that later in this chapter when discussing how to make our UI responsive, so for now, let’s keep it as is. </p>
    <p class="normal">Finally, let’s add text elements to the UI by doing the following, but first, we will need to think about fonts. If you download a TTF font, you will need to create a Font Asset as we did in <em class="chapterRef">Chapter 15</em>,<em class="italic"> User Interface Design</em>, for it to be used in UI Toolkit. But with the current release of UI Toolkit, the Font Asset we created in the last chapter is not compatible. We will need to create a Font Asset using the UI Toolkit Font Asset Creator, instead of the Text Mesh Pro one. The reason behind the existence of duplicated tools is that Unity is integrating<a id="_idIndexMarker1059"/> the Text Mesh Pro package into a new, improved one called Text Core, one of those improvements being compatibility with UI Toolkit and other Unity systems. </p>
    <p class="normal">Considering this, in order to convert the TTF to a Font Asset compatible with UI Toolkit, you can just right-click the TTF asset in the <strong class="screenText">Project</strong> panel and select <strong class="screenText">Create</strong> |<strong class="screenText"> Text</strong> | <strong class="screenText">Font Asset</strong>. This will create a new asset that will be the one we will be using to define the font of our UI Toolkit text. </p>
    <p class="normal">Having solved this, let’s create the UI Element for text, that is, <strong class="screenText">Label</strong>:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Drag the <strong class="screenText">Label</strong> icon from the <strong class="screenText">Library</strong> pane of the UI Builder window to its <strong class="screenText">Hierarchy</strong> panel. This will add a UI element capable of rendering not only an image in its background but also text (yes, you can add a background to the text if you want to).</li>
      <li class="numberedList">As usual, set its <strong class="screenText">Position</strong> and <strong class="screenText">Size</strong>, this time putting it in the top-right corner of the screen. Remember you can simply drag the element; you don’t need to set the specific coordinates by hand (although you can if you want to).</li>
      <li class="numberedList">Change the <strong class="screenText">Text</strong> property in the <strong class="screenText">Label</strong> section of the <strong class="screenText">Inspector</strong> to the needed text; in our case, this will be <code class="inlineCode">Score: 0</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_18.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.18: Setting the text to display</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Drag the <strong class="screenText">Font</strong> asset created just before these steps to the <strong class="screenText">Font Asset</strong> property in the <strong class="screenText">Text</strong> section of the <strong class="screenText">Inspector</strong>. Don’t confuse it with the <strong class="screenText">Font</strong> property (the one above <strong class="screenText">Font Asset</strong>). That one allows you to drag TTF assets directly, but that will be deprecated soon, so let’s stick with the Unity-recommended approach.</li>
      <li class="numberedList">If you notice your <strong class="screenText">Font</strong> asset doesn’t work, try putting it in the <strong class="screenText">UI Toolkit</strong> |<strong class="screenText"> Resources</strong> |<strong class="screenText"> Fonts &amp; Materials</strong> folder in the <strong class="screenText">Project</strong> panel. While this shouldn’t be necessary in the latest Unity versions, I’ve noticed that this solves these sorts of<a id="_idIndexMarker1060"/> issues in the past. Also, there’s a bug that makes the font not recognized sometimes, which can be fixed by deleting and recreating the <strong class="screenText">Label</strong>.</li>
      <li class="numberedList">Set the <strong class="screenText">Size</strong> property of the <strong class="screenText">Text</strong> section to any size that seems fit:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_19.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.19: Setting the Text Font and Size of a Label</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">Repeat <em class="italic">steps</em> <em class="italic">1 </em>to<em class="italic"> 6</em> to add all the remaining <strong class="screenText">labels</strong> to the UI.</li>
      <li class="numberedList">One last thing we need to do is save, which can be simply done by pressing <em class="italic">Ctrl + S</em> (<em class="italic">Command + S</em> on Mac) or using the <strong class="screenText">File</strong> |<strong class="screenText"> Save</strong> menu in the top-left part of the <strong class="screenText">Viewport</strong> section in the <strong class="screenText">UI Builder </strong>window. Note that previous versions of UI Toolkit had a bug where this could make the Viewport become corrupt. Please close it and reopen UI Builder again if this happens.</li>
    </ol>
    <p class="normal">Now that we have created our UI, you probably noticed the need to repeat several settings to make several objects look the same, like our health bars and labels. While this is perfectly viable, we could improve our workflow greatly by reusing styles, and <strong class="keyWord">Stylesheets</strong> are the <a id="_idIndexMarker1061"/>exact feature we need to accomplish that, so let’s see them.</p>
    <h2 id="_idParaDest-203" class="heading-2">Creating UI Stylesheets</h2>
    <p class="normal">When creating UIs, you <a id="_idIndexMarker1062"/>will find scenarios where several elements throughout the whole game will share the same style, for example, buttons with the same background, font, size, borders, etc. When creating the UI with uGUI, one way to not repeat configurations for each element would be to create a Prefab for the button and create instances (and Prefab variants where necessary). The problem is that here, we don’t have GameObjects, hence there are no Prefabs, but luckily, we have <strong class="keyWord">Stylesheets</strong>.</p>
    <p class="normal"><strong class="keyWord">Stylesheets</strong> are separated assets that contain a series of styling presets for our UI elements. We can define a set of styles (for example, background, borders, font, size, etc.) and apply those to several elements across different UI Elements. This way, if we change a style in a Stylesheet asset, all UI Elements using that style will change, in a similar way to how materials work.</p>
    <p class="normal">There are several ways to create styles in a Stylesheet. One example is the selector system. This system allows you to apply a series of rules to pick which elements should have a style applied (if you are thinking this is like CSS, then you are right), but for now, let’s stick with the basics, creating <strong class="keyWord">Stylesheet Classes</strong>. A <strong class="keyWord">Class</strong> is basically a style we can apply to any element via its <a id="_idIndexMarker1063"/>name. For example, we can create a Class called <code class="inlineCode">Button</code> and add that class to every button in the UI that we want to have that style. Please consider that the concept of Class here is something completely different from what a Class means in coding.</p>
    <p class="normal">So, in this case, let’s create a Class for all the labels in our UI so that the appearance of all of them can be modified by simply changing the style:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">In the <strong class="screenText">StyleSheets</strong> panel of the <strong class="screenText">UI Builder</strong>, click the Add (<strong class="screenText">+</strong>) button and click <strong class="screenText">Create New USS</strong> (Unity StyleSheet). If that doesn’t work, try restarting Unity; there’s a bug in the current version of UI Toolkit that could cause this:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_20.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.20: Creating a Unity StyleSheet</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Name the USS as you like (<code class="inlineCode">GameUSS</code> in my case) and save the file.</li>
      <li class="numberedList">Select one of the label elements we have in our UI Document and look at the <strong class="screenText">Inspector</strong>.</li>
      <li class="numberedList">In the <strong class="screenText">StyleSheet</strong> pane of the <strong class="screenText">Inspector</strong>, type <code class="inlineCode">HUDText</code> in the<strong class="screenText"> Style Class List</strong> input field, but don’t press <em class="italic">Enter</em> yet.</li>
      <li class="numberedList">Click the <strong class="screenText">Extract Inlined Styles to New Class</strong> button. This will take all style modifications we did to our Label (position, size, font, etc.) and save them into a new style class called <code class="inlineCode">HUDText</code>. You can observe that it was added to the list of classes applied to the element (those labels at the bottom of the <strong class="screenText">StyleSheet</strong> section<a id="_idIndexMarker1064"/> in the <strong class="screenText">Inspector</strong>): </li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_21.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.21: Extracting settings into a Style Class</p>
    <p class="normal">With these steps, we have taken a Label with the style we need to apply to others and extract it into a class named <strong class="screenText">HUDText</strong>. This way, we can simply add the class <strong class="screenText">HUDText</strong> to other elements in our UI, and we can even add the same USS asset to other UI Documents (click the <strong class="screenText">+ </strong>button on the<strong class="screenText"> StyleSheets</strong> pane | <strong class="screenText">Add Existing USS</strong>) to add this class to the elements in it. </p>
    <p class="normal">Also, if you select the label again, you can notice how properties that previously were in bold now became normal again; that’s because properties in bold represent changed properties, and we have extracted them, so the default values became whatever the style classes define. Luckily, not everything is extracted to the new USS Class; for example, the <strong class="screenText">Text</strong> field still has our specific desired text, as it is highly unlikely you would want to put the same text in other objects.</p>
    <figure class="mediaobject"><img src="../Images/B18585_16_22.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.22: The Text property is bold, indicating it is different from the default values. On the other end, Enable Rich Text is not bold, meaning it follows the default values and the Classes ones</p>
    <p class="normal">If you forgot some change in the style when extracting the class, you can easily modify it by selecting it in the <strong class="screenText">StyleSheets</strong> section at the top-left part of the <strong class="screenText">UI Builder</strong>. Then, select the class <strong class="screenText">HUDText</strong> in the list. If you don’t see it, try expanding the <strong class="screenText">GameUSS.uss</strong> section. </p>
    <p class="normal">Once<a id="_idIndexMarker1065"/> selected, you can change it in the Inspector panel, similarly to when we change the properties of a UI Element: </p>
    <figure class="mediaobject"><img src="../Images/B18585_16_23.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.23: Selecting a Style Class for modification</p>
    <p class="normal">This way, we have edited our <code class="inlineCode">HUDText</code> class. If other elements had this class applied, they would have these changes applied also. Consider that another option would be to create the Class first, typing the name in the <strong class="screenText">StyleSheets</strong> input field and pressing <em class="italic">Enter</em>, and then applying it to UI elements. This way, you will avoid needing to revert unwanted changes, but if you created the element first, it’s convenient to have the option to revert:</p>
    <figure class="mediaobject"><img src="../Images/B18585_16_24.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.24: Creating a Style Class from scratch</p>
    <p class="normal">Now that we have our Style Class, let’s apply it to other elements by doing the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Select another label of our UI.</li>
      <li class="numberedList">Drag the <strong class="screenText">HUDText</strong> style from the <strong class="screenText">Stylesheet</strong> pane at the top-left part of the UI Builder window all the way to our element on the Viewport. You can also drag it to<a id="_idIndexMarker1066"/> the <strong class="screenText">Hierarchy</strong> element if you prefer:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_25.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.25: Applying a Class to an element</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Select the <strong class="screenText">Label</strong> and check how the <strong class="screenText">HUDText</strong> class has been added to the <strong class="screenText">StyleSheet</strong> section on the <strong class="screenText">Inspector</strong>.</li>
    </ol>
    <p class="normal">Now, consider that even if the element now has the class applied, the element itself has changes to the text we did in previous steps, overriding the style in our class. You can easily check this by selecting the class again (in the <strong class="screenText">StyleSheets</strong> section at the top-left part of the <strong class="screenText">UI Builder</strong> window) and changing any setting, like the size, and seeing how not all elements have changed. This shows how the override system works; the changes on the element take precedence over the ones in the classes it has applied.</p>
    <p class="normal">If you want to remove these overrides, you can simply select the element (not the class), right-click on the overridden properties, and unset the changes by right-clicking and then selecting<strong class="screenText"> Unset</strong>. In the case of our <strong class="screenText">Label</strong>, we can unset the entire <strong class="screenText">Text</strong> section and probably the <strong class="screenText">Absolute</strong> position (as the desired values are already contained in the class).</p>
    <figure class="mediaobject"><img src="../Images/B18585_16_26.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.26: Reverting an override to use the default values of the Classes applied to the element</p>
    <p class="normal">So, with these steps, we created a new <strong class="screenText">StyleSheet</strong> asset and added it to the UI Document for it to use it. We have created a new Style Class in it, extracting the changes of an existing UI Element into it, and then adjusted which changes we wanted to keep. Finally, we applied that style to another element. With this, we just scratched the surface of the real power of StyleSheets. We can start doing things like combining different classes from different StyleSheets or using selectors to dynamically set styles, but that’s outside the scope of this chapter.</p>
    <p class="normal">Something interesting is that even if the documentation of UI Toolkit is pretty basic at the moment, all these advanced concepts can be learned by reading about CSS, the web technology that Unity based the stylesheet system on. It won’t be exactly the same, but the basic idea and best practices still apply.</p>
    <p class="normal">Now, the UI looks almost exactly the same as it does in <em class="chapterRef">Chapter 15</em>, <em class="italic">User Interface Design</em>, but it won’t behave in the same way. If you try changing the size of the viewport (selecting <strong class="screenText">GameHUD.uxml</strong> in <a id="_idIndexMarker1067"/>the Hierarchy and changing <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> as we did at the beginning of the chapter), you will see the UI won’t adapt properly, so let’s fix this.</p>
    <h1 id="_idParaDest-204" class="heading-1">Making a responsive UI</h1>
    <p class="normal">In this section, we are<a id="_idIndexMarker1068"/> going to learn how to make the UI we created previously adapt to different screen sizes. We are going to discuss the following concepts:</p>
    <ul>
      <li class="bulletList">Dynamic positioning and sizing</li>
      <li class="bulletList">Dynamic scaling</li>
      <li class="bulletList">Using relative positions</li>
    </ul>
    <p class="normal">Let’s start by discussing how we can make the <strong class="screenText">Position</strong> and <strong class="screenText">Size</strong> of our objects adapt to the screen size.</p>
    <h2 id="_idParaDest-205" class="heading-2">Dynamic positioning and sizing</h2>
    <p class="normal">So far, we have <a id="_idIndexMarker1069"/>used the <strong class="screenText">Left</strong> and <strong class="screenText">Top</strong> position attributes in order to specify the <em class="italic">x</em> and <em class="italic">y</em> positions of our elements with respect to the top-left corner of the screen, and then <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> to define the <strong class="screenText">Size</strong>. While essentially that’s all that’s needed to define an object’s position and size, it is not very useful in all cases, especially when we need to adapt to different screen sizes. </p>
    <p class="normal">For example, if you need to place an object in the top-right corner of the screen, knowing its size is <code class="inlineCode">100x100</code> pixels and the screen size is <code class="inlineCode">1920x1080</code> pixels, we can put the <strong class="screenText">Left</strong> and <strong class="screenText">Right</strong> position attributes as <code class="inlineCode">1820x980</code> pixels, and this will work, but only for that specific resolution. </p>
    <p class="normal">So, what happens if the user runs the game at <code class="inlineCode">1280x720</code> pixels? The object will be outside the screen! In uGUI, we used <strong class="keyWord">Anchors</strong> to solve this issue, but we don’t have them here. Luckily, we have <strong class="screenText">Right</strong> and <strong class="screenText">Bottom</strong> to help.</p>
    <p class="normal">As <strong class="screenText">Left</strong> and <strong class="screenText">Top</strong> attributes, <strong class="screenText">Right</strong> and <strong class="screenText">Bottom</strong> define distances from the parent element’s sides (if there is no parent, then just from the entire screen). Right now, we have both set to <strong class="screenText">auto</strong>, meaning that the position will be driven by <strong class="screenText">Left</strong> and <strong class="screenText">Right</strong> exclusively, but interesting things can happen by changing those values, so let’s use them to make our <strong class="screenText">Score</strong> and <strong class="screenText">Bullet</strong> labels stick to the top-right corner of the screen instead, by doing the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Put the cursor in the bottom part of the UI in the <strong class="screenText">Viewport</strong> until a white bar appears.</li>
      <li class="numberedList">Drag that bar to resize the screen and see how our adapts (or not) to the different size.</li>
      <li class="numberedList">Do the same on the laterals to also see how it adapts to different screen widths:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_27.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.27: UI not adapting to different screen sizes</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Select the score label on the <strong class="screenText">Viewport</strong> and look at the <strong class="screenText">Inspector</strong>.</li>
      <li class="numberedList">Set the <strong class="screenText">Top</strong> and <strong class="screenText">Right</strong> values in the <strong class="screenText">Position</strong> section to <code class="inlineCode">30</code>.</li>
      <li class="numberedList">Set the <strong class="screenText">Left</strong> and <strong class="screenText">Bottom</strong> values to <code class="inlineCode">auto</code> by clicking the <strong class="screenText">px</strong> button at the right of each attribute <a id="_idIndexMarker1070"/>and selecting <code class="inlineCode">auto</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_28.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.28: Changing the unit type of the Position attributes to auto mode</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">Notice the right and top golden-colored squares at the sides of the label became filled, while the left and bottom are hollow. This means that the left and bottom are in <strong class="screenText">auto</strong> mode. You can also toggle <strong class="screenText">auto</strong> mode by clicking those boxes if needed:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_29.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.29: Toggling auto mode of our element position attributes</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="8">Try changing the size of the UI container again as we did in <em class="italic">steps</em> <em class="italic">1</em> and <em class="italic">2</em> to see how our <strong class="screenText">Score</strong> label is always aligned to the top-right corner.</li>
      <li class="numberedList">Repeat <em class="italic">steps</em> <em class="italic">4</em> to <em class="italic">6</em> for the <strong class="screenText">Bullets</strong> label, this time setting the <strong class="screenText">Top</strong> property to <code class="inlineCode">140</code>.</li>
    </ol>
    <p class="normal">What we did with these <a id="_idIndexMarker1071"/>steps was essentially make the position of the object expressed as a distance in pixels against the <strong class="screenText">Top</strong> and <strong class="screenText">Right</strong> sides of the UI, or the top-right corner of the screen. We needed to set the other sides to <code class="inlineCode">auto</code> mode, so they won’t participate in the position calculations.</p>
    <p class="normal">Now, we can use the <strong class="screenText">Position</strong> attribute in other ways as well. As you might imagine by now, we can start combining <strong class="screenText">Left</strong> and <strong class="screenText">Right</strong> and <strong class="screenText">Top</strong> and <strong class="screenText">Bottom</strong> if we wish. In such cases, <strong class="screenText">Left</strong> and <strong class="screenText">Top</strong> will take precedence in defining the position, but then, what do <strong class="screenText">Right</strong> and <strong class="screenText">Bottom</strong> do? They define the size of the element.</p>
    <p class="normal">For example, if we have an element with <strong class="screenText">Left</strong> and <strong class="screenText">Right</strong> attributes set to <code class="inlineCode">100px</code> each and we are seeing our UI on a screen with a width of <code class="inlineCode">1920</code> pixels, the final width of our element will be <code class="inlineCode">1720</code> (<code class="inlineCode">1920</code> minus <code class="inlineCode">100</code> from <strong class="screenText">Left</strong> minus <code class="inlineCode">100</code> from <strong class="screenText">Right</strong>). This way, the <strong class="screenText">Position</strong> attributes represent the distances of the sides of our element from the sides of the screen (or the parent element).</p>
    <p class="normal">Let’s see this in action by making the bottom health bar adapt to the screen width while preserving its position relative to the bottom of the screen by doing the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Select the bottom health bar parent in the <strong class="screenText">Hierarchy</strong>. Don’t select it in the <strong class="screenText">Viewport</strong> as you will only be selecting its filling or border.</li>
      <li class="numberedList">Set <strong class="screenText">Left</strong>, <strong class="screenText">Right</strong>, and <strong class="screenText">Bottom</strong> to <code class="inlineCode">50px</code>.</li>
      <li class="numberedList">Set <strong class="screenText">Top</strong> to auto (click on the <strong class="screenText">px</strong> button at the right and select <strong class="screenText">auto</strong>).</li>
      <li class="numberedList">In the <strong class="screenText">Size</strong> section, set <strong class="screenText">Width</strong> to <strong class="screenText">auto</strong> also.</li>
      <li class="numberedList">Set <strong class="screenText">Height</strong> to <code class="inlineCode">35px</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_30.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.30: Making the player’s base health bar adapt to the screen width</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Change the size of the UI to see how it adapts.</li>
    </ol>
    <p class="normal">With these steps, we defined the bar distance from the sides of the screen as <code class="inlineCode">50</code> pixels for it to adapt to any screen width, while keeping the distance from the border and height fixed. We basically achieved the same behavior as split anchors in uGUI! Consider that we needed to set <strong class="screenText">Size</strong>’s <strong class="screenText">Width</strong> attributes to <strong class="screenText">auto</strong> to let the <strong class="screenText">Left</strong> and <strong class="screenText">Right</strong> attributes drive the position; if you don’t do that, the <strong class="screenText">Width</strong> attributes take precedence and <strong class="screenText">Right</strong> won’t have any effect. I invite you to experiment with other combinations of <strong class="screenText">px</strong>/<strong class="screenText">auto</strong>.</p>
    <p class="normal">One last trick we can do here is to use negative values in the <strong class="screenText">Left</strong>, <strong class="screenText">Top</strong>, <strong class="screenText">Right</strong>, and <strong class="screenText">Bottom</strong> <strong class="screenText">Position</strong> attributes<a id="_idIndexMarker1072"/> of the health bar borders to make the borders slightly bigger than the container and cover the filling borders. Just set <strong class="screenText">Left</strong>, <strong class="screenText">Top</strong>, <strong class="screenText">Right</strong>, and <strong class="screenText">Bottom</strong> to <code class="inlineCode">-15px</code> in this case and remember to set both the <strong class="screenText">Size</strong> <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> attributes to <strong class="screenText">auto</strong>. You might want to reduce the <strong class="screenText">Height</strong> of the bar container (not the border) a little bit, as now it will look thicker due to this change:</p>
    <figure class="mediaobject"><img src="../Images/B18585_16_31.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.31: Using negative Position attributes to cover the filling</p>
    <p class="normal">Another mode aside from <strong class="screenText">px</strong> (pixels) or <strong class="screenText">auto</strong> mode is the percentual (<code class="inlineCode">%</code>) mode, which allows us to represent values as percentages relative to the screen (or parent element if present) size. For example, if we set <strong class="screenText">Top</strong> and <strong class="screenText">Bottom</strong> to <code class="inlineCode">25%</code>, this means that our element will be vertically centered with a size of 50% of the Screen height (remember to set <strong class="screenText">Height</strong> mode to <code class="inlineCode">auto</code> here). We could achieve the same result if we set <strong class="screenText">Top</strong> to <code class="inlineCode">25%</code>, <strong class="screenText">Bottom</strong> to <code class="inlineCode">Auto</code>, and <strong class="screenText">Height</strong> to <code class="inlineCode">50%</code>; as you can see, we can achieve a clever combination of those values.</p>
    <p class="normal">In our case, we will use percentual values in our Life Bar fillings so that we can express its size in percentages. We need this as later in the code, we can specify the width of the bar as a percentage of the player’s life (for example, a player with <code class="inlineCode">25</code> life points and a max of <code class="inlineCode">100</code> points has <code class="inlineCode">25%</code> life). </p>
    <p class="normal">Now, while we solved the positioning adaption to the screen size with the usage of the <strong class="screenText">Left</strong>, <strong class="screenText">Top</strong>, <strong class="screenText">Right</strong>, and <strong class="screenText">Bottom</strong> properties, we still didn’t solve the dynamic sizing of the elements. With sizing<a id="_idIndexMarker1073"/> this time, we are referring to screens with a different <a id="_idIndexMarker1074"/>number of <strong class="keyWord">DPI</strong> (<strong class="keyWord">dots per inch</strong>), so let’s discuss how we can achieve that with the <strong class="keyWord">Panel Settings</strong> asset.</p>
    <h2 id="_idParaDest-206" class="heading-2">Dynamic scaling </h2>
    <p class="normal">We used <code class="inlineCode">1920x1080</code> as the UI base <a id="_idIndexMarker1075"/>resolution to position and size our elements so that they look nice in that resolution. We also changed the UI size to see how the elements adapt their position with different screen sizes, and while that worked nicely, you can notice how the elements looked bigger or smaller while doing that. </p>
    <p class="normal">While having a base reference resolution is good to design our UI, we should consider the sizing of elements on different resolutions, especially on screens with high DPI. Sometimes, you can have screens with higher resolution but the same physical size in centimeters. This means pixels are smaller in the ones with higher resolution, hence they have a larger DPI, so elements can seem smaller if not scaled properly. </p>
    <p class="normal">In the past, we used the <strong class="keyWord">Canvas Scaler</strong> component of the <strong class="keyWord">Canvas</strong> to make the UI scale the size of its elements according to the screen resolution. We have the exact same settings here as in <a id="_idIndexMarker1076"/>the <strong class="keyWord">Panel Settings</strong> asset referenced in our UI Document component, so let’s configure it by doing the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Look for the <strong class="screenText">Panel Settings</strong> asset in the <strong class="screenText">Project</strong> panel and select it. Another option would be to select the <code class="inlineCode">UI Document</code> GameObject in the Main Editor Hierarchy and click the asset referenced in the <strong class="screenText">Panel Settings</strong> property:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_32.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.32: Panel Settings being referenced in the UI Document component</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Set <strong class="screenText">Scale Mode</strong> to <strong class="screenText">Scale With Screen Size</strong>.</li>
      <li class="numberedList">Set <strong class="screenText">Screen Match Mode</strong> to <strong class="screenText">Match Width Or Height</strong>.</li>
      <li class="numberedList">Set the <strong class="screenText">Reference Resolution</strong> <strong class="screenText">X</strong> value to <code class="inlineCode">1920</code> and <strong class="screenText">Y</strong> to <code class="inlineCode">1080</code>.</li>
      <li class="numberedList">Move the <strong class="screenText">Match</strong> slider all the way to the right, toward the end labeled <strong class="screenText">Height</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_33.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.33: Setting the scaling of our UI</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Observe how changing the height of the <strong class="screenText">Game</strong> panel of the Unity editor will make the UI adapt its element sizes accordingly (change the whole Unity editor window height).</li>
    </ol>
    <p class="normal">What we did with those <a id="_idIndexMarker1077"/>changes was first set <strong class="screenText">Reference Resolution</strong> to whatever resolution we designed our UI, in our case, <code class="inlineCode">1920x1080</code>. Then, we set <strong class="screenText">Screen Match Mode</strong> to allow us to scale our elements according to one of the sides, <strong class="screenText">Width</strong>, <strong class="screenText">Height</strong>, or a combination of the two if we prefer. In our case, we chose <strong class="screenText">Height</strong>, mainly because our game is targeted at PC, where the screens are wide rather than tall. This means that on different screen widths, the elements will look the same size, but on different heights, the elements will be bigger or smaller.</p>
    <p class="normal">With these settings, we can do some math to understand the values. If our screen is the same as the reference resolution (<code class="inlineCode">1920x1080</code>), the element sizes will be the same as we specified in the size of our elements in pixels, so for the case of our player avatar, it will be <code class="inlineCode">150x150</code> pixels. Remember that the physical size in centimeters depends on the DPI of the screen. </p>
    <p class="normal">Now, imagine that we have a 4k screen, meaning a resolution of <code class="inlineCode">3840x2160</code>. As we specified that our UI matches via <strong class="screenText">Height</strong>, we can determine that our elements will double in size because our screen has a height that is double the reference resolution (<code class="inlineCode">2160</code> divided <code class="inlineCode">1080</code>). Our player avatar will be <code class="inlineCode">300x300</code>, making the element have the same physical size in a 4k screen, double size but double pixel density achieves that. Finally, consider an ultra-wide standard resolution of <code class="inlineCode">2560×1080</code> (yes, very wide screens), in which case the elements will be the same size as the only change is the width; the only difference is that the elements will have more horizontal separation due to the screen size. I know these calculations can be confusing but keep experimenting with the values of the <strong class="screenText">Panel Settings</strong> and <strong class="screenText">Game View</strong> sizes to understand them better.</p>
    <p class="normal">Great, now we really have the same HUD. We could start applying the concepts seen so far to the <strong class="screenText">Options</strong> menu, but <a id="_idIndexMarker1078"/>let’s take the opportunity to do it in a different way, using <strong class="keyWord">relative</strong> <strong class="keyWord">positions</strong>, a way to create a flow of elements where the elements’ positions depend on each other.</p>
    <h2 id="_idParaDest-207" class="heading-2">Using relative positions</h2>
    <p class="normal">In the HUD of our <a id="_idIndexMarker1079"/>game, each element requires its<a id="_idIndexMarker1080"/> own <strong class="screenText">Position</strong> and <strong class="screenText">Size</strong>, and the different elements’ positions can be resized and repositioned without affecting others. We might observe the case of the player health bar and the avatar, but the changes would be trivial in this case. There are other cases where this is not that trivial, as in the case of a <strong class="screenText">List</strong> of elements (for example, a list of matches to join in a multiplayer game) that needs to adapt vertically or horizontally, and here is where <strong class="keyWord">relative positions</strong> help us.</p>
    <p class="normal">Relative positions allow us to make the positions of the elements relative to each other; in a way, the position of one element will depend on the position of the previous one, and that one to its previous, and so on, forming a chain or <strong class="keyWord">flow</strong>. This works like <strong class="screenText">Vertical</strong> and <strong class="screenText">Horizontal Layouts</strong> on uGUI. In our case, we will make the <strong class="screenText">Pause</strong> label and the <strong class="screenText">Options</strong> and <strong class="screenText">Exit</strong> buttons of our options menu be vertically aligned and centered along its parent using those.</p>
    <p class="normal">Let’s start creating the menu by doing the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Create a new UI Document (click the <strong class="screenText">+</strong> button after going to<strong class="screenText"> Project View</strong> |<strong class="screenText"> UI Tookit</strong> | <strong class="screenText">UI Document</strong>) and call it <code class="inlineCode">OptionsMenu</code>. We can work on the previous UI Document but let’s keep those pieces of UI separated for easy activation and deactivation, and general assets organization.</li>
      <li class="numberedList">Double-click the asset to set it as the current UI being edited by the <strong class="screenText">UI Builder</strong>.</li>
      <li class="numberedList">Select the root object (<strong class="screenText">OptionsMenu.uxml</strong> in the <strong class="screenText">Hierarchy</strong>) and set the <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> <strong class="screenText">Inspector</strong> properties to <code class="inlineCode">1920x1080</code> pixels.</li>
      <li class="numberedList">Create a new GameObject with the UI Document component (<strong class="screenText">GameObject</strong> |<strong class="screenText"> UI Toolkit</strong> | <strong class="screenText">UI Document</strong>) and drag the asset for this object to render it (as we did with the HUD created earlier in the chapter).</li>
      <li class="numberedList">Double-click the<a id="_idIndexMarker1081"/> UI <a id="_idIndexMarker1082"/>Document asset to open the <strong class="screenText">UI Builder</strong> window to edit it, and in that window, drag a new <strong class="screenText">Visual Element</strong> to the <strong class="screenText">Hierarchy</strong> or <strong class="screenText">Viewport</strong> and call it <code class="inlineCode">Container</code> (the <strong class="screenText">Name</strong> property in the <strong class="screenText">Inspector</strong> in <strong class="screenText">UI Builder</strong>).</li>
      <li class="numberedList">Set the <strong class="screenText">Left</strong>, <strong class="screenText">Right</strong>, <strong class="screenText">Top</strong>, and <strong class="screenText">Right</strong> <strong class="screenText">Position</strong> attributes to <code class="inlineCode">0px</code>.</li>
      <li class="numberedList">Set <strong class="screenText">Position</strong> to <strong class="screenText">Absolute</strong>.</li>
      <li class="numberedList">Set <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> in the <strong class="screenText">Size</strong> section to <strong class="screenText">auto</strong>. This will make the container fit the entire screen.</li>
      <li class="numberedList">Drag a new <strong class="screenText">Visual Element</strong> to be a child of the <strong class="screenText">Container</strong> and call it <code class="inlineCode">Background</code>.</li>
      <li class="numberedList">Leave <strong class="screenText">Position</strong> as <strong class="screenText">Relative</strong> this time.</li>
      <li class="numberedList">Set <strong class="screenText">Size</strong>’s <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> to <code class="inlineCode">500px</code>. </li>
      <li class="numberedList">Set the <strong class="screenText">Background Image </strong>of the <strong class="screenText">Background</strong> object to use the same background sprite used in the previous chapter.</li>
      <li class="numberedList">Select the <strong class="screenText">Container</strong> parent object (not the <strong class="screenText">Background</strong>).</li>
      <li class="numberedList">In the <strong class="screenText">Inspector</strong>, set the <strong class="screenText">Align Items</strong> property of the <strong class="screenText">Align</strong> section to <code class="inlineCode">center</code>, which is the third button. If you hover the mouse over the icons, they will show their names in a tooltip.</li>
      <li class="numberedList">Set <strong class="screenText">Justify Content</strong> to <strong class="screenText">Center</strong> (second button):</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_34.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.34: Preparing the UI background to host elements inside</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="16">Change the size of the UI using the white bars at the sides to see how the background is always centered.</li>
    </ol>
    <p class="normal">Even if we have only one element, we can start seeing how the relative positions work. First, we created an empty object that will always adapt to the screen size, allowing us to make the children’s elements depend on the full screen size. Then, we created an image element with a fixed size, but with relative position, meaning its position will be calculated by the parent container. Finally, we told the <strong class="screenText">Container</strong> to make its child objects aligned to its horizontal and vertical center, so the background immediately became centered whatever the screen size is. When working with absolute positions, the Align properties<a id="_idIndexMarker1083"/> didn’t work, so this is one of the first <a id="_idIndexMarker1084"/>benefits of <strong class="screenText">relative </strong>positioning.</p>
    <p class="normal">But <strong class="screenText">relative</strong> positioning becomes more powerful with multiple elements, so let’s add the <strong class="screenText">Label</strong> and <strong class="screenText">Buttons</strong> to our <strong class="screenText">Background</strong> element to explore this concept further by doing the following:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">From the <strong class="screenText">Library</strong> pane at the bottom left of <strong class="screenText">UI Builder</strong>, drag a <strong class="screenText">Label</strong> and two <strong class="screenText">Button</strong> elements inside the <strong class="screenText">Background</strong> in the <strong class="screenText">Hierarchy</strong>. Note that there’s a bug where sometimes, even if you drag and drop a new element inside the desired object, it won’t be its child. Just drag the one created in the Hierarchy this time:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_35.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.35: Adding elements inside the menu background</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Observe how by default, the elements became vertically aligned one on top of the other<a id="_idIndexMarker1085"/> due to the relative <a id="_idIndexMarker1086"/>position’s default settings:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_36.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.36: Automatic relative vertical positioning</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Select the <strong class="screenText">Background</strong> element and set <strong class="screenText">Justify Content</strong> to <code class="inlineCode">space-around</code> (fifth button). This will spread the elements along the background. </li>
      <li class="numberedList">Set <strong class="screenText">Align Items</strong> to <strong class="screenText">center</strong> (third option) to center elements horizontally:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_37.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.37: Automatic relative vertical positioning</p>
    <div class="note">
      <p class="normal">There is a similar mode for<strong class="screenText"> Justify Content</strong> called “space-between” (the fourth button in Justify Content) that will also spread the elements along the vertical axis but won’t leave space on top of the first element or the bottom of the last one. Also, <strong class="screenText">Align Items</strong> has an option called <strong class="screenText">stretch</strong> (the fifth option) that, like <strong class="screenText">center</strong>, will center elements horizontally, but also stretch them instead of respecting each <a id="_idIndexMarker1087"/>element’s width. I recommend<a id="_idIndexMarker1088"/> experimenting with the different aligning modes to discover all opportunities.</p>
    </div>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Set the <strong class="screenText">Label</strong> <strong class="screenText">Text</strong>’s <strong class="screenText">Font</strong> and <strong class="screenText">Size</strong> attributes to whatever seems fit. In my case, I used the imported font and a size of <code class="inlineCode">60px</code>. Remember to also set the <strong class="screenText">Text</strong> to <code class="inlineCode">Pause</code>.</li>
      <li class="numberedList">Set the <strong class="screenText">Buttons</strong> <strong class="screenText">Background Image</strong> to use the same used for the button in the last chapter.</li>
      <li class="numberedList">Set the <strong class="screenText">Color</strong> property of the <strong class="screenText">Background</strong> section to a color with no alpha. You can achieve this by clicking the color rectangle and reducing the <strong class="screenText">A</strong> channel in the color picker to <code class="inlineCode">0</code>. The idea of this color is to act as a background for our image, but we don’t need it, so we made it completely transparent.</li>
      <li class="numberedList">Set the Buttons <strong class="screenText">Text</strong>’s <strong class="screenText">Font</strong>, <strong class="screenText">Size</strong>, and <strong class="screenText">Color</strong> to whatever seems fit to you. In my case, I’m using <code class="inlineCode">50</code> and gray color.</li>
      <li class="numberedList">In the <strong class="screenText">Margin and Padding</strong> section, set <strong class="screenText">Padding</strong> to have some spacing between the text and the borders of the button. In my case, <code class="inlineCode">30px</code> did the trick:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18585_16_38.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.38: Adding inner padding to the button contents (the text in this case)</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="10">Also, set the <strong class="screenText">Top</strong> and <strong class="screenText">Bottom</strong> <strong class="screenText">Padding</strong> of the <strong class="screenText">Background</strong> to allow some space between the borders of the window and its elements. In my case, it is <code class="inlineCode">40px</code> each.</li>
    </ol>
    <p class="normal">As you can see, we changed different settings to set the size of the elements dynamically, like font sizes and paddings, and the relative system along with the align settings took the role of determining the position of the elements automatically. We can rearrange the<a id="_idIndexMarker1089"/> order <a id="_idIndexMarker1090"/>of the elements by dragging them in the Hierarchy and they will be accommodated automatically. We could have also set the size of the elements with the <strong class="screenText">Size</strong> property, and we can also apply some offsets if desired using the <strong class="screenText">Position</strong> properties, but I encourage you to see how these properties behave in Relative mode on your own.</p>
    <p class="normal">One last setting I want you to explore is the <strong class="screenText">Direction</strong> attribute of the <strong class="screenText">Flex</strong> section, which, as you can imagine, will determine the orientation the elements will follow, vertically from top to bottom or bottom to top, and horizontally from left to right or right to left. For example, you could set <strong class="screenText">Direction</strong> to distribute the elements from left to right using the <strong class="screenText">row</strong> mode (third button) and make the background wider to have a horizontal options menu if you wish.</p>
    <figure class="mediaobject"><img src="../Images/B18585_16_39.png" alt=""/></figure>
    <p class="packt_figref">Figure 16.39: Changing to a vertical orientation of elements</p>
    <p class="normal">As a side note, you might notice that the images for the background and buttons will look bigger than the options menu done in the last chapter. That’s because the <strong class="screenText">Pixels per Unit</strong> setting that we changed on the <strong class="screenText">Texture</strong> assets to control the scaling of the textures won’t take effect in UI Toolkit; you will need to manually change the texture file size in any image editor to give it its proper size. The best practice here would be to always create the<a id="_idIndexMarker1091"/> images with a size that will look fine in our <a id="_idIndexMarker1092"/>maximum supported resolution. Usually, this is <code class="inlineCode">1920x1080</code> on PC but note that 4k resolutions are becoming more popular every day.</p>
    <h1 id="_idParaDest-208" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, we had an introduction to the key concepts of UI Toolkit and how to create UI Documents and Stylesheets. Regarding UI Documents, we learned how to create different elements like images, text, and buttons and how to position and size them using different methods, like absolute and relative positioning, and pixel or percentual units. Also, we saw how to make the UI adapt to different sizes using different combinations of <strong class="screenText">Position</strong> attributes. Finally, we learned how to use USS Stylesheets to share styles between different elements to easily manage our whole UI skinning. </p>
    <p class="normal">Essentially, we learned again how to make UIs with a different system. Again, please note that this system is still in the experimental phase and is not recommended for real production projects. We used all these concepts to recreate the same UI created in <em class="chapterRef">Chapter 15</em>,<em class="italic"> User Interface Design</em>.</p>
    <p class="normal">In the next chapter, we are going to see how to add animations to our game to make our character move. We will also see how to create cut-scenes and dynamic cameras.</p>
  </div>
</body></html>