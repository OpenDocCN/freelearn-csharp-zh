# 前言

有一些编程书籍长达数千页，旨在成为 C#语言、.NET 库以及网站、服务、桌面和移动应用等应用模型的综合参考。

本书与以往不同。它是学习使用.NET 构建应用和服务的各种技术的分步指南。它简洁明了，旨在成为一本轻松愉快的读物，其中包含了每个主题的实用、动手实践教程。虽然这种广泛的叙述牺牲了一些深度，但你仍会发现许多路标，如果你愿意，可以进一步探索。

根据我的经验，学习新技术最难的部分是入门。一旦我理解了最重要的关键概念，并看到了一些实际代码的运行，我就会感到舒适地通过探索官方文档来深入学习。一旦你看到了基础知识是如何正确工作的，你就可以自信地进行自己的实验。

本书最适合那些已经了解 C#和.NET 基础的人。

如果你已经对 C#语言和.NET 库的旧版本有经验，那么我在*第一章*，*使用.NET 介绍应用和服务*的末尾有一个仅在线的章节，涵盖了 C# 8 和.NET Core 3.1 以及之后的更新内容。

我将指出构建现代用户界面和实现服务时应用模型和框架最重要的方面，这样你就可以参与关于技术和架构选择的讨论，并快速高效地实现它们。

# 代码解决方案的查找位置

你可以从以下链接的 GitHub 仓库下载或克隆逐步指导任务和练习的解决方案：[`github.com/markjprice/apps-services-net8`](https://github.com/markjprice/apps-services-net8)。

如果你不知道如何做，那么我在*第一章*，*使用.NET 介绍应用和服务*的末尾提供了如何做到这一点的说明。

# 本书涵盖内容

## 引言

*第一章*，*使用.NET 介绍应用和服务*，是关于设置你的开发环境和使用 Visual Studio 2022、Visual Studio Code 或 JetBrains Rider。你还将了解一些寻找帮助的好地方，以及如何联系（本书的作者）我以获取帮助或提供反馈以改进本书。仅在线部分回顾了现代 C#和.NET 中添加到语言和库中的新功能，如何对你的代码进行性能基准测试，以及如何在编译过程中与反射类型、属性、表达式树和动态生成源代码进行交互。

## 数据

*第二章*，*使用 SQL Server 管理关系型数据*，介绍了如何在 Windows 或 Azure 云中使用 SQL 数据库来设置 SQL Server。（一个仅在网络上可用的部分展示了如何在 Windows、macOS 或 Linux 上的 Docker 容器中设置 SQL Server。）然后，您将为名为 Northwind 的虚构组织设置一个示例数据库。您将学习如何使用 ADO.NET 库（`Microsoft.Data.SqlClient`）以最低级别进行读写，以实现最佳性能，然后使用名为 **Dapper** 的对象到数据存储映射技术来简化开发。

*第三章*，*使用 EF Core 为 SQL Server 构建实体模型*，介绍了使用名为 **Entity Framework Core**（**EF Core**）的高级对象到数据存储映射技术。您将为在 *第二章* 中创建的 Northwind 数据库创建类库来定义 EF Core 模型。这些类库随后将在许多后续章节中使用。

*第四章*，*使用 Azure Cosmos DB 管理非关系型数据*，介绍了云原生非 SQL 数据存储 Azure Cosmos DB。您将学习如何使用其原生 API 进行读写。一个仅在网络上可用的部分还涵盖了更专业的基于图论的 Gremlin API。

## 图书馆

*第五章*，*多任务和并发*，展示了如何通过使用线程和任务允许同时执行多个操作，从而提高性能、可扩展性和用户生产力。

*第六章*，*实现流行的第三方库*，讨论了允许您的代码执行常见实用任务的类型，例如使用 Humanizer 格式化文本和数字，使用 ImageSharp 操作图像，使用 Serilog 记录，使用 AutoMapper 将对象映射到其他对象，使用 FluentAssertions 进行单元测试断言，使用 FluentValidation 验证数据，以及使用 QuestPDF 生成 PDF。

*第七章*，*处理日期、时间和国际化*，涵盖了允许您的代码执行常见任务如处理日期和时间、时区以及全球化和本地化数据和应用程序用户界面的类型。为了补充内置的日期和时间类型，我们探讨了使用更好的第三方库 Noda Time 的好处。

## 服务

*第八章*，*使用最小 API 构建和保障 Web 服务*，介绍了使用 ASP.NET Core 最小 API 构建 Web 服务的最简单方法。这避免了控制器类的需求。您将学习如何使用原生 AOT 发布来提高启动时间和资源。然后，您将学习如何使用速率限制、CORS、身份验证和授权来保护和保障 Web 服务。您将探索使用 Visual Studio 2022 中的新 HTTP 编辑器和 Visual Studio Code 的 REST 客户端扩展来测试 Web 服务的方法。一个仅在网络上可用的部分介绍了使用 **Open Data Protocol**（**OData**）快速公开数据模型的服务构建。

*第九章*，*缓存、队列和弹性后台服务*，介绍了服务架构设计，向服务添加功能以提高可伸缩性和可靠性，如缓存和队列，如何处理短暂问题，以及通过实现后台服务来实现长运行服务。

*第十章*，*使用 Azure Functions 构建无服务器纳米服务*，为您介绍了 Azure Functions，它可以在执行时仅需要服务器端资源。当它们被队列中发送的消息、上传到存储的文件或定期计划的时间触发时，它们会执行。

*第十一章*，*使用 SignalR 广播实时通信*，为您介绍了 SignalR，这是一种使开发者能够创建具有多个客户端并能实时向所有客户端或其子集广播消息的服务的技术。例如，需要即时更新信息（如股价）的通知系统和仪表板。

*第十二章*，*使用 GraphQL 组合数据源*，介绍了构建提供简单单个端点以从多个源公开数据的服务。您将使用 ChilliCream GraphQL 平台来实现该服务，其中包括 Hot Chocolate。本版新增了如何实现分页、过滤、排序和订阅。

*第十三章*，*使用 gRPC 构建高效的微服务*，介绍了使用高效的 gRPC 标准构建微服务。您将了解用于定义服务合同的`.proto`文件格式和用于消息序列化的 Protobuf 二进制格式。您还将学习如何通过 gRPC JSON 转码使网络浏览器能够调用 gRPC 服务。本版新增了如何通过原生 AOT 发布改进 gRPC 服务的启动时间和内存占用，处理自定义数据类型（包括非支持类型如 decimal），以及实现拦截器和处理故障。

## 应用程序

*第十四章*，*使用 ASP.NET Core 构建 Web 用户界面*，是关于使用 ASP.NET Core MVC 构建 Web 用户界面。您将学习 Razor 语法、标签助手和 Bootstrap，以快速进行用户界面原型设计。

*第十五章*，*使用 Blazor 构建 Web 组件*，是关于如何使用.NET 8 中引入的新统一全栈托管 Blazor 来构建用户界面组件。Blazor 组件现在可以单独配置，在同一个项目中以客户端和服务器端执行。在需要与浏览器功能（如本地存储）交互时，您将学习如何执行 JavaScript 互操作。一个可选的仅在网络上提供的部分，*利用开源 Blazor 组件库*，介绍了 Blazor 组件的一些流行开源库。

*第十六章*，*使用 .NET MAUI 构建移动和桌面应用程序*，将向您介绍如何为 Android、iOS、macOS 和 Windows 构建跨平台移动和桌面应用程序。您将学习 XAML 的基础知识，它可以用来定义图形应用程序的用户界面。一个仅在网络上提供的部分，*为 .NET MAUI 实现模型-视图-视图模型*，涵盖了使用模型-视图-视图模型进行图形应用程序架构和实现的最佳实践。您还将看到使用 MVVM Toolkit 和 .NET MAUI 社区工具包的好处。另一个仅在网络上提供的部分，*将 .NET MAUI 应用程序与 Blazor 和原生平台集成*，涵盖了构建充分利用其运行操作系统的混合原生和 Web 应用程序。您将集成原生平台功能，如系统剪贴板、文件系统、检索设备和显示信息以及弹出通知。对于桌面应用程序，您将添加菜单并管理窗口。

## 结论

*后记*，描述了您学习更多关于使用 C# 和 .NET 构建应用程序和服务的选项，以及您应该学习以成为全面的专业 .NET 开发者的工具和技能。一个仅在网络上提供的部分，*介绍调查项目挑战*，记录了读者可以尝试实现并发布到公共 GitHub 仓库以获得作者和其他读者反馈的调查/投票软件解决方案的产品需求。

*附录*，*测试您的知识问题的答案*，包含了每章末尾的测试问题的答案。

您可以在以下链接中阅读附录：[`github.com/markjprice/apps-services-net8/blob/main/docs/B19587_Appendix.pdf`](https://github.com/markjprice/apps-services-net8/blob/main/docs/B19587_Appendix.pdf)。

# 您需要这本书的哪些内容

您可以使用 Visual Studio 2022、Visual Studio Code 以及大多数操作系统上的命令行工具（包括 Windows、macOS 和许多 Linux 变体）开发和部署 C# 和 .NET 应用程序和服务。您只需要支持 Visual Studio Code 的操作系统和互联网连接，就可以完成这本书。如果您更喜欢使用 JetBrains Rider 这样的第三方工具，那么您也可以。

# 下载本书中的彩色图像

我们还为您提供了一个包含本书中使用的截图和图表彩色图像的 PDF 文件。彩色图像将帮助您更好地理解输出的变化。

您可以从 [`packt.link/gbp/9781837637133`](https://packt.link/gbp/9781837637133) 下载此文件。

# 习惯用法

在这本书中，您将找到几种不同的文本样式，用于区分不同类型的信息。以下是这些样式的示例及其含义的解释。

`CodeInText`: 表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。例如：“`Controllers`、`Models`和`Views`文件夹包含 ASP.NET Core 类和用于在服务器上执行的`.cshtml`文件。”

代码块设置如下：

```cs
// storing items at index positions 
names[0] = "Kate";
names[1] = "Jack"; 
names[2] = "Rebecca"; 
names[3] = "Tom"; 
```

当我们希望将您的注意力引到代码块的一个特定部分时，相关的行或项目会被突出显示：

```cs
// storing items at index positions 
names[0] = "Kate";
**names[****1****] =** **"Jack"****;** 
names[2] = "Rebecca"; 
names[3] = "Tom"; 
```

任何命令行输入或输出都写成如下：

```cs
dotnet new console 
```

**粗体**: 表示新**术语**、重要的**单词**或您在屏幕上看到的单词，例如在菜单或对话框中，这些单词在文本中也会这样显示。例如：“点击**下一步**按钮将您带到下一个屏幕。”

重要提示和指向外部进一步阅读资源的链接出现在这样的框中。

**良好实践**: 如何像专家一样编程的建议如下。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**: 如果您对本书的任何方面有疑问，请在邮件主题中提及书名，并通过`customercare@packtpub.com`将邮件发送给我们。

**勘误**: 尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，如果您能向我们报告这一点，我们将不胜感激。请访问[www.packtpub.com/support/errata](https://www.packtpub.com/support/errata)，选择您的书籍，点击**勘误提交表单**链接，并输入详细信息。

**盗版**: 如果你在互联网上以任何形式遇到我们作品的非法副本，如果你能提供位置地址或网站名称，我们将不胜感激。

请通过`copyright@packt.com`与我们联系，并附上材料的链接。

如果您有兴趣成为作者：如果您在某个主题上具有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com](https://authors.packtpub.com)。

想了解更多关于 Packt 的信息，请访问 packt.com

# 分享您的想法

读完*Apps and Services with .NET 8 - 第二版*后，我们很乐意听听您的想法！请[点击此处直接进入此书的亚马逊评论页面](https://packt.link/r/1-837-63713-X)并分享您的反馈。

您的评论对我们和科技社区都很重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢在路上阅读，但无法携带您的印刷书籍到处走？您的电子书购买是否与您选择的设备不兼容？

别担心，现在每购买一本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠远不止这些，您将获得独家折扣、新闻通讯以及每天收件箱中的优质免费内容

按照以下简单步骤获取福利：

1.  扫描二维码或访问以下链接

![二维码](img/B19587_QR_Free_PDF.png)

[`packt.link/free-ebook/9781837637133`](https://packt.link/free-ebook/9781837637133)

1.  提交您的购买证明

1.  就这样！我们将直接将您的免费 PDF 和其他福利发送到您的电子邮件
