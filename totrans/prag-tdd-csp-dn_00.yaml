- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: As a consultant, I worked with many teams in multiple organizations. I’ve seen
    teams doing TDD and I’ve seen teams doing unit testing without TDD. I’ve also
    seen teams that thought they were doing unit testing but were doing integration
    testing and I’ve seen teams that are doing none! As an ordinary human being, I
    started forming a belief based on empirical evidence that TDD teams are the most
    successful, but this is not because they are using TDD! TDD results from having
    passion.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名顾问，我与多个组织中的许多团队合作过。我见过进行TDD的团队，也见过没有进行TDD但进行单元测试的团队。我还见过认为自己在进行单元测试但实际上在进行集成测试的团队，以及没有进行任何测试的团队！作为一个普通人，我开始根据经验证据形成信念，认为进行TDD的团队是最成功的，但这并不是因为他们使用了TDD！TDD的结果来自于拥有激情。
- en: '*TDD is unit testing plus passion*. Unit testing in some teams is imposed,
    therefore, the developers have to do it, but TDD is rarely imposed and it is up
    to the developers to enforce it on themselves. Needless to say, passionate developers
    produce quality projects and quality projects have more potential to succeed.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '*TDD是单元测试加上激情*。在一些团队中，单元测试是强制的，因此开发者必须执行它，但TDD很少被强制执行，这取决于开发者自己来强制执行。不用说，充满激情的开发者会创造出高质量的项目，而高质量的项目更有可能成功。'
- en: TDD is usually combined with some or all aspects of **domain-driven design**
    (**DDD**) architecture. So, I made sure I covered both TDD and DDD combined to
    be able to give realistic examples. I also wanted to reflect today’s market that
    is divided between two database categories, relational and document DBs, so I
    took the liberty to include an example chapter for each and show the differences
    in unit-testing implementations with the objective of keeping the book pragmatic.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: TDD通常与**领域驱动设计**（**DDD**）架构的某些或全部方面相结合。因此，我确保我涵盖了TDD和DDD的结合，以便能够给出现实生活中的例子。我还想反映今天的市场，它被关系型数据库和文档数据库这两个数据库类别所分割，所以我自由地包括了每个类别的示例章节，并展示了单元测试实现中的差异，目的是使本书保持实用。
- en: Don’t be tricked by the book size, as the diagrams and the code snippets do
    inflate the book. I strived to stay away from old and impractical theories to
    shorten the book and stick to the point.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 不要被本书的篇幅所欺骗，因为图表和代码片段确实增加了本书的篇幅。我努力避免过时和不实用的理论，以缩短本书的篇幅并保持重点突出。
- en: TDD and unit testing are in most modern job specifications, a requirement for
    interview test projects, and the subject of hot interview questions. If you wanted
    to know more about these topics and become a TDD developer, then you came to the
    right place.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: TDD和单元测试在大多数现代职位说明中都是要求，是面试测试项目的必备条件，也是热门面试问题的主题。如果你想要了解更多关于这些主题的信息，并成为一名TDD开发者，那么你来到了正确的地点。
- en: There are many other good books on TDD and they are aimed at .NET developers
    as well, so *why this book?* In this book, I show real practical implementations
    by going to the DDD world, relational DBs, and document DBs. I demonstrate the
    decision tree of the mindset that practitioners use when doing TDD. I show the
    relationship between SOLID and TDD and I introduce a set of memorable best practices
    known as the FIRSTHAND guidelines of TDD.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 关于TDD的许多其他优秀书籍也针对.NET开发者，那么*为什么这本书？* 在这本书中，我通过进入DDD世界、关系型数据库和文档数据库，展示了真正的实际实现。我展示了实践者在进行TDD时使用的思维模式的决策树。我展示了SOLID与TDD之间的关系，并介绍了一套被称为TDD的FIRSTHAND指南的易于记忆的最佳实践。
- en: My intention for writing this book is to have you as a confident TDD practitioner,
    or at least a unit-testing practitioner, and I hope I was able to deliver my intention.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 我写这本书的目的是让你成为一个自信的TDD实践者，或者至少是一个单元测试实践者，我希望我已经实现了我的目标。
- en: Who this book is for
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书面向对象
- en: Test-driven development is the mainstream way of designing, documenting, and
    testing your application from day one. As a developer looking to climb the technical
    ladder to a more senior position, TDD and its related topics of unit testing,
    test doubles, and dependency injection are a must-learn.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 测试驱动开发是从第一天开始设计、记录和测试你的应用程序的主流方式。作为一名希望攀登技术阶梯到更高职位的高级开发者，TDD及其相关的单元测试、测试替身和依赖注入主题是必须学习的。
- en: This book is for mid- to senior-level .NET developers who are looking to utilize
    the potential of TDD to develop high-quality software. Basic knowledge of OOP
    and C# programming concepts is assumed, but no knowledge of TDD or unit testing
    is expected. As the book provides in-depth coverage of all the concepts of TDD
    and unit testing, and acts as an excellent guide for developers who want to build
    a TDD-based application from scratch or developers planning to introduce unit
    testing into their organization.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 本书面向中级至高级.NET开发者，旨在利用TDD的潜力来开发高质量的软件。假设读者具备OOP和C#编程概念的基本知识，但不需要了解TDD或单元测试。本书全面覆盖了TDD和单元测试的所有概念，并作为开发者从零开始构建基于TDD的应用或计划将单元测试引入其组织的优秀指南。
- en: What this book covers
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖的内容
- en: The book covers TDD and its .NET ecosystem of IDEs and libraries and goes through
    setting up the environment. The book starts by covering the topics that form the
    prerequisites for TDD, which are dependency injection, unit testing, and test
    doubles. Then, after covering TDD and its best practices, the book dives into
    building an application from scratch using domain-driven design as an architecture.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 本书涵盖了TDD及其.NET生态系统中的IDE和库，并介绍了环境设置。本书首先涵盖了构成TDD先决条件的话题，即依赖注入、单元测试和测试替身。然后，在介绍TDD及其最佳实践之后，本书深入探讨了使用领域驱动设计作为架构从头开始构建应用。
- en: The book also covers the basics of building a continuous integration pipeline,
    dealing with legacy code that wasn’t written with testability in mind, and finishing
    with ideas for rolling out TDD into your organization.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 本书还涵盖了构建持续集成管道的基础、处理未考虑可测试性的遗留代码，并以将TDD引入组织的想法结束。
- en: '[*Chapter 1*](B18370_01.xhtml#_idTextAnchor014), *Writing Your First TDD Implementation*,
    doesn’t have a long introduction or theory but rather dives directly into IDE
    selection and writing your first TDD implementation to get a taste of flavor of
    the content of the book.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第1章*](B18370_01.xhtml#_idTextAnchor014), *编写您的第一个TDD实现*，没有长篇介绍或理论，而是直接进入IDE选择和编写您的第一个TDD实现，以体验本书内容的味道。'
- en: '[*Chapter 2*](B18370_02.xhtml#_idTextAnchor037), *Understanding Dependency
    Injection by Example*, revises advanced OOP principles needed to understand the
    concept of dependency injection and provides multiple examples.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第2章*](B18370_02.xhtml#_idTextAnchor037), *通过示例理解依赖注入*，复习了理解依赖注入概念所需的先进OOP原则，并提供了多个示例。'
- en: '[*Chapter 3*](B18370_03.xhtml#_idTextAnchor066), *Getting Started with Unit
    Testing*, offers a simple introduction to xUnit and unit-testing basics.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第3章*](B18370_03.xhtml#_idTextAnchor066), *开始使用单元测试*，提供了对xUnit和单元测试基础简单介绍。'
- en: '[*Chapter 4*](B18370_04.xhtml#_idTextAnchor097), *Real Unit Testing with Test
    Doubles*, goes through stubbing, mocking, and NSubstitute, and then discusses
    more testing categories.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第4章*](B18370_04.xhtml#_idTextAnchor097), *使用测试替身进行真实单元测试*，介绍了存根、模拟和NSubstitute，然后讨论了更多测试类别。'
- en: '[*Chapter 5*](B18370_05.xhtml#_idTextAnchor114), *Test-Driven Development Explained*,
    demonstrates how to write unit testing but in TDD style, and discusses the pros
    and cons.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第5章*](B18370_05.xhtml#_idTextAnchor114), *测试驱动开发解析*，展示了如何以TDD风格编写单元测试，并讨论了其优缺点。'
- en: '[*Chapter 6*](B18370_06.xhtml#_idTextAnchor140), *The FIRSTHAND Guidelines
    of TDD*, details the best practices of unit testing and TDD.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第6章*](B18370_06.xhtml#_idTextAnchor140), *TDD的FIRSTHAND指南*，详细介绍了单元测试和TDD的最佳实践。'
- en: '[*Chapter 7*](B18370_07.xhtml#_idTextAnchor183), *A Pragmatic View of Domain-Driven
    Design*, introduces DDD, services, and repositories.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第7章*](B18370_07.xhtml#_idTextAnchor183), *对领域驱动设计的实用看法*，介绍了DDD、服务和存储库。'
- en: '[*Chapter 8*](B18370_08_RN.xhtml#_idTextAnchor209), *Designing an Appointment
    Booking App*, outlines the specification for a real-life app to be implemented
    later with a DDD architecture and the TDD style.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第8章*](B18370_08_RN.xhtml#_idTextAnchor209), *设计预约应用*，概述了将使用DDD架构和TDD风格在以后实现的现实应用规范。'
- en: '[*Chapter 9*](B18370_09.xhtml#_idTextAnchor226), *Building an Appointment Booking
    App with Entity Framework and Relational DB*, demonstrates an example of a TDD
    application using a relational DB backend.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第9章*](B18370_09.xhtml#_idTextAnchor226), *使用Entity Framework和关系型数据库构建预约应用*，演示了使用关系型数据库后端的一个TDD应用示例。'
- en: '[*Chapter 10*](B18370_10.xhtml#_idTextAnchor245), *Building an App with Repositories
    and Document DB*, demonstrates an example of a TDD application using a document
    DB and the repository pattern.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 11*](B18370_11.xhtml#_idTextAnchor265), *Implementing Continuous
    Integration with GitHub Actions*, shows how to use GitHub Actions to build a CI
    pipeline for the application in [*Chapter 10*](B18370_10.xhtml#_idTextAnchor245).'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 12*](B18370_12.xhtml#_idTextAnchor279), *Dealing with Brownfield
    Projects*, outlines the thinking process when considering TDD and unit testing
    for legacy projects.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 13*](B18370_13_RN.xhtml#_idTextAnchor297), *The Intricacies of Rolling
    Out TDD*, explains the train of thought when getting your organization to adopt
    TDD.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: '[*Appendix 1*](B18370_14.xhtml#_idTextAnchor315), *Commonly Used Libraries
    with Unit Tests*, shows some quick examples of MSTest, NUnit, Moq, Fluent Assertions,
    and Auto Fixture.'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
- en: '[*Appendix 2*](B18370_15.xhtml#_idTextAnchor326), *Advanced Mocking Scenarios*,
    demonstrates a more complex mocking scenario with NSubstitute.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: To get the most out of this book
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This book assumes you are familiar with C# syntax with at least one year’s experience
    working with Visual Studio or a similar IDE environment. While the advanced concepts
    of OOP principles will be revised in this book, the book assumes you are familiar
    with the basics.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: '| **Software covered in the book** | **Operating system requirements** |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
- en: '| Visual Studio 2022 | Windows or macOS |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
- en: '| Fine Code Coverage | Windows |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
- en: '| SQL Server | Windows, macOS (Docker), or Linux |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
- en: '| Cosmos DB | Windows, macOS (Docker), or Linux (Docker) |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
- en: '| **Libraries and frameworks** | **Operating system requirements** |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
- en: '| .NET Core 6, C# 10 | Windows, macOS, or Linux |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
- en: '| xUnit | Windows, macOS, or Linux |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
- en: '| NSubstitute | Windows, macOS, or Linux |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
- en: '| Entity Framework | Windows, macOS, or Linux |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
- en: To get the most out of the book, you need to have a C# IDE. This book uses Visual
    Studio 2022 Community Edition and presents alternatives at the beginning of [*Chapter
    1*](B18370_01.xhtml#_idTextAnchor014).
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: '**If you are using the digital version of this book, we advise you to type
    the code yourself or access the code from the book’s GitHub repository (a link
    is available in the next section). Doing so will help you avoid any potential
    errors related to the copying and pasting of code.**'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: Download the example code files
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You can download the example code files for this book from GitHub at [https://github.com/PacktPublishing/Pragmatic-Test-Driven-Development-in-C-Sharp-and-.NET](https://github.com/PacktPublishing/Pragmatic-Test-Driven-Development-in-C-Sharp-and-.NET).
    If there’s an update to the code, it will be updated in the GitHub repository.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
- en: We also have other code bundles from our rich catalog of books and videos available
    at [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/).
    Check them out!
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: Download the color images
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We also provide a PDF file that has color images of the screenshots and diagrams
    used in this book. You can download it here: [https://packt.link/OzRlM](https://packt.link/OzRlM).'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: Conventions used
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: There are a number of text conventions used throughout this book.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
- en: '`Code in text`: Indicates code words in text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: “The previous code fails this rule, as running `UnitTest2`
    before `UnitTest1` will fail the test.”'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: 'A block of code is set as follows:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For instance, words in menus or dialog boxes appear in **bold**. Here is an example:
    “After installing the local emulator, you need to grab the connection string,
    which you can do by browsing to [https://localhost:8081/_explorer/index.xhtml](https://localhost:8081/_explorer/index.xhtml)
    and copying the connection string from the **Primary Connection String** field.”'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: Tips or important notes
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
- en: Appear like this.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
- en: Get in touch
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Feedback from our readers is always welcome.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
- en: '**General feedback**: If you have questions about any aspect of this book,
    email us at [customercare@packtpub.com](mailto:customercare@packtpub.com) and
    mention the book title in the subject of your message.'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)
    and fill in the form.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
- en: '**Piracy**: If you come across any illegal copies of our works in any form
    on the internet, we would be grateful if you would provide us with the location
    address or website name. Please contact us at [copyright@packt.com](mailto:copyright@packt.com)
    with a link to the material.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in and you are interested in either writing or contributing to
    a book, please visit [authors.packtpub.com](https://authors.packtpub.com).'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: Share Your Thoughts
  id: totrans-66
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once you’ve read *Pragmatic Test-Driven Development in C# and .NET*, we’d love
    to hear your thoughts! Please [click here to go straight to the Amazon review
    page](https://packt.link/r/1803230193) for this book and share your feedback.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: Your review is important to us and the tech community and will help us make
    sure we’re delivering excellent quality content.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: 'Part 1: Getting Started and the Basics of TDD'
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this part, we will gradually introduce all the concepts that make up test-driven
    development – starting with dependency injection, going through test doubles,
    and ending with the TDD guidelines and best practices.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: 'By the end of this part, you will have the necessary knowledge to contribute
    to an application using TDD. The following chapters are included in this part:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在本部分结束时，你将具备使用TDD参与应用程序开发的必要知识。本部分包括以下章节：
- en: '[*Chapter 1*](B18370_01.xhtml#_idTextAnchor014), *Writing Your First TDD Implementation*'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第1章*](B18370_01.xhtml#_idTextAnchor014), *编写你的第一个TDD实现*'
- en: '[*Chapter 2*](B18370_02.xhtml#_idTextAnchor037), *Understanding Dependency
    Injection by Example*'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第2章*](B18370_02.xhtml#_idTextAnchor037), *通过示例理解依赖注入*'
- en: '[*Chapter 3*](B18370_03.xhtml#_idTextAnchor066), *Getting Started with Unit
    Testing*'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第3章*](B18370_03.xhtml#_idTextAnchor066), *单元测试入门*'
- en: '[*Chapter 4*](B18370_04.xhtml#_idTextAnchor097), *Real Unit Testing with Test
    Doubles*'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第4章*](B18370_04.xhtml#_idTextAnchor097), *使用测试替身进行真实单元测试*'
- en: '[*Chapter 5*](B18370_05.xhtml#_idTextAnchor114), *Test-Driven Development Explained*'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第5章*](B18370_05.xhtml#_idTextAnchor114), *测试驱动开发详解*'
- en: '[*Chapter 6*](B18370_06.xhtml#_idTextAnchor140), *The FIRSTHAND Guidelines
    of TDD*'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第6章*](B18370_06.xhtml#_idTextAnchor140), *TDD的亲身体验指南*'
