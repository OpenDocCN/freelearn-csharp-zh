# 1

# SaaS – 我们所有人都需要的现代分销模式

本书将带您，读者，了解构建一个**软件即服务**（**SaaS**）应用程序的全过程。但在我们动手之前，我们将从SaaS的广泛概念介绍开始。应用程序开发的历史并不特别长，但它充满了事件！我们将回顾过去40年的软件工程，看看我们是如何到达这个点的，SaaS作为主导范式出现，并考虑为什么SaaS会如此出现。利用SaaS对各种规模的企业和团队都有好处。

最后，我们将介绍您作为开发者将学习的工具和技术，使您能够自信地通过构建使用SaaS范式的应用程序来解决现实世界的问题。本章将为该主题提供一个介绍。我们不会深入探讨任何特定技能（那将在以后进行！）。相反，我们将为本书的其余部分设定场景，在本书中，我们将学习如何使用Microsoft技术堆栈构建、测试和发布现代SaaS应用程序。

本章涵盖了以下主要主题：

+   什么是SaaS？

+   有哪些其他类型的应用程序？

+   一切从何开始？

+   为什么SaaS成为大小企业的热门选择？

+   构建SaaS应用程序需要哪些工具？

+   将使用哪些技术来构建SaaS应用程序？

+   这如何影响开发过程？

+   您可以期待从本书中获得什么

+   如何评估和偿还技术债务

到本章结束时，您将了解SaaS的定义。您将了解应用程序开发简短的历史，您将学习我们在本书的后续内容中将要看到的工具和技术！

# 什么是SaaS？

SaaS已经成为向用户交付应用程序的主导范式。但SaaS究竟是什么？

你可以说，SaaS应用程序是通过互联网和浏览器向用户提供的软件应用程序，通常通过每月订阅费来支付。

虽然从技术上讲这是正确的，但这个单句定义忽略了*很多*复杂性！对用户、供应商，当然还有您——这些应用程序的开发者来说，有很多复杂性！

在本章中，我们将开始构建对SaaS的理解，包括构建一个从头开始的SaaS应用程序所需的技术、运营和功能知识，我们将使用Microsoft技术。我们将扩展之前的定义，直到您——读者，以及即将成为SaaS开发者的人——可以自信地通过提供基于SaaS的解决方案来解决问题！

让我们从扩展那个定义开始。

SaaS通常被理解为通过浏览器交付和交互的应用程序。软件不是由用户购买或“拥有”并在他们的电脑上安装的。相反（通常是），用户需要支付每月的*会员费*，这赋予了用户访问*服务*的权限。

从用户的角度来看，这种做法的好处是他们可以在任何地方、任何时间、任何设备上访问应用程序。他们不必担心安装应用程序或保持应用程序更新。所有这些只是*服务的一部分*。

世界上许多最大的科技公司都提供SaaS应用，你很可能至少在使用其中之一！

Gmail是谷歌提供的SaaS应用的绝佳例子。虽然对大多数用户来说它是免费的，但对于必须付费使用G Suite工具的企业或专业用户来说，则需要支付费用。除了SaaS邮件客户端，谷歌还提供日历应用和联系人管理应用，以及用于创建文档、构建电子表格或为演示创建幻灯片的办公工具。

只需支付小额月费，您就可以使用浏览器访问Shopify应用程序，当然，它也是一个SaaS应用。

所有社交媒体网站也都是SaaS应用的例子，尽管对于大多数用户来说它们可能免费使用，但使用这些平台来推广产品的企业却需要付出代价。

除了之前提到的那些拥有巨额、跨国、百亿美元企业的例子，还有许多其他企业正在使用SaaS模式提供他们的软件。有软件供应商——从供应商的角度来看，以这种方式提供软件有许多好处。最主要和最明显的好处是他们拥有巨大的市场覆盖范围——一个真正全球的市场，他们可以从中挖掘，并且有多个非常高的收入上限。此外，技术团队只需要支持一个应用程序版本，支持团队也只需要支持一个版本。供应商可以推出更新，所有用户将立即使用最新（并且希望是最好）的应用程序版本。理论上至少，SaaS在几乎所有情况下都是一个明确的选择。然而……SaaS很难！

虽然对企业的益处很多，但负责构建应用程序的团队将面临的挑战也很多。从技术人员的角度来看，这正是事情变得有趣的地方！

但在我们深入探讨SaaS应用程序的细节之前，让我们首先考虑一下替代方案！

# 还有其他哪些类型的应用程序？

本书将描述SaaS，但在讨论SaaS是什么以及为什么在许多情况下它是一个好的选择的同时，它将与其他类型应用程序的其他交付机制进行对比。以下几节将讨论一些其他*传统*的交付机制。

## 桌面应用程序

这是一种传统的应用程序类型，多年来一直是许多人的主要范式。软件被打包成*安装程序*，并以某种方式分发给最终用户。分发机制可以是软盘、CD，或者直接从互联网上下载。

该应用程序将所有文件和数据存储在用户的机器上。

通常，这些类型的应用程序会附带一个产品密钥来*激活*软件。或者，可以安装许可服务器，使公司能够更容易地在多台计算机上许可产品。

## 本地部署的Web应用程序

这种类型的应用程序在很大程度上已被SaaS系统完全取代，但曾经有一段时间，开发一个可以随后出售给多个客户并安装在客户组织场所的服务器上的Web应用程序是很常见的。

这提供了一些SaaS的好处，但同时也带来了桌面交付模型的大量负担。

本地部署的Web应用程序的主要好处是购买公司可以完全控制该应用程序。这意味着他们可以根据对更新版本的成本和收益的内部评估来选择是否安装更新。

这种交付机制的另一个重大优势是，存储在数据库中的任何数据或客户端（Web浏览器）和服务器之间的传输数据都可以完全保留在公司内部网络基础设施中，无需触及更广泛的公共互联网。从理论上讲，这确实允许额外的数据安全。

与上述观点形成对比的是：虽然将数据保留在公司自己的网络中可能看起来更安全，但亚马逊的**Amazon Web Services**（**AWS**）或微软的Azure等云服务已经投入了大量的资源来确保存储的数据和流动中的数据是安全的——实际上，他们的业务就依赖于这一点。并不能保证公司的内部网络就更加安全。

虽然在购买公司选择的时间点挑选版本和部署更新可能看起来是有益的，但这要求买家雇佣人员来安装和管理应用程序，以及支持他们的用户。

## 什么是“云”？

SaaS和通过浏览器交付应用程序的核心是*云*的概念。在最基本的意义上，云只是别人的电脑……但尽管这个说法准确，但它并没有真正公正地体现其价值。云使得应用程序能够以非常高的可用性运行，并且具有几乎无限且即时的可扩展性。

对于SaaS应用程序来说，云服务绝对是至关重要的。在几乎所有情况下，每个组件（数据库、**应用程序编程接口**（**API**）和**用户界面**（**UI**））都将通过云服务提供商托管。最常用的云服务提供商是Microsoft Azure、Google Cloud和Amazon AWS。

大型云服务提供商本质上只是在提供大量计算能力，并以此收费。这被称为**基础设施即服务**（**IaaS**），它是SaaS的一个重要支柱。

# 所有这一切都是从哪里开始的？

虽然这不是一本编程史书，但我认为简要回顾一下过去60年左右的应用程序开发历程，看看我们是如何到达现在的位置，是值得的。

我第一次接触专业编程是在20世纪80年代末，当时我大约6岁。我被带到了父亲的办公室，参观了计算机室，里面有一台巨大的VAX“主机”机器，负责所有思考工作。然后我被带到了办公室，那里的工作人员在他们的桌子上配备了终端（带有绿色的文本，就像在*《黑客帝国》*中一样），这些终端连接回主机。实际计算机的成本如此之高，以至于只能有一台，每个人只是简单地在自己的桌子上配备了类似这样的哑终端：

![图1.1 – VAX终端](img/B19343_01_01.jpg)

图1.1 – VAX终端

尽管前面的展示很简单，但我立刻被吸引住了，当我跟随父亲的脚步成为一名应用程序开发者时，这种经历显然与我产生了共鸣，尽管我使用的工具与当时截然不同！

在20世纪80年代，我们离SaaS还非常遥远（尽管“主机”和“终端”配置可能在后来的某些思考中具有指导意义）！

尽管互联网技术自20世纪60年代以来就存在，但它并没有以当前一代抖音上瘾的青少年能够识别的方式存在。直到90年代后期，互联网才仅仅是一个技术上的好奇，而且它远未成为现在交付应用程序的基础。

在1994年8月，丹尼尔·科恩完成了第一次安全的信用卡交易，这是构建SaaS应用程序所需的一个巨大的技术里程碑。他购买了一张Sting的CD——品味这东西真是无法解释！同年11月，Netscape Navigator引入了**安全套接字层**（**SSL**）协议，使得任何人都可以在互联网上交易，而不必担心他们的信息被盗。

在此基础上，亚马逊在第二年立即推出了这项新的支付技术，随后不久eBay也加入了进来。这是人们愿意在互联网上输入他们的信用卡详细信息并有一定信任度的开始，但在这个时候，这种做法还远未成为主流。（旁白——我在2001年6月第一次在亚马逊上进行了在线购买，购买的是DVD版的*《幸福高尔夫球手》*；品味这东西真是无法解释！）

第一个真正的SaaS应用程序出现得并不慢。Salesforce发布了被认为是第一个真正的SaaS应用程序，其CRM平台于1999年推出。

然而，说SaaS在1999年开始并不完全准确。当然——Salesforce在曲线上领先了数英里，其对SaaS应用程序的投资无疑在接下来的几十年里为公司（及其资产负债表）带来了奇迹。但1999年，互联网对绝大多数人来说仍然是个好奇的事物。尽管Salesforce可以依赖其拥有（相对）快速互联网连接的企业客户，但SaaS应用程序的覆盖范围仍然很小。相对较少的家庭拥有互联网，更不用说宽带连接了。绝大多数人永远不会考虑在互联网上使用他们的真实姓名，更不用说他们的信用卡信息了！SaaS普及的时代还远未到来。

到了2000年代初，我开始作为开发者职业生涯，并第一次进入自80年代以来的企业编程环境时，事情已经发生了相当大的变化。不再有VAX大型机。现在，我们都在自己的桌子上有了非常快的（相比之下）电脑，因此不再需要将计算委托给集中的大型机了。你可以在自己的电脑上直接进行计算。于是，我们就这么做了！在整个90年代，成千上万的开发者制作了数百万个“灰色盒子”桌面应用程序，通常使用VB6编写，带有（希望）涵盖任何可能情况的古怪安装指南。这并不是应用开发的巅峰，当然也不是企业应用，这在当时构成了绝大多数。

大约在这个时候，互联网开始成熟，成为日常的商业工具，并迅速成为典型家庭中像自来水一样普遍。但即使到了2005年中期，"网络应用程序"或Web 2.0的概念仍然尚未进入主流。当然——有PHP和ASP，你可以使用这些技术来构建网络交付的应用程序。但这些通常更像是聪明的网站，而不是我们现在所认为的完整的“网络应用程序”。尽管在线支付变得越来越普遍，但真正支付月费以获得“服务”的概念仍然没有。人们的预期仍然是“购买”并因此“拥有”和随后“安装”软件。

当然，在接下来的二十年里，这一切都会改变。

ASP.NET将“经典”ASP所开始的东西推向了高潮。Visual Studio提供了所见即所得的编辑器，使得对于任何曾经使用VB6构建现在过时的“灰色盒子”的人来说，工作流程非常熟悉。“企业”几乎立即接受了“网络应用程序”来取代已经变得典型并且通常普遍不受欢迎的灰色盒子应用程序。

这种从企业到通过浏览器提供软件的转变，让一代办公室工作人员了解了Web交付软件的好处，不久之后，他们就会开始要求所有应用程序，甚至包括他们个人生活中使用的应用程序，都采用这种方式。

电子邮件很可能是第一个完全基于Web的服务，面向个人用户。Gmail测试版于2004年推出，当时免费提供1 GB的巨大存储空间……而且还有更多可供付费使用！消费者级软件的“订阅”模式由此诞生。

这些天，SaaS应用的市场对消费者来说非常庞大，提供了众多任务列表、笔记、日记和电子邮件服务。更不用说娱乐现在也以“服务”的形式提供，许多家庭——如果不是大多数家庭——都通过Netflix、Spotify等每月订阅服务来享受。

关于在互联网上输入支付信息没有残留的担忧。几乎没有任何家庭没有宽带互联网服务，即使是发展中国家也经常拥有强大的移动数据网络和许多人的智能手机。现在不再有任何障碍来阻止通过互联网提供基于云的应用程序，以每月订阅的形式。

显然，SaaS已经吞噬了世界，并成为提供软件的主导方法！SaaS时代已经到来！

# 为什么SaaS成为大小企业都喜爱的选择？

SaaS正在成为许多不同行业和不同规模企业的越来越受欢迎的选择。它正在各种商业模式中无处不在。这有几个原因，但大部分原因来自于为用户增加价值以及为供应商增加收入的能力。这是一个双赢的范式。

可以通过互联网和浏览器开发并交付各种不同的应用程序。相同的技术堆栈——因此，相同的发展团队——可以用来交付企业能想到的几乎所有类型的应用程序。这使得它对初创公司和跨国公司都具有几乎相同的吸引力。

使用传统的桌面应用程序模型或本地化Web应用，企业需要直接与所有客户保持联系，以便进行发票开具、提供更新等。获取新客户需要销售团队，为新用户部署新实例则需要技术团队。鉴于每个安装都在不同的环境中，很可能还需要一个庞大的支持团队来帮助处理各种不同的安装。

所有这些在SaaS中都消失了。唯一的扩展考虑因素是虚拟服务器的可用性，在Azure和AWS的时代，这些服务器几乎是无限的。

由于SaaS为用户和供应商都增加了价值，因此它已成为所有规模企业的明显选择。

# 建立SaaS应用需要哪些工具？

可用于开发SaaS应用程序的工具种类繁多。开发SaaS应用程序的性质意味着需要特定的工具来构建和测试数据库、API和前端，以及许多辅助工具，如静态分析、构建管道、源控制和容器化工具等，仅举几例。

本书将专注于微软技术栈，因此将主要使用微软的工具。但我们会使用很多工具——这是构建SaaS应用程序的本质。

## 数据库开发

从技术栈的底层开始，我们将使用SQL Server Express进行所有数据库工作。这可以直接安装到您的开发机器上，或者使用Docker在容器中运行。本书将详细描述这两种方法，尽管我们通常更倾向于容器化解决方案。

## API开发

API是一套规则和协议，它指定了两个系统应该如何相互通信。它是让一个系统访问另一个系统功能的一种方式，例如基于Web的软件应用程序或服务器。API允许不同的软件系统相互交互并共享数据和功能。它们通常用于实现不同系统之间的集成，例如移动应用程序和后端服务器，或网站和数据库。API将使用C#和.NET 7进行开发。坚持使用所有微软技术，我们将使用Visual Studio Community Edition。这是一个免费且功能强大的IDE，使得开发C#应用程序变得非常简单。

## 前端开发

构建SaaS应用程序的前端有很多好的选择。选择将主要取决于个人喜好或市场上开发者的可用性。

在撰写本书时，最常用的前端技术是基于JavaScript的——通常是Angular或React。然而，未来是WebAssembly，微软最近发布了使用这项技术的Blazor，它允许使用熟悉的.NET语言，如C#来构建前端。本书将演示使用Blazor的前端，但鉴于JavaScript框架（目前）更受欢迎，我将确保解释足够通用，以便Blazor的学习成果可以应用于任何其他前端框架。

## 认证和授权

无论使用哪种前端技术，确保认证和授权正确都是至关重要的。我们将在本书的后面章节中专门讨论这一点。我们将使用OAuth 2.0协议的实现，并演示如何从UI到数据库，再到UI，确保您的SaaS应用程序的安全性！

## 主机托管

每个SaaS应用程序都需要一个存放的地方，通常是在云端。虽然本书的大部分内容将专注于在本地开发者机器上开发，但我们也会探讨如何构建部署管道，并展示您的应用程序“上线”。我们将使用Azure门户来托管所有应用程序和数据库。

## Docker

开发SaaS应用程序真的是“全栈”的典范。我们将使用从数据库到前端的各种工具，不用说还要使用许多不同的测试框架来测试所有这些组件。因此，我们将大量依赖Docker来封装所有这些依赖关系并简化开发过程。Docker是一个真正巨大的主题，本书的范围不包括全面解释Docker是什么以及Docker做什么。简单来说，Docker允许各种复杂性封装在一个非常易于使用的容器中。

例如，考虑执行针对UI和API的几千个单元测试，也许还有几个集成和**端到端**（**E2E**）测试。运行这些测试可能涉及许多依赖项，并且通常需要一些时间来配置开发机器以成功执行测试套件。

使用Docker，可以在Docker容器中封装完整的测试套件，通过一个简单的Docker命令运行测试。此外，这些测试将在任何运行Docker客户端的机器上以相同的方式运行。因此，Docker化的测试套件在Mac、Windows、Linux上以及云服务器上的管道中都能愉快地运行。

简而言之，Docker封装了复杂性，并简化了与复杂系统的交互。

# 将使用哪些技术来构建SaaS应用程序？

实际上，我们将使用的所有技术都不是在开发任何其他类型的软件应用程序时不会使用的。然而，我将简要提及我在本书中将使用的技术。

## 测试驱动开发（TDD）

SaaS的一个巨大好处是应用程序可以非常快速地更新，并且基本上可以一键推出给每个用户。

假设一切按预期工作，这当然很好，但如果代码中存在错误，那就好多了。当然，我们可以构建一套广泛的手动回归测试，并将业务流程构建到发布管道中……但这样做，你将失去SaaS的一些所谓优势——能够频繁和早期发布。

要以一定程度的信心快速部署并确保其工作，唯一的方法是构建自动化测试。实际上，构建自动化测试套件的最佳方式是在进行中完成，遵循TDD（测试驱动开发）方法。

我知道目前 TDD 在业界有一定的争议。在我看来，这是因为错误的 TDD 是一场噩梦，而且错误的 TDD 非常常见。我将介绍多种我认为在开发 SaaS 应用时是优秀支持结构的 TDD。

## 领域驱动设计 (DDD)

DDD 被定义为一种软件开发方法，其中问题由领域专家指定，而不是由中层管理指定。

DDD 是一种软件开发方法，它专注于理解和建模应用程序的业务域，以提高软件的设计和实现。它强调领域知识在软件开发中的重要性，并鼓励在软件系统的设计和实现中使用领域特定语言。

在 DDD 中，业务域被理解为组织的核心专业领域或关注点，而正在开发的软件被视为支持并增强该领域工作的工具。DDD 的目标是创建与组织的业务需求和目标一致的软件，并准确反映业务域的复杂性和细微差别。

SaaS 产品通常只是简单地提供给任何有网络连接的人，没有专门的销售团队分别接近每一位客户并积极销售产品。因此，产品必须能够自我销售，因此它必须是实用的。为了使这一点成为现实，产品必须满足特定的用户需求并解决特定的问题域。

## 微服务

SaaS 项目需要具备灵活性，以便产品能够随着市场和客户需求的变化而发展。产品架构必须以允许直接添加新功能，同时对现有功能影响最小的方式进行设计。基于微服务的架构符合这一要求。

## 多租户

由于每个用户都是同一部署版本的应用程序中的租户，因此用户数据必须在数据存储和检索系统中保持分离。有几种方法可以解决这个问题，这些方法将在本书的后续章节中讨论。

## 响应式设计

SaaS 应用程序在线运行，并通过浏览器访问。在智能手机和平板电脑的现代时代，无法知道将使用哪种类型的设备来访问您的应用程序。前端真的需要在任何类型的设备上工作，或者至少在无法在任何特定设备上运行时“优雅地失败”。

因此，UI 的设计必须是“响应式的”，这意味着它可以以适合其显示的设备的方式进行渲染。

## 渐进式网络应用 (PWAs)

“想要有”的东西，但我认为值得考虑。当我们构建 SaaS 应用程序时，我们真的希望用户感觉到他们正在使用一个完整的“应用程序”，而不仅仅是被美化的网站。然而，根据定义，如果没有可用的互联网，网站是无法显示的……基于 PWA 的设计通过允许在互联网可用性较低或没有互联网的情况下运行有限的功能来解决这个问题。

当然，如果没有访问后端，网站上的许多功能将不可用。这是无法避免的，但 PWA 可以让用户体验稍微好一些，因此这是 SaaS 应用程序作者应该了解的重要技术。

我们将演示使用 Blazor 作为前端技术的一个 PWA（渐进式网页应用）。

选择 SaaS 作为所有大小、新旧企业的首选范式的原因：正如我们之前所强调的，大多数人口都在使用某种形式的 SaaS 应用程序，从 Gmail 到 Netflix。如果 SaaS 真的在吞噬世界，那肯定有原因。

## 无需安装

这是推动企业转向基于 SaaS 的解决方案的最大、最重要的因素。

使用传统的应用程序模型，新客户通常需要联系销售团队，有时还需要联系技术支持团队，以便在本地安装软件并获得适当的许可。

使用 SaaS，新客户可以在几秒钟内发现应用程序并注册账户，而无需与提供应用程序的公司有任何联系。这对开发应用程序的公司来说是一个巨大的节省，因为不需要额外的销售或支持团队来 onboard 新客户。这也防止了从发现到安装的时间滞后，在此期间客户可能会改变主意或发现竞争对手。

## 基于浏览器的交付

SaaS 应用的用户不仅限于在特定计算机或位于许可证服务器所在特定网络环境中访问应用程序。用户可以从世界各地的任何互联网连接的机器上访问该应用程序。在智能手机和平板电脑的现代时代，SaaS 应用的用户甚至可能不需要电脑就能充分利用提供的服务。

## 可扩展性

在传统模型中，这是不可能的。说服人们在自己的电脑上安装任何应用程序都很困难。说服公司这样做则更加困难。扩大桌面应用程序的用户群需要专门的销售团队和专门的客户支持团队，首先制作应用程序，然后引导人们完成安装过程。使用 SaaS 应用程序，用户只需在在线表单上注册即可。

由于SaaS应用托管在云端（Azure、**Google Cloud Platform**（**GCP**）或AWS），如果需求突然激增，基础设施可以实现近乎瞬间的扩展。没有其他软件交付模式能够面对一夜之间需求增加10倍的情况，而供应商不会陷入困境！

## 可升级性

在“传统”的应用交付方法下，应用升级往往对应用供应商来说变得极其复杂和昂贵。

如果你考虑传统的桌面应用，同一个应用可能被安装在成百上千台机器上，遍布成百上千个不同的企业。没有任何两家企业会运行相同的硬件或操作系统版本，因此不可能让所有人都使用你的软件的同一版本。同样，推出新版本的升级也是完全不可能的。最好的办法是在特定时间停止支持特定版本，并希望所有人都停止使用它（注意——他们不会停止使用）。

对于本地部署的Web应用来说，这也是一个类似的问题。虽然安装数量较少，但仍然会有许多不同的版本存在，以满足特定的业务需求。

当你转向SaaS模式时，这个问题完全消失。供应商可以完全控制升级，并且可以一键将它们推出给所有客户。

只支持一个版本的app对于供应商来说是一项巨大的节省，同时也为开发团队带来了巨大的优势。

## 快速迭代

SaaS应用升级优势的一个新兴特性是能够极快地迭代解决方案。关于新特性的反馈可以在非常快的周期内被整合并推送给所有用户。这允许开发者从编写功能到该功能为用户提供价值以及为供应商带来收入之间实现非常快的周转。

考虑一下在传统应用中实现这一价值需要多长时间。代码可能已经在Git仓库中存放了好几个月，才被包括在“年度发布”中，然后，用户可能选择不立即升级。

## 分析

由于所有用户都通过单个Web应用进行操作，分析应用是如何被使用的变得极其容易。这可以引导企业做出明智的决策，升级应用中最常用的部分，并推迟对不太常用的部分的工作。结合升级的便利性和快速迭代，这可以为用户提供巨大的价值提升，并应该为供应商带来收入的提升。

## 全球市场

使用SaaS，能够随时随地接触到客户对提供产品的企业来说是一个巨大的提升。不存在因为时区问题或销售代表未能回复电子邮件而错失销售的情况。

能够接触到真正全球的受众，使一些公司成为世界上最大的公司——比银行和石油天然气巨头还要大。这种市场准入也允许成千上万的较小公司在真正全球化的环境中蓬勃发展。

## 灵活的支付模式

对于提供SaaS服务的公司来说，有许多不同的支付模式可供选择。这使得它能够吸引大小客户，并从每个客户层或规模中获取最大价值。以下是一些支付模式的类型：

+   分级定价

+   免费增值

+   免费试用期

+   按用户定价

## 安全性

访问SaaS应用程序将通过用户登录进行，这可以保护敏感数据和文件，这些数据和文件被安全地存储在云系统中。这在大多数情况下比在本地服务器上存储数据或桌面应用程序的本地用户机器上存储数据要安全得多。虽然看起来将所有数据保留在本地或本地网络中似乎比通过互联网将数据发送到云服务器上更安全，但这通常并非如此。为通常用于托管SaaS应用程序的云服务投入了大量的精力来确保安全，而这种努力通常无法逐个站点复制，无论是保护本地Web应用程序还是单独保护桌面安装应用程序上的数据。

# 这如何影响开发过程？

理论上，构建SaaS应用程序的开发过程与其他类型的应用程序相当相似，但在实践中，作为SaaS项目开发人员，你必须注意一些细微差别和考虑因素。

## 经常发布，尽早发布

SaaS应用程序没有“年度发布周期”。预期功能将被分解成可管理的部分，开发完成后，一旦准备好就立即推出。如果是从更传统的发布周期转变过来，这需要一些思维方式的转变。所有更改都必须是增量式的，通常仅限于应用程序的小部分，并且要尽快准备好发布。

这种将代码交到用户手中的思维方式需要由自动化管道来支持，这些管道可以构建和发布新代码，而无需太多人工干预。

虽然有可能向部分受众推出更新以确保其中没有灾难性的内容，但对于中小型SaaS应用程序来说，更典型的情况是一次性将更新推送给所有用户。为了使这成功……

## 测试，测试，测试

如果代码一次性发布给整个用户群，而且通常没有真正的方法可以回滚更改，你最好希望它能正常工作！

唯一能够建立代码按广告宣传的方式运行的信任的方式是测试它，而在“频繁发布，尽早发布”的心态下，这意味着自动化测试。虽然这并不一定意味着遵循TDD（测试驱动开发）的心态，但这肯定是有用的。

## 你最好全栈

好吧——这并不是绝对必要的。我相信大型SaaS应用程序是由数据库/后端/前端学科的专家开发的。但当然，对不同的应用程序层次有良好的知识将大有裨益。

SaaS应用程序以几乎有机的方式通过快速周期和近乎即时的发布“增长”，这意味着至少需要对各个层次有所理解，并且理解数据库中的决策*可能*如何影响前端是非常宝贵的。

## 了解你的用户

虽然这可能不是团队中每个开发者的要求，但整个团队理解其产品的使用者、他们为什么使用它以及价值在哪里是绝对必要的。这种知识和理解将来自评估分析，以及“更软”的方法，如焦点小组和与用户的访谈。

这种理解应该通过用户故事流入开发过程。从开发者的角度来看，如果某个特定功能没有在焦点小组中取得良好效果，或者用户访谈表明某个路径是错误的，这可能会导致方向上的突然转变。快速调整方向的能力对整个团队来说都很重要。

# 从这本书中你可以期待什么

本章已作为SaaS是什么、它从何而来、为什么企业和用户喜欢它，以及最后作为开发者，你需要有效地构建SaaS应用程序的介绍。

在接下来的章节中，我们将深入探讨所有上述领域，但重点是构建作为开发者构建用户喜爱并希望构建的出色SaaS应用程序所需的工具和理解。

为了说明所需的技术点和理解，我们将构建、测试和部署一个全栈SaaS应用程序！

我在撰写这本书时，采取了与构建应用程序时相同的心态。我的目标是让这本书成为一个引人入胜、有趣，甚至可能是“令人愉悦”的体验——在这种情况下，就是你！

让我们开始吧！

# 如何评估和偿还技术债务

技术债务究竟是什么？让我们从定义开始：

*技术债务随着项目功能的增加而累积。随着项目某些区域复杂性的增加，该项目的一些其他部分将不再完全适合，并在某个时候必须进行工作。然而，作为开发者的生活现实是，产品必须发货，账单必须支付，因此，并不总是有足够的时间来整理每一个角落，随着时间的推移，技术债务开始* *累积* *。

另一个所有项目都会遇到的技术债务来源是在底层框架和技术更新时。更新一个主要版本通常并不简单，遗憾的是，项目滞留在过时版本中——这代表了一种技术债务。

最后一个常见的技术债务来源是当用户习惯改变时。在iPhone时代之前，很少有人通过移动设备访问网站。这种情况很快发生了变化，导致许多团队急忙更新他们的网站，以便通过移动设备访问时能够正常工作。

所有技术项目都有一些技术债务——这是无法避免的事实，并且对于所有项目来说，保持对技术债务的控制非常重要。然而，在开发SaaS应用程序时，有一些特定的考虑因素必须加以考虑。

对于大多数SaaS应用程序，其哲学是尽可能快地将开发工作交给客户。这通常是通过广泛的自动化测试套件，以及构建和发布管道来实现的，以便尽可能快地将代码推送到生产环境。

与传统的发布和交付机制相比，传统的发布和交付机制在发布之间会有一个年度间隔，并且在那一年的某个时间点可能会分配一些时间来偿还技术债务。

在SaaS开发中常见的持续开发-发布-重复周期中，保持对技术债务的控制非常重要。

评估和偿还技术债务的第一种也是最重要的方式是允许开发团队每周（或每个冲刺周期）留出一些时间来做“杂事”。这些可能是其他情况下可能会被忽视的小型维护任务，否则它们可能会发展成为严重的技术债务问题。开发团队*总是*最清楚技术债务在哪里。毕竟，是他们最初创造了它！

静态分析是另一种保持技术债务在控制之下的极其强大的工具。静态分析用于在代码未运行时（当它是静态的！）检查代码的质量，并可以检查是否遵守了标准以及是否正在实施最新的最佳实践。

与静态分析类似，也应该始终执行代码检查，以确保代码格式符合约定的编码标准。

如前所述，过时的包可能成为技术债务的主要来源。虽然保持绝对的前沿可能存在风险，但严重过时通常没有好处。应该定期进行清理，以确保所使用的任何包和框架都足够更新。

最后，应该进行自动性能测试，以确保随着应用的增长和随时间的变化，其性能没有出现退化。

即使严格遵守上述所有要点，项目随着时间的推移仍然会积累技术债务。对此几乎无能为力。但是，在实施上述考虑和缓解措施的情况下，技术债务对项目的影响——以及最终构建项目的公司的盈利能力——可以最小化。

# 摘要

本章对SaaS的概念进行了广泛的介绍。我们回顾了应用开发的历史，并探讨了SaaS出现之前盛行的范式。我们考虑了为什么SaaS变得如此受欢迎，并分析了其采用的技术、商业和以用户为中心的原因。最后，我们考虑了作为开发者，你需要哪些工具和技术才能成为一个有效的SaaS开发者。

希望本章已经为你提供了对SaaS的坚实基础理解，我们将从现在开始，随着本书的进展对其进行扩展！

构建SaaS应用具有挑战性，但迄今为止，最好的进步方式就是开始构建，并亲自动手！在下一章中，我们将直接介绍本书将使用的工具、工具集和技术，以构建一个SaaS应用的演示！

# 进一步阅读

+   关于当前的商业趋势：[https://www.datapine.com/blog/saas-trends/](https://www.datapine.com/blog/saas-trends/)

+   关于一些SaaS开发的技巧和提示：[https://www.rswebsols.com/tutorials/software-tutorials/saas-application-development-tips-tricks](https://www.rswebsols.com/tutorials/software-tutorials/saas-application-development-tips-tricks)

+   关于扩展SaaS应用的更多信息：[https://medium.com/@mikesparr/things-i-wish-i-knew-when-starting-software-programming-3508aef0b257](https://medium.com/@mikesparr/things-i-wish-i-knew-when-starting-software-programming-3508aef0b257)
