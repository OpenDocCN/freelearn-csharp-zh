<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;3.&#xA0;Overview of Collision Matrix"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03" class="calibre1"/>Chapter 3. Overview of Collision Matrix</h1></div></div></div><p class="calibre8">In this chapter, you will learn types of different colliders in Unity3D, which define the collision shape of objects in scene and their Collision Matrix.</p><p class="calibre8">You will learn in detail about the following topics:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Collision Matrix</li><li class="listitem">Trigger Matrix</li><li class="listitem">Layer-based Collision Matrix</li></ul></div><p class="calibre8">By the end of this chapter, you will get knowledge about the matrix of colliders and their types. Using a matrix configuration of two colliding game objects, we will see how we can define different actions.</p><p class="calibre8">During the development with Unity3D, you will encounter with the following terms:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">Collision Matrix</strong></span>: This represents a<a id="id125" class="calibre1"/> matrix that shows which collider type <a id="id126" class="calibre1"/>will show a collision</li><li class="listitem"><span class="strong"><strong class="calibre9">Trigger Matrix</strong></span>: This<a id="id127" class="calibre1"/> represents a matrix that shows which collider type will<a id="id128" class="calibre1"/> fire a trigger event</li><li class="listitem"><span class="strong"><strong class="calibre9">Layer-based Collision Matrix</strong></span>: This <a id="id129" class="calibre1"/>represents a matrix <a id="id130" class="calibre1"/>that shows layer-based collision</li></ul></div><p class="calibre8">The following figure will show you the different types of matrices:</p><div class="mediaobject"><img src="../images/00030.jpeg" alt="Overview of Collision Matrix" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Let's take a look at them in detail.</p></div>

<div class="book" title="Chapter&#xA0;3.&#xA0;Overview of Collision Matrix">
<div class="book" title="Collision Matrix 3D"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch03lvl1sec16" class="calibre1"/>Collision Matrix 3D</h1></div></div></div><p class="calibre8">You will learn about <a id="id131" class="calibre1"/>Collision Matrix for 3D development; this matrix <a id="id132" class="calibre1"/>will define which collider type will show collision. We can define different actions by configuring two colliding game objects. The following table defines the collision status of two colliding game objects based on the attached components. To apply Physics, the game object must have Rigidbodies attached. Collision Matrix here represents a matrix that shows which collider type will show a collision.</p><p class="calibre8">On collision, the following events will be generated (for the description, please check the previous chapter):</p><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="email">OnCollsionEnter()</code></li><li class="listitem"><code class="email">OnCollisionStay()</code></li><li class="listitem"><code class="email">OnCollisionExit()</code><div class="note" title="Note"><h3 class="title2"><a id="note16" class="calibre1"/>Note</h3><p class="calibre8">Only the collider that possesses a Rigidbody will show reaction on collision.</p></div></li></ul></div><p class="calibre8">The following figure shows the table of the Collision Matrix for 3D objects:</p><div class="mediaobject"><img src="../images/00031.jpeg" alt="Collision Matrix 3D" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Let's see how we read the<a id="id133" class="calibre1"/> preceding table with a few examples:</p><div class="book"><ul class="itemizedlist"><li class="listitem">A static collider will detect collision with a Rigidbody</li><li class="listitem">A Rigidbody Collider will detect collision with static, Rigidbody, and Kinematic Rigidbody Colliders</li><li class="listitem">A Kinematic Rigidbody will show reaction on collision with a Rigidbody</li><li class="listitem">In other conditions, no collision will be detected</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Trigger Matrix"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec17" class="calibre1"/>Trigger Matrix</h1></div></div></div><p class="calibre8">Trigger Matrix <a id="id134" class="calibre1"/>here represents a matrix that shows which collider type will fire trigger<a id="id135" class="calibre1"/> events. On trigger, the following events will be generated (for the description, please check the previous chapter):</p><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="email">OnTiggerEnter()</code></li><li class="listitem"><code class="email">OnTriggerStay()</code></li><li class="listitem"><code class="email">OnTriggerExit()</code><div class="note" title="Note"><h3 class="title2"><a id="note17" class="calibre1"/>Note</h3><p class="calibre8">Only Trigger Collider will fire trigger events.</p></div></li></ul></div><p class="calibre8">The following figure shows the table of the Trigger Matrix for<a id="id136" class="calibre1"/> 3D objects:</p><div class="mediaobject"><img src="../images/00032.jpeg" alt="Trigger Matrix" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Let's see how we can read the <a id="id137" class="calibre1"/>preceding table with the following examples:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The static collider will fire trigger events on collision with a Rigidbody Trigger Collider and Kinematic Rigidbody Collider</li><li class="listitem">The Rigidbody Collider will fire trigger events on collision with a static Trigger Collider, Rigidbody Trigger Collider, and Kinematic Trigger Collider</li><li class="listitem">The Kinematic Rigidbody Collider will fire trigger events on collision with a static Trigger Collider, Rigidbody Trigger Collider, and Kinematic Trigger Collider</li><li class="listitem">The static Trigger <a id="id138" class="calibre1"/>Collider will fire trigger events on collision with a Rigidbody Collider, Kinematic Rigidbody Collider, Rigidbody Trigger and Kinematic Trigger Collider</li></ul></div></div>

<div class="book" title="Trigger Matrix">
<div class="book" title="Matrix for 2D Objects"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec15" class="calibre1"/>Matrix for 2D Objects</h2></div></div></div><p class="calibre8">Although in Unity3D, Physics for <a id="id139" class="calibre1"/>2D objects and 3D objects are very similar, there are some differences in sending messages during collision.</p><p class="calibre8">There are some important differences that we will see in the following table. The matrix given in this table is based on the assumption that we are using 2D variants of colliders and Rigidbodies.</p><p class="calibre8">The table is based on instances where collision detection occurs and Collision2D messages are sent.</p><div class="mediaobject"><img src="../images/00033.jpeg" alt="Matrix for 2D Objects" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Let's see how we can read the preceding table<a id="id140" class="calibre1"/> with the following examples:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The static collider will fire collision events on collision with a Rigidbody only</li><li class="listitem">The Rigidbody will show collision with a static collider, Rigidbody, and Kinematic Rigidbody Collider</li><li class="listitem">The Kinematic Rigidbody will fire collision events with a Rigidbody</li></ul></div><p class="calibre8">The following figure shows instances where Trigger2D messages are sent upon collision:</p><div class="mediaobject"><img src="../images/00034.jpeg" alt="Matrix for 2D Objects" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Let's see how we can read the preceding table with the following examples:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The static collider will fire trigger events on collision with a Rigidbody only</li><li class="listitem">The Rigidbody will show collision with a static Trigger and Rigidbody Trigger</li><li class="listitem">The Kinematic <a id="id141" class="calibre1"/>Rigidbody will fire collision events with a Rigidbody Trigger</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Layers and Collision Matrix"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec18" class="calibre1"/>Layers and Collision Matrix</h1></div></div></div><p class="calibre8">By default, if multiple game <a id="id142" class="calibre1"/>objects are on the default layer, they will all<a id="id143" class="calibre1"/> collide with each other. In that case, we can say everything will collide with everything. In game development, often we need to decide which object will collide with which one. For this, we need to define a layer-specific division of game objects. We put each type of object in different layers. In Collision Matrix, for each new layer, a new column and row are added. Matrix defines the interaction between the layers. By default, a new layer collides with all the other layers. A developer needs to set up the interaction between the layers. Using a correct setup, we can avoid unwanted collision.</p></div>

<div class="book" title="Layers and Collision Matrix">
<div class="book" title="An example of a layer-based Collision Matrix"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec16" class="calibre1"/>An example of a layer-based Collision Matrix</h2></div></div></div><p class="calibre8">Let's take a look at an example <a id="id144" class="calibre1"/>of setting Collision Matrix for layers:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Create a new scene and name it <code class="email">Layer Collision</code>.</li><li class="listitem" value="2">Create a box container game object, as shown in the following screenshot:<div class="mediaobject"><img src="../images/00035.jpeg" alt="An example of a layer-based Collision Matrix" class="calibre11"/></div><p class="calibre14"> </p><p class="calibre16">By default, all <a id="id145" class="calibre1"/>the objects will appear on the default layer, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00036.jpeg" alt="An example of a layer-based Collision Matrix" class="calibre11"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">Add and set up the<a id="id146" class="calibre1"/> Box layer for floor and wall game objects. As shown in the following screenshot, by clicking on <span class="strong"><strong class="calibre9">Layer</strong></span>, we will see a drop-down list of existing layers. We can add a new layer by clicking on <span class="strong"><strong class="calibre9">Add Layer</strong></span>.<div class="mediaobject"><img src="../images/00037.jpeg" alt="An example of a layer-based Collision Matrix" class="calibre11"/></div><p class="calibre14"> </p></li><li class="listitem" value="4">As shown in the<a id="id147" class="calibre1"/> following screenshot, we have created a new layer <span class="strong"><strong class="calibre9">Box</strong></span>. By selecting <span class="strong"><strong class="calibre9">Box</strong></span>, we can specify the layer for all the box game objects.<div class="mediaobject"><img src="../images/00038.jpeg" alt="An example of a layer-based Collision Matrix" class="calibre11"/></div><p class="calibre14"> </p></li><li class="listitem" value="5">Inside the box container, add a red ball, green ball, and blue ball.<div class="mediaobject"><img src="../images/00039.jpeg" alt="An example of a layer-based Collision Matrix" class="calibre11"/></div><p class="calibre14"> </p></li><li class="listitem" value="6">Similar to step 3, we<a id="id148" class="calibre1"/> add and set up different layers for the balls. As shown in the following screenshot, we have created layers for the red ball, green ball, and blue ball:<div class="mediaobject"><img src="../images/00040.jpeg" alt="An example of a layer-based Collision Matrix" class="calibre11"/></div><p class="calibre14"> </p></li><li class="listitem" value="7">To set up collision rules for game objects, let's open <span class="strong"><strong class="calibre9">Matrix</strong></span>. As shown in the following screenshot, navigate to <span class="strong"><strong class="calibre9">Edit</strong></span> | <span class="strong"><strong class="calibre9">Project Settings</strong></span> and select <span class="strong"><strong class="calibre9">Physics</strong></span>:<div class="mediaobject"><img src="../images/00041.jpeg" alt="An example of a layer-based Collision Matrix" class="calibre11"/></div><p class="calibre14"> </p></li><li class="listitem" value="8">As shown in the <a id="id149" class="calibre1"/>following screenshot, a collision table will be shown in the <span class="strong"><strong class="calibre9">Inspector</strong></span> panel. By default, every object will collide with every another object.<div class="mediaobject"><img src="../images/00042.jpeg" alt="An example of a layer-based Collision Matrix" class="calibre11"/></div><p class="calibre14"> </p></li><li class="listitem" value="9">Check and uncheck the checkboxes of matrix to set up rules, as shown in the following screenshot. We have set up Collision Matrix for a green ball, red ball, blue ball, and a box.<div class="mediaobject"><img src="../images/00043.jpeg" alt="An example of a layer-based Collision Matrix" class="calibre11"/></div><p class="calibre14"> </p></li></ol><div class="calibre15"/></div><p class="calibre8">Using the preceding <a id="id150" class="calibre1"/>steps, we can set up a layer-based Collision Matrix.</p><p class="calibre8">Create a new JavaScript and attach it to the main camera and run the test.</p><p class="calibre8">Write the following code inside this JavaScript file:</p><div class="informalexample"><pre class="programlisting">  #pragma strict
  function Start () {
  }
  function Update () {
  }


function OnCollisionEnter(Collision collisionInfo)
{
  Debug.Log("Detected collision between " + gameObject.name + " and " + collisionInfo.collider.name);

}

function OnCollisionStay(Collision collisionInfo)
{
  Debug.Log(gameObject.name + " and " + collisionInfo.collider.name + " are still colliding");
}

function OnCollisionExit(Collision collisionInfo)
{
  Debug.Log(gameObject.name + " and " + collisionInfo.collider.name + " are no longer colliding");
}</pre></div><p class="calibre8">Using the preceding script, you can <a id="id151" class="calibre1"/>check which objects are colliding with one another and for how long.</p></div></div>

<div class="book" title="Layers and Collision Matrix">
<div class="book" title="Collision Matrix and a script"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch03lvl2sec17" class="calibre1"/>Collision Matrix and a script</h2></div></div></div><p class="calibre8">Let's see how we can <a id="id152" class="calibre1"/>ignore collision for specific objects using a script. Often, in interactive development, we need to set up rules for collision between objects. For example, we need to set up a rule where projectiles should not collide with the objects shooting them. Although, using custom layer-based collision on GUI, we can define a layer-based game objects collision rule, we also can handle it using a script. We can use <code class="email">IgnoreCollision</code> Physics of Unity3D for creating Collision Matrix.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note18" class="calibre1"/>Note</h3><p class="calibre8">
<span class="strong"><strong class="calibre9">Limitation of IgnoreCollision</strong></span>
</p><p class="calibre8">Collision Matrix does not store the<a id="id153" class="calibre1"/> state when saving the scene and we can apply only on active game objects.</p></div><div class="book" title="An example of a script-based Collision Matrix"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec22" class="calibre1"/>An example of a script-based Collision Matrix</h3></div></div></div><p class="calibre8">The following is the <a id="id154" class="calibre1"/>example of a script-based Collision Matrix:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Create a new scene and name it <code class="email">Script-Collision-Matrix</code>.</li><li class="listitem" value="2">Create a wall using <span class="strong"><strong class="calibre9">Plane</strong></span>.</li><li class="listitem" value="3">Create a <span class="strong"><strong class="calibre9">Bullet</strong></span> game object.</li><li class="listitem" value="4">Create a shooting object. Now, we need to set up a rule that a bullet should not collide with the shooting object.</li><li class="listitem" value="5">Create a script and attach it to the main camera object. Add the following code to the script:<div class="informalexample"><pre class="programlisting">var bulletPrefab : Transform;
function Start () {
    var bullet = Instantiate(bulletPrefab) as Transform;
    Physics.IgnoreCollision(bullet.collider, collider);
}</pre></div></li></ol><div class="calibre15"/></div><p class="calibre8">Run and test the script, you <a id="id155" class="calibre1"/>will see that a bullet is ignoring collision with the shooting object.</p></div></div></div>
<div class="book" title="Summary"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec19" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">In this chapter, you learned about different Collision Matrix and Trigger Matrix for 2D and 3D game objects. You also learned how we can set up a layer-based Collision Matrix and how we handle it with the scripts. In the next chapter, you will learn about Rigidbodies and their behaviors. The next chapter serves as a detailed description and will give you the uses and types of different Rigidbodies in Unity3D, which will covering topics such as Physics Rigidbody, Kinematic Rigidbody, and the properties of a Rigidbody.</p></div></body></html>