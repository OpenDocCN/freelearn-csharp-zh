<html><head></head><body>
<div><h1 class="chapterNumber">2</h1>
<h1 class="chapterTitle" id="_idParaDest-32">Creating Your First Blazor App</h1>
<p class="normal">In this chapter, we will set up our development environment so that we can start developing Blazor apps. We will create our first Blazor app and go through the project structure.</p>
<p class="normal">By the end of this chapter, you will have a working development environment and have created a Blazor App that can run a mix of streaming server-side rendering, Blazor Server, and Blazor WebAssembly.</p>
<p class="normal">In this chapter, we will cover the following:</p>
<ul>
<li class="bulletList">Setting up your development environment</li>
<li class="bulletList">Creating our first Blazor application</li>
<li class="bulletList">Using the command line</li>
<li class="bulletList">Figuring out the project structure</li>
</ul>
<h1 class="heading-1" id="_idParaDest-33">Technical requirements</h1>
<p class="normal">We will create a new project (a blog engine) and will continue working on that project throughout the book.</p>
<p class="normal">You can find the source code for this chapter’s result at <a href="https://github.com/PacktPublishing/Web-Development-with-Blazor-Third-Edition/tree/main/Chapter02">https://github.com/PacktPublishing/Web-Development-with-Blazor-Third-Edition/tree/main/Chapter02</a>.</p>
<h1 class="heading-1" id="_idParaDest-34">Setting up your development environment</h1>
<p class="normal">In this book, the<a id="_idIndexMarker043"/> focus will be on Windows development, and any screenshots are going to be from Visual Studio (unless stated otherwise). But since .NET 8 is cross-platform, we will go through how to set up your development environment on Windows, macOS, and Linux.</p>
<p class="normal">The go-to link for all the platforms can be found at <a href="https://visualstudio.microsoft.com/">https://visualstudio.microsoft.com/</a>.</p>
<p class="normal">We can download Visual Studio or Visual Studio Code from the web page.</p>
<h2 class="heading-2" id="_idParaDest-35">Windows</h2>
<p class="normal">On Windows, we<a id="_idIndexMarker044"/> have many different <a id="_idIndexMarker045"/>options for developing Blazor applications. Visual Studio 2022<a id="_idIndexMarker046"/> is the most powerful tool we can use.</p>
<p class="normal">There are three different editions, which are as follows:</p>
<ul>
<li class="bulletList">Community 2022</li>
<li class="bulletList">Professional 2022</li>
<li class="bulletList">Enterprise 2022</li>
</ul>
<p class="normal">In short, the Community Edition is free, while the others cost money. The Community Edition does have some limitations, and we can compare the different editions here: <a href="https://visualstudio.microsoft.com/vs/compare/">https://visualstudio.microsoft.com/vs/compare/</a>.</p>
<p class="normal">For this book, we can use any of these versions. Take the following steps:</p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1">Download<a id="_idIndexMarker047"/> Visual <a id="_idIndexMarker048"/>Studio 2022 from <a href="https://visualstudio.microsoft.com/vs/">https://visualstudio.microsoft.com/vs/</a>. Choose the version that is right for you.</li>
<li class="numberedList">Install Visual Studio and, during the installation, make sure to select <strong class="screenText">ASP.NET and web development</strong>, as shown in <em class="italic">Figure 2.1</em>:</li>
</ol>
<figure class="mediaobject"><img alt="A screenshot of a computer  Description automatically generated" src="img/B21849_02_01.png"/></figure>
<p class="packt_figref">Figure 2.1: Visual Studio 2022 installation on Windows</p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="3">To the right is a list of all the components that will be installed. Check <strong class="screenText">.NET WebAssembly Build Tools</strong>. There might be a .NET6 or .NET 7 version in the list as well but we<a id="_idIndexMarker049"/> want the one without a<a id="_idIndexMarker050"/> version number.</li>
</ol>
<p class="normal">We can<a id="_idIndexMarker051"/> also use Visual Studio Code to develop <a id="_idIndexMarker052"/>Blazor on Windows, but we won’t discuss the installation process for Windows.</p>
<h2 class="heading-2" id="_idParaDest-36">macOS and Linux (or Windows)</h2>
<p class="normal">Visual Studio <a id="_idIndexMarker053"/>Code is<a id="_idIndexMarker054"/> cross-platform, which<a id="_idIndexMarker055"/> means we can use it on Linux, macOS, or Windows.</p>
<p class="normal">The different versions are available at <a href="https://code.visualstudio.com/Download">https://code.visualstudio.com/Download</a>.</p>
<p class="normal">Once installed, we also need to add two extensions:</p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1">Open Visual Studio Code and open the extension panel by pressing <em class="keystroke">Shift</em> + <em class="keystroke">command</em> + <em class="keystroke">X</em><em class="italic"> </em>on macOS or <em class="keystroke">Ctrl</em><em class="italic"> </em>+ <em class="keystroke">Shift</em><em class="italic"> </em>+ <em class="keystroke">X on Linux and Windows</em>.</li>
<li class="numberedList">Search for <code class="inlineCode">C# Dev Kit for Visual Studio Code</code> and click <strong class="screenText">Install</strong>. You might need a Microsoft account to install C# Dev Kit.</li>
<li class="numberedList">Search for <code class="inlineCode">JavaScript Debugger (Nightly)</code> and click <strong class="screenText">Install</strong>.</li>
</ol>
<p class="normal">There are other IDEs that are cross-platform as well, like JetBrains Rider for example, that some prefer.</p>
<p class="normal">Now that everything is set up, let’s create our first app.</p>
<h1 class="heading-1" id="_idParaDest-37">Creating our first Blazor application</h1>
<p class="normal">Throughout the<a id="_idIndexMarker056"/> book, we will create a blog engine. There won’t be a lot of business logic that you’ll have to learn; the app is simple to understand but will touch base on many of the technologies and areas you will be faced with when building a Blazor app.</p>
<div><p class="normal">I had an opportunity to discuss the project with Steve Sanderson (creator of Blazor) and Dan Roth (program manager for ASP.NET). We came to the conclusion that this is going to showcase the most important features of Blazor.</p>
</div>
<p class="normal">The project will allow visitors to read blog posts and post comments. It will also have an admin site where we can write a blog post, which will be password-protected.</p>
<p class="normal">We will create an app that leverages Blazor Server, Blazor WebAssembly, and streaming server-side rendering.</p>
<div><p class="normal">IMPORTANT NOTE</p>
<p class="normal">This guide will use Visual Studio 2022 from now on, but other platforms have similar ways of creating projects.</p>
</div>
<h2 class="heading-2" id="_idParaDest-38">Exploring the templates</h2>
<p class="normal">In .NET 8, Microsoft reduced the amount of templates we have access to. We will <a id="_idIndexMarker057"/>explore them further in <em class="chapterRef">Chapter 4</em>, <em class="italic">Understanding Basic Blazor Components</em>. This chapter will give you a quick overview. </p>
<p class="normal">In .NET 7, we had different templates depending on whether we wanted sample code, but in .NET 8 we only have two. We also have one Blazor Hybrid template (.NET MAUI), but we will return to it in <em class="chapterRef">Chapter 18</em>, <em class="italic">Visiting .NET MAUI</em>.</p>
<h3 class="heading-3" id="_idParaDest-39">Blazor Web App</h3>
<p class="normal">The <strong class="keyWord">Blazor Web App</strong> template gives us <a id="_idIndexMarker058"/>a Blazor <a id="_idIndexMarker059"/>app. Once we have selected this template, we get options for how we want our app to run. We can configure our app with sample code or without. We can choose whether our app should support interactive components and what type of interactivity we want. We can also choose whether we want to specify the rendering mode per component or for the full app. So, right away, we don’t need to choose whether or not we want to choose Blazor Server or Blazor WebAssembly; we can mix and match.</p>
<p class="normal">If we add sample pages, we get a couple of components to see what a Blazor app looks like and some basic setup and <a id="_idIndexMarker060"/>menu structure. It also contains code for adding Bootstrap, Isolated CSS, and things<a id="_idIndexMarker061"/> like that (see <em class="chapterRef">Chapter 9</em>, <em class="italic">Sharing Code and Resources</em>).</p>
<p class="normal">This is the template we will use in the book to better understand how things go together.</p>
<h3 class="heading-3" id="_idParaDest-40">Blazor WebAssembly Standalone App</h3>
<p class="normal">The <strong class="keyWord">Blazor WebAssembly Standalone App</strong> template gives us (as the name implies) a Blazor WebAssembly standalone app. Here, we can choose whether we want to have sample <a id="_idIndexMarker062"/>pages as well. It contains a couple of components to<a id="_idIndexMarker063"/> see what a Blazor app looks like and some basic setup and menu structure. It also contains code for adding Bootstrap, isolated CSS, and things like that (see <em class="chapterRef">Chapter 9</em>, <em class="italic">Sharing Code and Resources</em>). So why do we have this one? Well, the Blazor Web App is dependent on server rendering technologies in one way or another. If you want to be able to run your app from a file share, GitHub Pages, or Azure Static Web Apps (to name a few), this is the template for you.</p>
<h2 class="heading-2" id="_idParaDest-41">Creating a Blazor web application</h2>
<p class="normal">To start, we will create <a id="_idIndexMarker064"/>a Blazor Server application and play around with it:</p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1">Start Visual Studio 2022, and you will see the following screen:</li>
</ol>
<figure class="mediaobject"><img alt="A screenshot of a computer  Description automatically generated" src="img/B21849_02_02.png"/></figure>
<p class="packt_figref">Figure 2.2: Visual Studio startup screen</p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="2">Click <strong class="screenText">Create a new project</strong>, and in the search bar, type <code class="inlineCode">blazor</code>.</li>
<li class="numberedList">You will get <a id="_idIndexMarker065"/>a list of different templates – this is a mix of .NET 7 and .NET 8 templates. Now we need to select the template for our project. Select <strong class="screenText">Blazor Web App</strong> from the search results and click <strong class="screenText">Next</strong>:</li>
</ol>
<figure class="mediaobject"><img alt="A screenshot of a computer  Description automatically generated" src="img/B21849_02_03.png"/></figure>
<p class="packt_figref">Figure 2.3: The Visual Studio Create a new project screen</p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="4">Now name <a id="_idIndexMarker066"/>the project (this is the hardest part of any project, but fear not, I have done that already!). Name the application <code class="inlineCode">BlazorWebApp</code>. Change the solution name to <code class="inlineCode">MyBlog</code> and click <strong class="screenText">Next</strong>:</li>
</ol>
<figure class="mediaobject"><img alt="A screenshot of a computer  Description automatically generated" src="img/B21849_02_04.png"/></figure>
<p class="packt_figref">Figure 2.4: The Visual Studio Configure your new project screen</p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="5">Next, choose<a id="_idIndexMarker067"/> what kind of Blazor app we should create. Select <strong class="screenText">.NET 8.0 (Long Term Support)</strong> from the dropdown menu. Set <strong class="screenText">Authentication type</strong> to <strong class="screenText">None</strong>. Check <strong class="screenText">Configure</strong> for HTTPS. Set Interactive render mode to <strong class="screenText">Auto (Server and Webassembly)</strong> and <strong class="screenText">Interactivity location</strong> to <strong class="screenText">Per page/component</strong>.</li>
<li class="numberedList">Check <strong class="screenText">Include sample pages</strong>. Uncheck <strong class="screenText">Do not use top-level statements</strong>. Uncheck <strong class="screenText">Enlist in .NET Aspire orchestration</strong> and click <strong class="screenText">Create</strong>:</li>
</ol>
<figure class="mediaobject"><img alt="A screenshot of a computer  Description automatically generated" src="img/B21849_02_05.png"/></figure>
<p class="packt_figref">Figure 2.5: Visual Studio screen for creating a new Blazor app</p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="7">Now run the app by pressing <strong class="screenText">Ctrl</strong> + <strong class="screenText">F5</strong> (we can also find it under the menu <strong class="screenText">Debug</strong> | <strong class="screenText">Start without debugging</strong>).</li>
</ol>
<p class="normal">Congratulations! You <a id="_idIndexMarker068"/>have just created your first Blazor web application. The site should look something like in <em class="italic">Figure 2.6</em>:</p>
<figure class="mediaobject"><img alt="A screenshot of a computer  Description automatically generated" src="img/B21849_02_06.png"/></figure>
<p class="packt_figref">Figure 2.6: A new Blazor Web App</p>
<p class="normal">Explore the site a bit, navigate to <strong class="screenText">Counter</strong> and <strong class="screenText">Weather</strong> to get a feeling for the load times, and see what the sample application does.</p>
<p class="normal">The different pages have different ways of running. The Counter page is interactive and uses auto render <a id="_idIndexMarker069"/>mode. This means if loading the WebAssembly version takes longer than 100 milliseconds, the web will first start up a SignalR connection that will load the component fast. In the background, the WebAssembly version is downloaded and cached. The next time the user visits our site, it will use the cached version and load much faster.</p>
<p class="normal">The browser downloads the page, some CSS, and then <code class="inlineCode">blazor.web.js</code>, which is responsible for setting up the site. In some cases, it’s a SignalR connection back to the server, and in some, it’s starting up WebAssembly.</p>
<p class="normal">The Counter page is configured as <code class="inlineCode">RenderMode:Auto</code>, which means it will first render with Blazor Server and then any following requests will update with WebAssembly. As soon as you switch to the Counter page, a bunch of files will get downloaded in the background.</p>
<p class="normal">In this case, when the page gets downloaded, it will trigger a download of the necessary JavaScript files. Then, <code class="inlineCode">blazor.boot.json</code> gets downloaded. <em class="italic">Figure 2.13</em> shows an example of part of <code class="inlineCode">blazor.boot.json</code>:</p>
<p class="normal"><img alt="A close up of text  Description automatically generated" src="img/B21849_02_07.png"/></p>
<p class="packt_figref">Figure 2.7: Part of the blazor.boot.json file</p>
<p class="normal">The most important thing <code class="inlineCode">blazor.boot.json</code> contains is the entry assembly, which is the name of the DLL the browser should start executing. It also includes all the framework DLLs the app needs to run. Now, our app knows what it needs to start up. In previous versions of .NET, the files were DLL files. In .NET 8, we download <code class="inlineCode">.wasmfiles</code>. </p>
<p class="normal">By default, Blazor will use <code class="inlineCode">Webcil</code>, which is a payload format. <code class="inlineCode">Webcil</code> will package the DLLs. Some providers have turned off support for DLL files, and anti-virus programs have issues with DLL files, so this is an awesome update.</p>
<p class="normal">JavaScript will then download all the resources mentioned in <code class="inlineCode">blazor.boot.json</code>: this is a mix of your code compiled to a .NET Standard DLL, Microsoft .NET Framework code, and any community or third-party DLLs you might use. The JavaScript then downloads <code class="inlineCode">dotnet.native.wasm</code>, the Mono runtime compiled to WebAssembly, which will start booting up your app.</p>
<p class="normal">Now, we have the base for our project. Throughout this book, we will use Visual Studio, but there are other <a id="_idIndexMarker070"/>ways to run your Blazor site, such as using the command line. The command line is a super powerful tool, and in the next section, we will take a look at how to set up a project using the command line.</p>
<h1 class="heading-1" id="_idParaDest-42">Using the command line</h1>
<p class="normal">With .NET 5, we got a<a id="_idIndexMarker071"/> super powerful tool called <code class="inlineCode">dotnet.exe</code>. Developers who have used .NET Core before will already be familiar with the tool, but with .NET 5, it is no longer exclusively for .NET Core developers.</p>
<p class="normal">It can do many things Visual Studio can do, for example, creating projects, adding and creating NuGet packages, and much more. In the following example, we will create a Blazor Server and a <a id="_idIndexMarker072"/>Blazor WebAssembly project using the <strong class="screenText">dotnet</strong> command.</p>
<h2 class="heading-2" id="_idParaDest-43">Creating projects using the command line</h2>
<p class="normal">The following steps <a id="_idIndexMarker073"/>are to demonstrate the power of using the command line. We will not use this project later in the book, so if you don’t want to try it, go ahead and skip this section. The CLI is cross-platform, so this can be used on Linux and macOS as well.</p>
<p class="normal">To create a solution with a Blazor app, you can do the following:</p>
<pre class="programlisting con"><code class="hljs-con">dotnet new blazor -o BlazorWebApp
</code></pre>
<p class="normal">We will not go deeper into the CLI in this book but know that it is a great way to create projects, add packages, and much, much more.</p>
<div><p class="normal">NOTE: THE .NET CLI</p>
<p class="normal">The idea is that you should be able to do everything from the command line. If you prefer working with the command line, you should check out the .NET CLI; you can read more about the .NET CLI here: <a href="https://docs.microsoft.com/en-us/dotnet/core/tools/">https://docs.microsoft.com/en-us/dotnet/core/tools/</a>.</p>
</div>
<p class="normal">Let’s go back to the Blazor template, which has added a lot of files for us. In the next section, we will look at what Visual Studio has generated for us.</p>
<h1 class="heading-1" id="_idParaDest-44">Figuring out the project structure</h1>
<p class="normal">Visual Studio will generate<a id="_idIndexMarker074"/> two projects: <code class="inlineCode">Blazor App</code>, which is the server project, and <code class="inlineCode">BlazorWebApp.Client</code>, which is where we put our WebAssembly components.</p>
<p class="normal">Now, it’s time to look at the different files and how they may differ in different projects. Take a look at the code in the two projects we just created (in the <em class="italic">Creating our first Blazor app</em> section) while we go through them.</p>
<h2 class="heading-2" id="_idParaDest-45">Program.cs (BlazorWebApp project)</h2>
<p class="normal"><code class="inlineCode">Program.cs</code> is the first <a id="_idIndexMarker075"/>class that <a id="_idIndexMarker076"/>gets called. So, let’s start looking at that one.</p>
<p class="normal">The <code class="inlineCode">Program.cs</code> file looks like this:</p>
<pre class="programlisting code"><code class="hljs-code">var builder = WebApplication.CreateBuilder(args);
// Add services to the container.
builder.Services.AddRazorComponents()
    .AddInteractiveServerComponents()
    .AddInteractiveWebAssemblyComponents();
var app = builder.Build();
// Configure the HTTP request pipeline.
if (app.Environment.IsDevelopment())
{
    app.UseWebAssemblyDebugging();
}
else
{
    app.UseExceptionHandler("/Error", createScopeForErrors: true);
    // The default HSTS value is 30 days. You may want to change this for production scenarios, see https://aka.ms/aspnetcore-hsts.
    app.UseHsts();
}
app.UseHttpsRedirection();
app.UseStaticFiles();
app.UseAntiforgery();
app.MapRazorComponents&lt;App&gt;()
    .AddInteractiveServerRenderMode()
    .AddInteractiveWebAssemblyRenderMode()
    .AddAdditionalAssemblies(typeof(Counter).Assembly);
app.Run();
</code></pre>
<p class="normal">In .NET 6, Microsoft removed the <code class="inlineCode">Startup.cs</code> file and put all the startup code in <code class="inlineCode">Program.cs</code>. It also uses top-level statements, which makes the code a bit less bloated.</p>
<p class="normal">There are a few things worthy of mentioning here. The Program class starts with adding all the dependencies we need in our application. In this case, we add <code class="inlineCode">RazorComponent</code>, which enables us to run Razor components. Then, we add <code class="inlineCode">InteractiveServerComponents</code>, giving us access to all the objects we need to run Blazor Server. Since we selected the auto render mode, we also get access to Blazor WebAssembly by adding <code class="inlineCode">InteractiveWebAssemblyComponents.</code></p>
<p class="normal">It also configures <strong class="keyWord">HTTP Strict Transport Security</strong> (<strong class="keyWord">HSTS</strong>), forcing your application to use HTTPS, and will make<a id="_idIndexMarker077"/> sure that your users don’t use any untrusted resources or certificates. We also ensure that the site redirects to HTTPS to secure the site.</p>
<p class="normal"><code class="inlineCode">UseStaticFiles</code> enables downloading static files such as CSS or images.</p>
<p class="normal"><code class="inlineCode">UseAntiforgery</code> is a method that adds anti-forgery middleware to the application pipeline, providing a <a id="_idIndexMarker078"/>layer of security <a id="_idIndexMarker079"/>against <strong class="keyWord">Cross-Site Request Forgery</strong> (<strong class="keyWord">CSRF</strong> or <strong class="keyWord">XSRF</strong>) attacks. </p>
<p class="normal">These types of attacks occur when a malicious web app influences the interaction between a client browser and a web app that trusts that browser, often leading to unwanted actions being performed without the user’s consent. </p>
<p class="normal">The different <code class="inlineCode">Use*</code> methods add request delegates to the request pipeline or middleware pipeline. Each request delegate (<code class="inlineCode">ExceptionHandler</code>, <code class="inlineCode">HttpRedirection</code>, <code class="inlineCode">StaticFiles</code>, and so on) is called consecutively from the top to the bottom in the order they are added in <code class="inlineCode">Program.cs</code> and back again.</p>
<p class="normal">This is why the exception handler is the first one to be added.</p>
<p class="normal">If there is an exception in any of the request delegates that follow, the exception handler will still be able to handle it (since the request travels back through the pipeline), as shown in <em class="italic">Figure 2.15</em>:</p>
<figure class="mediaobject"><img alt="Figure 2.15 – The request middleware pipeline" src="img/B21849_02_08.png"/></figure>
<p class="packt_figref">Figure 2.8: The request middleware pipeline</p>
<p class="normal">If any of these request delegates handle the request in the case of a static file, for example, there is no need to involve routing, and the remaining request delegates will not get called. Sometimes, it<a id="_idIndexMarker080"/> is essential<a id="_idIndexMarker081"/> to add the request delegates in the correct order; for example, we want to run authentication early in the pipeline to make sure that users can’t access things they shouldn’t.</p>
<div><p class="normal">NOTE:</p>
<p class="normal">There is more information about this here if you want to dig even deeper: <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware/?view=aspnetcore-8.0">https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware/?view=aspnetcore-8.0</a>.</p>
</div>
<p class="normal">At the end of the class, we map Razor components to the <code class="inlineCode">App</code> component. We add the different render <a id="_idIndexMarker082"/>modes and<a id="_idIndexMarker083"/> additional assemblies – in this case, the <code class="inlineCode">BlazorWebApp.Client</code> project, which is our WebAssembly project.</p>
<h2 class="heading-2" id="_idParaDest-46">Program.cs (BlazorWebApp.Client)</h2>
<p class="normal">The <code class="inlineCode">program.cs</code> located <a id="_idIndexMarker084"/>in the<a id="_idIndexMarker085"/> Blazor WebAssembly project doesn’t contain many things.</p>
<p class="normal">It looks like this:</p>
<pre class="programlisting code"><code class="hljs-code">var builder = WebAssemblyHostBuilder.CreateDefault(args);
await builder.Build().RunAsync();
</code></pre>
<p class="normal">It simply sets up a host builder and uses the default configuration.</p>
<h2 class="heading-2" id="_idParaDest-47">App (BlazorWebApp)</h2>
<p class="normal">The next thing <a id="_idIndexMarker086"/>that happens is that the <code class="inlineCode">App</code> component<a id="_idIndexMarker087"/> runs.</p>
<p class="normal">It looks like this:</p>
<pre class="programlisting code"><code class="hljs-code">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
&lt;meta charset="utf-8" /&gt;
&lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;
&lt;base href="/" /&gt;
&lt;link rel="stylesheet" href="bootstrap/bootstrap.min.css" /&gt;
&lt;link rel="stylesheet" href="app.css" /&gt;
&lt;link rel="stylesheet" href="BlazorWebApp.styles.css" /&gt;
&lt;link rel="icon" type="image/png" href="favicon.png" /&gt;
&lt;HeadOutlet /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;Routes /&gt;
&lt;script src="img/blazor.web.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p class="normal">Let’s go through it and see what we can learn. It starts with <code class="inlineCode">html</code>, <code class="inlineCode">doctype</code>, and a <code class="inlineCode">head</code> tag. The <code class="inlineCode">head</code> tag contains <a id="_idIndexMarker088"/>meta tags and <strong class="keyWord">stylesheets</strong> (<strong class="keyWord">CSS</strong>). The <code class="inlineCode">base</code> tag is so the application finds the appropriate files. If we are, for example, hosting our application in a subfolder (like on GitHub Pages) we need to modify the <code class="inlineCode">base</code> tag to reflect that. The <code class="inlineCode">HeadOutlet</code> component is for us to add things like page titles from within our code (we will return to that in <em class="chapterRef">Chapter 5</em>, <em class="italic">Creating Advanced Blazor Components</em>).</p>
<p class="normal">The <code class="inlineCode">Routes</code> component is the component that handles all the routing, which we will take a look at next. And last<a id="_idIndexMarker089"/> but not least, we have the <a id="_idIndexMarker090"/>JavaScript that makes all of this possible.</p>
<h2 class="heading-2" id="_idParaDest-48">Routes</h2>
<p class="normal">The <code class="inlineCode">Routes</code> <a id="_idIndexMarker091"/>component is the one that<a id="_idIndexMarker092"/> handles all the routing. It looks like this:</p>
<pre class="programlisting code"><code class="hljs-code">&lt;Router AppAssembly="@typeof(Program).Assembly" AdditionalAssemblies="new[] { typeof(Client._Imports).Assembly }"&gt;
&lt;Found Context="routeData"&gt;
&lt;RouteView RouteData="@routeData" DefaultLayout="@typeof(Layout.MainLayout)" /&gt;
&lt;FocusOnNavigate RouteData="@routeData" Selector="h1" /&gt;
&lt;/Found&gt;
&lt;/Router&gt;
</code></pre>
<p class="normal">This file handles the routing, finding the suitable component to show (based on the <code class="inlineCode">@page</code> directive). It shows an error message if the route can’t be found. In <em class="chapterRef">Chapter 8</em>, <em class="italic">Authentication and Authorization</em>, we will make changes to this file when we implement authentication.</p>
<p class="normal">The <code class="inlineCode">Routes</code> component also includes a default layout. We can override the layout per component, but usually, you’ll have one layout page for your site. In this case, the default layout is called <code class="inlineCode">MainLayout</code>.</p>
<p class="normal">The <code class="inlineCode">FocusOnNavigate</code> will set the focus on a specific element once we have navigated/loaded a new component/route – in this case, <code class="inlineCode">H1</code>.</p>
<h2 class="heading-2" id="_idParaDest-49">MainLayout</h2>
<p class="normal"><code class="inlineCode">MainLayout</code>, which <a id="_idIndexMarker093"/>we can find in the shared folder, contains <a id="_idIndexMarker094"/>the default layout for all components when viewed as a page. The <code class="inlineCode">MainLayout</code> contains a couple of <code class="inlineCode">div</code> tags, one for the sidebar and one for the main content:</p>
<pre class="programlisting code"><code class="hljs-code">@inherits LayoutComponentBase
&lt;div class="page"&gt;
&lt;div class="sidebar"&gt;
&lt;NavMenu /&gt;
&lt;/div&gt;
&lt;main&gt;
&lt;div class="top-row px-4"&gt;
&lt;a href="https://learn.microsoft.com/aspnet/core/" target="_blank"&gt;About&lt;/a&gt;
&lt;/div&gt;
&lt;article class="content px-4"&gt;
            @Body
        &lt;/article&gt;
&lt;/main&gt;
&lt;/div&gt;
&lt;div id="blazor-error-ui"&gt;
    An unhandled error has occurred.
    &lt;a href="" class="reload"&gt;Reload&lt;/a&gt;
&lt;a class="dismiss"&gt;X&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p class="normal">The only things you need in this document are <code class="inlineCode">@inherits LayoutComponentBase</code> and <code class="inlineCode">@Body</code>; the rest is just Bootstrap.</p>
<div><p class="normal">Bootstrap is one of the most popular CSS frameworks for developing responsive and mobile-first websites.</p>
<p class="normal">We can find a reference to Bootstrap in the <code class="inlineCode">App.Razor</code> file.</p>
<p class="normal">It was created by and for Twitter/X. You can read more about Bootstrap here: <a href="https://getbootstrap.com/">https://getbootstrap.com/</a>.</p>
</div>
<p class="normal">The <code class="inlineCode">@inherits</code> directive inherits from <code class="inlineCode">LayoutComponentBase</code>, which contains all the code to use a layout. <code class="inlineCode">@Body</code> is where the component will be rendered (when viewed as a page).</p>
<p class="normal">It also contains the default error UI for Blazor.</p>
<p class="normal">At the top of the layout, you can see <code class="inlineCode">&lt;NavMenu&gt;</code>, a Razor component. It is located in<a id="_idIndexMarker095"/> the <code class="inlineCode">Components/Layout</code> folder and looks like<a id="_idIndexMarker096"/> this:</p>
<pre class="programlisting code"><code class="hljs-code">&lt;div class="top-row ps-3 navbar navbar-dark"&gt;
&lt;div class="container-fluid"&gt;
&lt;a class="navbar-brand" href=""&gt;BlazorWebApp&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;input type="checkbox" title="Navigation menu" class="navbar-toggler" /&gt;
&lt;div class="nav-scrollable" onclick="document.querySelector('.navbar-toggler').click()"&gt;
&lt;nav class="flex-column"&gt;
&lt;div class="nav-item px-3"&gt;
&lt;NavLink class="nav-link" href="" Match="NavLinkMatch.All"&gt;
&lt;span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"&gt;&lt;/span&gt; Home
            &lt;/NavLink&gt;
&lt;/div&gt;
&lt;div class="nav-item px-3"&gt;
&lt;NavLink class="nav-link" href="counter"&gt;
&lt;span class="bi bi-plus-square-fill-nav-menu" aria-hidden="true"&gt;&lt;/span&gt; Counter
            &lt;/NavLink&gt;
&lt;/div&gt;
&lt;div class="nav-item px-3"&gt;
&lt;NavLink class="nav-link" href="weather"&gt;
&lt;span class="bi bi-list-nested-nav-menu" aria-hidden="true"&gt;&lt;/span&gt; Weather
            &lt;/NavLink&gt;
&lt;/div&gt;
&lt;/nav&gt;
&lt;/div&gt;
</code></pre>
<p class="normal">It contains the left-side menu and is a standard Bootstrap menu. It also has three menu items and logic for a hamburger menu (if viewed on a phone). This type of nav menu is usually done with JavaScript, but this one is done solely with CSS and C#.</p>
<p class="normal">You will find another component, <code class="inlineCode">NavLink</code>, which is built into the framework. It will render an anchor tag but will also check the current route. If you are currently on the same route/URL as the nav link, it will automatically add a CSS class called <code class="inlineCode">active</code> to the tag.</p>
<p class="normal">We will run into a couple more built-in components that will help us along the way. There are also some <a id="_idIndexMarker097"/>pages in the template, but we <a id="_idIndexMarker098"/>will leave them for now and go through them in the next chapter when we go into components.</p>
<h2 class="heading-2" id="_idParaDest-50">CSS</h2>
<p class="normal">In the <code class="inlineCode">Components/Layout</code> folder, there <a id="_idIndexMarker099"/>are two CSS<a id="_idIndexMarker100"/> files: : <code class="inlineCode">NavMenu.razor.css</code> and <code class="inlineCode">MainLayout.razor.css</code>.</p>
<p class="normal">These files are CSS styles that affect only the specific component (the first part of the name). We will return to a concept called isolated CSS in <em class="chapterRef">Chapter 9</em>, <em class="italic">Sharing Code and Resources</em>.</p>
<h1 class="heading-1" id="_idParaDest-51">Summary</h1>
<p class="normal">In this chapter, we got the development environment up and running, and we created our first Blazor app. We learned in what order classes, components, and layouts are called, making it easier to follow the code. </p>
<p class="normal">In the next chapter, we will take a break from Blazor to look at managing state and set up a repository to store our blog posts.</p>
</div>
</body></html>