<html><head></head><body><div><div><div><div><h1 class="title"><a id="pref05"/>Preface</h1></div></div></div><p>Welcome to <em>C# Multithreaded and Parallel Programming</em>. This book will take you through all of the ways to perform multithreaded and concurrent programming using the C# programming language and the .NET Framework. We will start with a description of what concurrent and parallel programming is, why it is important, and when you should implement it. We will then go through the different classes provided by the .NET Framework and the different design patterns commonly used when developing multithreaded applications.</p><p>Most modern machines have dual-core processors. This means that the present-day computer has the ability to multitask. Using multiple cores means your applications can process data faster and be more responsive to users. However, to fully exploit this in your applications, you need to write multithreaded code.</p><p>This will take us on a journey from the BackgroundWorker component, the Thread class, the Task Parallel Library, to the async and await keywords. We will also explore common design patterns such as Pipelining, producer-consumer, and the IAsyncResult interface.</p><p>Using the concurrent and parallel classes provided by .NET allows you to easily write powerful multithreaded applications. In the latest version of .NET, Microsoft has added the Task Parallel Library and the async keyword to make concurrent programming functionality much easier than using threads.</p><p>We will cover all aspects of developing multithreaded applications using the latest version of .NET in this book.</p><div><div><div><div><h1 class="title"><a id="ch00lvl1sec02"/>What this book covers</h1></div></div></div><p>
<a class="link" href="ch01.html" title="Chapter 1. Understanding Multiprocessing and Multiple Cores">Chapter 1</a>, <em>Understanding Multiprocessing and Multiple Cores</em>, covers the evolution of computer hardware from single-processor systems to multiprocessor and multiple-core systems. It will also discuss how the Windows Scheduler allots time to threads. This chapter then discusses design considerations for concurrency, how to take advantage of multiprocessor/multiple core systems, and the expected performance improvements these designs can realize. During this chapter, we will walk through a simple single-threaded and then multithreaded example to show how performance is improved.</p><p>
<a class="link" href="ch02.html" title="Chapter 2. Looking at Multithreaded Classes – BackgroundWorker">Chapter 2</a>, <em>Looking at Multithreaded Classes – BackgroundWorker</em>, enables us to examine the basics of multithreaded programming with the BackgroundWorker class. We will go through a WPF example showing how we can update a UI while processing is going on in the background. This chapter will discuss the basics of coordinating work between multiple processes and the concept of concurrency.</p><p>
<a class="link" href="ch03.html" title="Chapter 3. Thread Class – Heavyweight Concurrency in C#">Chapter 3</a>, <em>Thread Class – Heavyweight Concurrency in C#</em>, allows us to examine and work with the Thread class and namespace. We will learn how to create threads, coordinate between threads, share data between threads, and stop threads. This chapter will explore the idea of heavyweight concurrency versus lightweight concurrency, which will be explained in detail later in the book. We will focus on manually using and coordinating multiple threads in an application.</p><p>
<a class="link" href="ch04.html" title="Chapter 4. Advanced Thread Processing">Chapter 4</a>, <em>Advanced Thread Processing</em>, explains in detail the concept of heavyweight concurrency and working with multiple threads using the Thread class. This chapter will further expand the image processing application to demonstrate how to coordinate between threads and wait on threads to complete by avoiding deadlocks, locking, and error handling. This chapter will leave the reader with a clear understanding of how to develop applications with multiple threads and have complete control over their execution and interaction.</p><p>
<a class="link" href="ch05.html" title="Chapter 5. Lightweight Concurrency – Task Parallel Library (TPL)">Chapter 5</a>, <em>Lightweight Concurrency – Task Parallel Library (TPL)</em>, introduces the Task Parallel Library and the next evolution of multithreaded programming in C#/.NET. Now that we have a full understanding of how to develop, manage, and control applications with many threads, we will learn how to take advantage of the Parallel namespace in .NET to do a lot of the heavy lifting for us. We will introduce the idea of lightweight concurrency by leveraging the Parallel classes that .NET now provides. This will allow us to focus more on designing an efficient and powerful application and less on coordinating individual threads.</p><p>
<a class="link" href="ch06.html" title="Chapter 6. Task-based Parallelism">Chapter 6</a>, <em>Task-based Parallelism</em>, enables us to examine the Task Parallel Library and task parallelism. A task is an asynchronous set of operations that can be run concurrently with other tasks. We will examine designing an application as a series of tasks that can be performed in parallel. With the help of examples, we will demonstrate how to create, manage, and coordinate tasks. We will further examine additional topics with the Task Parallel Library and task parallelism. We will learn how to perform exception handling when running multiple tasks, how to schedule tasks under certain conditions, and how to cancel running tasks before they complete when needed.</p><p>
<a class="link" href="ch07.html" title="Chapter 7. Data Parallelism">Chapter 7</a>, <em>Data Parallelism</em>, explores the concept of data parallelism. We will see how to perform the same operations on elements of a collection concurrently using the Task Parallel Library. The Parallel class has the For and ForEach loops, and we will show examples of each to demonstrate how they handle concurrent data processing. We will convert our image processing application from heavyweight to lightweight concurrency using the Task Parallel Library instead of the Thread class.</p><p>
<a class="link" href="ch08.html" title="Chapter 8. Debugging Multithreaded Applications with Visual Studio">Chapter 8</a>, <em>Debugging Multithreaded Applications with Visual Studio</em>, teaches us how to take full advantage of Visual Studio 2012 to debug our multithreaded applications. We will demonstrate using the Threads view, and the Tasks, Parallel Stacks, and Parallel Watch windows. We will finish with debugging our image processing application.</p><p>
<a class="link" href="ch09.html" title="Chapter 9. Pipeline and Producer-consumer Design Patterns">Chapter 9</a>, <em>Pipeline and Producer-consumer Design Patterns</em>, helps us explore two of the most popular parallel patterns for development—Pipelining and producer-consumer. In Pipelining, we will see how to accomplish a parallel task where a simple parallel loop will not work due to data dependencies. The producer-consumer pattern allows a producer, which is generating results, to run along with the consumer so that the consumer can consume the results concurrently. We will expand our image processing application to implement these two patterns in combination.</p><p>
<a class="link" href="ch10.html" title="Chapter 10. Parallel LINQ – PLINQ">Chapter 10</a>, <em>Parallel LINQ – PLINQ</em>, details the benefits and functionality provided by Parallel LINQ (PLINQ). We will see how PLINQ speeds up traditional LINQs by separating the data source into sections and executing the query on each section. We will also discuss what kind of queries to use PLINQ for because not all queries will run faster using PLINQ.</p><p>
<a class="link" href="ch11.html" title="Chapter 11. The Asynchronous Programming Model">Chapter 11</a>, <em>The Asynchronous Programming Model</em>, explains the Asynchronous Programming Model (APM), which is a design pattern that is based on classes implementing the IAsyncResult interface. We will see how to begin and end asynchronous operations and use delegates to call methods asynchronously. This chapter will also cover the new async and await keywords and how to use them to implement an asynchronous design in your custom classes.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch00lvl1sec03"/>What you need for this book</h1></div></div></div><p>For this book, you will need a working knowledge of C#, .NET, and Visual Studio, and a desire to learn all of the different methods and techniques .NET provides to improve application performance through parallel multithreaded techniques.</p></div>
<div><div><div><div><h1 class="title"><a id="ch00lvl1sec04"/>Who this book is for</h1></div></div></div><p>This book is intended for developers who have a working knowledge of C# and the .NET Framework. We assume that you understand the basics of C# programming and the Visual Studio development environment.</p><p>This book is for developers looking to expand their toolbox with all of the techniques and methods available in .NET to develop and transition the existing code into multithreaded and concurrent programs. If you are looking for ways to increase the performance and scalability of your applications using today's multiple CPU and multicore processors, then this is the book for you.</p><p>This book is also designed for developers with knowledge of the original multithreaded techniques used in the earlier versions of .NET and who want to update their knowledge with all of the new classes that the latest versions of .NET provide, most notably the Task Parallel Library and the async and await keywords. If you need to update older applications with today's latest .NET parallel techniques, then this is a good guide for you.</p></div>
<div><div><div><div><h1 class="title"><a id="ch00lvl1sec05"/>Conventions</h1></div></div></div><p>In this book, you will find a number of styles of text that distinguish between different kinds of information. Here are some examples of these styles, and an explanation of their meaning.</p><p>Code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles are shown as follows: "This will require us to work with the <code class="literal">BackgroundWorker</code> component."</p><p>A block of code is set as follows:</p><div><pre class="programlisting">        private void setFishesVisibility(System.Windows.Visibility pbValue)
        {
            // Change the visibility of the controls 
            //related to the fishes game.
            imgFish1.Visibility = pbValue;
            imgFish2.Visibility = pbValue;
            imgFish3.Visibility = pbValue;
            txtFishGame.Visibility = pbValue;
            btnGameOver.Visibility = pbValue;
        }</pre></div><p>
<strong>New terms</strong> and <strong>important words</strong> are shown in bold. Words that you see on the screen, in menus or dialog boxes for example, appear in the text like this: "Create a new WPF application C# project in Visual Studio (<strong>File</strong> | <strong>New</strong> | <strong>Project</strong> | <strong>Visual C#</strong> | <strong>WPF Application</strong>)."</p><div><div><h3 class="title"><a id="note01"/>Note</h3><p>Warnings or important notes appear in a box like this.</p></div></div><div><div><h3 class="title"><a id="tip01"/>Tip</h3><p>Tips and tricks appear like this.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch00lvl1sec06"/>Reader feedback</h1></div></div></div><p>Feedback from our readers is always welcome. Let us know what you think about this book—what you liked or may have disliked. Reader feedback is important for us to develop titles that you really get the most out of.</p><p>To send us general feedback, simply send an e-mail to <code class="email">&lt;<a class="email" href="mailto:feedback@packtpub.com">feedback@packtpub.com</a>&gt;</code>, and mention the book title via the subject of your message.</p><p>If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, see our author guide on <a class="ulink" href="http://www.packtpub.com/authors">www.packtpub.com/authors</a>.</p></div>
<div><div><div><div><h1 class="title"><a id="ch00lvl1sec07"/>Customer support</h1></div></div></div><p>Now that you are the proud owner of a Packt book, we have a number of things to help you to get the most from your purchase.</p><div><div><div><div><h2 class="title"><a id="ch00lvl2sec04"/>Downloading the example code</h2></div></div></div><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div><div><div><div><div><h2 class="title"><a id="ch00lvl2sec05"/>Errata</h2></div></div></div><p>Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you find a mistake in one of our books—maybe a mistake in the text or the code—we would be grateful if you could report this to us. By doing so, you can save other readers from frustration and help us improve subsequent versions of this book. If you find any errata, please report them by visiting <a class="ulink" href="http://www.packtpub.com/submit-errata">http://www.packtpub.com/submit-errata</a>, selecting your book, clicking on the <strong>Errata Submission Form</strong> link, and entering the details of your errata. Once your errata are verified, your submission will be accepted and the errata will be uploaded to our website or added to any list of existing errata under the Errata section of that title.</p><p>To view the previously submitted errata, go to <a class="ulink" href="https://www.packtpub.com/books/content/support">https://www.packtpub.com/books/content/support</a> and enter the name of the book in the search field. The required information will appear under the <strong>Errata</strong> section.</p></div><div><div><div><div><h2 class="title"><a id="ch00lvl2sec06"/>Piracy</h2></div></div></div><p>Piracy of copyright material on the Internet is an ongoing problem across all media. At Packt, we take the protection of our copyright and licenses very seriously. If you come across any illegal copies of our works, in any form, on the Internet, please provide us with the location address or website name immediately so that we can pursue a remedy.</p><p>Please contact us at <code class="email">&lt;<a class="email" href="mailto:copyright@packtpub.com">copyright@packtpub.com</a>&gt;</code> with a link to the suspected pirated material.</p><p>We appreciate your help in protecting our authors, and our ability to bring you valuable content.</p></div><div><div><div><div><h2 class="title"><a id="ch00lvl2sec07"/>Questions</h2></div></div></div><p>You can contact us at <code class="email">&lt;<a class="email" href="mailto:questions@packtpub.com">questions@packtpub.com</a>&gt;</code> if you are having a problem with any aspect of the book, and we will do our best to address it.</p></div></div></body></html>