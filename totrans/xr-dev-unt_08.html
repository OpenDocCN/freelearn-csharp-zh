<html><head></head><body>
<div id="_idContainer127">
<h1 class="chapter-number" id="_idParaDest-150"><a id="_idTextAnchor026"/><span class="koboSpan" id="kobo.1.1">8</span></h1>
<h1 id="_idParaDest-151"><span class="koboSpan" id="kobo.2.1">Building Advanced XR Techniques</span></h1>
<p><span class="koboSpan" id="kobo.3.1">Up until now, you have explored various parts of XR development, crafting immersive and interactive XR applications suited for a wide array of use cases. </span><span class="koboSpan" id="kobo.3.2">As you venture further into mastering XR development, it’s essential to not only be proficient at creating basic to intermediate XR applications but also master advanced techniques that elevate the commercial viability and influence of your </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">XR offerings.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">This chapter is designed to familiarize you with crucial, high-level XR methods, all through a hands-on approach. </span><span class="koboSpan" id="kobo.5.2">You will dive into hand-tracking integration, use eye- and head-tracking for complex interactions, and discover how to establish a multiplayer server to create an engaging multiplayer </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">XR experience.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">The content of this chapter might sound intimidating but don’t worry – we’re here to guide you every step of the way as you incorporate these sophisticated XR strategies into various scenes. </span><span class="koboSpan" id="kobo.7.2">Leveraging the solid XR foundation you’ve built from earlier chapters, you’ll find these advanced techniques more intuitive </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">than anticipated.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">Regardless of the XR equipment you possess, this chapter promises a wealth of knowledge, with all techniques being adaptable to different setups. </span><span class="koboSpan" id="kobo.9.2">We’ll delve deeper into this in the </span><em class="italic"><span class="koboSpan" id="kobo.10.1">Technical </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.11.1">requirements</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.12.1"> section.</span></span></p>
<p><span class="koboSpan" id="kobo.13.1">This chapter includes the </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">following sections:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.15.1">Adding hand-tracking to </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">XR experiences</span></span></li>
<li><span class="koboSpan" id="kobo.17.1">Interacting with objects in XR experiences via eye- </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">or head-tracking</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">Building a VR </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">multiplayer application</span></span></li>
</ul>
<h1 id="_idParaDest-152"><span class="koboSpan" id="kobo.21.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.22.1">Navigating the hand-tracking, eye-tracking, and multiplayer aspects of this chapter requires understanding both shared and unique technical prerequisites. </span><span class="koboSpan" id="kobo.22.2">For a seamless development experience, we recommend acquainting yourself with all listed requirements. </span><span class="koboSpan" id="kobo.22.3">Though this chapter delves into advanced topics and may initially seem daunting compared to earlier sections, you can be sure that all tutorials in this chapter are designed for straightforward execution – even if you don’t have a VR headset </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">at hand.</span></span></p>
<p><span class="koboSpan" id="kobo.24.1">First, let’s address the overarching technical requirements. </span><span class="koboSpan" id="kobo.24.2">To follow along with the tutorials in this chapter, you’ll need Unity </span><em class="italic"><span class="koboSpan" id="kobo.25.1">2021.3 LTS</span></em><span class="koboSpan" id="kobo.26.1"> or a newer version. </span><span class="koboSpan" id="kobo.26.2">Validate your hardware’s suitability by comparing it to the system requirements described on Unity’s website: </span><a href="https://docs.unity3d.com/Manual/system-requirements.html"><span class="koboSpan" id="kobo.27.1">https://docs.unity3d.com/Manual/system-requirements.html</span></a><span class="koboSpan" id="kobo.28.1">. </span><span class="koboSpan" id="kobo.28.2">Depending on your VR headset’s specifications, ensure that your setup supports </span><em class="italic"><span class="koboSpan" id="kobo.29.1">Windows</span></em><span class="koboSpan" id="kobo.30.1">/</span><em class="italic"><span class="koboSpan" id="kobo.31.1">Linux</span></em><span class="koboSpan" id="kobo.32.1">/</span><em class="italic"><span class="koboSpan" id="kobo.33.1">Mac</span></em><span class="koboSpan" id="kobo.34.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.35.1">Android </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.36.1">Build Support</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.38.1">Most contemporary VR headsets, particularly those with inside-out camera tracking, incorporate hand-tracking capabilities. </span><span class="koboSpan" id="kobo.38.2">Examples include the Meta Quest series, HTC Vive Cosmos Elite, PlayStation VR2, Pico Neo 2 Eye, the Lynx-R1, Valve Index, HP Reverb G2, Varjo VR-3, and the soon-to-be-released Apple Vision Pro. </span><span class="koboSpan" id="kobo.38.3">Always refer to the technical specifications of your VR headset to find out whether it </span><span class="No-Break"><span class="koboSpan" id="kobo.39.1">supports hand-tracking.</span></span></p>
<p><span class="koboSpan" id="kobo.40.1">If you don’t have access to a headset that supports hand-tracking, you can still follow this chapter as the XR Device Simulator can replicate the hand-tracking features of a VR </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">headset flawlessly.</span></span></p>
<p><span class="koboSpan" id="kobo.42.1">Eye-tracking in VR is an evolving field, and interestingly, you can delve into the eye-tracking tutorials of this chapter’s eye- and head-gaze-tracking section regardless of your VR headset’s specifications. </span><span class="koboSpan" id="kobo.42.2">Even if you’re working solely with the XR Device Simulator without a physical VR headset, you’ll find our tutorial accessible. </span><span class="koboSpan" id="kobo.42.3">While we won’t spoil all the details now, it’s worth noting that the XR Interaction Toolkit provides innovative solutions for situations where a VR headset lacks standard eye-tracking capabilities. </span><span class="koboSpan" id="kobo.42.4">As of the time of this book’s publication, VR headsets that offer eye-tracking include the PlayStation VR2, HP Reverb G2 Omnicept Edition, Pico Neo 3 Pro Eye, HTC Vive Pro Eye, Pico Neo 2 Eye, and Meta Quest Pro. </span><span class="koboSpan" id="kobo.42.5">Furthermore, the upcoming Apple Vision Pro is anticipated to feature eye-tracking. </span><span class="koboSpan" id="kobo.42.6">This list might not cover all available options by the time you read this book, so always check the specifications of your VR headset to confirm </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">eye-tracking support.</span></span></p>
<p><span class="koboSpan" id="kobo.44.1">Now that your hardware is all set up, let’s start exploring hand-tracking using the XR </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">Interaction Toolkit.</span></span></p>
<h1 id="_idParaDest-153"><span class="koboSpan" id="kobo.46.1">Adding hand-tracking to XR experiences</span></h1>
<p><span class="koboSpan" id="kobo.47.1">In this section, you</span><a id="_idIndexMarker633"/><span class="koboSpan" id="kobo.48.1"> will learn how to add a hand-tracking functionality to your XR experiences. </span><span class="koboSpan" id="kobo.48.2">Before creating a new Unity project, however, you</span><a id="_idIndexMarker634"/><span class="koboSpan" id="kobo.49.1"> must understand the technical concept of hand-tracking and how far it can enrich an XR experience compared to </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">regular controllers.</span></span></p>
<h2 id="_idParaDest-154"><span class="koboSpan" id="kobo.51.1">Understanding hand-tracking and potential use cases</span></h2>
<p><span class="koboSpan" id="kobo.52.1">At its core, </span><strong class="bold"><span class="koboSpan" id="kobo.53.1">hand-tracking</span></strong><span class="koboSpan" id="kobo.54.1"> in VR </span><a id="_idIndexMarker635"/><span class="koboSpan" id="kobo.55.1">refers to the technological capability of directly detecting, capturing, and interpreting the nuanced movements and positioning of a user’s bare hands and fingers within a </span><span class="No-Break"><span class="koboSpan" id="kobo.56.1">virtual environment.</span></span></p>
<p><span class="koboSpan" id="kobo.57.1">Unlike controller-based tracking, which relies on external devices to mediate and translate user inputs into VR actions such as an Xbox controller, hand-tracking operates without intermediary hardware, offering a direct mapping of real-world hand gestures and movements into the virtual realm. </span><span class="koboSpan" id="kobo.57.2">This approach leverages sophisticated sensors, cameras, and algorithms to construct a real-time, dynamic model of the user’s hand. </span><span class="koboSpan" id="kobo.57.3">From grabbing objects to casting spells with finger gestures, hand-tracking provides a vast array of potential interactions. </span><span class="koboSpan" id="kobo.57.4">It facilitates complex and subtle interactions that are hard to replicate with traditional controllers, permitting more organic and intuitive interactions </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">within VR.</span></span></p>
<p><span class="koboSpan" id="kobo.59.1">For a VR headset to harness the potential of hand-tracking, it should be equipped with high-resolution sensors and cameras capable of capturing detailed movements, down to the subtle motions of individual fingers. </span><span class="koboSpan" id="kobo.59.2">These cameras often need to be oriented in a manner that provides a wide field of view to consistently track hands as </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">they move.</span></span></p>
<p><span class="koboSpan" id="kobo.61.1">Hand-tracking requires real-time interpretation of complex hand and finger movements, necessitating robust processing power. </span><span class="koboSpan" id="kobo.61.2">The VR headset should have an onboard processor or be connected to a machine that can handle these computations </span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">without latency.</span></span></p>
<p><span class="koboSpan" id="kobo.63.1">Beyond hardware, the headset’s software must be designed or adaptable to recognize and interpret hand movements effectively. </span><span class="koboSpan" id="kobo.63.2">This includes having algorithms capable of differentiating between intentional gestures and inadvertent </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">hand motions.</span></span></p>
<p><span class="koboSpan" id="kobo.65.1">Building on these foundational requirements, the next section will guide you through setting up our Unity project to effectively utilize and enable hand-tracking, unlocking a richer, more immersive experience for users of your </span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">XR experiences.</span></span></p>
<h2 id="_idParaDest-155"><span class="koboSpan" id="kobo.67.1">Implementing hand-tracking with the XR Interaction Toolkit</span></h2>
<p><span class="koboSpan" id="kobo.68.1">To kick off </span><a id="_idIndexMarker636"/><span class="koboSpan" id="kobo.69.1">our </span><a id="_idIndexMarker637"/><span class="koboSpan" id="kobo.70.1">process of adding hand-tracking capabilities to an XR project, we must perform the </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">following steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.72.1">Go to Unity Hub and create a new project by navigating to the </span><strong class="bold"><span class="koboSpan" id="kobo.73.1">Projects</span></strong><span class="koboSpan" id="kobo.74.1"> tab, clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.75.1">New project</span></strong><span class="koboSpan" id="kobo.76.1"> button, selecting the </span><strong class="bold"><span class="koboSpan" id="kobo.77.1">3D (URP)</span></strong><span class="koboSpan" id="kobo.78.1"> template, renaming it to </span><strong class="source-inline"><span class="koboSpan" id="kobo.79.1">AdvancedXRTechniques</span></strong><span class="koboSpan" id="kobo.80.1">, and clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.81.1">Create </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.82.1">project</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.83.1"> button.</span></span></li>
<li><span class="koboSpan" id="kobo.84.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.85.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.86.1"> window, you will see that your scene only contains </span><strong class="bold"><span class="koboSpan" id="kobo.87.1">Main Camera</span></strong><span class="koboSpan" id="kobo.88.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.89.1">Directional Light</span></strong><span class="koboSpan" id="kobo.90.1">. </span><span class="koboSpan" id="kobo.90.2">You can delete </span><strong class="bold"><span class="koboSpan" id="kobo.91.1">Main Camera</span></strong><span class="koboSpan" id="kobo.92.1"> as it is </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">not needed.</span></span></li>
<li><span class="koboSpan" id="kobo.94.1">Import </span><strong class="bold"><span class="koboSpan" id="kobo.95.1">XR Interaction Toolkit</span></strong><span class="koboSpan" id="kobo.96.1"> into the scene by navigating to </span><strong class="bold"><span class="koboSpan" id="kobo.97.1">Window</span></strong><span class="koboSpan" id="kobo.98.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.99.1">Package Manager</span></strong><span class="koboSpan" id="kobo.100.1">, clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.101.1">+</span></strong><span class="koboSpan" id="kobo.102.1"> button, selecting the </span><strong class="bold"><span class="koboSpan" id="kobo.103.1">Add package by name</span></strong><span class="koboSpan" id="kobo.104.1"> option, typing in </span><strong class="source-inline"><span class="koboSpan" id="kobo.105.1">com.unity.xr.interaction.toolkit</span></strong><span class="koboSpan" id="kobo.106.1">, and hitting </span><em class="italic"><span class="koboSpan" id="kobo.107.1">Enter</span></em><span class="koboSpan" id="kobo.108.1">. </span><span class="koboSpan" id="kobo.108.2">The toolkit should now be automatically added to your project. </span><span class="koboSpan" id="kobo.108.3">Staying in the </span><strong class="bold"><span class="koboSpan" id="kobo.109.1">Package Manager</span></strong><span class="koboSpan" id="kobo.110.1"> window, navigate to the </span><strong class="bold"><span class="koboSpan" id="kobo.111.1">Samples</span></strong><span class="koboSpan" id="kobo.112.1"> tab of the newly added </span><strong class="bold"><span class="koboSpan" id="kobo.113.1">XR Interaction Toolkit</span></strong><span class="koboSpan" id="kobo.114.1"> package and import </span><strong class="bold"><span class="koboSpan" id="kobo.115.1">Starter Assets</span></strong><span class="koboSpan" id="kobo.116.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.117.1">XR Device Simulator</span></strong><span class="koboSpan" id="kobo.118.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.119.1">Hands Interaction Demo</span></strong><span class="koboSpan" id="kobo.120.1"> by clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.121.1">Import</span></strong><span class="koboSpan" id="kobo.122.1"> button next to each </span><span class="No-Break"><span class="koboSpan" id="kobo.123.1">of them.</span></span></li>
<li><span class="koboSpan" id="kobo.124.1">To enable hand-tracking in our scene, we don’t only need </span><strong class="bold"><span class="koboSpan" id="kobo.125.1">XR Interaction Toolkit</span></strong><span class="koboSpan" id="kobo.126.1">, but also Unity’s </span><strong class="bold"><span class="koboSpan" id="kobo.127.1">XR Hands</span></strong><span class="koboSpan" id="kobo.128.1"> package. </span><span class="koboSpan" id="kobo.128.2">Import it into the project by repeating the previous step, typing in </span><strong class="source-inline"><span class="koboSpan" id="kobo.129.1">com.unity.xr.hands</span></strong><span class="koboSpan" id="kobo.130.1">, and hitting </span><em class="italic"><span class="koboSpan" id="kobo.131.1">Enter</span></em><span class="koboSpan" id="kobo.132.1">. </span><span class="koboSpan" id="kobo.132.2">Once the package has been added to your project, navigate to the </span><strong class="bold"><span class="koboSpan" id="kobo.133.1">Samples</span></strong><span class="koboSpan" id="kobo.134.1"> tab of the </span><strong class="bold"><span class="koboSpan" id="kobo.135.1">XR Hands</span></strong><span class="koboSpan" id="kobo.136.1"> package in the </span><strong class="bold"><span class="koboSpan" id="kobo.137.1">Package Manager</span></strong><span class="koboSpan" id="kobo.138.1"> window and click the </span><strong class="bold"><span class="koboSpan" id="kobo.139.1">Import</span></strong><span class="koboSpan" id="kobo.140.1"> button next to the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.141.1">HandVisualizer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.142.1"> sample.</span></span></li>
<li><span class="koboSpan" id="kobo.143.1">Now, we would typically drag and drop the </span><strong class="bold"><span class="koboSpan" id="kobo.144.1">XR Interaction Setup</span></strong><span class="koboSpan" id="kobo.145.1"> component into our scene. </span><span class="koboSpan" id="kobo.145.2">However, to add hand-tracking capabilities to our VR scene, we need to import a different prefab that is specifically aimed at this purpose and called the </span><strong class="bold"><span class="koboSpan" id="kobo.146.1">XR Interaction Hands Setup</span></strong><span class="koboSpan" id="kobo.147.1"> prefab. </span><span class="koboSpan" id="kobo.147.2">To add it to your scene, type </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">XR Interaction Hands Setup</span></strong><span class="koboSpan" id="kobo.149.1"> into the search bar of the </span><strong class="bold"><span class="koboSpan" id="kobo.150.1">Project</span></strong><span class="koboSpan" id="kobo.151.1"> window, select the prefab, and drag it into the </span><strong class="bold"><span class="koboSpan" id="kobo.152.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.153.1"> window. </span><span class="koboSpan" id="kobo.153.2">Position it in the center </span><span class="No-Break"><span class="koboSpan" id="kobo.154.1">at (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.155.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.156.1">,</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.157.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">,</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.159.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.160.1">).</span></span></li>
<li><span class="koboSpan" id="kobo.161.1">It is </span><a id="_idIndexMarker638"/><span class="koboSpan" id="kobo.162.1">time to set up </span><strong class="bold"><span class="koboSpan" id="kobo.163.1">XR Plug-in Management</span></strong><span class="koboSpan" id="kobo.164.1"> correctly to enable hand-tracking. </span><span class="koboSpan" id="kobo.164.2">Navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.165.1">Edit</span></strong><span class="koboSpan" id="kobo.166.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.167.1">Project Settings</span></strong><span class="koboSpan" id="kobo.168.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.169.1">XR Plug-in Management</span></strong><span class="koboSpan" id="kobo.170.1"> and select the </span><strong class="bold"><span class="koboSpan" id="kobo.171.1">OpenXR</span></strong><span class="koboSpan" id="kobo.172.1"> checkbox on either the </span><strong class="bold"><span class="koboSpan" id="kobo.173.1">Windows/Mac/Linux</span></strong><span class="koboSpan" id="kobo.174.1"> tab or </span><strong class="bold"><span class="koboSpan" id="kobo.175.1">Android</span></strong><span class="koboSpan" id="kobo.176.1">, depending on the needs of your </span><span class="No-Break"><span class="koboSpan" id="kobo.177.1">VR headset.</span></span></li>
<li><span class="koboSpan" id="kobo.178.1">Once </span><a id="_idIndexMarker639"/><span class="koboSpan" id="kobo.179.1">the </span><strong class="bold"><span class="koboSpan" id="kobo.180.1">OpenXR</span></strong><span class="koboSpan" id="kobo.181.1"> plugin has been installed, navigate to its subtab underneath the </span><strong class="bold"><span class="koboSpan" id="kobo.182.1">XR Plug-in Management</span></strong><span class="koboSpan" id="kobo.183.1"> tab on the left-hand side. </span><span class="koboSpan" id="kobo.183.2">Here, go to either the </span><strong class="bold"><span class="koboSpan" id="kobo.184.1">Windows/Mac/Linux</span></strong><span class="koboSpan" id="kobo.185.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.186.1">Android</span></strong><span class="koboSpan" id="kobo.187.1"> tab. </span><span class="koboSpan" id="kobo.187.2">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.188.1">+</span></strong><span class="koboSpan" id="kobo.189.1"> button to add an </span><strong class="bold"><span class="koboSpan" id="kobo.190.1">Interaction Profile</span></strong><span class="koboSpan" id="kobo.191.1"> item to your project. </span><span class="koboSpan" id="kobo.191.2">Besides selecting the controllers of your VR headset in the newly opened menu, you should also add another </span><strong class="bold"><span class="koboSpan" id="kobo.192.1">Interaction Profile</span></strong><span class="koboSpan" id="kobo.193.1"> called </span><strong class="bold"><span class="koboSpan" id="kobo.194.1">Hands Interaction Profile</span></strong><span class="koboSpan" id="kobo.195.1">. </span><span class="koboSpan" id="kobo.195.2">At its core, </span><strong class="bold"><span class="koboSpan" id="kobo.196.1">Hand Interaction Profile</span></strong><span class="koboSpan" id="kobo.197.1"> in </span><strong class="bold"><span class="koboSpan" id="kobo.198.1">OpenXR</span></strong><span class="koboSpan" id="kobo.199.1"> provides a standardized way to interpret hand gestures and movements across different VR headsets. </span><span class="koboSpan" id="kobo.199.2">Different VR headsets might have their own technology and methods for tracking hands. </span><span class="koboSpan" id="kobo.199.3">Without a standardized system, developers would need to write unique code for each headset’s hand-tracking system, which can be time-consuming </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">and impractical.</span></span></li>
<li><span class="koboSpan" id="kobo.201.1">Staying in the </span><strong class="bold"><span class="koboSpan" id="kobo.202.1">OpenXR</span></strong><span class="koboSpan" id="kobo.203.1"> subtab, select the </span><strong class="bold"><span class="koboSpan" id="kobo.204.1">Hand Interaction Poses</span></strong><span class="koboSpan" id="kobo.205.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.206.1">Hand Tracking Subsystem</span></strong><span class="koboSpan" id="kobo.207.1"> checkboxes, regardless of which VR headset </span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">you have.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.209.1">When you check </span><strong class="bold"><span class="koboSpan" id="kobo.210.1">Hand Interaction Poses</span></strong><span class="koboSpan" id="kobo.211.1">, you are telling Unity to use a standard set of poses or gestures defined by the </span><strong class="bold"><span class="koboSpan" id="kobo.212.1">OpenXR</span></strong><span class="koboSpan" id="kobo.213.1"> standard. </span><span class="koboSpan" id="kobo.213.2">These include grabbing (grip), pointing (aim), pinching, and poking. </span><span class="koboSpan" id="kobo.213.3">So, instead of manually coding the detection of these gestures, Unity does it for you based on this standard. </span><span class="koboSpan" id="kobo.213.4">By selecting the </span><strong class="bold"><span class="koboSpan" id="kobo.214.1">Hand Tracking Subsystem</span></strong><span class="koboSpan" id="kobo.215.1"> checkbox, Unity uses the </span><strong class="bold"><span class="koboSpan" id="kobo.216.1">OpenXR</span></strong><span class="koboSpan" id="kobo.217.1"> standard to keep track of where the hands are and how they move. </span><span class="koboSpan" id="kobo.217.2">This subsystem is like the engine under the hood that keeps an eye on </span><span class="No-Break"><span class="koboSpan" id="kobo.218.1">hand movements.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.219.1">If you have a Meta Quest device, you must also select the </span><strong class="bold"><span class="koboSpan" id="kobo.220.1">Meta Hand Tracking Aim</span></strong><span class="koboSpan" id="kobo.221.1"> checkbox. </span><span class="koboSpan" id="kobo.221.2">This feature enhances the existing hand-tracking by also understanding the direction or aim of the hands, giving your VR app a better </span><a id="_idIndexMarker640"/><span class="koboSpan" id="kobo.222.1">sense of where users are pointing or what they might be trying to interact with. </span><span class="koboSpan" id="kobo.222.2">While our </span><strong class="bold"><span class="koboSpan" id="kobo.223.1">Hand Interaction Profile</span></strong><span class="koboSpan" id="kobo.224.1"> provides a base layer of understanding hand movements, these checkboxes dive deeper into gesture specifics, actual tracking, and </span><span class="No-Break"><span class="koboSpan" id="kobo.225.1">device-specific features.</span></span></p></li>
<li><span class="koboSpan" id="kobo.226.1">Now, let’s </span><a id="_idIndexMarker641"/><span class="koboSpan" id="kobo.227.1">add a simple plane to the scene functioning as a ground floor and a cube to interact with testing out hand-tracking. </span><span class="koboSpan" id="kobo.227.2">You can achieve this by right-clicking in the hierarchy and selecting </span><strong class="bold"><span class="koboSpan" id="kobo.228.1">3D Object</span></strong><span class="koboSpan" id="kobo.229.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.230.1">Plane</span></strong><span class="koboSpan" id="kobo.231.1">. </span><span class="koboSpan" id="kobo.231.2">Rename the plane to </span><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">Ground Floor</span></strong><span class="koboSpan" id="kobo.233.1"> and position it at the </span><span class="No-Break"><span class="koboSpan" id="kobo.234.1">origin (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.235.1">0</span></strong></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.236.1">,</span></strong></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.237.1">0</span></strong></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.238.1">,</span></strong></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">).</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.241.1">Repeat the previous step but instead of selecting </span><strong class="bold"><span class="koboSpan" id="kobo.242.1">Plane</span></strong><span class="koboSpan" id="kobo.243.1">, select </span><strong class="bold"><span class="koboSpan" id="kobo.244.1">Cube</span></strong><span class="koboSpan" id="kobo.245.1">. </span><span class="koboSpan" id="kobo.245.2">Rename </span><strong class="bold"><span class="koboSpan" id="kobo.246.1">Cube</span></strong><span class="koboSpan" id="kobo.247.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">Hand Tracking Cube</span></strong><span class="koboSpan" id="kobo.249.1">. </span><span class="koboSpan" id="kobo.249.2">Position it at (</span><strong class="source-inline"><span class="koboSpan" id="kobo.250.1">0</span></strong><span class="koboSpan" id="kobo.251.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.252.1">1.25</span></strong><span class="koboSpan" id="kobo.253.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.254.1">1</span></strong><span class="koboSpan" id="kobo.255.1">) and scale it to (</span><strong class="source-inline"><span class="koboSpan" id="kobo.256.1">0.1</span></strong><span class="koboSpan" id="kobo.257.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.258.1">0.1</span></strong><span class="koboSpan" id="kobo.259.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.260.1">0.1</span></strong><span class="koboSpan" id="kobo.261.1">). </span><span class="koboSpan" id="kobo.261.2">In the </span><strong class="bold"><span class="koboSpan" id="kobo.262.1">Inspector</span></strong><span class="koboSpan" id="kobo.263.1"> window of </span><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">Hand Tracking Cube</span></strong><span class="koboSpan" id="kobo.265.1">, click the </span><strong class="bold"><span class="koboSpan" id="kobo.266.1">Add Component</span></strong><span class="koboSpan" id="kobo.267.1"> button and type </span><strong class="source-inline"><span class="koboSpan" id="kobo.268.1">XR Grab Interactable</span></strong><span class="koboSpan" id="kobo.269.1"> in the search bar. </span><span class="koboSpan" id="kobo.269.2">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.270.1">XR Grab Interactable</span></strong><span class="koboSpan" id="kobo.271.1"> script by double-clicking on it. </span><span class="koboSpan" id="kobo.271.2">You should see that a </span><strong class="bold"><span class="koboSpan" id="kobo.272.1">Rigidbody</span></strong><span class="koboSpan" id="kobo.273.1"> component has been automatically added to </span><strong class="bold"><span class="koboSpan" id="kobo.274.1">InteractableCube</span></strong><span class="koboSpan" id="kobo.275.1">, alongside the </span><strong class="bold"><span class="koboSpan" id="kobo.276.1">XR Grab Interactable</span></strong><span class="koboSpan" id="kobo.277.1"> script. </span><span class="koboSpan" id="kobo.277.2">Inside the </span><strong class="bold"><span class="koboSpan" id="kobo.278.1">Rigidbody</span></strong><span class="koboSpan" id="kobo.279.1"> component, make sure that the </span><strong class="bold"><span class="koboSpan" id="kobo.280.1">Use Gravity</span></strong><span class="koboSpan" id="kobo.281.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.282.1">Is Kinematic</span></strong><span class="koboSpan" id="kobo.283.1"> checkboxes are selected so that our interaction with the cube is possible while obeying the laws </span><span class="No-Break"><span class="koboSpan" id="kobo.284.1">of gravity.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.285.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.286.1">If you don’t have access to a VR headset with hand-tracking capabilities, you can simply test this feature by using the XR Device Simulator, as detailed in the </span><em class="italic"><span class="koboSpan" id="kobo.287.1">Installing the XR Device Simulator</span></em><span class="koboSpan" id="kobo.288.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.289.1">Using the XR Device Simulator</span></em><span class="koboSpan" id="kobo.290.1"> sections of </span><a href="B20869_03.xhtml#_idTextAnchor009"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.291.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.292.1">. </span><span class="koboSpan" id="kobo.292.2">To switch to hand-tracking mode, simply press the </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.293.1">H</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.294.1"> key.</span></span></p>
<p><span class="koboSpan" id="kobo.295.1">It’s time to test out the scene using your VR headset. </span><span class="koboSpan" id="kobo.295.2">Start the scene as you typically would. </span><span class="koboSpan" id="kobo.295.3">You don’t even need to have the VR headset’s controllers on hand. </span><span class="koboSpan" id="kobo.295.4">Once the scene is running, adjust your head so that the external cameras on the VR headset are directed at </span><span class="No-Break"><span class="koboSpan" id="kobo.296.1">your hands.</span></span></p>
<p><span class="koboSpan" id="kobo.297.1">You </span><a id="_idIndexMarker642"/><span class="koboSpan" id="kobo.298.1">should notice</span><a id="_idIndexMarker643"/><span class="koboSpan" id="kobo.299.1"> that the controller visuals have been replaced by hand visuals, mirroring the exact position and movements of your real hands, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.300.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.301.1">.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer111">
<span class="koboSpan" id="kobo.303.1"><img alt="Figure 8.1 – The hand visuals you will see once you put away your controllers and direct your gaze toward your hands" src="image/B20869_08_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.304.1">Figure 8.1 – The hand visuals you will see once you put away your controllers and direct your gaze toward your hands</span></p>
<p><span class="koboSpan" id="kobo.305.1">Try moving each finger separately, shift your hands around, and even hide one hand behind your back. </span><span class="koboSpan" id="kobo.305.2">If everything was set up correctly and your VR headset fully supports hand-tracking, the virtual hands should mimic your real hand movements accurately. </span><span class="koboSpan" id="kobo.305.3">If you hide one hand behind your back, its corresponding virtual hand should </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">vanish too.</span></span></p>
<p><span class="koboSpan" id="kobo.307.1">Finally, let’s test the interaction with the cube in your scene using only hand-tracking. </span><span class="koboSpan" id="kobo.307.2">Aim your right hand’s laser pointer at the cube. </span><span class="koboSpan" id="kobo.307.3">Touch the tips of your right thumb and right index finger together, forming a near triangle shape, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.308.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.309.1">.2</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer112">
<span class="koboSpan" id="kobo.311.1"><img alt="Figure 8.2 – The overlayed hand visuals as you touch your right thumb and right index finger together in real life" src="image/B20869_08_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.312.1">Figure 8.2 – The overlayed hand visuals as you touch your right thumb and right index finger together in real life</span></p>
<p><span class="koboSpan" id="kobo.313.1">You </span><a id="_idIndexMarker644"/><span class="koboSpan" id="kobo.314.1">are now grabbing the cube. </span><span class="koboSpan" id="kobo.314.2">While maintaining this position, point in various directions and observe the</span><a id="_idIndexMarker645"/><span class="koboSpan" id="kobo.315.1"> cube </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">moving correspondingly.</span></span></p>
<p><span class="koboSpan" id="kobo.317.1">Congratulations! </span><span class="koboSpan" id="kobo.317.2">You’ve now achieved a similar interactive experience in your VR scene with hand-tracking as you would have using standard </span><span class="No-Break"><span class="koboSpan" id="kobo.318.1">VR controllers.</span></span></p>
<p><span class="koboSpan" id="kobo.319.1">To explore how the hand-tracking features of the XR Interaction Toolkit work with other types of objects such as UI elements or buttons, delve into </span><strong class="bold"><span class="koboSpan" id="kobo.320.1">Hands Interaction Demo</span></strong><span class="koboSpan" id="kobo.321.1">, which is available within the toolkit’s </span><strong class="bold"><span class="koboSpan" id="kobo.322.1">Samples</span></strong><span class="koboSpan" id="kobo.323.1"> area that we imported at the beginning. </span><span class="koboSpan" id="kobo.323.2">To access it, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.324.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.325.1">Head to </span><strong class="bold"><span class="koboSpan" id="kobo.326.1">Assets</span></strong><span class="koboSpan" id="kobo.327.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.328.1">Project</span></strong><span class="koboSpan" id="kobo.329.1"> window. </span><span class="koboSpan" id="kobo.329.2">From there, navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.330.1">Samples</span></strong><span class="koboSpan" id="kobo.331.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.332.1">XR Interaction Toolkit</span></strong><span class="koboSpan" id="kobo.333.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.334.1">Version Number</span></strong><span class="koboSpan" id="kobo.335.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.336.1">Hands Interaction Demo</span></strong><span class="koboSpan" id="kobo.337.1"> | </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.338.1">Runtime</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.339.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.340.1">Then, double-click on the </span><strong class="bold"><span class="koboSpan" id="kobo.341.1">HandsDemoScene</span></strong><span class="koboSpan" id="kobo.342.1"> Unity scene. </span><span class="koboSpan" id="kobo.342.2">If you prefer, you can quickly locate </span><strong class="bold"><span class="koboSpan" id="kobo.343.1">HandsDemoScene</span></strong><span class="koboSpan" id="kobo.344.1"> using the search bar in the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.345.1">Project</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.346.1"> window.</span></span></li>
<li><span class="koboSpan" id="kobo.347.1">Once</span><a id="_idIndexMarker646"/><span class="koboSpan" id="kobo.348.1"> you’ve </span><a id="_idIndexMarker647"/><span class="koboSpan" id="kobo.349.1">opened the scene in the Unity Editor, hit the </span><strong class="bold"><span class="koboSpan" id="kobo.350.1">Play</span></strong><span class="koboSpan" id="kobo.351.1"> button. </span><span class="koboSpan" id="kobo.351.2">This will let you experience firsthand how to engage with UI elements, press buttons, and even manipulate 3D objects using just </span><span class="No-Break"><span class="koboSpan" id="kobo.352.1">your hands.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.353.1">By now, you should feel like a hand-tracking expert. </span><span class="koboSpan" id="kobo.353.2">The next section will introduce you to another advanced concept of XR </span><span class="No-Break"><span class="koboSpan" id="kobo.354.1">development: eye-tracking.</span></span></p>
<h1 id="_idParaDest-156"><span class="koboSpan" id="kobo.355.1">Interacting with objects in XR experiences via eye- or head-tracking</span></h1>
<p><span class="koboSpan" id="kobo.356.1">In this section, you will </span><a id="_idIndexMarker648"/><span class="koboSpan" id="kobo.357.1">not only learn about eye-tracking itself and how it can enrich your XR experience, but you will also implement eye-tracking functionalities to your XR experiences, regardless of whether your VR headset supports eye-tracking </span><span class="No-Break"><span class="koboSpan" id="kobo.358.1">or not.</span></span></p>
<h2 id="_idParaDest-157"><span class="koboSpan" id="kobo.359.1">Understanding eye-tracking and potential use cases</span></h2>
<p><span class="koboSpan" id="kobo.360.1">From reading </span><a id="_idIndexMarker649"/><span class="koboSpan" id="kobo.361.1">a person’s intent to enhancing digital interactions, eye-tracking technology is revolutionizing how technologies of all kinds perceive and interpret </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">human behavior.</span></span></p>
<p><span class="koboSpan" id="kobo.363.1">The eyes are often dubbed the “windows to the soul” due to their ability to express and convey emotions, intent, and attention. </span><span class="koboSpan" id="kobo.363.2">Biologically speaking, several key aspects of the eyes play </span><span class="No-Break"><span class="koboSpan" id="kobo.364.1">into this:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.365.1">Pupil dilation</span></strong><span class="koboSpan" id="kobo.366.1">: Often a </span><a id="_idIndexMarker650"/><span class="koboSpan" id="kobo.367.1">subconscious response, the pupils can dilate or contract based on emotional states, levels of attention, or reactions to stimuli. </span><span class="koboSpan" id="kobo.367.2">For instance, someone’s pupils might dilate upon seeing someone they’re attracted to or contract when exposed to </span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">bright light.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.369.1">Saccades</span></strong><span class="koboSpan" id="kobo.370.1">: These </span><a id="_idIndexMarker651"/><span class="koboSpan" id="kobo.371.1">are rapid, jerky movements of the eyes when they change focus from one point to another. </span><span class="koboSpan" id="kobo.371.2">Often unnoticed by us, saccades play a pivotal role in how we gather visual information from </span><span class="No-Break"><span class="koboSpan" id="kobo.372.1">our surroundings.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.373.1">Blinking and micro-expressions</span></strong><span class="koboSpan" id="kobo.374.1">: The rate of blinking can indicate various states, from</span><a id="_idIndexMarker652"/><span class="koboSpan" id="kobo.375.1"> relaxation to stress. </span><span class="koboSpan" id="kobo.375.2">Furthermore, subtle movements around the eyes can give away fleeting emotions – these are known </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">as micro-expressions.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.377.1">Eye-tracking </span><a id="_idIndexMarker653"/><span class="koboSpan" id="kobo.378.1">technology revolves around monitoring and recording the eye’s movement and gaze points. </span><span class="koboSpan" id="kobo.378.2">Here’s how it</span><a id="_idIndexMarker654"/> <span class="No-Break"><span class="koboSpan" id="kobo.379.1">typically works:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.380.1">Light source</span></strong><span class="koboSpan" id="kobo.381.1">: Infrared light is directed toward the eyes. </span><span class="koboSpan" id="kobo.381.2">This light reflects off the cornea </span><span class="No-Break"><span class="koboSpan" id="kobo.382.1">and retina.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.383.1">Sensors and cameras</span></strong><span class="koboSpan" id="kobo.384.1">: These detect the reflected light off the eyes. </span><span class="koboSpan" id="kobo.384.2">Advanced systems might use multiple cameras from different angles to capture a three-dimensional view of the </span><span class="No-Break"><span class="koboSpan" id="kobo.385.1">eye’s movement.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.386.1">Data processing</span></strong><span class="koboSpan" id="kobo.387.1">: The raw data captured by the sensors is processed using algorithms to deduce the direction of the gaze and the point </span><span class="No-Break"><span class="koboSpan" id="kobo.388.1">of focus.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.389.1">Representation</span></strong><span class="koboSpan" id="kobo.390.1">: The gaze data is usually represented as a heatmap or gaze plot on the observed medium, be it a computer screen or a </span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">physical environment.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.392.1">Eye-tracking bridges the gap between the digital and real worlds by making virtual interactions more human-like. </span><span class="koboSpan" id="kobo.392.2">When social avatars in XR mimic real eye movements by blinking, gazing, and showing emotions, it deepens the sense of presence and immersion for </span><span class="No-Break"><span class="koboSpan" id="kobo.393.1">the user.</span></span></p>
<p><span class="koboSpan" id="kobo.394.1">Likewise, eye-tracking can drastically improve the understanding of user intent in the XR space. </span><span class="koboSpan" id="kobo.394.2">This means that XR environments can adapt in real time to the user’s focus. </span><span class="koboSpan" id="kobo.394.3">For example, a horror game could trigger a scare only when the user is looking in the right direction, maximizing the emotional impact. </span><span class="koboSpan" id="kobo.394.4">By analyzing where users look, how often, and for how long, developers can glean valuable insights. </span><span class="koboSpan" id="kobo.394.5">This can guide design choices, ensure important elements capture attention, and refine </span><span class="No-Break"><span class="koboSpan" id="kobo.395.1">user interfaces.</span></span></p>
<p><span class="koboSpan" id="kobo.396.1">Eye-tracking paves the way for more intuitive user interfaces. </span><span class="koboSpan" id="kobo.396.2">For instance, instead of navigating</span><a id="_idIndexMarker655"/><span class="koboSpan" id="kobo.397.1"> through menus using clunky hand controllers, users can simply gaze at a menu option to </span><span class="No-Break"><span class="koboSpan" id="kobo.398.1">select it.</span></span></p>
<p><span class="koboSpan" id="kobo.399.1">Fortunately, you can enrich your XR scene with eye-tracking, regardless of whether your VR headset supports it or not. </span><span class="koboSpan" id="kobo.399.2">If this sparks your curiosity, follow along with the tutorial in the </span><span class="No-Break"><span class="koboSpan" id="kobo.400.1">next section.</span></span></p>
<h2 id="_idParaDest-158"><span class="koboSpan" id="kobo.401.1">Setting up an XR scene to support eye- and head-tracking</span></h2>
<p><span class="koboSpan" id="kobo.402.1">The XR Interaction</span><a id="_idIndexMarker656"/><span class="koboSpan" id="kobo.403.1"> Toolkit supports eye- and head-tracking, enhancing user engagement in XR apps. </span><span class="koboSpan" id="kobo.403.2">While eye-tracking specifically captures where the user’s eyes are focused, head-tracking determines the direction the user’s head is pointing or gazing. </span><span class="koboSpan" id="kobo.403.3">Let’s try out these tracking techniques ourselves by revisiting the basic VR scene we created in our </span><span class="No-Break"><span class="koboSpan" id="kobo.404.1">last session.</span></span></p>
<p><span class="koboSpan" id="kobo.405.1">Some key components of the XR Interaction Toolkit’s eye- and head-tracking functionalities are already inside of our scene. </span><span class="koboSpan" id="kobo.405.2">To observe them, click on the arrow button next to the </span><strong class="bold"><span class="koboSpan" id="kobo.406.1">XR Interaction Hands Setup</span></strong><span class="koboSpan" id="kobo.407.1"> prefab in the </span><strong class="bold"><span class="koboSpan" id="kobo.408.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.409.1"> window of your project to see its children. </span><span class="koboSpan" id="kobo.409.2">Navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.410.1">XR Origin (XR Rig)</span></strong><span class="koboSpan" id="kobo.411.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.412.1">Camera Offset</span></strong><span class="koboSpan" id="kobo.413.1"> and enable the </span><strong class="bold"><span class="koboSpan" id="kobo.414.1">XR Gaze Interactor</span></strong><span class="koboSpan" id="kobo.415.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.416.1">Gaze Stabilized</span></strong><span class="koboSpan" id="kobo.417.1"> prefabs. </span><span class="koboSpan" id="kobo.417.2">These prefabs are not only part of the </span><strong class="bold"><span class="koboSpan" id="kobo.418.1">XR Interaction Hands Setup</span></strong><span class="koboSpan" id="kobo.419.1"> prefab, but also the </span><strong class="bold"><span class="koboSpan" id="kobo.420.1">XR Interaction Setup</span></strong><span class="koboSpan" id="kobo.421.1"> prefab, which you would use in your scene if you don’t </span><span class="No-Break"><span class="koboSpan" id="kobo.422.1">include hand-tracking.</span></span></p>
<p><span class="koboSpan" id="kobo.423.1">These prefabs work with all kinds of VR headsets, regardless of whether they support eye-tracking or not. </span><span class="koboSpan" id="kobo.423.2">If your headset doesn’t support eye-tracking, it will use the built-in head-tracking feature of the VR headset to estimate the </span><span class="No-Break"><span class="koboSpan" id="kobo.424.1">head gaze.</span></span></p>
<p><span class="koboSpan" id="kobo.425.1">While incorporating eye- and head-tracking into our scene is a significant step forward, it’s only part of the equation for crafting intuitive gaze-based interactions in XR. </span><span class="koboSpan" id="kobo.425.2">If it were that simple, there would be no need for this chapter, especially considering we’ve utilized this prefab in every VR scene throughout this book. </span><span class="koboSpan" id="kobo.425.3">To truly harness the capabilities of eye-tracking, we must also populate our scene with objects that can interact </span><a id="_idIndexMarker657"/><span class="koboSpan" id="kobo.426.1">with the </span><strong class="bold"><span class="koboSpan" id="kobo.427.1">XR Gaze Interactor</span></strong><span class="koboSpan" id="kobo.428.1"> prefab. </span><span class="koboSpan" id="kobo.428.2">Let’s create </span><span class="No-Break"><span class="koboSpan" id="kobo.429.1">these objects:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.430.1">To keep our scene organized, right-click on </span><strong class="source-inline"><span class="koboSpan" id="kobo.431.1">Hand Tracking Cube</span></strong><span class="koboSpan" id="kobo.432.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.433.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.434.1"> window and select </span><strong class="bold"><span class="koboSpan" id="kobo.435.1">Create Empty Parent</span></strong><span class="koboSpan" id="kobo.436.1">. </span><span class="koboSpan" id="kobo.436.2">Rename it </span><strong class="source-inline"><span class="koboSpan" id="kobo.437.1">Eye Tracking and Hand Tracking Interactables</span></strong><span class="koboSpan" id="kobo.438.1">. </span><span class="koboSpan" id="kobo.438.2">This GameObject will store two more cubes enabling different kinds of eye-tracking interactions alongside the cube we </span><span class="No-Break"><span class="koboSpan" id="kobo.439.1">already created.</span></span></li>
<li><span class="koboSpan" id="kobo.440.1">Let’s place all of the cubes on a very simple table. </span><span class="koboSpan" id="kobo.440.2">Create the table by clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.441.1">+</span></strong><span class="koboSpan" id="kobo.442.1"> button in the </span><strong class="bold"><span class="koboSpan" id="kobo.443.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.444.1"> window and selecting </span><strong class="bold"><span class="koboSpan" id="kobo.445.1">3D Object</span></strong><span class="koboSpan" id="kobo.446.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.447.1">Cube</span></strong><span class="koboSpan" id="kobo.448.1">. </span><span class="koboSpan" id="kobo.448.2">Rename the cube </span><strong class="source-inline"><span class="koboSpan" id="kobo.449.1">Table</span></strong><span class="koboSpan" id="kobo.450.1">, position it at (</span><strong class="source-inline"><span class="koboSpan" id="kobo.451.1">0</span></strong><span class="koboSpan" id="kobo.452.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.453.1">0.5</span></strong><span class="koboSpan" id="kobo.454.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.455.1">0</span></strong><span class="koboSpan" id="kobo.456.1">), and scale it to (</span><strong class="source-inline"><span class="koboSpan" id="kobo.457.1">3</span></strong><span class="koboSpan" id="kobo.458.1">, </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.459.1">1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.460.1">, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.461.1">1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">).</span></span></li>
<li><span class="koboSpan" id="kobo.463.1">Scale </span><strong class="source-inline"><span class="koboSpan" id="kobo.464.1">Hand Tracking Cube</span></strong><span class="koboSpan" id="kobo.465.1"> to (</span><strong class="source-inline"><span class="koboSpan" id="kobo.466.1">0.5</span></strong><span class="koboSpan" id="kobo.467.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.468.1">0.5</span></strong><span class="koboSpan" id="kobo.469.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.470.1">0.5</span></strong><span class="koboSpan" id="kobo.471.1">) and position it on </span><strong class="source-inline"><span class="koboSpan" id="kobo.472.1">Table</span></strong><span class="koboSpan" id="kobo.473.1"> by changing the values to (</span><strong class="source-inline"><span class="koboSpan" id="kobo.474.1">-1</span></strong><span class="koboSpan" id="kobo.475.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.476.1">0</span></strong><span class="koboSpan" id="kobo.477.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.478.1">0</span></strong><span class="koboSpan" id="kobo.479.1">). </span><span class="koboSpan" id="kobo.479.2">Also, make sure you uncheck the </span><strong class="bold"><span class="koboSpan" id="kobo.480.1">Is Kinematic</span></strong><span class="koboSpan" id="kobo.481.1"> checkbox to let it obey the laws of gravity once more. </span><span class="koboSpan" id="kobo.481.2">Right-click </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1">Hand Tracking Cube</span></strong><span class="koboSpan" id="kobo.483.1"> and select the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.484.1">Duplicate</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.485.1"> option.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.486.1">Repeat the duplication process one more time so that you have created two new cubes alongside </span><strong class="source-inline"><span class="koboSpan" id="kobo.487.1">Hand Tracking Cube</span></strong><span class="koboSpan" id="kobo.488.1">. </span><span class="koboSpan" id="kobo.488.2">Rename the two cubes </span><strong class="source-inline"><span class="koboSpan" id="kobo.489.1">Eye Tracking Cube 1</span></strong><span class="koboSpan" id="kobo.490.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.491.1">Eye Tracking Cube 2</span></strong><span class="koboSpan" id="kobo.492.1">. </span><span class="koboSpan" id="kobo.492.2">Change the position of </span><strong class="source-inline"><span class="koboSpan" id="kobo.493.1">Eye Tracking Cube 1</span></strong><span class="koboSpan" id="kobo.494.1"> to (</span><strong class="source-inline"><span class="koboSpan" id="kobo.495.1">0</span></strong><span class="koboSpan" id="kobo.496.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.497.1">0</span></strong><span class="koboSpan" id="kobo.498.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.499.1">0</span></strong><span class="koboSpan" id="kobo.500.1">) and the position of </span><strong class="source-inline"><span class="koboSpan" id="kobo.501.1">Eye Tracking Cube 2</span></strong><span class="koboSpan" id="kobo.502.1"> to (</span><strong class="source-inline"><span class="koboSpan" id="kobo.503.1">1</span></strong><span class="koboSpan" id="kobo.504.1">, </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.505.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.506.1">, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.507.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.508.1">).</span></span></p></li>
<li><span class="koboSpan" id="kobo.509.1">Next, let’s add the function that when the user’s gaze is pointing at </span><strong class="source-inline"><span class="koboSpan" id="kobo.510.1">Eye Tracking Cube 1</span></strong><span class="koboSpan" id="kobo.511.1">, a sphere will appear on top of it. </span><span class="koboSpan" id="kobo.511.2">We can add a sphere to our scene by selecting </span><strong class="source-inline"><span class="koboSpan" id="kobo.512.1">Eye Tracking Cube 1</span></strong><span class="koboSpan" id="kobo.513.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.514.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.515.1"> window, right-clicking on it, and navigating to </span><strong class="bold"><span class="koboSpan" id="kobo.516.1">3D Object</span></strong><span class="koboSpan" id="kobo.517.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.518.1">Sphere</span></strong><span class="koboSpan" id="kobo.519.1">. </span><span class="koboSpan" id="kobo.519.2">In the </span><strong class="bold"><span class="koboSpan" id="kobo.520.1">Inspector</span></strong><span class="koboSpan" id="kobo.521.1"> window of </span><strong class="bold"><span class="koboSpan" id="kobo.522.1">Sphere</span></strong><span class="koboSpan" id="kobo.523.1">, position it at (</span><strong class="source-inline"><span class="koboSpan" id="kobo.524.1">0</span></strong><span class="koboSpan" id="kobo.525.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.526.1">1</span></strong><span class="koboSpan" id="kobo.527.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.528.1">0</span></strong><span class="koboSpan" id="kobo.529.1">) and scale it to (</span><strong class="source-inline"><span class="koboSpan" id="kobo.530.1">0.5</span></strong><span class="koboSpan" id="kobo.531.1">, </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">0.5</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.533.1">, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.534.1">0.5</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.535.1">).</span></span></li>
<li><span class="koboSpan" id="kobo.536.1">Similar to </span><strong class="source-inline"><span class="koboSpan" id="kobo.537.1">Eye Tracking Cube 1</span></strong><span class="koboSpan" id="kobo.538.1">, some text should appear when the user of our VR scene looks at </span><strong class="source-inline"><span class="koboSpan" id="kobo.539.1">Eye Tracking Cube 2</span></strong><span class="koboSpan" id="kobo.540.1">. </span><span class="koboSpan" id="kobo.540.2">To make the interaction more complex, the text should change, depending on whether the user looks at the cube </span><a id="_idIndexMarker658"/><span class="koboSpan" id="kobo.541.1">and whether the cube is selected or deselected via a controller button press. </span><span class="koboSpan" id="kobo.541.2">To create the needed UI elements, right-click on </span><strong class="source-inline"><span class="koboSpan" id="kobo.542.1">Eye Tracking Cube 2</span></strong><span class="koboSpan" id="kobo.543.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.544.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.545.1"> window and select </span><strong class="bold"><span class="koboSpan" id="kobo.546.1">UI</span></strong><span class="koboSpan" id="kobo.547.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.548.1">Panel</span></strong><span class="koboSpan" id="kobo.549.1">. </span><span class="koboSpan" id="kobo.549.2">This will automatically add </span><strong class="bold"><span class="koboSpan" id="kobo.550.1">Canvas</span></strong><span class="koboSpan" id="kobo.551.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.552.1">Panel</span></strong><span class="koboSpan" id="kobo.553.1"> elements to your scene. </span><span class="koboSpan" id="kobo.553.2">Select </span><strong class="bold"><span class="koboSpan" id="kobo.554.1">Canvas</span></strong><span class="koboSpan" id="kobo.555.1"> and navigate to the </span><strong class="bold"><span class="koboSpan" id="kobo.556.1">Inspector</span></strong><span class="koboSpan" id="kobo.557.1"> window. </span><span class="koboSpan" id="kobo.557.2">Here, select the </span><strong class="bold"><span class="koboSpan" id="kobo.558.1">World Space</span></strong><span class="koboSpan" id="kobo.559.1"> option in the </span><strong class="bold"><span class="koboSpan" id="kobo.560.1">Render Mode</span></strong><span class="koboSpan" id="kobo.561.1"> drop-down menu of the </span><strong class="bold"><span class="koboSpan" id="kobo.562.1">Canvas</span></strong><span class="koboSpan" id="kobo.563.1"> component. </span><span class="koboSpan" id="kobo.563.2">Change its position to (</span><strong class="source-inline"><span class="koboSpan" id="kobo.564.1">0</span></strong><span class="koboSpan" id="kobo.565.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.566.1">-1</span></strong><span class="koboSpan" id="kobo.567.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.568.1">-1.01</span></strong><span class="koboSpan" id="kobo.569.1">) and its </span><strong class="bold"><span class="koboSpan" id="kobo.570.1">Width</span></strong><span class="koboSpan" id="kobo.571.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.572.1">Height</span></strong><span class="koboSpan" id="kobo.573.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.574.1">1</span></strong><span class="koboSpan" id="kobo.575.1">. </span><span class="koboSpan" id="kobo.575.2">Now, right-click on </span><strong class="bold"><span class="koboSpan" id="kobo.576.1">Panel</span></strong><span class="koboSpan" id="kobo.577.1"> and select </span><strong class="bold"><span class="koboSpan" id="kobo.578.1">UI</span></strong><span class="koboSpan" id="kobo.579.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.580.1">Text – TextMeshPro</span></strong><span class="koboSpan" id="kobo.581.1">. </span><span class="koboSpan" id="kobo.581.2">In the </span><strong class="bold"><span class="koboSpan" id="kobo.582.1">Inspector</span></strong><span class="koboSpan" id="kobo.583.1"> window of the newly created </span><strong class="bold"><span class="koboSpan" id="kobo.584.1">Text</span></strong><span class="koboSpan" id="kobo.585.1"> element, go to the </span><strong class="bold"><span class="koboSpan" id="kobo.586.1">TextMeshPro – Text (UI)</span></strong><span class="koboSpan" id="kobo.587.1"> component and insert </span><strong class="source-inline"><span class="koboSpan" id="kobo.588.1">No state detected!</span></strong><span class="koboSpan" id="kobo.589.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.590.1">Text Input</span></strong><span class="koboSpan" id="kobo.591.1"> field. </span><span class="koboSpan" id="kobo.591.2">You should never see this text message if you follow this tutorial precisely, so regard it as a helpful addition to test your scene later. </span><span class="koboSpan" id="kobo.591.3">Feel free to change some of the other settings to adjust the look of the text. </span><span class="koboSpan" id="kobo.591.4">Rename the text element </span><strong class="source-inline"><span class="koboSpan" id="kobo.592.1">Interactable Text</span></strong><span class="koboSpan" id="kobo.593.1">, scale it to </span><strong class="source-inline"><span class="koboSpan" id="kobo.594.1">0.005</span></strong><span class="koboSpan" id="kobo.595.1"> in all directions, and position it at (</span><strong class="source-inline"><span class="koboSpan" id="kobo.596.1">0.1</span></strong><span class="koboSpan" id="kobo.597.1">, </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.598.1">0.1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.599.1">,</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.600.1"> 0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.601.1">).</span></span></li>
<li><span class="koboSpan" id="kobo.602.1">Let’s add some colorful materials to our scene to make it more visually appealing. </span><span class="koboSpan" id="kobo.602.2">Specifically, we want to add two materials for our cubes – one for their default appearance and one if they are hovered over. </span><span class="koboSpan" id="kobo.602.3">So, we will create a material for </span><strong class="source-inline"><span class="koboSpan" id="kobo.603.1">Table</span></strong><span class="koboSpan" id="kobo.604.1"> and one for </span><strong class="bold"><span class="koboSpan" id="kobo.605.1">Sphere</span></strong><span class="koboSpan" id="kobo.606.1">. </span><span class="koboSpan" id="kobo.606.2">To accomplish this, right-click in the </span><strong class="bold"><span class="koboSpan" id="kobo.607.1">Projects</span></strong><span class="koboSpan" id="kobo.608.1"> window and select </span><strong class="bold"><span class="koboSpan" id="kobo.609.1">Create</span></strong><span class="koboSpan" id="kobo.610.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.611.1">Folder</span></strong><span class="koboSpan" id="kobo.612.1">. </span><span class="koboSpan" id="kobo.612.2">Rename this folder </span><strong class="source-inline"><span class="koboSpan" id="kobo.613.1">Materials</span></strong><span class="koboSpan" id="kobo.614.1"> and double-click on it to open it. </span><span class="koboSpan" id="kobo.614.2">Create a new material inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.615.1">Materials</span></strong><span class="koboSpan" id="kobo.616.1"> folder by right-clicking, selecting </span><strong class="bold"><span class="koboSpan" id="kobo.617.1">Create</span></strong><span class="koboSpan" id="kobo.618.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.619.1">Material</span></strong><span class="koboSpan" id="kobo.620.1">, and naming it </span><strong class="source-inline"><span class="koboSpan" id="kobo.621.1">HighlightedCube</span></strong><span class="koboSpan" id="kobo.622.1">. </span><span class="koboSpan" id="kobo.622.2">In the </span><strong class="bold"><span class="koboSpan" id="kobo.623.1">Inspector</span></strong><span class="koboSpan" id="kobo.624.1"> window of </span><strong class="source-inline"><span class="koboSpan" id="kobo.625.1">HighlightedCube</span></strong><span class="koboSpan" id="kobo.626.1">, click on the colored cell next to the </span><strong class="bold"><span class="koboSpan" id="kobo.627.1">Base Map</span></strong><span class="koboSpan" id="kobo.628.1"> property and select your preferred color for when the cube is highlighted. </span><span class="koboSpan" id="kobo.628.2">In our case, we only want the cube to become slightly brighter when it is highlighted, so we have chosen a yellow color (R: </span><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">240</span></strong><span class="koboSpan" id="kobo.630.1">, G: </span><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">240</span></strong><span class="koboSpan" id="kobo.632.1">, B: </span><strong class="source-inline"><span class="koboSpan" id="kobo.633.1">140</span></strong><span class="koboSpan" id="kobo.634.1">) with an </span><strong class="bold"><span class="koboSpan" id="kobo.635.1">Alpha</span></strong><span class="koboSpan" id="kobo.636.1"> value </span><span class="No-Break"><span class="koboSpan" id="kobo.637.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.638.1">70</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.639.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.640.1">Right-click inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.641.1">Materials</span></strong><span class="koboSpan" id="kobo.642.1"> folder and select </span><strong class="bold"><span class="koboSpan" id="kobo.643.1">Create</span></strong><span class="koboSpan" id="kobo.644.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.645.1">Material</span></strong><span class="koboSpan" id="kobo.646.1"> to create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.647.1">CubeMaterial</span></strong><span class="koboSpan" id="kobo.648.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.649.1">TableMaterial</span></strong><span class="koboSpan" id="kobo.650.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.651.1">SphereMaterial</span></strong><span class="koboSpan" id="kobo.652.1"> materials. </span><span class="koboSpan" id="kobo.652.2">For </span><strong class="source-inline"><span class="koboSpan" id="kobo.653.1">CubeMaterial</span></strong><span class="koboSpan" id="kobo.654.1">, we chose a sophisticated red color (R: </span><strong class="source-inline"><span class="koboSpan" id="kobo.655.1">186</span></strong><span class="koboSpan" id="kobo.656.1">, G: </span><strong class="source-inline"><span class="koboSpan" id="kobo.657.1">6</span></strong><span class="koboSpan" id="kobo.658.1">, B: </span><strong class="source-inline"><span class="koboSpan" id="kobo.659.1">6</span></strong><span class="koboSpan" id="kobo.660.1">); </span><strong class="source-inline"><span class="koboSpan" id="kobo.661.1">TableMaterial</span></strong><span class="koboSpan" id="kobo.662.1"> has been assigned a dark brown color (R: </span><strong class="source-inline"><span class="koboSpan" id="kobo.663.1">58</span></strong><span class="koboSpan" id="kobo.664.1">, G: </span><strong class="source-inline"><span class="koboSpan" id="kobo.665.1">40</span></strong><span class="koboSpan" id="kobo.666.1">, B: </span><strong class="source-inline"><span class="koboSpan" id="kobo.667.1">3</span></strong><span class="koboSpan" id="kobo.668.1">); and for </span><strong class="source-inline"><span class="koboSpan" id="kobo.669.1">SphereMaterial</span></strong><span class="koboSpan" id="kobo.670.1">, we selected a blue color (R: </span><strong class="source-inline"><span class="koboSpan" id="kobo.671.1">29</span></strong><span class="koboSpan" id="kobo.672.1">, G: </span><strong class="source-inline"><span class="koboSpan" id="kobo.673.1">120</span></strong><span class="koboSpan" id="kobo.674.1">, B: </span><strong class="source-inline"><span class="koboSpan" id="kobo.675.1">241</span></strong><span class="koboSpan" id="kobo.676.1">) and made it appear metallic by setting the </span><strong class="bold"><span class="koboSpan" id="kobo.677.1">Metallic Map</span></strong><span class="koboSpan" id="kobo.678.1"> slider to </span><strong class="source-inline"><span class="koboSpan" id="kobo.679.1">1</span></strong><span class="koboSpan" id="kobo.680.1">. </span><span class="koboSpan" id="kobo.680.2">All of these materials have an </span><strong class="bold"><span class="koboSpan" id="kobo.681.1">Alpha</span></strong><span class="koboSpan" id="kobo.682.1"> value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.683.1">255</span></strong><span class="koboSpan" id="kobo.684.1">. </span><span class="koboSpan" id="kobo.684.2">Apply </span><strong class="source-inline"><span class="koboSpan" id="kobo.685.1">CubeMaterial</span></strong><span class="koboSpan" id="kobo.686.1"> to all three cubes in the</span><a id="_idIndexMarker659"/><span class="koboSpan" id="kobo.687.1"> scene by simply dragging and dropping the material from the </span><strong class="bold"><span class="koboSpan" id="kobo.688.1">Project</span></strong><span class="koboSpan" id="kobo.689.1"> window into the cubes in the scene. </span><span class="koboSpan" id="kobo.689.2">Do the same for </span><strong class="source-inline"><span class="koboSpan" id="kobo.690.1">TableMaterial</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.691.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.692.1">SphereMaterial</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.693.1">.</span></span></li>
</ol>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.694.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.695.1">.3</span></em><span class="koboSpan" id="kobo.696.1"> shows what your VR scene should currently </span><span class="No-Break"><span class="koboSpan" id="kobo.697.1">look like.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer113">
<span class="koboSpan" id="kobo.698.1"><img alt="Figure 8.3 – The current status of the VR scene for eye-tracking" src="image/B20869_08_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.699.1">Figure 8.3 – The current status of the VR scene for eye-tracking</span></p>
<p><span class="koboSpan" id="kobo.700.1">In the next section, you</span><a id="_idIndexMarker660"/><span class="koboSpan" id="kobo.701.1"> will learn how you can interact with these cubes via eye or </span><span class="No-Break"><span class="koboSpan" id="kobo.702.1">head gaze.</span></span></p>
<h2 id="_idParaDest-159"><span class="koboSpan" id="kobo.703.1">Interacting with objects via eye and head gaze using the XR Interaction Toolkit</span></h2>
<p><span class="koboSpan" id="kobo.704.1">When a </span><a id="_idIndexMarker661"/><span class="koboSpan" id="kobo.705.1">user looks at one of the two cubes we created for gaze-tracking, they should be able to interact with them as described in the previous section. </span><span class="koboSpan" id="kobo.705.2">To accomplish this, we need to adjust some components of </span><span class="No-Break"><span class="koboSpan" id="kobo.706.1">our scene.</span></span></p>
<p><span class="koboSpan" id="kobo.707.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.708.1">XR Gaze Interactor</span></strong><span class="koboSpan" id="kobo.709.1"> prefab will only interact with objects in a scene that have either an </span><strong class="bold"><span class="koboSpan" id="kobo.710.1">XR Simple Interactable</span></strong><span class="koboSpan" id="kobo.711.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.712.1">XR Grab Interactable</span></strong><span class="koboSpan" id="kobo.713.1"> script attached to them and that have the </span><strong class="bold"><span class="koboSpan" id="kobo.714.1">Allow Gaze Interaction</span></strong><span class="koboSpan" id="kobo.715.1"> checkbox of the respective script enabled. </span><span class="koboSpan" id="kobo.715.2">This means we must add either one of these two scripts to our two </span><span class="No-Break"><span class="koboSpan" id="kobo.716.1">new cubes.</span></span></p>
<p><span class="koboSpan" id="kobo.717.1">In our case, we will add the </span><strong class="bold"><span class="koboSpan" id="kobo.718.1">XR Simple Interactable</span></strong><span class="koboSpan" id="kobo.719.1"> script to each of the two eye-tracking cubes. </span><span class="koboSpan" id="kobo.719.2">We need to perform the following three steps to </span><span class="No-Break"><span class="koboSpan" id="kobo.720.1">achieve this:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.721.1">Press </span><em class="italic"><span class="koboSpan" id="kobo.722.1">Ctrl</span></em><span class="koboSpan" id="kobo.723.1">/</span><em class="italic"><span class="koboSpan" id="kobo.724.1">Cmd</span></em><span class="koboSpan" id="kobo.725.1"> and select both cubes in the </span><strong class="bold"><span class="koboSpan" id="kobo.726.1">Scene </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.727.1">Hierarchy</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.728.1"> window.</span></span></li>
<li><span class="koboSpan" id="kobo.729.1">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.730.1">Add component</span></strong><span class="koboSpan" id="kobo.731.1"> button in the </span><strong class="bold"><span class="koboSpan" id="kobo.732.1">Inspector</span></strong><span class="koboSpan" id="kobo.733.1"> window, type </span><strong class="source-inline"><span class="koboSpan" id="kobo.734.1">XR Simple Interactable</span></strong><span class="koboSpan" id="kobo.735.1"> into the search bar, and double-click on the script to add it to </span><span class="No-Break"><span class="koboSpan" id="kobo.736.1">both cubes.</span></span></li>
<li><span class="koboSpan" id="kobo.737.1">Click the arrow next to the </span><strong class="bold"><span class="koboSpan" id="kobo.738.1">Gaze Configuration</span></strong><span class="koboSpan" id="kobo.739.1"> property of the </span><strong class="bold"><span class="koboSpan" id="kobo.740.1">XR Simple Interactable</span></strong><span class="koboSpan" id="kobo.741.1"> script component to open the gaze-related properties. </span><span class="koboSpan" id="kobo.741.2">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.742.1">Allow Gaze </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.743.1">Interaction</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.744.1"> checkbox.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.745.1">Now, we need to specify how we can interact with our two cubes via gaze. </span><span class="koboSpan" id="kobo.745.2">Let’s start with the first cube. </span><span class="koboSpan" id="kobo.745.3">Remember that our goal is to make the blue sphere appear on top of the first cube only when our eyes, head, or controllers are directed toward it. </span><span class="koboSpan" id="kobo.745.4">We can add this logic to the cube by following </span><span class="No-Break"><span class="koboSpan" id="kobo.746.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.747.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.748.1">Inspector</span></strong><span class="koboSpan" id="kobo.749.1"> window of </span><strong class="source-inline"><span class="koboSpan" id="kobo.750.1">Eye Tracking Cube 1</span></strong><span class="koboSpan" id="kobo.751.1">, navigate to the end of the </span><strong class="bold"><span class="koboSpan" id="kobo.752.1">XR Simple Interactable</span></strong><span class="koboSpan" id="kobo.753.1"> script component. </span><span class="koboSpan" id="kobo.753.2">Click on the arrow next to </span><strong class="bold"><span class="koboSpan" id="kobo.754.1">Interactable Events</span></strong><span class="koboSpan" id="kobo.755.1"> to open it. </span><span class="koboSpan" id="kobo.755.2">Add two new events to the </span><strong class="bold"><span class="koboSpan" id="kobo.756.1">First Hover Entered</span></strong><span class="koboSpan" id="kobo.757.1"> function of </span><strong class="bold"><span class="koboSpan" id="kobo.758.1">First/Last </span></strong><strong class="bold"><span class="koboSpan" id="kobo.759.1">Hover</span></strong><span class="koboSpan" id="kobo.760.1"> by clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.761.1">+</span></strong><span class="koboSpan" id="kobo.762.1"> button </span><span class="No-Break"><span class="koboSpan" id="kobo.763.1">two times.</span></span></li>
<li><span class="koboSpan" id="kobo.764.1">Let’s fill in the missing information of our newly created interactable events. </span><span class="koboSpan" id="kobo.764.2">As indicated by the </span><strong class="bold"><span class="koboSpan" id="kobo.765.1">None (Object)</span></strong><span class="koboSpan" id="kobo.766.1"> cell, neither event is currently assigned to a GameObject. </span><span class="koboSpan" id="kobo.766.2">To change this, drag and drop </span><strong class="source-inline"><span class="koboSpan" id="kobo.767.1">Eye Tracking Cube 1</span></strong><span class="koboSpan" id="kobo.768.1"> from the </span><strong class="bold"><span class="koboSpan" id="kobo.769.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.770.1"> window into the first </span><strong class="bold"><span class="koboSpan" id="kobo.771.1">None (Object)</span></strong><span class="koboSpan" id="kobo.772.1"> cell. </span><span class="koboSpan" id="kobo.772.2">Repeat this for the second event by assigning it </span><span class="No-Break"><span class="koboSpan" id="kobo.773.1">to </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.774.1">Sphere</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.775.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.776.1">To </span><a id="_idIndexMarker662"/><span class="koboSpan" id="kobo.777.1">change the material of </span><strong class="source-inline"><span class="koboSpan" id="kobo.778.1">Eye Tracking Cube 1</span></strong><span class="koboSpan" id="kobo.779.1"> when it is hovered over via controllers, the eyes, or the head, we must assign the necessary functions to each interactable event and provide them with the needed parameters. </span><span class="koboSpan" id="kobo.779.2">Select </span><strong class="bold"><span class="koboSpan" id="kobo.780.1">MeshRenderer</span></strong><span class="koboSpan" id="kobo.781.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.782.1">Material material</span></strong><span class="koboSpan" id="kobo.783.1"> for the </span><strong class="bold"><span class="koboSpan" id="kobo.784.1">No Function</span></strong><span class="koboSpan" id="kobo.785.1"> cell of the first event. </span><span class="koboSpan" id="kobo.785.2">A new cell will appear where we can assign the material the cube should have once it is hovered over. </span><span class="koboSpan" id="kobo.785.3">Click on the rounded dot icon next to the new cell. </span><span class="koboSpan" id="kobo.785.4">By doing so, a new window will open, where you can search for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.786.1">HighlightedCube</span></strong><span class="koboSpan" id="kobo.787.1"> material via the search bar and select it. </span><span class="koboSpan" id="kobo.787.2">For the </span><strong class="bold"><span class="koboSpan" id="kobo.788.1">No Function</span></strong><span class="koboSpan" id="kobo.789.1"> cell of the second event, select </span><strong class="bold"><span class="koboSpan" id="kobo.790.1">GameObject</span></strong><span class="koboSpan" id="kobo.791.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.792.1">SetActive (bool)</span></strong><span class="koboSpan" id="kobo.793.1"> and be sure that the newly appeared checkbox is checked. </span><span class="koboSpan" id="kobo.793.2">This ensures that when you hover over </span><strong class="source-inline"><span class="koboSpan" id="kobo.794.1">Eye Tracking Cube 1</span></strong><span class="koboSpan" id="kobo.795.1"> with your controllers, eyes, or head, you will see the blue sphere appearing on top </span><span class="No-Break"><span class="koboSpan" id="kobo.796.1">of it.</span></span></li>
<li><span class="koboSpan" id="kobo.797.1">Once your controllers, eyes, or head are no longer directed toward </span><strong class="source-inline"><span class="koboSpan" id="kobo.798.1">Eye Tracking Cube 1</span></strong><span class="koboSpan" id="kobo.799.1">, the cube’s material should change back to its default color and the sphere should disappear. </span><span class="koboSpan" id="kobo.799.2">To accomplish this, go to the </span><strong class="bold"><span class="koboSpan" id="kobo.800.1">Last Hover Exited</span></strong><span class="koboSpan" id="kobo.801.1"> function of </span><strong class="bold"><span class="koboSpan" id="kobo.802.1">First/Last Hover</span></strong><span class="koboSpan" id="kobo.803.1"> and press the </span><strong class="bold"><span class="koboSpan" id="kobo.804.1">+</span></strong><span class="koboSpan" id="kobo.805.1"> icon two times to create two new interactable events.</span><a id="_idTextAnchor027"/><span class="koboSpan" id="kobo.806.1"> Once again, drag and drop </span><strong class="source-inline"><span class="koboSpan" id="kobo.807.1">Eye Tracking Cube 1</span></strong><span class="koboSpan" id="kobo.808.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.809.1">Sphere</span></strong><span class="koboSpan" id="kobo.810.1"> from the </span><strong class="bold"><span class="koboSpan" id="kobo.811.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.812.1"> window into the </span><strong class="bold"><span class="koboSpan" id="kobo.813.1">None (Object)</span></strong><span class="koboSpan" id="kobo.814.1"> cells to assign both events to their respective GameObjects. </span><span class="koboSpan" id="kobo.814.2">Assign the </span><strong class="bold"><span class="koboSpan" id="kobo.815.1">MeshRenderer</span></strong><span class="koboSpan" id="kobo.816.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.817.1">Material material</span></strong><span class="koboSpan" id="kobo.818.1"> function to the first event by clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.819.1">No Function</span></strong><span class="koboSpan" id="kobo.820.1"> cell. </span><span class="koboSpan" id="kobo.820.2">To change the cube’s color back to red, press the dot icon next to the newly appeared cell, search for </span><strong class="source-inline"><span class="koboSpan" id="kobo.821.1">CubeMaterial</span></strong><span class="koboSpan" id="kobo.822.1">, and select it. </span><span class="koboSpan" id="kobo.822.2">Repeat this process for </span><strong class="bold"><span class="koboSpan" id="kobo.823.1">Sphere</span></strong><span class="koboSpan" id="kobo.824.1"> by assigning it to the </span><strong class="bold"><span class="koboSpan" id="kobo.825.1">GameObject</span></strong><span class="koboSpan" id="kobo.826.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.827.1">SetActive (bool)</span></strong><span class="koboSpan" id="kobo.828.1"> function again and ensuring the newly appeared checkbox is not checked </span><span class="No-Break"><span class="koboSpan" id="kobo.829.1">this time.</span></span></li>
<li><span class="koboSpan" id="kobo.830.1">To</span><a id="_idIndexMarker663"/><span class="koboSpan" id="kobo.831.1"> evaluate the logic we’ve put in place so far, it’s necessary to either disable or hide the blue </span><strong class="bold"><span class="koboSpan" id="kobo.832.1">Sphere</span></strong><span class="koboSpan" id="kobo.833.1"> object in our scene. </span><span class="koboSpan" id="kobo.833.2">This ensures that upon initial entry into the scene, the user doesn’t see it. </span><span class="koboSpan" id="kobo.833.3">You can achieve this by selecting </span><strong class="bold"><span class="koboSpan" id="kobo.834.1">Sphere</span></strong><span class="koboSpan" id="kobo.835.1"> within the </span><strong class="bold"><span class="koboSpan" id="kobo.836.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.837.1"> window and then deselecting the checkbox next to its name at the top of the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.838.1">Inspector</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.839.1"> window.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.840.1">Voilà – we’ve completed all the required steps to add a powerful eye-tracking capability to our first cube. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.841.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.842.1">.4</span></em><span class="koboSpan" id="kobo.843.1"> shows what the cube should look like once your eyes or head are directed </span><span class="No-Break"><span class="koboSpan" id="kobo.844.1">toward it.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer114">
<span class="koboSpan" id="kobo.845.1"><img alt="Figure 8.4 – The highlighted cube and blue sphere appear because of your eyes or head hovering over the cube" src="image/B20869_08_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.846.1">Figure 8.4 – The highlighted cube and blue sphere appear because of your eyes or head hovering over the cube</span></p>
<p><span class="koboSpan" id="kobo.847.1">If you are working with head gaze, you will only see the blue sphere when the cube is positioned at the center of your current field of view when you are wearing a VR headset or using the XR Device Simulator. </span><span class="koboSpan" id="kobo.847.2">You can observe the same effect when your controllers are pointing at </span><span class="No-Break"><span class="koboSpan" id="kobo.848.1">the cube.</span></span></p>
<p><span class="koboSpan" id="kobo.849.1">We will add an even more powerful interaction to our second cube. </span><span class="koboSpan" id="kobo.849.2">Like the first cube, a text element will appear underneath the second cube when the eyes, head, or controllers are directed toward it. </span><span class="koboSpan" id="kobo.849.3">This time, however, the displayed text itself will change </span><a id="_idIndexMarker664"/><span class="koboSpan" id="kobo.850.1">based on whether the cube is hovered over, selected, or deselected using a combination of eye, head, and controller interactions. </span><span class="koboSpan" id="kobo.850.2">Follow these steps to accomplish </span><span class="No-Break"><span class="koboSpan" id="kobo.851.1">this goal:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.852.1">Repeat all the steps you performed for </span><strong class="source-inline"><span class="koboSpan" id="kobo.853.1">Eye Tracking Cube 1</span></strong><span class="koboSpan" id="kobo.854.1"> with the following modification: drag and drop </span><strong class="source-inline"><span class="koboSpan" id="kobo.855.1">Eye Tracking Cube 2</span></strong><span class="koboSpan" id="kobo.856.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.857.1">Canvas</span></strong><span class="koboSpan" id="kobo.858.1"> into the two events of the </span><strong class="bold"><span class="koboSpan" id="kobo.859.1">First Hover Entered</span></strong><span class="koboSpan" id="kobo.860.1"> function and the </span><strong class="bold"><span class="koboSpan" id="kobo.861.1">Last Hover </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.862.1">Exited</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.863.1"> function.</span></span></li>
<li><span class="koboSpan" id="kobo.864.1">So far, the cube’s color changes and the text element becomes visible once the cube is hovered over. </span><span class="koboSpan" id="kobo.864.2">However, the text itself should also change to </span><strong class="bold"><span class="koboSpan" id="kobo.865.1">Hovered</span></strong><span class="koboSpan" id="kobo.866.1"> once this event is triggered. </span><span class="koboSpan" id="kobo.866.2">To accomplish this, add a third event to the </span><strong class="bold"><span class="koboSpan" id="kobo.867.1">First Hover Entered</span></strong><span class="koboSpan" id="kobo.868.1"> function by clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.869.1">+</span></strong><span class="koboSpan" id="kobo.870.1"> icon. </span><span class="koboSpan" id="kobo.870.2">Drag and drop </span><strong class="source-inline"><span class="koboSpan" id="kobo.871.1">Interactable Text</span></strong><span class="koboSpan" id="kobo.872.1"> from the </span><strong class="bold"><span class="koboSpan" id="kobo.873.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.874.1"> window into the third event’s </span><strong class="bold"><span class="koboSpan" id="kobo.875.1">None (Object)</span></strong><span class="koboSpan" id="kobo.876.1"> cell. </span><span class="koboSpan" id="kobo.876.2">Assign the </span><strong class="bold"><span class="koboSpan" id="kobo.877.1">TextMeshProUGUI</span></strong><span class="koboSpan" id="kobo.878.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.879.1">string text</span></strong><span class="koboSpan" id="kobo.880.1"> function to this event and type </span><strong class="source-inline"><span class="koboSpan" id="kobo.881.1">Hovered</span></strong><span class="koboSpan" id="kobo.882.1"> into the newly appeared empty </span><span class="No-Break"><span class="koboSpan" id="kobo.883.1">text cell.</span></span></li>
<li><span class="koboSpan" id="kobo.884.1">When the cube is hovered over and selected by pressing the controller button, which is typically reserved for moving objects around, the text displayed underneath the cube should change. </span><span class="koboSpan" id="kobo.884.2">To implement this logic, scroll down to </span><strong class="bold"><span class="koboSpan" id="kobo.885.1">First/Last Select</span></strong><span class="koboSpan" id="kobo.886.1"> and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.887.1">+</span></strong><span class="koboSpan" id="kobo.888.1"> icon of the </span><strong class="bold"><span class="koboSpan" id="kobo.889.1">First Select Entered</span></strong><span class="koboSpan" id="kobo.890.1"> function. </span><span class="koboSpan" id="kobo.890.2">Drag and drop the </span><strong class="source-inline"><span class="koboSpan" id="kobo.891.1">Interactable Text</span></strong><span class="koboSpan" id="kobo.892.1"> element from the </span><strong class="bold"><span class="koboSpan" id="kobo.893.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.894.1"> window into the </span><strong class="bold"><span class="koboSpan" id="kobo.895.1">None (Object)</span></strong><span class="koboSpan" id="kobo.896.1"> cell and assign the </span><strong class="bold"><span class="koboSpan" id="kobo.897.1">TextMeshProUGUI</span></strong><span class="koboSpan" id="kobo.898.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.899.1">string text</span></strong><span class="koboSpan" id="kobo.900.1"> function to it. </span><span class="koboSpan" id="kobo.900.2">Type the word </span><strong class="source-inline"><span class="koboSpan" id="kobo.901.1">Selected</span></strong><span class="koboSpan" id="kobo.902.1"> into the empty </span><span class="No-Break"><span class="koboSpan" id="kobo.903.1">text field.</span></span></li>
<li><span class="koboSpan" id="kobo.904.1">Once the cube is no longer selected via controllers, the text should change again. </span><span class="koboSpan" id="kobo.904.2">This can be accomplished by adding a new event to the </span><strong class="bold"><span class="koboSpan" id="kobo.905.1">Last Select Exited</span></strong><span class="koboSpan" id="kobo.906.1"> function of </span><strong class="bold"><span class="koboSpan" id="kobo.907.1">First/Last Select</span></strong><span class="koboSpan" id="kobo.908.1">. </span><span class="koboSpan" id="kobo.908.2">After clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.909.1">+</span></strong><span class="koboSpan" id="kobo.910.1"> icon, assign </span><strong class="source-inline"><span class="koboSpan" id="kobo.911.1">Interactable Text</span></strong><span class="koboSpan" id="kobo.912.1"> to the </span><strong class="bold"><span class="koboSpan" id="kobo.913.1">None (Object)</span></strong><span class="koboSpan" id="kobo.914.1"> cell per drag-and-drop and, as before, choose </span><strong class="bold"><span class="koboSpan" id="kobo.915.1">TextMeshProUGUI</span></strong><span class="koboSpan" id="kobo.916.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.917.1">string text</span></strong><span class="koboSpan" id="kobo.918.1"> and insert </span><strong class="source-inline"><span class="koboSpan" id="kobo.919.1">Deselected</span></strong><span class="koboSpan" id="kobo.920.1"> into the newly created </span><span class="No-Break"><span class="koboSpan" id="kobo.921.1">text cell.</span></span></li>
<li><span class="koboSpan" id="kobo.922.1">Before testing out the logic of the second cube, hide it in the scene by deselecting it in its </span><strong class="bold"><span class="koboSpan" id="kobo.923.1">Inspector</span></strong><span class="koboSpan" id="kobo.924.1"> window, as you did with the </span><span class="No-Break"><span class="koboSpan" id="kobo.925.1">first cube.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.926.1">It is time to </span><a id="_idIndexMarker665"/><span class="koboSpan" id="kobo.927.1">try out interacting with this cube. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.928.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.929.1">.5</span></em><span class="koboSpan" id="kobo.930.1"> shows the cube in its three interactable states – being hovered over, being hovered over plus selected, and being hovered over </span><span class="No-Break"><span class="koboSpan" id="kobo.931.1">but deselected.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer115">
<span class="koboSpan" id="kobo.932.1"><img alt="Figure 8.5 – The cube in its three interactable states" src="image/B20869_08_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.933.1">Figure 8.5 – The cube in its three interactable states</span></p>
<p><span class="koboSpan" id="kobo.934.1">Hurray – you </span><a id="_idIndexMarker666"/><span class="koboSpan" id="kobo.935.1">have successfully added different eye-tracking interactions to your scene! </span><span class="koboSpan" id="kobo.935.2">In the next section, you will learn how to set up a multiplayer XR game </span><span class="No-Break"><span class="koboSpan" id="kobo.936.1">in Unity.</span></span></p>
<h1 id="_idParaDest-160"><span class="koboSpan" id="kobo.937.1">Building a VR multiplayer application</span></h1>
<p><span class="koboSpan" id="kobo.938.1">In this section, you’ll </span><a id="_idIndexMarker667"/><span class="koboSpan" id="kobo.939.1">craft your first VR multiplayer application. </span><span class="koboSpan" id="kobo.939.2">Though it involves a fair amount of C# coding, you’ve gained enough knowledge to smoothly navigate this tutorial. </span><span class="koboSpan" id="kobo.939.3">But before we dive in, let’s pause and delve into the nuances of constructing multiplayer applications, the necessary components, and the appeal of multiplayer experiences within the </span><span class="No-Break"><span class="koboSpan" id="kobo.940.1">XR context.</span></span></p>
<h2 id="_idParaDest-161"><span class="koboSpan" id="kobo.941.1">Understanding multiplayer applications and multiplayer networking systems</span></h2>
<p><span class="koboSpan" id="kobo.942.1">At its core, a </span><strong class="bold"><span class="koboSpan" id="kobo.943.1">multiplayer</span></strong><span class="koboSpan" id="kobo.944.1"> experience allows multiple users to interact within a shared digital </span><a id="_idIndexMarker668"/><span class="koboSpan" id="kobo.945.1">environment simultaneously. </span><span class="koboSpan" id="kobo.945.2">This environment can range from simple text-based interfaces to complex virtual realities. </span><span class="koboSpan" id="kobo.945.3">The key components of a multiplayer experience typically include servers that host the game environment, networking systems that handle data synchronization and communication, player avatars, and game logic that governs </span><span class="No-Break"><span class="koboSpan" id="kobo.946.1">interaction rules.</span></span></p>
<p><span class="koboSpan" id="kobo.947.1">Adding a multiplayer mode to a game can make it more unpredictable due to human behaviors and decision-making. </span><span class="koboSpan" id="kobo.947.2">By contrast, </span><strong class="bold"><span class="koboSpan" id="kobo.948.1">single-player</span></strong><span class="koboSpan" id="kobo.949.1"> modes are typically more controlled and can be designed around a </span><span class="No-Break"><span class="koboSpan" id="kobo.950.1">predefined narrative.</span></span></p>
<p><span class="koboSpan" id="kobo.951.1">By adding</span><a id="_idIndexMarker669"/><span class="koboSpan" id="kobo.952.1"> multiplayer capabilities to XR, users are encouraged to jointly engage in tasks, challenges, or experiences, making the environment feel more alive and dynamic. </span><span class="koboSpan" id="kobo.952.2">Examples include cooperative puzzle-solving, virtual team-building exercises, and </span><span class="No-Break"><span class="koboSpan" id="kobo.953.1">joint exploration.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.954.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.955.1">If you are serious about becoming an XR developer, you should feel comfortable creating multiplayer XR experiences. </span><span class="koboSpan" id="kobo.955.2">Virtual meetups in forums such as VR Chat are among the most popular XR applications to date. </span><span class="koboSpan" id="kobo.955.3">These meetups underline the desire of people to hang out with other real humans in virtual worlds, instead of being only surrounded by </span><span class="No-Break"><span class="koboSpan" id="kobo.956.1">virtual assets.</span></span></p>
<p><span class="koboSpan" id="kobo.957.1">The most crucial part of any multiplayer </span><a id="_idIndexMarker670"/><span class="koboSpan" id="kobo.958.1">game is the </span><strong class="bold"><span class="koboSpan" id="kobo.959.1">multiplayer networking system</span></strong><span class="koboSpan" id="kobo.960.1">. </span><span class="koboSpan" id="kobo.960.2">At its essence, a multiplayer networking system is the digital backbone that enables various players to interact seamlessly within a shared environment. </span><span class="koboSpan" id="kobo.960.3">This system ensures that actions performed by one player are reflected accurately and consistently for all other players, creating a harmonized </span><span class="No-Break"><span class="koboSpan" id="kobo.961.1">virtual experience.</span></span></p>
<p><span class="koboSpan" id="kobo.962.1">A key component </span><a id="_idIndexMarker671"/><span class="koboSpan" id="kobo.963.1">of every multiplayer networking system is </span><strong class="bold"><span class="koboSpan" id="kobo.964.1">servers</span></strong><span class="koboSpan" id="kobo.965.1">. </span><span class="koboSpan" id="kobo.965.2">These are powerful computers that host the game’s digital environment. </span><span class="koboSpan" id="kobo.965.3">They are the central point that players connect to, and they maintain the authoritative state of the game. </span><span class="koboSpan" id="kobo.965.4">In some configurations, one of the players might act as a</span><a id="_idIndexMarker672"/><span class="koboSpan" id="kobo.966.1"> server, termed </span><strong class="bold"><span class="koboSpan" id="kobo.967.1">peer-to-peer</span></strong><span class="koboSpan" id="kobo.968.1">, but dedicated servers are more common in larger games due to stability </span><span class="No-Break"><span class="koboSpan" id="kobo.969.1">and scalability.</span></span></p>
<p><span class="koboSpan" id="kobo.970.1">The individual devices or computers used by players are</span><a id="_idIndexMarker673"/><span class="koboSpan" id="kobo.971.1"> called </span><strong class="bold"><span class="koboSpan" id="kobo.972.1">client systems</span></strong><span class="koboSpan" id="kobo.973.1">. </span><span class="koboSpan" id="kobo.973.2">They send data such as player movements or actions to the server and receive updates about the game world and </span><span class="No-Break"><span class="koboSpan" id="kobo.974.1">other players.</span></span></p>
<p><span class="koboSpan" id="kobo.975.1">In real-time games, even slight delays can affect gameplay. </span><span class="koboSpan" id="kobo.975.2">Multiplayer networking systems use techniques such as </span><strong class="bold"><span class="koboSpan" id="kobo.976.1">lag compensation</span></strong><span class="koboSpan" id="kobo.977.1"> to make sure players have smooth experiences. </span><span class="koboSpan" id="kobo.977.2">This involves predicting movements or actions and then reconciling differences once actual </span><span class="No-Break"><span class="koboSpan" id="kobo.978.1">data arrives.</span></span></p>
<p><span class="koboSpan" id="kobo.979.1">To avoid multiplayer games becoming targets for cheating or hacking, networking systems employ measures such as data encryption, authoritative servers, and cheat </span><span class="No-Break"><span class="koboSpan" id="kobo.980.1">detection tools.</span></span></p>
<p><span class="koboSpan" id="kobo.981.1">Beyond </span><a id="_idIndexMarker674"/><span class="koboSpan" id="kobo.982.1">gameplay, players often wish to communicate, be it through text, voice, or other mediums. </span><span class="koboSpan" id="kobo.982.2">Networking systems provide the infrastructure for these interactions, ensuring real-time and </span><span class="No-Break"><span class="koboSpan" id="kobo.983.1">clear communication.</span></span></p>
<p><span class="koboSpan" id="kobo.984.1">Here is an overview of the three main multiplayer network providers that are interesting for </span><span class="No-Break"><span class="koboSpan" id="kobo.985.1">Unity developers:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.986.1">Photon Unity Networking</span></strong><span class="koboSpan" id="kobo.987.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.988.1">PUN</span></strong><span class="koboSpan" id="kobo.989.1">): PUN is a solution tailored for Unity’s multiplayer </span><a id="_idIndexMarker675"/><span class="koboSpan" id="kobo.990.1">games. </span><span class="koboSpan" id="kobo.990.2">Its cloud-based approach means that developers don’t need to worry about server creation or maintenance. </span><span class="koboSpan" id="kobo.990.3">PUN offers a free tier. </span><span class="koboSpan" id="kobo.990.4">Although it comes with certain restrictions, the free version is heavily used by indie developers and hobbyists who are starting their journey into multiplayer </span><span class="No-Break"><span class="koboSpan" id="kobo.991.1">game development.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.992.1">Mirror</span></strong><span class="koboSpan" id="kobo.993.1">: Mirror</span><a id="_idIndexMarker676"/><span class="koboSpan" id="kobo.994.1"> offers a community-powered, open source networking tool tailored for Unity. </span><span class="koboSpan" id="kobo.994.2">It’s an evolution of the deprecated Unity networking system. </span><span class="koboSpan" id="kobo.994.3">Being open source, it doesn’t impose licensing fees, making it an economical choice. </span><span class="koboSpan" id="kobo.994.4">Mirror is renowned for its flexibility and provides developers with a greater degree of control over their multiplayer logic. </span><span class="koboSpan" id="kobo.994.5">However, its customizable nature means that it presents a slightly more challenging learning curve </span><span class="No-Break"><span class="koboSpan" id="kobo.995.1">for beginners.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.996.1">Netcode</span></strong><span class="koboSpan" id="kobo.997.1">: Netcode</span><a id="_idIndexMarker677"/><span class="koboSpan" id="kobo.998.1"> is Unity’s proprietary solution for game networking, formerly known as </span><em class="italic"><span class="koboSpan" id="kobo.999.1">MLAPI</span></em><span class="koboSpan" id="kobo.1000.1">. </span><span class="koboSpan" id="kobo.1000.2">This </span><a id="_idIndexMarker678"/><span class="koboSpan" id="kobo.1001.1">evolution and rebranding signifies Unity’s commitment to continuous improvement and its dedication to providing developers with top-tier tools for multiplayer game development. </span><span class="koboSpan" id="kobo.1001.2">Being an intrinsic Unity solution, Netcode promises seamless integration with </span><span class="No-Break"><span class="koboSpan" id="kobo.1002.1">Unity’s ecosystem.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1003.1">In the following sections, we’ll create a multiplayer game of our own. </span><span class="koboSpan" id="kobo.1003.2">For this, we’ll be leveraging Photon PUN 2 using the free tier. </span><span class="koboSpan" id="kobo.1003.3">Its zero-cost barrier, combined with an intuitive setup process for beginners, makes it an ideal candidate for rapid prototyping and </span><span class="No-Break"><span class="koboSpan" id="kobo.1004.1">smaller-scale projects.</span></span></p>
<p><span class="koboSpan" id="kobo.1005.1">The next section will teach you how to set up PUN for the VR multiplayer game we are about </span><span class="No-Break"><span class="koboSpan" id="kobo.1006.1">to create.</span></span></p>
<h2 id="_idParaDest-162"><span class="koboSpan" id="kobo.1007.1">Setting up PUN for our VR multiplayer game</span></h2>
<p><span class="koboSpan" id="kobo.1008.1">Our </span><a id="_idIndexMarker679"/><span class="koboSpan" id="kobo.1009.1">objective for this VR multiplayer game is both straightforward and robust, encompassing all essential elements needed for a multiplayer experience. </span><span class="koboSpan" id="kobo.1009.2">We aim to design a VR scene where multiple users can join concurrently. </span><span class="koboSpan" id="kobo.1009.3">Users should see themselves and each other through avatars that consist of a head and two controller components. </span><span class="koboSpan" id="kobo.1009.4">They should witness the movements of others in this shared space in real time, observing how they maneuver or rotate their controllers. </span><span class="koboSpan" id="kobo.1009.5">Moreover, through hand animations, they should be able to discern when others are pressing </span><span class="No-Break"><span class="koboSpan" id="kobo.1010.1">their hands.</span></span></p>
<p><span class="koboSpan" id="kobo.1011.1">Before we start importing Photon PUN 2 into our project, let’s create a new scene for this part of this chapter. </span><span class="koboSpan" id="kobo.1011.2">Follow these steps to </span><span class="No-Break"><span class="koboSpan" id="kobo.1012.1">get started:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1013.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1014.1">AdvancedXRTechniques</span></strong><span class="koboSpan" id="kobo.1015.1"> project, which we created in the previous sections of this chapter. </span><span class="koboSpan" id="kobo.1015.2">Save the current scene using an expressive name such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1016.1">HandAndEyeTrackingScene</span></strong><span class="koboSpan" id="kobo.1017.1"> by navigating to </span><strong class="bold"><span class="koboSpan" id="kobo.1018.1">File</span></strong><span class="koboSpan" id="kobo.1019.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1020.1">Save As</span></strong><span class="koboSpan" id="kobo.1021.1"> and typing in the scene name of </span><span class="No-Break"><span class="koboSpan" id="kobo.1022.1">your choice.</span></span></li>
<li><span class="koboSpan" id="kobo.1023.1">Go to </span><strong class="bold"><span class="koboSpan" id="kobo.1024.1">File</span></strong><span class="koboSpan" id="kobo.1025.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1026.1">New Scene</span></strong><span class="koboSpan" id="kobo.1027.1"> and select the </span><strong class="bold"><span class="koboSpan" id="kobo.1028.1">Standard (URP)</span></strong><span class="koboSpan" id="kobo.1029.1"> template to create a new scene. </span><span class="koboSpan" id="kobo.1029.2">Save this scene with a meaningful name too by going to </span><strong class="bold"><span class="koboSpan" id="kobo.1030.1">File</span></strong><span class="koboSpan" id="kobo.1031.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1032.1">Save As</span></strong><span class="koboSpan" id="kobo.1033.1"> and inserting the </span><span class="No-Break"><span class="koboSpan" id="kobo.1034.1">name </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1035.1">MultiplayerScene</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1036.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1037.1">In the Unity Editor of your new scene, delete </span><strong class="bold"><span class="koboSpan" id="kobo.1038.1">Main Camera</span></strong><span class="koboSpan" id="kobo.1039.1"> from the </span><strong class="bold"><span class="koboSpan" id="kobo.1040.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.1041.1"> window by right-clicking on it and selecting </span><strong class="bold"><span class="koboSpan" id="kobo.1042.1">Delete</span></strong><span class="koboSpan" id="kobo.1043.1">. </span><span class="koboSpan" id="kobo.1043.2">Instead of </span><strong class="bold"><span class="koboSpan" id="kobo.1044.1">Main Camera</span></strong><span class="koboSpan" id="kobo.1045.1">, we need to add the </span><strong class="bold"><span class="koboSpan" id="kobo.1046.1">XR Interaction Setup</span></strong><span class="koboSpan" id="kobo.1047.1"> prefab to our scene. </span><span class="koboSpan" id="kobo.1047.2">To do this, search for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1048.1">XR Interaction Setup</span></strong><span class="koboSpan" id="kobo.1049.1"> via the search bar of the </span><strong class="bold"><span class="koboSpan" id="kobo.1050.1">Project</span></strong><span class="koboSpan" id="kobo.1051.1"> window, select it, and drag the prefab into the </span><strong class="bold"><span class="koboSpan" id="kobo.1052.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.1053.1"> window. </span><span class="koboSpan" id="kobo.1053.2">Make sure </span><strong class="bold"><span class="koboSpan" id="kobo.1054.1">XR Interaction Setup</span></strong><span class="koboSpan" id="kobo.1055.1"> is positioned </span><span class="No-Break"><span class="koboSpan" id="kobo.1056.1">at (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1057.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1058.1">,</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1059.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1060.1">,</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1061.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1062.1">).</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1063.1">Now that we’ve set up our scene, follow these steps to install and set up our networking </span><span class="No-Break"><span class="koboSpan" id="kobo.1064.1">system, PUN:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1065.1">We</span><a id="_idIndexMarker680"/><span class="koboSpan" id="kobo.1066.1"> can install PUN like any other package via the Unity Asset Store. </span><span class="koboSpan" id="kobo.1066.2">Visit </span><a href="https://assetstore.unity.com/packages/tools/network/pun-2-free-119922"><span class="koboSpan" id="kobo.1067.1">https://assetstore.unity.com/packages/tools/network/pun-2-free-119922</span></a><span class="koboSpan" id="kobo.1068.1"> or search for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1069.1">PUN 2 – FREE</span></strong><span class="koboSpan" id="kobo.1070.1"> via the Unity Asset Store (</span><strong class="bold"><span class="koboSpan" id="kobo.1071.1">Window</span></strong><span class="koboSpan" id="kobo.1072.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1073.1">Asset Store</span></strong><span class="koboSpan" id="kobo.1074.1">). </span><span class="koboSpan" id="kobo.1074.2">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.1075.1">Add to my Assets</span></strong><span class="koboSpan" id="kobo.1076.1"> button to add the package to your assets. </span><span class="koboSpan" id="kobo.1076.2">Once the package has been added, a new button called </span><strong class="bold"><span class="koboSpan" id="kobo.1077.1">Open in Unity</span></strong><span class="koboSpan" id="kobo.1078.1"> will appear on the Asset Store’s website. </span><span class="koboSpan" id="kobo.1078.2">Click it to open the package in the </span><strong class="bold"><span class="koboSpan" id="kobo.1079.1">Package Manager</span></strong><span class="koboSpan" id="kobo.1080.1"> window of your project. </span><span class="koboSpan" id="kobo.1080.2">Press the </span><strong class="bold"><span class="koboSpan" id="kobo.1081.1">Download</span></strong><span class="koboSpan" id="kobo.1082.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1083.1">Import</span></strong><span class="koboSpan" id="kobo.1084.1"> buttons to import the asset into </span><span class="No-Break"><span class="koboSpan" id="kobo.1085.1">your project.</span></span></li>
<li><span class="koboSpan" id="kobo.1086.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.1087.1">PUN Wizard</span></strong><span class="koboSpan" id="kobo.1088.1"> window shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1089.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1090.1">.6</span></em><span class="koboSpan" id="kobo.1091.1"> will pop up in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1092.1">Unity Editor.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer116">
<span class="koboSpan" id="kobo.1093.1"><img alt="Figure 8.6 – The PUN Wizard pop-up window" src="image/B20869_08_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1094.1">Figure 8.6 – The PUN Wizard pop-up window</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.1095.1">If you already have a Photon account, you can simply type in your </span><strong class="bold"><span class="koboSpan" id="kobo.1096.1">AppId</span></strong><span class="koboSpan" id="kobo.1097.1"> here. </span><span class="koboSpan" id="kobo.1097.2">Otherwise, input your email and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.1098.1">Setup Project</span></strong><span class="koboSpan" id="kobo.1099.1"> button once you are done. </span><span class="koboSpan" id="kobo.1099.2">This will create an account and forward you to a web page where you can set </span><span class="No-Break"><span class="koboSpan" id="kobo.1100.1">your password.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.1101.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1102.1">If you accidentally close this pop-up window, simply head to </span><a href="https://www.photonengine.com/"><span class="koboSpan" id="kobo.1103.1">https://www.photonengine.com/</span></a><span class="koboSpan" id="kobo.1104.1"> and sign </span><span class="No-Break"><span class="koboSpan" id="kobo.1105.1">up there.</span></span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.1106.1">Once</span><a id="_idIndexMarker681"/><span class="koboSpan" id="kobo.1107.1"> you have signed in to your account, head to </span><a href="https://dashboard.photonengine.com/"><span class="koboSpan" id="kobo.1108.1">https://dashboard.photonengine.com/</span></a><span class="koboSpan" id="kobo.1109.1"> and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.1110.1">Create A New App</span></strong><span class="koboSpan" id="kobo.1111.1"> button. </span><span class="koboSpan" id="kobo.1111.2">You will be forwarded to the page shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1112.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1113.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1114.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer117">
<span class="koboSpan" id="kobo.1115.1"><img alt="Figure 8.7 – The web page you will be forwarded to once you create a new application on the Photon website" src="image/B20869_08_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1116.1">Figure 8.7 – The web page you will be forwarded to once you create a new application on the Photon website</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.1117.1">Choose the </span><strong class="bold"><span class="koboSpan" id="kobo.1118.1">Multiplayer Game</span></strong><span class="koboSpan" id="kobo.1119.1"> option under </span><strong class="bold"><span class="koboSpan" id="kobo.1120.1">Select Application Type</span></strong><span class="koboSpan" id="kobo.1121.1">, select </span><strong class="bold"><span class="koboSpan" id="kobo.1122.1">Pun</span></strong><span class="koboSpan" id="kobo.1123.1"> from the </span><strong class="bold"><span class="koboSpan" id="kobo.1124.1">Select Photon SDK</span></strong><span class="koboSpan" id="kobo.1125.1"> drop-down menu, and insert an </span><strong class="bold"><span class="koboSpan" id="kobo.1126.1">Application Name</span></strong><span class="koboSpan" id="kobo.1127.1"> value of your choice, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1128.1">My first Multiplayer Game</span></strong><span class="koboSpan" id="kobo.1129.1">. </span><span class="koboSpan" id="kobo.1129.2">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.1130.1">CREATE</span></strong><span class="koboSpan" id="kobo.1131.1"> button – notice your newly created application in the dashboard. </span><span class="koboSpan" id="kobo.1131.2">As shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1132.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1133.1">.8</span></em><span class="koboSpan" id="kobo.1134.1">, you can find your Photon </span><strong class="bold"><span class="koboSpan" id="kobo.1135.1">App ID</span></strong><span class="koboSpan" id="kobo.1136.1"> in one of the layout elements</span><a id="_idIndexMarker682"/><span class="koboSpan" id="kobo.1137.1"> of the dashboard. </span><span class="koboSpan" id="kobo.1137.2">Copy it to connect to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1138.1">server later.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer118">
<span class="koboSpan" id="kobo.1139.1"><img alt="Figure 8.8 – The dashboard element containing your App ID" src="image/B20869_08_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1140.1">Figure 8.8 – The dashboard element containing your App ID</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.1141.1">Head back to your Unity project. </span><span class="koboSpan" id="kobo.1141.2">If you still see the </span><strong class="bold"><span class="koboSpan" id="kobo.1142.1">PUN Wizard</span></strong><span class="koboSpan" id="kobo.1143.1"> window, you can directly paste your </span><strong class="bold"><span class="koboSpan" id="kobo.1144.1">App Id</span></strong><span class="koboSpan" id="kobo.1145.1"> inside of it and click the </span><strong class="bold"><span class="koboSpan" id="kobo.1146.1">Setup Project</span></strong><span class="koboSpan" id="kobo.1147.1"> button. </span><span class="koboSpan" id="kobo.1147.2">Alternatively, you can type your </span><strong class="bold"><span class="koboSpan" id="kobo.1148.1">App Id</span></strong><span class="koboSpan" id="kobo.1149.1"> directly into </span><strong class="bold"><span class="koboSpan" id="kobo.1150.1">Photon Server Settings</span></strong><span class="koboSpan" id="kobo.1151.1"> by navigating to </span><strong class="bold"><span class="koboSpan" id="kobo.1152.1">Window</span></strong><span class="koboSpan" id="kobo.1153.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1154.1">Photon Unity Networking</span></strong><span class="koboSpan" id="kobo.1155.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1156.1">Highlight Server Settings</span></strong><span class="koboSpan" id="kobo.1157.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1158.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1159.1">.9</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1160.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer119">
<span class="koboSpan" id="kobo.1161.1"><img alt="Figure 8.9 – How to add the App Id to Photon Server Settings in Unity" src="image/B20869_08_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1162.1">Figure 8.9 – How to add the App Id to Photon Server Settings in Unity</span></p>
<p><span class="koboSpan" id="kobo.1163.1">Now, it’s</span><a id="_idIndexMarker683"/><span class="koboSpan" id="kobo.1164.1"> time to connect our Unity project to the server. </span><span class="koboSpan" id="kobo.1164.2">The next section will show you how to </span><span class="No-Break"><span class="koboSpan" id="kobo.1165.1">do this.</span></span></p>
<h2 id="_idParaDest-163"><span class="koboSpan" id="kobo.1166.1">Connecting to the server via Network Manager</span></h2>
<p><span class="koboSpan" id="kobo.1167.1">To</span><a id="_idIndexMarker684"/><span class="koboSpan" id="kobo.1168.1"> connect our Unity project to the PUN server, we must add a new GameObject with an associated C# script to our scene. </span><span class="koboSpan" id="kobo.1168.2">Let’s go through this process step </span><span class="No-Break"><span class="koboSpan" id="kobo.1169.1">by step:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1170.1">Create a new empty GameObject by right-clicking in the </span><strong class="bold"><span class="koboSpan" id="kobo.1171.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.1172.1"> window, selecting </span><strong class="bold"><span class="koboSpan" id="kobo.1173.1">Create Empty</span></strong><span class="koboSpan" id="kobo.1174.1">, and renaming it to </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1175.1">Network Manager</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1176.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1177.1">Now, we want to add a script to this GameObject that we can use to connect to the PUN server and check whether someone else joined the server. </span><span class="koboSpan" id="kobo.1177.2">To create this script, navigate to the </span><strong class="bold"><span class="koboSpan" id="kobo.1178.1">Inspector</span></strong><span class="koboSpan" id="kobo.1179.1"> window of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1180.1">Network Manager</span></strong><span class="koboSpan" id="kobo.1181.1"> and click the </span><strong class="bold"><span class="koboSpan" id="kobo.1182.1">Add </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1183.1">Component</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1184.1"> button.</span></span></li>
<li><span class="koboSpan" id="kobo.1185.1">Search for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1186.1">NetworkManager</span></strong><span class="koboSpan" id="kobo.1187.1">, select the </span><strong class="bold"><span class="koboSpan" id="kobo.1188.1">New Script</span></strong><span class="koboSpan" id="kobo.1189.1"> option, and press the </span><strong class="bold"><span class="koboSpan" id="kobo.1190.1">Create and Add</span></strong><span class="koboSpan" id="kobo.1191.1"> button to create a C# script called </span><strong class="bold"><span class="koboSpan" id="kobo.1192.1">NetworkManager.cs</span></strong><span class="koboSpan" id="kobo.1193.1"> that is automatically added to </span><strong class="bold"><span class="koboSpan" id="kobo.1194.1">NetworkManager</span></strong><span class="koboSpan" id="kobo.1195.1"> as a component. </span><span class="koboSpan" id="kobo.1195.2">Double-click on the script to open it in your </span><span class="No-Break"><span class="koboSpan" id="kobo.1196.1">preferred IDE.</span></span></li>
<li><span class="koboSpan" id="kobo.1197.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.1198.1">NetworkManager</span></strong><span class="koboSpan" id="kobo.1199.1"> script serves as a foundational element for initiating and managing network interactions in a VR multiplayer application using the PUN framework. </span><span class="koboSpan" id="kobo.1199.2">Delete everything that is currently inside of the </span><strong class="bold"><span class="koboSpan" id="kobo.1200.1">NetworkManager</span></strong><span class="koboSpan" id="kobo.1201.1"> script so that you can start on a </span><span class="No-Break"><span class="koboSpan" id="kobo.1202.1">clean foundation.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1203.1">Let’s start adding our code logic by importing the </span><span class="No-Break"><span class="koboSpan" id="kobo.1204.1">following libraries:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1205.1">
using UnityEngine;
using Photon.Pun;
using Photon.Realtime;</span></pre>
<p><span class="koboSpan" id="kobo.1206.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1207.1">Photon.Pun</span></strong><span class="koboSpan" id="kobo.1208.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1209.1">Photon.Realtime</span></strong><span class="koboSpan" id="kobo.1210.1"> libraries are vital for any PUN application as they</span><a id="_idIndexMarker685"/><span class="koboSpan" id="kobo.1211.1"> grant access to core multiplayer </span><span class="No-Break"><span class="koboSpan" id="kobo.1212.1">networking functionalities.</span></span></p>
<p><span class="koboSpan" id="kobo.1213.1">Next, let’s define the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1214.1">NetworkManager</span></strong><span class="koboSpan" id="kobo.1215.1"> class and some </span><span class="No-Break"><span class="koboSpan" id="kobo.1216.1">important constants:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1217.1">
public class NetworkManager : MonoBehaviourPunCallbacks
{
    private const string ROOM_NAME = "Multiplayer Room";
    private const byte MAX_PLAYERS = 5;
}</span></pre>
<p><span class="koboSpan" id="kobo.1218.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1219.1">NetworkManager</span></strong><span class="koboSpan" id="kobo.1220.1"> class inherits from </span><strong class="source-inline"><span class="koboSpan" id="kobo.1221.1">MonoBehaviourPunCallbacks</span></strong><span class="koboSpan" id="kobo.1222.1">. </span><span class="koboSpan" id="kobo.1222.2">This inheritance means that it’s not just a standard Unity script (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1223.1">MonoBehaviour</span></strong><span class="koboSpan" id="kobo.1224.1">), but that it also has special callback functions provided by PUN that notify our script of various </span><span class="No-Break"><span class="koboSpan" id="kobo.1225.1">networking events.</span></span></p>
<p><span class="koboSpan" id="kobo.1226.1">While </span><strong class="source-inline"><span class="koboSpan" id="kobo.1227.1">ROOM_NAME</span></strong><span class="koboSpan" id="kobo.1228.1"> represents the name of the room players will join or create, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1229.1">MAX_PLAYERS</span></strong><span class="koboSpan" id="kobo.1230.1"> defines the maximum number of players allowed in a room, which in this case is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1231.1">5</span></strong><span class="koboSpan" id="kobo.1232.1"> players. </span><span class="koboSpan" id="kobo.1232.2">We will need both constants later in </span><span class="No-Break"><span class="koboSpan" id="kobo.1233.1">the script.</span></span></p>
<p><span class="koboSpan" id="kobo.1234.1">Let’s continue by connecting our application to </span><span class="No-Break"><span class="koboSpan" id="kobo.1235.1">Photon servers:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1236.1">
private void Awake()
{
    InitiateServerConnection();
}
private void InitiateServerConnection()
{
     if (!PhotonNetwork.IsConnected)
    {
        PhotonNetwork.ConnectUsingSettings();
        Debug.Log("Attempting server connection...");
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.1237.1">Once</span><a id="_idIndexMarker686"/><span class="koboSpan" id="kobo.1238.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1239.1">Awake()</span></strong><span class="koboSpan" id="kobo.1240.1"> method is invoked, it initiates the connection to the PUN server by calling the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1241.1">InitiateServerConnection()</span></strong><span class="koboSpan" id="kobo.1242.1"> method. </span><span class="koboSpan" id="kobo.1242.2">If the client isn’t already connected to Photon, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1243.1">InitiateServerConnection()</span></strong><span class="koboSpan" id="kobo.1244.1"> method will attempt to connect to the server space using the </span><strong class="bold"><span class="koboSpan" id="kobo.1245.1">App Id</span></strong><span class="koboSpan" id="kobo.1246.1"> value that we inserted before. </span><span class="koboSpan" id="kobo.1246.2">Refer to </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1247.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1248.1">.9</span></em><span class="koboSpan" id="kobo.1249.1"> in case you missed this step. </span><span class="koboSpan" id="kobo.1249.2">The second line of this method logs our attempt via a </span><span class="No-Break"><span class="koboSpan" id="kobo.1250.1">debug message.</span></span></p>
<p><span class="koboSpan" id="kobo.1251.1">If the connection attempt is successful, the following method will </span><span class="No-Break"><span class="koboSpan" id="kobo.1252.1">be executed:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1253.1">
public override void OnConnectedToMaster()
{
    base.OnConnectedToMaster();
    Debug.Log("Connected to Master Server.");
    JoinOrCreateGameRoom();
}</span></pre>
<p><span class="koboSpan" id="kobo.1254.1">This method is an override of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1255.1">OnConnectedToMaster</span></strong><span class="koboSpan" id="kobo.1256.1"> callback from Photon. </span><span class="koboSpan" id="kobo.1256.2">It is triggered once the application successfully connects to the Photon Master Server. </span><span class="koboSpan" id="kobo.1256.3">This method is an integral part of the PUN framework, allowing us to execute specific logic after a successful connection. </span><span class="koboSpan" id="kobo.1256.4">Inside this method, we log the successful connection to the Master Server. </span><span class="koboSpan" id="kobo.1256.5">We also call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1257.1">JoinOrCreateGameRoom()</span></strong><span class="koboSpan" id="kobo.1258.1"> method, which uses the constants we defined at the beginning of </span><span class="No-Break"><span class="koboSpan" id="kobo.1259.1">our script:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1260.1">
private void JoinOrCreateGameRoom()
    {
        RoomOptions options = new RoomOptions
        {
            MaxPlayers = MAX_PLAYERS,
            IsVisible = true,
            IsOpen = true
        };
        PhotonNetwork.JoinOrCreateRoom(ROOM_NAME, options, TypedLobby.Default);
}</span></pre>
<p><span class="koboSpan" id="kobo.1261.1">In the</span><a id="_idIndexMarker687"/><span class="koboSpan" id="kobo.1262.1"> last line of this method, the client attempts to join or create a room, called </span><strong class="bold"><span class="koboSpan" id="kobo.1263.1">Multiplayer Room</span></strong><span class="koboSpan" id="kobo.1264.1">, with five being the maximum allowed number of players in the room. </span><span class="koboSpan" id="kobo.1264.2">If the room doesn’t exist, it creates one with the </span><span class="No-Break"><span class="koboSpan" id="kobo.1265.1">provided options.</span></span></p>
<p><span class="koboSpan" id="kobo.1266.1">The next method in our code is </span><span class="No-Break"><span class="koboSpan" id="kobo.1267.1">an override:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1268.1">
public override void OnJoinedRoom()
{
    base.OnJoinedRoom();
    Debug.Log("Successfully joined a room.");
}</span></pre>
<p><span class="koboSpan" id="kobo.1269.1">This method is an override of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1270.1">OnJoinedRoom</span></strong><span class="koboSpan" id="kobo.1271.1"> callback from Photon. </span><span class="koboSpan" id="kobo.1271.2">It’s triggered when the client successfully joins a room. </span><span class="koboSpan" id="kobo.1271.3">In the last line, a debug message is printed to confirm successful </span><span class="No-Break"><span class="koboSpan" id="kobo.1272.1">room entry.</span></span></p>
<p><span class="koboSpan" id="kobo.1273.1">To manage new players, we can use the </span><span class="No-Break"><span class="koboSpan" id="kobo.1274.1">following method:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1275.1">
public override void OnPlayerEnteredRoom(Player newParticipant)
{
    base.OnPlayerEnteredRoom(newParticipant);
    Debug.Log("Another player has joined the room.");
}</span></pre>
<p><span class="koboSpan" id="kobo.1276.1">This </span><strong class="source-inline"><span class="koboSpan" id="kobo.1277.1">OnPlayerEnteredRoom()</span></strong><span class="koboSpan" id="kobo.1278.1"> method is also an override of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1279.1">OnPlayerEnteredRoom</span></strong><span class="koboSpan" id="kobo.1280.1"> callback from Photon. </span><span class="koboSpan" id="kobo.1280.2">It’s called whenever a new player enters the room. </span><span class="koboSpan" id="kobo.1280.3">Once again, a debug message is printed in the last line to notify that another player </span><span class="No-Break"><span class="koboSpan" id="kobo.1281.1">has joined.</span></span></p>
<p><span class="koboSpan" id="kobo.1282.1">Hurray, you</span><a id="_idIndexMarker688"/><span class="koboSpan" id="kobo.1283.1"> have implemented all the necessary components into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1284.1">NetworkManager</span></strong><span class="koboSpan" id="kobo.1285.1"> script! </span><span class="koboSpan" id="kobo.1285.2">As you can see, it provides a foundational structure to connect to Photon’s servers, manage multiplayer rooms, and handle player interactions in a VR environment. </span><span class="koboSpan" id="kobo.1285.3">Let’s see whether our code logic works. </span><span class="koboSpan" id="kobo.1285.4">In the next section, you will find out how you can test a multiplayer application on a </span><span class="No-Break"><span class="koboSpan" id="kobo.1286.1">single device.</span></span></p>
<h2 id="_idParaDest-164"><span class="koboSpan" id="kobo.1287.1">Testing the multiplayer scene from one device</span></h2>
<p><span class="koboSpan" id="kobo.1288.1">To test a </span><a id="_idIndexMarker689"/><span class="koboSpan" id="kobo.1289.1">multiplayer scene from a single device, we need to run the scene twice. </span><span class="koboSpan" id="kobo.1289.2">This can be accomplished by first building and running the scene on the computer and subsequently launching it from within the Editor. </span><span class="koboSpan" id="kobo.1289.3">Here’s a </span><span class="No-Break"><span class="koboSpan" id="kobo.1290.1">step-by-step breakdown:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1291.1">In the Unity Editor, head to </span><strong class="bold"><span class="koboSpan" id="kobo.1292.1">Files</span></strong><span class="koboSpan" id="kobo.1293.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1294.1">Build Settings</span></strong><span class="koboSpan" id="kobo.1295.1"> and select the </span><strong class="bold"><span class="koboSpan" id="kobo.1296.1">Windows/ Mac/ Linux</span></strong><span class="koboSpan" id="kobo.1297.1"> tab. </span><span class="koboSpan" id="kobo.1297.2">Add the open scene you want to test, click the </span><strong class="bold"><span class="koboSpan" id="kobo.1298.1">Build</span></strong><span class="koboSpan" id="kobo.1299.1"> button, and choose a folder for the executable file you are about </span><span class="No-Break"><span class="koboSpan" id="kobo.1300.1">to build.</span></span></li>
<li><span class="koboSpan" id="kobo.1301.1">Once the file has been built, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.1302.1">Play</span></strong><span class="koboSpan" id="kobo.1303.1"> button in the Unity Editor to start </span><span class="No-Break"><span class="koboSpan" id="kobo.1304.1">the scene.</span></span></li>
<li><span class="koboSpan" id="kobo.1305.1">Now, open the executable file that you </span><span class="No-Break"><span class="koboSpan" id="kobo.1306.1">just built.</span></span></li>
<li><span class="koboSpan" id="kobo.1307.1">Head to the </span><strong class="bold"><span class="koboSpan" id="kobo.1308.1">Console</span></strong><span class="koboSpan" id="kobo.1309.1"> window in the Unity Editor and check the </span><strong class="bold"><span class="koboSpan" id="kobo.1310.1">Debug</span></strong><span class="koboSpan" id="kobo.1311.1"> statements. </span><span class="koboSpan" id="kobo.1311.2">If you did everything correctly, you will see the debug lines we defined in the scripts previously, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1312.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1313.1">.10</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1314.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer120">
<span class="koboSpan" id="kobo.1315.1"><img alt="Figure 8.10 – The debug lines you should see if everything works as expected" src="image/B20869_08_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1316.1">Figure 8.10 – The debug lines you should see if everything works as expected</span></p>
<p><span class="koboSpan" id="kobo.1317.1">To ensure </span><a id="_idIndexMarker690"/><span class="koboSpan" id="kobo.1318.1">that our scene functions optimally, we must test its VR features thoroughly. </span><span class="koboSpan" id="kobo.1318.2">From our assessments, navigating the scene is smooth, and both the headset and controllers are accurately tracked and positioned. </span><span class="koboSpan" id="kobo.1318.3">Currently, our scene establishes a server connection as soon as the initial player activates it, and we have set up methods to detect the entry of </span><span class="No-Break"><span class="koboSpan" id="kobo.1319.1">new players.</span></span></p>
<p><span class="koboSpan" id="kobo.1320.1">However, our </span><strong class="bold"><span class="koboSpan" id="kobo.1321.1">XR Interaction Setup</span></strong><span class="koboSpan" id="kobo.1322.1"> isn’t entirely primed for multiplayer operations. </span><span class="koboSpan" id="kobo.1322.2">It excels at managing locomotion and interactions, but it doesn’t feature animated models for different body parts. </span><span class="koboSpan" id="kobo.1322.3">In simpler terms, if someone were to enter our multiplayer scene at this moment, they might only see the controller. </span><span class="koboSpan" id="kobo.1322.4">Worse, they might not detect any part of our avatar because the controller models aren’t network-conscious. </span><span class="koboSpan" id="kobo.1322.5">This means that the objects present aren’t synchronized across all players in the session. </span><span class="koboSpan" id="kobo.1322.6">But don’t worry, we’ll tackle this issue in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1323.1">upcoming section.</span></span></p>
<h2 id="_idParaDest-165"><span class="koboSpan" id="kobo.1324.1">Using scripts to display our avatar’s hands and face</span></h2>
<p><span class="koboSpan" id="kobo.1325.1">Our </span><a id="_idIndexMarker691"/><span class="koboSpan" id="kobo.1326.1">next </span><a id="_idIndexMarker692"/><span class="koboSpan" id="kobo.1327.1">objective is to display an avatar’s hands and face when it connects to a server. </span><span class="koboSpan" id="kobo.1327.2">To achieve this, let’s append a new script to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1328.1">Network Manager</span></strong><span class="koboSpan" id="kobo.1329.1"> by selecting it in the </span><strong class="bold"><span class="koboSpan" id="kobo.1330.1">Inspector</span></strong><span class="koboSpan" id="kobo.1331.1"> window, searching for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1332.1">NetworkPlayerPlacer</span></strong><span class="koboSpan" id="kobo.1333.1"> after clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.1334.1">Add Component</span></strong><span class="koboSpan" id="kobo.1335.1"> button in the </span><strong class="bold"><span class="koboSpan" id="kobo.1336.1">Inspector</span></strong><span class="koboSpan" id="kobo.1337.1"> window, and creating a new script called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1338.1">NetworkPlayerPlacer</span></strong><span class="koboSpan" id="kobo.1339.1">. </span><span class="koboSpan" id="kobo.1339.2">Open the script by double-clicking </span><span class="No-Break"><span class="koboSpan" id="kobo.1340.1">on it.</span></span></p>
<h3><span class="koboSpan" id="kobo.1341.1">Managing player presence</span></h3>
<p><span class="koboSpan" id="kobo.1342.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1343.1">NetworkPlayerPlacer</span></strong><span class="koboSpan" id="kobo.1344.1"> script </span><a id="_idIndexMarker693"/><span class="koboSpan" id="kobo.1345.1">we are about to dive into is tailored for overseeing player presence, a core element in multiplayer VR applications. </span><span class="koboSpan" id="kobo.1345.2">Specifically, this means to create and delete player avatars or their in-game representations. </span><span class="koboSpan" id="kobo.1345.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1346.1">NetworkPlayerPlacer</span></strong><span class="koboSpan" id="kobo.1347.1"> script is tailored for this exact role. </span><span class="koboSpan" id="kobo.1347.2">It begins with the </span><span class="No-Break"><span class="koboSpan" id="kobo.1348.1">following declarations:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1349.1">
using UnityEngine;
using Photon.Pun;
public class NetworkPlayerPlacer : MonoBehaviourPunCallbacks
{
    private GameObject playerInstance;
    private const string PLAYER_PREFAB_NAME = "Network Player";
}</span></pre>
<p><span class="koboSpan" id="kobo.1350.1">The import statements and class declarations bear a close resemblance to those in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1351.1">NetworkManager</span></strong><span class="koboSpan" id="kobo.1352.1"> script. </span><span class="koboSpan" id="kobo.1352.2">Both classes are derived from </span><strong class="source-inline"><span class="koboSpan" id="kobo.1353.1">MonoBehaviourPunCallbacks</span></strong><span class="koboSpan" id="kobo.1354.1">. </span><strong class="source-inline"><span class="koboSpan" id="kobo.1355.1">playerInstance</span></strong><span class="koboSpan" id="kobo.1356.1"> serves as a reference to the instantiated player object within the scene. </span><span class="koboSpan" id="kobo.1356.2">Meanwhile, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1357.1">PLAYER_PREFAB_NAME</span></strong><span class="koboSpan" id="kobo.1358.1"> is a constant string that holds the name of the player prefab set for instantiation. </span><span class="koboSpan" id="kobo.1358.2">It’s anticipated that this prefab is registered and accessible in the Photon </span><span class="No-Break"><span class="koboSpan" id="kobo.1359.1">resources directory.</span></span></p>
<p><span class="koboSpan" id="kobo.1360.1">Let’s create the first method of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1361.1">NetworkPlayerPlacer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1362.1"> script:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1363.1">
public override void OnJoinedRoom()
{
    base.OnJoinedRoom();
    SpawnPlayer();
}</span></pre>
<p><span class="koboSpan" id="kobo.1364.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1365.1">OnJoinedRoom()</span></strong><span class="koboSpan" id="kobo.1366.1"> method overrides the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1367.1">OnJoinedRoom</span></strong><span class="koboSpan" id="kobo.1368.1"> callback from Photon, which gets triggered when the local player successfully joins </span><span class="No-Break"><span class="koboSpan" id="kobo.1369.1">a room.</span></span></p>
<p><span class="koboSpan" id="kobo.1370.1">The base</span><a id="_idIndexMarker694"/><span class="koboSpan" id="kobo.1371.1"> class implementation of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1372.1">OnJoinedRoom</span></strong><span class="koboSpan" id="kobo.1373.1"> is called with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1374.1">base.OnJoinedRoom()</span></strong><span class="koboSpan" id="kobo.1375.1">. </span><span class="koboSpan" id="kobo.1375.2">In the last line, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1376.1">SpawnPlayer()</span></strong><span class="koboSpan" id="kobo.1377.1"> method is called, which looks </span><span class="No-Break"><span class="koboSpan" id="kobo.1378.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1379.1">
private void SpawnPlayer()
{
     playerInstance = PhotonNetwork.Instantiate(PLAYER_PREFAB_NAME, transform.position, transform.rotation);
}</span></pre>
<p><span class="koboSpan" id="kobo.1380.1">This method instantiates a new player object using Photon’s networked instantiation method. </span><span class="koboSpan" id="kobo.1380.2">The new player will be spawned at the position and rotation of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1381.1">NetworkPlayerPlacer</span></strong><span class="koboSpan" id="kobo.1382.1"> object. </span><span class="koboSpan" id="kobo.1382.2">This ensures that the player object is networked and synchronized across all clients in </span><span class="No-Break"><span class="koboSpan" id="kobo.1383.1">the room.</span></span></p>
<p><span class="koboSpan" id="kobo.1384.1">The next method in our script overrides the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1385.1">OnLeftRoom</span></strong><span class="koboSpan" id="kobo.1386.1"> callback from Photon, which is called when the local player leaves </span><span class="No-Break"><span class="koboSpan" id="kobo.1387.1">a room:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1388.1">
public override void OnLeftRoom()
{
    base.OnLeftRoom();
    DespawnPlayer();
}</span></pre>
<p><span class="koboSpan" id="kobo.1389.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1390.1">OnLeftRoom()</span></strong><span class="koboSpan" id="kobo.1391.1"> method consists of two calls: one to the base class implementation of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1392.1">OnLeftRoom</span></strong><span class="koboSpan" id="kobo.1393.1"> and one to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1394.1">DespawnPlayer()</span></strong><span class="koboSpan" id="kobo.1395.1">, a method to despawn the player. </span><span class="koboSpan" id="kobo.1395.2">Let’s have a look at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1396.1">DespawnPlayer()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1397.1">method next:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1398.1">
private void DespawnPlayer()
{
    if (playerInstance)
    {
        PhotonNetwork.Destroy(playerInstance);
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.1399.1">This </span><a id="_idIndexMarker695"/><span class="koboSpan" id="kobo.1400.1">method handles the despawning of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1401.1">player object.</span></span></p>
<p><span class="koboSpan" id="kobo.1402.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1403.1">if</span></strong><span class="koboSpan" id="kobo.1404.1"> statement checks whether the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1405.1">playerInstance</span></strong><span class="koboSpan" id="kobo.1406.1"> reference is not null. </span><span class="koboSpan" id="kobo.1406.2">If this is true, a player object exists. </span><span class="koboSpan" id="kobo.1406.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1407.1">PhotonNetwork.Destroy(playerInstance);</span></strong><span class="koboSpan" id="kobo.1408.1"> line destroys the networked player object. </span><span class="koboSpan" id="kobo.1408.2">This will ensure that the object is removed not just locally but across </span><span class="No-Break"><span class="koboSpan" id="kobo.1409.1">all clients.</span></span></p>
<p><span class="koboSpan" id="kobo.1410.1">In essence, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1411.1">NetworkPlayerSpawner</span></strong><span class="koboSpan" id="kobo.1412.1"> script, with its two key callback functions, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1413.1">OnJoinedRoom()</span></strong><span class="koboSpan" id="kobo.1414.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1415.1">OnLeftRoom()</span></strong><span class="koboSpan" id="kobo.1416.1">, seamlessly handles the appearance and disappearance of player avatars in our VR multiplayer space, complementing the functionalities offered by the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1417.1">NetworkManager</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1418.1"> script.</span></span></p>
<h3><span class="koboSpan" id="kobo.1419.1">Creating a face and hands</span></h3>
<p><span class="koboSpan" id="kobo.1420.1">Earlier, we </span><a id="_idIndexMarker696"/><span class="koboSpan" id="kobo.1421.1">noted that the script anticipates a prefab called </span><strong class="bold"><span class="koboSpan" id="kobo.1422.1">Network Player</span></strong><span class="koboSpan" id="kobo.1423.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.1424.1">Project</span></strong><span class="koboSpan" id="kobo.1425.1"> window’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.1426.1">Resources</span></strong><span class="koboSpan" id="kobo.1427.1"> folder. </span><span class="koboSpan" id="kobo.1427.2">Unity uses this default naming convention when referencing objects by their name. </span><span class="koboSpan" id="kobo.1427.3">To create the needed folder, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.1428.1">+</span></strong><span class="koboSpan" id="kobo.1429.1"> icon in the </span><strong class="bold"><span class="koboSpan" id="kobo.1430.1">Project</span></strong><span class="koboSpan" id="kobo.1431.1"> window, select </span><strong class="bold"><span class="koboSpan" id="kobo.1432.1">Folder</span></strong><span class="koboSpan" id="kobo.1433.1">, and then rename it </span><span class="No-Break"><span class="koboSpan" id="kobo.1434.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1435.1">Resources</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1436.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1437.1">Next, we need to create the </span><strong class="bold"><span class="koboSpan" id="kobo.1438.1">Network Player</span></strong><span class="koboSpan" id="kobo.1439.1"> prefab, which will represent our avatar via the network. </span><span class="koboSpan" id="kobo.1439.2">Follow these steps to </span><span class="No-Break"><span class="koboSpan" id="kobo.1440.1">achieve this:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1441.1">Right-click in the </span><strong class="bold"><span class="koboSpan" id="kobo.1442.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.1443.1"> window, select </span><strong class="bold"><span class="koboSpan" id="kobo.1444.1">Create Empty</span></strong><span class="koboSpan" id="kobo.1445.1">, and rename the empty GameObject to </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1446.1">Network Player</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1447.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1448.1">Add the </span><strong class="bold"><span class="koboSpan" id="kobo.1449.1">Photon View</span></strong><span class="koboSpan" id="kobo.1450.1"> component to it in the </span><strong class="bold"><span class="koboSpan" id="kobo.1451.1">Inspector</span></strong><span class="koboSpan" id="kobo.1452.1"> window by pressing the </span><strong class="bold"><span class="koboSpan" id="kobo.1453.1">Add Component</span></strong><span class="koboSpan" id="kobo.1454.1"> button and searching for it. </span><span class="koboSpan" id="kobo.1454.2">Photon requires this component to instantiate the player on the server. </span><span class="koboSpan" id="kobo.1454.3">Without it, the system wouldn’t recognize ownership or synchronize the player’s body </span><span class="No-Break"><span class="koboSpan" id="kobo.1455.1">parts accurately.</span></span></li>
<li><span class="koboSpan" id="kobo.1456.1">Add three other empty GameObjects as children to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1457.1">Network Player</span></strong><span class="koboSpan" id="kobo.1458.1"> by selecting </span><strong class="source-inline"><span class="koboSpan" id="kobo.1459.1">Network Player</span></strong><span class="koboSpan" id="kobo.1460.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.1461.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.1462.1"> window and pressing </span><strong class="bold"><span class="koboSpan" id="kobo.1463.1">Create Empty</span></strong><span class="koboSpan" id="kobo.1464.1">. </span><span class="koboSpan" id="kobo.1464.2">Repeat this process two times so that you have created three empty GameObjects in total and rename them to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1465.1">Head</span></strong><span class="koboSpan" id="kobo.1466.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1467.1">Left Hand</span></strong><span class="koboSpan" id="kobo.1468.1">, and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1469.1">Right Hand</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1470.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1471.1">Now, we need to create 3D objects to represent the three components of our avatar. </span><span class="koboSpan" id="kobo.1471.2">For </span><strong class="source-inline"><span class="koboSpan" id="kobo.1472.1">Head</span></strong><span class="koboSpan" id="kobo.1473.1">, we can use a simple </span><strong class="bold"><span class="koboSpan" id="kobo.1474.1">Sphere</span></strong><span class="koboSpan" id="kobo.1475.1"> primitive. </span><span class="koboSpan" id="kobo.1475.2">Right-click on </span><strong class="source-inline"><span class="koboSpan" id="kobo.1476.1">Head</span></strong><span class="koboSpan" id="kobo.1477.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.1478.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.1479.1"> window and select </span><strong class="bold"><span class="koboSpan" id="kobo.1480.1">3D Object</span></strong><span class="koboSpan" id="kobo.1481.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1482.1">Sphere</span></strong><span class="koboSpan" id="kobo.1483.1">. </span><span class="koboSpan" id="kobo.1483.2">Rename it </span><strong class="source-inline"><span class="koboSpan" id="kobo.1484.1">Head</span></strong><span class="koboSpan" id="kobo.1485.1"> and scale it to (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1486.1">0.1</span></strong><span class="koboSpan" id="kobo.1487.1">, </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1488.1">0.1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1489.1">, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1490.1">0.1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1491.1">)</span></span></li>
<li><span class="koboSpan" id="kobo.1492.1">We could also use </span><a id="_idIndexMarker697"/><span class="koboSpan" id="kobo.1493.1">primitives for the hands of our avatar. </span><span class="koboSpan" id="kobo.1493.2">However, since there are a lot of animated hand models available on the internet, we can simply use one of them. </span><span class="koboSpan" id="kobo.1493.3">For this project, we used the </span><strong class="bold"><span class="koboSpan" id="kobo.1494.1">Oculus Hands</span></strong><span class="koboSpan" id="kobo.1495.1"> sample from the </span><strong class="bold"><span class="koboSpan" id="kobo.1496.1">Oculus Integration</span></strong><span class="koboSpan" id="kobo.1497.1"> package on Unity’s Asset Store (</span><a href="https://assetstore.unity.com/packages/tools/integration/oculus-integration-82022"><span class="koboSpan" id="kobo.1498.1">https://assetstore.unity.com/packages/tools/integration/oculus-integration-82022</span></a><span class="koboSpan" id="kobo.1499.1">). </span><span class="koboSpan" id="kobo.1499.2">However, we suggest cloning the hands directly from this book’s GitHub repository. </span><span class="koboSpan" id="kobo.1499.3">This avoids unnecessary additional content and missing assets due to frequent updates in the </span><strong class="bold"><span class="koboSpan" id="kobo.1500.1">Oculus </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1501.1">Integration</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1502.1"> package.</span></span></li>
<li><span class="koboSpan" id="kobo.1503.1">Now, select </span><strong class="source-inline"><span class="koboSpan" id="kobo.1504.1">Network Player</span></strong><span class="koboSpan" id="kobo.1505.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.1506.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.1507.1"> window and drag it into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1508.1">Resources</span></strong><span class="koboSpan" id="kobo.1509.1"> folder in the </span><strong class="bold"><span class="koboSpan" id="kobo.1510.1">Project</span></strong><span class="koboSpan" id="kobo.1511.1"> window. </span><span class="koboSpan" id="kobo.1511.2">This will create a prefab of it that we will instantiate at runtime. </span><span class="koboSpan" id="kobo.1511.3">Hence, we don’t need </span><strong class="source-inline"><span class="koboSpan" id="kobo.1512.1">Network Player</span></strong><span class="koboSpan" id="kobo.1513.1"> in our </span><strong class="bold"><span class="koboSpan" id="kobo.1514.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.1515.1"> window anymore and can </span><span class="No-Break"><span class="koboSpan" id="kobo.1516.1">delete it.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1517.1">We must add another script to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1518.1">Network Manager</span></strong><span class="koboSpan" id="kobo.1519.1"> to make sure the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1520.1">Head</span></strong><span class="koboSpan" id="kobo.1521.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1522.1">Left Hand</span></strong><span class="koboSpan" id="kobo.1523.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1524.1">Right Hand</span></strong><span class="koboSpan" id="kobo.1525.1"> components follow the position of the user’s headset and controllers. </span><span class="koboSpan" id="kobo.1525.2">To do this, select </span><strong class="source-inline"><span class="koboSpan" id="kobo.1526.1">Network Manager</span></strong><span class="koboSpan" id="kobo.1527.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.1528.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.1529.1"> window, click the </span><strong class="bold"><span class="koboSpan" id="kobo.1530.1">Add component</span></strong><span class="koboSpan" id="kobo.1531.1"> button in the </span><strong class="bold"><span class="koboSpan" id="kobo.1532.1">Inspector</span></strong><span class="koboSpan" id="kobo.1533.1"> window, type </span><strong class="source-inline"><span class="koboSpan" id="kobo.1534.1">NetworkPlayer</span></strong><span class="koboSpan" id="kobo.1535.1"> into the search bar, and create a new script with </span><span class="No-Break"><span class="koboSpan" id="kobo.1536.1">this name.</span></span></p>
<p><span class="koboSpan" id="kobo.1537.1">Now that our script has been created, let’s learn how we can use it to track the player’s position </span><span class="No-Break"><span class="koboSpan" id="kobo.1538.1">and movement.</span></span></p>
<h3><span class="koboSpan" id="kobo.1539.1">Tracking player position and movements</span></h3>
<p><span class="koboSpan" id="kobo.1540.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1541.1">NetworkPlayer</span></strong><span class="koboSpan" id="kobo.1542.1"> script controls how a player’s movements are tracked and represented</span><a id="_idIndexMarker698"/><span class="koboSpan" id="kobo.1543.1"> within the multiplayer VR environment. </span><span class="koboSpan" id="kobo.1543.2">The script encapsulates functionalities that ensure the position and rotation of the avatar’s head, left hand, and right hand are accurately tracked </span><span class="No-Break"><span class="koboSpan" id="kobo.1544.1">and updated.</span></span></p>
<p><span class="koboSpan" id="kobo.1545.1">Let’s have a look at the beginning of </span><span class="No-Break"><span class="koboSpan" id="kobo.1546.1">this script:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1547.1">
using UnityEngine;
using UnityEngine.XR;
using Photon.Pun;
using UnityEngine.InputSystem;
public class NetworkPlayer : MonoBehaviour
{
    public Transform head;
    public Transform leftHand;
    public Transform rightHand;
    private PhotonView photonView;
    public InputActionAsset xriInputActions;
    private InputActionMap headActionMap;
    private InputActionMap leftHandActionMap;
    private InputActionMap rightHandActionMap;
    private InputAction headPositionAction;
    private InputAction headRotationAction;
    private InputAction leftHandPositionAction;
    private InputAction leftHandRotationAction;
    private InputAction rightHandPositionAction;
    private InputAction rightHandRotationAction;
}</span></pre>
<p><span class="koboSpan" id="kobo.1548.1">Besides</span><a id="_idIndexMarker699"/><span class="koboSpan" id="kobo.1549.1"> importing the regular Unity and PUN namespaces, a class named </span><strong class="source-inline"><span class="koboSpan" id="kobo.1550.1">NetworkPlayer</span></strong><span class="koboSpan" id="kobo.1551.1"> inheriting from </span><strong class="source-inline"><span class="koboSpan" id="kobo.1552.1">MonoBehaviour</span></strong><span class="koboSpan" id="kobo.1553.1"> is declared. </span><span class="koboSpan" id="kobo.1553.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1554.1">Transform</span></strong><span class="koboSpan" id="kobo.1555.1"> variables, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1556.1">head</span></strong><span class="koboSpan" id="kobo.1557.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1558.1">leftHand</span></strong><span class="koboSpan" id="kobo.1559.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1560.1">rightHand</span></strong><span class="koboSpan" id="kobo.1561.1">, represent the 3D position, rotation, and scale of a player’s VR avatar components in the game. </span><span class="koboSpan" id="kobo.1561.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1562.1">PhotonView</span></strong><span class="koboSpan" id="kobo.1563.1"> component is fundamental for PUN, determining ownership and synchronization of objects in multiplayer. </span><strong class="source-inline"><span class="koboSpan" id="kobo.1564.1">InputActionAsset</span></strong><span class="koboSpan" id="kobo.1565.1">, called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1566.1">xriInputActions</span></strong><span class="koboSpan" id="kobo.1567.1">, is a Unity-configured set of input definitions tailored for VR headsets. </span><span class="koboSpan" id="kobo.1567.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1568.1">InputActionMap</span></strong><span class="koboSpan" id="kobo.1569.1"> variables, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1570.1">headActionMap</span></strong><span class="koboSpan" id="kobo.1571.1">, group related input actions, allowing for organized handling of inputs such as head or hand movements. </span><span class="koboSpan" id="kobo.1571.2">Finally, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1572.1">InputAction</span></strong><span class="koboSpan" id="kobo.1573.1"> variables such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1574.1">headPositionAction</span></strong><span class="koboSpan" id="kobo.1575.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1576.1">headRotationAction</span></strong><span class="koboSpan" id="kobo.1577.1"> detect individual input movements from the VR headset. </span><span class="koboSpan" id="kobo.1577.2">To synchronize the player’s real-world VR movements with their in-game avatar, we need methods in our script. </span><span class="koboSpan" id="kobo.1577.3">Let’s start with the </span><span class="No-Break"><span class="koboSpan" id="kobo.1578.1">first one:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1579.1">
void Start()
    {
        photonView = GetComponent&lt;PhotonView&gt;();
        // Get the Action Maps
        headActionMap = xriInputActions.FindActionMap("XRI Head");
        leftHandActionMap = xriInputActions.FindActionMap("XRI LeftHand");
        rightHandActionMap = xriInputActions.FindActionMap("XRI RightHand");
        // Get the Position and Rotation actions for each action map
        headPositionAction = headActionMap.FindAction("Position");
        headRotationAction = headActionMap.FindAction("Rotation");
        leftHandPositionAction = leftHandActionMap.FindAction("Position");
        leftHandRotationAction = leftHandActionMap.FindAction("Rotation");
        rightHandPositionAction = rightHandActionMap.FindAction("Position");
        rightHandRotationAction = rightHandActionMap.FindAction("Rotation");
        // Enable actions
        headPositionAction.Enable();
        headRotationAction.Enable();
        leftHandPositionAction.Enable();
        leftHandRotationAction.Enable();
        rightHandPositionAction.Enable();
        rightHandRotationAction.Enable();
    }</span></pre>
<p><span class="koboSpan" id="kobo.1580.1">In </span><a id="_idIndexMarker700"/><span class="koboSpan" id="kobo.1581.1">the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1582.1">Start()</span></strong><span class="koboSpan" id="kobo.1583.1"> method, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1584.1">photonView</span></strong><span class="koboSpan" id="kobo.1585.1"> is initialized. </span><span class="koboSpan" id="kobo.1585.2">Then, action maps of the head, left hand, and right hand are retrieved using their names. </span><span class="koboSpan" id="kobo.1585.3">These names (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1586.1">XRI Head</span></strong><span class="koboSpan" id="kobo.1587.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1588.1">XRI LeftHand</span></strong><span class="koboSpan" id="kobo.1589.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1590.1">XRI RightHand</span></strong><span class="koboSpan" id="kobo.1591.1">) are predefined in </span><strong class="bold"><span class="koboSpan" id="kobo.1592.1">XR Interaction Toolkit Starter Assets</span></strong><span class="koboSpan" id="kobo.1593.1">. </span><span class="koboSpan" id="kobo.1593.2">You will learn more about them later in this chapter. </span><span class="koboSpan" id="kobo.1593.3">From these action maps, the individual </span><strong class="source-inline"><span class="koboSpan" id="kobo.1594.1">Position</span></strong><span class="koboSpan" id="kobo.1595.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1596.1">Rotation</span></strong><span class="koboSpan" id="kobo.1597.1"> actions for the head and each hand are retrieved. </span><span class="koboSpan" id="kobo.1597.2">Lastly, all these actions are enabled so that they begin reading </span><span class="No-Break"><span class="koboSpan" id="kobo.1598.1">input values.</span></span></p>
<p><span class="koboSpan" id="kobo.1599.1">The next </span><a id="_idIndexMarker701"/><span class="koboSpan" id="kobo.1600.1">method in our script is the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1601.1">Update()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1602.1"> method:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1603.1">
void Update()
    {
        if (photonView.IsMine)
        {
            rightHand.gameObject.SetActive(false);
            leftHand.gameObject.SetActive(false);
            head.gameObject.SetActive(false);
            MapPosition(head, XRNode.Head);
            MapPosition(leftHand, XRNode.LeftHand);
            MapPosition(rightHand, XRNode.RightHand);
        }
    }</span></pre>
<p><span class="koboSpan" id="kobo.1604.1">In a Photon-powered multiplayer environment, numerous </span><strong class="source-inline"><span class="koboSpan" id="kobo.1605.1">NetworkPlayer</span></strong><span class="koboSpan" id="kobo.1606.1"> instances will emerge, representing each player in the game. </span><span class="koboSpan" id="kobo.1606.2">However, on every player’s device, only a single instance genuinely represents that specific player, while the rest signify remote players. </span><span class="koboSpan" id="kobo.1606.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1607.1">photonView.IsMine</span></strong><span class="koboSpan" id="kobo.1608.1"> property, when checked within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1609.1">Update()</span></strong><span class="koboSpan" id="kobo.1610.1"> method’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.1611.1">if</span></strong><span class="koboSpan" id="kobo.1612.1"> statement, determines whether the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1613.1">NetworkPlayer</span></strong><span class="koboSpan" id="kobo.1614.1"> instance on a given machine corresponds to the player using that machine. </span><span class="koboSpan" id="kobo.1614.2">This differentiation is pivotal in multiplayer scenarios to identify who has control over certain activities or decisions. </span><span class="koboSpan" id="kobo.1614.3">If it returns true, then the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1615.1">NetworkPlayer</span></strong><span class="koboSpan" id="kobo.1616.1"> instance pertains to the local player of that device. </span><span class="koboSpan" id="kobo.1616.2">Consequently, the visual representation of that player’s head and hands is deactivated, ensuring a seamless </span><span class="No-Break"><span class="koboSpan" id="kobo.1617.1">user experience.</span></span></p>
<p><span class="koboSpan" id="kobo.1618.1">Within our multiplayer scene, two primary players exist: our local player (via </span><strong class="bold"><span class="koboSpan" id="kobo.1619.1">XR Interaction Setup</span></strong><span class="koboSpan" id="kobo.1620.1">) and the remote player (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1621.1">Network Player</span></strong><span class="koboSpan" id="kobo.1622.1">). </span><span class="koboSpan" id="kobo.1622.2">This remote player is visible to all other participants in the multiplayer environment. </span><span class="koboSpan" id="kobo.1622.3">As the local player already has</span><a id="_idIndexMarker702"/><span class="koboSpan" id="kobo.1623.1"> hand models, introducing an additional hand model from the remote player can lead to a disorienting experience, particularly given network update latencies, as you can see in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1624.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1625.1">.11</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1626.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer121">
<span class="koboSpan" id="kobo.1627.1"><img alt="Figure 8.11 – What happens when the SetActive(false) statements are not implemented" src="image/B20869_08_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1628.1">Figure 8.11 – What happens when the SetActive(false) statements are not implemented</span></p>
<p><span class="koboSpan" id="kobo.1629.1">Thus, we ensure the elements of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1630.1">Network Player</span></strong><span class="koboSpan" id="kobo.1631.1"> remain invisible to the user. </span><span class="koboSpan" id="kobo.1631.2">Conversely, if the property returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.1632.1">false</span></strong><span class="koboSpan" id="kobo.1633.1">, it means the instance represents another participant as viewed from that device. </span><span class="koboSpan" id="kobo.1633.2">Finally, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1634.1">if</span></strong><span class="koboSpan" id="kobo.1635.1"> statement also updates the position and rotation of the hands and head based on VR headset or VR controller movements using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1636.1">MapPosition()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1637.1"> method.</span></span></p>
<p><span class="koboSpan" id="kobo.1638.1">Now, let’s have a look at the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1639.1">MapPosition()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1640.1"> method:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1641.1">
void MapPosition(Transform target, XRNode node)
    {
        Vector3 position = Vector3.zero;
        Quaternion rotation = Quaternion.identity;
        if (node == XRNode.Head)
        {
            position = headPositionAction.ReadValue&lt;Vector3&gt;();
            rotation = headRotationAction.ReadValue&lt;Quaternion&gt;();
        }
        else if (node == XRNode.LeftHand)
        {
            position = leftHandPositionAction.ReadValue&lt;Vector3&gt;();
            rotation = leftHandRotationAction.ReadValue&lt;Quaternion&gt;();
        }
        else if (node == XRNode.RightHand)
        {
            position = rightHandPositionAction.ReadValue&lt;Vector3&gt;();
            rotation = rightHandRotationAction.ReadValue&lt;Quaternion&gt;();
        }
        target.position = position;
        target.rotation = rotation;
    }</span></pre>
<p><span class="koboSpan" id="kobo.1642.1">The </span><a id="_idIndexMarker703"/><span class="koboSpan" id="kobo.1643.1">purpose of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1644.1">MapPosition()</span></strong><span class="koboSpan" id="kobo.1645.1"> method is to assign the correct position and rotation to the passed-in </span><strong class="bold"><span class="koboSpan" id="kobo.1646.1">Transform</span></strong><span class="koboSpan" id="kobo.1647.1"> based on the XR input. </span><span class="koboSpan" id="kobo.1647.2">It starts by initializing the position and rotation </span><a id="_idIndexMarker704"/><span class="koboSpan" id="kobo.1648.1">to default values. </span><span class="koboSpan" id="kobo.1648.2">Then, it checks whether the passed-in node is the head, left hand, or right hand via an </span><strong class="source-inline"><span class="koboSpan" id="kobo.1649.1">if</span></strong><span class="koboSpan" id="kobo.1650.1"> statement and reads the corresponding input values. </span><span class="koboSpan" id="kobo.1650.2">For example, if the node is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1651.1">XRNode.Head</span></strong><span class="koboSpan" id="kobo.1652.1">, it reads the position and rotation values from </span><strong class="source-inline"><span class="koboSpan" id="kobo.1653.1">headPositionAction</span></strong><span class="koboSpan" id="kobo.1654.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1655.1">headRotationAction</span></strong><span class="koboSpan" id="kobo.1656.1">, respectively. </span><span class="koboSpan" id="kobo.1656.2">These </span><strong class="source-inline"><span class="koboSpan" id="kobo.1657.1">InputAction</span></strong><span class="koboSpan" id="kobo.1658.1"> variables fetch the latest position and rotation values from the VR headset at every frame. </span><span class="koboSpan" id="kobo.1658.2">Finally, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1659.1">MapPosition()</span></strong><span class="koboSpan" id="kobo.1660.1"> method assigns the fetched position and rotation to the passed-in </span><span class="No-Break"><span class="koboSpan" id="kobo.1661.1">target transform.</span></span></p>
<p><span class="koboSpan" id="kobo.1662.1">In essence, this method ensures that the in-game representation of the player moves in sync with their real-world movements </span><span class="No-Break"><span class="koboSpan" id="kobo.1663.1">in VR.</span></span></p>
<p><span class="koboSpan" id="kobo.1664.1">The last method in this script is the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1665.1">OnDestroy()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1666.1"> method:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1667.1">
void OnDestroy()
    {
        headPositionAction.Disable();
        headRotationAction.Disable();
        leftHandPositionAction.Disable();
        leftHandRotationAction.Disable();
        rightHandPositionAction.Disable();
        rightHandRotationAction.Disable();
    }</span></pre>
<p><span class="koboSpan" id="kobo.1668.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1669.1">OnDestroy()</span></strong><span class="koboSpan" id="kobo.1670.1"> method simply disables all the input actions when the script is destroyed, ensuring no unwanted input readings are occurring in </span><span class="No-Break"><span class="koboSpan" id="kobo.1671.1">the background.</span></span></p>
<p><span class="koboSpan" id="kobo.1672.1">Overall, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1673.1">NetworkPlayer</span></strong><span class="koboSpan" id="kobo.1674.1"> script serves as a bridge, translating a player’s real-world VR movements into the virtual multiplayer space. </span><span class="koboSpan" id="kobo.1674.2">By adding this script to our scene, players can experience a synchronous and immersive VR </span><span class="No-Break"><span class="koboSpan" id="kobo.1675.1">multiplayer environment.</span></span></p>
<p><span class="koboSpan" id="kobo.1676.1">When we test the application now, we can see the head and both of the hands somewhere in the scene aligned with our controller position. </span><span class="koboSpan" id="kobo.1676.2">Next, we’ll animate our hands when we press the trigger and </span><span class="No-Break"><span class="koboSpan" id="kobo.1677.1">grip button.</span></span></p>
<h2 id="_idParaDest-166"><span class="koboSpan" id="kobo.1678.1">Animating the hand models</span></h2>
<p><span class="koboSpan" id="kobo.1679.1">Your</span><a id="_idIndexMarker705"/><span class="koboSpan" id="kobo.1680.1"> multiplayer application has come a long way. </span><span class="koboSpan" id="kobo.1680.2">Now, let’s take the immersion one step further with hand animations. </span><span class="koboSpan" id="kobo.1680.3">By mapping controller inputs to these animations, users will experience a heightened realism within the virtual world. </span><span class="koboSpan" id="kobo.1680.4">If animations sound foreign to you, we recommend a quick detour to the </span><em class="italic"><span class="koboSpan" id="kobo.1681.1">Understanding animations and animator systems</span></em><span class="koboSpan" id="kobo.1682.1"> section of </span><a href="B20869_05.xhtml#_idTextAnchor016"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1683.1">Chapter 5</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1684.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1685.1">Within the </span><strong class="bold"><span class="koboSpan" id="kobo.1686.1">Project</span></strong><span class="koboSpan" id="kobo.1687.1"> window, navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.1688.1">Multiplayer Scene</span></strong><span class="koboSpan" id="kobo.1689.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1690.1">Oculus Hands</span></strong><span class="koboSpan" id="kobo.1691.1">. </span><span class="koboSpan" id="kobo.1691.2">To breathe life into our hands, we need to head to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1692.1">Prefabs</span></strong><span class="koboSpan" id="kobo.1693.1"> folder and then follow </span><span class="No-Break"><span class="koboSpan" id="kobo.1694.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1695.1">Attach an </span><strong class="bold"><span class="koboSpan" id="kobo.1696.1">Animator</span></strong><span class="koboSpan" id="kobo.1697.1"> component to the hand prefabs by clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.1698.1">Add component</span></strong><span class="koboSpan" id="kobo.1699.1"> button in the </span><strong class="bold"><span class="koboSpan" id="kobo.1700.1">Inspector</span></strong><span class="koboSpan" id="kobo.1701.1"> window and searching </span><span class="No-Break"><span class="koboSpan" id="kobo.1702.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1703.1">Animator</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1704.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.1705.1">In </span><a href="B20869_05.xhtml#_idTextAnchor016"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1706.1">Chapter 5</span></em></span></a><span class="koboSpan" id="kobo.1707.1">, we touched on </span><strong class="bold"><span class="koboSpan" id="kobo.1708.1">Animator</span></strong><span class="koboSpan" id="kobo.1709.1"> in Unity, which is essential for controlling character animations. </span><strong class="bold"><span class="koboSpan" id="kobo.1710.1">Animator</span></strong><span class="koboSpan" id="kobo.1711.1"> needs </span><strong class="bold"><span class="koboSpan" id="kobo.1712.1">Animator Controller</span></strong><span class="koboSpan" id="kobo.1713.1"> to manage how animations transition and interact. </span><span class="koboSpan" id="kobo.1713.2">It also requires </span><strong class="bold"><span class="koboSpan" id="kobo.1714.1">Avatar</span></strong><span class="koboSpan" id="kobo.1715.1">, which is a map of the character’s skeletal structure, ensuring animations fit and move realistically on </span><span class="No-Break"><span class="koboSpan" id="kobo.1716.1">the character.</span></span></p></li>
</ol>
<p><span class="koboSpan" id="kobo.1717.1">2.	</span><span class="koboSpan" id="kobo.1717.2">For our avatars, we can select the </span><strong class="bold"><span class="koboSpan" id="kobo.1718.1">L_hand_skeletal_lowres</span></strong><span class="koboSpan" id="kobo.1719.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1720.1">R_hand_skeletal_lowres</span></strong><span class="koboSpan" id="kobo.1721.1"> options from </span><strong class="bold"><span class="koboSpan" id="kobo.1722.1">Multiplayer Scene</span></strong><span class="koboSpan" id="kobo.1723.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1724.1">Oculus</span></strong> <strong class="bold"><span class="koboSpan" id="kobo.1725.1">Hands</span></strong><span class="koboSpan" id="kobo.1726.1"> | </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1727.1">Models</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1728.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1729.1">3.	</span><span class="koboSpan" id="kobo.1729.2">However, we’re yet to acquire </span><strong class="bold"><span class="koboSpan" id="kobo.1730.1">Animator Controllers</span></strong><span class="koboSpan" id="kobo.1731.1">. </span><span class="koboSpan" id="kobo.1731.2">We need one for each hand. </span><span class="koboSpan" id="kobo.1731.3">Initiate this by heading to </span><strong class="bold"><span class="koboSpan" id="kobo.1732.1">Multiplayer Scene</span></strong><span class="koboSpan" id="kobo.1733.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1734.1">Oculus Hands</span></strong><span class="koboSpan" id="kobo.1735.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1736.1">Animations</span></strong><span class="koboSpan" id="kobo.1737.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.1738.1">Project</span></strong><span class="koboSpan" id="kobo.1739.1"> window. </span><span class="koboSpan" id="kobo.1739.2">Subsequently, right-click and select </span><strong class="bold"><span class="koboSpan" id="kobo.1740.1">Create</span></strong><span class="koboSpan" id="kobo.1741.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1742.1">Animator Controller</span></strong><span class="koboSpan" id="kobo.1743.1">. </span><span class="koboSpan" id="kobo.1743.2">Repeat this and name them </span><strong class="source-inline"><span class="koboSpan" id="kobo.1744.1">Left Hand Animator</span></strong><span class="koboSpan" id="kobo.1745.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1746.1">Right </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1747.1">Hand Animator</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1748.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1749.1">Double-click on </span><strong class="source-inline"><span class="koboSpan" id="kobo.1750.1">Left Hand Animator</span></strong><span class="koboSpan" id="kobo.1751.1"> to reveal an </span><strong class="bold"><span class="koboSpan" id="kobo.1752.1">Animator</span></strong><span class="koboSpan" id="kobo.1753.1"> window showcasing </span><strong class="bold"><span class="koboSpan" id="kobo.1754.1">Layers</span></strong><span class="koboSpan" id="kobo.1755.1"> and a </span><strong class="bold"><span class="koboSpan" id="kobo.1756.1">Parameters</span></strong><span class="koboSpan" id="kobo.1757.1"> tab. </span><span class="koboSpan" id="kobo.1757.2">Start with the </span><strong class="bold"><span class="koboSpan" id="kobo.1758.1">Parameters</span></strong><span class="koboSpan" id="kobo.1759.1"> tab and introduce </span><strong class="bold"><span class="koboSpan" id="kobo.1760.1">Grip</span></strong><span class="koboSpan" id="kobo.1761.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1762.1">Trigger</span></strong><span class="koboSpan" id="kobo.1763.1"> parameters, both of the </span><em class="italic"><span class="koboSpan" id="kobo.1764.1">float</span></em><span class="koboSpan" id="kobo.1765.1"> type. </span><span class="koboSpan" id="kobo.1765.2">They indicate the pressure intensity of the trigger and </span><span class="No-Break"><span class="koboSpan" id="kobo.1766.1">grip actions:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1767.1">Trigger</span></strong><span class="koboSpan" id="kobo.1768.1"> determines the degree of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1769.1">hand’s pinch</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1770.1">Grip</span></strong><span class="koboSpan" id="kobo.1771.1"> governs the degree of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1772.1">fist’s bend</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1773.1">However, simply having these parameters won’t magically animate the fingers. </span><span class="koboSpan" id="kobo.1773.2">To bring them to life, we need to bind these parameters to specific animation states or integrate them within blend trees. </span><span class="koboSpan" id="kobo.1773.3">These concepts have different approaches to connecting animation states, so let’s compare them to see which approach fits our needs </span><span class="No-Break"><span class="koboSpan" id="kobo.1774.1">the best:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1775.1">Transitions</span></strong><span class="koboSpan" id="kobo.1776.1"> form the connection between varying animation states. </span><span class="koboSpan" id="kobo.1776.2">For illustration, if you’ve defined two animation states, say </span><strong class="bold"><span class="koboSpan" id="kobo.1777.1">HandOpen</span></strong><span class="koboSpan" id="kobo.1778.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1779.1">HandClosed</span></strong><span class="koboSpan" id="kobo.1780.1">, the </span><strong class="bold"><span class="koboSpan" id="kobo.1781.1">Grip</span></strong><span class="koboSpan" id="kobo.1782.1"> parameter can dictate the switch between these. </span><span class="koboSpan" id="kobo.1782.2">For example, if </span><strong class="bold"><span class="koboSpan" id="kobo.1783.1">Grip</span></strong><span class="koboSpan" id="kobo.1784.1"> surpasses </span><strong class="source-inline"><span class="koboSpan" id="kobo.1785.1">0.5</span></strong><span class="koboSpan" id="kobo.1786.1">, the hand might transition to </span><strong class="bold"><span class="koboSpan" id="kobo.1787.1">HandClosed</span></strong><span class="koboSpan" id="kobo.1788.1">; otherwise, it will remain in the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1789.1">HandOpen</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1790.1"> state.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1791.1">Blend trees</span></strong><span class="koboSpan" id="kobo.1792.1"> enable seamless transitioning between multiple animations depending on one or more parameters. </span><span class="koboSpan" id="kobo.1792.2">It’s analogous to using a music mixer to </span><span class="No-Break"><span class="koboSpan" id="kobo.1793.1">blend songs.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1794.1">For</span><a id="_idIndexMarker706"/><span class="koboSpan" id="kobo.1795.1"> hand animations, it is useful to have three states: </span><strong class="bold"><span class="koboSpan" id="kobo.1796.1">HandOpen</span></strong><span class="koboSpan" id="kobo.1797.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.1798.1">HandHalfClosed</span></strong><span class="koboSpan" id="kobo.1799.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.1800.1">HandFullyClosed</span></strong><span class="koboSpan" id="kobo.1801.1">. </span><span class="koboSpan" id="kobo.1801.2">Instead of basic transitions, which can feel abrupt, a blend tree can be used to fluidly move between these states, all based on the </span><strong class="bold"><span class="koboSpan" id="kobo.1802.1">Grip</span></strong><span class="koboSpan" id="kobo.1803.1"> value. </span><span class="koboSpan" id="kobo.1803.2">This is why it is the best choice for </span><span class="No-Break"><span class="koboSpan" id="kobo.1804.1">our needs.</span></span></p>
<p><span class="koboSpan" id="kobo.1805.1">To set up a blend tree, right-click in the </span><strong class="bold"><span class="koboSpan" id="kobo.1806.1">Base Layer</span></strong><span class="koboSpan" id="kobo.1807.1"> window’s center and opt for </span><strong class="bold"><span class="koboSpan" id="kobo.1808.1">Create State</span></strong><span class="koboSpan" id="kobo.1809.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1810.1">From New Blend Tree</span></strong><span class="koboSpan" id="kobo.1811.1">. </span><span class="koboSpan" id="kobo.1811.2">Your </span><strong class="bold"><span class="koboSpan" id="kobo.1812.1">Baser Layer</span></strong><span class="koboSpan" id="kobo.1813.1"> window should be similar to what’s shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1814.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1815.1">.12</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1816.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer122">
<span class="koboSpan" id="kobo.1817.1"><img alt="Figure 8.12 – Base Layer in the Animator window" src="image/B20869_08_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1818.1">Figure 8.12 – Base Layer in the Animator window</span></p>
<p><span class="koboSpan" id="kobo.1819.1">By double-clicking on </span><strong class="bold"><span class="koboSpan" id="kobo.1820.1">Blend Tree</span></strong><span class="koboSpan" id="kobo.1821.1"> and selecting it afterward, you’ll be prompted to select a </span><strong class="bold"><span class="koboSpan" id="kobo.1822.1">Blend Type</span></strong><span class="koboSpan" id="kobo.1823.1"> property, which includes </span><span class="No-Break"><span class="koboSpan" id="kobo.1824.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1825.1">1D</span></strong><span class="koboSpan" id="kobo.1826.1">: This pivots around a single parameter, such as pacing, to transition between animations such as walking </span><span class="No-Break"><span class="koboSpan" id="kobo.1827.1">and running</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1828.1">2D Freeform Cartesian</span></strong><span class="koboSpan" id="kobo.1829.1">: This employs two separate parameters – for instance, determining animation intensity based on a character’s mood and </span><span class="No-Break"><span class="koboSpan" id="kobo.1830.1">energy levels</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1831.1">2D Freeform Directional</span></strong><span class="koboSpan" id="kobo.1832.1">: Here, two parameters act as directional vectors, such as aiming a weapon in horizontal and </span><span class="No-Break"><span class="koboSpan" id="kobo.1833.1">vertical directions</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1834.1">2D Simple Directional</span></strong><span class="koboSpan" id="kobo.1835.1">: Typically, this uses two parameters, often </span><em class="italic"><span class="koboSpan" id="kobo.1836.1">X</span></em><span class="koboSpan" id="kobo.1837.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.1838.1">Y</span></em><span class="koboSpan" id="kobo.1839.1"> inputs, resembling a joystick’s movements, to determine </span><span class="No-Break"><span class="koboSpan" id="kobo.1840.1">character direction</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1841.1">For </span><a id="_idIndexMarker707"/><span class="koboSpan" id="kobo.1842.1">nuanced hand animations using both </span><strong class="bold"><span class="koboSpan" id="kobo.1843.1">Grip</span></strong><span class="koboSpan" id="kobo.1844.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1845.1">Trigger</span></strong><span class="koboSpan" id="kobo.1846.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.1847.1">2D Freeform Cartesian</span></strong><span class="koboSpan" id="kobo.1848.1"> is ideal. </span><span class="koboSpan" id="kobo.1848.2">Each parameter operates autonomously: </span><strong class="bold"><span class="koboSpan" id="kobo.1849.1">Grip</span></strong><span class="koboSpan" id="kobo.1850.1"> dictates the intensity of the fist, while </span><strong class="bold"><span class="koboSpan" id="kobo.1851.1">Trigger</span></strong><span class="koboSpan" id="kobo.1852.1"> oversees the pinching gesture. </span><span class="koboSpan" id="kobo.1852.2">Adjust </span><strong class="bold"><span class="koboSpan" id="kobo.1853.1">Blend Type</span></strong><span class="koboSpan" id="kobo.1854.1"> to </span><strong class="bold"><span class="koboSpan" id="kobo.1855.1">2D Freeform Cartesian</span></strong><span class="koboSpan" id="kobo.1856.1">, then designate </span><strong class="bold"><span class="koboSpan" id="kobo.1857.1">Grip</span></strong><span class="koboSpan" id="kobo.1858.1"> for the </span><em class="italic"><span class="koboSpan" id="kobo.1859.1">X</span></em><span class="koboSpan" id="kobo.1860.1">-axis and </span><strong class="bold"><span class="koboSpan" id="kobo.1861.1">Trigger</span></strong><span class="koboSpan" id="kobo.1862.1"> for the </span><em class="italic"><span class="koboSpan" id="kobo.1863.1">Y</span></em><span class="koboSpan" id="kobo.1864.1">-axis in the </span><strong class="bold"><span class="koboSpan" id="kobo.1865.1">Inspector</span></strong><span class="koboSpan" id="kobo.1866.1"> window. </span><span class="koboSpan" id="kobo.1866.2">In the same window, we need to define some </span><span class="No-Break"><span class="koboSpan" id="kobo.1867.1">key motions.</span></span></p>
<p><span class="koboSpan" id="kobo.1868.1">For a solid setup, you should consider the following four key motions depicting the extremities of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1869.1">hand movements:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1870.1">Default state</span></strong><span class="koboSpan" id="kobo.1871.1">: The </span><a id="_idIndexMarker708"/><span class="koboSpan" id="kobo.1872.1">hand is in a default, relaxed state. </span><span class="koboSpan" id="kobo.1872.2">This means the </span><strong class="bold"><span class="koboSpan" id="kobo.1873.1">Grip</span></strong><span class="koboSpan" id="kobo.1874.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1875.1">Trigger</span></strong><span class="koboSpan" id="kobo.1876.1"> values are at their minimum values, which is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1877.1">0</span></strong><span class="koboSpan" id="kobo.1878.1">. </span><span class="koboSpan" id="kobo.1878.2">Fortunately, we don’t need to create such an animation clip ourselves as the </span><strong class="bold"><span class="koboSpan" id="kobo.1879.1">Take 001</span></strong><span class="koboSpan" id="kobo.1880.1"> animation clip that comes with the Oculus Hand package we imported earlier in this chapter represents exactly this state. </span><span class="koboSpan" id="kobo.1880.2">You can find this animation clip in the </span><strong class="bold"><span class="koboSpan" id="kobo.1881.1">Project</span></strong><span class="koboSpan" id="kobo.1882.1"> window by navigating to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1883.1">Multiplayer Scene</span></strong><span class="koboSpan" id="kobo.1884.1"> | </span><strong class="source-inline"><span class="koboSpan" id="kobo.1885.1">Oculus Hands</span></strong><span class="koboSpan" id="kobo.1886.1"> | </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1887.1">Animations</span></strong></span><span class="No-Break"><strong class="bold"> </strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1888.1">folder.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1889.1">Hand pose state</span></strong><span class="koboSpan" id="kobo.1890.1">: The</span><a id="_idIndexMarker709"/><span class="koboSpan" id="kobo.1891.1"> hand pose is a pronounced pinch, where the </span><strong class="bold"><span class="koboSpan" id="kobo.1892.1">Grip</span></strong><span class="koboSpan" id="kobo.1893.1"> value is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1894.1">0</span></strong><span class="koboSpan" id="kobo.1895.1"> and the </span><strong class="bold"><span class="koboSpan" id="kobo.1896.1">Trigger</span></strong><span class="koboSpan" id="kobo.1897.1"> value is at its maximum, which is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1898.1">1</span></strong><span class="koboSpan" id="kobo.1899.1">. </span><span class="koboSpan" id="kobo.1899.2">This would be the </span><strong class="bold"><span class="koboSpan" id="kobo.1900.1">l_hand_pinch_anim</span></strong><span class="koboSpan" id="kobo.1901.1"> animation clip, which is in the same folder as </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1902.1">Take 001</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1903.1">.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1904.1">Fist pose state</span></strong><span class="koboSpan" id="kobo.1905.1">: The </span><a id="_idIndexMarker710"/><span class="koboSpan" id="kobo.1906.1">hand is in a fist pose that is entirely clenched, with a </span><strong class="bold"><span class="koboSpan" id="kobo.1907.1">Grip</span></strong><span class="koboSpan" id="kobo.1908.1"> value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1909.1">1</span></strong><span class="koboSpan" id="kobo.1910.1"> and a </span><strong class="bold"><span class="koboSpan" id="kobo.1911.1">Trigger</span></strong><span class="koboSpan" id="kobo.1912.1"> value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1913.1">0</span></strong><span class="koboSpan" id="kobo.1914.1">. </span><span class="koboSpan" id="kobo.1914.2">That would be the </span><strong class="bold"><span class="koboSpan" id="kobo.1915.1">l_hand_fist</span></strong><span class="koboSpan" id="kobo.1916.1"> animation clip in the same </span><strong class="source-inline"><span class="koboSpan" id="kobo.1917.1">Animations </span></strong><span class="koboSpan" id="kobo.1918.1">folder </span><span class="No-Break"><span class="koboSpan" id="kobo.1919.1">as before.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1920.1">Engaged state</span></strong><span class="koboSpan" id="kobo.1921.1">: The</span><a id="_idIndexMarker711"/><span class="koboSpan" id="kobo.1922.1"> hand is fully retracted and engaged, meaning it performs a grip and trigger movement at the same time. </span><span class="koboSpan" id="kobo.1922.2">In this case, the </span><strong class="bold"><span class="koboSpan" id="kobo.1923.1">Grip</span></strong><span class="koboSpan" id="kobo.1924.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1925.1">Trigger</span></strong><span class="koboSpan" id="kobo.1926.1"> values are both set to their maximum values, which is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1927.1">1</span></strong><span class="koboSpan" id="kobo.1928.1"> for both cases. </span><span class="koboSpan" id="kobo.1928.2">This would also be the </span><strong class="bold"><span class="koboSpan" id="kobo.1929.1">l_hand_fist</span></strong><span class="koboSpan" id="kobo.1930.1"> animation clip with both the </span><strong class="bold"><span class="koboSpan" id="kobo.1931.1">X</span></strong><span class="koboSpan" id="kobo.1932.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1933.1">Y</span></strong><span class="koboSpan" id="kobo.1934.1"> positions set </span><span class="No-Break"><span class="koboSpan" id="kobo.1935.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1936.1">1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1937.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1938.1">If you did</span><a id="_idIndexMarker712"/><span class="koboSpan" id="kobo.1939.1"> everything correctly, your </span><strong class="bold"><span class="koboSpan" id="kobo.1940.1">Blend Tree</span></strong><span class="koboSpan" id="kobo.1941.1"> should look as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1942.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1943.1">.13</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1944.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer123">
<span class="koboSpan" id="kobo.1945.1"><img alt="Figure 8.13 – The Blend Tree settings in Unity" src="image/B20869_08_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1946.1">Figure 8.13 – The Blend Tree settings in Unity</span></p>
<p><span class="koboSpan" id="kobo.1947.1">Repeat this process for the </span><strong class="bold"><span class="koboSpan" id="kobo.1948.1">Right Hand</span></strong><span class="koboSpan" id="kobo.1949.1"> animator controller. </span><span class="koboSpan" id="kobo.1949.2">Once we’ve done this, we can drag the just-created </span><strong class="bold"><span class="koboSpan" id="kobo.1950.1">Left Hand</span></strong><span class="koboSpan" id="kobo.1951.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1952.1">Right Hand</span></strong><span class="koboSpan" id="kobo.1953.1"> animator controllers into the corresponding fields of the </span><strong class="bold"><span class="koboSpan" id="kobo.1954.1">Left Hand Model</span></strong><span class="koboSpan" id="kobo.1955.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1956.1">Right Hand </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1957.1">Model</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1958.1"> prefabs.</span></span></p>
<p><span class="koboSpan" id="kobo.1959.1">Next, we just need to create a script that will link the </span><strong class="bold"><span class="koboSpan" id="kobo.1960.1">Grip</span></strong><span class="koboSpan" id="kobo.1961.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1962.1">Trigger</span></strong><span class="koboSpan" id="kobo.1963.1"> variables’ float values to the button inputs of </span><span class="No-Break"><span class="koboSpan" id="kobo.1964.1">our controller.</span></span></p>
<h2 id="_idParaDest-167"><span class="koboSpan" id="kobo.1965.1">Enabling the hand animations at runtime</span></h2>
<p><span class="koboSpan" id="kobo.1966.1">In</span><a id="_idIndexMarker713"/><span class="koboSpan" id="kobo.1967.1"> this section, we’ll be delving into the process of enabling hand animations in real time within our multiplayer VR application. </span><span class="koboSpan" id="kobo.1967.2">This means that during the actual gameplay, as users interact with the virtual environment and other players, they can witness and experience hand gestures such as pinching or making a fist. </span><span class="koboSpan" id="kobo.1967.3">This real-time interaction enhances the immersion and interactivity of our multiplayer VR game. </span><span class="koboSpan" id="kobo.1967.4">By integrating these animations at runtime, users can seamlessly respond to game mechanics or communicate non-verbally with </span><span class="No-Break"><span class="koboSpan" id="kobo.1968.1">other players.</span></span></p>
<p><span class="koboSpan" id="kobo.1969.1">We are</span><a id="_idIndexMarker714"/><span class="koboSpan" id="kobo.1970.1"> going to do this by creating a script to hold our </span><strong class="bold"><span class="koboSpan" id="kobo.1971.1">Hand</span></strong><span class="koboSpan" id="kobo.1972.1"> prefab and trigger the pinch and fist animation when the grip and trigger buttons are pressed. </span><span class="koboSpan" id="kobo.1972.2">Now, let’s begin by heading to </span><strong class="bold"><span class="koboSpan" id="kobo.1973.1">XR Interaction Setup</span></strong><span class="koboSpan" id="kobo.1974.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.1975.1">Scene Hierarchy</span></strong><span class="koboSpan" id="kobo.1976.1"> window. </span><span class="koboSpan" id="kobo.1976.2">Unfold it entirely to access its components. </span><span class="koboSpan" id="kobo.1976.3">Select both </span><strong class="bold"><span class="koboSpan" id="kobo.1977.1">Left Controller</span></strong><span class="koboSpan" id="kobo.1978.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1979.1">Right Controller</span></strong><span class="koboSpan" id="kobo.1980.1"> and proceed to add a new component via the </span><strong class="bold"><span class="koboSpan" id="kobo.1981.1">Inspector</span></strong><span class="koboSpan" id="kobo.1982.1"> window. </span><span class="koboSpan" id="kobo.1982.2">Type </span><strong class="source-inline"><span class="koboSpan" id="kobo.1983.1">HandControllerPresence</span></strong><span class="koboSpan" id="kobo.1984.1"> into the search bar, create a new script with the same name, and then open it. </span><span class="koboSpan" id="kobo.1984.2">We’ll start by defining the </span><span class="No-Break"><span class="koboSpan" id="kobo.1985.1">necessary variables:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1986.1">
    public GameObject handVisualizationPrefab;
    [SerializeField] private InputActionProperty triggerAction;
    [SerializeField] private InputActionProperty gripAction;
    private GameObject instantiatedHandVisual;
    private Animator handMotionController;</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1987.1">handVisualizationPrefab</span></strong><span class="koboSpan" id="kobo.1988.1"> is a public GameObject variable that refers to the hand model prefab that will be animated based on the user’s VR controller inputs. </span><span class="koboSpan" id="kobo.1988.2">In our case, this will be the </span><strong class="bold"><span class="koboSpan" id="kobo.1989.1">Custom Left Hand</span></strong><span class="koboSpan" id="kobo.1990.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1991.1">Custom Right Hand</span></strong><span class="koboSpan" id="kobo.1992.1"> prefabs that we need to drag inside these fields in the Unity Editor. </span><strong class="source-inline"><span class="koboSpan" id="kobo.1993.1">triggerAction</span></strong><span class="koboSpan" id="kobo.1994.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1995.1">gripAction</span></strong><span class="koboSpan" id="kobo.1996.1"> are serialized fields, meaning they can be assigned in the Unity Editor but remain private in the script. </span><span class="koboSpan" id="kobo.1996.2">They are designed to fetch the current values of the trigger and grip </span><span class="No-Break"><span class="koboSpan" id="kobo.1997.1">inputs, respectively.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1998.1">instantiatedHandVisual</span></strong><span class="koboSpan" id="kobo.1999.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2000.1">handMotionController</span></strong><span class="koboSpan" id="kobo.2001.1"> are private variables that are used internally. </span><span class="koboSpan" id="kobo.2001.2">The former stores the instantiated hand model in the scene, while the latter is a reference to the </span><strong class="bold"><span class="koboSpan" id="kobo.2002.1">Animator</span></strong><span class="koboSpan" id="kobo.2003.1"> component on that hand model, which is responsible for handling its animations. </span><span class="koboSpan" id="kobo.2003.2">Let’s continue with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2004.1">Awake()</span></strong><span class="koboSpan" id="kobo.2005.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2006.1">InitializeHandController()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2007.1"> methods:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2008.1">
void Awake()
    {
        InitializeHandController();
    }
    void InitializeHandController()
    {
        instantiatedHandVisual = Instantiate(handVisualizationPrefab, transform);
        handMotionController = instantiatedHandVisual.GetComponent&lt;Animator&gt;();
    }</span></pre>
<p><span class="koboSpan" id="kobo.2009.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2010.1">Awake()</span></strong><span class="koboSpan" id="kobo.2011.1"> method </span><a id="_idIndexMarker715"/><span class="koboSpan" id="kobo.2012.1">is called when the script instance is loaded. </span><span class="koboSpan" id="kobo.2012.2">Here, it calls the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2013.1">InitializeHandController()</span></strong><span class="koboSpan" id="kobo.2014.1"> method to set up the hand visuals and animations. </span><span class="koboSpan" id="kobo.2014.2">This method instantiates the hand model prefab in the scene and attaches it to the object to which this script is attached. </span><span class="koboSpan" id="kobo.2014.3">Then, it fetches and stores the </span><strong class="bold"><span class="koboSpan" id="kobo.2015.1">Animator</span></strong><span class="koboSpan" id="kobo.2016.1"> component of the instantiated hand model in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2017.1">handMotionController</span></strong><span class="koboSpan" id="kobo.2018.1"> variable. </span><span class="koboSpan" id="kobo.2018.2">This </span><strong class="bold"><span class="koboSpan" id="kobo.2019.1">Animator</span></strong><span class="koboSpan" id="kobo.2020.1"> component will be used to control the hand’s animations based on the VR controller inputs. </span><span class="koboSpan" id="kobo.2020.2">Now, let’s continue with the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2021.1">AdjustHandMotion()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2022.1"> method:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2023.1">
   void AdjustHandMotion()
    {
        float triggerIntensity = triggerAction.action.ReadValue&lt;float&gt;();
        float gripIntensity = gripAction.action.ReadValue&lt;float&gt;();
        handMotionController.SetFloat("Trigger", triggerIntensity);
        handMotionController.SetFloat("Grip", gripIntensity);
    }</span></pre>
<p><span class="koboSpan" id="kobo.2024.1">This method fetches the current values of the trigger and grip inputs using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2025.1">triggerAction</span></strong><span class="koboSpan" id="kobo.2026.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2027.1">gripAction</span></strong><span class="koboSpan" id="kobo.2028.1"> variables, respectively. </span><span class="koboSpan" id="kobo.2028.2">These values are in the range of 0 (not pressed) to 1 (</span><span class="No-Break"><span class="koboSpan" id="kobo.2029.1">fully pressed).</span></span></p>
<p><span class="koboSpan" id="kobo.2030.1">The</span><a id="_idIndexMarker716"/><span class="koboSpan" id="kobo.2031.1"> fetched values (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2032.1">triggerIntensity</span></strong><span class="koboSpan" id="kobo.2033.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2034.1">gripIntensity</span></strong><span class="koboSpan" id="kobo.2035.1">) are then passed to the hand’s </span><strong class="bold"><span class="koboSpan" id="kobo.2036.1">Animator</span></strong><span class="koboSpan" id="kobo.2037.1"> component using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2038.1">SetFloat()</span></strong><span class="koboSpan" id="kobo.2039.1"> method. </span><span class="koboSpan" id="kobo.2039.2">This effectively adjusts the hand’s animation based on the real-time inputs from the VR controller. </span><span class="koboSpan" id="kobo.2039.3">Finally, we just need to call this method once per frame to ensure that the hand’s animations are updated in real time to match the user’s VR controller inputs. </span><span class="koboSpan" id="kobo.2039.4">This is done in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2040.1">Update()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2041.1"> method:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2042.1">
  void Update()
    {
        AdjustHandMotion();
    }</span></pre>
<p><span class="koboSpan" id="kobo.2043.1">Now, we just need to assign the corresponding </span><strong class="source-inline"><span class="koboSpan" id="kobo.2044.1">handVisualiationPrefab</span></strong><span class="koboSpan" id="kobo.2045.1"> and the controller actions to the </span><strong class="bold"><span class="koboSpan" id="kobo.2046.1">Trigger Action</span></strong><span class="koboSpan" id="kobo.2047.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.2048.1">Grip Action</span></strong><span class="koboSpan" id="kobo.2049.1"> fields for both controllers, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2050.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.2051.1">.14</span></em><span class="koboSpan" id="kobo.2052.1"> for the </span><span class="No-Break"><span class="koboSpan" id="kobo.2053.1">left controller.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer124">
<span class="koboSpan" id="kobo.2054.1"><img alt="Figure 8.14 – ﻿The HandControllerPresence script and its references﻿" src="image/B20869_08_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2055.1">Figure 8.14 – The HandControllerPresence script and its references</span></p>
<p><span class="koboSpan" id="kobo.2056.1">You might be wondering why exactly are we using the </span><strong class="bold"><span class="koboSpan" id="kobo.2057.1">XRI LeftHand</span></strong><span class="koboSpan" id="kobo.2058.1"> references shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2059.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.2060.1">.14</span></em><span class="koboSpan" id="kobo.2061.1">. </span><span class="koboSpan" id="kobo.2061.2">In our scene, we are using </span><strong class="bold"><span class="koboSpan" id="kobo.2062.1">XR Interaction Setup</span></strong><span class="koboSpan" id="kobo.2063.1">, which comes with the XR Interaction Toolkit’s </span><strong class="bold"><span class="koboSpan" id="kobo.2064.1">Starter Assets</span></strong><span class="koboSpan" id="kobo.2065.1">. </span><span class="koboSpan" id="kobo.2065.2">This </span><strong class="bold"><span class="koboSpan" id="kobo.2066.1">XR Interaction Setup</span></strong><span class="koboSpan" id="kobo.2067.1"> uses </span><strong class="bold"><span class="koboSpan" id="kobo.2068.1">XRI Default Input Actions</span></strong><span class="koboSpan" id="kobo.2069.1"> as controller </span><span class="No-Break"><span class="koboSpan" id="kobo.2070.1">input handling.</span></span></p>
<p><span class="koboSpan" id="kobo.2071.1">Let’s have a look at them by heading to </span><strong class="bold"><span class="koboSpan" id="kobo.2072.1">Samples</span></strong><span class="koboSpan" id="kobo.2073.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.2074.1">XR Interaction Toolkits</span></strong><span class="koboSpan" id="kobo.2075.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.2076.1">Your</span></strong> <strong class="bold"><span class="koboSpan" id="kobo.2077.1">Version</span></strong><span class="koboSpan" id="kobo.2078.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.2079.1">Starter Assets</span></strong><span class="koboSpan" id="kobo.2080.1"> and double-clicking on </span><strong class="bold"><span class="koboSpan" id="kobo.2081.1">XRI Default Input Actions</span></strong><span class="koboSpan" id="kobo.2082.1">. </span><span class="koboSpan" id="kobo.2082.2">This will open the window shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2083.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2084.1">.15</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2085.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer125">
<span class="koboSpan" id="kobo.2086.1"><img alt="Figure 8.15 – The XRI Default Input Actions of the XR Interaction Toolkit" src="image/B20869_08_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2087.1">Figure 8.15 – The XRI Default Input Actions of the XR Interaction Toolkit</span></p>
<p><span class="koboSpan" id="kobo.2088.1">The</span><a id="_idIndexMarker717"/><span class="koboSpan" id="kobo.2089.1"> XR Interaction Toolkit action-based input system in Unity allows for device-agnostic control setups. </span><span class="koboSpan" id="kobo.2089.2">It uses </span><strong class="bold"><span class="koboSpan" id="kobo.2090.1">Action Maps</span></strong><span class="koboSpan" id="kobo.2091.1"> to group related actions, such as </span><strong class="bold"><span class="koboSpan" id="kobo.2092.1">XRI LeftHand Interaction</span></strong><span class="koboSpan" id="kobo.2093.1">, to handle specific actions such as </span><strong class="bold"><span class="koboSpan" id="kobo.2094.1">Select Value</span></strong><span class="koboSpan" id="kobo.2095.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.2096.1">Activate Value</span></strong><span class="koboSpan" id="kobo.2097.1">. </span><span class="koboSpan" id="kobo.2097.2">These actions are then tied to specific inputs, called </span><strong class="bold"><span class="koboSpan" id="kobo.2098.1">bindings</span></strong><span class="koboSpan" id="kobo.2099.1">, such as the </span><strong class="bold"><span class="koboSpan" id="kobo.2100.1">Grip</span></strong><span class="koboSpan" id="kobo.2101.1"> button or the </span><strong class="bold"><span class="koboSpan" id="kobo.2102.1">Trigger</span></strong><span class="koboSpan" id="kobo.2103.1"> button of an XR controller, allowing </span><a id="_idIndexMarker718"/><span class="koboSpan" id="kobo.2104.1">for flexible and intuitive control configurations across various XR devices. </span><span class="koboSpan" id="kobo.2104.2">You can add additional action maps, actions, and bindings or change existing ones. </span><span class="koboSpan" id="kobo.2104.3">You can even build a complete Input Actions setup of your own under </span><strong class="bold"><span class="koboSpan" id="kobo.2105.1">Assets</span></strong><span class="koboSpan" id="kobo.2106.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.2107.1">Create</span></strong><span class="koboSpan" id="kobo.2108.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.2109.1">Input Actions</span></strong><span class="koboSpan" id="kobo.2110.1">. </span><span class="koboSpan" id="kobo.2110.2">However, you’ll need to link this new Input Actions setup in the </span><strong class="bold"><span class="koboSpan" id="kobo.2111.1">Inspector</span></strong><span class="koboSpan" id="kobo.2112.1"> window of </span><strong class="bold"><span class="koboSpan" id="kobo.2113.1">Input Action Manager</span></strong><span class="koboSpan" id="kobo.2114.1"> under </span><strong class="bold"><span class="koboSpan" id="kobo.2115.1">Action Assets</span></strong><span class="koboSpan" id="kobo.2116.1">. </span><span class="koboSpan" id="kobo.2116.2">With that, we have implemented the animation of the hand models. </span><span class="koboSpan" id="kobo.2116.3">To begin testing the application with a friend, follow these </span><span class="No-Break"><span class="koboSpan" id="kobo.2117.1">simple steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.2118.1">Open your Unity project and navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.2119.1">File</span></strong><span class="koboSpan" id="kobo.2120.1">, then </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2121.1">Build Settings</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2122.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.2123.1">Add the currently open scene to </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2124.1">Build Settings</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2125.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.2126.1">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.2127.1">Build</span></strong><span class="koboSpan" id="kobo.2128.1"> option. </span><span class="koboSpan" id="kobo.2128.2">When prompted, choose a directory that you can easily access </span><span class="No-Break"><span class="koboSpan" id="kobo.2129.1">and remember.</span></span></li>
<li><span class="koboSpan" id="kobo.2130.1">This action will generate an executable file along with other vital scene-related files in the chosen directory. </span><span class="koboSpan" id="kobo.2130.2">For your friend to join in, share the entire folder </span><span class="No-Break"><span class="koboSpan" id="kobo.2131.1">with them.</span></span></li>
<li><span class="koboSpan" id="kobo.2132.1">Initiate your connection to the server by pressing the </span><strong class="bold"><span class="koboSpan" id="kobo.2133.1">Play</span></strong><span class="koboSpan" id="kobo.2134.1"> button. </span><span class="koboSpan" id="kobo.2134.2">As you await your connection, instruct your friend to launch the </span><span class="No-Break"><span class="koboSpan" id="kobo.2135.1">executable file.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.2136.1">And voilà! </span><span class="koboSpan" id="kobo.2136.2">You’ve successfully set up your first multiplayer environment. </span><span class="koboSpan" id="kobo.2136.3">Now, both you and your friend can interact, as depicted in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2137.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2138.1">.16</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2139.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer126">
<span class="koboSpan" id="kobo.2140.1"><img alt="Figure 8.16 – Me and my friend in our multiplayer environment" src="image/B20869_08_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2141.1">Figure 8.16 – Me and my friend in our multiplayer environment</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.2142.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.2143.1">You might have noticed a stunning deep-space background with a picturesque planet. </span><span class="koboSpan" id="kobo.2143.2">This aesthetic touch is provided by the Skybox Volume 2 package, which we imported from the Unity Asset Store (</span><a href="https://assetstore.unity.com/packages/2d/textures-materials/sky/skybox-volume-2-nebula-3392"><span class="koboSpan" id="kobo.2144.1">https://assetstore.unity.com/packages/2d/textures-materials/sky/skybox-volume-2-nebula-3392</span></a><span class="koboSpan" id="kobo.2145.1">). </span><span class="koboSpan" id="kobo.2145.2">It significantly enhances the ambiance of </span><span class="No-Break"><span class="koboSpan" id="kobo.2146.1">our environment.</span></span></p>
<p><span class="koboSpan" id="kobo.2147.1">As we </span><a id="_idIndexMarker719"/><span class="koboSpan" id="kobo.2148.1">approach the end of this chapter, you should now feel capable and confident in enhancing your XR experiences using advanced techniques. </span><span class="koboSpan" id="kobo.2148.2">However, this doesn’t imply that every feature, such as eye-tracking or hand-tracking, should be mindlessly applied to all your projects. </span><span class="koboSpan" id="kobo.2148.3">Nor does it imply that all your subsequent XR endeavors must be </span><span class="No-Break"><span class="koboSpan" id="kobo.2149.1">multiplayer applications.</span></span></p>
<p><span class="koboSpan" id="kobo.2150.1">What it does mean is that you’ve broadened your horizons. </span><span class="koboSpan" id="kobo.2150.2">You now possess a richer repertoire of interaction techniques to create your XR applications. </span><span class="koboSpan" id="kobo.2150.3">Instead of indiscriminately applying eye-tracking to every scene element, for instance, you can selectively use it for components that would truly benefit from it. </span><span class="koboSpan" id="kobo.2150.4">Imagine a virtual exhibition of firefighter vehicles: rather than overloading the user with information, you could </span><a id="_idIndexMarker720"/><span class="koboSpan" id="kobo.2151.1">seamlessly display technical specifications when the user’s gaze settles on a particular vehicle. </span><span class="koboSpan" id="kobo.2151.2">Interactive components such as animated firefighters or explorable vehicle interiors can be activated based on the user’s visual focus, providing an engaging and dynamic user experience. </span><span class="koboSpan" id="kobo.2151.3">Similarly, in a treasure-hunting game, a hint might reveal itself when a player’s gaze meets a mystical mirror. </span><span class="koboSpan" id="kobo.2151.4">The possibilities </span><span class="No-Break"><span class="koboSpan" id="kobo.2152.1">are endless!</span></span></p>
<h1 id="_idParaDest-168"><span class="koboSpan" id="kobo.2153.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.2154.1">In this chapter, you learned how to implement hand-tracking, gaze-tracking, and multiplayer capabilities into your XR scenes. </span><span class="koboSpan" id="kobo.2154.2">Incorporating these high-level XR methods into your future XR projects will enable you to create much more intuitive, immersive, and fun experiences for users. </span><span class="koboSpan" id="kobo.2154.3">Combined with the knowledge you gained in the previous chapters on how to create and deploy interactive XR experiences, you should feel comfortable developing a wide range of XR projects yourself, no matter if they involve coding, animations, particles, audio, or </span><span class="No-Break"><span class="koboSpan" id="kobo.2155.1">multiplayer support.</span></span></p>
<p><span class="koboSpan" id="kobo.2156.1">Now that you have a firm grip on the technical and programming aspects of XR, the next chapter will shift the spotlight to the business realm of XR. </span><span class="koboSpan" id="kobo.2156.2">There, you’ll explore powerful XR plugins and toolkits beyond the XR Interaction Toolkit, ARKit, ARCore, and AR Foundation that could be valuable additions to your XR development skills moving forward. </span><span class="koboSpan" id="kobo.2156.3">The subsequent chapter won’t just keep you up to date on the latest trends in XR but will also equip you with industry best practices to ensure the success of </span><span class="No-Break"><span class="koboSpan" id="kobo.2157.1">your projects.</span></span></p>
</div>
</body></html>