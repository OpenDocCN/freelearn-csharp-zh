<html><head></head><body>
		<div id="_idContainer037">
			<h1 id="_idParaDest-44" class="chapter-number"><a id="_idTextAnchor044"/>2</h1>
			<h1 id="_idParaDest-45"><a id="_idTextAnchor045"/>Configuring the Development Environment and Creating the Project</h1>
			<p>To get started with WinUI and Windows App SDK development, it is important to install and configure Visual Studio for Windows desktop development. A WinUI developer must also understand the<a id="_idIndexMarker119"/> basics of application<strong class="bold"> </strong>development with <strong class="bold">Extensible Application Markup Language</strong> (<strong class="bold">XAML</strong>) and<a id="_idIndexMarker120"/> C#, which we started learning in <a href="B20908_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic">Chapter 1</em></span></a>, <em class="italic">Introduction to WinUI</em>. However, the best way to understand the development concept is to get your hands on a real project. We will do that in <span class="No-Break">this chapter.</span></p>
			<p>After setting up your Visual Studio development environment, you will create the beginnings of a project that we will be building throughout the rest of <span class="No-Break">the book.</span></p>
			<p>In this chapter, you will learn the <span class="No-Break">following topics:</span></p>
			<ul>
				<li>How to set up a new Visual Studio installation for Windows desktop <span class="No-Break">application development</span></li>
				<li>How to create a new WinUI project, add a few controls, and run the project for the <span class="No-Break">first time</span></li>
				<li>The anatomy of a new WinUI project and why each part <span class="No-Break">is important</span></li>
				<li>How XAML can be used to build flexible, performant <strong class="bold">user </strong><span class="No-Break"><strong class="bold">interfaces</strong></span><span class="No-Break"> (</span><span class="No-Break"><strong class="bold">UIs</strong></span><span class="No-Break">)</span></li>
				<li>How WinUI fits with .NET and the role of each layer in the overall <span class="No-Break">application architecture</span></li>
				<li>How to work with WinUI controls and customize them through changes in the XAML markup or <span class="No-Break">C# code</span></li>
				<li>How to handle some basic <span class="No-Break">UI events</span></li>
			</ul>
			<p>If you are new to WinUI and other XAML-based development platforms, by the end of this chapter, you should be starting to feel comfortable working with <span class="No-Break">WinUI projects.</span></p>
			<h1 id="_idParaDest-46"><a id="_idTextAnchor046"/>Technical requirements</h1>
			<p>To follow along with the examples in this chapter, the following software <span class="No-Break">is required:</span></p>
			<ul>
				<li>Windows 10, version 1809 (build 17763) or newer or <span class="No-Break">Windows 11</span></li>
				<li>Visual Studio 2022 version 17.1 or later with the <strong class="bold">.NET desktop development</strong> workload and <strong class="bold">Windows App SDK C# Templates</strong> selected <span class="No-Break">during installation</span></li>
			</ul>
			<p>The source code for this chapter is available on GitHub at this <span class="No-Break">URL: </span><a href="https://github.com/PacktPublishing/Learn-WinUI-3-Second-Edition/tree/main/Chapter02"><span class="No-Break">https://github.com/PacktPublishing/Learn-WinUI-3-Second-Edition/tree/main/Chapter02</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-47"><a id="_idTextAnchor047"/>Installing Visual Studio and Windows desktop development workloads</h1>
			<p>The<a id="_idIndexMarker121"/> first step to follow when starting with WinUI development is to install Microsoft’s Visual <a id="_idIndexMarker122"/>Studio <strong class="bold">integrated development environment</strong> (<strong class="bold">IDE</strong>). You can download the current version of Visual Studio 2022<a id="_idIndexMarker123"/> from <a href="https://visualstudio.microsoft.com/downloads/">https://visualstudio.microsoft.com/downloads/</a>. Visual Studio 2022 Community Edition<a id="_idIndexMarker124"/> is free for personal use and has all the features you will need to build <span class="No-Break">WinUI applications.</span></p>
			<p class="callout-heading">Tip</p>
			<p class="callout">If you want to try new Visual Studio features before they are released, you can install the latest<a id="_idIndexMarker125"/> Visual Studio Preview version from <a href="https://visualstudio.microsoft.com/vs/preview/">https://visualstudio.microsoft.com/vs/preview/</a>. The Preview version is not recommended for the development of production applications as some features <span class="No-Break">are unstable.</span></p>
			<p>During<a id="_idIndexMarker126"/> installation, you can select workloads for any type of application that you want to create. For WinUI <a id="_idIndexMarker127"/>development, you must start by selecting the <strong class="bold">.NET desktop development</strong> workload. An overview of the <strong class="bold">Workloads</strong> section is shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer017" class="IMG---Figure">
					<img src="image/B20908_02_01.jpg" alt="Figure 2.1 – Visual Studio Installer workload selection"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.1 – Visual Studio Installer workload selection</p>
			<p>After the <strong class="bold">.NET desktop development</strong> workload has been selected, select the <strong class="bold">Windows App SDK C# Templates</strong> component from the <strong class="bold">Installation details</strong> pane. These templates, required for building WinUI apps, are not installed by default with <span class="No-Break">the workload.</span></p>
			<div>
				<div id="_idContainer018" class="IMG---Figure">
					<img src="image/B20908_02_02.jpg" alt="Figure 2.2 – Selecting the Windows App SDK C# Templates component for installation"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.2 – Selecting the Windows App SDK C# Templates component for installation</p>
			<p class="callout-heading">Note</p>
			<p class="callout">If you are a C++ developer and would like to build WinUI apps with C++, you must select the <strong class="bold">Desktop development with C++</strong> workload and the optional <strong class="bold">Windows App SDK C++ Templates</strong> component within the <strong class="bold">Desktop development with C++</strong> workload. However, building WinUI applications with C++ is beyond the scope of <span class="No-Break">this book.</span></p>
			<p>When <a id="_idIndexMarker128"/>continuing to the next step, the Visual Studio Installer will download and install all selected workloads and components. When setup is complete, launch Visual Studio. The <a id="_idIndexMarker129"/>first time you run Visual Studio, you will be prompted to sign in with a Microsoft account. Linking Visual Studio to your account will enable Visual Studio to sync your settings, link any available licenses, and link your Microsoft Store account after it has been created. We will discuss more about the Microsoft Store and application distribution in <a href="B20908_14.xhtml#_idTextAnchor582"><span class="No-Break"><em class="italic">Chapter 14</em></span></a>, <em class="italic">Packaging and Deploying </em><span class="No-Break"><em class="italic">WinUI Applications</em></span><span class="No-Break">.</span></p>
			<p>Now, it’s time to start building our <span class="No-Break">WinUI application.</span></p>
			<h1 id="_idParaDest-48"><a id="_idTextAnchor048"/>Introducing the application idea</h1>
			<p>The application <a id="_idIndexMarker130"/>we’re going to build is a tool called <strong class="bold">My Media Collection</strong>. It’s a simple utility that can catalog your entire media library. Because digital media is becoming more popular as time goes on, we can design the application to support the inclusion of both physical and digital media. The application will be able to catalog different types of media, including music, video, and books. We’ll add some features that will only light up for certain media types. Physical media (books, DVDs, and CDs) are often loaned to friends. This application will help you remember who borrowed your favorite book at a recent <span class="No-Break">family party.</span></p>
			<h2 id="_idParaDest-49"><a id="_idTextAnchor049"/>Reviewing the application features</h2>
			<p>Before we dive in and <a id="_idIndexMarker131"/>create the new project, let’s get organized. It helps to understand what you’re going to build so that you can track your progress while progressing through each chapter. If you’re tracking your development on GitHub, you could create an <strong class="bold">Issue</strong> for each feature. Let’s start with a high-level look at the application’s features, <span class="No-Break">as follows:</span></p>
			<ul>
				<li>View <span class="No-Break">all media</span></li>
				<li>Filter the media library by the following: <strong class="bold">Media Type</strong> (<strong class="bold">Music</strong>, <strong class="bold">Video</strong>, or <strong class="bold">Book</strong>), <strong class="bold">Medium</strong> (the available choices will vary by media type but will include <strong class="bold">CD</strong>, <strong class="bold">Record</strong>, <strong class="bold">DVD</strong>, <strong class="bold">Blu-Ray</strong>, <strong class="bold">Hardcover</strong>, <strong class="bold">Paperback</strong>, <strong class="bold">Digital</strong>), or <strong class="bold">Location</strong> (<strong class="bold">In Collection</strong> <span class="No-Break">or </span><span class="No-Break"><strong class="bold">Loaned</strong></span><span class="No-Break">)</span></li>
				<li>Add a new <span class="No-Break">media item</span></li>
				<li>Edit a <span class="No-Break">media item</span></li>
				<li>Mark an item as loaned <span class="No-Break">or returned</span></li>
				<li><span class="No-Break">Application sign-in</span></li>
				<li>Back up (or restore) the collection data <span class="No-Break">with OneDrive</span></li>
			</ul>
			<p>The application will use<a id="_idIndexMarker132"/> features of the <strong class="bold">Windows Community Toolkit</strong>, which can simplify things such as Microsoft account authentication and file access on<a id="_idIndexMarker133"/> OneDrive. You can read more about the toolkit on Microsoft Learn: <a href="https://learn.microsoft.com/dotnet/communitytoolkit/windows/">https://learn.microsoft.com/dotnet/communitytoolkit/windows/</a>. The application’s data will be stored in a local <strong class="bold">SQLite</strong> database, allowing <a id="_idIndexMarker134"/>for online or offline access to the media collection. You’ll even be able to send email<a id="_idIndexMarker135"/> reminders if one of your friends is taking a little too long in returning one of the items in <span class="No-Break">your collection.</span></p>
			<h2 id="_idParaDest-50"><a id="_idTextAnchor050"/>WinUI in Desktop projects</h2>
			<p>In this chapter, we will be building a Windows App SDK application with the <strong class="bold">WinUI in Desktop</strong> project template. A <strong class="bold">WinUI in Desktop</strong> project targets the .NET runtime while using the same XAML schema as a <span class="No-Break">UWP project.</span></p>
			<p>A <strong class="bold">WinUI in Desktop</strong> project<a id="_idIndexMarker136"/> also includes a <strong class="bold">Windows Application Packaging</strong> project<a id="_idIndexMarker137"/> in the newly created solution. We will learn more about packaging WinUI applications in <a href="B20908_14.xhtml#_idTextAnchor582"><span class="No-Break"><em class="italic">Chapter 14</em></span></a>, <em class="italic">Packaging and Deploying WinUI Applications</em>. Now, let’s get started with our <span class="No-Break">first project.</span></p>
			<h1 id="_idParaDest-51"><a id="_idTextAnchor051"/>Creating your first WinUI project</h1>
			<p>It’s <a id="_idIndexMarker138"/>time to start building the project. To do so, proceed <span class="No-Break">as follows:</span></p>
			<ol>
				<li>Launch Visual Studio, and from the opening screen, select <strong class="bold">Create a new project</strong>, as illustrated in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer019" class="IMG---Figure">
					<img src="image/B20908_02_03.jpg" alt="Figure 2.3 – The initial Visual Studio dialog"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.3 – The initial Visual Studio dialog</p>
			<ol>
				<li value="2">On <a id="_idIndexMarker139"/>the <strong class="bold">Create a new project</strong> screen, enter <strong class="source-inline">winui</strong> in the <strong class="bold">Search for templates</strong> field, select the <strong class="bold">Blank App, Packaged (WinUI 3 in Desktop)</strong> C# template, and click <strong class="bold">Next</strong>, as illustrated in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer020" class="IMG---Figure">
					<img src="image/B20908_02_04.jpg" alt="Figure 2.4 – Selecting the project template"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.4 – Selecting the project template</p>
			<p class="callout-heading">Tip</p>
			<p class="callout">Be sure to select the <strong class="bold">C#</strong> project template and not <strong class="bold">C++</strong>. You can filter the project types to show only C# projects by changing the <strong class="bold">Language</strong> filter from <strong class="bold">All languages</strong> <span class="No-Break">to </span><span class="No-Break"><strong class="bold">C#</strong></span><span class="No-Break">.</span></p>
			<ol>
				<li value="3">Name<a id="_idIndexMarker140"/> the project <strong class="source-inline">MyMediaCollection</strong>, leave the rest of the fields set to their default values, and click <strong class="bold">Create</strong>. You may be prompted to select the Windows versions to target with your app. You can leave these set to their default values for <span class="No-Break">this project.</span></li>
			</ol>
			<p class="callout-heading">Note</p>
			<p class="callout">It is up to you whether you want to change these versions for your app, but you will be limiting the versions of Windows that can install your app. If you are using a control or feature that you know is only available in specific versions of Windows, you must select that version as the <strong class="bold">Minimum version</strong>. The <strong class="bold">Target version</strong> must be equal to or greater than the <strong class="bold">Minimum version</strong>. If you are unsure of what to choose, you should stick with the <span class="No-Break">default values.</span></p>
			<ol>
				<li value="4">Now, the <a id="_idIndexMarker141"/>project has been created and Visual Studio has loaded, it’s always a best practice to build and run the project. Run the application and see what the template has provided for <strong class="source-inline">MainWindow</strong>. You should see an empty window hosting a few controls. Next, we will see what Visual Studio has created to get <span class="No-Break">us started.</span></li>
			</ol>
			<p class="callout-heading">Note</p>
			<p class="callout">To run and debug WinUI apps on Windows, you must update your Windows settings to enable <strong class="bold">Developer Mode</strong>. To do this, follow <span class="No-Break">these steps:</span></p>
			<p class="callout">1. Open <strong class="bold">Settings</strong> from the <span class="No-Break"><strong class="bold">Start</strong></span><span class="No-Break"> menu.</span></p>
			<p class="callout">2. Type <strong class="source-inline">Developer</strong> in the search bar and select the <strong class="bold">For Developers</strong> settings from the <span class="No-Break">search results.</span></p>
			<p class="callout">3. On the <strong class="bold">For developers</strong> page that appears, switch the <strong class="bold">Developer Mode</strong> toggle switch on, if it is not already turned on. Enabling this allows developers to sideload, run, and debug unsigned apps, and enables some other developer-focused Windows settings. You can get more information <span class="No-Break">here: </span><a href="https://learn.microsoft.com/windows/apps/get-started/enable-your-device-for-development"><span class="No-Break">https://learn.microsoft.com/windows/apps/get-started/enable-your-device-for-development</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-52"><a id="_idTextAnchor052"/>Anatomy of a WinUI in Desktop project</h1>
			<p>Now that we have a<a id="_idIndexMarker142"/> new empty WinUI project loaded in Visual Studio, let’s examine the different components. In <strong class="bold">Solution Explorer</strong>, you will see two XAML files, named <strong class="source-inline">App.xaml</strong> and <strong class="source-inline">MainWindow.xaml</strong>. We will start by discussing the purpose of each of these. Both files can be seen in the following screenshot of <span class="No-Break"><strong class="bold">Solution Explorer</strong></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer021" class="IMG---Figure">
					<img src="image/B20908_02_05.jpg" alt="Figure 2.5 – The new WinUI solution in Solution Explorer"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.5 – The new WinUI solution in Solution Explorer</p>
			<h2 id="_idParaDest-53"><a id="_idTextAnchor053"/>Reviewing App.xaml</h2>
			<p>The <strong class="source-inline">App.xaml</strong> file, as its <a id="_idIndexMarker143"/>name implies, stores resources available across the entire application. If you have any templates or styles that will need to be used across multiple windows, they should be added at the <span class="No-Break"><strong class="source-inline">Application</strong></span><span class="No-Break"> level.</span></p>
			<p>The new project’s <strong class="source-inline">App.xaml</strong> file will contain some initial markup, as illustrated in the following <span class="No-Break">code snippet:</span></p>
			<pre class="source-code">
&lt;Application
    x:Class="MyMediaCollection.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/
  presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyMediaCollection"&gt;
    &lt;Application.Resources&gt;
        &lt;ResourceDictionary&gt;
            &lt;ResourceDictionary.MergedDictionaries&gt;
                &lt;XamlControlsResources
                  xmlns="using:Microsoft.UI
                    .Xaml.Controls" /&gt;
                &lt;!-- Other merged dictionaries here --&gt;
            &lt;/ResourceDictionary.MergedDictionaries&gt;
            &lt;!-- Other app resources here --&gt;
        &lt;/ResourceDictionary&gt;
    &lt;/Application.Resources&gt;
&lt;/Application&gt;</pre>			<p>We will cover some XAML basics in the next section. For now, you should know that the <strong class="source-inline">Application.Resources</strong> section will contain all the resources to be shared across an application. Within this section, the <strong class="source-inline">ResourceDictionary.MergedDictionaries</strong> section contains references to other XAML files whose resources will be shared with the entire application. This allows developers to organize shared content into multiple resource files, leading to better-organized and more maintainable XAML. This also enables the sharing of third-party resources across the application. For example, this file merges <strong class="source-inline">XamlControlsResources</strong> from the <strong class="source-inline">Microsoft.UI.Xaml.Controls</strong> namespace. These<a id="_idIndexMarker144"/> are the resources for the WinUI controls that we will be using to build <span class="No-Break">our app.</span></p>
			<h2 id="_idParaDest-54"><a id="_idTextAnchor054"/>Reviewing App.xaml.cs</h2>
			<p>In <strong class="bold">Solution Explorer</strong>, expand <a id="_idIndexMarker145"/>the <strong class="source-inline">App.xaml</strong> file’s node, and you will see there is another file named <strong class="source-inline">App.xaml.cs</strong> nested underneath. This is referred to as a <strong class="bold">code-behind file</strong>. It is a<a id="_idIndexMarker146"/> partial C# class that, in tandem with the XAML file, defines the <strong class="source-inline">Application</strong> class. If you open the C# file, you will see that it already contains some code. This is where you will handle any application-wide events. This is the event handler added by default: <strong class="source-inline">OnLaunched</strong>. If you need to execute any specific logic when your app is first launched, it should be<a id="_idIndexMarker147"/> added here. This is also where any application arguments passed to the app can <span class="No-Break">be handled.</span></p>
			<h2 id="_idParaDest-55"><a id="_idTextAnchor055"/>Reviewing MainWindow.xaml</h2>
			<p>The <strong class="source-inline">MainWindow.xaml</strong> file <a id="_idIndexMarker148"/>contains the <strong class="source-inline">MainWindow</strong> WinUI window that will be displayed when the application launches. You can see this in the <strong class="source-inline">OnLaunched</strong> event handler in <strong class="source-inline">App.xaml.cs</strong>, as illustrated in the following <span class="No-Break">code snippet:</span></p>
			<pre class="source-code">
m_window = new MainWindow();
m_window.Activate();</pre>			<p>In a new blank WinUI app, <strong class="source-inline">Window</strong> will contain an empty <strong class="source-inline">StackPanel</strong> layout control. Try replacing <strong class="source-inline">StackPanel</strong>’s child controls with <strong class="source-inline">TextBlock</strong> with a <strong class="source-inline">Text</strong> property of <strong class="source-inline">Media</strong> and replace <strong class="source-inline">StackPanel</strong> with <strong class="source-inline">Grid</strong>. The result should look <span class="No-Break">like this:</span></p>
			<pre class="source-code">
&lt;Window
    x:Class="MyMediaCollection.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/
      presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyMediaCollection"
    xmlns:d="http://schemas.microsoft.com/expression/blend/
      2008"
    xmlns:mc="http://schemas.openxmlformats.org/
      markup-compatibility/2006"
    mc:Ignorable="d"&gt;
<strong class="bold">    &lt;Grid&gt;</strong>
<strong class="bold">        &lt;TextBlock Text="Media"/&gt;</strong>
<strong class="bold">    &lt;/Grid&gt;</strong>
&lt;/Page&gt;</pre>			<p>To prevent<a id="_idIndexMarker149"/> exceptions at runtime, remove the event handler for the <strong class="source-inline">Button.Click</strong> event in <strong class="source-inline">MainWindow.xaml.cs</strong>. Now run the app with the <strong class="bold">Debug</strong> | <strong class="bold">Start Debugging</strong> menu item or the <strong class="bold">Start Debugging</strong> button on the Visual Studio toolbar, and you should see something <span class="No-Break">like this:</span></p>
			<div>
				<div id="_idContainer022" class="IMG---Figure">
					<img src="image/B20908_02_06.jpg" alt="Figure 2.6 – MainWindow with TextBlock added"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.6 – MainWindow with TextBlock added</p>
			<p>We’ll make this window a bit more functional later in the chapter. For now, let’s finish our review of the <span class="No-Break">project structure.</span></p>
			<h2 id="_idParaDest-56"><a id="_idTextAnchor056"/>Reviewing MainWindow.xaml.cs</h2>
			<p>The code-behind file<a id="_idIndexMarker150"/> for the <strong class="source-inline">MainWindow.xaml.cs</strong> window now contains only a call to <strong class="source-inline">InitializeComponent()</strong> in the constructor because we removed the event handler for the original <strong class="source-inline">Button</strong> control. Later, we will add some code here to populate some sample data and handle events on the page. In a well-designed MVVM app, the code-behind files for your pages will have very little code. Most of the code will reside in the <span class="No-Break"><strong class="source-inline">ViewModel</strong></span><span class="No-Break"> classes.</span></p>
			<h2 id="_idParaDest-57"><a id="_idTextAnchor057"/>Reviewing the project references</h2>
			<p>All your<a id="_idIndexMarker151"/> project’s references<a id="_idIndexMarker152"/> to <strong class="bold">NuGet</strong> packages, <strong class="bold">dynamic link libraries</strong> (<strong class="bold">DLLs</strong>), and other projects in the solution will <a id="_idIndexMarker153"/>appear in the <strong class="source-inline">Packages</strong> folder under <strong class="bold">Dependencies</strong> in <strong class="bold">Solution Explorer</strong>. Your WinUI project will reference the following <span class="No-Break">NuGet packages:</span></p>
			<ul>
				<li><strong class="source-inline">Microsoft.WindowsAppSDK</strong>: The Windows App SDK components, which <span class="No-Break">include WinUI</span></li>
				<li><strong class="source-inline">Microsoft.Windows.SDK.BuildTools</strong>: The Windows SDK components required to build a <span class="No-Break">WinUI solution</span></li>
			</ul>
			<p class="callout-heading">Note</p>
			<p class="callout">Do not modify or remove any of <span class="No-Break">these references.</span></p>
			<h2 id="_idParaDest-58"><a id="_idTextAnchor058"/>Reviewing the project properties</h2>
			<p>If you right-click the<a id="_idIndexMarker154"/> project in <strong class="bold">Solution Explorer</strong> and select <strong class="bold">Properties</strong> from the context menu, you can view and modify the project properties. You won’t often need to make any changes here. These are a couple of properties you might need to modify from time <span class="No-Break">to time:</span></p>
			<ul>
				<li><strong class="bold">Assembly Name</strong>: You can change the name of the output assembly that is compiled by <span class="No-Break">the project</span></li>
				<li><strong class="bold">Min Version</strong> and <strong class="bold">Target Version</strong>: The Windows versions that were selected when creating the project can be <span class="No-Break">modified here</span></li>
			</ul>
			<p>The primary difference between a new UWP project and a new WinUI 3 project is the controls and other objects that are referenced in the <strong class="source-inline">Windows.UI.Xaml.*</strong> namespaces are now referenced in the Windows App SDK’s <strong class="source-inline">Microsoft.UI.Xaml.*</strong> namespaces. One other difference is that in the <strong class="source-inline">App.xaml</strong> file of the UWP project, it’s not necessary to import the controls’ resources. The remaining differences are mostly hidden from app developers in the <span class="No-Break">project file.</span></p>
			<p>Now that you’ve become familiar with the WinUI project, let’s start building the UI for <strong class="source-inline">MainWindow</strong>. We will start with some of the more common XAML controls <span class="No-Break">and concepts.</span></p>
			<h1 id="_idParaDest-59"><a id="_idTextAnchor059"/>XAML basics</h1>
			<p>It’s time to start<a id="_idIndexMarker155"/> building the main screen of the <strong class="bold">My Media Collection</strong> application. The focal point of the application will be the media items in the collection. To display that list, we are going to need a few things, <span class="No-Break">as follows:</span></p>
			<ul>
				<li>A <strong class="source-inline">Model</strong> class that defines an item in <span class="No-Break">the collection</span></li>
				<li>Some code to bind the collection of items to <span class="No-Break">the UI</span></li>
				<li>A XAML control to display <span class="No-Break">the items</span></li>
			</ul>
			<h2 id="_idParaDest-60"><a id="_idTextAnchor060"/>Building the model</h2>
			<p>We will start by<a id="_idIndexMarker156"/> building the model for the <strong class="bold">My Media Collection</strong> application. A <strong class="bold">model</strong> defines an entity and its attributes. Earlier in the chapter, we discussed <a id="_idIndexMarker157"/>some of the items’ attributes we want to display in the UI. To display and (eventually) persist this information, we must create <span class="No-Break">the model.</span></p>
			<p>The initial version of our model will consist of two enumerations (<strong class="source-inline">ItemType</strong> and <strong class="source-inline">LocationType</strong>) in an <strong class="source-inline">Enums</strong> folder, and two classes (<strong class="source-inline">Medium</strong> and <strong class="source-inline">MediaItem</strong>) in a <strong class="source-inline">Model</strong> folder, as illustrated in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer023" class="IMG---Figure">
					<img src="image/B20908_02_07.jpg" alt="Figure 2.7 – Solution Explorer displays the new Model and Enum files"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.7 – Solution Explorer displays the new Model and Enum files</p>
			<ol>
				<li>To add a <a id="_idIndexMarker158"/>new folder to the project, right-click on the <strong class="bold">MyMediaCollection</strong> project in <strong class="bold">Solution Explorer</strong> and select <strong class="bold">Add</strong> | <strong class="bold">New Folder</strong>. Enter <strong class="source-inline">Enums</strong> as the folder name and hit <em class="italic">Enter</em>. Repeat this process to add a <span class="No-Break"><strong class="source-inline">Model</strong></span><span class="No-Break"> folder.</span></li>
				<li>Next, right-click the project file and select <strong class="bold">Add</strong> | <strong class="bold">Class</strong>. In the <strong class="bold">Add New Item</strong> dialog that appears, the <strong class="bold">Class</strong> file type will be selected. Because Visual Studio does not have a template for a new enum, keep this selection, change the name to <strong class="source-inline">ItemType</strong>, and click the <strong class="bold">Add</strong> button, as illustrated in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer024" class="IMG---Figure">
					<img src="image/B20908_02_08.jpg" alt="Figure 2.8 – The Add New Item dialog"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.8 – The Add New Item dialog</p>
			<ol>
				<li value="3">The code for <strong class="source-inline">ItemType</strong> is created and displayed. Change the <strong class="source-inline">class</strong> definition to <strong class="source-inline">enum</strong> and change the <strong class="source-inline">internal</strong> keyword to <strong class="source-inline">public</strong>. The <strong class="source-inline">ItemType</strong> enum contains<a id="_idIndexMarker159"/> three possible values named <strong class="source-inline">Music</strong>, <strong class="source-inline">Video</strong>, and <strong class="source-inline">Book</strong>. When you’re finished, the definition of the <strong class="source-inline">ItemType</strong> enum will look <span class="No-Break">like this:</span><pre class="source-code">
public enum ItemType
{
    Music,
    Video,
    Book
}</pre></li>				<li>Repeat the steps to create a <strong class="source-inline">LocationType</strong> enum, defined <span class="No-Break">as follows:</span><pre class="source-code">
public enum LocationType
{
    InCollection,
    Loaned
}</pre></li>				<li>Using what you have<a id="_idIndexMarker160"/> learned, create two classes named <strong class="source-inline">Medium</strong> and <strong class="source-inline">MediaItem</strong> in the <strong class="source-inline">Model</strong> folder. The <strong class="source-inline">Medium</strong> class represents a specific medium such as <em class="italic">hardcover</em> or <em class="italic">paperback</em>, while the <strong class="source-inline">MediaType</strong> property assigns an <strong class="source-inline">ItemType</strong> to which the <strong class="source-inline">Medium</strong> class belongs. For these, the valid <strong class="source-inline">ItemType</strong> would be <strong class="source-inline">Book</strong>. When you are finished, the two new classes will look <span class="No-Break">like this:</span><pre class="source-code">
public class Medium
{
    public int Id { get; set; }
    public string Name { get; set; }
    public ItemType MediaType { get; set; }
}
public class MediaItem
{
    public int Id { get; set; }
    public string Name { get; set; }
    public ItemType MediaType { get; set; }
    public Medium MediumInfo { get; set; }
    public LocationType Location { get; set; }
}</pre></li>			</ol>
			<p class="callout-heading">Note</p>
			<p class="callout">To reference the enum types in the <strong class="source-inline">Enums</strong> folder from the two classes, a <strong class="source-inline">using</strong> declaration will need to be added at the top of each new class, like this: <span class="No-Break"><strong class="source-inline">using MyMediaCollection.Enums;</strong></span><span class="No-Break">.</span></p>
			<p>In addition<a id="_idIndexMarker161"/> to the properties discussed earlier in the chapter, an <strong class="source-inline">Id</strong> property has been added to the <strong class="source-inline">MediaItem</strong> class to uniquely identify each item in the collection. This will be useful later when we start <span class="No-Break">persisting data.</span></p>
			<h2 id="_idParaDest-61"><a id="_idTextAnchor061"/>Creating sample data</h2>
			<p>With the <a id="_idIndexMarker162"/>model classes in place, we’re ready to add some code that will create three media items to display in the UI. This will help us visualize things as we start creating our list of items on the main screen. When this step is complete and we’re ready to move on to enabling the ability to add items through the app, this code will <span class="No-Break">be removed.</span></p>
			<p>For now, we are going to add this code in the <strong class="source-inline">MainWindow.xaml.cs</strong> code-behind file. Later, in <a href="B20908_03.xhtml#_idTextAnchor073"><span class="No-Break"><em class="italic">Chapter 3</em></span></a>, <em class="italic">MVVM for Maintainability and Testability</em>, this type of code will be added in a <strong class="source-inline">ViewModel</strong> file. The <strong class="source-inline">MainWindow</strong> will contain only presentation logic and will not be responsible for creating or fetching the data that populates <span class="No-Break">the UI:</span></p>
			<ol>
				<li>First, open <strong class="source-inline">MainWindow.xaml.cs</strong> and create a method named <strong class="source-inline">PopulateData</strong>. This method will contain the code that creates three <strong class="source-inline">MediaItem</strong> objects (a CD, a book, and a Blu-ray) and adds them to a private <strong class="source-inline">List</strong> named <strong class="source-inline">_items</strong>, as illustrated in the following <span class="No-Break">code snippet:</span><pre class="source-code">
public void PopulateData()
{
    if (_isLoaded) return;
    _isLoaded = true;
    var cd = new MediaItem
    {
        Id = 1,
        Name = "Classical Favorites",
        MediaType = ItemType.Music,
        MediumInfo = new Medium { Id = 1,
          MediaType = ItemType.Music, Name = "CD" }
    };
    Var book = new MediaItem
    {
        Id = 2,
        Name = "Classic Fairy Tales",
        MediaType = ItemType.Book,
        MediumInfo = new Medium { Id = 2,
          MediaType = ItemType.Book, Name = "Book" }
    };
    var bluRay = new MediaItem
    {
        Id = 3,
        Name = "The Mummy",
        MediaType = ItemType.Video,
        MediumInfo = new Medium { Id = 3,
          MediaType = ItemType.Video, Name = "Blu Ray" }
    };
    _items = new List&lt;MediaItem&gt;
    {
        cd,
        book,
        bluRay
    };
}</pre><p class="list-inset">You will need to add the <strong class="source-inline">using</strong> statements to <strong class="source-inline">MainWindow</strong> for the <strong class="source-inline">MyMediaCollection.Model</strong> and <span class="No-Break"><strong class="source-inline">MyMediaCollection.Enums</strong></span><span class="No-Break"> namespaces.</span></p></li>				<li>Define <strong class="source-inline">_items</strong> <strong class="source-inline">IList</strong> and <strong class="source-inline">isLoaded</strong> <strong class="source-inline">bool</strong> as private class members. We will later<a id="_idIndexMarker163"/> change the collection of items to an <strong class="source-inline">ObservableCollection</strong>. <strong class="source-inline">ObservableCollection</strong> is a special collection that notifies data-bound items on the UI when items have been added or removed from the collection. For now, an <strong class="source-inline">IList</strong> will suit our needs. The code can be seen in the <span class="No-Break">following snippet:</span><pre class="source-code">
private IList&lt;MediaItem&gt; _items { get; set; }
private bool _isLoaded;</pre></li>				<li>Next, add a line of code to the <strong class="source-inline">MainWindow</strong> constructor, after the call <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">Initialize</strong></span><strong class="source-inline"> Component</strong>, to call the new <strong class="source-inline">PopulateData</strong> method. Any code added to a <strong class="source-inline">Window</strong> or <strong class="source-inline">UserControl</strong> constructor must be added after this initialization code. This is where all the XAML code in <strong class="source-inline">MainWindow.xaml</strong> is initialized. If you attempt to reference any of those elements before the call to <strong class="source-inline">InitializeComponent</strong>, it will result in an error. The constructor should now look <span class="No-Break">like this:</span><pre class="source-code">
public MainWindow()
{
    this.InitializeComponent();
    PopulateData();
}</pre></li>			</ol>
			<p>We will<a id="_idIndexMarker164"/> return to this file to add some data-binding logic after creating some UI components in the XAML file. Let’s go and do <span class="No-Break">that now.</span></p>
			<h2 id="_idParaDest-62"><a id="_idTextAnchor062"/>Building the initial UI</h2>
			<p>Earlier in the <a id="_idIndexMarker165"/>chapter, we added a single <strong class="source-inline">TextBlock</strong> to the <strong class="source-inline">MainWindow.xaml</strong> file with the <strong class="source-inline">Text</strong> property set to <strong class="source-inline">Media</strong>. We are going to add a <strong class="source-inline">ListView</strong> control beneath the existing <strong class="source-inline">TextBlock</strong>. A <strong class="source-inline">ListView</strong> control is a powerful and flexible control to display a list of items in a vertical list. It is like the <strong class="bold">WinForms</strong> <strong class="source-inline">ListBox</strong> control in basic list functionality (item selection, multi-selection, and automatic scroll bars), but each list item can be templated to display in just about any <span class="No-Break">way imaginable.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">For more information about<a id="_idIndexMarker166"/> the <strong class="source-inline">ListView</strong> class, documentation with sample code and markup is available on Microsoft <span class="No-Break">Learn: </span><a href="https://learn.microsoft.com/windows/windows-app-sdk/api/winrt/microsoft.ui.xaml.controls.listview"><span class="No-Break">https://learn.microsoft.com/windows/windows-app-sdk/api/winrt/microsoft.ui.xaml.controls.listview</span></a><span class="No-Break">.</span></p>
			<ol>
				<li>First, add some markup to create two rows inside the top-level <strong class="source-inline">Grid</strong> control. <strong class="source-inline">RowDefinitions</strong> should be added before the existing <strong class="source-inline">TextBlock</strong> element. <strong class="source-inline">TextBlock</strong> will remain in the first row, and we’ll add the <strong class="source-inline">ListView</strong> control to the second row. Create <strong class="source-inline">RowDefinitions</strong> as illustrated in the following <span class="No-Break">code snippet:</span><pre class="source-code">
&lt;Grid.RowDefinitions&gt;
    &lt;RowDefinition Height="Auto"/&gt;
    &lt;RowDefinition Height="*"/&gt;
&lt;/Grid.RowDefinitions&gt;</pre><p class="list-inset">As you can see, we’re automatically sizing the first <strong class="source-inline">RowDefinition</strong> to the size of the <strong class="source-inline">TextBlock</strong> and allocating the remaining space inside the <strong class="source-inline">Grid</strong> to the <strong class="source-inline">ListView</strong> control’s <strong class="source-inline">RowDefinition</strong> by using <strong class="source-inline">"*"</strong>. If you assign more than one row with <strong class="source-inline">"*"</strong>, those rows will split the remaining available space equally. This is the default value for the <strong class="source-inline">Height</strong> attribute. It would be sized the same if <strong class="source-inline">"*"</strong> were omitted, but most XAML developers explicitly include it for completeness and<a id="_idIndexMarker167"/> <span class="No-Break">improved readability.</span></p></li>			</ol>
			<p class="callout-heading">Note</p>
			<p class="callout">For more information about <a id="_idIndexMarker168"/>row sizing, see the following Microsoft Learn <span class="No-Break">documentation: </span><a href="https://learn.microsoft.com/windows/windows-app-sdk/api/winrt/microsoft.ui.xaml.controls.rowdefinition.height"><span class="No-Break">https://learn.microsoft.com/windows/windows-app-sdk/api/winrt/microsoft.ui.xaml.controls.rowdefinition.height</span></a><span class="No-Break">.</span></p>
			<ol>
				<li value="2">Next, add a <strong class="source-inline">ListView</strong> control to the <strong class="source-inline">Grid</strong>, setting <strong class="source-inline">Grid.Row</strong> equal to <strong class="source-inline">1</strong> (row numbering is 0-based, meaning the first row is row <strong class="source-inline">0</strong>), and name it <strong class="source-inline">ItemList</strong>. It is not necessary to name your XAML elements. This is only required if you either want to reference them by <strong class="source-inline">ElementName</strong> in XAML data binding or as a variable in the code-behind file. Naming a control causes a variable to be created in the <strong class="source-inline">InitializeComponent</strong> call, and to optimize performance, you should only name your controls if you need to reference them elsewhere. The markup can be seen in the <span class="No-Break">following snippet:</span><pre class="source-code">
&lt;ListView Grid.Row="1" x:Name="ItemList"
  Background="LightGoldenrodYellow"/&gt;</pre></li>			</ol>
			<p>By setting the background color to <strong class="source-inline">LightGoldenrodYellow</strong>, we can see the <strong class="source-inline">ListView</strong> in the application’s main window before we populate any data. Depending on whether you are using a <em class="italic">Light</em> or <em class="italic">Dark</em> Windows theme, you can choose a color that works best for you. Run the app, and it should look something <span class="No-Break">like this:</span></p>
			<div>
				<div id="_idContainer025" class="IMG---Figure">
					<img src="image/B20908_02_09.jpg" alt="Figure 2.9 – A ListView added to the UI"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.9 – A ListView added to the UI</p>
			<p>Let’s return to <a id="_idIndexMarker169"/>the code-behind file to start wiring up the <span class="No-Break">data binding.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">If you are new to data binding concepts in XAML programming, Microsoft Learn has a great overview of data binding for Windows App SDK developers<a id="_idIndexMarker170"/> at the following web <span class="No-Break">page: </span><a href="https://learn.microsoft.com/windows/apps/develop/data-binding/"><span class="No-Break">https://learn.microsoft.com/windows/apps/develop/data-binding/</span></a><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-63"><a id="_idTextAnchor063"/>Completing the data-binding initialization</h2>
			<p>Return to the <strong class="source-inline">MainWindow.xaml.cs</strong> file<a id="_idIndexMarker171"/> and add a line of code before the <strong class="source-inline">PopulateData()</strong> method call, <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
ItemList.Loaded += ItemList_Loaded;</pre>			<p>After typing <strong class="source-inline">+=</strong>, Visual Studio <strong class="bold">IntelliSense</strong> will prompt you to press <em class="italic">Tab</em> to automatically create the <strong class="source-inline">ItemList_Loaded</strong> event handler, as illustrated in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer026" class="IMG---Figure">
					<img src="image/B20908_02_010.jpg" alt="Figure 2.10 – Inserting the ItemList_Loaded event handler"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.10 – Inserting the ItemList_Loaded event handler</p>
			<p>Alternatively, if <a id="_idIndexMarker172"/>you type the entire line and press <em class="italic">Ctrl</em> +, you’ll be prompted to create the <span class="No-Break">new method.</span></p>
			<p>To keep the <strong class="source-inline">MainWindow</strong> constructor simple and keep our data-loading code together, move the <strong class="source-inline">PopulateData</strong> call to the <strong class="source-inline">ItemList_Loaded</strong> method. Then, add the two other lines of code to the new event handler, <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
private void ItemList_Loaded(object sender,
  Microsoft.UI.Xaml.RoutedEventArgs e)
{
    var listView = (ListView)sender;
    PopulateData();
    listView.ItemsSource = _items;
}</pre>			<p>This code is called after the <strong class="source-inline">ItemsList</strong> control has completed loading in the UI. We’re getting the instance of the control from the <strong class="source-inline">sender</strong> parameter and setting the <strong class="source-inline">ItemsSource</strong> of the list to the <strong class="source-inline">_items</strong> collection that was loaded in <strong class="source-inline">PopulateData()</strong>. Now, we have data in the list, but things don’t look quite right, as can be seen from the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer027" class="IMG---Figure">
					<img src="image/B20908_02_011.jpg" alt="Figure 2.11 – A ListView with three rows of data"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.11 – A ListView with three rows of data</p>
			<p>The <strong class="source-inline">ListView</strong> is <a id="_idIndexMarker173"/>displaying three rows for our three sample data items, but it’s displaying the data type for each item instead of the data. That’s because we haven’t told the <strong class="source-inline">ListView</strong> which properties it should display for the items in the collection. By default, the list will display whatever is returned by an object’s <strong class="source-inline">ToString()</strong> method. If <strong class="source-inline">ToString()</strong> is not overridden, the data type name of the class <span class="No-Break">is returned.</span></p>
			<h2 id="_idParaDest-64"><a id="_idTextAnchor064"/>Creating the DataTemplate and binding the UI</h2>
			<p>Let’s return<a id="_idIndexMarker174"/> to <strong class="source-inline">MainWindow.xaml</strong> and tell <a id="_idIndexMarker175"/>the <strong class="source-inline">ListView</strong> which data we want to display for each item in the list. Try making this change with the application still running. Thanks to Visual Studio’s <strong class="bold">XAML Hot Reload</strong> feature, you<a id="_idIndexMarker176"/> should see the UI reload without having to restart the <span class="No-Break">debugging session.</span></p>
			<p>Customizing the appearance of each <strong class="source-inline">ListView</strong> item is accomplished by defining a <strong class="source-inline">DataTemplate</strong> inside <strong class="source-inline">ListView.ItemTemplate</strong>. A <strong class="source-inline">DataTemplate</strong> can contain any WinUI controls we need to define the layout of each list item. Let’s keep it simple and add a <strong class="source-inline">Grid</strong> containing two columns. Each column will contain a <strong class="source-inline">TextBlock</strong>. The <strong class="source-inline">ListView</strong> should now look <span class="No-Break">like this:</span></p>
			<pre class="source-code">
&lt;ListView Grid.Row="1"
          x:Name="ItemList"
          Background="LightGoldenrodYellow"&gt;
<strong class="bold">    &lt;ListView.ItemTemplate&gt;</strong>
<strong class="bold">        &lt;DataTemplate x:DataType="model:MediaItem"&gt;</strong>
<strong class="bold">            &lt;Grid&gt;</strong>
<strong class="bold">                &lt;Grid.ColumnDefinitions&gt;</strong>
<strong class="bold">                    &lt;ColumnDefinition Width="100"/&gt;</strong>
<strong class="bold">                    &lt;ColumnDefinition Width="*"/&gt;</strong>
<strong class="bold">                &lt;/Grid.ColumnDefinitions&gt;</strong>
<strong class="bold">                &lt;TextBlock Text="{x:Bind</strong>
<strong class="bold">                  Path=MediumInfo.Name}"/&gt;</strong>
<strong class="bold">                &lt;TextBlock Grid.Column="1"</strong>
<strong class="bold">                   Text="{x:Bind Path=Name}"/&gt;</strong>
<strong class="bold">            &lt;/Grid&gt;</strong>
<strong class="bold">        &lt;/DataTemplate&gt;</strong>
<strong class="bold">    &lt;/ListView.ItemTemplate&gt;</strong>
&lt;/ListView&gt;</pre>			<p>We are<a id="_idIndexMarker177"/> beginning to create some more complex <a id="_idIndexMarker178"/>XAML and need to keep formatting in mind to optimize <span class="No-Break">its readability.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">To quickly reformat your XAML, you can use the <em class="italic">Ctrl</em> + <em class="italic">K | D</em> keyboard shortcut. There is also an extension on the <strong class="bold">Visual Studio Marketplace</strong> called <strong class="bold">XAML Styler</strong>. You can search for it in Visual Studio’s <strong class="bold">Manage Extensions</strong> dialog or <a id="_idIndexMarker179"/>get more information on the Marketplace <span class="No-Break">here: </span><a href="https://marketplace.visualstudio.com/items?itemName=TeamXavalon.XAMLStyler2022"><span class="No-Break">https://marketplace.visualstudio.com/items?itemName=TeamXavalon.XAMLStyler2022</span></a><span class="No-Break">.</span></p>
			<p>To <a id="_idIndexMarker180"/>enable each <strong class="source-inline">TextBlock</strong> to bind to the properties of <strong class="source-inline">MediaItem</strong>, we must set an <strong class="source-inline">x:DataType</strong> property on the <strong class="source-inline">DataTemplate</strong>. To resolve <strong class="source-inline">MediaItem</strong>, a namespace declaration needs to be added to the <strong class="source-inline">Window</strong> definition, <span class="No-Break">like this:</span></p>
			<pre class="source-code">
xmlns:model="using:MyMediaCollection.Model"</pre>			<p>A shortcut to add this <strong class="source-inline">using</strong> statement is to place your cursor in <strong class="source-inline">x:DataType</strong> and press <em class="italic">Ctrl</em> +. Visual Studio will suggest adding the missing namespace to the file. We now have access to objects in the <strong class="source-inline">MyMediaCollection.Model</strong> namespace by using the <strong class="source-inline">model</strong> prefix, and <strong class="source-inline">x:DataType="model:MediaItem"</strong> will resolve <strong class="source-inline">MediaItem</strong> when we build and run <span class="No-Break">the app.</span></p>
			<p>Each <strong class="source-inline">TextBlock</strong> has its <strong class="source-inline">Text</strong> property <a id="_idIndexMarker181"/>bound to a property of <strong class="source-inline">MediaItem</strong>, using the <strong class="source-inline">x:Bind</strong> <span class="No-Break"><strong class="bold">markup extension</strong></span><span class="No-Break">.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">Using <strong class="source-inline">x:Bind</strong> instead of the <strong class="source-inline">Binding</strong> markup extension to bind data to the UI has the benefit of compile-time validation and increased performance. The previously noted data-binding overview on Microsoft Learn covers the differences in depth. I prefer to use <strong class="source-inline">x:Bind</strong> where possible. One important difference between <strong class="source-inline">Binding</strong> and <strong class="source-inline">x:Bind</strong> you should note is that while <strong class="source-inline">Binding</strong> defaults to <strong class="source-inline">OneWay</strong> mode, <strong class="source-inline">x:Bind</strong> defaults to <strong class="source-inline">OneTime</strong>. This change to the default binding behavior was made for performance considerations. <strong class="source-inline">OneWay</strong> binding requires more code behind the scenes to wire up the change detection needed for monitoring changes to the source value. You can still explicitly update your <strong class="source-inline">x:Bind</strong> usages to be <strong class="source-inline">OneWay</strong> or <strong class="source-inline">TwoWay</strong>. For more information about <strong class="source-inline">x:Bind</strong>, see this <a id="_idIndexMarker182"/>Microsoft Learn <span class="No-Break">article: </span><a href="https://learn.microsoft.com/windows/uwp/xaml-platform/x-bind-markup-extension"><span class="No-Break">https://learn.microsoft.com/windows/uwp/xaml-platform/x-bind-markup-extension</span></a><span class="No-Break">.</span></p>
			<p class="callout">For more information on <a id="_idIndexMarker183"/>markup extensions in XAML, you can read this .NET article:  <a href="https://learn.microsoft.com/dotnet/desktop/xaml-services/markup-extensions-overview"><span class="No-Break">https://learn.microsoft.com/dotnet/desktop/xaml-services/markup-extensions-overview</span></a><span class="No-Break">.</span></p>
			<p>Now, when<a id="_idIndexMarker184"/> you run the application, you can see the <strong class="source-inline">MediumType</strong> name and the item name for each item in the <strong class="source-inline">ListView</strong>, as illustrated<a id="_idIndexMarker185"/> in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer028" class="IMG---Figure">
					<img src="image/B20908_02_012.jpg" alt="Figure 2.12 – The ListView with two columns of sample data"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.12 – The ListView with two columns of sample data</p>
			<p>That’s some pretty good progress! Before we expand on the functionality, let’s talk a little about how WinUI, the Windows App SDK, and .NET fit together in terms of the app <span class="No-Break">development process.</span></p>
			<h1 id="_idParaDest-65"><a id="_idTextAnchor065"/>Understanding WinUI and Windows App SDK</h1>
			<p>Let’s review the WinUI controls <a id="_idIndexMarker186"/>available to use in our project and see how they can help us build the <strong class="bold">My Media Collection</strong> application. The <strong class="source-inline">Microsoft.WindowsAppSDK</strong> package we saw in <strong class="bold">Solution Explorer</strong> earlier in the chapter contains these controls and<a id="_idIndexMarker187"/> <span class="No-Break">much more.</span></p>
			<p>To view the contents of this package, open the <strong class="bold">Object Browser</strong> window from Visual Studio’s <strong class="bold">View</strong> menu. The controls will be listed here under several namespaces inside the <strong class="bold">Microsoft.WinUI</strong> tree node, as illustrated in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer029" class="IMG---Figure">
					<img src="image/B20908_02_013.jpg" alt="Figure 2.13 – WinUI controls in Object Browser"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.13 – WinUI controls in Object Browser</p>
			<p>The majority of <a id="_idIndexMarker188"/>WinUI controls we will be using can be found inside the <strong class="bold">Microsoft.UI.Xaml.Controls</strong> namespace under <strong class="bold">Microsoft.WinUI</strong>, along with other related classes <span class="No-Break">and interfaces.</span></p>
			<p>So far, we have used in our <a id="_idIndexMarker189"/>application the <strong class="source-inline">Grid</strong>, <strong class="source-inline">TextBlock</strong>, and <strong class="source-inline">ListView</strong> controls. Open the <strong class="bold">Object Browser</strong> window from the <strong class="bold">View</strong> menu. Then, find the <strong class="source-inline">ListView</strong> class, expand <strong class="bold">Microsoft.UI.Xaml.Controls.ListView</strong> | <strong class="bold">Base Types</strong>, and select the <strong class="source-inline">ListViewBase</strong> class. This base class contains the methods, properties, and events available to the <strong class="source-inline">ListView</strong>. The members of <strong class="source-inline">ListViewBase</strong> will display in the right pane. Take some time to review these members and see whether you recognize any of them from your use of the control <span class="No-Break">so far.</span></p>
			<p>Clear <strong class="source-inline">ListView</strong> from your search, scroll down in the left pane of <strong class="bold">Object Browser</strong>, and find the <strong class="source-inline">TextBlock</strong> control. Select it and, in the right pane, find and select the <strong class="bold">Text</strong> property. The bottom-right pane <a id="_idIndexMarker190"/>displays details of the property, as illustrated in the <a id="_idIndexMarker191"/><span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer030" class="IMG---Figure">
					<img src="image/B20908_02_014.jpg" alt="Figure 2.14 – Details of the TextBlock.Text property in Object Browser"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.14 – Details of the TextBlock.Text property in Object Browser</p>
			<p>The <strong class="bold">Object Browser</strong> window can be a valuable resource when familiarizing yourself with a new library or project. All referenced projects, NuGet packages, and other references will <span class="No-Break">appear here.</span></p>
			<p>The controls and other components you have reviewed here make up the UI layer of Windows App SDK applications. The underlying application framework for the Windows App SDK <span class="No-Break">is .NET.</span></p>
			<h2 id="_idParaDest-66"><a id="_idTextAnchor066"/>Understanding the .NET app model</h2>
			<p>You may have heard <a id="_idIndexMarker192"/>that the underlying app model for WinUI apps can be Win32 for C++ apps or .NET for desktop apps. So, what exactly is the <strong class="bold">.NET </strong><span class="No-Break"><strong class="bold">app model</strong></span><span class="No-Break">?</span></p>
			<p>The .NET app model in WinUI apps describes how applications are packaged and deployed. It also defines the following behaviors <span class="No-Break">and capabilities:</span></p>
			<ul>
				<li><span class="No-Break">Data storage</span></li>
				<li><span class="No-Break">State management</span></li>
				<li>Lifecycle events (<strong class="bold">Startup</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="bold">Shutdown</strong></span><span class="No-Break">)</span></li>
				<li><span class="No-Break">Multitasking</span></li>
				<li><span class="No-Break">Resource management</span></li>
				<li><span class="No-Break">Inter-app communication</span></li>
			</ul>
			<p>WinUI 3<a id="_idIndexMarker193"/> is one component of the<a id="_idIndexMarker194"/> Windows App SDK, the UI layer. Although the WinUI controls are decoupled from the Windows SDK, the underlying .NET app platform is still dependent on it when using the Windows App SDK. Selecting a target and minimum Windows version is one of the side effects of <span class="No-Break">this dependency.</span></p>
			<p>Now that you have a better understanding of WinUI controls and how they relate to the Windows App SDK and the .NET app platform, let’s use a few more of them in <span class="No-Break">our application.</span></p>
			<h1 id="_idParaDest-67"><a id="_idTextAnchor067"/>Working with WinUI controls, properties, and events</h1>
			<p>It’s time to enhance the UI of the application. Currently, the main page only consists of a <strong class="source-inline">Media</strong> label over a <strong class="source-inline">ListView</strong>, with columns for the media type and the name of the media item. The following are the enhancements we will add in <span class="No-Break">this section:</span></p>
			<ul>
				<li>A header row for <span class="No-Break">the </span><span class="No-Break"><strong class="source-inline">ListView</strong></span></li>
				<li>A <strong class="source-inline">ComboBox</strong> to filter the rows based on the <span class="No-Break">media type</span></li>
				<li>A <strong class="source-inline">Button</strong> to add a new item to <span class="No-Break">the collection</span></li>
			</ul>
			<p>We will start by enhancing the <strong class="source-inline">ListView</strong> for our <span class="No-Break">media collection.</span></p>
			<h2 id="_idParaDest-68"><a id="_idTextAnchor068"/>Adding a ListView header</h2>
			<p>Before we create the<a id="_idIndexMarker195"/> header, let’s change the background color of the <strong class="source-inline">ListView</strong>. The <strong class="source-inline">Aqua</strong> color worked well to highlight the control, but it would be distracting when the application is used by our customers. We will discuss WinUI theme brushes and look at <strong class="bold">Fluent Design</strong> concepts later in <a href="B20908_07.xhtml#_idTextAnchor152"><span class="No-Break"><em class="italic">Chapter 7</em></span></a>, <em class="italic">Fluent Design System for Windows Applications</em>. For now, just remove <strong class="source-inline">Background="Aqua"</strong> from the <strong class="source-inline">ListView</strong> definition in the <span class="No-Break"><strong class="source-inline">MainWindow.xaml</strong></span><span class="No-Break"> file.</span></p>
			<p>Creating the header row for the media collection is relatively simple. To define the rows for each item, we created a <strong class="source-inline">ListView.ItemTemplate</strong> block containing a <strong class="source-inline">DataTemplate</strong>. To create the header, we do the same inside a <span class="No-Break"><strong class="source-inline">ListView.HeaderTemplate</strong></span><span class="No-Break"> block.</span></p>
			<p>Just as with the item rows, the<a id="_idIndexMarker196"/> header row will consist of a <strong class="source-inline">Grid</strong> with two columns, with the same <strong class="source-inline">Width</strong> definitions. We again want to use two <strong class="source-inline">TextBlock</strong> controls inside the <strong class="source-inline">Grid</strong>, but to add some separation between the header and the items, we will add <strong class="source-inline">Border</strong> controls. Let’s look at the markup for the header and then discuss the differences in more detail. Take some time to review the <span class="No-Break">following markup:</span></p>
			<pre class="source-code">
&lt;ListView.HeaderTemplate&gt;
    &lt;DataTemplate&gt;
        &lt;Grid&gt;
            &lt;Grid.ColumnDefinitions&gt;
                &lt;ColumnDefinition Width="100"/&gt;
                &lt;ColumnDefinition Width="*"/&gt;
            &lt;/Grid.ColumnDefinitions&gt;
            &lt;Border BorderBrush="BlueViolet"
                    BorderThickness="0,0,0,1"&gt;
                &lt;TextBlock Text="Medium"
                           Margin="5,0,0,0"
                           FontWeight="Bold"/&gt;
            &lt;/Border&gt;
            &lt;Border Grid.Column="1"
                    BorderBrush="BlueViolet"
                    BorderThickness="0,0,0,1"&gt;
                &lt;TextBlock Text="Title"
                           Margin="5,0,0,0"
                           FontWeight="Bold"/&gt;
            &lt;/Border&gt;
        &lt;/Grid&gt;
    &lt;/DataTemplate&gt;
&lt;/ListView.HeaderTemplate&gt;</pre>			<p>As you can see, each <strong class="source-inline">TextBlock</strong> is nested inside a <strong class="source-inline">Border</strong> element. This will wrap the text in a border<a id="_idIndexMarker197"/> with a <strong class="source-inline">BlueViolet</strong> color. However, by setting <strong class="source-inline">BorderThickness="0,0,0,1"</strong>, the border color will only appear on the bottom of the header row items. Here is how that appears in <span class="No-Break">the application:</span></p>
			<div>
				<div id="_idContainer031" class="IMG---Figure">
					<img src="image/B20908_02_015.jpg" alt="Figure 2.15 – The ListView with a header row added"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.15 – The ListView with a header row added</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The same bottom border could be achieved by nesting the entire <strong class="source-inline">Grid</strong> inside a <strong class="source-inline">Border</strong> instead of putting one around each header item. However, by doing it this way, we have more control over the appearance of each column’s border style. When we implement sorting later, the border’s color can be modified to highlight the column on which sorting has <span class="No-Break">been applied.</span></p>
			<p>You probably<a id="_idIndexMarker198"/> also noticed that the header row text stands out from the rows in the grid. The <strong class="source-inline">FontWeight="Bold"</strong> property set inside each <strong class="source-inline">TextBlock</strong> in the <strong class="source-inline">HeaderTemplate</strong> helps to highlight the <span class="No-Break">header row.</span></p>
			<h2 id="_idParaDest-69"><a id="_idTextAnchor069"/>Creating the ComboBox filter</h2>
			<p>One of the requirements for the <a id="_idIndexMarker199"/>application is to allow users to filter several of the collection items’ properties. Let’s start simple, by adding a filter only on the medium (<strong class="bold">Book</strong>, <strong class="bold">Music</strong>, or <strong class="bold">Movie</strong>). The list also needs an <strong class="bold">All</strong> option, which will be the default selection when users open <span class="No-Break">the application:</span></p>
			<ol>
				<li>First, add some XAML to <strong class="source-inline">MainWindow</strong> to add a filter to the right of the <strong class="source-inline">Media</strong> label. Replace <strong class="source-inline">Media</strong> <strong class="source-inline">TextBlock</strong> with the <span class="No-Break">following markup:</span><pre class="source-code">
&lt;Grid&gt;
    &lt;Grid.ColumnDefinitions&gt;
        &lt;ColumnDefinition Width="*"/&gt;
        &lt;ColumnDefinition Width="Auto"/&gt;
    &lt;/Grid.ColumnDefinitions&gt;
    &lt;TextBlock Text="Media Collection"
               Margin="4"
               FontWeight="Bold"
               VerticalAlignment="Center"/&gt;
    &lt;StackPanel Grid.Column="1"
                Orientation="Horizontal"
                HorizontalAlignment="Right"&gt;
        &lt;TextBlock Text="Media Type:" Margin="4"
                   FontWeight="Bold"
                   VerticalAlignment="Center"/&gt;
        &lt;ComboBox x:Name="ItemFilter"
                  MinWidth="120" Margin="0,2,6,4"/&gt;
    &lt;/StackPanel&gt;
&lt;/Grid&gt;</pre><p class="list-inset">The single <strong class="source-inline">TextBlock</strong> label has been replaced with a two-column <strong class="source-inline">Grid</strong>. The first column contains the <strong class="source-inline">TextBlock</strong>, with a few modifications. First, the <strong class="source-inline">Text</strong> property has been updated to <strong class="source-inline">"Media Collection"</strong>. <strong class="source-inline">FontWeight</strong> has been changed to <strong class="source-inline">"Bold"</strong> and some margin has been added. Finally, the element is <span class="No-Break">vertically centered.</span></p><p class="list-inset">The second column contains a new <strong class="source-inline">StackPanel</strong> (a container control that stacks its contents horizontally or vertically). The default orientation is <strong class="source-inline">Vertical</strong>. In our case, we want a horizontal stack, which is why the <strong class="source-inline">Orientation</strong> property has <span class="No-Break">been set.</span></p></li>			</ol>
			<p><strong class="source-inline">StackPanel</strong> contains a <strong class="source-inline">TextBlock</strong> label and a <strong class="source-inline">ComboBox</strong> for the filter selection. The <strong class="source-inline">ComboBox</strong> filter has been given an <strong class="source-inline">x:Name</strong> so we can reference it from the C# code-behind file when initializing its contents. We have also configured a <strong class="source-inline">MinWidth</strong> value of <strong class="source-inline">120</strong>. If the contents of the <strong class="source-inline">ComboBox</strong> filter require more than 120 <strong class="bold">pixels</strong> (<strong class="bold">px</strong>), it can grow larger, but<a id="_idIndexMarker200"/> its width cannot be less than the value <span class="No-Break">set here.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">The pixels being referenced in XAML are effective pixels. To read more about responsive layouts and sizing with XAML, see this <a id="_idIndexMarker201"/>Microsoft Learn <span class="No-Break">article: </span><a href="https://learn.microsoft.com/windows/apps/design/layout/layouts-with-xaml"><span class="No-Break">https://learn.microsoft.com/windows/apps/design/layout/layouts-with-xaml</span></a><span class="No-Break">.</span></p>
			<ol>
				<li>In the <strong class="source-inline">MainWindow.xaml.cs</strong> file, add a new variable to hold the list of mediums, <span class="No-Break">as follows:</span><pre class="source-code">
private IList&lt;string&gt; _mediums { get; set; }</pre><p class="list-inset">This collection can be an <strong class="source-inline">IList</strong> rather than <strong class="source-inline">ObservableCollection</strong> because we don’t expect its contents to change while the application <span class="No-Break">is running.</span></p></li>				<li>Inside the <strong class="source-inline">PopulateData()</strong> method, add some code at the end of the method to populate the <strong class="source-inline">_mediums</strong> list, <span class="No-Break">as follows:</span><pre class="source-code">
_mediums = new List&lt;string&gt;
{
    "All",
    nameof(ItemType.Book),
    nameof(ItemType.Music),
    nameof(ItemType.Video)
};</pre><p class="list-inset">We’re adding an item to the collection for each of the possible values in our <strong class="source-inline">ItemType</strong> enum, plus the default <strong class="source-inline">"</strong><span class="No-Break"><strong class="source-inline">All"</strong></span><span class="No-Break"> value.</span></p></li>				<li>The <strong class="source-inline">ComboBox</strong> filter will be bound to the collection after it has loaded, so add a <strong class="source-inline">Loaded</strong> event handler in the <strong class="source-inline">MainWindow</strong> constructor, as we did for the <strong class="source-inline">ItemList</strong> earlier, <span class="No-Break">like this:</span><pre class="source-code">
ItemFilter.Loaded += ItemFilter_Loaded;</pre></li>				<li>The <strong class="source-inline">ItemFilter_Loaded</strong> event handler will look much like the <strong class="source-inline">ItemList_Loaded</strong> handler. Use <a id="_idIndexMarker202"/>the <span class="No-Break">following code:</span><pre class="source-code">
private void ItemFilter_Loaded(object sender,
  Microsoft.UI.Xaml.RoutedEventArgs e)
{
    var filterCombo = (ComboBox)sender;
    PopulateData();
    filterCombo.ItemsSource = _mediums;
    filterCombo.SelectedIndex = 0;
}</pre></li>			</ol>
			<p>The code casts the sender to the <strong class="source-inline">ComboBox</strong> data type and sets its <strong class="source-inline">ItemSource</strong> to the list we populated in the previous step. Finally, an additional step is needed to default the <strong class="source-inline">ComboBox</strong> filter to default to the <strong class="source-inline">"All"</strong> item. This is accomplished by setting <strong class="source-inline">SelectedIndex</strong> equal <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">0</strong></span><span class="No-Break">.</span></p>
			<p>Let’s run the <a id="_idIndexMarker203"/>application and see how it looks now. You can see the result in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer032" class="IMG---Figure">
					<img src="image/B20908_02_016.jpg" alt="Figure 2.16 – Media Collection with the Media Type filter added"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.16 – Media Collection with the Media Type filter added</p>
			<p>Pretty sharp! If you click the <strong class="bold">Media Type</strong> filter, you can see the four values available for selection, as <span class="No-Break">illustrated here:</span></p>
			<div>
				<div id="_idContainer033" class="IMG---Figure">
					<img src="image/B20908_02_017.jpg" alt="Figure 2.17 – Media Type values"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.17 – Media Type values</p>
			<p>Notice how the dropdown of <strong class="source-inline">ComboBox</strong> has picked up the Windows style with some transparency without having to add any additional code or markup. Select one of the other values in the list and see what happens. Nothing! That’s because we haven’t added any code<a id="_idIndexMarker204"/> to do the filtering when the selection changes on the filter. We can add a little bit of extra code to fix that, <span class="No-Break">as follows:</span></p>
			<ol>
				<li>First, create a new <strong class="source-inline">_allItems</strong> collection to store a list of all available media items, regardless of the current filter, <span class="No-Break">like this:</span><pre class="source-code">
private IList&lt;MediaItem&gt; _allItems { get; set; }</pre></li>				<li>Next, in the <strong class="source-inline">PopulateData()</strong> method, after populating the <strong class="source-inline">_items</strong> collection, add the same items to <strong class="source-inline">_allItems</strong>, <span class="No-Break">like this:</span><pre class="source-code">
_allItems = new List&lt;MediaItem&gt;
{
    cd,
    book,
    bluRay
};</pre></li>				<li>Now, we need to do some filtering when the filter selection changes. We want to handle the <strong class="source-inline">SelectionChanged</strong> event on the <strong class="source-inline">ComboBox</strong> control, but we don’t want to hook it up until after the entire page has loaded. This will prevent the event from being handled while the <strong class="source-inline">ComboBox</strong> filter is initially <span class="No-Break">being populated.</span></li>
				<li>At the end of the implementation of <strong class="source-inline">ItemFilter_Loaded</strong>, add an event handler for the <strong class="source-inline">SelectionChanged</strong> event on the <span class="No-Break"><strong class="source-inline">ComboBox</strong></span><span class="No-Break"> control:</span><pre class="source-code">
ItemFilter.SelectionChanged +=
    ItemFilter_SelectionChanged;</pre></li>				<li>In the new <strong class="source-inline">ItemFilter_SelectionChanged</strong> event handler, we will iterate through the <strong class="source-inline">_allItems</strong> list and determine which of the items to include in the filtered list, based on their <strong class="source-inline">MediaType</strong> property, <span class="No-Break">as follows:</span><pre class="source-code">
private void ItemFilter_SelectionChanged(
  object sender,Microsoft.UI.Xaml.Controls.
    SelectionChangedEventArgs e)
{
        var updatedItems =
          (from item in _allItems
          where
            string.IsNullOrWhiteSpace(ItemFilter.
              SelectedValue.ToString()) ||
            ItemFilter.SelectedValue.ToString() ==
              "All" ||
            ItemFilter.SelectedValue.ToString() ==
              item.MediaType.ToString()
          select item).ToList();
       ItemList.ItemsSource = updatedItems;
}</pre></li>			</ol>
			<p>If the filter value is <a id="_idIndexMarker205"/>empty or <strong class="bold">All</strong> is selected, we want to include the item, regardless of its <strong class="source-inline">MediaType</strong>. Otherwise, we check whether the <strong class="source-inline">MediaType</strong> matches the selection in <strong class="source-inline">ItemFilter</strong> <strong class="source-inline">ComboBox</strong>. When there is a match, we add it to the <strong class="source-inline">updatedItems</strong> list. Then, we set <strong class="source-inline">updatedItems</strong> as <strong class="source-inline">ItemsSource</strong> on <span class="No-Break">the </span><span class="No-Break"><strong class="source-inline">ListView</strong></span><span class="No-Break">.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">A filter should never be empty unless there is an error while initializing the data. This condition is only a safeguard for <span class="No-Break">unforeseen scenarios.</span></p>
			<p>Now, run the app again and select <strong class="bold">Book</strong> in the filter, as illustrated in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer034" class="IMG---Figure">
					<img src="image/B20908_02_018.jpg" alt="Figure 2.18 – Media Collection filtered to display only books"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.18 – Media Collection filtered to display only books</p>
			<p>That <a id="_idIndexMarker206"/>takes care of the filter implementation for the time being. Let’s finish up this part of the UI design with <span class="No-Break">a </span><span class="No-Break"><strong class="source-inline">Button</strong></span><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-70"><a id="_idTextAnchor070"/>Adding a new item button</h2>
			<p>We are not quite ready to<a id="_idIndexMarker207"/> start working with multiple windows or navigation yet. You should have some understanding of the <strong class="bold">MVVM</strong> pattern before we put too much logic into the app. This will minimize our code refactoring in later chapters. However, we can add a <strong class="source-inline">Button</strong> to the current page and add some code to ensure everything is hooked <span class="No-Break">up correctly.</span></p>
			<p>Open the <strong class="source-inline">MainWindow.xaml</strong> file and add a third <strong class="source-inline">RowDefinition</strong> to the top-level <strong class="source-inline">Grid</strong> on the <strong class="source-inline">Window</strong>, <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
&lt;Grid.RowDefinitions&gt;
    &lt;RowDefinition Height="Auto"/&gt;
    &lt;RowDefinition Height="*"/&gt;
<strong class="bold">    </strong><strong class="bold">&lt;RowDefinition Height="Auto"/&gt;</strong>
&lt;/Grid.RowDefinitions&gt;</pre>			<p>The new row will have a height of <strong class="source-inline">Auto</strong> so that it sizes itself to fit the <strong class="source-inline">Button</strong>. We still want the <strong class="source-inline">ListView</strong> to take up most of <span class="No-Break">the screen.</span></p>
			<p>Now, after the closing tag of the <strong class="source-inline">ListView</strong> control, add the new <strong class="source-inline">Button</strong>, <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
&lt;Button x:Name="AddButton" Content="Add Item"
  HorizontalAlignment="Right" Grid.Row="2" Margin="8"/&gt;</pre>			<p>As discussed in the previous<a id="_idIndexMarker208"/> chapter, the <strong class="source-inline">Button</strong> control does not have a <strong class="source-inline">Text</strong> property. Instead, if you only want a <strong class="source-inline">Button</strong> control to contain text, you assign it to the <strong class="source-inline">Content</strong> property. We are also assigning the <strong class="source-inline">Button</strong> control to the third row of the <strong class="source-inline">Grid</strong>, setting the margin, and aligning it to the right side of <span class="No-Break">the </span><span class="No-Break"><strong class="source-inline">Grid</strong></span><span class="No-Break">.</span></p>
			<p>Let’s see how the app looks now, <span class="No-Break">as follows:</span></p>
			<div>
				<div id="_idContainer035" class="IMG---Figure">
					<img src="image/B20908_02_019.jpg" alt="Figure 2.19 – My Media Collection with an Add Item button"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.19 – My Media Collection with an Add Item button</p>
			<p>The button doesn’t do anything yet. Because we’re not yet ready to add an additional window to the application to add items, let’s open a message popup to inform the user that this function is <span class="No-Break">not available.</span></p>
			<p>In <strong class="source-inline">MainWindow.xaml</strong>, wire up a new event handler inside <strong class="source-inline">AddButton</strong>. You can also remove the <strong class="source-inline">x:Name</strong> attribute. We’re able to remove the name because we do not need to reference it in the code-behind file. The code is shown in the <span class="No-Break">following snippet:</span></p>
			<pre class="source-code">
&lt;Button Content="Add Item"
   HorizontalAlignment="Right"
     Grid.Row="2" Margin="8" Click="AddButton_Click"/&gt;</pre>			<p>You can create the event <a id="_idIndexMarker209"/>handler by placing the cursor on the name of the handler, <strong class="source-inline">AddButton_Click</strong>, and pressing <em class="italic">F12</em>. This will create the handler and navigate to it in the <strong class="source-inline">MainWindow.xaml.cs</strong> file. Inside the <strong class="source-inline">AddButton_Click</strong> event handler, we will create a new <strong class="source-inline">ContentDialog</strong> with the message we want to display to <span class="No-Break">the user.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">The call to <strong class="source-inline">dialog.ShowAsync()</strong> must be awaited, so remember to add the <strong class="source-inline">async</strong> directive to the event handler, as <span class="No-Break">shown next.</span></p>
			<p>The <strong class="source-inline">async</strong> directive is highlighted in the following code snippet for the new <span class="No-Break">event handler:</span></p>
			<pre class="source-code">
private <strong class="bold">async</strong> void AddButton_Click(object sender,
  RoutedEventArgs e)
{
    var dialog = new ContentDialog
        {
            Title = "My Media Collection",
            Content = "Adding items to the collection is
                not yet supported.",
            CloseButtonText = "OK",
            XamlRoot = Content.XamlRoot
        };
    await dialog.ShowAsync();
}</pre>			<p>Now, run the application <a id="_idIndexMarker210"/>again and click the <strong class="bold">Add Item</strong> button, as illustrated in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer036" class="IMG---Figure">
					<img src="image/B20908_02_020.jpg" alt="Figure 2.20 – Displaying a ContentDialog popup"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.20 – Displaying a ContentDialog popup</p>
			<p>That’s all there is to adding a functional <strong class="source-inline">Button</strong> to a WinUI page. As we have discussed, some of this code will change and be moved to a <strong class="source-inline">ViewModel</strong> in the next chapter, but you should now have a good idea of how to work with some basic <strong class="source-inline">Button</strong> properties <span class="No-Break">and events.</span></p>
			<h1 id="_idParaDest-71"><a id="_idTextAnchor071"/>Summary</h1>
			<p>We have made some great initial progress on the <strong class="bold">My Media Collection</strong> application in this chapter. Along the way, you have learned how to use several common WinUI controls. You have also learned how to change the appearance, layout, and behavior of WinUI controls by using different layout controls and updating control properties in XAML. Finally, you saw how to leverage data binding and events to add and update data displayed to <span class="No-Break">the user.</span></p>
			<p>Next, we will learn how to decouple some of the logic we have been writing in the code-behind files to build testable and <span class="No-Break">maintainable applications.</span></p>
			<h1 id="_idParaDest-72"><a id="_idTextAnchor072"/>Questions</h1>
			<ol>
				<li>How do you add or remove features to or from <span class="No-Break">Visual Studio?</span></li>
				<li>What is the lowest minimum version of Windows that must be targeted when creating a new WinUI <span class="No-Break">3 project?</span></li>
				<li>Where can you add XAML resources that can be shared by components in a <span class="No-Break">whole application?</span></li>
				<li>What is the default name of the first window loaded in a new <span class="No-Break">WinUI app?</span></li>
				<li>Which XAML container control allows you to define rows and columns to lay out <span class="No-Break">its contents?</span></li>
				<li>Which XAML container control stacks its contents horizontally <span class="No-Break">or vertically?</span></li>
				<li>What is the name of the message box that WinUI apps can use to display simple messages <span class="No-Break">to users?</span></li>
				<li>Challenge: What type of layout panel in WinUI allows its contents to be <span class="No-Break">positioned absolutely?</span></li>
			</ol>
		</div>
		<div>
			<div id="_idContainer038" class="Content">
			</div>
		</div>
	</body></html>