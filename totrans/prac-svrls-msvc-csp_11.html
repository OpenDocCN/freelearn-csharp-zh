<html><head></head><body>
<div id="_idContainer226">
<h1 class="chapterNumber"><a id="_idTextAnchor332"/><span class="koboSpan" id="kobo.1.1">11</span></h1>
<h1 class="chapterTitle" id="_idParaDest-232"><a id="_idTextAnchor333"/><span class="koboSpan" id="kobo.2.1">The Car Sharing App</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">The Car Sharing app was introduced in </span><a href="Chapter_2.xhtml#_idTextAnchor038"><em class="italic"><span class="koboSpan" id="kobo.4.1">Chapter 2</span></em></a><span class="koboSpan" id="kobo.5.1">, </span><em class="italic"><span class="koboSpan" id="kobo.6.1">Demystifying Microservices Applications</span></em><span class="koboSpan" id="kobo.7.1">. </span><span class="koboSpan" id="kobo.7.2">Regardless of the technology used to implement it, any microservice is either processing a user interface request, processing a message from another microservice, or streaming a result to the communication bus defined for the solution. </span><span class="koboSpan" id="kobo.7.3">Therefore, we decided to dedicate a chapter to provide you with more details about it. </span><span class="koboSpan" id="kobo.7.4">The idea of putting the description of the entire solution into one chapter is to help you better understand the principles that we have covered throughout the book. </span><span class="koboSpan" id="kobo.7.5">Let’s now understand the general architecture of the app.</span></p>
<h1 class="heading-1" id="_idParaDest-233"><a id="_idTextAnchor334"/><span class="koboSpan" id="kobo.8.1">General architecture description</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.9.1">The application </span><a id="_idIndexMarker942"/><span class="koboSpan" id="kobo.10.1">that we will describe in more detail in this chapter is the Car Sharing app. </span><span class="koboSpan" id="kobo.10.2">The following figure presents the entire solution and the microservices involved in enabling the solution:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.11.1"><img alt="Figure 11.1: Car Sharing app" src="../Images/B31916_11_1.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.12.1">Figure 11.1: Car Sharing app</span></p>
<p class="normal"><span class="koboSpan" id="kobo.13.1">In </span><a href="Chapter_7.xhtml#_idTextAnchor151"><em class="italic"><span class="koboSpan" id="kobo.14.1">Chapter 7</span></em></a><span class="koboSpan" id="kobo.15.1">,</span><em class="italic"><span class="koboSpan" id="kobo.16.1"> Microservices in Practice</span></em><span class="koboSpan" id="kobo.17.1">, we described some messages of this demo that are exchanged between</span><a id="_idIndexMarker943"/><span class="koboSpan" id="kobo.18.1"> the microservices. </span><span class="koboSpan" id="kobo.18.2">All classes that implement these messages are included in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.19.1">SharedMessages</span></code><span class="koboSpan" id="kobo.20.1"> library project presented in the demo code. </span><span class="koboSpan" id="kobo.20.2">It is important to mention that all microservices must add this library to facilitate communication between the services. </span><span class="koboSpan" id="kobo.20.3">It is also worth noting that RabbitMQ is the message broker defined for this demonstration, which has already been presented in the book.</span></p>
<h2 class="heading-2" id="_idParaDest-234"><a id="_idTextAnchor335"/><span class="koboSpan" id="kobo.21.1">Microservices involved</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.22.1">As you can see in the </span><a id="_idIndexMarker944"/><span class="koboSpan" id="kobo.23.1">preceding figure, there are five microservices designed</span><a id="_idIndexMarker945"/><span class="koboSpan" id="kobo.24.1"> to demonstrate the solution. </span><span class="koboSpan" id="kobo.24.2">There is also a service that simply deploys the user interface using Blazor as the basis (Blazor UI). </span><span class="koboSpan" id="kobo.24.3">Its purpose is to host the user interface that interacts with the following microservices via HTTP and RabbitMQ where applicable.</span></p>
<h3 class="heading-3" id="_idParaDest-235"><a id="_idTextAnchor336"/><span class="koboSpan" id="kobo.25.1">Authorization microservice</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.26.1">In </span><a href="Chapter_10.xhtml#_idTextAnchor297"><em class="italic"><span class="koboSpan" id="kobo.27.1">Chapter 10</span></em></a><span class="koboSpan" id="kobo.28.1">, </span><em class="italic"><span class="koboSpan" id="kobo.29.1">Security and Observability for Serverless and Microservices Applications</span></em><span class="koboSpan" id="kobo.30.1">, we discussed the importance of implementing</span><a id="_idIndexMarker946"/><span class="koboSpan" id="kobo.31.1"> security with different layers of </span><a id="_idIndexMarker947"/><span class="koboSpan" id="kobo.32.1">protection. </span><span class="koboSpan" id="kobo.32.2">The </span><strong class="keyWord"><span class="koboSpan" id="kobo.33.1">Authorization </span></strong><span class="koboSpan" id="kobo.34.1">microservice is one of these layers, and it handles user logins and bearer token emissions. </span><span class="koboSpan" id="kobo.34.2">It also contains user information. </span><span class="koboSpan" id="kobo.34.3">It intercepts the route extension-accepted message of each car sharer and allows the users whose requests were accepted to access the car-sharer profile. </span><span class="koboSpan" id="kobo.34.4">The user who needs to car share can access the user profile of a car sharer who accepted their request by providing the route ID of the route it was accepted in.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.35.1">To implement this, the ASP.NET Core Web API was used. </span><span class="koboSpan" id="kobo.35.2">The same bearer token will be required for all endpoints. </span><span class="koboSpan" id="kobo.35.3">These are the endpoints proposed for this microservice:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.36.1">Login</span></strong><span class="koboSpan" id="kobo.37.1"> – Accepts credentials and returns a JWT</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.38.1">Renew</span></strong><span class="koboSpan" id="kobo.39.1"> – Accepts a token and returns a renewed JWT</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.40.1">Change Password</span></strong><span class="koboSpan" id="kobo.41.1"> – Accepts current and new passwords to update user credentials</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.42.1">Reset Password</span></strong><span class="koboSpan" id="kobo.43.1"> – Sends a temporary password to the user’s email</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.44.1">Add User</span></strong><span class="koboSpan" id="kobo.45.1"> – Registers a new user</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.46.1">User Profile</span></strong><span class="koboSpan" id="kobo.47.1"> – Provides user’s email and name for matched car-sharing trips</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.48.1">The purpose of managing user login, password updates, and token generation is common to all applications. </span><span class="koboSpan" id="kobo.48.2">It is worth noting that, in the real world, many solutions will decide to have this service done by </span><strong class="keyWord"><span class="koboSpan" id="kobo.49.1">identity providers</span></strong><span class="koboSpan" id="kobo.50.1"> from Microsoft, Google, or Meta.</span></p>
<h3 class="heading-3" id="_idParaDest-236"><a id="_idTextAnchor337"/><span class="koboSpan" id="kobo.51.1">CarSharer microservice</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.52.1">The </span><strong class="keyWord"><span class="koboSpan" id="kobo.53.1">CarSharer </span></strong><span class="koboSpan" id="kobo.54.1">microservice</span><a id="_idIndexMarker948"/><span class="koboSpan" id="kobo.55.1"> interacts with the Blazor UI and </span><a id="_idIndexMarker949"/><span class="koboSpan" id="kobo.56.1">contains the web API that implements all car-sharer operations. </span><span class="koboSpan" id="kobo.56.2">The car sharer inserts an initial route containing their departure and destination towns and possible intermediary towns.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.57.1">Then, they receive possible matchings with car-sharing requests by the </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.58.1">RoutesPlanning</span></code><span class="koboSpan" id="kobo.59.1"> microservice. </span><span class="koboSpan" id="kobo.59.2">Accordingly, it shows all possible extensions, and the car sharer can reject or accept each extension. </span><span class="koboSpan" id="kobo.59.3">They can also close the route, meaning they reach an acceptable number of people for the trip. </span><span class="koboSpan" id="kobo.59.4">Here, you have the routes imagined for the scenario of this sample:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.60.1">Create Route</span></strong><span class="koboSpan" id="kobo.61.1"> – Creates a new route with the date and all towns’ milestones</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.62.1">Delete Route</span></strong><span class="koboSpan" id="kobo.63.1"> – Removes a specific route</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.64.1">Close Route</span></strong><span class="koboSpan" id="kobo.65.1"> – Closes a route to prevent further matching</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.66.1">Extend Route</span></strong><span class="koboSpan" id="kobo.67.1"> – Accepts user requests to an existing route</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.68.1">Get Suggested Extensions</span></strong><span class="koboSpan" id="kobo.69.1"> – Lists compatible ride requests for a route</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.70.1">Get Active Routes</span></strong><span class="koboSpan" id="kobo.71.1"> – Lists all active (not expired or deleted) routes for a specific user</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.72.1">Considering this is essentially a CRUD operation, this microservice can be implemented using Azure Functions, as we discussed in </span><a href="Chapter_4.xhtml#_idTextAnchor105"><em class="italic"><span class="koboSpan" id="kobo.73.1">Chapter 4</span></em></a><span class="koboSpan" id="kobo.74.1">, </span><em class="italic"><span class="koboSpan" id="kobo.75.1">Azure Functions and Triggers Available</span></em><span class="koboSpan" id="kobo.76.1">.</span></p>
<h3 class="heading-3" id="_idParaDest-237"><a id="_idTextAnchor338"/><span class="koboSpan" id="kobo.77.1">CarRequests microservice</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.78.1">The</span><strong class="keyWord"><span class="koboSpan" id="kobo.79.1"> CarRequests</span></strong><span class="koboSpan" id="kobo.80.1"> microservice </span><a id="_idIndexMarker950"/><span class="koboSpan" id="kobo.81.1">also interacts with the Blazor UI. </span><span class="koboSpan" id="kobo.81.2">It </span><a id="_idIndexMarker951"/><span class="koboSpan" id="kobo.82.1">contains the web API that implements all car ride request operations. </span><span class="koboSpan" id="kobo.82.2">Requests to go from a source to a destination are inserted by the user. </span><span class="koboSpan" id="kobo.82.3">Then, the user can verify whether a car sharer inserted their request in their request. </span><span class="koboSpan" id="kobo.82.4">When a car sharer accepts the request, no other car sharer can select it, so just one option is handled. </span><span class="koboSpan" id="kobo.82.5">We assume that the user automatically accepts the car-sharer proposal. </span><span class="koboSpan" id="kobo.82.6">Here, we have the endpoints for this implementation:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.83.1">Add New Request</span></strong><span class="koboSpan" id="kobo.84.1"> – Inserts a ride request with source, destination, and date. </span><span class="koboSpan" id="kobo.84.2">It is important to have confirmation of whether the request has been registered or not.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.85.1">Get My Requests</span></strong><span class="koboSpan" id="kobo.86.1"> – Lists active requests with matching car-sharer options. </span><span class="koboSpan" id="kobo.86.2">Matching routes also contain the car owner’s details, which can be used to get user information from the authentication server.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.87.1">The Azure </span><a id="_idIndexMarker952"/><span class="koboSpan" id="kobo.88.1">Functions</span><a id="_idIndexMarker953"/><span class="koboSpan" id="kobo.89.1"> technology here is, again, a good option.</span></p>
<h3 class="heading-3" id="_idParaDest-238"><a id="_idTextAnchor339"/><span class="koboSpan" id="kobo.90.1">RoutesPlanning microservice</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.91.1">The </span><strong class="keyWord"><span class="koboSpan" id="kobo.92.1">RoutesPlanning </span></strong><span class="koboSpan" id="kobo.93.1">microservice </span><a id="_idIndexMarker954"/><span class="koboSpan" id="kobo.94.1">matches car-sharer </span><a id="_idIndexMarker955"/><span class="koboSpan" id="kobo.95.1">routes with car requests according to a distance minimization criterion. </span><span class="koboSpan" id="kobo.95.2">Its behavior is fully described in </span><a href="Chapter_7.xhtml#_idTextAnchor151"><em class="italic"><span class="koboSpan" id="kobo.96.1">Chapter 7</span></em></a><span class="koboSpan" id="kobo.97.1">,</span><em class="italic"><span class="koboSpan" id="kobo.98.1"> Microservices in Practice</span></em><span class="koboSpan" id="kobo.99.1">, and the technology used here is the ASP.NET Core Web API. </span><span class="koboSpan" id="kobo.99.2">To facilitate the understanding, the code that implements it is also available in this chapter.</span></p>
<h3 class="heading-3" id="_idParaDest-239"><a id="_idTextAnchor340"/><span class="koboSpan" id="kobo.100.1">Email microservice</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.101.1">To finish, the </span><strong class="keyWord"><span class="koboSpan" id="kobo.102.1">Email </span></strong><span class="koboSpan" id="kobo.103.1">microservice</span><strong class="keyWord"> </strong><span class="koboSpan" id="kobo.104.1">intercepts</span><a id="_idIndexMarker956"/><span class="koboSpan" id="kobo.105.1"> the route extension-accepted event </span><a id="_idIndexMarker957"/><span class="koboSpan" id="kobo.106.1">emitted by a car sharer and informs all users included in the route that they were included via email. </span><span class="koboSpan" id="kobo.106.2">It works in the background, as we checked some implementations in </span><a href="Chapter_5.xhtml#_idTextAnchor122"><em class="italic"><span class="koboSpan" id="kobo.107.1">Chapter 5</span></em></a><span class="koboSpan" id="kobo.108.1">, </span><em class="italic"><span class="koboSpan" id="kobo.109.1">Background Functions in Practice</span></em><span class="koboSpan" id="kobo.110.1">. </span><span class="koboSpan" id="kobo.110.2">The route extension-accepted event emitted contains </span><code class="inlineCode"><span class="koboSpan" id="kobo.111.1">UserBasicInfoMessage</span></code><span class="koboSpan" id="kobo.112.1">, where the user’s </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.113.1">DisplayName</span></code><span class="koboSpan" id="kobo.114.1"> in the example is supposed to be the email. </span><span class="koboSpan" id="kobo.114.2">These are the functions that will be executed in this microservice:</span></p>
<p class="normal"><span class="koboSpan" id="kobo.115.1">Listen to the </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.116.1">RouteExtensionAccepted</span></code><span class="koboSpan" id="kobo.117.1"> event and enqueue a request for sending an email</span></p>
<p class="normal"><span class="koboSpan" id="kobo.118.1">Process email, which is the routine that will dequeue the requests and send the email</span></p>
<p class="normal"><span class="koboSpan" id="kobo.119.1">The Azure Functions technology will be also used in this case. </span><span class="koboSpan" id="kobo.119.2">The idea of the microservice is not to have the processing of the emails attached directly to the listening event. </span><span class="koboSpan" id="kobo.119.3">That is why a queue is being used.</span></p>
<h1 class="heading-1" id="_idParaDest-240"><a id="_idTextAnchor341"/><span class="koboSpan" id="kobo.120.1">The demonstration code</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.121.1">You</span><a id="_idIndexMarker958"/><span class="koboSpan" id="kobo.122.1"> can find the </span><a id="_idIndexMarker959"/><span class="koboSpan" id="kobo.123.1">sample code for this chapter at </span><a href="https://github.com/PacktPublishing/Practical-Serverless-and-Microservices-with-Csharp/tree/main/ch11"><span class="url"><span class="koboSpan" id="kobo.124.1">https://github.com/PacktPublishing/Practical-Serverless-and-Microservices-with-Csharp/tree/main/ch11</span></span></a><span class="koboSpan" id="kobo.125.1">. </span><span class="koboSpan" id="kobo.125.2">This chapter will require, at least, the Visual Studio 2022 free </span><em class="italic"><span class="koboSpan" id="kobo.126.1">Community Edition</span></em><span class="koboSpan" id="kobo.127.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.128.1">Please note that the provided code is not fully functional. </span><span class="koboSpan" id="kobo.128.2">You, as the reader, are encouraged to further develop it. </span><span class="koboSpan" id="kobo.128.3">Its main purpose is to offer a foundation for implementing different microservice approaches in a specific use case.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.129.1">The following table summarizes the list of microservices proposed: </span></p>
<table class="table-container" id="table001-2">
<thead>
<tr>
<th class="table-head">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.130.1">Microservice</span></strong></p>
</th>
<th class="table-head">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.131.1">Technology</span></strong></p>
</th>
<th class="table-head">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.132.1">Key Responsibility</span></strong></p>
</th>
<th class="table-head">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.133.1">API/Event Highlights</span></strong></p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="table-cell">
<p class="normal"><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.134.1">Authorization</span></code></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.135.1">ASP.NET Core Web API</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.136.1">Manage user auth and profiles</span></p>
</td>
<td class="table-cell">
<p class="normal"><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.137.1">Login</span></code><span class="koboSpan" id="kobo.138.1">, </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.139.1">Renew</span></code><span class="koboSpan" id="kobo.140.1">, </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.141.1">AddUser</span></code><span class="koboSpan" id="kobo.142.1">, </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.143.1">GetProfile</span></code></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.144.1">CarSharer</span></code></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.145.1">Azure Functions</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.146.1">Manage car owner routes</span></p>
</td>
<td class="table-cell">
<p class="normal"><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.147.1">CreateRoute</span></code><span class="koboSpan" id="kobo.148.1">, </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.149.1">ExtendRoute</span></code><span class="koboSpan" id="kobo.150.1">, </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.151.1">GetSuggestions</span></code></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.152.1">CarRequest</span></code></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.153.1">Azure Functions</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.154.1">Manage ride requests from users</span></p>
</td>
<td class="table-cell">
<p class="normal"><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.155.1">AddRequest</span></code><span class="koboSpan" id="kobo.156.1">, </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.157.1">GetRequests</span></code></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.158.1">RoutesPlanning</span></code></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.159.1">ASP.NET Core Web API</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.160.1">Suggest optimal route-request matches</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.161.1">Event-driven logic, covered in </span><a href="Chapter_7.xhtml#_idTextAnchor151"><em class="italic"><span class="koboSpan" id="kobo.162.1">Chapter 7</span></em></a></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.163.1">Email</span></code></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.164.1">Azure Functions</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.165.1">Notify users via email</span></p>
</td>
<td class="table-cell">
<p class="normal"><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.166.1">RouteExtensionAccepted</span></code><span class="koboSpan" id="kobo.167.1"> → Queue → Email</span></p>
</td>
</tr>
</tbody>
</table>
<p class="normal"><span class="koboSpan" id="kobo.168.1">A SQL instance accepts TCP/IP requests and user/password authentication since it must communicate with clients running inside Docker containers. </span><span class="koboSpan" id="kobo.168.2">Please note that the SQL instance that comes with the Visual Studio installation doesn’t support TCP/IP, so you need either to install SQL Server Express or use a cloud instance. </span><span class="koboSpan" id="kobo.168.3">For local installation, both the installer and instructions are available here: </span><a href="https://www.microsoft.com/en-US/download/details.aspx?id=104781"><span class="url"><span class="koboSpan" id="kobo.169.1">https://www.microsoft.com/en-US/download/details.aspx?id=104781</span></span></a><span class="koboSpan" id="kobo.170.1">. </span><span class="koboSpan" id="kobo.170.2">You may also run the SQL Server development edition as a Docker image with the following:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.171.1">docker run -e "ACCEPT_EULA=Y" -e "MSSQL_SA_PASSWORD=yourStrong(!)Password" -p 1433:1433 -d mcr.microsoft.com/mssql/server:2022-latest
</span></code></pre>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.172.1">The username corresponding to the chosen password will be </span><code class="inlineCode"><span class="koboSpan" id="kobo.173.1">sa</span></code><span class="koboSpan" id="kobo.174.1">.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.175.1">To run</span><a id="_idIndexMarker960"/><span class="koboSpan" id="kobo.176.1"> Docker, use </span><strong class="keyWord"><span class="koboSpan" id="kobo.177.1">Docker Desktop</span></strong><span class="koboSpan" id="kobo.178.1"> for Windows (</span><a href="https://www.docker.com/products/docker-desktop"><span class="url"><span class="koboSpan" id="kobo.179.1">https://www.docker.com/products/docker-desktop</span></span></a><span class="koboSpan" id="kobo.180.1">).</span></li>
<li class="numberedList"><strong class="keyWord"><span class="koboSpan" id="kobo.181.1">Docker Desktop</span></strong><span class="koboSpan" id="kobo.182.1">, in turn, requires </span><strong class="keyWord"><span class="koboSpan" id="kobo.183.1">Windows Subsystem for Linux</span></strong><span class="koboSpan" id="kobo.184.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.185.1">WSL</span></strong><span class="koboSpan" id="kobo.186.1">), which can be</span><a id="_idIndexMarker961"/><span class="koboSpan" id="kobo.187.1"> installed by </span><a id="_idIndexMarker962"/><span class="koboSpan" id="kobo.188.1">following</span><a id="_idIndexMarker963"/><span class="koboSpan" id="kobo.189.1"> these steps:</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.190.1">Type </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.191.1">powershell</span></code><span class="koboSpan" id="kobo.192.1"> in the Windows 10/11 search bar.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.193.1">When Windows PowerShell is proposed as a search result, click on </span><strong class="screenText"><span class="koboSpan" id="kobo.194.1">Run as an administrator</span></strong><span class="koboSpan" id="kobo.195.1">.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.196.1">In the Windows PowerShell administrative console that appears, run the </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.197.1">wsl --install</span></code><span class="koboSpan" id="kobo.198.1"> command.</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.199.1">The following figure shows how the code structure is organized:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.200.1"><img alt="Figure 11.2: Car Sharing app code structure" src="../Images/B31916_11_2.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.201.1">Figure 11.2: Car Sharing app code structure</span></p>
<p class="normal"><span class="koboSpan" id="kobo.202.1">As you can see, there </span><a id="_idIndexMarker964"/><span class="koboSpan" id="kobo.203.1">is a </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.204.1">Common</span></code><span class="koboSpan" id="kobo.205.1"> library that shares messages that will be</span><a id="_idIndexMarker965"/><span class="koboSpan" id="kobo.206.1"> transferred between the microservices. </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.207.1">Authorization</span></code><span class="koboSpan" id="kobo.208.1"> and </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.209.1">RoutesPlanning</span></code><span class="koboSpan" id="kobo.210.1"> were written using web API microservices while </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.211.1">CarRequests</span></code><span class="koboSpan" id="kobo.212.1">, </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.213.1">CarSharer</span></code><span class="koboSpan" id="kobo.214.1">, and </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.215.1">Email</span></code><span class="koboSpan" id="kobo.216.1"> were written using Azure Functions as the basis. </span><span class="koboSpan" id="kobo.216.2">That is why we showed both possibilities during the presentation of the book. </span><span class="koboSpan" id="kobo.216.3">According to what we have presented, depending on the complexity of the microservices and the real need of the business rules, we</span><a id="_idIndexMarker966"/><span class="koboSpan" id="kobo.217.1"> can </span><a id="_idIndexMarker967"/><span class="koboSpan" id="kobo.218.1">choose between one of these alternatives for creating distributed applications.</span></p>
<h1 class="heading-1" id="_idParaDest-241"><a id="_idTextAnchor342"/><span class="koboSpan" id="kobo.219.1">Summary</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.220.1">In this chapter, we have presented a detailed demonstration of an event-driven application using microservices as the basis for connecting each message that is transferred from frontend to backend. </span><span class="koboSpan" id="kobo.220.2">We hope that this demo will help you better understand all the principles that we have presented throughout the book.</span></p>
<h1 class="heading-1" id="_idParaDest-242"><a id="_idTextAnchor343"/><span class="koboSpan" id="kobo.221.1">Further reading</span></h1>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.222.1">Cloud design patterns: </span><a href="https://learn.microsoft.com/en-us/azure/architecture/patterns/"><span class="url"><span class="koboSpan" id="kobo.223.1">https://learn.microsoft.com/en-us/azure/architecture/patterns/</span></span></a><a href="https://learn.microsoft.com/en-us/azure/architecture/patterns/ "/></li>
<li class="bulletList"><span class="koboSpan" id="kobo.224.1">Event-driven application: </span><a href="https://learn.microsoft.com/en-us/azure/architecture/guide/architecture-styles/event-driven"><span class="url"><span class="koboSpan" id="kobo.225.1">https://learn.microsoft.com/en-us/azure/architecture/guide/architecture-styles/event-driven</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-243"><a id="_idTextAnchor344"/><span class="koboSpan" id="kobo.226.1">Join our community on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.227.1">Join our community’s Discord space for discussions with the author and other readers:</span></p>
<p class="normal"><a href="https://packt.link/PSMCSharp"><span class="url"><span class="koboSpan" id="kobo.228.1">https://packt.link/PSMCSharp</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.229.1"><img alt="A qr code with black squares  AI-generated content may be incorrect." src="../Images/B31916_Discord-QR-Code.png"/></span></p>
</div>
</body></html>