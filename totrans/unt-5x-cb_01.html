<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Core UI &#x2013; Messages, Menus, Scores, and Timers"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Core UI – Messages, Menus, Scores, and Timers</h1></div></div></div><p>In this chapter, we will cover:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Displaying a "Hello World" UI text message</li><li class="listitem" style="list-style-type: disc">Displaying a digital clock</li><li class="listitem" style="list-style-type: disc">Displaying a digital countdown timer</li><li class="listitem" style="list-style-type: disc">Creating a message that fades away</li><li class="listitem" style="list-style-type: disc">Displaying a perspective 3D text message</li><li class="listitem" style="list-style-type: disc">Displaying an image</li><li class="listitem" style="list-style-type: disc">Creating UI Buttons to move between scenes</li><li class="listitem" style="list-style-type: disc">Organizing images inside panels and changing panel depths via buttons</li><li class="listitem" style="list-style-type: disc">Displaying the value of an interactive UI Slider</li><li class="listitem" style="list-style-type: disc">Displaying a countdown timer graphically with a UI Slider</li><li class="listitem" style="list-style-type: disc">Displaying a radar to indicate the relative locations of objects</li><li class="listitem" style="list-style-type: disc">Creating UIs with the Fungus open-source dialog system</li><li class="listitem" style="list-style-type: disc">Setting custom mouse cursor images</li><li class="listitem" style="list-style-type: disc">Input Fields component for text entry</li><li class="listitem" style="list-style-type: disc">Toggles and radio buttons via Toggle Groups</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Introduction</h1></div></div></div><p>A key element contributing to the entertainment and enjoyment of most games is the quality of the visual experience, and an important part of this<a class="indexterm" id="id0"/> is the <span class="strong"><strong>User Interface</strong></span> (<span class="strong"><strong>UI</strong></span>). UI elements involve ways for the user to interact with the game (such as buttons, cursors, text boxes, and so on), as well as ways for the game to present up-to-date information to the user (such as the time remaining, current health, score, lives left, or location of enemies). This chapter is filled with UI recipes to give you a range of examples and ideas for creating game UIs.</p><div class="section" title="The big picture"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>The big picture</h2></div></div></div><p>Every game is different, and so this chapter attempts to fulfill two key roles. The first aim is to provide step-by-step instructions on how to create a wide<a class="indexterm" id="id1"/> range of the <span class="strong"><strong>Unity 5</strong></span> UI elements and, where appropriate, associate them with game variables in code. The second aim is to provide a rich illustration of how UI elements can be used for a variety of purposes, so that you can get good ideas about how to make the Unity 5 UI set of controls deliver the particular visual experience and interactions for the games that you are developing.</p><p>The basic <a class="indexterm" id="id2"/>UI elements can provide static images and text to just make the screen look more interesting. By using scripts, we can change the content of these images and text objects, so that the players' numeric scores can be updated, or we can show stickmen images to indicate how many lives the player has left, and so on. Other UI elements are interactive, allowing users to click on buttons, choose options, enter text, and so on. More sophisticated kinds of UI can involve collecting and calculating data about the game (such as percentage time remaining or enemy hit damage; or the positions and types of key GameObjects in the scene, and their relationship to the location and orientation of the player), and then displaying these values in a natural, graphical way (such as progress bars or radar screens).</p><p>Core GameObjects, components, and concepts relating to Unity UI development include:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Canvas</strong></span>: Every UI element is a child<a class="indexterm" id="id3"/> to a <span class="strong"><strong>Canvas</strong></span>. There can be multiple <span class="strong"><strong>Canvas</strong></span> GameObjects in a single scene. If a <span class="strong"><strong>Canvas</strong></span> is not already present, then one will automatically be created when a new UI GameObject is created, with that UI object childed to the new <span class="strong"><strong>Canvas</strong></span> GameObject.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>EventSystem</strong></span>: An <span class="strong"><strong>EventSystem</strong></span> GameObject is<a class="indexterm" id="id4"/> required to manage the interaction events for UI<a class="indexterm" id="id5"/> controls. One will automatically be created with the first UI element.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Panel</strong></span>: UI objects can be<a class="indexterm" id="id6"/> grouped together (logically and physically) with UI <span class="strong"><strong>Panels</strong></span>. <span class="strong"><strong>Panels</strong></span> can play several roles, including providing a GameObject parent in the <span class="strong"><strong>Hierarchy</strong></span> for a related group of controls. They can provide a visual<a class="indexterm" id="id7"/> background image to graphically relate controls on the screen, and they can also have scripted resize and drag interactions added, if desired.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Visual UI</strong></span> controls: The visible UI controls themselves include <span class="strong"><strong>Button</strong></span>, <span class="strong"><strong>Image</strong></span>, <span class="strong"><strong>Text</strong></span>, <span class="strong"><strong>Toggle</strong></span>, and so <a class="indexterm" id="id8"/>on.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Interaction UI</strong></span> controls: These <a class="indexterm" id="id9"/>are non-visible components that are added to GameObjects; examples include<a class="indexterm" id="id10"/> Input Field and Toggle Group.</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Rect Transform</strong></span> component: UI GameObjects can exist in a different space from<a class="indexterm" id="id11"/> that of the 2D and 3D scenes, which cameras render. Therefore, UI GameObjects all have the special <span class="strong"><strong>Rect Transform</strong></span> component, which has some different properties to the scene's GameObject <span class="strong"><strong>Transform</strong></span> component (with its straightforward <span class="emphasis"><em>X</em></span>/<span class="emphasis"><em>Y</em></span>/<span class="emphasis"><em>Z</em></span> position, rotation, and scale properties). Associated with <span class="strong"><strong>Rect Transforms</strong></span> are pivot<a class="indexterm" id="id12"/> points (reference points for scaling, resizing, and rotations) and anchor points. Read more about these core features below.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Sibling Depth</strong></span>: The bottom-to-top display order (what appears on the top of what) for a UI element is determined initially <a class="indexterm" id="id13"/>by their sequence in the <span class="strong"><strong>Hierarchy</strong></span>. At designtime, this can be manually set by dragging GameObjects into the desired sequence in the <span class="strong"><strong>Hierarchy</strong></span>. At runtime, we can send messages to the <span class="strong"><strong>Rect Transforms</strong></span> of GameObjects to dynamically change their <span class="strong"><strong>Hierarchy</strong></span><a class="indexterm" id="id14"/> position (and therefore, the display order), as the game or user interaction demands. This is illustrated in the <span class="emphasis"><em>Organizing images inside panels and changing panel depths via buttons</em></span> recipe in this chapter.</li></ul></div><p>The following diagram <a class="indexterm" id="id15"/>shows how there are four main categories of UI controls, each in a <span class="strong"><strong>Canvas</strong></span> GameObject and interacting via an <span class="strong"><strong>EventSystem</strong></span> GameObject. UI Controls can have their own <span class="strong"><strong>Canvas</strong></span>, or several UI controls can be in the same <span class="strong"><strong>Canvas</strong></span>. The four categories are: static (display-only) and interactive UI controls, non-visible components (such as ones to group a set of mutually exclusive radio buttons), and C# script classes to manage UI control behavior through logic written in the program code. Note that UI controls that are not a child or descendent of a <span class="strong"><strong>Canvas</strong></span> will not work properly, and interactive UI controls will not work properly if the <span class="strong"><strong>EventSystem</strong></span> is missing. Both the <span class="strong"><strong>Canvas</strong></span> and <span class="strong"><strong>EventSystem</strong></span> GameObjects are automatically added to the Hierarchy as soon as the first UI GameObject is added to a scene.</p><div class="mediaobject"><img alt="The big picture" src="graphics/1362OT_01_45.jpg"/></div><p>UI <span class="strong"><strong>Rect Transforms</strong></span> represents a rectangular area rather than a single point, which is the case for scene GameObject <span class="strong"><strong>Transforms</strong></span>. <span class="strong"><strong>Rect Transforms</strong></span> describe how a UI element should be positioned and sized relatively to its parent. <span class="strong"><strong>Rect Transforms</strong></span> have a width and height that can be changed without affecting the local scale of the component. When the scale is changed for the <span class="strong"><strong>Rect Transform</strong></span> of a UI element, then this will also scale font sizes and borders on sliced images, and so on. If all four anchors are at the same point, then resizing the <span class="strong"><strong>Canvas</strong></span> will not stretch the <span class="strong"><strong>Rect Transform.</strong></span> It will only affect its position. In this case, we'll see the <span class="strong"><strong>Pos X</strong></span> and <span class="strong"><strong>Pos Y</strong></span> properties, and the <span class="strong"><strong>Width</strong></span> and <span class="strong"><strong>Height</strong></span> of the rectangle. However, if the anchors are not all at the same point, then <span class="strong"><strong>Canvas</strong></span> resizing will result in a stretching of the element's rectangle. So instead of the <span class="strong"><strong>Width</strong></span>, we'll see<a class="indexterm" id="id16"/> the values for <span class="strong"><strong>Left</strong></span> and <span class="strong"><strong>Right</strong></span>—the position of the horizontal sides of the rectangle to the sides of the <span class="strong"><strong>Canvas</strong></span>, where the <span class="strong"><strong>Width</strong></span> will depend on the actual <span class="strong"><strong>Canvas</strong></span> width (and the same for <span class="strong"><strong>Top/Bottom/Height</strong></span>).</p><p>Unity provides a set of preset values for pivots and anchors, making the most common values very quick and easy to assign to an element's <span class="strong"><strong>Rect Transform</strong></span>. The following screenshot shows the 3 x 3 grid that allows you quick choices about left, right, top, bottom, middle, horizontal, and vertical values. Also, the extra column on the right offers horizontal stretch presets, and the extra row at the bottom offers vertical stretch presets. Using the <span class="emphasis"><em>SHIFT</em></span> and <span class="emphasis"><em>ALT</em></span> keys sets the pivot and anchors when a preset is clicked.</p><div class="mediaobject"><img alt="The big picture" src="graphics/1362OT_01_03.jpg"/></div><p>The Unity manual provides a very good introduction to the <span class="strong"><strong>Rect Transform.</strong></span> In addition, Ray Wenderlich's two-part <a class="indexterm" id="id17"/>Unity UI web tutorial also presents a great overview of the <a class="indexterm" id="id18"/><span class="strong"><strong>Rect Transform</strong></span>, pivots, and anchors. Both parts of Wenderlich's tutorial make great use of animated GIFs to illustrate the effect of different values for pivots and anchors:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><a class="ulink" href="http://docs.unity3d.com/Manual/UIBasicLayout.html">http://docs.unity3d.com/Manual/UIBasicLayout.html</a></li><li class="listitem" style="list-style-type: disc"><a class="ulink" href="http://www.raywenderlich.com/78675/unity-new-gui-part-1">http://www.raywenderlich.com/78675/unity-new-gui-part-1</a></li></ul></div><p>There are three <span class="strong"><strong>Canvas</strong></span> render modes:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Screen Space – Overlay</strong></span>: In this<a class="indexterm" id="id19"/> mode, the UI elements are displayed without any reference to any camera (there is no need for any <span class="strong"><strong>Camera</strong></span> in the scene). The UI elements are presented in front of (overlaying) any sort of camera display of the scene contents.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Screen Space – Camera</strong></span>: In this<a class="indexterm" id="id20"/> mode, the <span class="strong"><strong>Canvas</strong></span> is treated as a flat plane in the frustum (viewing space) of a <span class="strong"><strong>Camera</strong></span> scene —where this plane is always facing the camera. So, any scene objects in front of this plane will be rendered in front of the UI elements on the <span class="strong"><strong>Canvas</strong></span>. The <span class="strong"><strong>Canvas</strong></span> is automatically resized if the screen size, resolution, or<a class="indexterm" id="id21"/> camera settings are changed.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>World Space</strong></span>: In this mode, the <span class="strong"><strong>Canvas</strong></span> acts as a flat plane in the frustum (viewing space) of a<a class="indexterm" id="id22"/> <span class="strong"><strong>Camera</strong></span> scene—but the plane is not made to always face the <span class="strong"><strong>Camera</strong></span>. How the <span class="strong"><strong>Canvas</strong></span> appears is just as with any other objects in the scene, relative to where (if anywhere) in the camera's viewing frustum the <span class="strong"><strong>Canvas</strong></span> plane is located and oriented.</li></ul></div><p>In this chapter, we have<a class="indexterm" id="id23"/> focused on the <span class="strong"><strong>Screen Space – Overlay</strong></span> mode. But all these recipes can equally be used with the other two modes as well.</p><p>Be creative! This chapter aims to act as a launching pad of ideas, techniques, and reusable <span class="strong"><strong>C#</strong></span> scripts for your own projects. Get to know the range of Unity UI elements, and try to work smart. Often, a UI element exists with most of the components that you may need for something in your game, but you may need to adapt it somehow. An example of this can be seen in the recipe that makes a UI Slider non-interactive, instead using it to display a red-green progress bar for the status of a countdown timer. See this in the <span class="emphasis"><em>Displaying a countdown timer graphically with a UI Slider</em></span> recipe.</p></div></div></div>
<div class="section" title="Displaying a &quot;Hello World&quot; UI text message"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Displaying a "Hello World" UI text message</h1></div></div></div><p>The first traditional problem<a class="indexterm" id="id24"/> to be solved with a new computing technology is often to display the <span class="emphasis"><em>Hello World</em></span> message. In this recipe, you'll learn to create a simple UI Text object with this message, in large white text with a selected font, and in the center of the screen.</p><div class="mediaobject"><img alt="Displaying a &quot;Hello World&quot; UI text message" src="graphics/1362OT_01_01.jpg"/></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec13"/>Getting ready</h2></div></div></div><p>For this recipe, we have prepared the font that you need in a folder named <code class="literal">Fonts</code> in the <code class="literal">1362_01_01</code> folder.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec14"/>How to do it...</h2></div></div></div><p>To display a <span class="strong"><strong>Hello World</strong></span> text message, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new Unity 2D project.</li><li class="listitem">Import the provided <code class="literal">Fonts</code> folder.</li><li class="listitem">In the <span class="strong"><strong>Hierarchy</strong></span> panel, add a <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span> GameObject to the scene – choose menu: <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span>. Name this GameObject <span class="strong"><strong>Text-hello</strong></span>.<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note02"/>Note</h3><p>Alternatively, use the <span class="strong"><strong>Create</strong></span> menu immediately below the <span class="strong"><strong>Hierarchy</strong></span> tab, choosing menu: <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span>.</p></div></div></li><li class="listitem">Ensure that your new <span class="strong"><strong>Text-hello</strong></span> GameObject is selected in the <span class="strong"><strong>Hierarchy </strong></span>panel. Now, in<a class="indexterm" id="id25"/> the <span class="strong"><strong>Inspector</strong></span>, ensure the following properties are set:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Text</strong></span> set to read <code class="literal">Hello World</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Font</strong></span> set to <code class="literal">Xolonium-Bold</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Font size</strong></span> as per your requirements (large—this depends on your screen—try <code class="literal">50</code> or <code class="literal">100</code>)</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Alignment</strong></span> set to horizontal and vertical center</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Horizontal</strong></span> and <span class="strong"><strong>Vertical Overflow</strong></span> set to <code class="literal">Overflow</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Color</strong></span> set to white</li></ul></div><p>The following screenshot shows the <span class="strong"><strong>Inspector</strong></span> panel with these settings:</p><div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_02.jpg"/></div></li><li class="listitem">Now, in the <span class="strong"><strong>Rect Transform</strong></span>, click on the <span class="strong"><strong>Anchor Presets</strong></span> square icon, which should result in several rows and columns of preset position squares appearing. Hold down <span class="emphasis"><em>SHIFT</em></span> and <span class="emphasis"><em>ALT</em></span> and click on the center one (row <span class="strong"><strong>middle</strong></span> and column <span class="strong"><strong>center</strong></span>).<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_03.jpg"/></div></li><li class="listitem">Your <span class="strong"><strong>Hello World</strong></span> text will now appear, centered nicely in the <span class="strong"><strong>Game</strong></span> panel.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec15"/>How it works...</h2></div></div></div><p>You have added a<a class="indexterm" id="id26"/> new <span class="strong"><strong>Text-hello</strong></span> GameObject to a scene. A parent <span class="strong"><strong>Canvas</strong></span> and UI <span class="strong"><strong>EventSystem</strong></span> will also have been automatically created.</p><p>You set the text content and presentation properties, and use the <span class="strong"><strong>Rect Transform</strong></span> anchor presets to ensure that whatever way the screen is resized, the text will stay horizontally and vertically centered.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec16"/>There's more...</h2></div></div></div><p>Here are some more details that you don't want to miss.</p><div class="section" title="Styling substrings with Rich Text"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec01"/>Styling substrings with Rich Text</h3></div></div></div><p>Each<a class="indexterm" id="id27"/> separate UI <span class="strong"><strong>Text</strong></span> component can have its own color, size, boldness styling, and so on. However, if <a class="indexterm" id="id28"/>you wish to quickly add some highlighting style to a part of a string to be displayed to the user, the following are examples of some of the HTML-style markups that are available without the need to create separate UI <span class="strong"><strong>Text</strong></span> objects:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Embolden text with the "<code class="literal">b</code>" markup: <code class="literal">I am &lt;b&gt;bold&lt;/b&gt;</code></li><li class="listitem" style="list-style-type: disc">Italicize<a class="indexterm" id="id29"/> text with the "<code class="literal">i</code>" markup: <code class="literal">I am &lt;i&gt;italic&lt;/i&gt;</code></li><li class="listitem" style="list-style-type: disc">Set the text color<a class="indexterm" id="id30"/> with hex values or a color name: <code class="literal">I am &lt;color=green&gt;green text&lt;/color&gt;, but I am &lt;color=#FF0000&gt;red&lt;/color&gt;</code><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note03"/>Note</h3><p>Learn more from the Unity<a class="indexterm" id="id31"/> online manual <span class="strong"><strong>Rich Text</strong></span> page at: <a class="ulink" href="http://docs.unity3d.com/Manual/StyledText.html">http://docs.unity3d.com/Manual/StyledText.html</a>.</p></div></div></li></ul></div></div></div></div>
<div class="section" title="Displaying a digital clock"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Displaying a digital clock</h1></div></div></div><p>Whether it is the<a class="indexterm" id="id32"/> real-world time, or perhaps an in-game countdown clock, many games are enhanced by some form of clock or timer display. The most straightforward type of clock to display is a string composed of the integers for hours, minutes, and seconds, which is what we'll create in this recipe.</p><p>The following screenshot shows the kind of clock we will be creating in this recipe:</p><div class="mediaobject"><img alt="Displaying a digital clock" src="graphics/1362OT_01_04.jpg"/></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec17"/>Getting ready</h2></div></div></div><p>For this recipe, we have prepared the font that you need in a folder named <code class="literal">Fonts</code> in the <code class="literal">1362_01_01</code> folder.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec18"/>How to do it...</h2></div></div></div><p>To create a digital clock, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new Unity 2D project.</li><li class="listitem">Import the provided <code class="literal">Fonts</code> folder.</li><li class="listitem">In the <span class="strong"><strong>Hierarchy</strong></span> panel, add a <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span> game object to the scene named <span class="strong"><strong>Text-clock</strong></span>.</li><li class="listitem">Ensure that GameObject <span class="strong"><strong>Text-clock</strong></span> is selected in the <span class="strong"><strong>Hierarchy </strong></span>panel. Now, in <span class="strong"><strong>Inspector</strong></span>, ensure that the following properties are set:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Text</strong></span> set to read as <code class="literal">time goes here</code> (this placeholder text will be replaced by the time when the scene is running.)</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Font type</strong></span> set to <code class="literal">Xolonium Bold</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Font Size</strong></span> set to <code class="literal">20</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Alignment</strong></span> set to horizontal and vertical center</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Horizontal</strong></span> and <span class="strong"><strong>Vertical Overflow</strong></span> settings set to <span class="strong"><strong>Overflow</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Color</strong></span> set to white</li></ul></div></li><li class="listitem">Now, in the <span class="strong"><strong>Rect Transform</strong></span>, click on the <span class="strong"><strong>Anchor Presets</strong></span> square icon, which will<a class="indexterm" id="id33"/> result in the appearance of several rows and columns of preset position squares. Hold down <span class="emphasis"><em>SHIFT</em></span> and <span class="emphasis"><em>ALT</em></span> and click on the <span class="strong"><strong>top</strong></span> and column <span class="strong"><strong>center</strong></span> rows.</li><li class="listitem">Create a folder named <code class="literal">Scripts</code> and create a C# script class called <code class="literal">ClockDigital</code> in this new folder:<div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

using UnityEngine.UI;
using System;

public class ClockDigital : MonoBehaviour {
  private Text textClock;

  void Start (){
    textClock = GetComponent&lt;Text&gt;();
  }

  void Update (){
    DateTime time = DateTime.Now;
    string hour = LeadingZero( time.Hour );
    string minute = LeadingZero( time.Minute );
    string second = LeadingZero( time.Second );

    textClock.text = hour + ":" + minute + ":" + second;
  }

  string LeadingZero (int n){
    return n.ToString().PadLeft(2, '0');
  }
}</pre></div></li><li class="listitem">With GameObject <span class="strong"><strong>Text-clock</strong></span> selected in the <span class="strong"><strong>Hierarchy </strong></span>panel, drag your <code class="literal">ClockDigital</code> script onto it to add an instance of this script class as a component to GameObject <span class="strong"><strong>Text-clock</strong></span>, as shown in the following screenshot:<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_05.jpg"/></div></li><li class="listitem">When<a class="indexterm" id="id34"/> you run the scene, you will now see a digital clock, showing hours, minutes, and seconds, at the top-center part of the screen.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec19"/>How it works...</h2></div></div></div><p>You added a <span class="strong"><strong>Text</strong></span> GameObject to a scene. You have added an instance of the <code class="literal">ClockDigital</code>  C# script class to that GameObject.</p><p>Notice that as well as the standard two C# packages (<code class="literal">UnityEngine</code> and <code class="literal">System.Collections</code>) that are written by default for every new script, you have added the <code class="literal">using</code> statements for two more C# script packages, <code class="literal">UnityEngine.UI</code> and <code class="literal">System</code>. The UI package is needed, since our code uses UI <code class="literal">Text</code> object; and the <code class="literal">System</code> package is needed, since it contains the <code class="literal">DateTime</code> class that we need to access the clock on the computer where our game is running.</p><p>There is one variable, <code class="literal">textClock</code>, which will be a reference to the <code class="literal">Text</code> component, whose text content we wish to update in each frame with the current time in hours, minutes, and seconds.</p><p>The <code class="literal">Start()</code> method (executed when the scene begins) sets the <code class="literal">textClock</code> variable to be a reference to the <code class="literal">Text</code> component in the GameObject, to which our scripted object has been added.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note04"/>Note</h3><p>Note that an alternative approach would be to make <code class="literal">textClock</code> a <code class="literal">public</code> variable. This will allow us to assign it via drag-and-drop in the <span class="strong"><strong>Inspector</strong></span> panel.</p></div></div><p>The <code class="literal">Update()</code>method is executed in every frame. The current time is stored in the <code class="literal">time </code>variable, and strings are created by adding leading zeros to the number values for the hours, minutes, and seconds properties of variable <code class="literal">time</code>.</p><p>This method<a class="indexterm" id="id35"/> finally updates the <code class="literal">text</code> property (that is, the letters and numbers that the user sees) to be a string, concatenating the hours, minutes, and seconds with colon separator characters.</p><p>The <code class="literal">LeadingZero(…)</code>method takes as input an integer and returns a string of this number with leading zeros added to the left, if the value was less than 10.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec20"/>There's more...</h2></div></div></div><p>There are some details that you don't want to miss.</p><div class="section" title="The Unity tutorial for animating an analogue clock"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec02"/>The Unity tutorial for animating an analogue clock</h3></div></div></div><p>Unity has<a class="indexterm" id="id36"/> published a nice tutorial on how to create 3D objects, and animate them through C# script to display an <a class="indexterm" id="id37"/>analogue clock at <a class="ulink" href="https://unity3d.com/learn/tutorials/modules/beginner/scripting/simple-clock">https://unity3d.com/learn/tutorials/modules/beginner/scripting/simple-clock</a>.</p></div></div></div>
<div class="section" title="Displaying a digital countdown timer"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Displaying a digital countdown timer</h1></div></div></div><p>This recipe<a class="indexterm" id="id38"/> will show you how to display a digital countdown clock shown here:</p><div class="mediaobject"><img alt="Displaying a digital countdown timer" src="graphics/1362OT_01_07.jpg"/></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec21"/>Getting ready</h2></div></div></div><p>This recipe adapts the previous one. So, make a copy of the project for the previous recipe, and work on this copy.</p><p>For this recipe, we have prepared the script that you need in a folder named <code class="literal">Scripts</code> in the <code class="literal">1362_01_03</code> folder.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec22"/>How to do it...</h2></div></div></div><p>To create a <a class="indexterm" id="id39"/>digital countdown timer, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the <span class="strong"><strong>Inspector</strong></span> panel, remove the scripted component, <code class="literal">ClockDigital,</code> from GameObject <span class="strong"><strong>Text-clock</strong></span>.</li><li class="listitem">Create a <code class="literal">DigitalCountdown</code> C# script class containing the following code, and add an instance as a scripted component to GameObject <span class="strong"><strong>Text-clock</strong></span>:<div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
using UnityEngine.UI;
using System;

public class DigitalCountdown : MonoBehaviour {
  private Text textClock;

  private float countdownTimerDuration;
  private float countdownTimerStartTime;

  void Start (){
    textClock = GetComponent&lt;Text&gt;();
    CountdownTimerReset(30);
  }

  void Update (){
    // default - timer finished
    string timerMessage = "countdown has finished";
    int timeLeft = (int)CountdownTimerSecondsRemaining();

    if(timeLeft &gt; 0)
      timerMessage = "Countdown seconds remaining = " + LeadingZero( timeLeft );

    textClock.text = timerMessage;
  }

  private void CountdownTimerReset (float delayInSeconds){
    countdownTimerDuration = delayInSeconds;
    countdownTimerStartTime = Time.time;
  }

  private float CountdownTimerSecondsRemaining (){
    float elapsedSeconds = Time.time - countdownTimerStartTime;
    float timeLeft = countdownTimerDuration - elapsedSeconds;
    return timeLeft;
  }

  private string LeadingZero (int n){
    return n.ToString().PadLeft(2, '0');
  }
}</pre></div></li><li class="listitem">When you run the scene, you will now see a digital clock counting down from 30. When the countdown reaches zero, the message <span class="strong"><strong>countdown has finished</strong></span> will be displayed.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec23"/>How it works...</h2></div></div></div><p>You added a <span class="strong"><strong>Text</strong></span><a class="indexterm" id="id40"/> GameObject to a scene. You have added an instance of the <code class="literal">DigitalCountdown</code> C# script class to that GameObject.</p><p>There is one variable, <code class="literal">textClock</code>, which will be a reference to the <code class="literal">Text</code> component, whose text content we wish to update in each frame with a time remaining message (or a timer complete message). Then, a call is made to the <code class="literal">CountdownTimerReset(…)</code> method, passing an initial value of 30 seconds.</p><p>The <code class="literal">Start()</code> method (executed when the scene begins) sets the <code class="literal">textClock</code> variable to find the <code class="literal">Text</code> component in the GameObject where our scripted object has been added.</p><p>The <code class="literal">Update()</code> method is executed in every frame. This method initially sets the <code class="literal">timerMessage</code> variable to a message, stating that the timer has finished (the default message to display). Then the seconds remaining are tested to be greater than zero. And if so, then the message variable has its contents changed to display the integer (whole) number of the seconds remaining in the countdown—retrieved from the <code class="literal">CountdownTimerSecondsRemaining()</code> method. This method finally updates the <code class="literal">text</code> property (that is, the letters and numbers that the user sees) to be a string with a message about the remaining seconds.</p><p>The <code class="literal">CountdownTimerReset(…)</code> method records the number of seconds provided, and the time the method was called.</p><p>The <code class="literal">CountdownTimerSecondsRemaining()</code> method returns an integer value of the number of seconds<a class="indexterm" id="id41"/> remaining.</p></div></div>
<div class="section" title="Creating a message that fades away"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>Creating a message that fades away</h1></div></div></div><p>Sometimes, we<a class="indexterm" id="id42"/> want a message to display just for a certain time, and then fade away and disappear, which will appear as shown in this screenshot:</p><div class="mediaobject"><img alt="Creating a message that fades away" src="graphics/1362OT_01_20.jpg"/></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec24"/>Getting ready</h2></div></div></div><p>This recipe adapts the first recipe in this chapter, so make a copy of that project to work on for this recipe.</p><p>For this recipe, we have prepared the script that you need in a folder named <code class="literal">Scripts</code> in the <code class="literal">1362_01_04</code> folder.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec25"/>How to do it...</h2></div></div></div><p>To display a text message that fades away, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Import the provided C# script class called <code class="literal">CountdownTimer</code>.</li><li class="listitem">Ensure that GameObject <span class="strong"><strong>Text-hello</strong></span> is selected in the <span class="strong"><strong>Hierarchy</strong></span> tab. Then, attach an instance of the <code class="literal">CountdownTimer</code> C# script class as a component of this GameObject.</li><li class="listitem">Create a C# script class, <code class="literal">FadeAway</code>, containing the following code, and add an instance as a scripted component to the GameObject <span class="strong"><strong>Text-hello</strong></span>:<div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class FadeAway : MonoBehaviour {
  private CountdownTimer countdownTimer;
  private Text textUI;
  private int fadeDuration = 5;
  private bool fading = false;

  void Start (){
    textUI = GetComponent&lt;Text&gt;();
    countdownTimer = GetComponent&lt;CountdownTimer&gt;();

    StartFading(fadeDuration);
  }

  void Update () {
    if(fading){
      float alphaRemaining = countdownTimer.GetProportionTimeRemaining();
      print (alphaRemaining);
      Color c = textUI.material.color;
      c.a = alphaRemaining;
      textUI.material.color = c;

      // stop fading when very small number
      if(alphaRemaining &lt; 0.01)
        fading = false;
    }
  }

  public void StartFading (int timerTotal){
    countdownTimer.ResetTimer(timerTotal);
    fading = true;
  }
}</pre></div></li><li class="listitem">When you run the scene, you will now see that the message on the screen slowly fades away, disappearing after 5 seconds.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec26"/>How it works...</h2></div></div></div><p>An instance<a class="indexterm" id="id43"/> of the provided <code class="literal">CountdownTimer</code> script class was added as a component to the GameObject <span class="strong"><strong>Text-hello</strong></span>.</p><p>You added to the GameObject <span class="strong"><strong>Text-hello</strong></span> an instance of the scripted class, <code class="literal">FadeAway</code>. The <code class="literal">Start()</code>method caches references to the <code class="literal">Text</code> and <code class="literal">CountdownTimer</code> components in the <code class="literal">countdownTimer</code> and <code class="literal">textUI</code> variables. Then, it calls the <code class="literal">StartFading(…)</code>method, passing in the number 5, so that the message will have faded to invisible after 5 seconds.</p><p>The <code class="literal">StartFading(…)</code> method starts this timer scripted component to countdown to the given number of seconds. It also sets the <code class="literal">fading</code> Boolean flag variable to <code class="literal">true</code>.</p><p>The <code class="literal">Update()</code> method, in each frame, tests if the <code class="literal">fading</code> variable is <code class="literal">true</code>. If it is true, then the alpha (transparency) component of the color of the <span class="strong"><strong>Text-hello</strong></span> object is set to a value between 0.0 <a class="indexterm" id="id44"/>and 1.0, based on the proportion of the time remaining in the <code class="literal">CountdownTimer</code> object. Finally, if the proportion of time remaining is less than a very small value (0.01), then the <code class="literal">fading</code> variable is set to <code class="literal">false</code> (to save the processing work since the text is now invisible).</p></div></div>
<div class="section" title="Displaying a perspective 3D text message"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>Displaying a perspective 3D text message</h1></div></div></div><p>Unity provides <a class="indexterm" id="id45"/>an alternative way to display text in 3D via the <code class="literal">TextMesh</code> component. While this is really suitable for a text-in-the-scene kind of situation (such as billboards, road signs, and generally wording on the side of 3D objects that might be seen close up), it is quick to create, and is another way of creating interesting menus or instructions scenes, and the like.</p><p>In this recipe, you'll learn how to create a scrolling 3D text, simulating the famous opening credits of the movie <span class="strong"><strong>Star Wars</strong></span>, which looks something like this:</p><div class="mediaobject"><img alt="Displaying a perspective 3D text message" src="graphics/1362OT_01_27.jpg"/></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec27"/>Getting ready</h2></div></div></div><p>For this recipe, we have prepared the fonts that you need in a folder named <code class="literal">Fonts</code>, and the text file that you need in a folder named <code class="literal">Text</code>, in the <code class="literal">1362_01_04</code> folder.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec28"/>How to do it...</h2></div></div></div><p>To display perspective 3D text, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create<a class="indexterm" id="id46"/> a new Unity 3D project (this ensures that we start off with a <span class="strong"><strong>Perspective</strong></span> camera, suitable for the 3D effect that we want to create).<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note05"/>Note</h3><p>If you need to mix 2D and 3D scenes in your project, you can always manually set any camera's <span class="strong"><strong>Camera Projection</strong></span> property to <span class="strong"><strong>Perspective</strong></span> or <span class="strong"><strong>Orthographic</strong></span> via the <span class="strong"><strong>Inspector</strong></span> panel.</p></div></div></li><li class="listitem">In the <span class="strong"><strong>Hierarchy</strong></span> panel, select the <span class="strong"><strong>Main Camera</strong></span> item, and, in the <span class="strong"><strong>Inspector</strong></span> panel, set its properties as follows: <span class="strong"><strong>Camera Clear Flags</strong></span> to <span class="strong"><strong>solid color</strong></span>, <span class="strong"><strong>Field of View</strong></span> to <span class="strong"><strong>150</strong></span>. Also set the <span class="strong"><strong>Background color</strong></span> to black.</li><li class="listitem">Import the provided <code class="literal">Fonts</code> folder.</li><li class="listitem">In the <span class="strong"><strong>Hierarchy</strong></span> panel, add a <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span> game object to the scene – choose menu: <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span>. Name this GameObject as <code class="literal">Text-star-wars</code>. Set its <span class="strong"><strong>Text Content </strong></span>as Star Wars (with each word on a new line). Then, set its <span class="strong"><strong>Font</strong></span> to <code class="literal">Xolonium Bold</code>, and its <span class="strong"><strong>Font Size</strong></span> to <code class="literal">50</code>. Use the anchor presets in <span class="strong"><strong>Rect Transform</strong></span> to position this UI <span class="strong"><strong>Text</strong></span> object at the top center of the screen.</li><li class="listitem">In the <span class="strong"><strong>Hierarchy</strong></span> panel, add a <span class="strong"><strong>3D Text</strong></span> game object to the scene – choose menu: <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>3D Object</strong></span> | <span class="strong"><strong>3D Text</strong></span>. Name this GameObject <code class="literal">Text-crawler</code>.</li><li class="listitem">In the <span class="strong"><strong>Inspector</strong></span> panel, set the <span class="strong"><strong>Transform</strong></span> properties for GameObject <span class="strong"><strong>Text-crawler</strong></span> as follows: <span class="strong"><strong>Position</strong></span> (<code class="literal">0</code>, <code class="literal">-300</code>, <code class="literal">-20</code>), <span class="strong"><strong>Rotation</strong></span> (<code class="literal">15</code>, <code class="literal">0</code>, <code class="literal">0</code>).</li><li class="listitem">In the <span class="strong"><strong>Inspector</strong></span> panel, set the <span class="strong"><strong>Text Mesh</strong></span> properties for GameObject <span class="strong"><strong>Text-crawler</strong></span> as follows:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Paste the content of the provided text file, <code class="literal">star_wars.txt,</code> into <span class="strong"><strong>Text</strong></span>.</li><li class="listitem" style="list-style-type: disc">Set <span class="strong"><strong>Offset Z</strong></span> = <code class="literal">20</code>, <span class="strong"><strong>Line Spacing</strong></span> = <code class="literal">0.8</code>, and <span class="strong"><strong>Anchor</strong></span> = Middle center</li><li class="listitem" style="list-style-type: disc">Set <span class="strong"><strong>Font Size</strong></span> = <code class="literal">200</code>, <span class="strong"><strong>Font</strong></span> = <code class="literal">SourceSansPro-BoldIt</code></li></ul></div></li><li class="listitem">When the scene is made to run, the Star Wars story text will now appear nicely squashed in 3D perspective on the screen.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec29"/>How it works...</h2></div></div></div><p>You have simulated the opening screen of the movie <span class="emphasis"><em>Star Wars</em></span>, with a flat UI <span class="strong"><strong>Text</strong></span> object title at the top of the screen, and 3D <span class="strong"><strong>Text Mesh</strong></span> with settings that appear to be disappearing<a class="indexterm" id="id47"/> into the horizon with 3D perspective 'squashing'.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec30"/>There's more...</h2></div></div></div><p>There are some details that you don't want to miss.</p><div class="section" title="We have to make this text crawl like it does in the movie"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec03"/>We have to make this text crawl like it does in the movie</h3></div></div></div><p>With a few<a class="indexterm" id="id48"/> lines of code, we can make this text scroll in the horizon just as it does in the movie. Add the following C# script class, <code class="literal">ScrollZ,</code> as a component to GameObject <span class="strong"><strong>Text-crawler</strong></span>:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class ScrollZ : MonoBehaviour {
  public float scrollSpeed = 20;

  void Update () {
    Vector3 pos = transform.position;
    Vector3 localVectorUp = transform.TransformDirection(0,1,0);
    pos += localVectorUp * scrollSpeed * Time.deltaTime;
    transform.position = pos;
  }
}</pre></div><p>In each frame via the <code class="literal">Update()</code> method, the position of the 3D text object is moved in the direction of this GameObject's local up-direction.</p></div><div class="section" title="Where to learn more"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec04"/>Where to learn more</h3></div></div></div><p>Learn more about 3D<a class="indexterm" id="id49"/> Text and Text Meshes in the Unity online manual at <a class="ulink" href="http://docs.unity3d.com/Manual/class-TextMesh.html">http://docs.unity3d.com/Manual/class-TextMesh.html</a>.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note06"/>Note</h3><p>NOTE: An alternative way of achieving perspective text like this would be to use a Canvas with render mode World Space.</p></div></div></div></div></div>
<div class="section" title="Displaying an image"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec15"/>Displaying an image</h1></div></div></div><p>There are many cases<a class="indexterm" id="id50"/> where we wish to display an image onscreen, including logos, maps, icons, splash graphics, and so on. In this recipe, we will display an image at the top of the screen, and make it stretch to fit whatever width that the screen is resized to.</p><p>The following screenshot shows Unity displaying an image:</p><div class="mediaobject"><img alt="Displaying an image" src="graphics/1362OT_01_06.jpg"/></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec31"/>Getting ready</h2></div></div></div><p>For this recipe, we<a class="indexterm" id="id51"/> have prepared the image that you need in a folder named <code class="literal">Images</code> in the <code class="literal">1362_01_06</code> folder.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec32"/>How to do it...</h2></div></div></div><p>To display a<a class="indexterm" id="id52"/> stretched image, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new Unity 3D project.<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note07"/>Note</h3><p>3D projects will, by default, import images as a <span class="strong"><strong>Texture</strong></span>, and 2D projects will import images as <span class="strong"><strong>Sprite (2D and UI)</strong></span>. Since we're going to use a <span class="strong"><strong>RawImage</strong></span> UI component, we need our images to be imported as textures.</p></div></div></li><li class="listitem">Set the Game panel to a 400 x 300 size. Do this via menu: <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Project Settings</strong></span> | <span class="strong"><strong>Player</strong></span>. Ensure that the <span class="strong"><strong>Resolution</strong></span> | <span class="strong"><strong>Default is Full Screen</strong></span> setting check is unchecked, and the width/height is set to 400 x 300. Then, in the <span class="strong"><strong>Game</strong></span> panel, select <span class="strong"><strong>Stand Alone (400 x 300)</strong></span>. This will allow us to test the stretching of our image to a width of 400 pixels.</li><li class="listitem">Import the provided folder, which is called <code class="literal">Images</code>. In the <span class="strong"><strong>Inspector</strong></span> tab, ensure that the <code class="literal">unity5_learn</code> image has <span class="strong"><strong>Texture Type</strong></span> set to <span class="strong"><strong>Texture</strong></span>. If it does not, then choose <span class="strong"><strong>Texture</strong></span> from the drop-down list, and click on the <span class="strong"><strong>Apply</strong></span> button. The following screenshot shows the <span class="strong"><strong>Inspector</strong></span> tab with the <span class="strong"><strong>Texture</strong></span> settings:<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_13.jpg"/></div></li><li class="listitem">In the<a class="indexterm" id="id53"/> <span class="strong"><strong>Hierarchy</strong></span> panel, add a <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>RawImage</strong></span> GameObject to the scene named <span class="strong"><strong>RawImage-unity5</strong></span>.<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note08"/>Note</h3><p>If you wish to <span class="emphasis"><em>prevent</em></span> the distortion and stretching of an image, then use the UI <span class="strong"><strong>Sprite</strong></span> GameObject instead, and ensure that you check the <span class="strong"><strong>Preserve Aspect</strong></span> option, in its <span class="strong"><strong>Image (Script)</strong></span> component, in the <span class="strong"><strong>Inspector</strong></span> panel.</p></div></div></li><li class="listitem">Ensure that the GameObject <span class="strong"><strong>RawImage-unity5 </strong></span>is selected in the <span class="strong"><strong>Hierarchy </strong></span>panel. From your <span class="strong"><strong>Project</strong></span> folder (<code class="literal">Images</code>), drag the <code class="literal">unity5_learn</code> image into the <span class="strong"><strong>Raw Image (Script)</strong></span> public property <span class="strong"><strong>Texture</strong></span>. Click on the <span class="strong"><strong>Set Native Size</strong></span> button to preview the image before it gets stretched, as shown:<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_14.jpg"/></div></li><li class="listitem">Now, in <span class="strong"><strong>Rect Transform</strong></span>, click on the <span class="strong"><strong>Anchor Presets</strong></span> square icon, which will result in several rows and columns of preset position squares appearing. Hold down <span class="emphasis"><em>SHIFT</em></span> and <span class="emphasis"><em>ALT</em></span> and click on the <span class="strong"><strong>top row</strong></span> and the <span class="strong"><strong>stretch column</strong></span>.</li><li class="listitem">The image will now be positioned neatly at the top of the <span class="strong"><strong>Game</strong></span> panel, and will be stretched to the full width of 400 pixels.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec33"/>How it works...</h2></div></div></div><p>You have <a class="indexterm" id="id54"/>ensured that an image has <span class="strong"><strong>Texture Type</strong></span> set to <span class="strong"><strong>Texture</strong></span>. You added a <span class="strong"><strong>UI RawImage</strong></span> control to the scene. The <span class="strong"><strong>RawImage</strong></span> control has been made to display the <code class="literal">unity5_learn</code> image file.</p><p>The image has been positioned at the top of the <span class="strong"><strong>Game</strong></span> panel, and using the anchor and pivot presets, it has made the image stretch to fill the whole width, which we set to 400 pixels via the <span class="strong"><strong>Player</strong></span> settings.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec34"/>There's more...</h2></div></div></div><p>There are some details that you don't want to miss:</p><div class="section" title="Working with Sprites and UI Image components"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec05"/>Working with Sprites and UI Image components</h3></div></div></div><p>If you simply<a class="indexterm" id="id55"/> wish to display non-animated images, then <span class="strong"><strong>Texture</strong></span> images and UI <span class="strong"><strong>RawImage</strong></span> controls are the way to go. However, if you want more options on how an image should be displayed (such as tiling, and animation), then the UI<span class="strong"><strong> Sprite</strong></span> control should be used instead. This control needs image files to be imported as the <span class="strong"><strong>Sprite (2D and UI) type</strong></span>.</p><p>Once an image file has been dragged into the UI <span class="strong"><strong>Image</strong></span> control's <span class="strong"><strong>Sprite</strong></span> property, additional properties will be available, such as <span class="strong"><strong>Image Type</strong></span>, options to preserve aspect ratio, and so on.</p><div class="mediaobject"><img alt="Working with Sprites and UI Image components" src="graphics/1362OT_01_15.jpg"/></div></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec35"/>See also</h2></div></div></div><p>An example of tiling <a class="indexterm" id="id56"/>a Sprite image can be found in the <span class="emphasis"><em>Revealing icons for multiple object pickups by changing the size of a tiled image</em></span> recipe in <a class="link" href="ch02.html" title="Chapter 2. Inventory GUIs">Chapter 2</a>, <span class="emphasis"><em>Inventory GUIs</em></span>.</p></div></div>
<div class="section" title="Creating UI Buttons to move between scenes"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec16"/>Creating UI Buttons to move between scenes</h1></div></div></div><p>As well as scenes where the player plays the game, most games will have menu screens, which display to the <a class="indexterm" id="id57"/>user messages about instructions, high scores, the level they have reached so far, and so on. Unity provides the UI <span class="strong"><strong>Buttons</strong></span> to make it easy to offer users a simple way to indicate their choice of action on such screens.</p><p>In this recipe, we'll create a very simple game consisting of two screens, each with a button to load the other one, similar to the following screenshot:</p><div class="mediaobject"><img alt="Creating UI Buttons to move between scenes" src="graphics/1362OT_01_29.jpg"/></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec36"/>How to do it...</h2></div></div></div><p>To create a button-navigable multi-scene game, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new Unity 2D project.</li><li class="listitem">Save the current (empty) scene, naming it <span class="strong"><strong>page1</strong></span>.</li><li class="listitem">Add a UI <span class="strong"><strong>Text</strong></span> object positioned at the top center of the scene, containing text <code class="literal">Main Menu / (page 1)</code> in a large font size.</li><li class="listitem">Add a UI <span class="strong"><strong>Button</strong></span> to the scene positioned in the middle center of the screen. In the <span class="strong"><strong>Hierarchy</strong></span> panel, click on the show children triangle to display the UI <span class="strong"><strong>Text</strong></span> child of this button GameObject. Select the <span class="strong"><strong>Text</strong></span> button-child GameObject, and in the <span class="strong"><strong>Inspector</strong></span> panel for the <span class="strong"><strong>Text</strong></span> property of the <span class="strong"><strong>Text (Script)</strong></span> component, enter the button text called <code class="literal">goto page 2</code>, as shown here:<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_30.jpg"/></div></li><li class="listitem">Add the current scene to the build, choosing menu: <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Build Settings…</strong></span>. Then, click on the <span class="strong"><strong>Add Current</strong></span> button so that the <span class="strong"><strong>page1</strong></span> scene becomes the first scene<a class="indexterm" id="id58"/> on the list of <span class="strong"><strong>Scenes in the Build</strong></span>.<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note09"/>Note</h3><p>We cannot tell Unity to load a scene that has not been added to the list of scenes in the build. We use the <code class="literal">Application.LoadLevel(…)</code>code to tell Unity to load the scene name (or numeric index) that is provided.</p></div></div></li><li class="listitem">Create a C# script class, <code class="literal">MenuActions,</code> containing the following code, and add an instance as a scripted component to the <span class="strong"><strong>Main Camera</strong></span>:<div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class MenuActions : MonoBehaviour {
  public void MENU_ACTION_GotoPage(string sceneName){
    Application.LoadLevel(sceneName);
  }
}</pre></div></li><li class="listitem">Ensure that the <span class="strong"><strong>Button</strong></span> is selected in the <span class="strong"><strong>Hierarchy</strong></span> and click on the plus sign "<span class="strong"><strong>+</strong></span>" button at the bottom of the <span class="strong"><strong>Button (Script)</strong></span> component, in the <span class="strong"><strong>Inspector view</strong></span>, to create a new <span class="strong"><strong>OnClick</strong></span> event handler for this button.</li><li class="listitem">Drag the <span class="strong"><strong>Main Camera</strong></span> from the <span class="strong"><strong>Hierarchy</strong></span> over the <span class="strong"><strong>Object</strong></span> slot—immediately below the menu saying <span class="strong"><strong>Runtime Only</strong></span>. This means that when the <span class="strong"><strong>Button</strong></span> receives an <span class="strong"><strong>OnClick</strong></span> event, we can call a public method from a scripted object inside the <span class="strong"><strong>Main Camera</strong></span>.</li><li class="listitem">Now, select the <span class="strong"><strong>MENU_ACTION_GotoPage()</strong></span> method from the <span class="strong"><strong>MenuActions</strong></span> drop-down list (initially showing <span class="strong"><strong>No Function</strong></span>). Type <code class="literal">page2</code> (the name of the scene we want to be loaded when this button is clicked) in the text box, below the method's drop-down menu. This <span class="strong"><strong>page2</strong></span> string will be passed to the method when the button receives an <span class="strong"><strong>OnClick</strong></span> event message, as shown here:<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_31.jpg"/></div></li><li class="listitem">Save the<a class="indexterm" id="id59"/> current scene, create a new empty scene, and then save this new scene as <span class="strong"><strong>page2</strong></span>.</li><li class="listitem">Follow the similar steps for this scene. Add a <span class="strong"><strong>UI Text</strong></span> GameObject, displaying the text <span class="strong"><strong>Instructions / (page 2)</strong></span> in a large font size. Add a UI <span class="strong"><strong>Button,</strong></span> showing the <span class="strong"><strong>goto page 1 text.</strong></span></li><li class="listitem">Add the current scene to the build (so now, both <span class="strong"><strong>page1</strong></span> and <span class="strong"><strong>page2</strong></span> will be listed in the build).</li><li class="listitem">Add an instance of <code class="literal">MenuActions</code> script class to the <span class="strong"><strong>Main Camera</strong></span>.</li><li class="listitem">Select the <span class="strong"><strong>Button</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> panel, and add an <span class="strong"><strong>On Click</strong></span> event handler, which will pass the <span class="strong"><strong>MENU_ACTION_GotoPage()</strong></span> method the string <span class="strong"><strong>page1</strong></span> (the name of the scene we want to be loaded when this button is clicked).</li><li class="listitem">Save the scene.</li><li class="listitem">When you run the <span class="strong"><strong>page1 scene,</strong></span> you will be presented with your <span class="strong"><strong>Main Menu</strong></span> text and a button, which when clicked, makes the game load the <span class="strong"><strong>page2 scene</strong></span>. On scene <span class="strong"><strong>page2,</strong></span> you'll have a button to take you back to <span class="strong"><strong>page1</strong></span>.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec37"/>How it works...</h2></div></div></div><p>You have created two scenes, and added both of them to the game build. Each scene has a button, which when clicked (when the game is playing), makes Unity load the (named) other scene. This is<a class="indexterm" id="id60"/> made possible because when each button is clicked, it runs the <code class="literal">MENU_ACTION_GotoPage(…)</code>method from the scripted <code class="literal">MenuActions</code> component inside the <span class="strong"><strong>Main Camera</strong></span>. This method inputs a text string of the name of the scene to be loaded, so that the button in the <span class="strong"><strong>page1 scene</strong></span> gives the string name of <span class="strong"><strong>page2</strong></span> as the scene to be loaded, and vice versa.</p><p>When a UI <span class="strong"><strong>Button</strong></span> is added to the <span class="strong"><strong>Hierarchy </strong></span>panel, a child UI <span class="strong"><strong>Text</strong></span> object is also automatically created, and the content of the <span class="strong"><strong>Text</strong></span> property of this UI <span class="strong"><strong>Text</strong></span> child is the text that the user sees on the button.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec38"/>There's more...</h2></div></div></div><p>There are some details that you don't want to miss.</p><div class="section" title="Visual animation for the button mouse-over"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec06"/>Visual animation for the button mouse-over</h3></div></div></div><p>There are several <a class="indexterm" id="id61"/>ways in which we can visually inform the user that the button is interactive when they move their mouse cursor over it. The simplest is to add a color tint that will appear when the mouse is over the button—this is the default <span class="strong"><strong>Transition</strong></span>. With the <span class="strong"><strong>Button</strong></span> selected in the <span class="strong"><strong>Hierarchy</strong></span>, choose a tint color (for example, red), for the <span class="strong"><strong>Highlighted Color</strong></span> property of the <span class="strong"><strong>Button (Script)</strong></span> component, in the <span class="strong"><strong>Inspector</strong></span> tab, as shown here:</p><div class="mediaobject"><img alt="Visual animation for the button mouse-over" src="graphics/1362OT_01_33.jpg"/></div><p>Another form of visual <span class="strong"><strong>Transition</strong></span> to inform the user of an active button is <span class="strong"><strong>Sprite Swap</strong></span>. In this case, properties for different images for <span class="strong"><strong>Targeted</strong></span>/<span class="strong"><strong>Highlighted</strong></span>/<span class="strong"><strong>Pressed</strong></span>/<span class="strong"><strong>Disabled</strong></span> are available in the <span class="strong"><strong>Inspector </strong></span>tab. The default <span class="strong"><strong>Targeted Graphic</strong></span> is the built-in Unity <span class="strong"><strong>Button (image)</strong></span> – this is the grey rounded rectangle default when GameObjects buttons are created. Dragging in a very different-looking image for the <span class="strong"><strong>Highlighted Sprite</strong></span> is an effective alternative to <a class="indexterm" id="id62"/>set a color hint. We have provided a <code class="literal">rainbow.png</code> image with the project for this recipe that can be used for the <span class="strong"><strong>Button</strong></span> mouse over <span class="strong"><strong>Highlighted Sprite</strong></span>. The following screenshot shows the button with this rainbow background image:</p><div class="mediaobject"><img alt="Visual animation for the button mouse-over" src="graphics/1362OT_01_34.jpg"/></div></div><div class="section" title="Animating button properties on mouse over"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec07"/>Animating button properties on mouse over</h3></div></div></div><p>Finally, animations can be <a class="indexterm" id="id63"/>created for dynamically highlighting a button to the user, for example, a button might get larger when the mouse is over it, and then it might shrink back to its original size when the mouse pointer is moved away. These effects are achieved by choosing the <span class="strong"><strong>Animation</strong></span> option for the <span class="strong"><strong>Transition</strong></span> property, and by creating an animation controller with triggers for the <span class="strong"><strong>Normal</strong></span>, <span class="strong"><strong>Highlighted</strong></span>, <span class="strong"><strong>Pressed</strong></span> and <span class="strong"><strong>Disabled</strong></span> states. To animate a button for enlargement when the mouse is over it (the highlighted state), do the following:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new Unity 2D project.</li><li class="listitem">Create a button.</li><li class="listitem">In the <span class="strong"><strong>Inspector Button (Script)</strong></span> component, set the <span class="strong"><strong>Transition</strong></span> property to <span class="strong"><strong>Animation</strong></span>.</li><li class="listitem">Click the <span class="strong"><strong>Auto Generate Animation</strong></span> button (just below the <span class="strong"><strong>Disabled Trigger</strong></span> property) for the <span class="strong"><strong>Button (Script) </strong></span>component, as shown here:<div class="mediaobject"><img alt="Animating button properties on mouse over" src="graphics/1362OT_01_41.jpg"/></div></li><li class="listitem">Save the<a class="indexterm" id="id64"/> new controller by naming it <span class="strong"><strong>button-animation-controller</strong></span>.</li><li class="listitem">Ensure that the <span class="strong"><strong>Button</strong></span> GameObject is selected in the <span class="strong"><strong>Hierarchy</strong></span>. Then, in the <span class="strong"><strong>Animation</strong></span> panel, select the <span class="strong"><strong>Highlighted</strong></span> clip from the drop-down menu, as shown here:<div class="mediaobject"><img alt="Animating button properties on mouse over" src="graphics/1362OT_01_42.jpg"/></div></li><li class="listitem">In the <span class="strong"><strong>Animation</strong></span> panel, click on the red<a class="indexterm" id="id65"/> <span class="strong"><strong>record</strong></span> circle button, and then click on the <span class="strong"><strong>Add Property</strong></span> button, choosing to record changes to the <span class="strong"><strong>Rect Transform</strong></span> | <span class="strong"><strong>Scale</strong></span> property.</li><li class="listitem">Two key frames will have been created, delete the second one at <span class="strong"><strong>1:00</strong></span> (since we don't want a "bouncing" button), as shown in the following screenshot .<div class="mediaobject"><img alt="Animating button properties on mouse over" src="graphics/1362OT_01_43.jpg"/></div></li><li class="listitem">Select the first key frame at <span class="strong"><strong>0:00</strong></span> (the only one now!). Then, in the <span class="strong"><strong>Inspector</strong></span> view, set the <span class="emphasis"><em>X</em></span> and <span class="emphasis"><em>Y</em></span> scale properties of the <span class="strong"><strong>Rect Transform</strong></span> component to (<code class="literal">1.2</code>, <code class="literal">1.2</code>).</li><li class="listitem">Finally, click on the red <span class="strong"><strong>record</strong></span> circle button for the second time to end the recording of the animation changes.</li><li class="listitem">Save and run your<a class="indexterm" id="id66"/> scene, and you will see that the button smoothly animates to get larger when the mouse is over it, and then smoothly returns to its original size when the mouse is moved away.</li></ol></div><p>The following web pages offer video and web-based tutorials on UI animations:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The Unity button transitions tutorial is available at:<p>
<a class="ulink" href="http://unity3d.com/learn/tutorials/modules/beginner/ui/ui-transitions">http://unity3d.com/learn/tutorials/modules/beginner/ui/ui-transitions</a>
</p></li><li class="listitem" style="list-style-type: disc">Ray Wenderlich's <a class="indexterm" id="id67"/>tutorial (part 2), including the button animations, is available at:<p>
<a class="ulink" href="http://www.raywenderlich.com/79031/unity-new-gui-tutorial-part-2">http://www.raywenderlich.com/79031/unity-new-gui-tutorial-part-2</a>
</p></li></ul></div></div></div></div>
<div class="section" title="Organizing images inside panels and changing panel depths via buttons"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec17"/>Organizing images inside panels and changing panel depths via buttons</h1></div></div></div><p>UI <span class="strong"><strong>Panels</strong></span> are <a class="indexterm" id="id68"/>provided by Unity to allow UI controls to be grouped and moved together, and also to visually group elements with an <span class="strong"><strong>Image</strong></span> background (if desired). The <span class="strong"><strong>sibling depth</strong></span> is what <a class="indexterm" id="id69"/>determines which UI <a class="indexterm" id="id70"/>elements will appear above or below others. We can see the sibling depth explicitly in the <span class="strong"><strong>Hierarchy</strong></span>, since the top-to-bottom sequence of UI GameObjects in the <span class="strong"><strong>Hierarchy</strong></span> sets the sibling depth. So, the first item has a depth of 1, the second has a depth of 2, and so on. The UI GameObjects with larger sibling depths (further down the <span class="strong"><strong>Hierarchy</strong></span>) appear above the UI GameObjects with lower sibling depths.</p><p>In this recipe, we'll create three UI panels, each showing a different playing card image. We'll also add four triangle arrangement buttons to change the display order (move to bottom, move to<a class="indexterm" id="id71"/> top, move up one, and move down one).</p><div class="mediaobject"><img alt="Organizing images inside panels and changing panel depths via buttons" src="graphics/1362OT_01_28.jpg"/></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec39"/>Getting ready</h2></div></div></div><p>For this recipe, we<a class="indexterm" id="id72"/> have prepared the images that you need in a folder named <code class="literal">Images</code> in the <code class="literal">1362_01_08</code> folder.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec40"/>How to do it...</h2></div></div></div><p>To create the UI <span class="strong"><strong>Panels</strong></span> whose layering can be changed by the user-clicking buttons, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new Unity 2D project.</li><li class="listitem">Create a new UI <span class="strong"><strong>Panel</strong></span> named <code class="literal">Panel-jack-diamonds</code>. Position it in the middle-center part of the screen, and size it 200 pixels wide by 300 pixels high. Uncheck the <span class="strong"><strong>Image (Script)</strong></span> component for this panel (since we don't want to see the default semi-transparent rectangular grey background image of a panel).</li><li class="listitem">Create a new UI <span class="strong"><strong>Image</strong></span>, and child this image to <span class="strong"><strong>Panel-jack-diamonds</strong></span>.</li><li class="listitem">Position the <span class="strong"><strong>Panel-jack-diamonds </strong></span>image at center-middle, and size it to 200 x 300. Drag the <span class="strong"><strong>Jack-of-diamonds</strong></span> playing card image into the <span class="strong"><strong>Source Image</strong></span> property, for the <span class="strong"><strong>Image (Script)</strong></span> component in the <span class="strong"><strong>Inspector</strong></span> tab.</li><li class="listitem">Create a UI <span class="strong"><strong>Button</strong></span> named <span class="strong"><strong>Button-move-to-front</strong></span>. Child this button to <span class="strong"><strong>Panel-jack-diamonds</strong></span>. Delete the <span class="strong"><strong>Text</strong></span> child GameObject of this button (since we'll use an icon to indicate what this button does).</li><li class="listitem">Size the <span class="strong"><strong>Button-move-to-front</strong></span> button to 16 x 16, and position it top-center of the player card image, so that it can be seen at the top of the playing card. Drag the <code class="literal">icon_move_to_front</code> arrangement triangle icon image into the <span class="strong"><strong>Source Image</strong></span> property, for the <span class="strong"><strong>Image (Script)</strong></span> component, in the <span class="strong"><strong>Inspector </strong></span>view.</li><li class="listitem">Ensure that the <span class="strong"><strong>Button-move-to-front</strong></span> button is selected in the <span class="strong"><strong>Hierarchy</strong></span>. Then, click <a class="indexterm" id="id73"/>on the plus sign (<span class="strong"><strong>+</strong></span>) at the bottom of the <span class="strong"><strong>Button (Script)</strong></span> component, in the <span class="strong"><strong>Inspector</strong></span> view to create a new <span class="strong"><strong>OnClick</strong></span> event handler for this button.</li><li class="listitem">Drag <span class="strong"><strong>Panel-jack-diamonds</strong></span> from the <span class="strong"><strong>Hierarchy</strong></span> over the <span class="strong"><strong>Object</strong></span> slot (immediately below the menu saying <span class="strong"><strong>Runtime Only</strong></span>).</li><li class="listitem">Now, select <a class="indexterm" id="id74"/>the <span class="strong"><strong>RectTransform.SetAsLastSibling</strong></span> method from the drop-down function list (initially showing <span class="strong"><strong>No Function</strong></span>).<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note10"/>Note</h3><p>This means that when the <span class="strong"><strong>Button</strong></span> receives an <span class="strong"><strong>OnClick</strong></span> event, the <span class="strong"><strong>RectTransform</strong></span> of the <span class="strong"><strong>Panel</strong></span> will be sent the <span class="strong"><strong>SetAsLastSibling</strong></span> message – this will move the <span class="strong"><strong>Panel</strong></span> to the bottom of the GameObjects in the <span class="strong"><strong>Canvas</strong></span>, and therefore will move this <span class="strong"><strong>Panel</strong></span> in front of all other GameObjects in the <span class="strong"><strong>Canvas</strong></span>.</p></div></div><div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_35.jpg"/></div></li><li class="listitem">Repeat <span class="emphasis"><em>step 2</em></span>; create a second <span class="strong"><strong>Panel</strong></span> with a move-to-front button. Name this<a class="indexterm" id="id75"/> second Panel <span class="strong"><strong>Panel-2-diamonds</strong></span>, then move and position it slightly to the right of <span class="strong"><strong>Panel-jack-diamonds</strong></span>, allowing both the move-to-front buttons to be seen.</li><li class="listitem">Save your <a class="indexterm" id="id76"/>scene and run the game. You will be able to click the move-to-front button on either of the cards to move that card's panel to the front. If you run the game with the Game panel not maximized, you'll actually see the panels changing order in the list of the children of the <span class="strong"><strong>Canvas</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span>.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec41"/>How it works...</h2></div></div></div><p>You've created two UI <span class="strong"><strong>Panels</strong></span>, each panel containing an image of a playing card and a button whose action will make its parent panel move to the front. The button's action illustrates how the <span class="strong"><strong>OnClick</strong></span> function does not have to be the calling of a public method of a scripted component of an object, but it can be sending a message to one of the components of the targeted GameObject—in this instance we send the <span class="strong"><strong>SetAsLastSibling</strong></span> message to the <span class="strong"><strong>RectTransform</strong></span> of the <span class="strong"><strong>Panel</strong></span> in which the <span class="strong"><strong>Button</strong></span> is located.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec42"/>There's more...</h2></div></div></div><p>There are some details that you don't want to miss.</p><div class="section" title="Moving up or down by just one position, using scripted methods"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec08"/>Moving up or down by just one position, using scripted methods</h3></div></div></div><p>While the Rect Transform offers a useful <span class="strong"><strong>SetAsLastSibling</strong></span> (move to front) and <span class="strong"><strong>SetAsFirstSibling</strong></span> (move to back), and even <span class="strong"><strong>SetSiblingIndex</strong></span> (if we knew exactly what position in the sequence to type in), there isn't a built-in way to make an element move up or down, just a single position in the<a class="indexterm" id="id77"/> sequence of GameObjects in the <span class="strong"><strong>Hierarchy</strong></span> panel. However, we can write two straightforward methods in C# to do this, and we can add buttons to call these methods, providing full control<a class="indexterm" id="id78"/> of the top-to-bottom arrangement of the UI controls on the screen. To implement four buttons (move-to-front/move-to-back/up one/down one), do the following:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a C# script class called <code class="literal">ArrangeActions</code>, containing the following code, and add an instance as a scripted component to each of your <span class="strong"><strong>Panels</strong></span>:<div class="informalexample"><pre class="programlisting">using UnityEngine;
using UnityEngine.UI;
using UnityEngine.EventSystems;
using System.Collections;

public class ArrangeActions : MonoBehaviour {
  private RectTransform panelRectTransform;

  void Start(){
    panelRectTransform = GetComponent&lt;RectTransform&gt;();
  }

  public void MoveDownOne(){
    print ("(before change) " + GameObject.name +  " sibling index = " + panelRectTransform.GetSiblingIndex());

    int currentSiblingIndex = panelRectTransform.GetSiblingIndex();
    panelRectTransform.SetSiblingIndex( currentSiblingIndex - 1 );

    print ("(after change) " + GameObject.name +  " sibling index = " + panelRectTransform.GetSiblingIndex());
  }

  public void MoveUpOne(){
    print ("(before change) " + GameObject.name +  " sibling index = " + panelRectTransform.GetSiblingIndex());

    int currentSiblingIndex = panelRectTransform.GetSiblingIndex();
    panelRectTransform.SetSiblingIndex( currentSiblingIndex + 1 );

    print ("(after change) " + GameObject.name +  " sibling index = " + panelRectTransform.GetSiblingIndex());
  }
}</pre></div></li><li class="listitem">Add a second button to each card panel, this time, using the arrangement triangle icon image called <code class="literal">icon_move_to_front</code>, and set the <span class="strong"><strong>OnClick</strong></span> event function for these buttons to <span class="strong"><strong>SetAsFirstSibling</strong></span>.</li><li class="listitem">Add two further buttons to each card panel with the up and down triangle icon images: <code class="literal">icon_down_one</code> and <code class="literal">icon_up_one</code>. Set the <span class="strong"><strong>OnClick</strong></span> event handler<a class="indexterm" id="id79"/> function for the down-one buttons to call the <code class="literal">MoveDownOne()</code> method, and set the functions for the up-one buttons to call the <code class="literal">MoveUpOne()</code> method.</li><li class="listitem">Copy one of the <a class="indexterm" id="id80"/>panels to create a third card (this time showing the Ace of diamonds). Arrange the three cards so that you can see all four buttons for at least two of the cards, even when those cards are at the bottom (see the screenshot at the beginning of this recipe).</li><li class="listitem">Save the scene and run your game. You will now have full control over the layering of the three card panels.</li></ol></div></div></div></div>
<div class="section" title="Displaying the value of an interactive UI Slider"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec18"/>Displaying the value of an interactive UI Slider</h1></div></div></div><p>This recipe illustrates how<a class="indexterm" id="id81"/> to create an interactive UI <span class="strong"><strong>Slider</strong></span>, and execute a C# method each time the user changes the <span class="strong"><strong>Slider value</strong></span>.</p><div class="mediaobject"><img alt="Displaying the value of an interactive UI Slider" src="graphics/1362OT_01_08.jpg"/></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec43"/>How to do it...</h2></div></div></div><p>To create a UI Slider and display its value on the screen, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new 2D project.</li><li class="listitem">Add a UI Text GameObject to the scene with a Font size of <code class="literal">30</code> and placeholder text such as <code class="literal">slider value here</code> (this text will be replaced with the slider value when the scene starts).</li><li class="listitem">In the <span class="strong"><strong>Hierarchy</strong></span> panel, add a <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Slider</strong></span> game object to the scene—choose the menu: <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Slider</strong></span>.</li><li class="listitem">In the <span class="strong"><strong>Inspector</strong></span> tab, modify settings for the <span class="strong"><strong>Rect Transform</strong></span> to position the slider on the top-middle part of the screen and the text just below it.</li><li class="listitem">In the <span class="strong"><strong>Inspector</strong></span> tab, set the <span class="strong"><strong>Min Value</strong></span> of the slider to <code class="literal">0</code>, the <span class="strong"><strong>Max Value</strong></span> to <code class="literal">20</code>, and check the <span class="strong"><strong>Whole Numbers</strong></span> checkbox, as shown here:<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_09.jpg"/></div></li><li class="listitem">Create a<a class="indexterm" id="id82"/> C# script class called <code class="literal">SliderValueToText</code>, containing the following code, and add an instance as a scripted component to the GameObject called <span class="strong"><strong>Text</strong></span>:<div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class SliderValueToText : MonoBehaviour {
  public Slider sliderUI;
  private Text textSliderValue;

  void Start (){
    textSliderValue = GetComponent&lt;Text&gt;();
    ShowSliderValue();
  }

  public void ShowSliderValue () {
    string sliderMessage = "Slider value = " + sliderUI.value;
    textSliderValue.text = sliderMessage;
  }
}</pre></div></li><li class="listitem">Ensure that the <span class="strong"><strong>Text</strong></span> GameObject is selected in the <span class="strong"><strong>Hierarchy</strong></span>. Then, in the <span class="strong"><strong>Inspector </strong></span>view, drag the <span class="strong"><strong>Slider</strong></span> GameObject into the public <span class="strong"><strong>Slider UI</strong></span> variable slot for the <code class="literal">Slider Value To Text (Script)</code> scripted component, as shown here:<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_12.jpg"/></div></li><li class="listitem">Ensure that the<a class="indexterm" id="id83"/> <span class="strong"><strong>Slider</strong></span> GameObject is selected in the <span class="strong"><strong>Hierarchy</strong></span>. Then, in the <span class="strong"><strong>Inspector </strong></span>view, drag the <span class="strong"><strong>Text</strong></span> GameObject into the public <span class="strong"><strong>None (Object)</strong></span> slot for the <span class="strong"><strong>Slider (Script)</strong></span> scripted component, in the section for <span class="strong"><strong>On Value Changed (Single)</strong></span>.<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note11"/>Note</h3><p>You have now told Unity to which object a message should be sent each time the slider is changed.</p></div></div><div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_11.jpg"/></div></li><li class="listitem">From the drop-down menu, select <span class="strong"><strong>SliderValueToText</strong></span> and the <code class="literal">ShowSliderValue()</code> method, as shown in the following screenshot. This means that each time the slider is updated, the <code class="literal">ShowSliderValue()</code>method, in the scripted<a class="indexterm" id="id84"/> object, in GameObject <span class="strong"><strong>Text</strong></span> will be executed.<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_10.jpg"/></div></li><li class="listitem">When you run the scene, you will now see a slider. Below it, you will see a text message in the <code class="literal">Slider value = &lt;n&gt;</code> form.</li><li class="listitem">Each time the slider is moved, the text value shown will be (almost) instantly updated. The values should range from <code class="literal">0</code> (the leftmost of the slider) to <code class="literal">20</code> (the rightmost of the slider).<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note12"/>Note</h3><p>The update of the text value on the screen probably won't be instantaneous, as in happening in the same frame as the slider value is moved, since there is some computation involved in the slider deciding that an <span class="strong"><strong>On Value Changed</strong></span> event message needs to be triggered, and then looking up any methods of objects that are registered as event handlers for such an event. Then, the statements in the object's method need to be executed in sequence. However, this should all happen within a few milliseconds, and should be sufficiently fast enough to offer the user a satisifyingly responsive UI for interface actions such as changing and moving this slider.</p></div></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec44"/>How it works...</h2></div></div></div><p>You have added to the <span class="strong"><strong>Text</strong></span> GameObject a scripted instance of the <code class="literal">SliderValueToText</code> class.</p><p>The <code class="literal">Start()</code> method, which is executed when the scene first runs, sets the variable to be a reference to the <span class="strong"><strong>Text</strong></span> component inside the <span class="strong"><strong>Slider</strong></span> item. Next, the <code class="literal">ShowSliderValue()</code> method is called, so that the display is correct when the scene begins (the initial slider value is displayed).</p><p>This contains the <code class="literal">ShowSliderValue()</code> method, which gets the value of the slider. It updates the text displayed to be a message in the form: <code class="literal">Slider value = &lt;n&gt;</code>.</p><p>You created a <span class="strong"><strong>UI Slider</strong></span> GameObject, and set it to be whole numbers in the 0-20 range.</p><p>You added to the <span class="strong"><strong>UI Slider</strong></span> GameObject's list of <span class="strong"><strong>On Value Changed</strong></span> event listeners the <code class="literal">ShowSliderValue()</code> method of the <code class="literal">SliderValueToText</code> scripted component. So, each time the slider <a class="indexterm" id="id85"/>value changes, it sends a message to call the <code class="literal">ShowSliderValue()</code> method, and so the new value is updated on the screen.</p></div></div>
<div class="section" title="Displaying a countdown timer graphically with a UI Slider"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec19"/>Displaying a countdown timer graphically with a UI Slider</h1></div></div></div><p>There are many <a class="indexterm" id="id86"/>cases where we wish to inform the player of the proportion of time remaining, or at the completion of some value at a point in time, for example, a loading progress bar, the time or health remaining compared to the<a class="indexterm" id="id87"/> starting maximum, how much the player has filled up their water bottle from the fountain of youth, and so on. In this recipe, we'll illustrate how to remove the interactive 'handle' of a <span class="strong"><strong>UI Slider</strong></span>, and change the size and color of its components to provide us with an easy-to-use, general purpose progress/proportion bar. In this recipe, we'll use our modified slider to graphically present to the user how much time remains for a countdown timer.</p><div class="mediaobject"><img alt="Displaying a countdown timer graphically with a UI Slider" src="graphics/1362OT_01_18.jpg"/></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec45"/>Getting ready</h2></div></div></div><p>This recipe adapts the previous one. So, make a copy of the project for the previous recipe, and work on this copy to follow this recipe.</p><p>For this recipe, we have prepared the script and images that you need in the folders named <code class="literal">Scripts</code> and <code class="literal">Images</code> in the <code class="literal">1362_01_10</code> folder.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec46"/>How to do it...</h2></div></div></div><p>To create a <a class="indexterm" id="id88"/>digital countdown timer with a graphical display, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Delete the <a class="indexterm" id="id89"/><span class="strong"><strong>Text</strong></span> GameObject.</li><li class="listitem">Import the <code class="literal">CountdownTimer</code> script and the <code class="literal">red_square</code> and <code class="literal">green_square</code> images to this project.</li><li class="listitem">Ensure that the <span class="strong"><strong>Slider</strong></span> GameObject is selected in the <span class="strong"><strong>Hierarchy</strong></span> tab.</li><li class="listitem">Deactivate the <span class="strong"><strong>Handle Slide Area</strong></span> child GameObject (by unchecking it)</li><li class="listitem">You'll see the "drag circle" disappear in the <span class="strong"><strong>Game</strong></span> panel (the user will not be dragging the slider, since we want this slider to be display-only), as shown in the following screenshot:<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_17.jpg"/></div></li><li class="listitem">Select the <span class="strong"><strong>Background</strong></span> child:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Drag the <code class="literal">red_square</code> image into the <span class="strong"><strong>Source Image</strong></span> property of the <span class="strong"><strong>Image (Script)</strong></span> component in the <span class="strong"><strong>Inspector</strong></span> view</li></ul></div></li><li class="listitem">Select the <span class="strong"><strong>Fill</strong></span> child:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Drag the <code class="literal">green_square</code> image into the <span class="strong"><strong>Source Image</strong></span> property of the <span class="strong"><strong>Image (Script)</strong></span> component in the <span class="strong"><strong>Inspector</strong></span> tab</li></ul></div></li><li class="listitem">Select the<a class="indexterm" id="id90"/> <span class="strong"><strong>Fill Area</strong></span> child:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">In the <span class="strong"><strong>Rect Transform</strong></span> component, use the <span class="strong"><strong>Anchors</strong></span> preset position of <span class="strong"><strong>left-middle</strong></span></li><li class="listitem" style="list-style-type: disc">Set <span class="strong"><strong>Width</strong></span> to 155 and <span class="strong"><strong>Height</strong></span> to 12, as shown here:</li></ul></div><div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_19.jpg"/></div></li><li class="listitem">Ensure<a class="indexterm" id="id91"/> that the <span class="strong"><strong>Slider</strong></span> GameObject is selected in the <span class="strong"><strong>Hierarchy</strong></span>. Then, attach an instance of C# script class called <code class="literal">CountdownTimer</code> as a component of this GameObject.</li><li class="listitem">Create a C# script class called <code class="literal">SliderTimerDisplay</code> containing the following code, and add an instance as a scripted component to the <span class="strong"><strong>Slider</strong></span> GameObject:<div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class SliderTimerDisplay : MonoBehaviour {
  private CountdownTimer countdownTimer;
  private Slider sliderUI;
  private int startSeconds = 30;

  void Start (){
    SetupSlider();
    SetupTimer();
  }

  void Update () {
    sliderUI.value = countdownTimer.GetProportionTimeRemaining();
    print (countdownTimer.GetProportionTimeRemaining());
  }

  private void SetupSlider (){
    sliderUI = GetComponent&lt;Slider&gt;();
    sliderUI.minValue = 0;
    sliderUI.maxValue = 1;
    sliderUI.wholeNumbers = false;
  }

  private void SetupTimer (){
    countdownTimer = GetComponent&lt;CountdownTimer&gt;();
    countdownTimer.ResetTimer(startSeconds);
  }
}</pre></div></li><li class="listitem">Run your game and you will see the slider move with each second, revealing more and more of the red background to indicate the time remaining.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec47"/>How it works...</h2></div></div></div><p>You hid the<a class="indexterm" id="id92"/> <span class="strong"><strong>Handle Slide Area</strong></span> child so<a class="indexterm" id="id93"/> that <span class="strong"><strong>Slider</strong></span> is for display only, and cannot be interacted with by the user. The <span class="strong"><strong>Background</strong></span> color of the <span class="strong"><strong>Slider</strong></span> was set to red, so that, as the counter goes down, more and more red is revealed—warning the user that the time is running out. The <span class="strong"><strong>Fill</strong></span> of the <span class="strong"><strong>Slider</strong></span> was set to green, so that the proportion remaining is displayed in green (the more green it becomes, the larger the value of the slider/timer).</p><p>An instance of the provided <code class="literal">CountdownTimer</code> script class was added as a component to the Slider. The <code class="literal">ResetTimer(…)</code> method records the number of seconds provided and the time the method was called. The <code class="literal">GetProportionRemaining()</code> method returns a value from 0.0-1.0, representing the proportion of the seconds remaining (1.0 being all seconds, 0.5 half the seconds, and 0.0 meaning that no seconds are left).</p><p>You have added to the <span class="strong"><strong>Slider</strong></span> GameObject an instance of the <code class="literal">SliderTimerDisplay</code> scripted class. The <code class="literal">Start()</code> method calls the <code class="literal">SetupSlider()</code> and <code class="literal">SetupTimer()</code> methods.</p><p>The <code class="literal">SetupSlider()</code> method sets the <code class="literal">sliderUI</code> variable to be a reference to the <span class="strong"><strong>Slider</strong></span> component, and sets up this slider mapped to float (decimal) values between <code class="literal">0.0</code> and <code class="literal">1.0</code>.</p><p>The <code class="literal">SetupTimer()</code> method sets<a class="indexterm" id="id94"/> the <code class="literal">countdownTimer</code> variable to be a reference for the <span class="strong"><strong>CountdownTimer</strong></span> component, and starts this timer scripted component to count down from 30 seconds.</p><p>In each frame, the <a class="indexterm" id="id95"/>
<code class="literal">Update()</code>method sets the slider value to the float returned by calling the <code class="literal">GetProportionRemaining()</code>method from the running timer.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note13"/>Note</h3><p>
<span class="strong"><strong>Try to work with floats between 0.0-1.0 whenever possible.</strong></span>
</p><p>Integers could have been used, setting the Slider min to 0 and max to 30 (for 30 seconds). However, changing the total number of seconds would then also require the Slider settings to be changed. In most cases working with a float proportion between 0.0 and 1.0 is the more general-purpose and reusable approach to adopt.</p></div></div></div></div>
<div class="section" title="Displaying a radar to indicate the relative locations of objects"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec20"/>Displaying a radar to indicate the relative locations of objects</h1></div></div></div><p>A radar displays the<a class="indexterm" id="id96"/> locations of other objects relative to the player, usually based on a circular display, where the center represents the player, and each graphical 'blip' indicates how far away and what relative direction objects are<a class="indexterm" id="id97"/> to the player. Sophisticated radar displays will display different categories of objects with different colored or shaped 'blip' icons.</p><p>In the screenshot, we can see 2 red square 'blips', indicating the relative position of the 2 red cube GameObjects tagged <code class="literal">Cube</code> near the player, and a yellow circle 'blip' indicating the relative position of the yellow sphere GameObject tagged <code class="literal">Sphere</code>. The green circle radar background image gives the impression of an aircraft control tower radar or something similar.</p><div class="mediaobject"><img alt="Displaying a radar to indicate the relative locations of objects" src="graphics/1362OT_01_21.jpg"/></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec48"/>Getting ready</h2></div></div></div><p>For this recipe, we<a class="indexterm" id="id98"/> have prepared the images that you need in a folder named <code class="literal">Images</code> in <code class="literal">1362_01_11</code>.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec49"/>How to do it...</h2></div></div></div><p>To create a radar to<a class="indexterm" id="id99"/> show the relative positions of the objects, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new 3D project by importing the following standard assets:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Environment</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Characters</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Cameras</strong></span></li></ul></div></li><li class="listitem">Create a terrain by navigating to the <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>3D Object</strong></span> | <span class="strong"><strong>Terrain</strong></span> menu.</li><li class="listitem">Size the terrain 20 x 20, positioned at (-10, 0, -10)—so that its center is at (0, 0, 0), as shown in the following figure:<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_47.jpg"/></div></li><li class="listitem">Texture<a class="indexterm" id="id100"/> paint your<a class="indexterm" id="id101"/> terrain with the <span class="strong"><strong>SandAlbedo</strong></span> option, as shown here:<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_48.jpg"/></div></li><li class="listitem">From the <span class="strong"><strong>Standard Assets</strong></span> folder in the <span class="strong"><strong>Project</strong></span> panel, drag the prefab <span class="strong"><strong>ThirdPersonController</strong></span> into the scene and position it at (0, 1, 0).</li><li class="listitem">Tag this <span class="strong"><strong>ThirdPersonController</strong></span> GameObject called <span class="strong"><strong>Player</strong></span>.</li><li class="listitem">Remove the <span class="strong"><strong>Main Camera</strong></span> GameObject.</li><li class="listitem">From the <span class="strong"><strong>Standard Assets</strong></span> folder in the <span class="strong"><strong>Project</strong></span> panel, drag the prefab <span class="strong"><strong>Multi-PurposeCameraRig</strong></span> into the scene.</li><li class="listitem">With <span class="strong"><strong>Multi-PurposeCameraRig</strong></span> selected in the <span class="strong"><strong>Hierarchy</strong></span>, drag the <span class="strong"><strong>ThirdPersonController</strong></span> GameObject into the <span class="strong"><strong>Target</strong></span> property of the <span class="strong"><strong>Auto Cam (Script)</strong></span> public<a class="indexterm" id="id102"/> variable in the <span class="strong"><strong>Inspector</strong></span> tab, as shown in the following screenshot: <div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_22.jpg"/></div></li><li class="listitem">Import the provided folder known as <code class="literal">Images</code>.</li><li class="listitem">In the <span class="strong"><strong>Hierarchy</strong></span> panel, add a <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>RawImage</strong></span> GameObject to the scene named <span class="strong"><strong>RawImage-radar</strong></span>.</li><li class="listitem">Ensure that<a class="indexterm" id="id103"/> the <span class="strong"><strong>RawImage-radar</strong></span> GameObject is selected in the <span class="strong"><strong>Hierarchy </strong></span>panel. From your <span class="strong"><strong>Project</strong></span> <code class="literal">Images</code> folder, drag the <code class="literal">radarBackground</code> image into the <span class="strong"><strong>Raw Image (Script)</strong></span> public property <span class="strong"><strong>Texture</strong></span>.</li><li class="listitem">Now, in <span class="strong"><strong>Rect Transform</strong></span> position <span class="strong"><strong>RawImage-radar</strong></span> at the top-left part using the <span class="strong"><strong>Anchor Presets</strong></span> item. Then set the width and height to 200 pixels.</li><li class="listitem">Create another new UI <span class="strong"><strong>RawImage</strong></span> named <span class="strong"><strong>RawImage-blip</strong></span>. Assign the <code class="literal">yellowCircleBlackBorder</code> texture. Tag the <span class="strong"><strong>Blip</strong></span> GameObject.</li><li class="listitem">In the <span class="strong"><strong>Project</strong></span> panel, create a new empty prefab named <span class="strong"><strong>blip-sphere</strong></span>, and drag the <span class="strong"><strong>RawImage-blip</strong></span> GameObject into this prefab to store all its properties.</li><li class="listitem">Now, change the texture of <span class="strong"><strong>RawImage-blip</strong></span> to <code class="literal">redSquareBlackBorder</code>.</li><li class="listitem">In the Project panel, create a new empty prefab named <span class="strong"><strong>blip-cube</strong></span>, and drag the <span class="strong"><strong>RawImage-blip</strong></span> GameObject into this prefab to store all its properties. </li><li class="listitem">Delete the <span class="strong"><strong>RawImage-blip</strong></span> GameObject from the <span class="strong"><strong>Hierarchy</strong></span> panel.</li><li class="listitem">Create a C# script class called <code class="literal">Radar,</code> containing the following code, and add an instance as a<a class="indexterm" id="id104"/> scripted <a class="indexterm" id="id105"/>component to the <span class="strong"><strong>RawImage-radar</strong></span> GameObject:<div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class Radar : MonoBehaviour{
  public float insideRadarDistance = 20;
  public float blipSizePercentage = 5;

  public GameObject rawImageBlipCube;
  public GameObject rawImageBlipSphere;

  private RawImage rawImageRadarBackground;
  private Transform playerTransform;
  private float radarWidth;
  private float radarHeight;
  private float blipHeight;
  private float blipWidth;

  void Start (){
    playerTransform = GameObject.FindGameObjectWithTag("Player").transform;
    rawImageRadarBackground = GetComponent&lt;RawImage&gt;();

    radarWidth = rawImageRadarBackground.rectTransform.rect.width;
    radarHeight = rawImageRadarBackground.rectTransform.rect.height;

    blipHeight = radarHeight * blipSizePercentage/100;
    blipWidth = radarWidth * blipSizePercentage/100;
  }

  void Update (){
    RemoveAllBlips();
    FindAndDisplayBlipsForTag("Cube", rawImageBlipCube);
    FindAndDisplayBlipsForTag("Sphere", rawImageBlipSphere);
  }

  private void FindAndDisplayBlipsForTag(string tag, GameObject prefabBlip){
    Vector3 playerPos = playerTransform.position;
    GameObject[] targets = GameObject.FindGameObjectsWithTag(tag);

    foreach (GameObject target in targets) {
      Vector3 targetPos = target.transform.position;
      float distanceToTarget = Vector3.Distance(targetPos, playerPos);
      if( (distanceToTarget &lt;= insideRadarDistance) ){
        Vector3 normalisedTargetPosiiton = NormalisedPosition(playerPos, targetPos);
        Vector2 blipPosition = CalculateBlipPosition(normalisedTargetPosiiton);
        DrawBlip(blipPosition, prefabBlip);
      }
    }
  }

  private void RemoveAllBlips(){
    GameObject[] blips = GameObject.FindGameObjectsWithTag("Blip");
    foreach (GameObject blip in blips)
      Destroy(blip);
  }

  private Vector3 NormalisedPosition(Vector3 playerPos, Vector3 targetPos){
  float normalisedyTargetX = (targetPos.x - playerPos.x)/insideRadarDistance;
    float normalisedyTargetZ = (targetPos.z - playerPos.z)/insideRadarDistance;
    return new Vector3(normalisedyTargetX, 0, normalisedyTargetZ);
  }

  private Vector2 CalculateBlipPosition(Vector3 targetPos){
    // find angle from player to target
    float angleToTarget = Mathf.Atan2(targetPos.x, targetPos.z) * Mathf.Rad2Deg;

    // direction player facing
    float anglePlayer = playerTransform.eulerAngles.y;

    // subtract player angle, to get relative angle to object
    // subtract 90
    // (so 0 degrees (same direction as player) is UP)
    float angleRadarDegrees =  angleToTarget - anglePlayer - 90;

    // calculate (x,y) position given angle and distance
    float normalisedDistanceToTarget = targetPos.magnitude;
    float angleRadians = angleRadarDegrees * Mathf.Deg2Rad;
    float blipX = normalisedDistanceToTarget * Mathf.Cos(angleRadians);
    float blipY = normalisedDistanceToTarget * Mathf.Sin(angleRadians);

    // scale blip position according to radar size
    blipX *= radarWidth/2;
    blipY *= radarHeight/2;

    // offset blip position relative to radar center
    blipX += radarWidth/2;
    blipY += radarHeight/2;

    return new Vector2(blipX, blipY);
  }

  private void DrawBlip(Vector2 pos, GameObject blipPrefab){
    GameObject blipGO = (GameObject)Instantiate(blipPrefab);
    blipGO.transform.SetParent(transform.parent);
    RectTransform rt = blipGO.GetComponent&lt;RectTransform&gt;();
    rt.SetInsetAndSizeFromParentEdge(RectTransform.Edge.Left, pos.x, blipWidth);
    rt.SetInsetAndSizeFromParentEdge(RectTransform.Edge.Top, pos.y, blipHeight);
  }
}</pre></div></li><li class="listitem">Create two cubes—tagged <span class="strong"><strong>Cube</strong></span>, textured with a red image called <span class="strong"><strong>icon32_square_red</strong></span>. Position<a class="indexterm" id="id106"/> each away<a class="indexterm" id="id107"/> from the player's character. </li><li class="listitem">Create a sphere—tagged <span class="strong"><strong>Sphere</strong></span>, textured with a red image called <span class="strong"><strong>icon32_square_yellow</strong></span>. Position this away from the cubes and the player's character.</li><li class="listitem">Run your game. You will see two red squares and one yellow circle on the radar, showing the relative positions of the red cubes and yellow sphere. If you move too far away, then the blips will disappear.<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note14"/>Note</h3><p>This radar script scans 360 degrees all around the player, and only considers straight line distances in the X-Z plane. So, the distances in this radar are not affected by any height difference between the player and target GameObjects. The script can be adapted to ignore targets whose height is more than some threshold different to the player's height. Also, as presented, this recipe radar <span class="emphasis"><em>sees</em></span> through everything, even if there are obstacles between the player and the target. The recipe can be extended to not show <a class="indexterm" id="id108"/>obscured targets through the user of the ray-casting techniques. See the Unity scripting reference for more details about ray-casting at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/Physics.Raycast.html">http://docs.unity3d.com/ScriptReference/Physics.Raycast.html</a>.</p></div></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec50"/>How it works...</h2></div></div></div><p>A radar background<a class="indexterm" id="id109"/> is displayed on the screen. The center of this circular image represents the position of the player's character. You have created two prefabs; one for red square images to represent each red cube found within the radar distance, and one for yellow circles to represent yellow sphere GameObjects.</p><p>The <code class="literal">Radar</code> C# script class has been added to the radar UI Image GameObject. This class defines four public variables:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">insideRadarDistance</code>: This value defines the maximum distance that an object may be from the player to still be included on the radar (objects further than this distance will not be displayed on the radar).</li><li class="listitem" style="list-style-type: disc"><code class="literal">blipSizePercentage</code>: This public variable allows the developer to decide how large each 'blip' will be, as a proportion of the radar's image.</li><li class="listitem" style="list-style-type: disc"><code class="literal">rawImageBlipCube</code> and <code class="literal">rawImageBlipSphere</code>: These are references to the prefab UI <span class="strong"><strong>RawImages</strong></span> that are to be used to visually indicate the relative distance and position of cubes and spheres on the radar.</li></ul></div><p>Since there is a lot happening in the code for this recipe, each method will be described in its own section.</p><div class="section" title="The Start() method"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec09"/>The Start() method</h3></div></div></div><p>The <code class="literal">Start()</code> method caches a reference to the <span class="strong"><strong>Transform</strong></span> component of the player's character (tagged as <span class="strong"><strong>Player</strong></span>). This allows the scripted object to know about the position of the Player's character in <a class="indexterm" id="id110"/>each frame. Next, the width and height of the radar image are cached—so, the relative positions for 'blips' can be <a class="indexterm" id="id111"/>calculated, based on the size of this background radar image. Finally, the size of each blip (width and height) is calculated, using the <code class="literal">blipSizePercentage</code> public variable.</p></div><div class="section" title="The Update() method"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec10"/>The Update() method</h3></div></div></div><p>The <code class="literal">Update()</code> method calls<a class="indexterm" id="id112"/> the <code class="literal">RemoveAllBlips()</code> method, which removes any old <span class="strong"><strong>RawImage</strong></span> UI GameObjects of cubes and spheres that<a class="indexterm" id="id113"/> might currently be displayed.</p><p>Next, the <code class="literal">FindAndDisplayBlipsForTag(…)</code>method is called twice. First, for the objects tagged <span class="strong"><strong>Cube</strong></span>, to be represented on the radar with the <code class="literal">rawImageBlipCube</code> prefab and then again for objects tagged <span class="strong"><strong>Sphere</strong></span>, to be represented on the radar with the <code class="literal">rawImageBlipSphere</code> prefab. As you might expect, most of the hard work for the radar is to be performed by the <code class="literal">FindAndDisplayBlipsForTag(…)</code> method.</p></div><div class="section" title="The FindAndDisplayBlipsForTag(…) method"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec11"/>The FindAndDisplayBlipsForTag(…) method</h3></div></div></div><p>This method inputs two parameters: the string tag for the objects to be searched for; and a reference to the <span class="strong"><strong>RawImage</strong></span> prefab to be displayed on the radar for any such tagged objects within the range.</p><p>First, the current<a class="indexterm" id="id114"/> position of the player's character is retrieved from the cached player transform variable. Next, an array is constructed, referring to all GameObjects in the scene that have the provided tag. This array of GameObjects is looped through, and for each GameObject, the <a class="indexterm" id="id115"/>following actions are performed:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The position of the target GameObject is retrieved</li><li class="listitem" style="list-style-type: disc">The distance from this target position to the player's position is calculated, and if this distance is within the range (less than or equal to <code class="literal">insideRadarDistance</code>), then three steps are now required to get the blip for this object to appear on the radar:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The normalized position of the target is calculated by calling <code class="literal">NormalisedPosition(…)</code></li><li class="listitem" style="list-style-type: disc">The position of the blip on the radar is then calculated from this normalized position by calling <code class="literal">CalculateBlipPosition(…)</code></li><li class="listitem" style="list-style-type: disc">Finally, the <span class="strong"><strong>RawImage</strong></span> blip is displayed by calling <code class="literal">DrawBlip(…)</code> and passing<a class="indexterm" id="id116"/> the blip position and the reference to the <span class="strong"><strong>RawImage</strong></span> prefab that is to be<a class="indexterm" id="id117"/> created there</li></ul></div></li></ul></div></div><div class="section" title="The NormalisedPosition(…) method"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec12"/>The NormalisedPosition(…) method</h3></div></div></div><p>The <code class="literal">NormalisedPosition(…)</code> method inputs the player's character position and the target GameObject position. It has the goal of outputting the relative position of the target to the player, returning a Vector3 object with a triplet of <span class="emphasis"><em>X</em></span>, <span class="emphasis"><em>Y</em></span>, and <span class="emphasis"><em>Z</em></span> values. Note that since the radar is only 2D, we<a class="indexterm" id="id118"/> ignore the <span class="emphasis"><em>Y</em></span>value of target GameObjects. So, the <span class="emphasis"><em>Y</em></span>value of the Vector3 object returned by this method will always be 0. So, for example, if a target was at exactly the same location as the player, the returned <span class="emphasis"><em>X</em></span>, <span class="emphasis"><em>Y</em></span>, <span class="emphasis"><em>Z</em></span> Vector3 object would be (0, 0, 0).</p><p>Since we know<a class="indexterm" id="id119"/> that the target GameObject is no further from the player's character than <code class="literal">insideRadarDistance</code>, we can calculate a value in the -1 … 0 … +1 range for the <span class="emphasis"><em>X</em></span> and <span class="emphasis"><em>Z</em></span> axis by finding the distance on each axis from the target to the player, and then dividing it by <code class="literal">insideRadarDistance</code>. An <span class="emphasis"><em>X</em></span> value of -1 means that the target is fully to the left of the player (at a distance that is equal to <code class="literal">insideRadarDistance</code>), and +1 means it is fully to the right. A value of 0 means that the target has the same <span class="emphasis"><em>X</em></span> position as the player's character. Likewise, for -1 … 0 … +1 values in the <span class="emphasis"><em>Z-axis</em></span> (this axis represents how far, in front or behind us an object, is located, which will be mapped to the vertical axis in our radar).</p><p>Finally, this method constructs and returns a new Vector3 object, with the calculated <span class="emphasis"><em>X</em></span> and <span class="emphasis"><em>Z </em></span>normalized values, and a <span class="emphasis"><em>Y</em></span> value of zero.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note15"/>Note</h3><p>
<span class="strong"><strong>The normalized position</strong></span>
</p><p>A <span class="emphasis"><em>normalized</em></span> value is one that has been simplified in some way, so the context has been abstracted away. In<a class="indexterm" id="id120"/> this recipe, what we are interested in is where an object is relative to the player. So, our normal form is to get a value of the <span class="emphasis"><em>X</em></span> and <span class="emphasis"><em>Z</em></span> position of a target in the -1 to +1 range for each axis. Since we are only considering GameObject within out <code class="literal">insideRadarDistance</code> value, we can map these normalized target positions directly onto the location of the radar image in our UI.</p></div></div></div><div class="section" title="The CalculateBlipPosition(…) method"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec13"/>The CalculateBlipPosition(…) method</h3></div></div></div><p>First, we<a class="indexterm" id="id121"/> calculate <code class="literal">angleToTarget</code>: the angle from (0, 0, 0) to our normalized target position.</p><p>Next, we calculate <code class="literal">anglePlayer</code>: the angle the player's character is facing. This recipe makes use of the <span class="strong"><strong>yaw</strong></span> angle of the rotation, which is the rotation about the <span class="emphasis"><em>Y-axis</em></span>—that is, the direction that a character <a class="indexterm" id="id122"/>controller is facing. This can be found in the <span class="emphasis"><em>Y</em></span> component of a GameObject's <code class="literal">eulerAngles</code> component of its transform. You can imagine looking from above and down at the character controller, and see what direction they are facing—this is just what we are trying to display graphically with<a class="indexterm" id="id123"/> the compass.</p><p>Our desired radar angle (the <code class="literal">angleRadarDegrees</code> variable) is calculated by subtracting the player's direction angle from the angle between target and player, since a radar displays the relative angle from the direction that the player is facing, to the target object. In mathematics, an angle of zero indicates an <span class="emphasis"><em>east</em></span> direction. To correct this, we need to also subtract 90 degrees from the angle.</p><p>The angle is then<a class="indexterm" id="id124"/> converted into radians, since this is required for the Unity trigonometry methods. We then multiply the <code class="literal">Sin()</code> and <code class="literal">Cos()</code> results by our normalized distances to calculate the <span class="emphasis"><em>X</em></span> and <span class="emphasis"><em>Y</em></span> values respectively (see the following figure):</p><div class="mediaobject"><img alt="The CalculateBlipPosition(…) method" src="graphics/1362OT_01_46.jpg"/></div><p>Our final position values need to be expressed as pixel lengths, relative to the center of the radar. So, we multiply our <code class="literal">blipX</code> and <code class="literal">blipY</code> values by half the width and the height of the radar; note that we multiply only with half the width, since these values are relative to the center of the radar.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note16"/>Note</h3><p>Note: In this figure, alpha is the angle between player and target object, 'a' is the adjacent side, 'h' is the hypotenuse and 'o' is the side opposite the angle.</p></div></div><p>We then add half the width and height of the radar image to the <code class="literal">blipX</code>/<code class="literal">Y</code> values. So, these values are now positioned relative to the center.</p><p>Finally a new <span class="strong"><strong>Vector2</strong></span> object is created and returned, passing back these final calculated <span class="emphasis"><em>X</em></span> and <span class="emphasis"><em>Y</em></span> pixel values for<a class="indexterm" id="id125"/> the position of our blip icon.</p></div><div class="section" title="The DrawBlip() method"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec14"/>The DrawBlip() method</h3></div></div></div><p>The <code class="literal">DrawBlip()</code> method takes the input parameters of the position of the blip (as a <code class="literal">Vector2</code> <span class="emphasis"><em>X</em></span>, <span class="emphasis"><em>Y</em></span> pair), and the reference<a class="indexterm" id="id126"/> to the <span class="strong"><strong>RawImage</strong></span> prefab to be created at that location on the radar.</p><p>A new GameObject is<a class="indexterm" id="id127"/> created from the prefab, and is parented to the radar GameObject (of which the scripted object is also a component). A reference is retrieved to the <span class="strong"><strong>Rect Transform</strong></span> of the new <span class="strong"><strong>RawImage</strong></span> GameObject that has been created for the 'blip'. Calls to the Unity <span class="strong"><strong>RectTransform</strong></span> method, <code class="literal">SetInsetAndSizeFromParentEdge(…),</code> result in the blip GameObject being positioned at the provided horizontal and vertical locations over the radar image, regardless of where in the <span class="strong"><strong>Game</strong></span> panel the background radar image has been located.</p></div></div></div>
<div class="section" title="Creating UIs with the Fungus open-source dialog system"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec21"/>Creating UIs with the Fungus open-source dialog system</h1></div></div></div><p>Rather than <a class="indexterm" id="id128"/>constructing your own UI and interactions from scratch each time, there are plenty of UI and dialogue systems available for Unity. One powerful, free, and open source dialog system is <a class="indexterm" id="id129"/>called <span class="strong"><strong>Fungus</strong></span>, which uses a visual flowcharting approach to dialog design.</p><p>In this recipe, we'll <a class="indexterm" id="id130"/>create a very simple, two-sentence dialogue, to illustrate the basics of Fungus. The following screenshot shows the Fungus-generated dialog for the first sentence ('<span class="strong"><strong>Hello, how are you</strong></span>') and the interactive button (a triangle inside a circle) the user clicks to progress to the next piece of dialog (in the bottom-right part of the rectangle).</p><div class="mediaobject"><img alt="Creating UIs with the Fungus open-source dialog system" src="graphics/1362OT_01_23.jpg"/></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec51"/>How to do it...</h2></div></div></div><p>To create a two-sentence<a class="indexterm" id="id131"/> dialog using Fungus, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download the latest version<a class="indexterm" id="id132"/> of the Fungus <span class="strong"><strong>unitypackage</strong></span> from the FungusGames website <a class="ulink" href="http://www.fungusgames.com/">http://www.fungusgames.com/</a>.</li><li class="listitem">Create a<a class="indexterm" id="id133"/> new Unity 2D project.</li><li class="listitem">Import the Fungus <span class="strong"><strong>unitypackage</strong></span> by navigating to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import Package</strong></span> | <span class="strong"><strong>Custom Package...</strong></span>, and then navigating to your downloaded file location.</li><li class="listitem">Create a new Fungus <span class="strong"><strong>Flowchart</strong></span> GameObject by choosing menu: <span class="strong"><strong>Tools</strong></span> | <span class="strong"><strong>Fungus</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Flowchart</strong></span>. </li><li class="listitem">Display and dock the Fungus <span class="strong"><strong>Flowchart</strong></span> window panel by choosing menu: <span class="strong"><strong>Tools</strong></span> | <span class="strong"><strong>Fungus</strong></span> | <span class="strong"><strong>Flowchart Window</strong></span>.</li><li class="listitem">There will be a block in the <span class="strong"><strong>Flowchart</strong></span> Window. Click on this block to select it (a green border appears around the block to indicate that it is selected), and then in the <span class="strong"><strong>Inspector</strong></span> panel, change the name of this block to <span class="strong"><strong>Start</strong></span>, as shown in the following screenshot:<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_24.jpg"/></div></li><li class="listitem">Each <span class="strong"><strong>Block</strong></span> in a Flowchart<a class="indexterm" id="id134"/> follows a sequence of commands. So, we are now going to create a sequence of commands to display two sentences to the user when the game runs.<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note17"/>Note</h3><p>The sequence of <span class="strong"><strong>Commands</strong></span> in a <span class="strong"><strong>Block</strong></span>
</p><p>Each <span class="strong"><strong>Block</strong></span> in a <span class="strong"><strong>Flowchart</strong></span> follows a sequence of <span class="strong"><strong>Commands</strong></span>, so to display two sentences to the user when the game runs, we need to create a sequence of two <span class="strong"><strong>Say</strong></span> commands in the <span class="strong"><strong>Inspector</strong></span> panel properties for our <span class="strong"><strong>Block</strong></span>.</p></div></div></li><li class="listitem">Ensure that<a class="indexterm" id="id135"/> the <span class="strong"><strong>Start</strong></span> block is still selected in the <span class="strong"><strong>Flowchart</strong></span> panel. Now, click on the plus <span class="strong"><strong>+</strong></span>' button at the bottom section of the <span class="strong"><strong>Inspector</strong></span> panel to display the menu of <span class="strong"><strong>Commands</strong></span>, and select the <span class="strong"><strong>Narrative</strong></span> | <span class="strong"><strong>Say</strong></span> command, as shown here:<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_25.jpg"/></div></li><li class="listitem">Since we only have one command for this block, that command will automatically be selected (highlighted green) in the top-half part of the <span class="strong"><strong>Inspector </strong></span>view. The bottom half of the <span class="strong"><strong>Inspector</strong></span> view presents the properties for the currently selected <span class="strong"><strong>Command</strong></span>, as shown in the following screenshot. In the bottom-half part of the <span class="strong"><strong>Inspector </strong></span>view, for the <span class="strong"><strong>Story Text</strong></span> property, enter the text of the question that you wish to be presented to the user: <code class="literal">How are you today?</code><div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_26.jpg"/></div></li><li class="listitem">Now, create another <span class="strong"><strong>Say Command</strong></span>, and type the following for its <span class="strong"><strong>Story Text</strong></span> property: <code class="literal">Very well thank you.</code></li><li class="listitem">When you run the game, the user will first be presented with the <span class="strong"><strong>How are you today?</strong></span> text (hearing a clicking noise as each letter is <span class="emphasis"><em>typed</em></span> on screen). After the user clicks on the 'continue' triangle button (at the bottom-right part of the dialog window), they will then be presented with the second sentence: <span class="strong"><strong>Very well thank you.</strong></span></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec52"/>How it works...</h2></div></div></div><p>You have created a<a class="indexterm" id="id136"/> new Unity project, and imported the Fungus asset package, containing the Fungus Unity menus, windows and commands, and also the example projects.</p><p>You have added a <span class="strong"><strong>Fungus Flowchart</strong></span> to your scene with a single <span class="strong"><strong>Block</strong></span> that you have named <span class="strong"><strong>Start</strong></span>. Your block starts to execute when the game begins (since the default for the first block is to be executed upon receiving the <span class="strong"><strong>Game Started </strong></span>event).</p><p>In the <span class="strong"><strong>Start</strong></span> block, you<a class="indexterm" id="id137"/> added a sequence of two <span class="strong"><strong>Say Commands</strong></span>. Each command presents a sentence to the user, and then waits for the continue button to be clicked before proceeding to the next <span class="strong"><strong>Command</strong></span>.</p><p>As can be seen, the<a class="indexterm" id="id138"/> Fungus system handles the work of creating a nicely presented panel to the user, displaying the desired<a class="indexterm" id="id139"/> text and continue button. Fungus offers many more features, including menus, animations, control of sounds and music, and so on, details of which can be found by<a class="indexterm" id="id140"/> exploring their provided example projects, and their websites:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><a class="ulink" href="http://fungusgames.com/">http://fungusgames.com/</a></li><li class="listitem" style="list-style-type: disc"><a class="ulink" href="https://github.com/FungusGames/Fungus">https://github.com/FungusGames/Fungus</a></li></ul></div></div></div>
<div class="section" title="Setting custom mouse cursor images"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec22"/>Setting custom mouse cursor images</h1></div></div></div><p>Cursor icons are<a class="indexterm" id="id141"/> often used to indicate the nature of the interaction that can be done with the mouse. Zooming, for instance, might be illustrated by a magnifying glass. Shooting, on the other hand, is usually represented by a stylized target. In this recipe, we will learn how to implement custom mouse cursor icons to better illustrate your gameplay—or just to escape the Windows, OSX, and Linux default GUI. The following screenshot shows a custom magnifying glass mouse cursor when the use's mouse pointer hovers over a <span class="strong"><strong>Button</strong></span>:</p><div class="mediaobject"><img alt="Setting custom mouse cursor images" src="graphics/1362OT_01_32.jpg"/></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec53"/>Getting ready</h2></div></div></div><p>For this recipe, we have prepared the images that you'll need in a folder named <code class="literal">IconsCursors</code> in the <code class="literal">1362_01_13</code> folder.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec54"/>How to do it...</h2></div></div></div><p>To make a custom cursor appear when the mouse is over a GameObject, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new <a class="indexterm" id="id142"/>Unity 2D project.</li><li class="listitem">Add a <span class="strong"><strong>Directional Light</strong></span> item to the scene by navigating to <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Light</strong></span> | <span class="strong"><strong>Directional light</strong></span>.</li><li class="listitem">Add a 3D <span class="strong"><strong>Cube</strong></span> to the scene, scaled to (5, 5, 5). Because it was created as a 2D project the cube will appear as a grey square in the <span class="strong"><strong>Game</strong></span> panel (2D projects have an orthographic camera, so we won't see perspective effects).</li><li class="listitem">Import the provided folder called <code class="literal">IconsCursors</code>.<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p>Ensure that each image in this folder has been imported as <span class="strong"><strong>Texture Type Cursor</strong></span>. If they are not, then select this type for each image and click on the <span class="strong"><strong>Apply</strong></span> button in the <span class="strong"><strong>Inspector </strong></span>view.</p></div></div></li><li class="listitem">Create a C# script class called <code class="literal">CustomCursorPointer</code>, containing the following code, and add an instance as a scripted component to the <span class="strong"><strong>Cube</strong></span> GameObject:<div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class CustomCursorPointer : MonoBehaviour {
  public Texture2D cursorTexture2D;

  private CursorMode cursorMode = CursorMode.Auto;
  private Vector2 hotSpot = Vector2.zero;

  public void OnMouseEnter() {
    SetCustomCursor(cursorTexture2D);
  }

  public void OnMouseExit() {
    SetCustomCursor(null);
  }

  private void SetCustomCursor(Texture2D curText){
    Cursor.SetCursor(curText, hotSpot, cursorMode);
  }
}</pre></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note18"/>Note</h3><p>Event methods <code class="literal">OnMouseEnter()</code> and <code class="literal">OnMouseExit()</code> have been purposely declared as <code class="literal">public</code>. This will allow these methods to also be called from UI GameObjects when they receive the <code class="literal">OnPointerEnterExit</code> events.</p></div></div></li><li class="listitem">With the <span class="strong"><strong>Cube</strong></span> item<a class="indexterm" id="id143"/> selected in the <span class="strong"><strong>Hierarchy</strong></span> panel, drag the <code class="literal">CursorTarget</code> image into the public <span class="strong"><strong>Cursor Texture 2D</strong></span> variable slot in the <span class="strong"><strong>Inspector</strong></span> panel for the <span class="strong"><strong>Customer Cursor Pointer (Script) </strong></span>component.</li><li class="listitem">Save the current scene, and add it to the <span class="strong"><strong>Build</strong></span>.<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip03"/>Tip</h3><p>You will not be able to see the custom cursors in the Unity Editor. You must build your game application, and you'll see the custom cursors when you run the build app.</p></div></div></li><li class="listitem">Build your project. Now, run your built application, and when the mouse pointer moves over the grey square of the <span class="strong"><strong>Cube</strong></span>, it will change to the custom <code class="literal">CursorTarget</code> image that you chose.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec55"/>How it works...</h2></div></div></div><p>You have added a scripted object to a cube that will tell Unity to change the mouse pointer when an <span class="strong"><strong>OnMouseEnter</strong></span> message is received—that is, when the user's mouse pointer moves over the part of the screen where the cube is being rendered. When an <span class="strong"><strong>OnMouseExit</strong></span> event is received (the users mouse pointer is no longer over the cube part of the screen), the system is told to go back to the operating system default cursor. This event should be received within a few milliseconds of the user's mouse exiting from the collider.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec56"/>There's more...</h2></div></div></div><p>There are some details that <a class="indexterm" id="id144"/>you don't want to miss.</p><div class="section" title="Custom cursors for mouse over UI controls"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec15"/>Custom cursors for mouse over UI controls</h3></div></div></div><p>Unity 5 UI controls do not receive the <span class="strong"><strong>OnMouseEnter</strong></span> and <span class="strong"><strong>OnMouseExit</strong></span> events. They can respond to the <span class="strong"><strong>PointerEnter/Exit</strong></span> events, but this requires adding the <span class="strong"><strong>Event Trigger</strong></span> components. To<a class="indexterm" id="id145"/> change the mouse pointer when the mouse moves over a UI element, do the following:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Add a UI <span class="strong"><strong>Button</strong></span> to the scene.</li><li class="listitem">Add an instance of the C# script class called <code class="literal">CustomCursorPointer</code> to the button.</li><li class="listitem">With <span class="strong"><strong>Button</strong></span> selected in the <span class="strong"><strong>Hierarchy panel</strong></span>, drag the <code class="literal">CursorZoom</code> image into the public <span class="strong"><strong>Cursor Texture 2D</strong></span> variable slot in the <span class="strong"><strong>Inspector</strong></span> panel for the <span class="strong"><strong>Customer Cursor Pointer (Script)</strong></span> component.</li><li class="listitem">In the <span class="strong"><strong>Inspector </strong></span>view<span class="strong"><strong>,</strong></span> add an <span class="strong"><strong>Event Triggers</strong></span> component to the <span class="strong"><strong>Button</strong></span>. Choose menu: <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Event</strong></span> | <span class="strong"><strong>Event Trigger</strong></span>.</li><li class="listitem">Add a <span class="strong"><strong>Pointer Enter</strong></span> event to your <span class="strong"><strong>Event Trigger</strong></span> component, click on the plus (<span class="strong"><strong>+</strong></span>) button to add an event handler slot, and drag the <span class="strong"><strong>Button</strong></span> GameObject into the <span class="strong"><strong>Object</strong></span> slot.</li><li class="listitem">From the <span class="strong"><strong>Function</strong></span> drop-down menu, choose <span class="strong"><strong>CustomCursorPointer</strong></span> and then choose the <span class="strong"><strong>OnMouseEnter</strong></span> method.<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note19"/>Note</h3><p>We have added an Event Handler so that when the <span class="strong"><strong>Button</strong></span> receives a <span class="strong"><strong>Pointer Enter</strong></span> (mouse over) event, it will execute the <span class="strong"><strong>OnMouseEnter()</strong></span> method of the <span class="strong"><strong>CustomCursorPointer</strong></span> scripted object inside the <span class="strong"><strong>Button</strong></span>.</p></div></div></li><li class="listitem">Add a <span class="strong"><strong>Pointer Exit</strong></span> event to<a class="indexterm" id="id146"/> your <span class="strong"><strong>Event Trigger</strong></span> component, and make it call the <code class="literal">OnMouseExit()</code>method from <span class="strong"><strong>CustomCursorPointer</strong></span> when this event is received.</li><li class="listitem">Save the current scene.</li><li class="listitem">Build your project. Now, run your built application and when the mouse pointer moves over the <span class="strong"><strong>Button,</strong></span> it will change to the custom <code class="literal">CursorZoom</code> image that you chose.</li></ol></div></div></div></div>
<div class="section" title="Input Fields component for text entry"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec23"/>Input Fields component for text entry</h1></div></div></div><p>While many times <a class="indexterm" id="id147"/>we just wish to display non-interactive text messages to the user, there are times (such as name entry for high scores) where we wish that the user was able to enter text or numbers into our game. Unity provides the <span class="strong"><strong>Input Field</strong></span> UI component for this purpose. In this recipe, we'll create a simple text input UI by making use of the default Button image and text GameObjects, and we'll add a script to respond to each new value of the input field.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note20"/>Note</h3><p>You can, of course, create a working text input quicker than this recipe's method by choosing menu: <span class="strong"><strong>Create | UI | Input Field</strong></span>, which creates a GameObject containing an Input Field component, child text, and placeholder GameObjects, as shown in the following screenshot. However, by following the steps in this recipe, you'll learn the interrelationships between the different interface elements, because you'll be creating these connections manually from the deconstructed parts of the UI Button GameObject.</p></div></div><div class="mediaobject"><img alt="Input Fields component for text entry" src="graphics/1362OT_01_37.jpg"/></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec57"/>How to do it...</h2></div></div></div><p>To create a promoted text input box to the user with faint placeholder text, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new Unity <a class="indexterm" id="id148"/>2D project.</li><li class="listitem">In the <span class="strong"><strong>Inspector </strong></span>view, change the background of the <span class="strong"><strong>Main Camera</strong></span> to solid white.</li><li class="listitem">Add a <span class="strong"><strong>UI Button</strong></span> to the scene. Delete the <span class="strong"><strong>Button (Script)</strong></span> component of the <span class="strong"><strong>Button</strong></span> GameObject (since it won't be a button, it will be an interactive text input by the time we are finished with it!).</li><li class="listitem">Rename the <span class="strong"><strong>Text</strong></span> child GameObject of the <span class="strong"><strong>Button</strong></span> component to <span class="strong"><strong>Text-placeholder</strong></span>. Uncheck the <span class="strong"><strong>Rich Text</strong></span> option, change the text to <span class="strong"><strong>Enter name…</strong></span>, change the <span class="strong"><strong>Alignment</strong></span> in <span class="strong"><strong>Left</strong></span> and <span class="strong"><strong>Top</strong></span>, and in the <span class="strong"><strong>Rect Transform</strong></span>, set <span class="strong"><strong>Left</strong></span> to <code class="literal">4</code> and <span class="strong"><strong>Top</strong></span> to <code class="literal">7</code>.<div class="mediaobject"><img alt="How to do it..." src="graphics/1362OT_01_38.jpg"/></div></li><li class="listitem">Duplicate <span class="strong"><strong>Text-placeholder by</strong></span> naming the copy <span class="strong"><strong>Text-prompt</strong></span>. Change the <span class="strong"><strong>Text</strong></span> of this <a class="indexterm" id="id149"/>GameObject to <span class="strong"><strong>Name:</strong></span>, and set its <span class="strong"><strong>Left</strong></span> position to <code class="literal">-50</code>.</li><li class="listitem">Duplicate <span class="strong"><strong>Text-placeholder</strong></span> again, naming this new copy <span class="strong"><strong>Text-input</strong></span>. Delete all of the content of the <span class="strong"><strong>Text</strong></span> property of this new GameObject. </li><li class="listitem">Select <span class="strong"><strong>Text-placeholder</strong></span> in the <span class="strong"><strong>Hierarchy,</strong></span> and we will now make the placeholder text mostly transparent. Set the <span class="strong"><strong>A</strong></span> (alpha) <span class="strong"><strong>Color</strong></span> value of the <span class="strong"><strong>Text (Script)</strong></span> component of this GameObject to a value that is about a quarter of its maximum value (e.g. 64).</li><li class="listitem">Select <span class="strong"><strong>Text-input</strong></span> in the <span class="strong"><strong>Hierarchy,</strong></span> and add an <span class="strong"><strong>Input Field</strong></span> component by choosing menu: <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Input Field</strong></span>.</li><li class="listitem">Drag the <span class="strong"><strong>Text-input</strong></span> GameObject into the <span class="strong"><strong>Text Component</strong></span> property of <span class="strong"><strong>Input Field</strong></span>, and drag the <span class="strong"><strong>Text-placeholder</strong></span> GameObject into the <span class="strong"><strong>Placeholder</strong></span> property.</li><li class="listitem">Save and run your scene. You now have a working text input UI for your user. When there is no text content, the faint placeholder text will be displayed. As soon as any characters have been typed, the placeholder will be hidden and the characters typed will appear in black text. Then, if all the characters are deleted, the placeholder will appear again.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec58"/>How it works...</h2></div></div></div><p>The core of interactive text input in Unity is the responsibility of the <span class="strong"><strong>Input Field</strong></span> component. This<a class="indexterm" id="id150"/> needs a reference to a UI <span class="strong"><strong>Text</strong></span> GameObject. To make it easier to see where the text can be typed, we have made use of the default rounded rectangle image that Unity provides when a <span class="strong"><strong>Button</strong></span> GameObject is created. <span class="strong"><strong>Buttons</strong></span> have both an <span class="strong"><strong>Image</strong></span> component and a <span class="strong"><strong>Text</strong></span> child GameObject. So, two items that we need can be acquired very easily by creating a new <span class="strong"><strong>Button,</strong></span> and simply by removing the <span class="strong"><strong>Button (Script)</strong></span> component.</p><p>There are usually three <span class="strong"><strong>Text</strong></span> GameObjects involved with the user text input: the static prompt text (in our recipe, for example, the <span class="strong"><strong>Name: </strong></span>text); then the faint placeholder text, reminding users where and what they should type; and finally the text object (with the font and color settings and so on) that is actually displayed to the user, showing the characters as they type.</p><p>At runtime, a <span class="strong"><strong>Text-Input Input Caret</strong></span> GameObject is created—displaying the blinking vertical line to inform the user where their next letter will be typed. Note that the <span class="strong"><strong>Content Type</strong></span> of the <span class="strong"><strong>Input Field (Script)</strong></span>, in the <span class="strong"><strong>Inspector</strong></span>, can be set to several specific types of text input, including e-mail addresses, integer or decimal numbers only, or the password text (where an asterisk is displayed for each entered character).</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec59"/>There's more...</h2></div></div></div><p>There are some details that you don't want to miss.</p><div class="section" title="Executing a C# method to respond each time the user changes the input text content"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec16"/>Executing a C# method to respond each time the user changes the input text content</h3></div></div></div><p>Having interactive text <a class="indexterm" id="id151"/>on the screen isn't of much use unless we can retrieve the text entered to use in our game logic, and we may need to know each time the user changes the text content and act accordingly.</p><p>To add code and events to respond each time the text content has been changed by the user, do the following:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Add an instance of the C# script class called <code class="literal">DisplayChangedTextContent</code> to the <span class="strong"><strong>Text-input</strong></span> GameObject:<div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class DisplayChangedTextContent : MonoBehaviour {
  private InputField inputField;

  void Start(){
    inputField = GetComponent&lt;InputField&gt;();
  }

  public void PrintNewValue (){
    string msg = "new content = '" + inputField.text + "'";
    print (msg);
}
}</pre></div></li><li class="listitem">Add an <span class="strong"><strong>End Edit (String)</strong></span> event to the list of event handlers for the <span class="strong"><strong>Input Field (Script)</strong></span> component. Click on the plus (<span class="strong"><strong>+</strong></span>) button to add an event handler slot, and drag the <span class="strong"><strong>Text-input</strong></span> GameObject into the <span class="strong"><strong>Object</strong></span> slot.</li><li class="listitem">From the <span class="strong"><strong>Function</strong></span> drop-down menu, choose <span class="strong"><strong>DisplayChangedTextContent</strong></span> and then choose the <span class="strong"><strong>PrintNewValue</strong></span> method.</li><li class="listitem">Save and run<a class="indexterm" id="id152"/> the scene. Each time the user types in new text and then presses <span class="emphasis"><em>Tab</em></span> or <span class="emphasis"><em>Enter</em></span>, the <span class="strong"><strong>End Edit</strong></span> event will fire, and you'll see a new content text message printed in the <span class="strong"><strong>Console</strong></span> window by our script, as shown in the following screenshot:<div class="mediaobject"><img alt="Executing a C# method to respond each time the user changes the input text content" src="graphics/1362OT_01_36.jpg"/></div></li></ol></div></div></div></div>
<div class="section" title="Toggles and radio buttons via Toggle Groups"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec24"/>Toggles and radio buttons via Toggle Groups</h1></div></div></div><p>Users make choices, and<a class="indexterm" id="id153"/> often, these choices are either to have<a class="indexterm" id="id154"/> one of two<a class="indexterm" id="id155"/> available options (for example, sound on<a class="indexterm" id="id156"/> or off), or sometimes to choose one of several possibilities (for example, difficulty level easy/medium/hard). Unity UI <span class="strong"><strong>Toggles</strong></span> allows users to turn options on and off; and when combined with <span class="strong"><strong>Toggle Groups</strong></span>, they restrict choices to one of the group of items. In this recipe, we'll first explore the basic <span class="strong"><strong>Toggle</strong></span>, and a script to respond to a change in values. Then in the <span class="emphasis"><em>There's More</em></span> section, we'll extend the example to illustrate <span class="strong"><strong>Toggle Groups</strong></span>, and styling these with round images to make them look more like traditional radio buttons.</p><p>The following screenshot<a class="indexterm" id="id157"/> shows how the button's status changes are logged in the <span class="strong"><strong>Console</strong></span> panel when the scene is running:</p><div class="mediaobject"><img alt="Toggles and radio buttons via Toggle Groups" src="graphics/1362OT_01_39.jpg"/></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec60"/>Getting ready</h2></div></div></div><p>For this recipe, we have<a class="indexterm" id="id158"/> prepared the images that you'll need in a folder named <code class="literal">UI Demo Textures</code> in the <code class="literal">1362_01_15</code> folder.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec61"/>How to do it...</h2></div></div></div><p>To display an on/off UI Toggle<a class="indexterm" id="id159"/> to the user, follow these<a class="indexterm" id="id160"/> steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new Unity 2D project.</li><li class="listitem">In the <span class="strong"><strong>Inspector</strong></span> panel, change the <span class="strong"><strong>Background</strong></span> color of the <span class="strong"><strong>Main Camera</strong></span> to white.</li><li class="listitem">Add <span class="strong"><strong>UI Toggle</strong></span> to the scene.</li><li class="listitem">Enter <code class="literal">First Class</code> as <span class="strong"><strong>Text</strong></span> for the <span class="strong"><strong>Label</strong></span> child GameObject of the <span class="strong"><strong>Toggle </strong></span>GameObject.</li><li class="listitem">Add an instance of the C# script class called <code class="literal">ToggleChangeManager</code> to the <span class="strong"><strong>Toggle</strong></span> GameObject:<div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class ToggleChangeManager : MonoBehaviour {
  private Toggle toggle;

  void Start () {
    toggle = GetComponent&lt;Toggle&gt;();	
  }

  public void PrintNewToggleValue(){
    bool status = toggle.isOn;
    print ("toggle status = " + status);
  }
}</pre></div></li><li class="listitem">With the <span class="strong"><strong>Toggle</strong></span> GameObject selected, add an <span class="strong"><strong>On Value Changed </strong></span>event to the list of event handlers for the <span class="strong"><strong>Toggle (Script) </strong></span>component, click on the plus (+) button to add an event handler slot, and drag <span class="strong"><strong>Toggle</strong></span> into the <span class="strong"><strong>Object</strong></span> slot.</li><li class="listitem">From the <span class="strong"><strong>Function</strong></span> drop-down menu, choose <span class="strong"><strong>ToggleChangeManager</strong></span> and then choose the <span class="strong"><strong>PrintNewToggleValue</strong></span> method.</li><li class="listitem">Save and<a class="indexterm" id="id161"/> run the scene. Each time you check or uncheck the <span class="strong"><strong>Toggle</strong></span> GameObject, the <span class="strong"><strong>On Value Changed</strong></span> event will fire, and you'll see a new text message printed into the Console window by our script, stating the new Boolean true/false value of the <span class="strong"><strong>Toggle</strong></span>.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec62"/>How it works...</h2></div></div></div><p>When you create <a class="indexterm" id="id162"/>a Unity UI <span class="strong"><strong>Toggle</strong></span> GameObject, it comes with several child GameObjects automatically—<span class="strong"><strong>Background</strong></span>, <span class="strong"><strong>Checkmark</strong></span>, and the text <span class="strong"><strong>Label</strong></span>. Unless we need to style the <a class="indexterm" id="id163"/>look of a <span class="strong"><strong>Toggle</strong></span> in a special way, all that is needed is simply to edit the text <span class="strong"><strong>Label</strong></span> so that the user knows what option or feature that this <span class="strong"><strong>Toggle</strong></span> is going to turn on/off.</p><p>The C# scripted class called <code class="literal">ToggleChangeManager's</code> method called <code class="literal">Start()</code> gets a reference to the <span class="strong"><strong>Toggle</strong></span> component in the GameObject, where the script instance is located. When the game is running, each time the user clicks on the <span class="strong"><strong>Toggle</strong></span> to change its value, an <span class="strong"><strong>On Value Changed</strong></span> event is fired. We then register the <code class="literal">PrintNewToggleValue()</code>method, which is supposed to be executed when such an event occurs. This method retrieves, and then prints out to the <span class="strong"><strong>Console</strong></span> panel the new Boolean true/false value of the <span class="strong"><strong>Toggle</strong></span>.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec63"/>There's more...</h2></div></div></div><p>There are some details that you don't want to miss.</p><div class="section" title="Adding more Toggles and a Toggle Group to implement mutually-exclusive radio buttons"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec17"/>Adding more Toggles and a Toggle Group to implement mutually-exclusive radio buttons</h3></div></div></div><p>The Unity UI <span class="strong"><strong>Toggles</strong></span> are also the base components, if we wish to implement a group of mutually-exclusive options in the style <a class="indexterm" id="id164"/>of radio buttons. To create such a group of related choices, do the following:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Import the <code class="literal">UI Demo Textures</code> folder into the project.</li><li class="listitem">Remove the C# script class <code class="literal">ToggleChangeManager</code> component from the <span class="strong"><strong>Toggle</strong></span> GameObject.</li><li class="listitem">Rename the <span class="strong"><strong>Toggle</strong></span> GameObject as <span class="strong"><strong>Toggle-easy</strong></span>.</li><li class="listitem">Change the <span class="strong"><strong>Label</strong></span> text to <span class="strong"><strong>Easy</strong></span>, and tag this GameObject with a new tag called <span class="strong"><strong>Easy</strong></span>.</li><li class="listitem">Select the <span class="strong"><strong>Background</strong></span> child GameObject of <span class="strong"><strong>Toggle-easy</strong></span>, and in the <span class="strong"><strong>Image (Script)</strong></span> component, drag the <code class="literal">UIToggleBG</code> image into the <span class="strong"><strong>Source Image</strong></span> property.</li><li class="listitem">Ensure that the <span class="strong"><strong>Is On</strong></span> property of the <span class="strong"><strong>Toggle (Script)</strong></span> component is checked, and then select the <span class="strong"><strong>Checkmark</strong></span> child GameObject of <span class="strong"><strong>Toggle-easy</strong></span>. In the <span class="strong"><strong>Image (Script)</strong></span> component, drag the <code class="literal">UIToggleButton</code> image into the <span class="strong"><strong>Source Image</strong></span> property.<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note21"/>Note</h3><p>Of the three choices (easy, medium, and hard) that we'll offer to the user, we'll set the easy option to be the one that is supposed to be initially selected. Therefore, we need its <span class="strong"><strong>Is On</strong></span> property to be checked, which will lead to its 'checkmark' image being displayed.</p><p>To make these <span class="strong"><strong>Toggles</strong></span> look more like radio buttons, the background of each is set to the circle image of <code class="literal">UIToggleBG</code>, and the checkmark (which displays the <span class="strong"><strong>Toggles</strong></span> that are on) is filled with the circle image called <code class="literal">UIToggleButton</code>.</p></div></div></li><li class="listitem">Duplicate the <span class="strong"><strong>Toggle-easy</strong></span> GameObject, naming the copy <span class="strong"><strong>Toggle-medium</strong></span>. Set its <span class="strong"><strong>Rect Transform</strong></span> property <span class="strong"><strong>Pos Y</strong></span> to <code class="literal">-25</code> (so, this copy is positioned below the easy option), and uncheck the <span class="strong"><strong>Is On</strong></span> property of the <span class="strong"><strong>Toggle (Script)</strong></span> component. Tag this copy with a new tag called <span class="strong"><strong>Medium</strong></span>.</li><li class="listitem">Duplicate the <span class="strong"><strong>Toggle-medium</strong></span> GameObject, naming the copy <span class="strong"><strong>Toggle-hard</strong></span>. Set its <span class="strong"><strong>Rect Transform</strong></span> property <span class="strong"><strong>Pos Y</strong></span> to <code class="literal">-50</code> (so this copy is positioned below the medium option). Tag this copy with a new tag called <span class="strong"><strong>Hard</strong></span>.</li><li class="listitem">Add an instance of the C# script class called <code class="literal">RadioButtonManager</code> to the <span class="strong"><strong>Canvas</strong></span> GameObject:<div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class RadioButtonManager : MonoBehaviour {
  private string currentDifficulty = "Easy";

  public void PrintNewGroupValue(Toggle sender){
    // only take notice from Toggle just swtiched to On
    if(sender.isOn){
      currentDifficulty = sender.tag;
      print ("option changed to = " + currentDifficulty);
    }
  }
}</pre></div></li><li class="listitem">With the <span class="strong"><strong>Toggle-easy</strong></span> GameObject selected, add an <span class="strong"><strong>On Value Changed</strong></span> event to the list of event handlers for the <span class="strong"><strong>Toggle (Script)</strong></span> component. Click on the plus (<span class="strong"><strong>+</strong></span>) button to add an event handler slot, and drag the <span class="strong"><strong>Canvas</strong></span> GameObject into the Object slot.</li><li class="listitem">From the <span class="strong"><strong>Function</strong></span> drop-down menu, choose <span class="strong"><strong>RadioButtonManager</strong></span>, and then choose<a class="indexterm" id="id165"/> the <span class="strong"><strong>PrintNewGroupValue</strong></span> method. In the <span class="strong"><strong>Toggle</strong></span> parameter slot, which is initially <code class="literal">None (Toggle)</code>, drag the <span class="strong"><strong>Toggle-easy</strong></span> GameObject.</li><li class="listitem">Do the same for the <span class="strong"><strong>Toggle-medium</strong></span> and <span class="strong"><strong>Toggle-hard</strong></span> GameObjects—so each <span class="strong"><strong>Toggle</strong></span> object calls the <code class="literal">PrintNewGroupValue(…)</code>method of a C# scripted component called <code class="literal">RadioButtonManager</code> in the <span class="strong"><strong>Canvas</strong></span> GameObject, passing itself as a parameter.</li><li class="listitem">Save and run the scene. Each time you check one of the three radio buttons, the <span class="strong"><strong>On Value Changed</strong></span> event will fire, and you'll see a new text message printed into the <span class="strong"><strong>Console</strong></span> window by our script, stating the tag of whichever <span class="strong"><strong>Toggle</strong></span> (radio button) was just set to true (<span class="strong"><strong>Is On</strong></span>).</li><li class="listitem">The following screenshot shows how the value corresponding to the selected radio button is logged to the <span class="strong"><strong>Console</strong></span> panel when the scene is running:<div class="mediaobject"><img alt="Adding more Toggles and a Toggle Group to implement mutually-exclusive radio buttons" src="graphics/1362OT_01_40.jpg"/></div></li></ol></div></div></div></div>
<div class="section" title="Conclusion"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec25"/>Conclusion</h1></div></div></div><p>In this chapter, we have introduced recipes demonstrating a range of Unity 5 UI components, and illustrated how the same components can be used in different ways (such as an interactive slider being used to display the status of a countdown timer). One set of UI components in many games are those that communicate to the user what they are carrying (or yet to pick up). We have dedicated another chapter in this book to inventories in <a class="link" href="ch02.html" title="Chapter 2. Inventory GUIs">Chapter 2</a>, <span class="emphasis"><em>Inventory GUIs</em></span>, which provides many inventory recipes and additional UI controls, such as adding interactive scroll bars.</p><p>Here are some suggestions for further reading, tutorials, and resources to help you continue your learning of UI development in Unity:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Learn more about the<a class="indexterm" id="id166"/> Unity UI on manual pages at <a class="ulink" href="http://docs.unity3d.com/Manual/UISystem.html">http://docs.unity3d.com/Manual/UISystem.html</a>.</li><li class="listitem" style="list-style-type: disc">Work through the Unity UI tutorial videos at <a class="ulink" href="https://unity3d.com/learn/tutorials/topics/user-interface-ui">https://unity3d.com/learn/tutorials/topics/user-interface-ui</a>.</li><li class="listitem" style="list-style-type: disc">Ray Wenderlich's great tutorial on Unity UI development at <a class="ulink" href="http://www.raywenderlich.com/78675/unity-new-gui-part-1">http://www.raywenderlich.com/78675/unity-new-gui-part-1</a>.</li><li class="listitem" style="list-style-type: disc">Unity's documentation pages about designing UI for multiple resolutions: <a class="ulink" href="http://docs.unity3d.com/Manual/HOWTO-UIMultiResolution.html">http://docs.unity3d.com/Manual/HOWTO-UIMultiResolution.html</a>.</li></ul></div><p>Games need fonts in a style to match the gameplay and theme. Here are some of the sources of free personal/commercial fonts suitable for many games:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">All the fonts at FontSquirrel are 100% free for commercial use. They are available at <a class="ulink" href="http://www.fontsquirrel.com/">http://www.fontsquirrel.com/</a>.</li><li class="listitem" style="list-style-type: disc">See each font for individual license at the DaFont website. Many people ask for a donation if these are used for commercial purposes. For more information, check out <a class="ulink" href="http://www.dafont.com/xolonium.font">http://www.dafont.com/xolonium.font</a>.</li><li class="listitem" style="list-style-type: disc">See each<a class="indexterm" id="id167"/> font for individual licenses available on the Naldz Graphics blog at <a class="ulink" href="http://naldzgraphics.net/textures/">http://naldzgraphics.net/textures/</a>.</li><li class="listitem" style="list-style-type: disc">1001 Free Fonts (for personal use) are available at <a class="ulink" href="http://www.1001freefonts.com/index.php">http://www.1001freefonts.com/index.php</a>.</li></ul></div></div></body></html>