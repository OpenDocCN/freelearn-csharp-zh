- en: Chapter 6. Trade
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第6章 贸易
- en: In the previous chapter, we discussed how Microsoft Dynamics NAV can help us
    to streamline our production process using both the standard application as well
    as customized solutions. We talked about five vertical industries and how to fit
    the application for them.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们讨论了如何使用Microsoft Dynamics NAV通过标准应用程序以及定制解决方案来帮助我们简化生产流程。我们讨论了五个垂直行业以及如何为它们适配应用程序。
- en: In this chapter, we will discuss how to use Microsoft Dynamics NAV for these
    companies using sales and purchase documents and how to integrate this with the
    built-in Warehouse Management and Reservation processes.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论如何使用销售和采购文档以及如何与内置的仓库管理和预留流程集成来为这些公司使用Microsoft Dynamics NAV。
- en: The primary focus of this chapter is on how the application is designed, and
    where to go to change or enhance the design. Basic knowledge of how to create
    and process sales and purchase documents in Microsoft Dynamics NAV is a prerequisite.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的重点是介绍应用程序的设计方式，以及如何更改或增强设计。了解如何在Microsoft Dynamics NAV中创建和处理销售和采购文档的基本知识是先决条件。
- en: We will use examples from the same vertical industries—automotive, fashion,
    medicines, food, and furniture—which we discussed in the previous chapters. After
    reading this chapter, you will have a good understanding of how to implement Microsoft
    Dynamics NAV in trading companies.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用与上一章中讨论的相同垂直行业（汽车、时尚、药品、食品和家具）的例子。阅读完本章后，您将很好地理解如何在贸易公司中实施Microsoft Dynamics
    NAV。
- en: The process
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 流程
- en: 'A trading company purchases and sells items without changing them. The main
    activities are purchase, storage, packaging, sales, and shipping, as shown in
    the following screenshot:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 一家贸易公司购买和销售商品而不对其进行更改。主要活动包括采购、储存、包装、销售和运输，如下面的截图所示：
- en: '![The process](img/0365EN_06_01.jpg)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![流程](img/0365EN_06_01.jpg)'
- en: Managing the inventory is very important in these companies. Having inventory
    is crucial for delivering on time and not having to say "no" to customers.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些公司中，管理库存非常重要。拥有库存对于按时交付和不必对客户说“不”至关重要。
- en: Wholesale versus retail
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 批发与零售
- en: Traditionally, trading companies are divided into wholesale and retail companies.
    Wholesale companies sell to business and retail companies sell to consumers. Microsoft
    Dynamics NAV supports both and from the perspective of design (table and posting
    structure), there is not much difference.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，贸易公司分为批发公司和零售公司。批发公司向企业销售，而零售公司向消费者销售。Microsoft Dynamics NAV支持两者，在设计（表和记账结构）方面，没有太大的区别。
- en: The biggest difference between wholesale and retail for the application is the
    transaction volume. While the total turnover of a wholesale company can be much
    higher compared to a retailer, the retailer often has more, smaller transactions.
    It can be a challenge from an application design perspective to retain a solution
    that performs well.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 对于应用程序来说，批发和零售之间最大的区别是交易量。虽然批发公司的总营业额可能比零售商高得多，但零售商通常有更多、更小的交易。从应用程序设计角度来看，保持解决方案的性能可能是一个挑战。
- en: Another issue with high volume transaction systems is traceability of the data.
    Whenever something goes wrong, it is very important to see where this has started
    and how much data was impacted by the mistake. In low transaction systems, it
    is easier to find this manually.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 高量交易系统中的另一个问题是数据的可追溯性。每当出现问题，了解问题开始的地方以及有多少数据受到影响非常重要。在低交易系统中，手动查找这一点更容易。
- en: Sales and purchasing
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 销售和采购
- en: Traditionally, salespersons used to work with paper order forms. They would
    write down the customer name and address and the items or services required.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，销售人员使用纸质订单表。他们会写下客户名称和地址以及所需的项目或服务。
- en: '![Sales and purchasing](img/0365EN_06_02.jpg)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![销售和采购](img/0365EN_06_02.jpg)'
- en: Paper order form
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 纸质订单表
- en: In Microsoft Dynamics NAV, the paper document is replaced by a sales and purchase
    document using a header for the general order information and lines to register
    the items and services.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中，纸质文件被销售和采购文件所取代，使用标题来记录一般订单信息，使用行来登记项目和服务的详细信息。
- en: The posting process breaks down the information in the document into the journals
    and posts them, so the end user does not have to worry about this. The application
    reuses the same posting routines as we discussed in earlier chapters.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 记账过程将文档中的信息分解为日记账并予以记账，因此最终用户无需担心这一点。应用程序重复使用我们在前面章节中讨论过的相同记账程序。
- en: 'Let''s look at how the documents and journals tie together by drawing the table
    and transaction scheme for this:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过绘制这个表格和事务方案来了解文档和日记是如何联系在一起的：
- en: '![Sales and purchasing](img/0365EN_06_03.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![销售和采购](img/0365EN_06_03.jpg)'
- en: The first step is creating the document. When we create this **Sales Document**
    (**Sales Header** and **Sales Line**), nothing is posted. We are only entering
    the information into the system that can be changed at any time.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是创建文档。当我们创建这个**销售文档**（**销售抬头**和**销售行**）时，没有任何事物被过账。我们只是在系统中输入可以随时更改的信息。
- en: When we start the **Codeunit Sales-Post (80)**, the system will create all the
    journals for us and post them. When we sell an item, the system will create an
    **Item Journal Line**, and when we sell a resource, the system creates a **Resource
    Journal Line**, and so on.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们启动**代码单元 Sales-Post（80）**时，系统将为我们创建所有日记并过账。当我们销售一个项目时，系统将创建一个**项目日记行**，当我们销售一个资源时，系统创建一个**资源日记行**，依此类推。
- en: The **Invoice Posting buffer** is used to create the entries in the **General
    Journal Line**. We already discussed this feature in [Chapter 3](ch03.html "Chapter 3. Financial
    Management"), *Financial Management*.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '**发票过账缓冲区**用于在**总账分录行**中创建条目。我们已经在[第3章](ch03.html "第3章. 财务管理") *财务管理* 中讨论了这一功能。'
- en: 'Microsoft Dynamics NAV allows us to create four different kinds of posted sales
    documents: invoices, shipments, credit memos, and return receipts. We will discuss
    all these types later in this chapter.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV允许我们创建四种不同类型的已过账销售文档：发票、发货、贷项通知和退货收据。我们将在本章后面讨论所有这些类型。
- en: Transaction mirroring
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 事务镜像
- en: The unique concept of sales and purchase in Microsoft Dynamics NAV is the mirroring
    of the transaction structure. Once we understand how the sales transactions fit
    together, it will be easy to understand the structure of a purchase.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV中销售和采购的独特概念是事务结构的镜像。一旦我们了解了销售交易是如何相互关联的，理解采购的结构就会变得容易。
- en: 'Let''s demonstrate this by comparing the first fields in **Table 37 Sales Line**
    and **Table 39 Purchase Line**, as shown in the following screenshot:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过比较**表37销售行**和**表39采购行**中的第一个字段来演示这一点，如下面的截图所示：
- en: '![Transaction mirroring](img/0365EN_06_04.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![事务镜像](img/0365EN_06_04.jpg)'
- en: The fields in both tables are equally numbered and serve the same process even
    though they use different terminology, for example, field 18, **Qty. to Ship**
    (sale) and **Qty. To Receive** (purchase).
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这两个表使用不同的术语，但它们的字段编号相同，服务于相同的过程，例如，字段18，**要发货数量**（销售）和**要接收数量**（采购）。
- en: Some fields are different because they don't make sense to be in both processes,
    for example, **Unit Price (LCY)** (field 31) in purchase and **Customer Price
    Group** (field 42) in sales.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 一些字段是不同的，因为它们在两个流程中都没有意义，例如，采购中的**单价（本位币）**（字段31）和销售中的**客户价格组**（字段42）。
- en: The purchase process also uses the same posting methodology. The purchase header
    (38) and purchase line (39) tables are posted using the codeunit Purch.-Post (90)
    in the purchase receipt, invoice, credit memo, and return shipment documents.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 采购流程也使用相同的过账方法。采购抬头（38）和采购行（39）表在采购收货、发票、贷项通知和退货单据中使用代码单元 Purch.-Post（90）进行过账。
- en: Let's have a closer look at the sales process.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更详细地看看销售流程。
- en: Sales
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 销售
- en: The sales process supports six document types that are normalized into two tables,
    sales header (36) and sales line (37).
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 销售流程支持六种文档类型，这些类型被归入两个表中，即销售抬头（36）和销售行（37）。
- en: 'Each process can have its own Number Series and has a special card and list
    page, but they all share the same business logic. Let''s discuss the document
    types:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 每个流程都可以有自己的编号序列，并且拥有一个特殊的卡片和列表页面，但它们都共享相同的企业逻辑。让我们讨论一下文档类型：
- en: '**Quote**: When a customer would like to know the terms and conditions of making
    a purchase, we can make a quote. This will show all the calculations such as pricing
    and VAT.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**报价**：当客户想要了解购买条款和条件时，我们可以制作报价单。这将显示所有计算，例如定价和增值税。'
- en: '**Blanket Order**: This is a pre-order status. When used, we have an agreement
    with the customer without knowing the exact shipment date.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**框架订单**：这是一种预订单状态。当使用时，我们与客户达成协议，但不知道确切的发货日期。'
- en: '**Order**: This is used for the actual order document.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**订单**：这是实际订单文档的用途。'
- en: '**Invoice**: This can be used in two ways; directly, without a sales order
    if the company only invoices directly on G/L Accounts, or we can use the invoices
    to invoice one or more shipments.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**发票**：这可以有两种用法；直接使用，如果没有销售订单，如果公司只在总账科目上直接开票，或者我们可以使用发票来开票一个或多个装运。'
- en: '**Credit Memo**: We can use a credit memo when we credit on a G/L Account.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**贷项通知单**：当我们对总账科目进行贷记时，可以使用贷项通知单。'
- en: '**Return Order**: If a customer returns an item, we can use a return order
    to reverse the inventory process.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**退货订单**：如果客户退货，我们可以使用退货订单来逆转库存流程。'
- en: Orders
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 订单
- en: 'The main process is the order. The other document types are designed to support
    this. Sales orders can be created directly or via a quote or blanket order. There
    are two differences between a quote and a blanket order:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 主要流程是订单。其他文档类型是为了支持这一流程而设计的。销售订单可以直接创建，也可以通过报价或总订单创建。报价和总订单之间有两个区别：
- en: Quotes can only be fully transferred into a sales order, not in parts. For example,
    a blanket order of 100 items can be split into 10 deliveries of 10 items with
    different shipping dates.
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报价只能完全转移到销售订单中，不能分批。例如，100件的总订单可以分成10次发货，每次10件，不同的发货日期。
- en: A customer with a quote has the possibility to say yes or no. When the answer
    is no, there will be no transaction. Therefore, quotes are not used in the supply
    and demand calculation, as we discussed in the previous chapter. A blanket order
    is a real order. The customer should eventually purchase the complete quantity
    that was agreed. Therefore, the blanket orders are used in the supply and demand
    calculation.
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 拥有报价的客户有说“是”或“否”的可能性。当答案是“否”时，将不会有交易。因此，正如我们在上一章中讨论的那样，报价不用于供需计算。总订单是一个真实订单。客户最终应该购买之前同意的完整数量。因此，总订单用于供需计算。
- en: Quote to order and blanket order to order
  id: totrans-46
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 报价到订单和总订单到订单
- en: Although the quotes and blanket to orders are stored in the same table, the
    records are physically deleted from the table and inserted using another document
    type. This is done in codeunits sales-quote to order (86) and blanket sales order
    to order (87).
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然报价和总订单存储在同一个表中，但记录实际上是物理删除并使用另一种文档类型插入的。这是在代码单元销售报价到订单（86）和总销售订单到订单（87）中完成的。
- en: When comparing these codeunits in compare tools, such as Beyond Compare or Araxis,
    we can see that there is a lot of similarity. They both create a new sales order.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 当在比较工具（如 Beyond Compare 或 Araxis）中比较这些代码单元时，我们可以看到它们有很多相似之处。它们都创建一个新的销售订单。
- en: Quote to order
  id: totrans-49
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 报价到订单
- en: When moving a quote to an order, the complete quote is copied and then deleted.
    A quote can be created from an opportunity in CRM as we discussed in [Chapter
    4](ch04.html "Chapter 4. Relationship Management"), *Relationship Management*.
    Therefore, the opportunity is updated when this happens.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 当将报价移动到订单时，完整的报价会被复制然后删除。报价可以从CRM中的机会创建，正如我们在[第4章](ch04.html "第4章。关系管理")“关系管理”中讨论的那样。因此，当这种情况发生时，机会会被更新。
- en: Blanket order to order
  id: totrans-51
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 总订单到订单
- en: A blanket order can be moved in parts. Therefore, business logic is implemented
    to calculate the remaining quantity. There is no link between blanket orders and
    CRM and it is also not possible to create a blanket order from a quote.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 总订单可以分批移动。因此，业务逻辑被实现来计算剩余数量。总订单与CRM之间没有链接，也无法从报价中创建总订单。
- en: Creating a new sales order
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建新的销售订单
- en: In order to understand the examples in this chapter, we will discuss the most
    important fields of the sales order. A sales document contains one header and
    multiple lines.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 为了理解本章的示例，我们将讨论销售订单最重要的字段。销售文档包含一个表头和多个行。
- en: While the sales header table contains more static registration of information,
    the sales line has more real business logic, such as price calculation, inventory
    availability, and VAT. We will discuss how this business logic is normalized.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然销售表头表包含更多静态信息登记，但销售行有更多真实业务逻辑，例如价格计算、库存可用性和增值税。我们将讨论这种业务逻辑是如何规范化的。
- en: '![Creating a new sales order](img/0365EN_06_05.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![创建新的销售订单](img/0365EN_06_05.jpg)'
- en: Sales header
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 销售表头
- en: All document types are uniquely numbered. The primary key fields of the sales
    header table are **Document Type** and **No.**.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 所有文档类型都有唯一的编号。销售表头表的主键字段是**文档类型**和**编号**。
- en: Tip
  id: totrans-59
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: It is very useful to use Number Series code that makes sense to the end users,
    for example, SO13-0012 for sales order 12 in the year 2013 and SQ14-0312 for sales
    quote 312 for 2014.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 使用对最终用户有意义的数字序列代码非常有用，例如，2013年的销售订单12为SO13-0012，2014年的销售报价312为SQ14-0312。
- en: 'The sales document contains the following two different customer no. fields:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 销售单据包含以下两个不同的客户编号字段：
- en: '**Sell-to Customer No.**: This is the primary customer no. field, which defines
    the customer who requested the order to be created. This customer number is used
    to calculate the discounts.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**销售客户编号**：这是主要客户编号字段，它定义了请求创建订单的客户。此客户编号用于计算折扣。'
- en: '**Bill-to Customer No.**: By default, the **Sell-to Customer No.** will also
    receive the invoice. By changing this field to another customer, this will make
    the invoice print out containing other customer details.'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**账单客户编号**：默认情况下，**销售客户编号**也将收到发票。通过将此字段更改为另一个客户，这将使包含其他客户详细信息的发票打印出来。'
- en: 'A sales document contains some dates that are used for different purposes:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 销售单据包含一些用于不同目的的日期：
- en: '**Posting Date**: This date is used for posting to the various ledgers'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**过账日期**：此日期用于过账到各种分类账'
- en: '**Document Date**: This date is used for the accounts receivable'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文档日期**：此日期用于应收账款'
- en: '**Shipment Date**: This date is for the calculation or the inventory availability'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**发货日期**：此日期用于计算或库存可用性'
- en: '**Due Date**: This date is the last date at which the bill-to customer is expected
    to pay the invoice'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**到期日期**：这是账单客户预期支付发票的最后日期'
- en: Sales lines
  id: totrans-69
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 销售行
- en: Each sales document can contain an almost unlimited number of sales lines. By
    default, the sales lines are numbered 10000, 20000, 30000, and so on.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 每个销售单据可以包含几乎无限数量的销售行。默认情况下，销售行编号为10000、20000、30000，依此类推。
- en: 'The numbering is done using the `AutoSplitKey` property on the sales line page
    and the increment cannot be changed. When a user inserts new records between two
    existing lines, the program will calculate the new number to be exactly between
    the old values, for example, 10000, 15000, 17500, 18750, 19375, 19687, 19843,
    19921, 19960, 19980, 19990, 19995, 19997, 19998, 19999, and 20000\. If there is
    no more room, the system will generate a runtime error message, as shown in the
    following screenshot:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 编号使用销售行页面上的`AutoSplitKey`属性进行，增量不能更改。当用户在两个现有行之间插入新记录时，程序将计算新的编号，使其正好位于旧值之间，例如，10000、15000、17500、18750、19375、19687、19843、19921、19960、19980、19990、19995、19997、19998、19999和20000。如果没有更多空间，系统将生成一个运行时错误消息，如下面的截图所示：
- en: '![Sales lines](img/0365EN_06_06.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![销售行](img/0365EN_06_06.jpg)'
- en: Master data options
  id: totrans-73
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 主数据选项
- en: 'A sales line can contain a reference to six types of master data defined by
    the **Type** field. These types are: **Text** (blank option), **G/L Account**,
    **Item**, **Resource**, **Fixed Asset**, and **Charge** (item).'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 销售行可以包含对由**类型**字段定义的六种主数据类型的引用。这些类型是：**文本**（空白选项）、**总账科目**、**项目**、**资源**、**固定资产**和**费用**（项目）。
- en: The type that we specify here determines which journal will be used later when
    we post this sales document. However, each line can contain financial information,
    which will be processed to the general ledger via the posting buffer table.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在这里指定的类型决定了在过账此销售单据时将使用哪个日记账。然而，每行都可以包含财务信息，这些信息将通过过账缓冲表处理到总账。
- en: In the next chapter, we will discuss how to add a new type to this process.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将讨论如何向此过程添加新类型。
- en: Sales line fields
  id: totrans-77
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 销售行字段
- en: 'To create a new sales line and start the important business logic in Microsoft
    Dynamics NAV, we need to know about the following fields:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建新的销售行并启动Microsoft Dynamics NAV中的重要业务逻辑，我们需要了解以下字段：
- en: '**Type**: This defines the master data type the sales line uses and eventually
    the journal that will be used during posting'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**类型**：这定义了销售行使用的和最终在过账期间使用的日记账'
- en: Note
  id: totrans-80
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: When the **Type** field changes after the sales line was created, the record
    is cleared and the fields get their default values.
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在创建销售行后，如果**类型**字段发生变化，则记录将被清除，字段将获取其默认值。
- en: '**No.**: This is the actual reference to the unique number of the master data
    type that is used'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**编号**：这是对所使用的主数据类型唯一编号的实际引用'
- en: Note
  id: totrans-83
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: When the **No.** field is changed, the previous quantity is used to recreate
    the sales line with the new master data.
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当**编号**字段更改时，将使用之前的数量使用新主数据重新创建销售行。
- en: '**Quantity**: This is used to calculate the sales amounts for the invoicing
    and in the case of an item, and also the physical quantity of the changes in inventory'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数量**：用于计算发票的销售额以及物品的情况，以及库存变化的实际数量'
- en: '**Outstanding Quantity**, **Qty. to Invoice**, and **Qty. to Ship**: These
    fields are designed to use for partial shipping and invoicing of an order'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**未清数量**、**待发票数量**和**待发货数量**：这些字段设计用于部分发货和发票订单'
- en: '**Unit Price** and **Unit Cost (LCY)**: The fields are used to calculate the
    sales amount and profit'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**单价**和**单位成本（本位币）**：这些字段用于计算销售额和利润'
- en: '**Line Discount %** and **Line Discount Amount**: These fields are used to
    determine the discounts'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**行折扣百分比**和**行折扣金额**：这些字段用于确定折扣'
- en: Validation flow
  id: totrans-89
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 验证流程
- en: The sales line table has a specific validation flow of functions that is important
    to understand before making changes to the table. This flow is based on the normal
    way an end user creates a sales line.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在更改表之前，理解销售行表中的特定验证流程函数非常重要。此流程基于最终用户创建销售行的正常方式。
- en: To create a sales line, only four fields are populated and the line is ready
    to use. After setting the type and choosing a no., the end user types in the **Quantity**
    field and if necessary, the **Unit Price** field.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建销售行，只需填充四个字段，行就准备好使用。在设置类型并选择编号后，最终用户在**数量**字段中输入，如果需要，还可以在**单价**字段中输入。
- en: Let's analyze the C/AL code in the `OnValidate` trigger of the three fields
    that can calculate the sales line.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们分析`OnValidate`触发器中的C/AL代码，这些字段可以计算销售行。
- en: Note
  id: totrans-93
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: When changing these C/AL routines, make sure to use the *Test near*, *Test far*,
    *Do it*, and *Clean up* methods that we discussed in [Chapter 1](ch01.html "Chapter 1. Introduction
    to Microsoft Dynamics NAV"), *Introduction to Microsoft Dynamics NAV*.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 当更改这些C/AL程序时，请确保使用我们在[第1章](ch01.html "第1章。Microsoft Dynamics NAV简介")中讨论的*测试附近*、*测试远程*、*执行*和*清理*方法，*Microsoft
    Dynamics NAV简介*。
- en: No. | field 6
  id: totrans-95
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 编号 | 字段6
- en: 'The C/AL code in the `OnValidate` trigger starts by doing the initial testing,
    if the change is allowed. After this, the record is cleared and the old values
    for the **No.** field and **Quantity** fields are applied, as follows:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '`OnValidate`触发器中的C/AL代码首先进行初始测试，以确定更改是否允许。之后，记录被清除，并应用**编号**字段和**数量**字段的旧值，如下所示：'
- en: '[PRE0]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Then, the sales line inherits the values from the sales header, if required,
    and the date fields are calculated, as follows:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，如果需要，销售行从销售头继承值，并计算日期字段，如下所示：
- en: '[PRE1]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Tip
  id: totrans-100
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: The sales header information is not present in the sales line when an end user
    picks a value for the **No.** field. We cannot use the customer information for
    table relations.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 当最终用户为**编号**字段选择值时，销售行中不存在销售头信息。我们不能使用客户信息进行表关系。
- en: When this is done, we see a `CASE` statement where the master data is acquired.
    This would be the place where we would move newly added fields from master data
    to the sales line table.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 当完成这项操作后，我们会看到一个`CASE`语句，其中获取了主数据。这将是我们将新添加的字段从主数据移动到销售行表的地方。
- en: '[PRE2]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: When this is done, the quantities are calculated and the unit price is calculated.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 当完成这项操作后，将计算数量和单价。
- en: '[PRE3]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The latter is very important for our analysis. After this function, other code
    is executed but this is not important for this example.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 后者是分析中非常重要的。在此函数之后，将执行其他代码，但这对于本例来说并不重要。
- en: Quantity | field 15
  id: totrans-107
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 数量 | 字段15
- en: 'Just like the **No.** field, the **Quantity** field also first checks whether
    the change is allowed. When this is done, the following section of C/AL code is
    important:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 就像**编号**字段一样，**数量**字段首先检查更改是否允许。当完成这项操作后，以下C/AL代码部分很重要：
- en: '[PRE4]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: In the preceding C/AL code, we should notice again the `UpdateUnitPrice` function
    and also the validation of the `Line Discount %` field.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的C/AL代码中，我们应再次注意`UpdateUnitPrice`函数以及`行折扣百分比`字段的验证。
- en: Unit price | field 22
  id: totrans-111
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 单价 | 字段22
- en: 'This field has little C/AL code. When changing the unit price manually, the
    C/AL code will trigger the `Line Discount %` field:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 此字段有很少的C/AL代码。当手动更改单价时，C/AL代码将触发`行折扣百分比`字段：
- en: '[PRE5]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Before going to this field, let's first have a look at the `UpdateUnitPrice`
    function we noticed earlier in the **Quantity** and **No.** field.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在进入此字段之前，让我们首先看看我们在**数量**和**编号**字段中注意到的`UpdateUnitPrice`函数。
- en: UpdateUnitPrice
  id: totrans-115
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: UpdateUnitPrice
- en: 'The `UpdateUnitPrice` function executes the following C/AL code:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '`UpdateUnitPrice`函数执行以下C/AL代码：'
- en: '[PRE6]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: After doing the checks, the sales price calculation routines we discussed in
    [Chapter 2](ch02.html "Chapter 2. A Sample Application"), *A Sample Application*,
    are executed. This is codeunit Sales Price Calc. Mgt. 7000.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行检查后，我们在[第2章](ch02.html "第2章。一个示例应用")“一个示例应用”中讨论的销售价格计算例程被执行。这是销售价格计算管理代码单元7000。
- en: When this is done, it validates the field Unit Price that we already analyzed.
    This leads us to one single point; the `OnValidate` trigger of Line Discount %.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 当这样做之后，它验证了我们已经分析过的单价字段。这引导我们到一个单独的点；行折扣百分比的`OnValidate`触发器。
- en: Line Discount % | field 27
  id: totrans-120
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 行折扣百分比 | 字段27
- en: 'The C/AL code in this `OnValidate` trigger first calculates the line discount
    amount based on the unit price and then starts the `UpdateAmounts` function, as
    follows:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在此`OnValidate`触发器中的C/AL代码首先根据单价计算行折扣金额，然后开始执行`UpdateAmounts`函数，如下所示：
- en: '[PRE7]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: UpdateAmounts
  id: totrans-123
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: UpdateAmounts
- en: The `UpdateAmounts` function completes the creation of the sales line and this
    is where our quest ends.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '`UpdateAmounts`函数完成了销售行的创建，这也是我们的探索结束的地方。'
- en: The two most important other functions that are executed in this function are
    the `UpdateVATAmounts` for VAT calculation and the credit limit check for the
    customer in `CustCheckCreditLimit.SalesLineCheck(Rec)`.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在此函数中执行的两个最重要的其他功能是用于增值税计算的`UpdateVATAmounts`和用于客户信用额度的`CustCheckCreditLimit.SalesLineCheck(Rec)`的信用额度检查。
- en: VAT calculation
  id: totrans-126
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增值税计算
- en: The VAT calculation in Microsoft Dynamics NAV is not normalized in one application
    area but redeveloped everywhere. This makes VAT calculation one of the most complex
    application areas to make changes to.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV中的增值税计算没有在一个应用程序区域中规范化，而是在每个地方重新开发。这使得增值税计算成为更改最复杂的应用程序区域之一。
- en: Code cloning
  id: totrans-128
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 代码克隆
- en: The VAT calculation is not only done in the sales line, purchase line, and general
    journal line table, but also in more specific function tables such as the service
    line. This is done by making a full copy of the C/AL code.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 增值税计算不仅发生在销售行、采购行和总账行表中，还发生在更具体的函数表中，如服务行。这是通过复制整个C/AL代码来完成的。
- en: This phenomenon is known as code cloning in computer science. Although code
    cloning simplifies application design, it is considered bad practice and should
    be avoided at all times. In this case, it would have been better if VAT would
    have been calculated in a generic engine.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 这种现象在计算机科学中被称为代码克隆。尽管代码克隆简化了应用程序设计，但它被认为是不良实践，应始终避免。在这种情况下，如果增值税在通用引擎中进行计算会更好。
- en: It is therefore highly recommended not to change VAT calculation in Microsoft
    Dynamics NAV.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，强烈建议不要更改Microsoft Dynamics NAV中的增值税计算。
- en: Tip
  id: totrans-132
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: If VAT calculation is required in a customized solution, it can be done using
    the general journal line as a temporary table. By populating the necessary fields
    and starting the calculation, we can use the results without copying the VAT calculation
    to our own solution.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在定制解决方案中需要增值税计算，可以使用总账行作为临时表来完成。通过填写必要的字段并开始计算，我们可以使用结果，而无需将增值税计算复制到我们自己的解决方案中。
- en: Invoicing
  id: totrans-134
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 开票
- en: In Microsoft Dynamics NAV, a sales order can be shipped and invoiced directly
    from the document.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中，销售订单可以直接从文档中发货和开票。
- en: However, not all companies have a combined shipping and invoicing process. Some
    companies ship the goods first and send the invoice later, most of the time using
    combined invoicing.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，并非所有公司都有合并的发货和开票流程。一些公司先发货，然后发送发票，大多数情况下使用合并开票。
- en: Prepayments
  id: totrans-137
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 预付款
- en: Besides separating the invoice moment from the shipping moment, Microsoft Dynamics
    NAV also allows a prepayment process. This prepayment process is designed to work
    on top of the normal invoicing process. This means it does not replace the invoice
    but instead creates an extra invoice.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 除了将开票时刻与发货时刻分开外，Microsoft Dynamics NAV还允许预付款流程。这个预付款流程旨在在正常开票流程之上工作。这意味着它不会替换发票，而是创建一个额外的发票。
- en: '![Prepayments](img/0365EN_06_07.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![预付款](img/0365EN_06_07.jpg)'
- en: This invoice is not created in codeunit sales-post (80) but in codeunit sales-post
    prepayments (461).
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 这张发票不是在代码单元销售过账（80）中创建的，而是在销售过账预付款（461）中创建的。
- en: Note
  id: totrans-141
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Using prepayments in Microsoft Dynamics NAV will always generate a minimum of
    two invoices per sales order.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中使用预付款将始终为每个销售订单生成至少两张发票。
- en: When the order is eventually invoiced, the prepayment invoice is deducted from
    the invoice amount.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 当订单最终开票时，预付款发票会从发票金额中扣除。
- en: Tip
  id: totrans-144
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: The design of this solution by Microsoft teaches us and demonstrates that to
    generate a posted sales invoice, it is not specifically necessary to start codeunit
    sales-post 80.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 微软设计的此解决方案教会我们并展示了，为了生成已过账的销售发票，并不特别需要从代码单元销售-过账80开始。
- en: Combined invoicing
  id: totrans-146
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 合并开票
- en: Combined invoicing of shipments can be done manually or using a batch report.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 货物合并开票可以手动完成或使用批量报告。
- en: Manual
  id: totrans-148
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 手动
- en: To manually combine shipments on a sales invoice, we can use the **Sales-Get
    Shipment Codeunit (64)**.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 要在销售发票上手动合并运输，我们可以使用**销售-获取运输代码单元（64）**。
- en: This codeunit can be started from the actions on a sales invoice subpage (47)
    and displays the sales shipment lines that are not yet completely invoiced.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 此代码单元可以从销售发票子页（47）上的操作启动，并显示尚未完全开票的销售运输行。
- en: '![Manual](img/0365EN_06_08.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![手动](img/0365EN_06_08.jpg)'
- en: The C/AL code, however, is not completely within the codeunit; the process starts
    in the codeunit and runs the page. The page then again starts a function in the
    codeunit.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，C/AL代码并不完全在代码单元内；过程从代码单元开始，并运行页面。然后页面再次在代码单元中启动一个功能。
- en: '![Manual](img/0365EN_06_09.jpg)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![手动](img/0365EN_06_09.jpg)'
- en: Batch
  id: totrans-154
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 批量
- en: The Combine Shipments report (295) can be used to create one invoice for multiple
    shipments in batch. It works in a similar way as the Combine Invoice report we
    created in [Chapter 2](ch02.html "Chapter 2. A Sample Application"), *A Sample
    Application*.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 合并运输报告（295）可以用于批量创建多个运输的单一发票。它的工作方式与我们创建的合并发票报告类似，见[第2章](ch02.html "第2章。一个示例应用")，*一个示例应用*。
- en: The C/AL code that creates the sales line for the invoice is normalized and
    used in both codeunit sales-get shipment (64) and combine shipments report (295).
    The function is located in the sales shipment line table (111) and is called `InsertInvLineFromShptLine`.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 创建发票销售行的C/AL代码已标准化，并在代码单元销售-获取运输（64）和合并运输报告（295）中均使用。该功能位于销售运输行表（111）中，并命名为`InsertInvLineFromShptLine`。
- en: Note
  id: totrans-157
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: To enable combined shipments, the Boolean field Combine Shipments (87) should
    be set to **Yes** in the customer table. This value is inherited into the sales
    header for the sales order document.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 要启用合并运输，客户表中的布尔字段合并运输（87）应设置为**是**。此值将继承到销售订单文档的销售表头中。
- en: Credit memo and return orders
  id: totrans-159
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 信用 memo和退货订单
- en: The credit memo and return order document types are used to reverse the order
    process.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 信用 memo和退货订单文档类型用于撤销订单流程。
- en: Purchasing
  id: totrans-161
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 采购
- en: Before we can ship the items we sold, we first need to purchase or produce them.
    We discussed the production process in the previous chapter, so let's focus on
    the purchasing process.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们能够发货我们销售的商品之前，我们首先需要购买或生产它们。我们在上一章中讨论了生产过程，所以让我们专注于采购过程。
- en: 'Technically, the sales and purchase process are mirrored transactions and the
    application design is similar. The purchase header table has the same document
    types: quote, order, invoice, credit memo, blanket order, and return order, and
    the same posting process.'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 技术上，销售和采购流程是镜像交易，应用程序设计类似。采购表头具有相同的文档类型：报价、订单、发票、信用memo、总订单和退货订单，以及相同的过账过程。
- en: So instead of going into the similarities, we will discuss the differences.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们不会讨论相似之处，而是讨论不同之处。
- en: Resources
  id: totrans-165
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 资源
- en: 'In Microsoft Dynamics NAV, it is not possible to purchase resources. When we
    take a closer look at the **Type** field (5), we can see that the option is left
    blank:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中，无法购买资源。当我们仔细查看**类型**字段（5）时，我们可以看到选项留空：
- en: '![Resources](img/0365EN_06_10.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![资源](img/0365EN_06_10.jpg)'
- en: Drop shipments
  id: totrans-168
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 降价运输
- en: When selling items that are not in the inventory, it is possible to purchase
    the items from a vendor and have them directly shipped to the customer. This process
    is called drop shipments.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 当销售不在库存中的商品时，可以从供应商处购买商品并将它们直接运送给客户。这个过程称为降价运输。
- en: This process can be handled manually and using the requisition worksheet.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 此过程可以手动处理，并使用需求工作表。
- en: Manual
  id: totrans-171
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 手动
- en: 'To create a drop shipment manually, the purchase order should first be created
    using the **Sell-to Customer No.** from the corresponding sales order as the shipping
    address:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 要手动创建降价运输，应首先使用从相应销售订单的**销售至客户编号**作为运输地址创建采购订单：
- en: '![Manual](img/0365EN_06_11.jpg)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![手动](img/0365EN_06_11.jpg)'
- en: When this is done, we can start the codeunit Purch.-Get Drop Shpt. (76) from
    **ACTIONS** on the purchase order. This function will show a list of all sales
    orders for this **Sell-to Customer No.** regardless of whether drop shipment is
    possible.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 当这样做后，我们可以从采购订单上的**操作**中的代码单元 Purch.-Get Drop Shpt. (76) 开始。此功能将显示所有针对此**销售客户编号**的销售订单列表，无论是否可以进行直送。
- en: 'If we select a sales order without sales lines that are marked for drop shipment,
    we get the following error message:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们选择一个没有标记为直送的销售行的销售订单，我们会得到以下错误消息：
- en: '![Manual](img/0365EN_06_12.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![手册](img/0365EN_06_12.jpg)'
- en: After retrieving the sales information, the sales line and purchase line table
    are connected to each other by populating the **Purchase Order No.**, **Purch.
    Order Line No.**, **Sales Order No.**, and **Sales Order Line No.** fields.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在检索销售信息后，销售行和采购行表通过填充**采购订单编号**、**采购订单行编号**、**销售订单编号**和**销售订单行编号**字段相互连接。
- en: '![Manual](img/0365EN_06_13.jpg)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![手册](img/0365EN_06_13.jpg)'
- en: These fields are numbered 71 and 72 in the sales line and purchase line table.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 这些字段在销售行和采购行表中编号为71和72。
- en: Requisition worksheet
  id: totrans-180
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 需求工作表
- en: 'We introduced the requisition worksheet in the previous chapter when we discussed
    the planning process. The requisition worksheet can also be used for the **Drop
    Shipment** functionality:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们讨论计划过程时，我们在上一章介绍了需求工作表。需求工作表也可以用于**直送**功能：
- en: '![Requisition worksheet](img/0365EN_06_14.jpg)'
  id: totrans-182
  prefs: []
  type: TYPE_IMG
  zh: '![需求工作表](img/0365EN_06_14.jpg)'
- en: This will start the Get Sales Orders report (698), which will filter on all
    sales lines marked for drop shipment and creates a line in the requisition worksheet
    table.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 这将启动获取销售订单报告（698），它将过滤所有标记为直送的销售行，并在需求工作表表中创建一行。
- en: This line can be processed by carrying out the action messages. This function
    will also connect the sales order to the purchase order using fields 71 and 72.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 这行可以通过执行操作消息来处理。此功能还将通过字段71和72将销售订单连接到采购订单。
- en: Note
  id: totrans-185
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The C/AL code for manual drop shipment and using the requisition worksheet is
    not normalized (code cloning). This means that changes done in one method should
    also be done in the other method and maintained twice.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 手动直送和使用需求工作表的自定义AL代码没有规范化（代码克隆）。这意味着在一个方法中做的更改也应该在另一个方法中执行，并且需要维护两次。
- en: Document releasing and approval process
  id: totrans-187
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 文档发布和批准流程
- en: Within the sales and purchase document process, there is a workflow available
    for releasing and approving a document. This is taken care of by a single status
    field and two processes.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 在销售和采购文档流程中，有一个用于发布和批准文档的工作流程。这由一个状态字段和两个流程来处理。
- en: Status
  id: totrans-189
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 状态
- en: 'The **Status** field (120) in the sales header and purchase header table indicates
    the status of the process. There are four options: **Open**, **Released**, **Pending
    Approval**, and **Pending Prepayment**.'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 销售表头和采购表头中的**状态**字段（120）表示流程的状态。有四个选项：**开放**、**发布**、**待批准**和**待预付款**。
- en: Two of these status fields, **Open** and **Released**, are mandatory to use.
    **Pending Approval** and **Pending Prepayment** are optional.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 这两个状态字段，**开放**和**发布**，是必须使用的。**待批准**和**待预付款**是可选的。
- en: We have already discussed prepayments earlier in this chapter.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在本章前面已经讨论了预付款。
- en: Releasing a document
  id: totrans-193
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 发布文档
- en: Before a document can be posted, it is mandatory to release it. This is done
    by the codeunits Release Sales Document (414) and Release Purchase Document (415).
    These codeunits are, as you may have guessed, almost identical.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 在可以过账之前，必须发布文档。这是通过代码单元发布销售文档（414）和发布采购文档（415）来完成的。如您所猜，这些代码单元几乎完全相同。
- en: 'The codeunit performs a number of tests before setting the status to **Released**.
    Let''s discuss some of these checks:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在将状态设置为**发布**之前，代码单元执行了多项测试。让我们讨论一些这些检查：
- en: 'A typical example of Test Near, the customer number should not be blank:'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测试近似的典型例子，客户编号不应为空：
- en: '[PRE8]'
  id: totrans-197
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'There should be at least one sales line with a `Quantity`:'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 至少应该有一条销售行带有“数量”：
- en: '[PRE9]'
  id: totrans-199
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'When the testing is done, some final calculations are implemented. These calculations
    are document calculations that span over the individual sales lines:'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测试完成后，实施一些最终计算。这些计算是跨越各个销售行的文档计算：
- en: '[PRE10]'
  id: totrans-201
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The following codeunit calculates the invoice discount:'
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以下代码单元计算发票折扣：
- en: '[PRE11]'
  id: totrans-203
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: At the end of the releasing process, the VAT calculation is completed.
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在发布流程结束时，完成增值税计算。
- en: Releasing a document also calculates the **Amount** and **Amount Including VAT**
    fields on the sales line.
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发布文档也会计算销售行上的**金额**和**含税金额**字段。
- en: Manual versus automatic releasing
  id: totrans-206
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 手动与自动发布
- en: 'By default, Microsoft Dynamics NAV releases the document automatically. The
    posting codeunits sales-post (80) and purchase-post (90) contain the following
    C/AL code:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Microsoft Dynamics NAV会自动发布文档。发布代码单元销售-post（80）和采购-post（90）包含以下C/AL代码：
- en: '[PRE12]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: This code temporarily releases the document by starting the release codeunit
    but then sets the status back to **Open**, modifies the records, and commits the
    transaction. Then, the status is set to **Released**.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 此代码通过启动发布代码单元临时发布文档，然后将状态设置回**Open**，修改记录并提交事务。然后，状态被设置为**已发布**。
- en: Whenever there is an error afterwards, the status will still be **Open** since
    that was the status before the `COMMIT`.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 无论之后出现任何错误，状态仍然将是**Open**，因为那是`COMMIT`之前的状态。
- en: Document approval
  id: totrans-211
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档审批
- en: On top of the release process is a document approval workflow. This feature
    is designed to work on top of the functionality we already discussed and is optional.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 在发布过程之上是一个文档审批工作流。这个功能是为在我们已经讨论的功能之上运行的，是可选的。
- en: Deleting sales and purchase documents
  id: totrans-213
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 删除销售和采购文档
- en: During the life cycle of our application, many documents will be created. There
    might come a day when this exceeds the point where some maintenance is required.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们应用程序的生命周期中，将创建许多文档。可能会有这样一天，当这些文档超过需要维护的点时。
- en: Data deletion
  id: totrans-215
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据删除
- en: 'In the **IT Administration** section of the **Departments Role Center**, we
    can find a **Data Deletion** section, which is designed for IT administrators
    to clean up data, as shown in the following screenshot:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 在**部门角色中心**的**IT管理**部分，我们可以找到一个**数据删除**部分，它是为IT管理员清理数据而设计的，如下面的截图所示：
- en: '![Data deletion](img/0365EN_06_15.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![数据删除](img/0365EN_06_15.jpg)'
- en: When a sales order is invoiced using **Get Shipment Lines** or **Combined Invoicing**,
    the sales order is not automatically deleted, nor are completely handled blanket
    orders.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用**获取发货行**或**合并开票**对销售订单进行开票时，销售订单不会被自动删除，也不会完全处理批量订单。
- en: Leaving old orders in the database may lead to large tables. Since these document
    tables are heavily inserted and modified throughout the working day by many people,
    this may lead to unnecessary overhead in the database.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 在数据库中保留旧订单可能会导致大表。由于这些文档表在整天的许多人的操作中频繁插入和修改，这可能会导致数据库中不必要的开销。
- en: Deletion of shipments and invoices
  id: totrans-220
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 删除发货和发票
- en: Microsoft Dynamics NAV allows users to delete posted shipments and invoices
    when they are printed.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV允许用户在打印时删除已发布的发货和发票。
- en: '![Deletion of shipments and invoices](img/0365EN_06_16.jpg)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![删除发货和发票](img/0365EN_06_16.jpg)'
- en: Although it should be considered carefully, it might be necessary for some companies
    to periodically clean up this data. Most companies never look at the shipments
    once the items are delivered to their customers.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然应该仔细考虑，但对于某些公司来说，定期清理这些数据可能是必要的。大多数公司在将项目交付给客户后，永远不会查看发货。
- en: Cleaning up these tables will have a positive impact on the performance and
    maintainability of your system if it reaches the size of roughly 50-100 GB.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这些表的大小达到大约50-100 GB，清理这些表将对系统的性能和可维护性产生积极影响。
- en: Tip
  id: totrans-225
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: When designing business analysis reports, never use data from the sales shipment
    header or line table since they might get deleted. Always use the ledger entry
    tables instead.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 在设计业务分析报告时，永远不要使用销售发货表头或行表中的数据，因为它们可能会被删除。始终使用总账分录表。
- en: Inventory management
  id: totrans-227
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 库存管理
- en: In Microsoft Dynamics NAV, inventory is kept for items in locations using **Item
    Ledger Entries** and **Value Entries**. On top of this, we can use **Stock Keeping
    Units** to have different inventory settings per item, location, and variant.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中，库存是通过**项目分录**和**价值分录**在位置上保持的。在此基础上，我们可以使用**库存单位**为每个项目、位置和变体设置不同的库存设置。
- en: 'Let''s start by looking at the design patterns of the inventory in Microsoft
    Dynamics NAV:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从查看Microsoft Dynamics NAV中库存的设计模式开始：
- en: '![Inventory management](img/0365EN_06_19.jpg)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![库存管理](img/0365EN_06_19.jpg)'
- en: Keeping inventory can be extended with the use of warehouse management. This
    is designed to run on top of the **Basic Item Inventory** functionality.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用仓库管理可以扩展库存的保持。这是在**基本项目库存**功能之上运行的。
- en: Items
  id: totrans-232
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 项目
- en: The item table hosts the master data for inventory management like a G/L Account
    does for financial management.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 项目表存储库存管理的母数据，就像总账账户对财务管理所做的那样。
- en: '![Items](img/0365EN_06_20.jpg)'
  id: totrans-234
  prefs: []
  type: TYPE_IMG
  zh: '![物品](img/0365EN_06_20.jpg)'
- en: In this table, we can do the set up for each individual item such as pricing,
    inventory and production strategies, and tracking options.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个表中，我们可以为每个单独的项目进行设置，例如定价、库存和生产策略，以及跟踪选项。
- en: Locations
  id: totrans-236
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 位置
- en: The location table defines which level of inventory management is done. A location
    can either be a physical warehouse somewhere or a part of a warehouse, if one
    warehouse uses different warehouse strategies.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 位置表定义了执行哪种级别的库存管理。一个位置可以是某个地方的物理仓库，或者是一个仓库的一部分，如果使用不同的仓库策略。
- en: 'If we look at the **Location Card**, we see what we can set up:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们查看**位置卡**，我们会看到我们可以设置的内容：
- en: '![Locations](img/0365EN_06_21.jpg)'
  id: totrans-239
  prefs: []
  type: TYPE_IMG
  zh: '![位置](img/0365EN_06_21.jpg)'
- en: 'Let''s see these settings in detail:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们详细看看这些设置：
- en: '**General**: Here, we can specify the physical location of the warehouse. We
    can also specify **Use As In-Transit**. When this is specified, we can only use
    transfer orders to move inventory to this location.'
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**通用**：在这里，我们可以指定仓库的物理位置。我们还可以指定**使用在途**。当指定了这一点时，我们只能使用调拨订单将库存移动到这个位置。'
- en: '**Warehouse**: On this tab, we specify which level of warehouse management
    functionality we want to use. If everything is left blank, no warehouse entries
    are created when this location is used.'
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仓库**：在这个选项卡中，我们指定想要使用哪种级别的仓库管理功能。如果一切留空，当使用此位置时，不会创建任何仓库条目。'
- en: '**Bins**: This tab contains the default bins for most inventory activities,
    such as **Receipt** and **Shipment**. These values can be changed when creating
    the warehouse documents.'
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**托盘**：这个选项卡包含大多数库存活动的默认托盘，例如**收货**和**发货**。在创建仓库文件时，这些值可以更改。'
- en: '**Bin Policies**: This tab contains some more advanced options for warehouse
    management.'
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**托盘策略**：这个选项卡包含一些更高级的仓库管理选项。'
- en: Variants
  id: totrans-245
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 变体
- en: Item variants is a powerful feature in Microsoft Dynamics NAV. It enables us
    to split an item into different categories without having to create a new item.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 项目变体是Microsoft Dynamics NAV的一个强大功能。它使我们能够将项目拆分为不同的类别，而无需创建新的项目。
- en: The variant code is maintained in the item ledger entries and used when applying
    them. Let's see an example of how this can be used.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 变体代码在项目账簿条目中维护，并在应用时使用。让我们看看一个例子，看看如何使用它。
- en: 'Our company sells t-shirts. We have three sizes; small, medium, and large,
    and four colors; white, black, red, and blue. This enables us to create the following
    twelve unique variant codes:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 我们公司销售T恤。我们有三种尺寸；小号、中号和大号，以及四种颜色；白色、黑色、红色和蓝色。这使得我们能够创建以下十二种独特的变体代码：
- en: '| Size and color |'
  id: totrans-249
  prefs: []
  type: TYPE_TB
  zh: '| Size and color |'
- en: '| --- |'
  id: totrans-250
  prefs: []
  type: TYPE_TB
  zh: '| --- |'
- en: '| S-WHITE | S-BLACK | S-RED | S-BLUE |'
  id: totrans-251
  prefs: []
  type: TYPE_TB
  zh: '| S-WHITE | S-BLACK | S-RED | S-BLUE |'
- en: '| M-WHITE | M-BLACK | M-RED | M-BLUE |'
  id: totrans-252
  prefs: []
  type: TYPE_TB
  zh: '| M-WHITE | M-BLACK | M-RED | M-BLUE |'
- en: '| L-WHITE | L-BLACK | L-RED | L-BLUE |'
  id: totrans-253
  prefs: []
  type: TYPE_TB
  zh: '| L-WHITE | L-BLACK | L-RED | L-BLUE |'
- en: When we purchase or produce these t-shirts, we need to specify the variant code,
    which is inherited into the item ledger entry.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们购买或生产这些T恤时，我们需要指定变体代码，该代码将继承到项目账簿条目中。
- en: If we sell or transfer one of these items, we can specify the same variant code.
    Microsoft Dynamics NAV will then use this variant code when searching for inventory.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们销售或转移这些项目之一，我们可以指定相同的变体代码。Microsoft Dynamics NAV将使用此变体代码在搜索库存时。
- en: '![Variants](img/0365EN_06_22.jpg)'
  id: totrans-256
  prefs: []
  type: TYPE_IMG
  zh: '![变体](img/0365EN_06_22.jpg)'
- en: Stock keeping units
  id: totrans-257
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 库存单位
- en: Sometimes, the same item can have more than one unit cost, replenishment system,
    or production method. To support this, we can use stock keeping units.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，同一项目可以有多个单位成本、补货系统或生产方法。为了支持这一点，我们可以使用库存单位。
- en: 'A stock keeping unit refers to an existing item, location, and variant. These
    three fields are the unique primary key. Let''s see an example of how this can
    be used. Our t-shirts need to have different unit costs. In order to do this,
    we need to create a SKU for each variant we just created:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 库存单位指的是现有的项目、位置和变体。这三个字段是唯一的键。让我们看看一个例子，看看如何使用它。我们的T恤需要有不同的单位成本。为了做到这一点，我们需要为每个我们刚刚创建的变体创建一个SKU：
- en: '![Stock keeping units](img/0365EN_06_23.jpg)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![库存单位](img/0365EN_06_23.jpg)'
- en: When we now create two purchase order lines for the same item with a different
    variant code, we can see that the **Last Direct Cost** is different for each variant.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们现在为同一项目创建两个具有不同变体代码的采购订单行时，我们可以看到每个变体的**最后直接成本**都不同。
- en: Note
  id: totrans-262
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Stockkeeping Units** is a very powerful feature of Microsoft Dynamics. It
    enables you to change the settings for an item after it is created, using variant
    codes for each setting. Make sure the code of the variant is self-explanatory.'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: '**库存单位**是Microsoft Dynamics的一个非常强大的功能。它允许你在创建项目后更改其设置，每个设置使用变体代码。确保变体代码是自解释的。'
- en: Creating a SKU function
  id: totrans-264
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: SKU函数的创建
- en: When an item has many variants and locations, creating the SKU for each combination
    can be quite a challenge. To help in this process, we can use the **Create Stockkeeping
    Unit** report (5706).
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 当一个项目有多种变体和位置时，为每个组合创建SKU可能是一个相当大的挑战。为了帮助这个过程，我们可以使用**创建库存单位**报告（5706）。
- en: 'The newly created SKU will inherit all the necessary fields from the item.
    After this, we can go in and make necessary changes to the individual SKU records:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 新创建的SKU将继承来自项目的所有必要字段。之后，我们可以进入并修改必要的单个SKU记录：
- en: '![Creating a SKU function](img/0365EN_06_24.jpg)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![创建SKU函数](img/0365EN_06_24.jpg)'
- en: Sales pricing
  id: totrans-268
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 销售定价
- en: 'The basic unit price of an item can be set in the **Item** table. This is a
    static field, which is used when a new sales document is created. To use more
    flexible unit prices, we can use the **Sales Prices** and **Sales Discounts**
    functionality:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 项目的基准单价可以在**项目**表中设置。这是一个静态字段，用于创建新的销售文档时。为了使用更灵活的单价，我们可以使用**销售价格**和**销售折扣**功能：
- en: '![Sales pricing](img/0365EN_06_25.jpg)'
  id: totrans-270
  prefs: []
  type: TYPE_IMG
  zh: '![销售定价](img/0365EN_06_25.jpg)'
- en: More information about pricing can be found in [Chapter 1](ch01.html "Chapter 1. Introduction
    to Microsoft Dynamics NAV"), *Introduction to Microsoft Dynamics NAV*, and [Chapter
    2](ch02.html "Chapter 2. A Sample Application"), *A Sample Application*.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 更多有关定价的信息可以在[第1章](ch01.html "第1章。Microsoft Dynamics NAV 简介")、*Microsoft Dynamics
    NAV 简介*和[第2章](ch02.html "第2章。一个示例应用")、*一个示例应用*中找到。
- en: Item ledger entry application
  id: totrans-272
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 项目账目条目应用
- en: When the inventory is created and used, the system will apply and close positive
    and negative item ledger entries with each other. This enables us to trace inventory.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 当库存被创建和使用时，系统将应用并关闭正负项目账目条目，使它们相互对应。这使得我们能够追踪库存。
- en: The application is saved in **Item Application Entry** table (339). Let's have
    a look at the C/AL code that handles the item application.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 应用被保存在**项目应用条目**表（339）中。让我们看看处理项目应用的C/AL代码。
- en: Item application C/AL routine
  id: totrans-275
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 项目应用C/AL例程
- en: Item application is done in codeunit Item Jnl.-Post Line (22) in the `ApplyItemLedgEntry`
    function. The function starts with checking whether reservations are used. Using
    reservations changes the way inventory application is used. We'll discuss reservations
    later in this chapter.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 项目应用是在代码单元Item Jnl.-Post Line (22)中的`ApplyItemLedgEntry`函数中完成的。该函数从检查是否使用了预留开始。使用预留会改变库存应用的方式。我们将在本章后面讨论预留。
- en: '[PRE13]'
  id: totrans-277
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'If there are no reservations made, the system will start the application code.
    This allows two possibilities: manual application and automatic application.'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有进行预留，系统将启动应用代码。这允许两种可能性：手动应用和自动应用。
- en: Manual application is done when the user populates the **Applies-to Entry**
    field in the item journal line. This is also used when users change the application.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户在项目日记账行中填写**应用到条目**字段时，进行手动应用。这也用于用户更改应用时。
- en: '[PRE14]'
  id: totrans-280
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: In this case, the system checks whether the **Item Ledger Entry** we have specified
    matches the requirements. When the application is done automatically, the system
    will search for the best item ledger entry based on the same requirements.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，系统会检查我们所指定的**项目账目条目**是否符合要求。当应用自动完成时，系统将根据相同的要求搜索最佳的项目账目条目。
- en: '[PRE15]'
  id: totrans-282
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: The actual application entry is created in the `InsertApplEntry` function.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 实际的应用条目是在`InsertApplEntry`函数中创建的。
- en: Requirements to apply an item ledger
  id: totrans-284
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 应用项目账目的要求
- en: 'In order to apply an item ledger entry to another item ledger entry, certain
    requirements should be taken into account. We can read these requirements from
    the C/AL code:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 为了将项目账目条目应用到另一个项目账目条目，需要考虑某些要求。我们可以从C/AL代码中读取这些要求：
- en: The **Item No.** should be the same for both the entries.
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**项目编号**在两个条目中应该是相同的。'
- en: The old item ledger entry should be **Open**. When an item ledger entry is fully
    applied, the Boolean field **Open** is set to **False**.
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 旧的项目账目条目应该是**开放**的。当一个项目账目条目完全应用后，布尔字段**开放**被设置为**False**。
- en: The variant code and location code should be the same.
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 变体代码和位置代码应该是相同的。
- en: The Boolean field **Positive** should have a reverse sign. This results in the
    limitation of not being able to apply one negative entry to another negative entry.
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 布尔字段**正数**应该有一个相反的符号。这导致无法将一个负数条目应用于另一个负数条目。
- en: Other requirements are conditional based on system setup. For example, if the
    item uses a **Lot No.** or **Serial No.**, this should also match.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 其他要求基于系统设置的条件。例如，如果项目使用**批号**或**序列号**，这也应该匹配。
- en: When the system has defined the filter, it tries to find the first record. The
    search method depends on the costing method. If the cost method is LIFO, the system
    will try to find the last record in the filter. For all other costing methods,
    it will find the first.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 当系统定义了过滤器时，它会尝试找到第一条记录。搜索方法取决于成本方法。如果成本方法是后进先出法（LIFO），系统将尝试在过滤器中找到最后一条记录。对于所有其他成本方法，它将找到第一条。
- en: We can also see that when using Lot numbers, the application and the costing
    is done within the Lot number.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以看到，当使用批号时，应用程序和成本计算是在批号内完成的。
- en: Value entries
  id: totrans-293
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 价值条目
- en: In Microsoft Dynamics NAV, the physical information for Inventory is stored
    separately from the financial information. This information is stored in a one-to-many
    relation, meaning one Item Ledger Entry can have multiple Value Entries.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中，库存的物理信息与财务信息分开存储。这些信息存储在一对多关系中，这意味着一个项目账簿条目可以有多个价值条目。
- en: This enables us to specify the value information in detail in a time dimension
    and cost type dimension.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 这使我们能够在时间维度和成本类型维度中详细指定价值信息。
- en: Direct cost
  id: totrans-296
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 直接成本
- en: 'Each item ledger entry starts with at least one value entry of the type direct
    cost. This defines the initial value of the inventory. During the inventory lifetime,
    the item ledger entry can get the following four other types of value entries:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 每个项目账簿条目至少以一个直接成本类型的价值条目开始。这定义了库存的初始价值。在库存生命周期内，项目账簿条目可以获取以下四种其他类型的价值条目：
- en: '**Revaluation**: This entry type is used when the item revaluation batch is
    started and the value of the item is different compared to the direct cost.'
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**重估**：当启动项目重估批次且项目的价值与直接成本不同时，使用此条目类型。'
- en: '**Rounding**: Sometimes, the inventory adjustment leads into rounding issues.
    The rounding is stored as a special entry type for traceability.'
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**舍入**：有时，库存调整会导致舍入问题。舍入被存储为特殊条目类型以实现可追溯性。'
- en: '**Indirect Cost**: When **Indirect Cost %** is used on the item card the system
    will create additional value entries for the indirect cost amount.'
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**间接成本**：当在项目卡片上使用**间接成本百分比**时，系统将为间接成本金额创建额外的价值条目。'
- en: '**Variance**: When the item uses standard cost, the difference between the
    invoiced amount and the standard cost is saved as an entry type variance.'
  id: totrans-301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**差异**：当项目使用标准成本时，发票金额与标准成本之间的差异被保存为一种条目类型差异。'
- en: Value entries and general ledger entries
  id: totrans-302
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 价值条目和总账条目
- en: The value entries and general ledger entries are linked through the G/L - Item
    Ledger Relation table (5823). Each general ledger entry is linked to one or more
    value entries. This enables traceability and helps auditors to analyze the system.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 价值条目和总账条目通过G/L - 项目账簿关系表（5823）相互链接。每个总账条目都链接到一个或多个价值条目。这实现了可追溯性，并有助于审计员分析系统。
- en: Transfer orders
  id: totrans-304
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 调拨单
- en: 'To move inventory from one location to another location, it is possible to
    do a negative and a positive adjustment in the **Item Journal Line**, but we can
    also use a **Transfer Order**, as shown in the following screenshot:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 要将库存从一个位置移动到另一个位置，可以在**项目日记账行**中进行负数和正数的调整，但我们也可以使用**调拨单**，如下面的截图所示：
- en: '![Transfer orders](img/0365EN_06_26.jpg)'
  id: totrans-306
  prefs: []
  type: TYPE_IMG
  zh: '![调拨单](img/0365EN_06_26.jpg)'
- en: The **Transfer Order** creates the item ledger entries for each location and
    maintains the link for the value entries.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: '**调拨单**为每个位置创建项目账簿条目，并维护价值条目的链接。'
- en: This means that if we move 100 items from location blue to green without having
    received the purchase invoice yet, the system will create value entries for the
    moved inventory when the invoice is posted. Let's try this for a new item.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着如果我们从蓝色位置移动100个物品到绿色位置，但尚未收到采购发票，当过账发票时，系统将为移动的库存创建价值条目。让我们尝试一个新的项目。
- en: Example
  id: totrans-309
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 示例
- en: 'The item we will use is **Jeans**. The first step is to create the item as
    follows:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用的项目是**牛仔裤**。第一步是按照以下方式创建项目：
- en: We only define the **No.**, **Description**, **Base UOM**, and the **Posting
    Groups**.
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们只定义**编号**、**描述**、**基本计量单位**和**过账组**。
- en: Now, we create a new purchase order with quantity 10 in location **BLUE**.
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们在**蓝色**位置创建一个数量为10的新采购订单。
- en: We receive the purchase order.
  id: totrans-313
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们收到采购订单。
- en: Using a new transfer order, we move the inventory from **BLUE** to **RED**.
  id: totrans-314
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用新的调拨订单，我们将库存从**蓝色**移动到**红色**。
- en: This will result in five **Item Ledger Entries** with five **Value Entries**
    but the total cost is zero since we have not yet received the purchase invoice.
  id: totrans-315
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将导致五个**项目账务分录**和五个**价值项**，但由于我们尚未收到采购发票，总成本为零。
- en: '![Example](img/0365EN_06_27.jpg)'
  id: totrans-316
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![示例](img/0365EN_06_27.jpg)'
- en: Now, we create a new purchase invoice and get the receipt lines. We use a **Unit
    Cost** of **10**.![Example](img/0365EN_06_28.jpg)
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们创建一个新的采购发票并获取收货行。我们使用**单位成本**为**10**。![示例](img/0365EN_06_28.jpg)
- en: This results in a value entry for the original item ledger entry.
  id: totrans-318
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将导致原始项目账务分录的值项输入。
- en: To create the value entries for the transfers, we need to run the Adjust Cost
    - Item Entries report (795). This results in all item ledger entries having the
    same value entries:![Example](img/0365EN_06_29.jpg)
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了创建调拨的价值项，我们需要运行调整成本 - 项目分录报告（795）。这将导致所有项目账务分录都有相同的价值项：![示例](img/0365EN_06_29.jpg)
- en: Requisition worksheets
  id: totrans-320
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 需求工作表
- en: For trading companies, it is very important to have just enough inventories;
    not too many, not too few. In order to do this, we can use the requisition journals
    together with the reordering policy on the item.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 对于贸易公司来说，拥有刚好足够的库存非常重要；既不多也不少。为了做到这一点，我们可以使用需求日记账以及项目上的重新订购策略。
- en: Reordering policy
  id: totrans-322
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 重新订购策略
- en: 'The reordering policy tells the system how to calculate the moment and the
    quantity for item ordering. Microsoft Dynamics NAV uses the following four different
    reordering policies:'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 重新订购策略告诉系统如何计算项目订购的时机和数量。微软Dynamics NAV使用以下四种不同的重新订购策略：
- en: '**Fixed Reorder Qty.**: Each time we run the requisition journal, the system
    will purchase the same, fixed quantity of items. This quantity is specified in
    the **Reorder Quantity** field.'
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**固定重新订购数量**：每次我们运行需求日记账时，系统都将购买相同、固定的数量。此数量在**重新订购数量**字段中指定。'
- en: '**Maximum Qty.**: The system will purchase as many items to meet the value
    of the **Maximum Inventory** field.'
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最大数量**：系统将购买尽可能多的项目以满足**最大库存**字段的值。'
- en: '**Order**: For each sales order, a purchase order will be created. This automatically
    enables the reservation process for this item.'
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**订单**：对于每个销售订单，将创建一个采购订单。这自动启用了此项目的预留过程。'
- en: '**Lot-for-Lot**: This option will calculate the required inventory necessary
    to deliver the outstanding sales orders.'
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**批次**：此选项将计算交付未完成销售订单所需的必要库存。'
- en: The quantity is calculated in the codeunit Inventory Profile Offsetting (99000854)
    in the `CalcReorderQty` function.
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 数量是在代码单元库存配置偏移（99000854）中的`CalcReorderQty`函数中计算的。
- en: Extending the reordering policy
  id: totrans-329
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 扩展重新订购策略
- en: The ordering policy algorithms in Microsoft Dynamics NAV are very static and
    some trading companies need more flexibility.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 微软Dynamics NAV中的订购策略算法非常静态，一些贸易公司需要更多的灵活性。
- en: One example is seasonal and depends on the weather. Toy stores need extra inventory
    during Christmas and garden tool stores have their peak in spring. During these
    peaks, the delivery times and availability is also different compared to the other
    times of the year.
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 一个例子是季节性的，取决于天气。玩具店在圣诞节期间需要额外的库存，而园艺工具店在春季达到顶峰。在这些高峰期间，与一年中的其他时间相比，交货时间和可用性也不同。
- en: Virtual inventory
  id: totrans-332
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 虚拟库存
- en: An upcoming trend in trading companies is virtual inventory. This is the inventory
    that we do not control but is available to sell to our customers. The computer
    industry uses this frequently. Everyone can start a website for computer equipment
    and use the inventory of large wholesale companies.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 贸易公司的一个新兴趋势是虚拟库存。这是我们无法控制的库存，但可以出售给我们的客户。计算机行业经常使用这种方法。每个人都可以为计算机设备创建一个网站，并使用大型批发公司的库存。
- en: Note
  id: totrans-334
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: In order for this to work, the information should always be real time and reliable.
    In Microsoft Dynamics NAV, we could solve this using web services.
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使这可行，信息应该是实时且可靠的。在微软Dynamics NAV中，我们可以通过使用Web服务来解决这个问题。
- en: Warehouse management
  id: totrans-336
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 仓库管理
- en: With inventory management, we can use the locations to see where the inventory
    is. For some trading companies, this is good enough but some would like to be
    more specific in where the items are in the warehouse.
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 使用库存管理，我们可以使用位置来查看库存在哪里。对于一些贸易公司来说，这已经足够好了，但有些人希望更具体地了解物品在仓库中的位置。
- en: For this, we can use the **Warehouse Management Systems** (**WMS**) functionality
    in Microsoft Dynamics NAV. WMS enables us to specify zones and bins within each
    location.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 对于此，我们可以使用Microsoft Dynamics NAV中的**仓库管理系统**（**WMS**）功能。WMS使我们能够指定每个位置内的区域和货位。
- en: Another feature in warehouse management is the possibility of combining sales
    shipments and purchase receipts in warehouse documents. Using these documents,
    warehouse employees can pick or put away for more than one order at the same time
    resulting in a more efficient way of doing logistics.
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 仓库管理中的另一个功能是将销售发货单和采购收货单合并到仓库文件中的可能性。使用这些文件，仓库员工可以同时为多个订单拣选或入库，从而实现更高效的物流方式。
- en: Warehouse strategy levels
  id: totrans-340
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 仓库策略级别
- en: Warehouse management can be used and implemented from very simple to highly
    advanced. To demonstrate the application design of WMS in Microsoft Dynamics NAV,
    we will discuss the following five possible levels of implementation. For each
    level, we will show the table and posting models.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 仓库管理可以从非常简单到高度复杂地使用和实施。为了展示Microsoft Dynamics NAV中WMS的应用设计，我们将讨论以下五个可能的实施级别。对于每个级别，我们将展示表格和过账模型。
- en: '**Bin Code**: Using this field in the sales and purchase document enables the
    system to start creating warehouse entries.'
  id: totrans-342
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**货位码**：在销售和采购单据中使用此字段可以使系统开始创建仓库条目。'
- en: '**Warehouse Receipt and Shipment**: This allows us to combine sales shipments
    and purchase receipts in one warehouse document. We cannot use the **Pick and
    Put-Away** activities.'
  id: totrans-343
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仓库收货和发货**：这允许我们将销售发货单和采购收货单合并到一个仓库文件中。我们无法使用**拣选和入库**活动。'
- en: '**Warehouse Put-Away and Pick**: For each purchase receipt or sales shipment,
    we can create a **Put-Away or Pick** journal.'
  id: totrans-344
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仓库入库和拣选**：对于每一张采购收货单或销售发货单，我们都可以创建一个**入库或拣选**日记账。'
- en: '**Warehouse Receipt and Shipment + Use Put-away Worksheet**: This allows us
    to implement a real two-step warehouse process and receive the items on a staging
    location and creating put-away documents to move the items to their storage location
    in the warehouse.'
  id: totrans-345
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仓库收货和发货 + 使用入库工作表**：这允许我们实施真正的两步仓库流程，并在临时位置接收物品，并创建入库单据将物品移动到仓库的存储位置。'
- en: '**Directed Put-Away and Pick**: This is the full option of WMS functionality
    in Microsoft Dynamics NAV. We use **Receipts**, **Shipments**, **Put-aways**,
    and **Picks**. Microsoft Dynamics NAV will suggest the **Bin Codes**. We can also
    use **Zones**, **Cross Docking**, and so on.'
  id: totrans-346
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**定向入库和拣选**：这是Microsoft Dynamics NAV中WMS（仓库管理系统）功能的完整选项。我们使用**收货单**、**发货单**、**入库单**和**拣选单**。Microsoft
    Dynamics NAV将建议**货位码**。我们还可以使用**区域**、**中转码头**等。'
- en: Location setup
  id: totrans-347
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 位置设置
- en: The setup options in the Location table (14) enable or disable the WMS options
    in Microsoft Dynamics NAV. This is done on the **Warehouse** tab, as shown in
    the following screenshot. Each level requires a special combination of settings.
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 位置表（14）中的设置选项启用或禁用Microsoft Dynamics NAV中的WMS选项。这是在**仓库**选项卡上完成的，如下面的截图所示。每个级别都需要一个特殊的设置组合。
- en: '![Location setup](img/0365EN_06_30.jpg)'
  id: totrans-349
  prefs: []
  type: TYPE_IMG
  zh: '![位置设置](img/0365EN_06_30.jpg)'
- en: 'Let''s have a look at the different levels:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看不同的级别：
- en: '**Level 1**: Enable Bin Mandatory'
  id: totrans-351
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第1级**：启用货位强制'
- en: '**Level 2**: Enable Require Receive, Require Shipment, and Bin Mandatory'
  id: totrans-352
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第2级**：启用接收、发货和货位强制'
- en: '**Level 3**: Enable Require Put-away, Require Pick, and Bin Mandatory'
  id: totrans-353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第3级**：启用入库、拣选和货位强制'
- en: '**Level 4**: Enable Require Receive, Shipment, Require Put-away, Require Pick,
    Bin Mandatory, and Use Put-away Worksheet'
  id: totrans-354
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第4级**：启用接收、发货、入库、拣选、货位强制和入库工作表使用'
- en: '**Level 5**: Enable Require Receive, Require Shipment, Require Put-away, Require
    Pick, Bin Mandatory, and Directed Put-away and Pick'
  id: totrans-355
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第5级**：启用接收、发货、入库、拣选、货位强制和定向入库和拣选'
- en: Warehouse employees
  id: totrans-356
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 仓库员工
- en: Before we can start, the current user should be set up as a warehouse employee.
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们开始之前，当前用户应被设置为仓库员工。
- en: '![Warehouse employees](img/0365EN_06_31.jpg)'
  id: totrans-358
  prefs: []
  type: TYPE_IMG
  zh: '![仓库员工](img/0365EN_06_31.jpg)'
- en: This can be done by creating a new record in the Warehouse Employee table (7301).
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以通过在仓库员工表中创建一个新记录（7301）来完成。
- en: Note
  id: totrans-360
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Each user can be a warehouse employee in each location and can only do warehouse
    actions in the locations that they are assigned to.
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 每个用户都可以在每个位置成为仓库员工，并且只能在他们被分配的位置执行仓库操作。
- en: Bin code | level 1
  id: totrans-362
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 货位代码 | 第1级
- en: The starting level of implementing WMS is using the Bin table. This is done
    by enabling the **Bin Mandatory** field on the location. The **Bin Code** field
    is available in all the necessary tables, such as Purchase Line, Sales Line, and
    Item Journal Line.
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 实施WMS的起始级别是使用货位表。这是通过在位置上启用**货位强制**字段来完成的。**货位代码**字段在所有必要的表中都可用，例如采购行、销售行和项目日记账行。
- en: When the **Bin Code** is used, codeunit Item Jnl.-Post Line (22) will create
    a Warehouse Journal Line and start the Whse. Jnl.-Register Line Codeunit (7301).
    This will result in the creation of Warehouse Entries (7312) and a Bin Content
    (7302).
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用**货位代码**时，代码单元Item Jnl.-Post Line (22)将创建一个仓库日记账行并启动Whse. Jnl.-Register Line代码单元（7301）。这将导致创建仓库条目（7312）和货位内容（7302）。
- en: Example
  id: totrans-365
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 示例
- en: 'We will create a new location, **ORANGE**, with a bin of **BIN1**. The location
    uses the **Bin Mandatory** option, as shown in the following screenshot:'
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将创建一个新的位置，**ORANGE**，并使用**BIN1**作为货位。该位置使用**货位强制**选项，如下面的截图所示：
- en: '![Example](img/0365EN_06_32.jpg)'
  id: totrans-367
  prefs: []
  type: TYPE_IMG
  zh: '![示例](img/0365EN_06_32.jpg)'
- en: Bin Mandatory
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 货位强制
- en: In a new purchase order, we can now select this new Bin Code and post a receipt.
    The system now creates a new record in the **Bin Content** table, which enables
    us to see the created **Warehouse Entries**.
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 在一个新的采购订单中，我们现在可以选择这个新的货位代码并过账收货。系统现在在**货位内容**表中创建一个新的记录，使我们能够查看创建的**仓库条目**。
- en: '![Example](img/0365EN_06_33.jpg)'
  id: totrans-370
  prefs: []
  type: TYPE_IMG
  zh: '![示例](img/0365EN_06_33.jpg)'
- en: Bin content
  id: totrans-371
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 货位内容
- en: Whenever a Bin is used for the first time, Microsoft Dynamics NAV will create
    a **Bin Content** record. A **Bin Content** record is neither master data nor
    a ledger entry or document. It is a special kind of table in the philosophy of
    Microsoft Dynamics NAV.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 每次首次使用货位时，Microsoft Dynamics NAV将创建一个**货位内容**记录。**货位内容**记录既不是主数据也不是账簿条目或文档。它是Microsoft
    Dynamics NAV哲学中的一种特殊类型的表。
- en: 'The C/AL code for the **Bin Content** handling can be found in codeunit Whse.
    Jnl.-Register Line (7301). To see which Bins are used for an item at any moment,
    we can open the **Bin Content** from the **Item Card**, as shown in the following
    screenshot:'
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 处理**货位内容**的C/AL代码可以在代码单元Whse. Jnl.-Register Line (7301)中找到。要查看在任何时刻用于项目的哪些货位，我们可以从**项目卡**打开**货位内容**，如下面的截图所示：
- en: '![Bin content](img/0365EN_06_34.jpg)'
  id: totrans-374
  prefs: []
  type: TYPE_IMG
  zh: '![Bin内容](img/0365EN_06_34.jpg)'
- en: The warehouse entries can be displayed by clicking on the **Quantity (Base)**
    field.
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过单击**数量（基础）**字段来显示仓库条目。
- en: Receipt and shipment | level 2
  id: totrans-376
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 收货和发货 | 第2级
- en: When we enable **Require Receive** and **Require Shipment** in the location,
    we can start using the warehouse receipt and shipment documents. These documents
    allow us to receive or ship multiple purchase or sales orders in one document.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们在位置上启用**要求接收**和**要求发货**时，我们可以开始使用仓库收货和发货文档。这些文档允许我们在一份文档中接收或发货多个采购或销售订单。
- en: 'Let''s have a look at how this is done in the application:'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看在应用程序中是如何操作的：
- en: '![Receipt and shipment | level 2](img/0365EN_06_35.jpg)'
  id: totrans-379
  prefs: []
  type: TYPE_IMG
  zh: '![收货和发货 | 第2级](img/0365EN_06_35.jpg)'
- en: Warehouse request
  id: totrans-380
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 仓库请求
- en: All warehouse documents start with a record Warehouse Request table (5765).
    These records are created when a sales or purchase document is released.
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 所有仓库文档都以仓库请求表（5765）的记录开始。这些记录在销售或采购文档发布时创建。
- en: 'The warehouse receipt or shipment can be created in the following three ways:'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 仓库收货或发货可以通过以下三种方式创建：
- en: Using the **Create Whse. Receipt** or **Create Whse. Shipment** option from
    the purchase and sales order
  id: totrans-383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用从采购和销售订单的**创建仓库收货**或**创建仓库发货**选项
- en: Using the Get Source Documents report (5723)
  id: totrans-384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用**获取源文档**报告（5723）
- en: Using the **Get Source Documents** option on the **Warehouse Receipt** or **Shipment
    Card**
  id: totrans-385
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用**仓库收货**或**发货卡**上的**获取源文档**选项
- en: The first two options will create a new warehouse document for each sales or
    purchase document. The latter allows us to combine orders in one warehouse document.
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 前两种选项将为每个销售或采购文档创建一个新的仓库文档。后者允许我们在一个仓库文档中合并订单。
- en: '![Warehouse request](img/0365EN_06_36.jpg)'
  id: totrans-387
  prefs: []
  type: TYPE_IMG
  zh: '![仓库请求](img/0365EN_06_36.jpg)'
- en: Limitations
  id: totrans-388
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 局限性
- en: Using only the warehouse receipt and shipment document is basically just adding
    one layer on top of the sales and purchase document. The posting routines **Whse.
    Post Shipment (5763)** and **Whse. Post Receipt (5760)**, do not actually post
    something to the warehouse; they just write back the Bin code to the Sales Line
    and Purchase Line table. Technically, this uses the same C/AL code as level 1.
  id: totrans-389
  prefs: []
  type: TYPE_NORMAL
  zh: 仅使用仓库收据和发货单据基本上只是在销售和采购单据上增加了一层。过账程序**Whse. Post Shipment (5763)**和**Whse. Post
    Receipt (5760)**实际上并没有将东西过账到仓库；它们只是将货位代码写回到销售行和采购行表中。技术上，这使用了与第1级相同的C/AL代码。
- en: 'We can see how this is done by looking at the `InitSourceDocumentLines` function
    of, for example, Codeunit Whse. Post Receipt (5760):'
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过查看例如Codeunit Whse. Post Receipt (5760)的`InitSourceDocumentLines`函数来了解这是如何完成的：
- en: '[PRE16]'
  id: totrans-391
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: When the source tables are updated, the system creates a normal purchase receipt
    or sales shipment using codeunits sales-post (80) and Purch. Post (90).
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 当源表更新时，系统会使用代码单元销售-post (80)和Purch. Post (90)创建一个正常的采购收据或销售发货。
- en: Put-away and Pick | level 3
  id: totrans-393
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 搬运和拣选 | 第3级
- en: Instead of creating a warehouse receipt or shipment, we can also directly create
    a Put-away or Pick from the sales or purchase order.
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 除了创建仓库收据或发货单据外，我们还可以直接从销售或采购订单创建搬运或拣选。
- en: To enable this, we need to activate the **Require Put-away** and **Require Pick**
    options on the **Location Card**.
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 要启用此功能，我们需要在**位置卡片**上激活**要求搬运**和**要求拣选**选项。
- en: '![Put-away and Pick | level 3](img/0365EN_06_37.jpg)'
  id: totrans-396
  prefs: []
  type: TYPE_IMG
  zh: '![搬运和拣选 | 第3级](img/0365EN_06_37.jpg)'
- en: Warehouse request
  id: totrans-397
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 仓库请求
- en: The warehouse request record is exactly the same as in level 2, but instead
    of creating a warehouse receipt or shipment, the system directly creates a warehouse
    activity header and line.
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 仓库请求记录与第2级完全相同，但系统不是创建仓库收据或发货单，而是直接创建仓库活动头和行。
- en: Warehouse activities
  id: totrans-399
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 仓库活动
- en: 'The warehouse activity header and line table are the internal Microsoft Dynamics
    NAV warehouse documents. There are five types of warehouse activity documents,
    they are as follows:'
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 仓库活动头和行表是内部Microsoft Dynamics NAV仓库文档。有五种类型的仓库活动文档，如下所示：
- en: '**Put-away**: This document is used to move items from the receipt bin to a
    put-away bin. The document is generated from a warehouse receipt.'
  id: totrans-401
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**搬运**：此文档用于将物品从收货货位移动到搬运货位。该文档由仓库收据生成。'
- en: '**Pick**: This document is used to move items from a storage bin to a shipment
    bin. The document is generated from a warehouse shipment.'
  id: totrans-402
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**拣选**：此文档用于将物品从存储货位移动到发货货位。该文档由仓库发货生成。'
- en: '**Movement**: This is an internal document that is used to move items internally
    in the warehouse.'
  id: totrans-403
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**移动**：这是一个内部文档，用于在仓库内部移动物品。'
- en: '**Invt. Put-away**: This document is used to receive items and put them directly
    into the warehouse on their permanent bin. The document is created from a warehouse
    request.'
  id: totrans-404
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Invt. Put-away**：此文档用于接收物品并将它们直接放入仓库的永久货位。该文档由仓库请求创建。'
- en: '**Invt. Pick**: This document is used to ship items directly from the warehouse
    in one step. The document is created from a warehouse request.'
  id: totrans-405
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Invt. Pick**：此文档用于直接从仓库一步发货物品。该文档由仓库请求创建。'
- en: When only using the **Require Put-away** and **Require Pick** option on a location,
    document types **Invt. Put-Away** and **Invt. Pick** are used. This will also
    make sure that the purchase order and sales order will be processed by starting
    codeunit sales-post (80) and Purch. Post (90).
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: 当只在位置上使用**要求搬运**和**要求拣选**选项时，使用文档类型**Invt. Put-Away**和**Invt. Pick**。这将确保采购订单和销售订单将通过启动代码单元销售-post
    (80)和Purch. Post (90)来处理。
- en: Level 2 and level 3 comparison
  id: totrans-407
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第2级和第3级比较
- en: Both level 2 and level 3 setup options are one-step warehouse implementations.
    When receiving an item, we must provide the storage bin where the item will be
    stored until it is sold. There is no additional step.
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 第2级和第3级设置选项都是一步仓库实施。在接收物品时，我们必须提供物品将被存储的存储货位，直到它被售出。没有额外的步骤。
- en: Using the warehouse receipt and shipment documents allows us to combine sales
    and purchase documents on one warehouse document. This cannot be done using direct
    Put-away and Pick. Using direct Put-away and Pick, we can split one sales line
    or purchase line into multiple bins. This cannot be done using warehouse receipt
    and shipment documents.
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 使用仓库收据和发货单据允许我们在一个仓库单据上合并销售和采购单据。这不能通过直接搬运和拣选来完成。使用直接搬运和拣选，我们可以将一个销售行或采购行拆分成多个货位。这不能通过仓库收据和发货单据来完成。
- en: The reason for this is the way the warehouse entries are created. Level 2 uses
    the **Bin** field in the **Item Journal Line** to create the warehouse entries.
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 原因在于仓库入口的创建方式。第2级使用**货位**字段在**项目日记账行**中创建仓库入口。
- en: Using level 3, the warehouse entries are created using codeunit Whse.-Activity-Post
    (7324). The Bin code is not written back into the sales line or purchase line.
    This means we also cannot use the **Bin** code field in the purchase receipt and
    sales shipment documents.
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: 使用第3级，仓库入口是通过代码单元Whse.-Activity-Post（7324）创建的。货位代码不会写回销售行或采购行。这意味着我们也不能在采购收货单和销售发货单的**货位**代码字段中使用。
- en: Level 4 – receipt with Put-away worksheet
  id: totrans-412
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第4级 – 收货与上架工作表
- en: Most warehouses use a two-step receipt and shipment process. The first step
    is receiving the items on a receipt location, which is often close to the unloading
    docks. Then, the items are stored in their warehouse location until they are required
    for the production or sales process. This is step 2.
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数仓库使用两步收货和发货流程。第一步是在收货位置接收物品，这通常靠近卸货码头。然后，物品被存放在其仓库位置，直到需要用于生产或销售过程。这是第二步。
- en: To enable this two-step process, we can combine level 2 and 3 by using the options
    **Require Receive**, **Shipment**, **Put-away and Pick** + **Bin Mandatory** +
    **Use Put-away worksheet** in the **Location Card**.
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: 要启用此两步流程，我们可以通过在**位置卡**中使用**要求接收**、**发货**、**上架和拣选** + **货位强制** + **使用上架工作表**选项来组合第2级和第3级。
- en: This allows us to first perform the warehouse receipt and shipment as discussed
    in level 2\. When we process this document, it will not only post the sales order
    and purchase order but it will also generate a record in the Whse. Put-away Request
    table (7324).
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: 这允许我们首先执行第2级中讨论的仓库收货和发货。当我们处理此文档时，它不仅过账销售订单和采购订单，还会在仓库上架请求表（7324）中生成记录。
- en: '![Level 4 – receipt with Put-away worksheet](img/0365EN_06_38.jpg)'
  id: totrans-416
  prefs: []
  type: TYPE_IMG
  zh: '![第4级 – 收货与上架工作表](img/0365EN_06_38.jpg)'
- en: Whse.- activity register versus whse.-activity-post
  id: totrans-417
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 仓库活动登记簿与仓库活动过账
- en: When the whse. put-away request is processed using the warehouse worksheet,
    it will result in a warehouse activity header and line. In this context, the system
    will use the Put-away and pick document type that we discussed in the previous
    section about level 3.
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用仓库工作表处理仓库上架请求时，它将导致仓库活动表头和行。在这种情况下，系统将使用我们在上一节关于第3级讨论的上架和拣选文档类型。
- en: 'Technically, the documents for level 3 and level 4 are equal, but there are
    the following two differences:'
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: 从技术上讲，第3级和第4级的文档是相同的，但存在以下两个差异：
- en: In a two-step warehouse setup, the items are already in a warehouse entry. This
    means we have to move them. This results in two new warehouse entries but also
    two lines in the warehouse document.
  id: totrans-420
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在两步仓库设置中，物品已经位于仓库入口。这意味着我们必须移动它们。这会导致出现两个新的仓库入口，同时在仓库文档中也有两条记录。
- en: The two-step warehouse documents are not posted but registered. This means that
    the system will only create warehouse entries and no longer updates the sales
    and purchase documents.
  id: totrans-421
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两步仓库文档未过账，而是进行了登记。这意味着系统将只创建仓库入口，而不再更新销售和采购文档。
- en: Level 5 – directed put-away and pick
  id: totrans-422
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第5级 – 指导上架和拣选
- en: Combining warehouse receipts and shipments with put-aways and picks completes
    the table and posting diagram of WMS in Microsoft Dynamics NAV. But there are
    additional options to enrich the functionality.
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: 将仓库收货和发货与上架和拣选结合起来，完成了Microsoft Dynamics NAV中WMS的表格和过账图。但还有其他选项可以丰富功能。
- en: One of these options is directed put-away and pick. When this option is activated,
    the system can and will help us in finding the correct bins for each warehouse
    activity.
  id: totrans-424
  prefs: []
  type: TYPE_NORMAL
  zh: 这些选项之一是指导上架和拣选。当此选项被激活时，系统可以并会帮助我们找到每个仓库活动的正确货位。
- en: Zones and default bins
  id: totrans-425
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 区域和默认货位
- en: Let's start with defining zones and default bins. A zone is a group of bins.
    Usually, they are located near each other physically but more importantly, they
    share some properties.
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从定义区域和默认货位开始。区域是一组货位。通常，它们在物理上彼此靠近，但更重要的是，它们共享一些属性。
- en: For each zone, we need to specify if it is allowed to receive, ship, put-away,
    and pick. This is done in the **Bin Type** list.
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每个区域，我们需要指定是否允许接收、发货、上架和拣选。这可以在**货位类型**列表中完成。
- en: 'When defining the bins, it is recommended to use a logical name such as R-01-001
    for **Receipt** row one shelf one:'
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: 在定义货位时，建议使用逻辑名称，例如R-01-001用于**收货**行第一层第一个：
- en: '![Zones and default bins](img/0365EN_06_39.jpg)'
  id: totrans-429
  prefs: []
  type: TYPE_IMG
  zh: '![区域和默认货位](img/0365EN_06_39.jpg)'
- en: The default bins are set up in the **Location Card** on the **Bin** tab. These
    bins can always be changed on each document.
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: 默认货位是在**位置卡**的**货位**选项卡上设置的。这些货位可以在每个文档中随时更改。
- en: Bin calculation
  id: totrans-431
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 货位计算
- en: 'The bin calculation is done for the put-away documents using templates. This
    template defines the rules for finding the correct bin to store the items:'
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: 货位计算是在使用模板的拣货单文档中进行的。此模板定义了查找正确货位以存储项目的规则：
- en: '![Bin calculation](img/0365EN_06_40.jpg)'
  id: totrans-433
  prefs: []
  type: TYPE_IMG
  zh: '![货位计算](img/0365EN_06_40.jpg)'
- en: 'The find options are stored in the put-away template line table (7308); they
    are as follows:'
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: 查找选项存储在拣货模板行表（7308）中；它们如下所示：
- en: '**Find Fixed Bin**: The system will try to find a bin, which is fixed. A fixed
    bin is usually reserved for a specific item.'
  id: totrans-435
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**查找固定货位**：系统将尝试找到固定的货位。固定货位通常为特定项目预留。'
- en: '**Find Floating Bin**: This will try to find the first available bin.'
  id: totrans-436
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**查找浮动货位**：这将尝试找到第一个可用的货位。'
- en: '**Find Same Item**: This will filter on an available bin that already contains
    this item.'
  id: totrans-437
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**查找相同项目**：这将过滤出已经包含此项目的可用货位。'
- en: '**Find Unit of Measure Match**: This option can be used if parts of the warehouse
    are designed to handle a specific kind of carrier such as Euro or US pallet.'
  id: totrans-438
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**查找单位匹配**：如果仓库的部分区域设计为处理特定类型的载体，例如欧元或美国托盘，则可以使用此选项。'
- en: '**Find Bin w. Less than Min. Qty**: Use this option to find bins that are not
    fully used. If this option is not used with the **Find Same Item**, it might result
    in two items in the same bin.'
  id: totrans-439
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**查找低于最小库存量的货位**：使用此选项查找未完全使用的货位。如果不与**查找相同项目**一起使用此选项，可能会导致同一货位中有两个项目。'
- en: '**Find Empty Bin**: This option will make sure we find an empty bin.'
  id: totrans-440
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**查找空货位**：此选项将确保我们找到空货位。'
- en: 'The C/AL code that handles the bin calculation is located in codeunit create
    put-away (7313). Let''s have a look:'
  id: totrans-441
  prefs: []
  type: TYPE_NORMAL
  zh: 处理货位计算的C/AL代码位于创建拣货单代码单元（7313）中。让我们看看：
- en: '[PRE17]'
  id: totrans-442
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: For each record in the put-away template line table, the system will try to
    find a bin. This means that if the rules of the first template line fail, it will
    use the second template line and so forth.
  id: totrans-443
  prefs: []
  type: TYPE_NORMAL
  zh: 对于拣货模板行表中的每条记录，系统将尝试找到货位。这意味着如果第一个模板行的规则失败，它将使用第二个模板行，依此类推。
- en: The two options `Find Empty Bin` and `Find Floating Bin` eliminate using the
    others. If these are `true`, the system will call the `FindBin` function. For
    the other options, it will use the `FindBinContent` function.
  id: totrans-444
  prefs: []
  type: TYPE_NORMAL
  zh: 两个选项“查找空货位”和“查找浮动货位”消除了使用其他选项的需要。如果这些选项为“true”，系统将调用“FindBin”函数。对于其他选项，它将使用“FindBinContent”函数。
- en: Implementing and customizing warehouse management
  id: totrans-445
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实施和定制仓库管理
- en: Since there are many ways to set up WMS in Microsoft Dynamics NAV, it is very
    important to make the correct decisions at the start of the implementation. Moving
    the system from one strategy to another is quite a challenge.
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: 由于在Microsoft Dynamics NAV中设置WMS有多种方式，因此在实施开始时做出正确的决策非常重要。将系统从一个策略转移到另一个策略是一项相当大的挑战。
- en: It is therefore very important to discuss all possibilities and compare them
    to the way your company works.
  id: totrans-447
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，讨论所有可能性并将它们与您公司的运作方式进行比较非常重要。
- en: Note
  id: totrans-448
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备注
- en: 'A common mistake when implementing WMS software is trying to solve procedural
    issues with a computer system. The simple rule is: "If it does not work without
    a computer system, it will most certainly not work with a computer system".'
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
  zh: 在实施WMS软件时，一个常见的错误是试图用计算机系统解决程序问题。简单规则是：“如果没有计算机系统也能工作，那么使用计算机系统肯定也能工作”。
- en: Customizing and changing WMS should be done very carefully since the data flow
    is very complex, especially for Microsoft Dynamics NAV standards.
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 由于数据流非常复杂，特别是对于Microsoft Dynamics NAV标准，定制和更改WMS应非常谨慎。
- en: Reservations
  id: totrans-451
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 预留
- en: In Microsoft Dynamics NAV, it is possible to do reservations on inventory. This
    can help us manage our inventory more effectively. Let's discuss the reservation
    process with a customer scenario.
  id: totrans-452
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中，可以对库存进行预留。这可以帮助我们更有效地管理库存。让我们通过一个客户场景讨论预留过程。
- en: One of our customer orders 100 black t-shirts size M on January 22, 2015\. Currently,
    we have 120 in our inventory so we can ship them without any problems. The customer
    wants to have them delivered on November 18\. We enter a sales order with the
    shipping date and release the order.
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的一位客户在2015年1月22日订购了100件黑色M码T恤。目前，我们库存中有120件，因此我们可以无任何问题地发货。客户希望他们在11月18日收到。我们输入了发货日期的销售订单并发布了订单。
- en: 'The next day, another customer calls for 40 black t-shirts size M. Our inventory
    is still 120\. This customer wants to have them delivered on May 31\. We enter
    the sales order without a warning. Lastly, we will create a new sales order for
    90 of the same t-shirts with a delivery date on July 25\. Now, we get the following
    error message:'
  id: totrans-454
  prefs: []
  type: TYPE_NORMAL
  zh: 第二天，另一位客户打电话要40件黑色M号T恤。我们的库存仍然是120件。这位客户希望在5月31日收到。我们输入销售订单时没有警告。最后，我们将为90件相同的T恤创建一个新的销售订单，交货日期为7月25日。现在，我们得到以下错误消息：
- en: '![Reservations](img/0365EN_06_41.jpg)'
  id: totrans-455
  prefs: []
  type: TYPE_IMG
  zh: '![预订](img/0365EN_06_41.jpg)'
- en: And if we now go back to the second sales order and re-enter the quantity, we
    get a similar message.
  id: totrans-456
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们现在回到第二个销售订单并重新输入数量，我们会得到一个类似的消息。
- en: Check-avail. period calc.
  id: totrans-457
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 检查可用期计算
- en: 'The reason this happens lies in the way Microsoft Dynamics NAV calculates the
    gross requirement:'
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: 这种情况发生的原因在于Microsoft Dynamics NAV计算总需求的方式：
- en: '![Check-avail. period calc.](img/0365EN_06_42.jpg)'
  id: totrans-459
  prefs: []
  type: TYPE_IMG
  zh: '![检查可用期计算](img/0365EN_06_42.jpg)'
- en: This is a two-step method where first, the requirement is calculated until the
    shipment date of the sales line and secondly, a `Lookahead` function is called
    using a date formula that is defined in the company information table.
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个两步法，首先，需求计算到销售行的发货日期，其次，使用在公司信息表中定义的日期公式调用`Lookahead`函数。
- en: The C/AL code that is used to calculate the `Lookahead` can be found in the
    `QtyAvailabletoPromise` function in codeunit Available to Promise (5790).
  id: totrans-461
  prefs: []
  type: TYPE_NORMAL
  zh: 用于计算`Lookahead`的C/AL代码可以在代码单元“可承诺”中的`QtyAvailabletoPromise`函数中找到（5790）。
- en: '[PRE18]'
  id: totrans-462
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: If this `Lookahead` functionality is not detailed enough, we can start using
    the reservation process.
  id: totrans-463
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这个`Lookahead`功能不够详细，我们可以开始使用预订流程。
- en: Always versus optional reservation
  id: totrans-464
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 始终与可选预订
- en: 'The **Reservation** option can be activated on the item level and customer
    level and can be set to **Never**, **Optional**, and **Always**, as shown in the
    following screenshot:'
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
  zh: '**预订**选项可以在项目级别和客户级别激活，并可以设置为**永不**、**可选**和**始终**，如下面的截图所示：'
- en: '![Always versus optional reservation](img/0365EN_06_43.jpg)'
  id: totrans-466
  prefs: []
  type: TYPE_IMG
  zh: '![始终与可选预订对比](img/0365EN_06_43.jpg)'
- en: 'Let''s see what these options signify:'
  id: totrans-467
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看这些选项的含义：
- en: '**Never**: Reservations on this item or customer are impossible. If the item
    is **Reserve** as **Always** and the **Customer** as **Never**, the item wins.'
  id: totrans-468
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**永远不**：对此项或客户的预订是不可能的。如果该项被**始终**预订，而客户被**永不**预订，则该项获胜。'
- en: '**Optional**: It is possible to reserve items for this customer; however, salespersons
    and warehouse employees can decide to overrule the reservation.'
  id: totrans-469
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可选**：可以为该客户预订项目；然而，销售人员和国库员工可以决定取消预订。'
- en: '**Always**: Shipping is not possible without a proper reservation. If the demand
    is larger than the supply, the salespersons and warehouse employees must make
    manual decisions of who gets what.'
  id: totrans-470
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**始终**：没有适当的预订，无法发货。如果需求大于供应，销售人员和国库员工必须手动决定谁得到什么。'
- en: Reservation entries
  id: totrans-471
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 预订录入
- en: 'Microsoft Dynamics NAV uses the Reservation Entry (337) table to store the
    reservation entries. Reservation entries can be connected to all outstanding documents
    and journals and posted entries. This is done using the following source fields:'
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV使用预订录入（337）表来存储预订录入。预订录入可以连接到所有未结单据和日记账以及过账条目。这是通过以下源字段完成的：
- en: '**Source Type**: This is an integer field representing the table the record
    is linked to, for example, 37 means sales line and 5406, prod. order line.'
  id: totrans-473
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**源类型**：这是一个整数字段，表示记录链接到的表，例如，37表示销售行，5406表示生产订单行。'
- en: '**Source Subtype**: This is an option field, which is linked to the **Document
    Type** field when the record is linked to a sales line, purchase line record,
    or the status of a production order.'
  id: totrans-474
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**源子类型**：这是一个选项字段，当记录与销售行、采购行记录或生产订单的状态相关联时，它与**文档类型**字段相关联。'
- en: '**Source ID**: This is the link to the document no. of the record this line
    is linked to.'
  id: totrans-475
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**源ID**：这是与记录所链接的文档编号的链接。'
- en: '**Source Batch Name**: If the record is linked to a journal, this field represents
    the journal batch name. If this field is used, the source ID is empty and vice
    versa.'
  id: totrans-476
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**源批次名称**：如果记录与日记账相关联，则此字段表示日记账批次名称。如果使用此字段，则源ID为空，反之亦然。'
- en: '**Source Prod. Order Line**: When the record is used for a production order
    line or component, this field represents the production order line number.'
  id: totrans-477
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**源生产订单行**：当记录用于生产订单行或组件时，此字段表示生产订单行号。'
- en: '**Source Ref. No.**: This is an integer field, which is used to link the record
    to a line no. in a document, journal, or the production component. If the line
    is linked to a ledger entry, this field represents the entry no. field.'
  id: totrans-478
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**源参考编号**：这是一个整数字段，用于将记录链接到文档、日记或生产组件中的行号。如果行与账目条目链接，则此字段表示条目编号字段。'
- en: 'There are four types of Reservation Entries in Microsoft Dynamics NAV represented
    by the **Reservation Status** field:'
  id: totrans-479
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中，有四种类型的预留条目，由**预留状态**字段表示：
- en: '**Reservation**: These are real reservation entries, which means that a part
    of the current or future inventory is reserved for a production order or sales
    order. If the item uses the **Always** reservation option, it is not possible
    to work around this. If the reservation is optional, it is possible that someone
    else might still use these items in another process.'
  id: totrans-480
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**预留**：这些是真实的预留条目，这意味着当前或未来的部分库存被预留用于生产订单或销售订单。如果商品使用**始终**预留选项，则无法绕过这一点。如果预留是可选的，则可能有人仍在其他过程中使用这些商品。'
- en: '**Tracking**: This option is used by the **Order Tracking Policy** option in
    Microsoft Dynamics NAV. This is an "underwater" process that can link supply and
    demand automatically. The status **Tracking** means that there is a supply as
    well as a demand.'
  id: totrans-481
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**跟踪**：此选项由Microsoft Dynamics NAV中的**订单跟踪策略**选项使用。这是一个“水下”过程，可以自动链接供需。**跟踪**状态表示存在供应和需求。'
- en: '**Surplus**: This option is used for both item tracking as discussed in [Chapter
    5](ch05.html "Chapter 5. Production"), *Production*, and the Order Tracking policy.
    The records can be identified by using the value of the item tracking field. This
    is set to **None** for Order Tracking policy records and **Serial No.**, **Lot
    No.**, and **Lot** and **Serial No.** for item tracking.'
  id: totrans-482
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**过剩**：此选项用于讨论的[第5章](ch05.html "第5章。生产")、“生产”和订单跟踪策略。可以通过使用项目跟踪字段的值来识别记录。对于订单跟踪策略记录，此设置为**无**，对于项目跟踪，设置为**序列号**、**批号**和**批**以及**序列号**。'
- en: '**Prospect**: When item tracking is used, a prospect reservation record indicates
    an internal journal action, for example, assigning a serial number to an item
    journal line.'
  id: totrans-483
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**潜在客户**：当使用项目跟踪时，潜在客户预留记录表示内部日记操作，例如，将序列号分配给项目日记行。'
- en: Creating a reservation
  id: totrans-484
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建预留
- en: Let's go into the application and create a reservation to see what entries we
    get in the database.
  id: totrans-485
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们进入应用程序并创建一个预留，以查看数据库中的条目。
- en: We will do this using a new item. The item should have a Description, Base Unit
    of Measure, and a Gen. Prod., VAT Prod., and an Inventory Posting Group. The default
    value for **Reserve** is **Optional**, which we will use for this example. The
    default costing method is FIFO, which we will also use.
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用一个新的商品来完成这项操作。该商品应具有描述、基本计量单位和通用生产、增值税产品和库存过账组。**预留**的默认值为**可选**，我们将在此示例中使用它。默认的成本计算方法是FIFO，我们也将使用它。
- en: To demonstrate the real value of reservations, we should create two purchase
    orders with different dates and unit costs. With FIFO, the system would normally
    apply the sales order to the first item ledger entry. We will reserve on the second
    item ledger entry to demonstrate the impact on item costing and application.
  id: totrans-487
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了展示预留的实际价值，我们应该创建两个不同日期和单位成本的销售订单。使用FIFO，系统通常会将销售订单应用于第一个项目账目条目。我们将对第二个项目账目条目进行预留，以展示对项目成本和应用的
    影响。
- en: When this is done, we can create a new sales order with one sales line containing
    the item and half the inventory and select **Reserve** from the **Functions**
    tab.
  id: totrans-488
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当完成这项操作后，我们可以创建一个新的销售订单，包含一个销售行，其中包含商品和一半的库存，并从**功能**选项卡中选择**预留**。
- en: In this screen, we can take a look at the available inventory by clicking on
    **Available to Reserve**:![Creating a reservation](img/0365EN_06_44.jpg)
  id: totrans-489
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此屏幕上，我们可以通过单击**可预留**来查看可用的库存：![创建预留](img/0365EN_06_44.jpg)
- en: Here, we select the second receipt and navigate to **Actions** | **Functions**
    | **Reserve**. Then, we close the screen.
  id: totrans-490
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这里，我们选择第二个收货，导航到**操作** | **功能** | **预留**。然后，我们关闭屏幕。
- en: In **Sales Order Lines**, we can now see the **Reserved Quantity** as **50**:![Creating
    a reservation](img/0365EN_06_45.jpg)
  id: totrans-491
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**销售订单行**中，我们现在可以看到**预留数量**为**50**：![创建预留](img/0365EN_06_45.jpg)
- en: 'Let''s have a look at the **Reservation Entries** created in the database by
    running the table from the **Object Designer**:'
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过从**对象设计器**运行表来查看数据库中创建的**预留条目**：
- en: '![Creating a reservation](img/0365EN_06_46.jpg)'
  id: totrans-493
  prefs: []
  type: TYPE_IMG
  zh: '![创建预订](img/0365EN_06_46.jpg)'
- en: A reservation entry of the type **Reservation** always uses to lines with the
    same entry no. The **Source Type** for the first entry links to the Sales Line
    table (37) and the second uses the Item Ledger Entry Table (32).
  id: totrans-494
  prefs: []
  type: TYPE_NORMAL
  zh: '**预订**类型的预订条目总是使用相同条目编号的两行。第一个条目的**源类型**链接到销售行表（37），第二个使用项目日记账条目表（32）。'
- en: 'We ship and invoice the sales order and look at the **Item Ledger Entries**
    for our item:'
  id: totrans-495
  prefs: []
  type: TYPE_NORMAL
  zh: 我们发货并开具销售订单的发票，查看我们项目的**项目日记账条目**：
- en: '![Creating a reservation](img/0365EN_06_47.jpg)'
  id: totrans-496
  prefs: []
  type: TYPE_IMG
  zh: '![创建预订](img/0365EN_06_47.jpg)'
- en: We see that Microsoft Dynamics NAV has used the second item ledger entry, but
    the cost is **500**, not the **600** from the second entry.
  id: totrans-497
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到微软Dynamics NAV使用了第二个项目日记账条目，但成本是**500**，而不是第二个条目中的**600**。
- en: To correct this, we run the report Adjust Cost - Item Entries (795) and have
    another look at the **Item Ledger Entries** and the **Value Entries** to see that
    it is corrected.
  id: totrans-498
  prefs: []
  type: TYPE_NORMAL
  zh: 为了纠正这个问题，我们运行了“调整成本 - 项目条目”（795）报告，并再次查看**项目日记账条目**和**价值条目**，以确认已经进行了修正。
- en: '![Creating a reservation](img/0365EN_06_48.jpg)'
  id: totrans-499
  prefs: []
  type: TYPE_IMG
  zh: '![创建预订](img/0365EN_06_48.jpg)'
- en: Order tracking policy
  id: totrans-500
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 订单跟踪策略
- en: We have seen that reservation entries are not only used for the reservation
    process of inventory and item tracking but also for balancing supply and demand.
    This is an internal option within Microsoft Dynamics NAV that allows us to link
    inventory internally.
  id: totrans-501
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到预订条目不仅用于库存和项目跟踪的预订过程，还用于平衡供需。这是微软Dynamics NAV内部的一个选项，允许我们内部链接库存。
- en: The entries are used in the supply and demand calculation to create the requisition
    worksheets.
  id: totrans-502
  prefs: []
  type: TYPE_NORMAL
  zh: 这些条目用于供需计算以创建需求工作表。
- en: Example
  id: totrans-503
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 示例
- en: Let's create a copy of our reservation test item to see the differences between
    reservations and item tracking. This new item should have the Order Tracking Policy
    Tracking and Action Msg.
  id: totrans-504
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们复制我们的预订测试项目，以查看预订和项目跟踪之间的差异。这个新项目应该有订单跟踪策略跟踪和操作消息。
- en: We will create two purchase orders with both a quantity of **50** without receiving
    them and create a sales order for the same item with a quantity of **80**.
  id: totrans-505
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将创建两个数量均为**50**的采购订单，但不接收它们，并为相同的项目创建一个数量为**80**的销售订单。
- en: '![Example](img/0365EN_06_49.jpg)'
  id: totrans-506
  prefs: []
  type: TYPE_IMG
  zh: '![示例](img/0365EN_06_49.jpg)'
- en: If we now select **Order Tracking** from the **Sales Line Functions**, we see
    that the system matches supply and demand.
  id: totrans-507
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们现在从**销售行功能**中选择**订单跟踪**，我们会看到系统匹配供需。
- en: 'Let''s have a look at the **Reservation Entries**:'
  id: totrans-508
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看**预订条目**：
- en: '![Example](img/0365EN_06_50.jpg)'
  id: totrans-509
  prefs: []
  type: TYPE_IMG
  zh: '![示例](img/0365EN_06_50.jpg)'
- en: We can see that Microsoft Dynamics NAV is now using the **Surplus** and **Tracking**
    types. The 20 items we have left are not linked to a demand.
  id: totrans-510
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到微软Dynamics NAV现在使用**过剩**和**跟踪**类型。我们剩余的20个项目没有与需求链接。
- en: Let's start the **Requisition Worksheet** for this item and see what Microsoft
    Dynamics NAV can do with this information.
  id: totrans-511
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始为这个项目的**需求工作表**，看看微软Dynamics NAV能利用这些信息做什么。
- en: Replenishment
  id: totrans-512
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 补货
- en: 'Let''s change the reordering policy of the item to **Lot-for-Lot** and run
    the **Requisition Worksheet** for this item:'
  id: totrans-513
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们将项目的重新订购策略改为**批量**，并为该项目运行**需求工作表**：
- en: '![Replenishment](img/0365EN_06_51.jpg)'
  id: totrans-514
  prefs: []
  type: TYPE_IMG
  zh: '![补货](img/0365EN_06_51.jpg)'
- en: This will result in the suggestion to combine both purchase orders into one
    document with a different quantity.
  id: totrans-515
  prefs: []
  type: TYPE_NORMAL
  zh: 这将导致建议将两个采购订单合并为一个不同数量的文档。
- en: '![Replenishment](img/0365EN_06_52.jpg)'
  id: totrans-516
  prefs: []
  type: TYPE_IMG
  zh: '![补货](img/0365EN_06_52.jpg)'
- en: Auto increment
  id: totrans-517
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 自动递增
- en: In Microsoft Dynamics NAV 2013, the Reservation Entry table was redesigned to
    use the Auto increment feature to determine unique numbering. This improves application
    performance and reduces locking.
  id: totrans-518
  prefs: []
  type: TYPE_NORMAL
  zh: 在微软Dynamics NAV 2013中，预订条目表被重新设计，以使用自动递增功能来确定唯一编号。这提高了应用程序的性能并减少了锁定。
- en: Trade in vertical industries
  id: totrans-519
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 垂直行业交易
- en: Microsoft Dynamics NAV is used in many different vertical industries that often
    require specific features. Rather than trying to implement all these features
    in the standard product, Microsoft Dynamics NAV supports the framework and allows
    developers to design and create the vertical features.
  id: totrans-520
  prefs: []
  type: TYPE_NORMAL
  zh: 微软Dynamics NAV被用于许多不同的垂直行业，这些行业通常需要特定的功能。而不是试图在标准产品中实现所有这些功能，微软Dynamics NAV支持框架，并允许开发者设计和创建垂直功能。
- en: For these features, the 80/20 rule applies. Microsoft delivers 80 percent of
    the framework which costs 20 percent of our time to implement. The missing 20
    percent of the functionality is developed costing 80 percent of the budgeted time.
  id: totrans-521
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这些功能，80/20规则适用。Microsoft提供了80%的框架，这需要我们20%的时间来实现。缺失的20%的功能开发需要80%的预算时间。
- en: In this section, we will discuss how Microsoft Dynamics NAV is used for trade
    in five different vertical industries. For each industry, we will discuss two
    specific vertical features and how they could be solved.
  id: totrans-522
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将讨论Microsoft Dynamics NAV在五个不同垂直行业中的使用情况。对于每个行业，我们将讨论两个特定的垂直功能以及它们如何被解决。
- en: Note
  id: totrans-523
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Most industries have solid add-on solutions available designed by certified
    Microsoft Dynamics NAV partners that have been implemented at multiple sites.
    It is highly recommended to look at those add-on solutions instead of reinventing
    the wheel and rewriting an add-on that already exists.
  id: totrans-524
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数行业都有由认证的Microsoft Dynamics NAV合作伙伴设计的可靠的附加解决方案，这些解决方案已在多个地点实施。强烈建议查看这些附加解决方案，而不是重新发明轮子并重写已经存在的附加组件。
- en: Fashion
  id: totrans-525
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 时尚
- en: The fashion industry has trade periods within the seasons. During spring, shops
    need to order the collection for the next winter and during autumn they buy summer
    clothes.
  id: totrans-526
  prefs: []
  type: TYPE_NORMAL
  zh: 时尚行业在季节中有贸易期。在春季，商店需要订购下一个冬季的系列，而在秋季，他们购买夏季服装。
- en: Sales orders
  id: totrans-527
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 销售订单
- en: The sales orders for each collection are created as normal sales orders but
    with a shipment date in the future, sometimes six months or more ahead. When using
    variants, there should be a separate sales line for each variant, meaning, size,
    and color.
  id: totrans-528
  prefs: []
  type: TYPE_NORMAL
  zh: 每个系列的销售订单都作为正常销售订单创建，但发货日期在将来，有时是六个月或更长时间。当使用变体时，应该为每个变体、尺寸和颜色创建单独的销售行。
- en: This can be quite a hassle to enter for sales people, so we could speed this
    up using a template sales line for the main item and hide the individual sizes.
  id: totrans-529
  prefs: []
  type: TYPE_NORMAL
  zh: 对于销售人员来说，输入这些信息可能相当麻烦，因此我们可以使用模板销售行来加快主要物品的输入，并隐藏单个尺寸。
- en: Using a matrix where the *x* axis represents the size and *y* axis the color,
    sales people can quickly enter the quantities. When the matrix is closed, we can
    update the hidden sales lines. These hidden sales lines are used to calculate
    the production orders as discussed in [Chapter 5](ch05.html "Chapter 5. Production"),
    *Production*.
  id: totrans-530
  prefs: []
  type: TYPE_NORMAL
  zh: 使用一个矩阵，其中*x*轴代表尺寸，*y*轴代表颜色，销售人员可以快速输入数量。当矩阵关闭时，我们可以更新隐藏的销售行。这些隐藏的销售行用于计算生产订单，如[第5章](ch05.html
    "第5章。生产")中所述，*生产*。
- en: Reservations
  id: totrans-531
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 预订
- en: When the production orders return from the factory, the warehouse and sales
    people need to decide which customer gets the items first. This can be done using
    the shipment date but that might not be completely fair if one customer orders
    in time, meaning six months ahead, and another customer orders too late with an
    earlier or the same shipment date.
  id: totrans-532
  prefs: []
  type: TYPE_NORMAL
  zh: 当生产订单从工厂返回时，仓库和销售人员需要决定哪个客户先获得这些物品。这可以通过发货日期来完成，但如果一个客户提前下单，即提前六个月，而另一个客户下单太晚，但有更早或相同的发货日期，这可能并不完全公平。
- en: This is where we can start using reservations. The reservations already support
    variants but the auto reserve functionality of Microsoft Dynamics NAV might not
    just do what we like.
  id: totrans-533
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我们开始使用预订的地方。预订已经支持变体，但Microsoft Dynamics NAV的自动预订功能可能并不完全符合我们的期望。
- en: Changing this functionality is a complex task. The C/AL code for AutoReserve
    can be found in codeunit Reservation Management (99000845) but should only be
    changed by experienced developers.
  id: totrans-534
  prefs: []
  type: TYPE_NORMAL
  zh: 更改此功能是一个复杂任务。AutoReserve的C/AL代码位于预订管理代码单元（99000845）中，但应由经验丰富的开发者进行更改。
- en: Fortunately, reservations are layered on top of the normal inventory, production,
    purchase, and sales process. If we change the algorithm, we can remove the current
    reservations and retest the code to see if the newly created reservation entries
    are good. This testing process should be done very carefully, on a dataset that
    is small enough to analyze using Microsoft Excel.
  id: totrans-535
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，预订是建立在正常库存、生产、采购和销售流程之上的。如果我们更改算法，我们可以移除当前的预订并重新测试代码，以查看新创建的预订条目是否良好。这个过程应该非常小心地进行，使用足够小的数据集以便使用Microsoft
    Excel进行分析。
- en: Automotive
  id: totrans-536
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 汽车
- en: Microsoft Dynamics NAV is used by many car dealer companies and garages because
    there are some strong add-on products available for this vertical industry.
  id: totrans-537
  prefs: []
  type: TYPE_NORMAL
  zh: 许多汽车经销商公司和车库使用Microsoft Dynamics NAV，因为该垂直行业有一些强大的附加产品可用。
- en: On top of the normal trade process supported by Microsoft Dynamics NAV, these
    companies have additional business requirements. Let's discuss two of them.
  id: totrans-538
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV支持的正常贸易流程之上，这些公司有额外的业务需求。让我们讨论其中两个。
- en: Vehicle information
  id: totrans-539
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 车辆信息
- en: Each vehicle that is sold needs to be configured and ordered. The configuration
    should be stored in the database for future maintenance and warranty.
  id: totrans-540
  prefs: []
  type: TYPE_NORMAL
  zh: 每辆售出的车辆都需要进行配置和订购。配置应存储在数据库中，以供未来的维护和保修使用。
- en: We can compare this to serial numbers or the lot number information table in
    the standard product. We could create a new master data table called **Vehicle**
    and create a record in this table for each car we configure or sell. The number
    we create for the **Vehicle** can be used as a serial number in the **Item Ledger
    Entry**.
  id: totrans-541
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以将此与标准产品中的序列号或批号信息表进行比较。我们可以创建一个新的主数据表称为**车辆**，并为每辆我们配置或销售的汽车在此表中创建一个记录。我们为**车辆**创建的编号可以用作**项目账簿条目**中的序列号。
- en: For maintenance, we could have a vehicle journal that creates vehicle ledger
    entries each time the car comes back for servicing. This helps us keep track of
    the history and should include information such as mileage. The technical design
    of this solution can be compared to the squash application we created in [Chapter
    2](ch02.html "Chapter 2. A Sample Application"), *A Sample Application*.
  id: totrans-542
  prefs: []
  type: TYPE_NORMAL
  zh: 对于维护，我们可以有一个车辆日志，每次汽车回来进行维修时，都会创建车辆账簿条目。这有助于我们跟踪历史记录，并应包括诸如里程数等信息。这个解决方案的技术设计可以与我们在[第2章](ch02.html
    "第2章。一个示例应用")中创建的“Squash应用”进行比较，*一个示例应用*。
- en: Parts management
  id: totrans-543
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 零件管理
- en: In the automotive industry, using the right part is crucial. Different parts
    can be used on different types of cars and are often even brand independent.
  id: totrans-544
  prefs: []
  type: TYPE_NORMAL
  zh: 在汽车行业，使用正确的部件至关重要。不同的部件可以用于不同类型的汽车，甚至往往是品牌无关的。
- en: Many vendors offer their assortment in digital formats allowing us to create
    interfaces with them. Parts should be defined as items, using standard features
    such as substitutions. As many parts can be expensive and have a low turnover
    speed, keeping them in the inventory can be very expensive, thus a minimum inventory
    should be maintained.
  id: totrans-545
  prefs: []
  type: TYPE_NORMAL
  zh: 许多供应商以数字格式提供他们的产品组合，使我们能够与他们创建接口。应将零件定义为项目，使用标准功能，如替代品。由于许多零件可能价格昂贵且周转速度慢，因此保持库存可能非常昂贵，因此应保持最低库存。
- en: Parts can be connected to vehicle types. For example, a car interior mirror
    could be used for five types of cars. When a service engineer wants to replace
    such a mirror, he/she can use a filtered item list of all available parts.
  id: totrans-546
  prefs: []
  type: TYPE_NORMAL
  zh: 零件可以连接到车辆类型。例如，汽车内部后视镜可以用于五种类型的汽车。当服务工程师想要更换这样的后视镜时，他/她可以使用所有可用零件的过滤项目列表。
- en: Pharmaceuticals/medicines
  id: totrans-547
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 药品/药品
- en: In a pharmacy or at another medicine supplier, it is normal that not just every
    customer is allowed to purchase any item. They cannot sell medicines against cardiac
    arrhythmia to a healthy person.
  id: totrans-548
  prefs: []
  type: TYPE_NORMAL
  zh: 在药店或其他药品供应商处，通常不仅允许每位客户购买任何商品。他们不能向健康人出售治疗心脏心律失常的药品。
- en: Even when someone is allowed to use a certain medication, it is often limited
    to certain doses. People are often insured for the cost of these medicines but
    most insurance companies require a contribution.
  id: totrans-549
  prefs: []
  type: TYPE_NORMAL
  zh: 即使某人被允许使用某种药品，通常也限于特定的剂量。人们通常为这些药品的保险费用投保，但大多数保险公司要求有自付费用。
- en: Medication card
  id: totrans-550
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 药品卡
- en: Microsoft Dynamics NAV does not support item regulation. To support this, we
    should create new functionality that links items to customers but also allows
    us to enter the doses and frequency.
  id: totrans-551
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV不支持项目监管。为了支持这一点，我们应该创建新的功能，将项目链接到客户，同时允许我们输入剂量和频率。
- en: From this template, we could periodically create sales orders and shipments.
    Whenever we ship the medicines, we need to update the template.
  id: totrans-552
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个模板中，我们可以定期创建销售订单和发货单。每次我们发货药品时，都需要更新这个模板。
- en: Contribution invoicing
  id: totrans-553
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 自付费用发票
- en: When customers need to pay a part of the medication as an own contribution,
    we require the system to create two sales invoices for one sales order.
  id: totrans-554
  prefs: []
  type: TYPE_NORMAL
  zh: 当客户需要支付部分药品作为自付费用时，我们需要系统为一份销售订单创建两个销售发票。
- en: This is possible using the standard pre-payment functionality in Microsoft Dynamics
    NAV. We could send a pre-payment invoice to the customer and handle the other
    invoices to the insurance companies using combined invoicing. The pre-payments
    will be automatically deducted from the invoice amount but the value entries on
    the items will remain intact.
  id: totrans-555
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Microsoft Dynamics NAV 中的标准预付款功能，这是可能的。我们可以向客户发送预付款发票，并使用合并开票处理向保险公司开具其他发票。预付款将从发票金额中自动扣除，但项目上的价值条目将保持完整。
- en: However, the standard system does not allow us to create a pre-payment invoice
    to another Bill-to Customer No. This would have to be designed and developed.
  id: totrans-556
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，标准系统不允许我们向另一个“账单至客户编号”创建预付款发票。这需要设计和开发。
- en: Food
  id: totrans-557
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 食品
- en: Where fashion companies have two or three large ordering moments per year where
    customers carefully consider what to order, most food companies have a daily ordering
    process of high volume items.
  id: totrans-558
  prefs: []
  type: TYPE_NORMAL
  zh: 当时尚公司每年有两个或三个大型订购时刻，客户会仔细考虑订购什么时，大多数食品公司都有大量日常订单流程。
- en: This ordering process is often done by phone or fax where the retailer calls
    and tells the call center employees what to ship the next day.
  id: totrans-559
  prefs: []
  type: TYPE_NORMAL
  zh: 此订购过程通常通过电话或传真完成，零售商打电话给呼叫中心员工，告诉他们第二天要发货的内容。
- en: Assortment
  id: totrans-560
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 系列产品
- en: Most food companies use an assortment of products. This assortment can change
    from season to season or contain special action items but is usually stable since
    that is what most consumers want; meatballs on Monday, pork chops on Tuesday,
    and so on.
  id: totrans-561
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数食品公司使用一系列产品。这个系列可能会随着季节变化而变化，或包含特殊行动项目，但通常很稳定，因为这是大多数消费者想要的；比如周一吃肉丸，周二吃猪排，等等。
- en: To save valuable time creating a new sales order with the same items each day,
    we could have the system do this at night.
  id: totrans-562
  prefs: []
  type: TYPE_NORMAL
  zh: 为了节省宝贵的时间，每天创建具有相同项目的新的销售订单，我们可以在夜间让系统完成这项工作。
- en: This could be done using Standard Customer Sales Codes. This standard function
    in Microsoft Dynamics NAV allows us to create template sales orders with multiple
    items or other master data supported by the sales process. It also supports fixed
    quantities that can be adjusted when the sales orders are created.
  id: totrans-563
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以通过使用标准客户销售代码来完成。Microsoft Dynamics NAV 中的此标准功能允许我们创建包含多个项目或其他由销售流程支持的主数据的模板销售订单。它还支持在创建销售订单时可以调整的固定数量。
- en: 'The sales order can be created from the Customer Sales Codes using the **Get.
    Std. Cust Sales Codes** function, as shown in the following screenshot:'
  id: totrans-564
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用 **Get. Std. Cust Sales Codes** 功能从客户销售代码创建销售订单，如下面的截图所示：
- en: '![Assortment](img/0365EN_06_53.jpg)'
  id: totrans-565
  prefs: []
  type: TYPE_IMG
  zh: '![系列产品](img/0365EN_06_53.jpg)'
- en: Sales order creation
  id: totrans-566
  prefs: []
  type: TYPE_NORMAL
  zh: 销售订单创建
- en: This function could be scheduled in the **Job Scheduler** to create new sales
    order each night for the next day. We will discuss the job scheduler in [Chapter
    9](ch09.html "Chapter 9. Interfacing"), *Interfacing*.
  id: totrans-567
  prefs: []
  type: TYPE_NORMAL
  zh: 这个功能可以在 **作业调度器** 中安排，以便为第二天创建新的销售订单。我们将在第 9 章 [Chapter 9. 接口](ch09.html "Chapter 9. Interfacing")中讨论作业调度器。
- en: Fast order entry
  id: totrans-568
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 快速订单录入
- en: When the retailer contacts the call center to complete the sales order, the
    order entry person should be able to quickly find the correct sales line. If the
    assortment contains 150 items, this can be quite challenging.
  id: totrans-569
  prefs: []
  type: TYPE_NORMAL
  zh: 当零售商联系呼叫中心完成销售订单时，订单录入人员应该能够快速找到正确的销售行。如果系列包含 150 个项目，这可能相当具有挑战性。
- en: This can be solved by implementing a fast order entry functionality that enables
    users to key in an item number and quantity on the sales header. The values will
    be updated in the correct sales line and blanked for the next entry.
  id: totrans-570
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以通过实施快速订单录入功能来解决，该功能允许用户在销售抬头中输入项目编号和数量。这些值将在正确的销售行中更新，并为下一次输入留空。
- en: With this functionality, the end user can always work from the same place without
    searching for the correct sales line.
  id: totrans-571
  prefs: []
  type: TYPE_NORMAL
  zh: 使用此功能，最终用户始终可以从同一位置工作，无需搜索正确的销售行。
- en: Furniture
  id: totrans-572
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 家具
- en: The furniture trading companies have similar issues with variants like fashion
    companies, with some key differences.
  id: totrans-573
  prefs: []
  type: TYPE_NORMAL
  zh: 家具贸易公司面临的问题与时尚公司类似，但有一些关键区别。
- en: Items like office chairs and desks have far more options compared to clothes
    and when sold, most consumers buy few with the same specifications rather than
    a collection of different sizes.
  id: totrans-574
  prefs: []
  type: TYPE_NORMAL
  zh: 与服装相比，办公椅和桌子的选项要多得多，而且当销售时，大多数消费者购买的是具有相同规格的少量产品，而不是不同尺寸的集合。
- en: Variant configuration
  id: totrans-575
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 变体配置
- en: The price of furniture is dependent of the configuration, which fabric we want
    for the seat, the type of armrest, or even the type of wheel. This configuration
    also determines the item number.
  id: totrans-576
  prefs: []
  type: TYPE_NORMAL
  zh: 家具的价格取决于配置，比如我们想要哪种布料作为座椅，哪种扶手类型，或者甚至是轮子的类型。这种配置还决定了商品编号。
- en: An office chair or desk can have as much as 1200 possible combinations. We do
    not want to register all these combinations as items or even as variants.
  id: totrans-577
  prefs: []
  type: TYPE_NORMAL
  zh: 一把办公椅或一张桌子可以有高达1200种可能的组合。我们不希望将这些组合注册为商品或甚至作为变体。
- en: Most furniture suppliers offer online systems or small external software packages
    to determine the combination. Once the combination is identified, we can create
    a new variant code or see if the variant already exists and create the sales order.
  id: totrans-578
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数家具供应商提供在线系统或小型外部软件包来确定组合。一旦确定了组合，我们就可以创建一个新的变体代码，或者查看变体是否已经存在，然后创建销售订单。
- en: One-off items
  id: totrans-579
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 一次性商品
- en: Furniture retailers often have many collections they can sell with thousands
    of items. Most of the items in these collections will never be sold, or get sold
    as one-off items that are only sold once to one customer.
  id: totrans-580
  prefs: []
  type: TYPE_NORMAL
  zh: 家具零售商通常拥有许多可以销售的系列，包含数千种商品。这些系列中的大多数商品将永远不会被售出，或者仅作为一次性商品售出，仅向一位客户销售一次。
- en: 'In this case, it does not make sense to create an item with an item cost and
    inventory value, but we still want to have some traceability of the item. This
    calls for two solutions:'
  id: totrans-581
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，创建一个带有商品成本和库存价值的商品没有意义，但我们仍然希望对商品有一些可追溯性。这需要两个解决方案：
- en: We could create a collection item, which we can reuse each time we sell an item
    that is similar to another item but not exactly the same, for example, a lamp
    with a different foot color. On the sales line, we create the possibility for
    sales people to enter the vendor/collection and an item category. The system should
    then search for the template item.
  id: totrans-582
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以创建一个系列商品，每次我们销售一个与另一个商品相似但不完全相同的商品时，例如，一个脚部颜色不同的台灯，我们都可以重复使用这个商品。在销售行中，我们为销售人员创建了一个输入供应商/系列和商品类别的可能性。然后系统应该搜索模板商品。
- en: Another solution is to create a new item runtime from the sales order. The sales
    person will also select the vendor/collection and item category and the system
    should show a list with items already in the database. If the item is not created,
    the system should create the item using a template for the posting groups. The
    sales person can immediately use it and we then have traceability of the items
    we sold.
  id: totrans-583
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 另一个解决方案是从销售订单中创建一个新的商品运行时。销售人员也将选择供应商/系列和商品类别，系统应该显示一个包含数据库中已有商品的列表。如果商品尚未创建，系统应使用帖子组模板创建商品。销售人员可以立即使用它，然后我们就有了对我们销售的商品的可追溯性。
- en: Summary
  id: totrans-584
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: With this chapter, we end our quest exploring the production and trade functionality
    around the items in Microsoft Dynamics NAV. We discussed the application design
    of sales and purchase documents in Microsoft Dynamics NAV and how they are mirrored.
    We talked about the different document types and how they work together from quote
    or blanket order to order, and invoice or return order, and credit memo.
  id: totrans-585
  prefs: []
  type: TYPE_NORMAL
  zh: 通过本章，我们结束了探索微软Dynamics NAV中围绕商品的生产和贸易功能的旅程。我们讨论了微软Dynamics NAV中销售和采购文档的应用设计以及它们是如何相互映射的。我们讨论了不同的文档类型以及它们如何从报价或一揽子订单到订单、发票或退货订单，再到贷项通知单协同工作。
- en: The sales and purchase line validation methodology helps us to calculate the
    pricing, inventory and VAT using a special structure of functions that is linked
    to the way end users create these lines.
  id: totrans-586
  prefs: []
  type: TYPE_NORMAL
  zh: 销售和采购行验证方法帮助我们通过一个与最终用户创建这些行的方式相链接的特殊函数结构来计算定价、库存和增值税。
- en: Sales and purchase orders have a mandatory release process that can be extended
    with document approval and prepayments. The items have a two-layer inventory process
    using item ledger entries on locations and warehouse entries on bins and zones.
    We can use transfer orders to move items from one location to another and warehouse
    documents to move items from bin to bin and zone to zone. A warehouse is set up
    in the location and can have different levels. The setup level should match the
    physical process in the warehouse.
  id: totrans-587
  prefs: []
  type: TYPE_NORMAL
  zh: 销售和采购订单有一个强制性的发布流程，可以通过文档审批和预付款进行扩展。商品有两个层次的库存流程，使用位置上的商品账目条目和仓库中的托盘和区域条目。我们可以使用调拨订单将商品从一个位置移动到另一个位置，以及使用仓库文件将商品从一个托盘移动到另一个托盘，从一个区域移动到另一个区域。仓库设置在位置上，可以有不同的层级。设置层级应与仓库中的实际流程相匹配。
- en: Item application and costing is tied together with the reservation process in
    Microsoft Dynamics NAV. The Reservation Entry table adds a new level to the inventory
    process linking documents, journals, and entries together to level supply and
    demand. When used, the reservation process can overrule the costing method.
  id: totrans-588
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中，项目应用和成本核算与预订流程紧密相连。预订录入表为库存流程添加了一个新的层级，将文档、日记账和录入项联系起来，以平衡供需。当使用预订流程时，它可以覆盖成本核算方法。
- en: At the end of the chapter, we talked about different ways to implement this
    in vertical solutions and what gaps would have to be solved and how. This demonstrates
    the flexibility and the power of the standard transaction structure in Microsoft
    Dynamics NAV.
  id: totrans-589
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章末尾，我们讨论了在垂直解决方案中实施的不同方法，以及需要解决哪些差距以及如何解决。这展示了Microsoft Dynamics NAV标准交易结构的灵活性和强大功能。
- en: In the next chapter, we will take this to a new level where we will design and
    build a real-world vertical solution for Microsoft Dynamics NAV that will enable
    us to create combine sales shipment in routes for trucks. We will also create
    a new solution on top of Microsoft Dynamics NAV using the application as a development
    environment to build something new with respect to the methodology of the application.
  id: totrans-590
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将将其提升到一个新的水平，我们将为Microsoft Dynamics NAV设计并构建一个真实的垂直解决方案，这将使我们能够为卡车路线创建组合销售发货。我们还将基于Microsoft
    Dynamics NAV创建一个新的解决方案，将应用程序作为开发环境，以构建与应用程序方法相关的新事物。
