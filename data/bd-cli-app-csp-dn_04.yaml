- en: '4'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '4'
- en: Command-Line Parsing
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å‘½ä»¤è¡Œè§£æ
- en: In the previous chapter, we created a console application and learned how to
    pass parameters to it, converting these parameters to their expected data type
    when needed (remember that parameters passed to a console application are of the
    `String` type).
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ§åˆ¶å°åº”ç”¨ç¨‹åºï¼Œå¹¶å­¦ä¹ äº†å¦‚ä½•å‘å®ƒä¼ é€’å‚æ•°ï¼Œå¹¶åœ¨éœ€è¦æ—¶å°†è¿™äº›å‚æ•°è½¬æ¢ä¸ºé¢„æœŸçš„æ•°æ®ç±»å‹ï¼ˆè®°ä½ï¼Œä¼ é€’ç»™æ§åˆ¶å°åº”ç”¨ç¨‹åºçš„å‚æ•°æ˜¯ `String`
    ç±»å‹ï¼‰ã€‚
- en: However, even though a console application is at the heart of a CLI application,
    a CLI application is more than just a console application. A CLI application contains
    named parameters, switches, and subcommands to achieve the intended goal.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œå°½ç®¡æ§åˆ¶å°åº”ç”¨ç¨‹åºæ˜¯CLIåº”ç”¨ç¨‹åºçš„æ ¸å¿ƒï¼Œä½†CLIåº”ç”¨ç¨‹åºä¸ä»…ä»…æ˜¯æ§åˆ¶å°åº”ç”¨ç¨‹åºã€‚CLIåº”ç”¨ç¨‹åºåŒ…å«å‘½åå‚æ•°ã€å¼€å…³å’Œå­å‘½ä»¤ï¼Œä»¥å®ç°é¢„æœŸçš„ç›®æ ‡ã€‚
- en: Armed with our knowledge of creating console applications, weâ€™ll build on top
    of that to learn how to create a CLI application.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: å€ŸåŠ©æˆ‘ä»¬åˆ›å»ºæ§åˆ¶å°åº”ç”¨ç¨‹åºçš„çŸ¥è¯†ï¼Œæˆ‘ä»¬å°†åœ¨å…¶åŸºç¡€ä¸Šå­¦ä¹ å¦‚ä½•åˆ›å»ºCLIåº”ç”¨ç¨‹åºã€‚
- en: 'To do so, in this chapter, weâ€™ll cover the following topics:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¶µç›–ä»¥ä¸‹ä¸»é¢˜ï¼š
- en: Creating the console application
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åˆ›å»ºæ§åˆ¶å°åº”ç”¨ç¨‹åº
- en: Parsing the arguments of a console application
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è§£ææ§åˆ¶å°åº”ç”¨ç¨‹åºçš„å‚æ•°
- en: 'From console to CLI: parsing the arguments using an existing library'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä»æ§åˆ¶å°åˆ°CLIï¼šä½¿ç”¨ç°æœ‰åº“è§£æå‚æ•°
- en: By the end of the chapter, you will learn how to start with a simple console
    application and convert it to a powerful CLI application that handles commands,
    subcommands, and options.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°æœ¬ç« ç»“æŸæ—¶ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä»ä¸€ä¸ªç®€å•çš„æ§åˆ¶å°åº”ç”¨ç¨‹åºå¼€å§‹ï¼Œå°†å…¶è½¬æ¢ä¸ºå¤„ç†å‘½ä»¤ã€å­å‘½ä»¤å’Œé€‰é¡¹çš„å¼ºå¤§CLIåº”ç”¨ç¨‹åºã€‚
- en: Introducing Bookmarkr
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ä»‹ç»Bookmarkr
- en: '**Bookmarkr** is the name of the CLI application we will be building throughout
    this book.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '**Bookmarkr** æ˜¯æˆ‘ä»¬å°†åœ¨è¿™æœ¬ä¹¦ä¸­æ„å»ºçš„CLIåº”ç”¨ç¨‹åºçš„åç§°ã€‚'
- en: It is a command-line application for managing bookmarks.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†ä¹¦ç­¾çš„å‘½ä»¤è¡Œåº”ç”¨ç¨‹åºã€‚
- en: Throughout the pages of this book, we will bring *Bookmarkr* to life and add
    more and more features to it.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬ä¹¦çš„æ¯ä¸€é¡µï¼Œæˆ‘ä»¬å°†è®© *Bookmarkr* ç”ŸåŠ¨èµ·æ¥ï¼Œå¹¶ä¸ºå…¶æ·»åŠ æ›´å¤šåŠŸèƒ½ã€‚
- en: '*Why a* *bookmark manager?*'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '*ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ª* *ä¹¦ç­¾ç®¡ç†å™¨ï¼Ÿ*'
- en: Because everyone has used one, so they are familiar with how such a tool works
    and what functionalities it provides.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: å› ä¸ºæ¯ä¸ªäººéƒ½ä½¿ç”¨è¿‡ï¼Œæ‰€ä»¥ä»–ä»¬ç†Ÿæ‚‰è¿™ç§å·¥å…·çš„å·¥ä½œæ–¹å¼å’Œå®ƒæä¾›çš„åŠŸèƒ½ã€‚
- en: By removing the burden of understanding the business context of *what* we are
    building, we can then focus all of our attention on *how* we are building it.
    And that is precisely why I chose this application. Plus, it could still be super
    useful ğŸ˜‰.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡ç§»é™¤ç†è§£æˆ‘ä»¬æ­£åœ¨æ„å»ºçš„â€œä»€ä¹ˆâ€ä¸šåŠ¡èƒŒæ™¯çš„è´Ÿæ‹…ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å…¨éƒ¨æ³¨æ„åŠ›é›†ä¸­åœ¨â€œå¦‚ä½•â€æ„å»ºå®ƒä¸Šã€‚è¿™æ­£æ˜¯æˆ‘é€‰æ‹©è¿™ä¸ªåº”ç”¨ç¨‹åºçš„åŸå› ã€‚æ­¤å¤–ï¼Œå®ƒä»ç„¶éå¸¸æœ‰ç”¨ ğŸ˜‰ã€‚
- en: Technical requirements
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æŠ€æœ¯è¦æ±‚
- en: The code for this chapter can be found in the GitHub repository accompanying
    this book, [https://github.com/PacktPublishing/Building-CLI-Applications-with-C-Sharp-and-.NET/tree/main/Chapter04](https://github.com/PacktPublishing/Building-CLI-Applications-with-C-Sharp-and-.NET/tree/main/Chapter04).
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬ç« çš„ä»£ç å¯ä»¥åœ¨æœ¬ä¹¦é…å¥—çš„GitHubä»“åº“ä¸­æ‰¾åˆ°ï¼Œ[https://github.com/PacktPublishing/Building-CLI-Applications-with-C-Sharp-and-.NET/tree/main/Chapter04](https://github.com/PacktPublishing/Building-CLI-Applications-with-C-Sharp-and-.NET/tree/main/Chapter04)ã€‚
- en: Creating the console application
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åˆ›å»ºæ§åˆ¶å°åº”ç”¨ç¨‹åº
- en: Letâ€™s start by creating the console application. For this, in Visual Studio
    Code, display the **Terminal** window by going to **View**|**Terminal**.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å…ˆåˆ›å»ºæ§åˆ¶å°åº”ç”¨ç¨‹åºã€‚ä¸ºæ­¤ï¼Œåœ¨Visual Studio Codeä¸­ï¼Œé€šè¿‡è½¬åˆ° **è§†å›¾**|**ç»ˆç«¯** æ¥æ˜¾ç¤º **ç»ˆç«¯** çª—å£ã€‚
- en: Then, position yourself where you want the code folder to be created (I mentioned
    in the previous chapter that I always create a `C:\Code` folder that will contain
    all of my code projects).
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œå°†æ‚¨å®šä½åˆ°æ‚¨æƒ³è¦åˆ›å»ºä»£ç æ–‡ä»¶å¤¹çš„ä½ç½®ï¼ˆæˆ‘åœ¨ä¸Šä¸€ç« æåˆ°ï¼Œæˆ‘æ€»æ˜¯åˆ›å»ºä¸€ä¸ª `C:\Code` æ–‡ä»¶å¤¹ï¼Œå®ƒå°†åŒ…å«æˆ‘æ‰€æœ‰çš„ä»£ç é¡¹ç›®ï¼‰ã€‚
- en: 'From there, type the following command to create the console application:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: ä»é‚£é‡Œï¼Œé”®å…¥ä»¥ä¸‹å‘½ä»¤ä»¥åˆ›å»ºæ§åˆ¶å°åº”ç”¨ç¨‹åºï¼š
- en: '[PRE0]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The .NET project currently looks like this when loaded in Visual Studio Code:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: å½“åœ¨Visual Studio Codeä¸­åŠ è½½æ—¶ï¼Œ.NETé¡¹ç›®çœ‹èµ·æ¥å¦‚ä¸‹ï¼š
- en: '![Figure 4.1 â€“ The bookmarkr project opened in Visual Studio Code](img/B22400_04_01.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾4.1 â€“ åœ¨Visual Studio Codeä¸­æ‰“å¼€çš„bookmarkré¡¹ç›®](img/B22400_04_01.jpg)'
- en: Figure 4.1 â€“ The bookmarkr project opened in Visual Studio Code
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾4.1 â€“ åœ¨Visual Studio Codeä¸­æ‰“å¼€çš„bookmarkré¡¹ç›®
- en: Letâ€™s add some code to the `Program.cs` file.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬åœ¨ `Program.cs` æ–‡ä»¶ä¸­æ·»åŠ ä¸€äº›ä»£ç ã€‚
- en: The first feature we will implement is the ability to add a new bookmark to
    the list of bookmarks.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†å®ç°çš„ç¬¬ä¸€é¡¹åŠŸèƒ½æ˜¯èƒ½å¤Ÿå°†æ–°çš„ä¹¦ç­¾æ·»åŠ åˆ°ä¹¦ç­¾åˆ—è¡¨ä¸­ã€‚
- en: 'To do so, we need to create a `BookmarkService` class that will contain all
    the logic for the bookmarking operations. By following the best practices of development,
    we will create that class in its own code file, named `BookmarkService.cs`:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰ä¹¦ç­¾æ“ä½œé€»è¾‘çš„ `BookmarkService` ç±»ã€‚é€šè¿‡éµå¾ªå¼€å‘çš„æœ€ä½³å®è·µï¼Œæˆ‘ä»¬å°†åœ¨è¿™ä¸ªåä¸º `BookmarkService.cs`
    çš„å•ç‹¬ä»£ç æ–‡ä»¶ä¸­åˆ›å»ºè¿™ä¸ªç±»ï¼š
- en: '[PRE1]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Next, we will need to add a list of `Bookmark` objects to that `BookmarkService`
    class:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å‘é‚£ä¸ª `BookmarkService` ç±»æ·»åŠ ä¸€ä¸ª `Bookmark` å¯¹è±¡çš„åˆ—è¡¨ï¼š
- en: '[PRE2]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We will also need to define the `Bookmark` class. Here, again, we will follow
    the best practices of development, and we will create that class in its own code
    file, smartly named `Bookmark.cs` ğŸ˜Š. This class looks like this:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ `Bookmark` ç±»ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å†æ¬¡éµå¾ªå¼€å‘çš„æœ€ä½³å®è·µï¼Œå¹¶å°†åˆ›å»ºè¿™ä¸ªç±»åœ¨å…¶è‡ªå·±çš„ä»£ç æ–‡ä»¶ä¸­ï¼Œèªæ˜åœ°å‘½åä¸º `Bookmark.cs`
    ğŸ˜Šã€‚è¿™ä¸ªç±»çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š
- en: '[PRE3]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Since the two properties of the `Bookmark` object cannot be `null`, we declare
    them with the `required` modifier.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº `Bookmark` å¯¹è±¡çš„ä¸¤ä¸ªå±æ€§ä¸èƒ½ä¸º `null`ï¼Œæˆ‘ä»¬ä½¿ç”¨ `required` ä¿®é¥°ç¬¦æ¥å£°æ˜å®ƒä»¬ã€‚
- en: 'The updated .NET project now looks like this:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: æ›´æ–°çš„ .NET é¡¹ç›®ç°åœ¨çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š
- en: '![Figure 4.2 â€“ The updated bookmarkr project opened in Visual Studio Code](img/B22400_04_02.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾ 4.2 â€“ åœ¨ Visual Studio Code ä¸­æ‰“å¼€çš„æ›´æ–°åçš„ bookmarkr é¡¹ç›®](img/B22400_04_02.jpg)'
- en: Figure 4.2 â€“ The updated bookmarkr project opened in Visual Studio Code
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 4.2 â€“ åœ¨ Visual Studio Code ä¸­æ‰“å¼€çš„æ›´æ–°åçš„ bookmarkr é¡¹ç›®
- en: Now that we have all the pieces in place, letâ€™s see how we can process user
    requests.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†æ‰€æœ‰éƒ¨ä»¶ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬å¦‚ä½•å¤„ç†ç”¨æˆ·è¯·æ±‚ã€‚
- en: Parsing the arguments of a console application
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è§£ææ§åˆ¶å°åº”ç”¨ç¨‹åºçš„å‚æ•°
- en: A request to a CLI application usually contains the name of the command (and
    an optional subcommand) along with arguments that provide values to the parameters
    needed by the command.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: å‘ CLI åº”ç”¨ç¨‹åºå‘å‡ºçš„è¯·æ±‚é€šå¸¸åŒ…å«å‘½ä»¤çš„åç§°ï¼ˆä»¥åŠå¯é€‰çš„å­å‘½ä»¤ï¼‰ä»¥åŠä¸ºå‘½ä»¤æ‰€éœ€çš„å‚æ•°æä¾›å€¼çš„å‚æ•°ã€‚
- en: The first command we will be adding is the ability to add a new bookmark to
    the list of bookmarks.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†è¦æ·»åŠ çš„ç¬¬ä¸€ä¸ªå‘½ä»¤æ˜¯èƒ½å¤Ÿå°†æ–°çš„ä¹¦ç­¾æ·»åŠ åˆ°ä¹¦ç­¾åˆ—è¡¨ä¸­ã€‚
- en: 'The syntax of the expected command is the following:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: é¢„æœŸå‘½ä»¤çš„è¯­æ³•å¦‚ä¸‹ï¼š
- en: '[PRE4]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: So, letâ€™s modify the code to handle such a command!
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬ä¿®æ”¹ä»£ç ä»¥å¤„ç†è¿™æ ·çš„å‘½ä»¤ï¼
- en: We will start with the `Main` method of the `Program` class (located in the
    `Program.cs` file). Why? Because this is the method that receives the input parameters
    from the user.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†ä» `Program` ç±»çš„ `Main` æ–¹æ³•ï¼ˆä½äº `Program.cs` æ–‡ä»¶ä¸­ï¼‰å¼€å§‹ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¿™ä¸ªæ–¹æ³•æ˜¯æ¥æ”¶ç”¨æˆ·è¾“å…¥å‚æ•°çš„æ–¹æ³•ã€‚
- en: 'Since we may have multiple commands in the future, we will add a `switch` statement
    to handle each one of these. Hence, the code will look like this:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæˆ‘ä»¬å¯èƒ½åœ¨æœªæ¥æœ‰å¤šä¸ªå‘½ä»¤ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ª `switch` è¯­å¥æ¥å¤„ç†æ¯ä¸€ä¸ªã€‚å› æ­¤ï¼Œä»£ç å°†çœ‹èµ·æ¥åƒè¿™æ ·ï¼š
- en: '[PRE5]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Letâ€™s explain this code:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç ï¼š
- en: The `Main` method dispatches the processing of each command to a specific method
    within the `Program` class. Since, for now, we only have one command (`link`),
    we have only one processing method (`ManageLinks`).
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Main` æ–¹æ³•å°†æ¯ä¸ªå‘½ä»¤çš„å¤„ç†è°ƒåº¦åˆ° `Program` ç±»ä¸­çš„ç‰¹å®šæ–¹æ³•ã€‚ç”±äºç°åœ¨æˆ‘ä»¬åªæœ‰ä¸€ä¸ªå‘½ä»¤ï¼ˆ`link`ï¼‰ï¼Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªå¤„ç†æ–¹æ³•ï¼ˆ`ManageLinks`ï¼‰ã€‚'
- en: The `ManageLinks` method handles the subcommands related to links. For now,
    we only have one subcommand (`add`) but we can easily imagine having more subcommands,
    such as `update` (to update the URL of an existing link), `remove` (to remove
    an existing link), and `list` (to list all existing links).
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ManageLinks` æ–¹æ³•å¤„ç†ä¸é“¾æ¥ç›¸å…³çš„å­å‘½ä»¤ã€‚ç›®å‰ï¼Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªå­å‘½ä»¤ï¼ˆ`add`ï¼‰ï¼Œä½†æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°æƒ³è±¡ä¼šæœ‰æ›´å¤šå­å‘½ä»¤ï¼Œä¾‹å¦‚ `update`ï¼ˆæ›´æ–°ç°æœ‰é“¾æ¥çš„
    URLï¼‰ã€`remove`ï¼ˆåˆ é™¤ç°æœ‰é“¾æ¥ï¼‰å’Œ `list`ï¼ˆåˆ—å‡ºæ‰€æœ‰ç°æœ‰é“¾æ¥ï¼‰ã€‚'
- en: Finally, the `ShowErrorMessage` method is a utility method used to display error
    messages in red-colored text. Its code can be found in the `Helper` class and
    is omitted here because it does not provide value to the topic we are discussing.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æœ€åï¼Œ`ShowErrorMessage` æ–¹æ³•æ˜¯ä¸€ä¸ªç”¨äºåœ¨çº¢è‰²æ–‡æœ¬ä¸­æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯çš„å®ç”¨æ–¹æ³•ã€‚å®ƒçš„ä»£ç å¯ä»¥åœ¨ `Helper` ç±»ä¸­æ‰¾åˆ°ï¼Œè¿™é‡Œçœç•¥å› ä¸ºå®ƒå¯¹æˆ‘ä»¬è®¨è®ºçš„ä¸»é¢˜æ²¡æœ‰æä¾›ä»·å€¼ã€‚
- en: If you write (or copy) this code, youâ€™ll notice that it does not compile. This
    is due to the `AddLink` method not yet being available in the `BookmarkService`
    class. Letâ€™s add it!
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ ç¼–å†™ï¼ˆæˆ–å¤åˆ¶ï¼‰è¿™æ®µä»£ç ï¼Œä½ ä¼šæ³¨æ„åˆ°å®ƒæ— æ³•ç¼–è¯‘ã€‚è¿™æ˜¯å› ä¸º `AddLink` æ–¹æ³•åœ¨ `BookmarkService` ç±»ä¸­å°šæœªå¯ç”¨ã€‚è®©æˆ‘ä»¬æ·»åŠ å®ƒï¼
- en: 'The code of the `AddLink` method is the following:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '`AddLink` æ–¹æ³•çš„ä»£ç å¦‚ä¸‹ï¼š'
- en: '[PRE6]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'This code is pretty simple and straightforward, but letâ€™s explain it briefly:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ®µä»£ç ç›¸å½“ç®€å•ç›´æ¥ï¼Œä½†è®©æˆ‘ä»¬ç®€è¦è§£é‡Šä¸€ä¸‹ï¼š
- en: We first ensure that both the `name` and `url` parameters are provided. If not,
    we return an error message to the user with the expected syntax for the command.
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é¦–å…ˆç¡®ä¿æä¾›äº† `name` å’Œ `url` å‚æ•°ã€‚å¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬å°†å‘ç”¨æˆ·è¿”å›ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ï¼Œå…¶ä¸­åŒ…å«å‘½ä»¤çš„é¢„æœŸè¯­æ³•ã€‚
- en: We ensure that the link to be added is not already present in the list of bookmarks.
    If it is present, we inform the user with a warning message and invite them to
    use the `update` subcommand if they intend to update an existing link.
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç¡®ä¿è¦æ·»åŠ çš„é“¾æ¥å°šæœªå­˜åœ¨äºä¹¦ç­¾åˆ—è¡¨ä¸­ã€‚å¦‚æœå·²å­˜åœ¨ï¼Œæˆ‘ä»¬å°†é€šè¿‡è­¦å‘Šæ¶ˆæ¯é€šçŸ¥ç”¨æˆ·ï¼Œå¹¶é‚€è¯·ä»–ä»¬ä½¿ç”¨ `update` å­å‘½ä»¤æ¥æ›´æ–°ç°æœ‰é“¾æ¥ã€‚
- en: If the link does not already exist, we add it to the list of bookmarks and inform
    the user with a success message.
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœé“¾æ¥å°šä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°ä¹¦ç­¾åˆ—è¡¨ä¸­ï¼Œå¹¶é€šè¿‡æˆåŠŸæ¶ˆæ¯é€šçŸ¥ç”¨æˆ·ã€‚
- en: Pretty easy, isnâ€™t it? ğŸ˜Š
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: å¾ˆç®€å•ï¼Œä¸æ˜¯å—ï¼ŸğŸ˜Š
- en: However, there is a problem with this approach to building CLI applications.
    Can you guess what it is?
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•æ„å»º CLI åº”ç”¨ç¨‹åºå­˜åœ¨ä¸€ä¸ªé—®é¢˜ã€‚ä½ èƒ½çŒœåˆ°æ˜¯ä»€ä¹ˆå—ï¼Ÿ
- en: It is based on positional parameters. In other words, we expect the first parameter
    to be the name of the command, the second parameter to be the name of the subcommand,
    the third parameter to be the value of the `name` parameter, and the fourth parameter
    to be the value of the `url` parameter.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒåŸºäºä½ç½®å‚æ•°ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬æœŸæœ›ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‘½ä»¤çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­å‘½ä»¤çš„åç§°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ `name` å‚æ•°çš„å€¼ï¼Œç¬¬å››ä¸ªå‚æ•°æ˜¯ `url` å‚æ•°çš„å€¼ã€‚
- en: 'But there are a couple of issues:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š
- en: How could the user be aware of that order?
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç”¨æˆ·å¦‚ä½•çŸ¥é“è¿™ä¸ªé¡ºåºå‘¢ï¼Ÿ
- en: What if the user provided the `url` value as the third parameter and the `name`
    value as the fourth parameter?
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœç”¨æˆ·å°† `url` å€¼ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå°† `name` å€¼ä½œä¸ºç¬¬å››ä¸ªå‚æ•°æä¾›æ€ä¹ˆåŠï¼Ÿ
- en: 'If youâ€™re familiar with using CLI applications, you will know that the usual
    syntax for a CLI command looks like this:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ ç†Ÿæ‚‰ä½¿ç”¨ CLI åº”ç”¨ç¨‹åºï¼Œä½ ä¼šçŸ¥é“ CLI å‘½ä»¤çš„å¸¸ç”¨è¯­æ³•çœ‹èµ·æ¥åƒè¿™æ ·ï¼š
- en: '[PRE7]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'It can also look like this:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒä¹Ÿå¯ä»¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š
- en: '[PRE8]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: This helps the user to know what is expected as parameters and to provide the
    parameters in the appropriate manner.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æœ‰åŠ©äºç”¨æˆ·äº†è§£é¢„æœŸçš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå¦‚ä½•ä»¥é€‚å½“çš„æ–¹å¼æä¾›å‚æ•°ã€‚
- en: We can, of course, rely on the `args` list of parameters and compare each one
    to what is expected (for example, checking whether the third parameterâ€™s value
    is `--name` or `-n` so we know that the fourth parameter represents the value
    of the name of the link, and so on), but this will complexify our code too much.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å½“ç„¶å¯ä»¥ä¾èµ–å‚æ•°çš„ `args` åˆ—è¡¨ï¼Œå¹¶å°†æ¯ä¸ªå‚æ•°ä¸é¢„æœŸå€¼è¿›è¡Œæ¯”è¾ƒï¼ˆä¾‹å¦‚ï¼Œæ£€æŸ¥ç¬¬ä¸‰ä¸ªå‚æ•°çš„å€¼æ˜¯å¦ä¸º `--name` æˆ– `-n`ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ç¬¬å››ä¸ªå‚æ•°ä»£è¡¨é“¾æ¥çš„åç§°ï¼Œä¾æ­¤ç±»æ¨ï¼‰ï¼Œä½†è¿™ä¼šä½¿æˆ‘ä»¬çš„ä»£ç è¿‡äºå¤æ‚ã€‚
- en: I know what youâ€™re thinking. Youâ€™re smart and youâ€™ve already figured out that
    the best approach to solve this problem is to develop a library to parse these
    parameters and figure out what they represent.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘çŸ¥é“ä½ åœ¨æƒ³ä»€ä¹ˆã€‚ä½ å¾ˆèªæ˜ï¼Œä½ å·²ç»æƒ³å‡ºäº†è§£å†³è¿™ä¸ªé—®é¢˜çš„æœ€ä½³æ–¹æ³•ï¼Œé‚£å°±æ˜¯å¼€å‘ä¸€ä¸ªåº“æ¥è§£æè¿™äº›å‚æ•°å¹¶æ‰¾å‡ºå®ƒä»¬ä»£è¡¨ä»€ä¹ˆã€‚
- en: But, because I know youâ€™re smart, I know that youâ€™ve already searched for an
    existing library that does just that. After all, you do not want to reinvent the
    wheel, do you?
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æ˜¯ï¼Œå› ä¸ºæˆ‘çŸ¥é“ä½ å¾ˆèªæ˜ï¼Œæˆ‘çŸ¥é“ä½ å·²ç»æœç´¢è¿‡è¿™æ ·ä¸€ä¸ªåº“ã€‚æ¯•ç«Ÿï¼Œä½ ä¸æƒ³é‡æ–°å‘æ˜è½®å­ï¼Œå¯¹å§ï¼Ÿ
- en: From console to CLI â€“ parsing the arguments using an existing library
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä»æ§åˆ¶å°åˆ° CLI - ä½¿ç”¨ç°æœ‰åº“è§£æå‚æ•°
- en: Although many libraries exist for the different programming languages, including
    .NET, we will focus on `System.CommandLine` throughout this book.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡å­˜åœ¨è®¸å¤šé’ˆå¯¹ä¸åŒç¼–ç¨‹è¯­è¨€çš„åº“ï¼ŒåŒ…æ‹¬ .NETï¼Œä½†æœ¬ä¹¦å°†ä¸“æ³¨äº `System.CommandLine`ã€‚
- en: You may be wondering why we chose this library, especially if you are familiar
    with (or have heard about) `CommandLineParser`, which is another common library
    for that matter.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½æƒ³çŸ¥é“æˆ‘ä»¬ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªåº“ï¼Œå°¤å…¶æ˜¯å¦‚æœä½ ç†Ÿæ‚‰ï¼ˆæˆ–è€…å¬è¯´è¿‡ï¼‰`CommandLineParser`ï¼Œè¿™æ˜¯ä¸€ä¸ªé’ˆå¯¹è¯¥é¢†åŸŸçš„å¦ä¸€ä¸ªå¸¸è§åº“ã€‚
- en: There are multiple reasons for that. In essence, `System.CommandLine` is a more
    modern, feature-rich, and performant library, whereas `CommandLineParser` is a
    simpler and more lightweight alternative.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æœ‰å¤šä¸ªåŸå› ã€‚æœ¬è´¨ä¸Šï¼Œ`System.CommandLine` æ˜¯ä¸€ä¸ªæ›´ç°ä»£ã€åŠŸèƒ½æ›´ä¸°å¯Œã€æ€§èƒ½æ›´å¥½çš„åº“ï¼Œè€Œ `CommandLineParser` åˆ™æ˜¯ä¸€ä¸ªæ›´ç®€å•ã€æ›´è½»é‡çº§çš„æ›¿ä»£æ–¹æ¡ˆã€‚
- en: 'Additionally, there are a few other reasons why I prefer `System.CommandLine`:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–åŸå› è®©æˆ‘æ›´å–œæ¬¢ `System.CommandLine`ï¼š
- en: '`System.CommandLine` is a .NET Foundation project developed by Microsoft and
    the community, while `CommandLineParser` is a third-party library'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`System.CommandLine` æ˜¯ç”±å¾®è½¯å’Œç¤¾åŒºå¼€å‘çš„ .NET åŸºé‡‘ä¼šé¡¹ç›®ï¼Œè€Œ `CommandLineParser` æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“'
- en: '`System.CommandLine` uses a builder pattern and a more declarative approach
    to define commands and options, while `CommandLineParser` uses attributes and
    a more imperative approach'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`System.CommandLine` ä½¿ç”¨æ„å»ºå™¨æ¨¡å¼å’Œæ›´å£°æ˜æ€§çš„æ–¹æ³•æ¥å®šä¹‰å‘½ä»¤å’Œé€‰é¡¹ï¼Œè€Œ `CommandLineParser` ä½¿ç”¨å±æ€§å’Œæ›´å‘½ä»¤å¼çš„æ–¹æ³•'
- en: '`System.CommandLine` provides more advanced features out of the box, such as
    command hierarchies, response files, auto-completion, and parsing directives,
    whereas `CommandLineParser` is more lightweight and focused on basic command-line
    parsing'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`System.CommandLine` æä¾›äº†æ›´å¤šå¼€ç®±å³ç”¨çš„é«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚å‘½ä»¤å±‚æ¬¡ç»“æ„ã€å“åº”æ–‡ä»¶ã€è‡ªåŠ¨å®Œæˆå’Œè§£ææŒ‡ä»¤ï¼Œè€Œ `CommandLineParser`
    åˆ™æ›´è½»é‡çº§ï¼Œä¸“æ³¨äºåŸºæœ¬çš„å‘½ä»¤è¡Œè§£æ'
- en: '`System.CommandLine` is known to be faster and more efficient, especially for
    large command-line structures'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`System.CommandLine` è¢«è®¤ä¸ºæ˜¯æ›´å¿«ã€æ›´é«˜æ•ˆçš„ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§å‹å‘½ä»¤è¡Œç»“æ„æ—¶'
- en: Even though both libraries are cross-platform, `System.CommandLine` has better
    support for platform-specific conventions, such as case-insensitivity on Windows
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å°½ç®¡è¿™ä¸¤ä¸ªåº“éƒ½æ˜¯è·¨å¹³å°çš„ï¼Œä½† `System.CommandLine` å¯¹å¹³å°ç‰¹å®šçº¦å®šçš„æ”¯æŒæ›´å¥½ï¼Œä¾‹å¦‚åœ¨ Windows ä¸Šçš„ä¸åŒºåˆ†å¤§å°å†™
- en: Now, letâ€™s rewrite our application to benefit from the `System.CommandLine`
    library!
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œè®©æˆ‘ä»¬é‡å†™æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä»¥åˆ©ç”¨ `System.CommandLine` åº“ï¼
- en: 'Important note #1'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 'é‡è¦æç¤º #1'
- en: The previous code of the `Program.cs` file has been moved into a `Program.Console.txt`
    file for further reference.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '`Program.cs` æ–‡ä»¶çš„ä¸Šä¸€ç‰ˆä»£ç å·²è¢«ç§»è‡³ `Program.Console.txt` æ–‡ä»¶ä»¥ä¾›è¿›ä¸€æ­¥å‚è€ƒã€‚'
- en: 'Important note #2'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 'é‡è¦æç¤º #2'
- en: While you can execute the application by its executable name (located in `bin\Debug\net8.0\bookmarkr.exe`),
    itâ€™s more convenient, during the development phase, to use the `dotnet` `run`
    command.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶æ‚¨å¯ä»¥é€šè¿‡å…¶å¯æ‰§è¡Œæ–‡ä»¶åï¼ˆä½äº `bin\Debug\net8.0\bookmarkr.exe`ï¼‰æ‰§è¡Œåº”ç”¨ç¨‹åºï¼Œä½†åœ¨å¼€å‘é˜¶æ®µï¼Œä½¿ç”¨ `dotnet`
    `run` å‘½ä»¤ä¼šæ›´æ–¹ä¾¿ã€‚
- en: I prefer to rely on the executable name because it matches how we will use the
    application in production. If you prefer to use the `dotnet run` command, simply
    replace `bookmarkr` with `dotnet run` in the following execution syntaxes.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘æ›´å–œæ¬¢ä¾èµ–äºå¯æ‰§è¡Œæ–‡ä»¶åï¼Œå› ä¸ºå®ƒä¸æˆ‘ä»¬å°†åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨åº”ç”¨ç¨‹åºçš„æ–¹å¼ç›¸åŒ¹é…ã€‚å¦‚æœæ‚¨æ›´å–œæ¬¢ä½¿ç”¨ `dotnet run` å‘½ä»¤ï¼Œåªéœ€åœ¨ä»¥ä¸‹æ‰§è¡Œè¯­æ³•ä¸­å°† `bookmarkr`
    æ›¿æ¢ä¸º `dotnet run`ã€‚
- en: 'The first thing we need to do is to add the `System.CommandLine` NuGet package
    library to our project. To do this, open the Visual Studio Code terminal and type
    the following command:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯å°† `System.CommandLine` NuGet åŒ…åº“æ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ã€‚ä¸ºæ­¤ï¼Œæ‰“å¼€ Visual Studio Code
    ç»ˆç«¯å¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
- en: '[PRE9]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: At the time of the writing of this chapter, this library is still in Beta. When
    it makes it to `--prerelease` switch anymore.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ’°å†™æœ¬ç« æ—¶ï¼Œè¿™ä¸ªåº“ä»ç„¶å¤„äºæµ‹è¯•ç‰ˆã€‚å½“å®ƒä¸å†éœ€è¦ `--prerelease` å¼€å…³æ—¶ã€‚
- en: The way `System.CommandLine` works is to have a `RootCommand` object that will
    act as the root command for all other commands of the CLI application. This means
    that every command in the application has, as a parent, either the `root` command
    or another command whose parent is ultimately the root command.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '`System.CommandLine` çš„å·¥ä½œæ–¹å¼æ˜¯æ‹¥æœ‰ä¸€ä¸ª `RootCommand` å¯¹è±¡ï¼Œå®ƒå°†ä½œä¸º CLI åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰å…¶ä»–å‘½ä»¤çš„æ ¹å‘½ä»¤ã€‚è¿™æ„å‘³ç€åº”ç”¨ç¨‹åºä¸­çš„æ¯ä¸ªå‘½ä»¤éƒ½æœ‰ä¸€ä¸ªçˆ¶å‘½ä»¤ï¼Œè¦ä¹ˆæ˜¯
    `root` å‘½ä»¤ï¼Œè¦ä¹ˆæ˜¯æœ€ç»ˆçˆ¶å‘½ä»¤æ˜¯æ ¹å‘½ä»¤çš„å…¶ä»–å‘½ä»¤ã€‚'
- en: Adding the root command
  id: totrans-94
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ·»åŠ æ ¹å‘½ä»¤
- en: The root command is the one that gets called when the user invokes the CLI application
    with no parameters.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹å‘½ä»¤æ˜¯åœ¨ç”¨æˆ·ä¸å¸¦å‚æ•°è°ƒç”¨ CLI åº”ç”¨ç¨‹åºæ—¶è¢«è°ƒç”¨çš„å‘½ä»¤ã€‚
- en: 'The root command is an instance of the `RootCommand` class:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹å‘½ä»¤æ˜¯ `RootCommand` ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼š
- en: '[PRE10]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'A command has a handler, which is a method that is called as the result of
    the user invoking that command:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªå‘½ä»¤æœ‰ä¸€ä¸ªå¤„ç†ç¨‹åºï¼Œè¿™æ˜¯ä¸€ä¸ªåœ¨ç”¨æˆ·è°ƒç”¨è¯¥å‘½ä»¤æ—¶è¢«è°ƒç”¨çš„æ–¹æ³•ï¼š
- en: '[PRE11]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'The `SetHandler` method takes a delegate to the actual method that does the
    job:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '`SetHandler` æ–¹æ³•æ¥å—ä¸€ä¸ªæŒ‡å‘å®é™…æ‰§è¡Œå·¥ä½œçš„æ–¹æ³•çš„å§”æ‰˜ï¼š'
- en: '[PRE12]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Finally, and since the `System.CommandLine` library follows the `Builder` pattern,
    we need to build and invoke a parser to kick things in:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œç”±äº `System.CommandLine` åº“éµå¾ª `Builder` æ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºå’Œè°ƒç”¨è§£æå™¨æ¥å¯åŠ¨æ“ä½œï¼š
- en: '[PRE13]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Last but not least, letâ€™s add the required `using` statements at the top of
    the file:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œè®©æˆ‘ä»¬åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ æ‰€éœ€çš„ `using` è¯­å¥ï¼š
- en: '[PRE14]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'We are now ready to execute our application! Type the following:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨å¯ä»¥æ‰§è¡Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºäº†ï¼è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š
- en: '[PRE15]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: When executed, the application will invoke the appropriate command (here, the
    root command since no argument was passed to the executing application), which,
    in turn, will invoke its handler method (`OnHandleRootCommand`), and the result
    of its execution will be returned to the user. In this example, the command will
    display the message `"Hello from the` `root command!"`.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æ‰§è¡Œæ—¶ï¼Œåº”ç”¨ç¨‹åºå°†è°ƒç”¨é€‚å½“çš„å‘½ä»¤ï¼ˆåœ¨è¿™é‡Œï¼Œç”±äºæ²¡æœ‰å‘æ‰§è¡Œåº”ç”¨ç¨‹åºä¼ é€’ä»»ä½•å‚æ•°ï¼Œæ‰€ä»¥æ˜¯æ ¹å‘½ä»¤ï¼‰ï¼Œç„¶åå®ƒå°†è°ƒç”¨å…¶å¤„ç†æ–¹æ³•ï¼ˆ`OnHandleRootCommand`ï¼‰ï¼Œå¹¶ä¸”å…¶æ‰§è¡Œç»“æœå°†è¿”å›ç»™ç”¨æˆ·ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå‘½ä»¤å°†æ˜¾ç¤ºæ¶ˆæ¯
    `"Hello from the"` `root command!"`ã€‚
- en: '![Figure 4.3 â€“ Invoking the root command](img/B22400_04_03.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾ 4.3 â€“ è°ƒç”¨æ ¹å‘½ä»¤](img/B22400_04_03.jpg)'
- en: Figure 4.3 â€“ Invoking the root command
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 4.3 â€“ è°ƒç”¨æ ¹å‘½ä»¤
- en: Isnâ€™t that exciting? No? Youâ€™re rightâ€¦ This is not (yet) looking like a CLI
    application. Letâ€™s add another command!
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸æ˜¯ä»¤äººå…´å¥‹å—ï¼Ÿä¸ï¼Ÿæ‚¨æ˜¯å¯¹çš„â€¦è¿™ï¼ˆç›®å‰ï¼‰çœ‹èµ·æ¥ä¸æ˜¯ä¸€ä¸ªCLIåº”ç”¨ç¨‹åºã€‚è®©æˆ‘ä»¬æ·»åŠ å¦ä¸€ä¸ªå‘½ä»¤ï¼
- en: Adding the link command
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ·»åŠ é“¾æ¥å‘½ä»¤
- en: 'The syntax for adding bookmarks using our CLI application is supposed to be
    like this:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æˆ‘ä»¬çš„CLIåº”ç”¨ç¨‹åºæ·»åŠ ä¹¦ç­¾çš„è¯­æ³•åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š
- en: '[PRE16]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'So, we need to create a `link` command. This command will have the root command
    as a parent:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª`link`å‘½ä»¤ã€‚æ­¤å‘½ä»¤å°†ä»¥æ ¹å‘½ä»¤ä½œä¸ºçˆ¶å‘½ä»¤ï¼š
- en: '[PRE17]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Next, we need an `add` command, whose parent will be the `link` command:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª`add`å‘½ä»¤ï¼Œå…¶çˆ¶å‘½ä»¤å°†æ˜¯`link`å‘½ä»¤ï¼š
- en: '[PRE18]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Now, letâ€™s execute this application:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ‰§è¡Œè¿™ä¸ªåº”ç”¨ç¨‹åºï¼š
- en: '[PRE19]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Pretty close, huh?
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: å¾ˆæ¥è¿‘ï¼Œå¯¹å§ï¼Ÿ
- en: The only elements that are missing are the `<name>` and `<url>` parts. These
    are called **options**, and we will look into them in a moment. But first, letâ€™s
    focus on commands.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: ç¼ºå°‘çš„å”¯ä¸€å…ƒç´ æ˜¯`<name>`å’Œ`<url>`éƒ¨åˆ†ã€‚è¿™äº›è¢«ç§°ä¸º**é€‰é¡¹**ï¼Œæˆ‘ä»¬å°†åœ¨ç¨åæ¢è®¨å®ƒä»¬ã€‚ä½†é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä¸“æ³¨äºå‘½ä»¤ã€‚
- en: About commands
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å…³äºå‘½ä»¤
- en: Commands are like a tree where the root command isâ€¦ well, the root of that tree.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: å‘½ä»¤å°±åƒä¸€æ£µæ ‘ï¼Œå…¶ä¸­æ ¹å‘½ä»¤æ˜¯â€¦å—¯ï¼Œé‚£æ£µæ ‘çš„æ ¹ã€‚
- en: Each command has a parent, which is either another command (for example, `add`
    has `link` as a parent), or the root command itself (as for the `link` command).
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸ªå‘½ä»¤éƒ½æœ‰ä¸€ä¸ªçˆ¶å‘½ä»¤ï¼Œå®ƒå¯ä»¥æ˜¯å¦ä¸€ä¸ªå‘½ä»¤ï¼ˆä¾‹å¦‚ï¼Œ`add`çš„çˆ¶å‘½ä»¤æ˜¯`link`ï¼‰ï¼Œæˆ–è€…æ ¹å‘½ä»¤æœ¬èº«ï¼ˆä¾‹å¦‚ï¼Œ`link`å‘½ä»¤ï¼‰ã€‚
- en: 'The command tree dictates the syntax of the CLI application. For example, we
    cannot perform the following call:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: å‘½ä»¤æ ‘å†³å®šäº†CLIåº”ç”¨ç¨‹åºçš„è¯­æ³•ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ— æ³•æ‰§è¡Œä»¥ä¸‹è°ƒç”¨ï¼š
- en: '[PRE20]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: This is because no `add` command has the root command as a parent.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯å› ä¸ºæ²¡æœ‰`add`å‘½ä»¤ä»¥æ ¹å‘½ä»¤ä½œä¸ºçˆ¶å‘½ä»¤ã€‚
- en: Do all commands need to have a handler method?
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ‰€æœ‰å‘½ä»¤éƒ½éœ€è¦æœ‰å¤„ç†æ–¹æ³•å—ï¼Ÿ
- en: The answer is, no, they donâ€™t. Only commands that actually do some processing
    need to have a handler method. In our case, neither the root command nor the `link`
    command require a handler.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: ç­”æ¡ˆæ˜¯ï¼Œä¸ï¼Œå®ƒä»¬ä¸éœ€è¦ã€‚åªæœ‰å®é™…æ‰§è¡Œä¸€äº›å¤„ç†çš„å‘½ä»¤æ‰éœ€è¦å¤„ç†æ–¹æ³•ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæ ¹å‘½ä»¤å’Œ`link`å‘½ä»¤éƒ½ä¸éœ€è¦å¤„ç†æ–¹æ³•ã€‚
- en: Adding options to the link command
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å‘é“¾æ¥å‘½ä»¤æ·»åŠ é€‰é¡¹
- en: 'Since the `add` command requires two parameters (`name` and `url`), we will
    add two options to it:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº`add`å‘½ä»¤éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼ˆ`name`å’Œ`url`ï¼‰ï¼Œæˆ‘ä»¬å°†å‘å…¶ä¸­æ·»åŠ ä¸¤ä¸ªé€‰é¡¹ï¼š
- en: '[PRE21]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'As you can see, an `Option` is defined by the following:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æ‚¨æ‰€è§ï¼Œä¸€ä¸ª`Option`æ˜¯é€šè¿‡ä»¥ä¸‹æ–¹å¼å®šä¹‰çš„ï¼š
- en: The data type of its value (here, a string)
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å…¶å€¼çš„ç±»å‹ï¼ˆè¿™é‡Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰
- en: Its aliases (for `urlOption`, these are `--url` and `-u`)
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å®ƒçš„åˆ«åï¼ˆå¯¹äº`urlOption`ï¼Œè¿™äº›æ˜¯`--url`å’Œ`-u`ï¼‰
- en: Its description, which will be useful when requesting the help menu for that
    command (for `urlOption`, it is `"The URL of` `the bookmark"`)
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å®ƒçš„æè¿°ï¼Œå½“è¯·æ±‚è¯¥å‘½ä»¤çš„å¸®åŠ©èœå•æ—¶å°†å¾ˆæœ‰ç”¨ï¼ˆå¯¹äº`urlOption`ï¼Œå®ƒæ˜¯`"The URL of the bookmark"`ï¼‰
- en: 'Next, we need to assign these options to the command, as follows:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›é€‰é¡¹åˆ†é…ç»™å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '[PRE22]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'We then need to pass these options to the `Handler` method:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›é€‰é¡¹ä¼ é€’ç»™`Handler`æ–¹æ³•ï¼š
- en: '[PRE23]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'And, finally, we use the values of these options in the `Handler` method:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œæˆ‘ä»¬åœ¨`Handler`æ–¹æ³•ä¸­ä½¿ç”¨è¿™äº›é€‰é¡¹çš„å€¼ï¼š
- en: '[PRE24]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Now, if we execute the application, we get the expected result. This time,
    we saved about half of the code by not having to parse the arguments of the console
    application and delegating this to the `System.CommandLine` library:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æ‰§è¡Œåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°é¢„æœŸçš„ç»“æœã€‚è¿™æ¬¡ï¼Œæˆ‘ä»¬æ²¡æœ‰è§£ææ§åˆ¶å°åº”ç”¨ç¨‹åºçš„å‚æ•°å¹¶å°†æ­¤å§”æ‰˜ç»™`System.CommandLine`åº“ï¼Œå› æ­¤èŠ‚çœäº†å¤§çº¦ä¸€åŠçš„ä»£ç ï¼š
- en: '![Figure 4.4 â€“ We successfully added a bookmark](img/B22400_04_04.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾4.4 â€“ æˆ‘ä»¬æˆåŠŸæ·»åŠ äº†ä¸€ä¸ªä¹¦ç­¾](img/B22400_04_04.jpg)'
- en: Figure 4.4 â€“ We successfully added a bookmark
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾4.4 â€“ æˆ‘ä»¬æˆåŠŸæ·»åŠ äº†ä¸€ä¸ªä¹¦ç­¾
- en: 'Note that, using the aliases, we can execute the CLI application using this
    syntax:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œä½¿ç”¨åˆ«åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•æ‰§è¡ŒCLIåº”ç”¨ç¨‹åºï¼š
- en: '[PRE25]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'We can also use this syntax:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š
- en: '[PRE26]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: The result will be the same as the one shown in *Figure 4**.4*.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: ç»“æœå°†ä¸*å›¾4**.4*ä¸­æ˜¾ç¤ºçš„ç›¸åŒã€‚
- en: What other types of options can we use?
  id: totrans-152
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å“ªäº›å…¶ä»–ç±»å‹çš„é€‰é¡¹ï¼Ÿ
- en: '`System.CommandLine` doesnâ€™t only support `string` options. `Option<T>` is
    a generic type, so you can create an `Option<T>` for any data type. This, for
    example, could be the following:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '`System.CommandLine`ä¸ä»…æ”¯æŒ`string`é€‰é¡¹ã€‚`Option<T>`æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ï¼Œå› æ­¤æ‚¨å¯ä»¥ä¸ºä»»ä½•æ•°æ®ç±»å‹åˆ›å»ºä¸€ä¸ª`Option<T>`ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å¯ä»¥æ˜¯ä»¥ä¸‹å†…å®¹ï¼š'
- en: '`int`'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`int`'
- en: '`double`'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`double`'
- en: '`bool`'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`bool`'
- en: '`DateTime`'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DateTime`'
- en: '`Uri`'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Uri`'
- en: '`TimeSpan`'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`TimeSpan`'
- en: '`Regex`'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Regex`'
- en: '`Enum`'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Enum`'
- en: '`IPAddress`'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`IPAddress`'
- en: '`FileInfo`'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`FileInfo`'
- en: It could even be your own custom class if you prefer.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ‚¨æ„¿æ„ï¼Œç”šè‡³å¯ä»¥æ˜¯æ‚¨è‡ªå·±çš„è‡ªå®šä¹‰ç±»ã€‚
- en: Depending on the data type we use, the provided value for the option will be
    parsed into that data type. If parsing fails, an exception will be raised, and
    an error message will be displayed to the console.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®æˆ‘ä»¬ä½¿ç”¨çš„æ•°æ®ç±»å‹ï¼Œæä¾›çš„é€‰é¡¹å€¼å°†è¢«è§£æä¸ºè¯¥æ•°æ®ç±»å‹ã€‚å¦‚æœè§£æå¤±è´¥ï¼Œå°†å¼•å‘å¼‚å¸¸ï¼Œå¹¶åœ¨æ§åˆ¶å°æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚
- en: 'Here is an illustrative example. The root command has been updated to accept
    an integer option. When the program is executed and a value that cannot be parsed
    into an integer is provided for that option, we get the following error message:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæœ‰ä¸€ä¸ªè¯´æ˜æ€§çš„ä¾‹å­ã€‚æ ¹å‘½ä»¤å·²è¢«æ›´æ–°ä»¥æ¥å—ä¸€ä¸ªæ•´æ•°é€‰é¡¹ã€‚å½“ç¨‹åºæ‰§è¡Œæ—¶ï¼Œå¦‚æœä¸ºè¯¥é€‰é¡¹æä¾›äº†ä¸€ä¸ªæ— æ³•è§£æä¸ºæ•´æ•°çš„å€¼ï¼Œæˆ‘ä»¬å°†å¾—åˆ°ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š
- en: '[PRE27]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Hmmâ€¦ Although the name of the option indicates that it is expecting a number,
    it is not clear what that number is all about. What is its purpose? Is there a
    range of valid values for that number? A little help would beâ€¦ well, helpful here
    ğŸ˜Š.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: å—¯â€¦â€¦è™½ç„¶é€‰é¡¹çš„åç§°è¡¨æ˜å®ƒæœŸæœ›ä¸€ä¸ªæ•°å­—ï¼Œä½†å¹¶ä¸æ¸…æ¥šè¿™ä¸ªæ•°å­—æ˜¯ä»€ä¹ˆã€‚å®ƒçš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸ªæ•°å­—çš„æœ‰æ•ˆå€¼èŒƒå›´æ˜¯ä»€ä¹ˆï¼Ÿä¸€ç‚¹å¸®åŠ©åœ¨è¿™é‡Œâ€¦â€¦å—¯ï¼Œå¾ˆæœ‰å¸®åŠ© ğŸ˜Šã€‚
- en: Getting help
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è·å–å¸®åŠ©
- en: The good news is that when using `System.CommandLine`, we get the help menu
    automatically built for us. All we need to do is to provide meaningful names and
    descriptions to our commands and options and the library will do the rest.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: å¥½æ¶ˆæ¯æ˜¯ï¼Œå½“ä½¿ç”¨`System.CommandLine`æ—¶ï¼Œæˆ‘ä»¬è‡ªåŠ¨è·å¾—ä¸ºæˆ‘ä»¬æ„å»ºçš„å¸®åŠ©èœå•ã€‚æˆ‘ä»¬åªéœ€è¦ä¸ºæˆ‘ä»¬è‡ªå·±çš„å‘½ä»¤å’Œé€‰é¡¹æä¾›æœ‰æ„ä¹‰çš„åç§°å’Œæè¿°ï¼Œåº“å°±ä¼šå®Œæˆå…¶ä½™çš„å·¥ä½œã€‚
- en: 'We can get help by using either one of these options:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»»ä¸€é€‰é¡¹æ¥è·å–å¸®åŠ©ï¼š
- en: '`--``help`'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--help`'
- en: '`-h`'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-h`'
- en: '`-?`'
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-?`'
- en: 'The result will look like this:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: ç»“æœçœ‹èµ·æ¥åƒè¿™æ ·ï¼š
- en: '![Figure 4.5 â€“ Help!](img/B22400_04_05.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾ 4.5 â€“ å¸®åŠ©ï¼](img/B22400_04_05.jpg)'
- en: Figure 4.5 â€“ Help!
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 4.5 â€“ å¸®åŠ©ï¼
- en: 'This also works for subcommands. For example, if we want to get help regarding
    the `link` command, we can type the following:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¹Ÿé€‚ç”¨äºå­å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è·å–æœ‰å…³`link`å‘½ä»¤çš„å¸®åŠ©ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š
- en: '![Figure 4.6 â€“ Getting help for the link command](img/B22400_04_06.jpg)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾ 4.6 â€“ è·å–é“¾æ¥å‘½ä»¤çš„å¸®åŠ©](img/B22400_04_06.jpg)'
- en: Figure 4.6 â€“ Getting help for the link command
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 4.6 â€“ è·å–é“¾æ¥å‘½ä»¤çš„å¸®åŠ©
- en: 'We can do this for one subcommand at a time, such as the `link add` command,
    for example:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ä¸€æ¬¡ä¸ºä¸€ä¸ªå­å‘½ä»¤åšè¿™ä»¶äº‹ï¼Œä¾‹å¦‚`link add`å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š
- en: '![Figure 4.7 â€“ Getting help for the link add command](img/B22400_04_07.jpg)'
  id: totrans-182
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾ 4.7 â€“ è·å–é“¾æ¥æ·»åŠ å‘½ä»¤çš„å¸®åŠ©](img/B22400_04_07.jpg)'
- en: Figure 4.7 â€“ Getting help for the link add command
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 4.7 â€“ è·å–é“¾æ¥æ·»åŠ å‘½ä»¤çš„å¸®åŠ©
- en: Important note
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: é‡è¦æç¤º
- en: You have probably noticed that the `dotnet run` syntax for getting help requires
    an extra `--`. This is not a typo. It is required because, otherwise, the .NET
    CLI tool will *think* that you are requesting help with the `dotnet` tool.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œè·å–å¸®åŠ©çš„`dotnet run`è¯­æ³•éœ€è¦é¢å¤–çš„`--`ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªæ‰“å­—é”™è¯¯ã€‚è¿™æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºå¦åˆ™ï¼Œ.NET CLI å·¥å…·ä¼šè®¤ä¸ºä½ æ­£åœ¨è¯·æ±‚`dotnet`å·¥å…·çš„å¸®åŠ©ã€‚
- en: The extra `--` is used to separate the arguments that are passed to `dotnet
    run` from the arguments that are passed to the application being run. Everything
    after `--` is considered an argument to the application, not to `dotnet run`.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: é¢å¤–çš„`--`ç”¨äºå°†ä¼ é€’ç»™`dotnet run`çš„å‚æ•°ä¸ä¼ é€’ç»™æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„å‚æ•°åˆ†å¼€ã€‚`--`ä¹‹åçš„æ‰€æœ‰å†…å®¹éƒ½è¢«è®¤ä¸ºæ˜¯åº”ç”¨ç¨‹åºçš„å‚æ•°ï¼Œè€Œä¸æ˜¯`dotnet
    run`çš„å‚æ•°ã€‚
- en: However, one thing we should keep in mind is that the usage of a CLI application
    (and hence, its help) depends on the current version of the application. But how
    do we get that information?
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œæˆ‘ä»¬åº”è¯¥è®°ä½çš„æ˜¯ï¼ŒCLI åº”ç”¨ç¨‹åºçš„ä½¿ç”¨ï¼ˆåŠå…¶å¸®åŠ©ï¼‰å–å†³äºåº”ç”¨ç¨‹åºçš„å½“å‰ç‰ˆæœ¬ã€‚ä½†æˆ‘ä»¬å¦‚ä½•è·å–è¿™äº›ä¿¡æ¯å‘¢ï¼Ÿ
- en: Getting the applicationâ€™s version number
  id: totrans-188
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è·å–åº”ç”¨ç¨‹åºçš„ç‰ˆæœ¬å·
- en: There is a built-in option (`--version`) that displays the version number of
    the CLI application.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰ä¸€ä¸ªå†…ç½®é€‰é¡¹ï¼ˆ`--version`ï¼‰å¯ä»¥æ˜¾ç¤º CLI åº”ç”¨çš„ç‰ˆæœ¬å·ã€‚
- en: 'To display it, execute the command as follows:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: è¦æ˜¾ç¤ºå®ƒï¼Œè¯·æŒ‰ä»¥ä¸‹æ–¹å¼æ‰§è¡Œå‘½ä»¤ï¼š
- en: '[PRE28]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: But where does this value come from?
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†è¿™ä¸ªå€¼æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Ÿ
- en: 'Well, it can be found in the `.csproj` file, within the `<PropertyGroup>` element
    at the beginning of the file:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: å—¯ï¼Œå®ƒå¯ä»¥åœ¨`.csproj`æ–‡ä»¶çš„å¼€å§‹å¤„çš„`<PropertyGroup>`å…ƒç´ ä¸­æ‰¾åˆ°ï¼š
- en: '[PRE29]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Note that if no `<version>` element is provided, the default value to be returned
    will be `1.0.0`.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œå¦‚æœæ²¡æœ‰æä¾›`<version>`å…ƒç´ ï¼Œåˆ™é»˜è®¤è¿”å›çš„å€¼å°†æ˜¯`1.0.0`ã€‚
- en: Important note
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: é‡è¦æç¤º
- en: 'Here, too, if you want to use the `dotnet run` syntax to query the version
    number of the application, youâ€™ll need to use the extra `--`, as follows: `dotnet
    run -- --``version`.'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™é‡Œï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨`dotnet run`è¯­æ³•æŸ¥è¯¢åº”ç”¨ç¨‹åºçš„ç‰ˆæœ¬å·ï¼Œä½ å°†éœ€è¦ä½¿ç”¨é¢å¤–çš„`--`ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š`dotnet run -- --version`ã€‚
- en: And thatâ€™s it! Youâ€™re now all set and ready to create your first CLI application!
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: å°±è¿™æ ·ï¼ä½ ç°åœ¨å·²ç»å‡†å¤‡å¥½åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª CLI åº”ç”¨ç¨‹åºäº†ï¼
- en: Summary
  id: totrans-199
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ‘˜è¦
- en: In this chapter, we started to build our very own CLI application, *Bookmarkr*,
    which is a bookmark manager provided as a CLI application, so it can be used within
    a Terminal window.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹æ„å»ºæˆ‘ä»¬è‡ªå·±çš„CLIåº”ç”¨ç¨‹åºï¼Œ*Bookmarkr*ï¼Œè¿™æ˜¯ä¸€ä¸ªä½œä¸ºCLIåº”ç”¨ç¨‹åºæä¾›çš„ä¹¦ç­¾ç®¡ç†å™¨ï¼Œå› æ­¤å®ƒå¯ä»¥åœ¨ç»ˆç«¯çª—å£ä¸­ä½¿ç”¨ã€‚
- en: We started with a console application (because remember, â€œAt the core of every
    CLI application is a console applicationâ€), and then we introduced a library for
    parsing its command-line arguments including commands, subcommands, and options
    so we donâ€™t need to reinvent the wheel.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä»ä¸€ä¸ªæ§åˆ¶å°åº”ç”¨ç¨‹åºå¼€å§‹ï¼ˆå› ä¸ºè®°ä½ï¼Œâ€œæ¯ä¸ªCLIåº”ç”¨ç¨‹åºçš„æ ¸å¿ƒéƒ½æ˜¯ä¸€ä¸ªæ§åˆ¶å°åº”ç”¨ç¨‹åºâ€ï¼‰ï¼Œç„¶åæˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªç”¨äºè§£æå…¶å‘½ä»¤è¡Œå‚æ•°çš„åº“ï¼ŒåŒ…æ‹¬å‘½ä»¤ã€å­å‘½ä»¤å’Œé€‰é¡¹ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦é‡æ–°å‘æ˜è½®å­ã€‚
- en: In the upcoming chapter, we will see how to control inputs and outputs and how
    to read data from and write data to a file so we can perform backup and restore
    operations for our bookmarks. This will prove especially useful to import and
    export bookmarks into and out of our bookmark manager application
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•æ§åˆ¶è¾“å…¥å’Œè¾“å‡ºï¼Œä»¥åŠå¦‚ä½•ä»æ–‡ä»¶è¯»å–æ•°æ®å¹¶å°†æ•°æ®å†™å…¥æ–‡ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸ºæˆ‘ä»¬çš„ä¹¦ç­¾æ‰§è¡Œå¤‡ä»½å’Œæ¢å¤æ“ä½œã€‚è¿™å°†å¯¹å°†ä¹¦ç­¾å¯¼å…¥å’Œå¯¼å‡ºæˆ‘ä»¬çš„ä¹¦ç­¾ç®¡ç†å™¨åº”ç”¨ç¨‹åºç‰¹åˆ«æœ‰ç”¨
- en: Your turn!
  id: totrans-203
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è½®åˆ°ä½ äº†ï¼
- en: Following along with the provided code is a great way to learn through practice.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: è·Ÿéšæä¾›çš„ä»£ç æ˜¯ä¸€ç§é€šè¿‡å®è·µå­¦ä¹ çš„å¥½æ–¹æ³•ã€‚
- en: A better way is by challenging yourself to achieve tasks. Hence, I challenge
    you to improve the *Bookmarkr* application by adding the following features.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•æ˜¯æŒ‘æˆ˜è‡ªå·±å®Œæˆä»»åŠ¡ã€‚å› æ­¤ï¼Œæˆ‘æŒ‘æˆ˜ä½ é€šè¿‡æ·»åŠ ä»¥ä¸‹åŠŸèƒ½æ¥æ”¹è¿›*Bookmarkr*åº”ç”¨ç¨‹åºã€‚
- en: 'Task #1 â€“ Delete an existing bookmark'
  id: totrans-206
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 'ä»»åŠ¡ #1 â€“ åˆ é™¤ç°æœ‰ä¹¦ç­¾'
- en: 'The syntax is as follows:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: è¯­æ³•å¦‚ä¸‹ï¼š
- en: '[PRE30]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'It can also be as follows:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒä¹Ÿå¯ä»¥æ˜¯è¿™æ ·çš„ï¼š
- en: '[PRE31]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: If the requested link name does not exist, the application should display a
    warning message to the user. Otherwise, the application should delete that bookmark
    and display a success message to the user.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœè¯·æ±‚çš„é“¾æ¥åç§°ä¸å­˜åœ¨ï¼Œåº”ç”¨ç¨‹åºåº”å‘ç”¨æˆ·æ˜¾ç¤ºè­¦å‘Šæ¶ˆæ¯ã€‚å¦åˆ™ï¼Œåº”ç”¨ç¨‹åºåº”åˆ é™¤è¯¥ä¹¦ç­¾å¹¶å‘ç”¨æˆ·æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯ã€‚
- en: 'Task #2 â€“ Update an existing bookmark'
  id: totrans-212
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 'ä»»åŠ¡ #2 â€“ æ›´æ–°ç°æœ‰ä¹¦ç­¾'
- en: 'The syntax is as follows:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: è¯­æ³•å¦‚ä¸‹ï¼š
- en: '[PRE32]'
  id: totrans-214
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'It can also be as follows:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒä¹Ÿå¯ä»¥æ˜¯è¿™æ ·çš„ï¼š
- en: '[PRE33]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: If the requested link name does not exist, the application should display an
    error message to the user and invite them to use the `add` command to add a new
    bookmark. Otherwise, the application should update the existing bookmark with
    the newly provided URL and display a success message to the user.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœè¯·æ±‚çš„é“¾æ¥åç§°ä¸å­˜åœ¨ï¼Œåº”ç”¨ç¨‹åºåº”å‘ç”¨æˆ·æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ï¼Œå¹¶é‚€è¯·ä»–ä»¬ä½¿ç”¨`add`å‘½ä»¤æ·»åŠ æ–°çš„ä¹¦ç­¾ã€‚å¦åˆ™ï¼Œåº”ç”¨ç¨‹åºåº”ä½¿ç”¨æ–°æä¾›çš„URLæ›´æ–°ç°æœ‰ä¹¦ç­¾ï¼Œå¹¶å‘ç”¨æˆ·æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯ã€‚
- en: 'Task #3 â€“ List all existing bookmarks'
  id: totrans-218
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 'ä»»åŠ¡ #3 â€“ åˆ—å‡ºæ‰€æœ‰ç°æœ‰ä¹¦ç­¾'
- en: 'The syntax is as follows:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: è¯­æ³•å¦‚ä¸‹ï¼š
- en: '[PRE34]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'It can also be as follows:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒä¹Ÿå¯ä»¥æ˜¯è¿™æ ·çš„ï¼š
- en: '[PRE35]'
  id: totrans-222
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'If the list of bookmarks contains no items, the application should display
    a warning message saying that the list of bookmarks is empty and, therefore, there
    is nothing to display. Otherwise, the application should present the list of bookmarks
    as follows:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä¹¦ç­¾åˆ—è¡¨ä¸­æ²¡æœ‰é¡¹ç›®ï¼Œåº”ç”¨ç¨‹åºåº”æ˜¾ç¤ºè­¦å‘Šæ¶ˆæ¯ï¼Œè¯´æ˜ä¹¦ç­¾åˆ—è¡¨ä¸ºç©ºï¼Œå› æ­¤æ²¡æœ‰å†…å®¹å¯æ˜¾ç¤ºã€‚å¦åˆ™ï¼Œåº”ç”¨ç¨‹åºåº”æŒ‰ä»¥ä¸‹æ–¹å¼å‘ˆç°ä¹¦ç­¾åˆ—è¡¨ï¼š
- en: '[PRE36]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
