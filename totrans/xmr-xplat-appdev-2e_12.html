<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;12.&#xA0;App Store Submission"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch12" class="calibre1"/>Chapter 12. App Store Submission</h1></div></div></div><p class="calibre8">Now that you have completed the development of your cross-platform application, the next obvious step is to distribute your app on the app stores. Xamarin apps are distributed in exactly the same way as Java or Objective-C apps; however, there are still a lot of hoops to jump through to successfully get your applications on the stores. iOS has an official approval process, which makes app store submission a much lengthier process than Android. Developers have to wait for a week, a month, or longer depending on how many times the app is rejected. Android requires some additional steps to submit the app on Google Play compared to debugging your application, but you can still get your application submitted in just a few hours.</p><p class="calibre8">In this chapter, we will cover:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The App Store Review Guidelines</li><li class="listitem">Submitting an iOS app to the App Store</li><li class="listitem">Setting up Android signing keys</li><li class="listitem">Submitting an Android app to Google Play</li><li class="listitem">Tips for being successful on app stores</li></ul></div></div>

<div class="book" title="Chapter&#xA0;12.&#xA0;App Store Submission">
<div class="book" title="Following the iOS App Store Review Guidelines"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch12lvl1sec79" class="calibre1"/>Following the iOS App Store Review Guidelines</h1></div></div></div><p class="calibre8">Your application's name, app icon, screenshots, and other aspects are declared on Apple's website called iTunes Connect. Sales reports, app store rejections, contract and bank information, and app <a id="id742" class="calibre1"/>updates are all managed through the website at <a class="calibre1" href="http://itunesconnect.apple.com">http://itunesconnect.apple.com</a>.</p><p class="calibre8">The primary purpose of <a id="id743" class="calibre1"/>Apple's guidelines is to keep the iOS App Store safe and free of malware. There is certainly little to no malware found on the iOS App Store. Generally, the worst thing an iOS application could do to you is bombard you with ads. To a certain extent, the guidelines also reinforce Apple's revenue share with payments within your application. Sadly, some of Apple's guidelines controversially eliminate one of their competitors in a key area on iOS. An example of this would be an app selling e-books, since it would be a direct competitor with iTunes and iBooks.</p><div class="mediaobject"><img src="../images/00091.jpeg" alt="Following the iOS App Store Review Guidelines" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">However, the key point here is to get your applications through the store approval process without facing the App<a id="id744" class="calibre1"/> Store rejections. As long as you are not intentionally trying to break the rules, most applications will not face much difficulty in getting approved by Apple. The most common rejections are related to mistakes by developers, which is a good thing, since you would not want to release an app with a critical issue to the public.</p><p class="calibre8">The App Store Review Guidelines are quite lengthy, so let's break it down into the most common situations you <a id="id745" class="calibre1"/>might run into. A full list of the guidelines are found at <a class="calibre1" href="https://developer.apple.com/appstore/resources/approval/guidelines.html">https://developer.apple.com/appstore/resources/approval/guidelines.html</a>. Note that a valid iOS developer account is required to view this site.</p></div></div>

<div class="book" title="Chapter&#xA0;12.&#xA0;App Store Submission">
<div class="book" title="Following the iOS App Store Review Guidelines">
<div class="book" title="General rules"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch12lvl2sec43" class="calibre1"/>General rules</h2></div></div></div><p class="calibre8">Some general rules to follow are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Applications<a id="id746" class="calibre1"/> that crash, have bugs, or fail critically will be rejected</li><li class="listitem">Applications that do not perform as advertised or contain hidden features will be rejected</li><li class="listitem">Applications that use nonpublic Apple APIs, or read/write files from prohibited locations on the filesystem will be rejected</li><li class="listitem">Apps that provide little value or that have been overdone (such as flashlight, burp, or fart apps) will be rejected</li><li class="listitem">Applications cannot use trademarked words as the app name or keywords without the permission of the trademark holder</li><li class="listitem">Applications cannot distribute copyrighted material illegally</li><li class="listitem">Apps that can simply be implemented by a mobile-friendly website, such as apps with lots of HTML content that provide no native functionality can be rejected</li></ul></div><p class="calibre8">These rules make sense to keep the overall quality and safety of the iOS App Store higher than it would have otherwise been. It can be difficult to get a simple app with very few features into the store due to some of these rules, so make sure that your app is useful and compelling enough for the App Store review team to allow it to be available on the store.</p></div></div></div>

<div class="book" title="Chapter&#xA0;12.&#xA0;App Store Submission">
<div class="book" title="Following the iOS App Store Review Guidelines">
<div class="book" title="Incorrect and incomplete information"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch12lvl2sec44" class="calibre1"/>Incorrect and incomplete information</h2></div></div></div><p class="calibre8">Some rules related to the mistakes made by the developers or incorrect labeling in iTunes Connect are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Applications or<a id="id747" class="calibre1"/> metadata that mention other mobile platforms such as Android, for example, will be rejected</li><li class="listitem">Applications that are<a id="id748" class="calibre1"/> labeled with an incorrect or inappropriate category/genre, screenshots, or icons will be rejected</li><li class="listitem">Developers must give an appropriate age rating and keywords for the application</li><li class="listitem">Support, privacy policy, and marketing URLs must be functional at the time the app is reviewed</li><li class="listitem">Developers should not declare iOS features that are not used; for example, do not declare Game Center or iCloud usage if your application does not actually use these features</li><li class="listitem">Applications that use features such as location or push notifications without the consent of the user will be rejected</li></ul></div><p class="calibre8">These can sometimes <a id="id749" class="calibre1"/>simply be a mistake on the developer's part. Just make sure you double-check all of your application's information <a id="id750" class="calibre1"/>before that final submission to the iOS App Store.</p></div></div></div>

<div class="book" title="Chapter&#xA0;12.&#xA0;App Store Submission">
<div class="book" title="Following the iOS App Store Review Guidelines">
<div class="book" title="Content present in the application"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch12lvl2sec45" class="calibre1"/>Content present in the application</h2></div></div></div><p class="calibre8">Additionally, Apple has the following rules regarding content that can be contained within an application:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Applications that contain <a id="id751" class="calibre1"/>objectionable content or content that can be considered rude will be rejected</li><li class="listitem">Applications that are designed to upset or disgust users will be rejected</li><li class="listitem">Applications that contain excessive imagery of violence will be rejected</li><li class="listitem">Applications that target a specific government, race, culture, or company as enemies will be rejected</li><li class="listitem">Applications with icons or screenshots that do not adhere to the four plus age rating might be rejected</li></ul></div><p class="calibre8">The app store delivers apps to children and adults alike. Apple also supports an <span class="strong"><strong class="calibre2">over 17</strong></span> age restriction on applications; however, this will seriously limit the number of potential users for your app. It's best to keep applications clean and appropriate for as many ages as possible.</p></div></div></div>

<div class="book" title="Chapter&#xA0;12.&#xA0;App Store Submission">
<div class="book" title="Following the iOS App Store Review Guidelines">
<div class="book" title="Apple's 70/30 revenue share"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch12lvl2sec46" class="calibre1"/>Apple's 70/30 revenue share</h2></div></div></div><p class="calibre8">The next<a id="id752" class="calibre1"/> category of rules<a id="id753" class="calibre1"/> listed related to Apple's 70/30 revenue share from the App Store are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Applications that link to products or software sold on a website might be rejected.</li><li class="listitem">Apps using a payment mechanism other than<a id="id754" class="calibre1"/> iOS <span class="strong"><strong class="calibre2">in-app purchases</strong></span> (<span class="strong"><strong class="calibre2">IAPs</strong></span>) will be rejected.</li><li class="listitem">Applications that use IAPs to purchase physical goods will be rejected.</li><li class="listitem">Apps can display digital content that is purchased outside the application as long as you <a id="id755" class="calibre1"/>cannot link to or purchase from within the app. All digital content purchased within the app must use IAPs.</li></ul></div><p class="calibre8">These rules are easy<a id="id756" class="calibre1"/> to follow as long as you are not trying to circumvent Apple's revenue share in the App Store. Always use IAPs to unlock the digital content within your applications.</p></div></div></div>

<div class="book" title="Chapter&#xA0;12.&#xA0;App Store Submission">
<div class="book" title="Following the iOS App Store Review Guidelines">
<div class="book" title="General Tips"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_6"><a id="ch12lvl2sec47" class="calibre1"/>General Tips</h2></div></div></div><p class="calibre8">Last but not least, here are some general tips related to App Store rejections:</p><div class="book"><ul class="itemizedlist"><li class="listitem">If your application requires a username and password, make sure you include the credentials under the <span class="strong"><strong class="calibre2">Demo Account Information</strong></span> section for the app review team to use.</li><li class="listitem">If your application <a id="id757" class="calibre1"/>contains IAPs or other features that the app review team must explicitly test, make sure you include instructions in <span class="strong"><strong class="calibre2">Review Notes</strong></span> to reach the appropriate screen in your application.</li><li class="listitem">Schedule ahead! Don't let your product's app rejection ruin a deadline; plan at least a month into your schedule for app store approval.</li><li class="listitem">When in doubt, be as descriptive as possible in the <span class="strong"><strong class="calibre2">Review Notes</strong></span> section of iTunes Connect.</li></ul></div><p class="calibre8">If your application does get rejected, most of the time there is an easy resolution. Apple's review team will explicitly reference the guidelines if a rule is broken and will include the relevant crash logs and screenshots. If you can correct an issue without submitting a new build, you can respond to the app review team via the <span class="strong"><strong class="calibre2">Resolution Center</strong></span> option in the iTunes Connect website. If you upload a new build, this will put your application at the end of the queue to be reviewed.</p><p class="calibre8">There are certainly more in-depth and specific rules for features in iOS, so make sure you take a look at the complete set of guidelines if you are thinking about doing something creative or out of the box with an iOS feature. As always, if you are unsure about a specific guideline, it is best to seek professional, legal advice on the matter. Calling Apple's support number will not shed any light on the subject since its support personnel are not allowed to give advice <a id="id758" class="calibre1"/>related to the App Store Review Guidelines.</p></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Submitting an app to the iOS App Store"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch12lvl1sec80" class="calibre1"/>Submitting an app to the iOS App Store</h1></div></div></div><p class="calibre8">Before we get started with submitting our application to the store, we need to review a short checklist to make<a id="id759" class="calibre1"/> sure you are ready to do so. It is a pain to reach a point in the process and realize you have something missing or haven't done something quite right. Additionally, there are a few requirements that will need to be met by a designer or the marketing team, which should not necessarily be left to the developer.</p><p class="calibre8">Make sure you have done the following prior to beginning with the submission:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Your application's <code class="literal">Info.plist</code> file is completely filled out. This includes splash screen images, app icons, app name, and other settings that need to be filled out for advanced features. Note that the app name here is what is displayed under the application icon. It can be differ from the App Store name, and unlike the App Store name, it does not have to be unique from all the other apps in the store.</li><li class="listitem">You have at least three names selected for your app on the App Store. A name might be unavailable even if it is not currently taken on the App Store, as it could have been previously taken by a developer for an app that was removed from the store for some reason.</li><li class="listitem">You have a large 1024 x 1024 app icon image. There isn't a need to include this file in the application, unless you are distributing enterprise or ad hoc builds through iTunes (the desktop application).</li><li class="listitem">You have at least one screenshot per device that your application is targeting. This includes iPhone 4 retina, iPhone 5, iPhone 6, iPhone 6 Plus, and iPad retina sized screenshots for a universal iOS application. However, I would strongly recommend that you fill out all the five screenshots slots.</li><li class="listitem">You have a well-written and edited description for the App Store.</li><li class="listitem">You have selected a set of keywords to improve the search for your application.</li></ul></div></div>

<div class="book" title="Submitting an app to the iOS App Store">
<div class="book" title="Creating a distribution provisioning profile"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch12lvl2sec48" class="calibre1"/>Creating a distribution provisioning profile</h2></div></div></div><p class="calibre8">Once you have<a id="id760" class="calibre1"/> double-checked the preceding checklist, we can begin the process for submission. Our first step will be to create a provisioning<a id="id761" class="calibre1"/> profile for the App Store distribution.</p><p class="calibre8">Let's begin by creating a new provisioning profile by carrying out the following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Navigate to <a class="calibre1" href="http://developer.apple.com/ios">http://developer.apple.com/ios</a>.</li><li class="listitem" value="2">Click on <span class="strong"><strong class="calibre2">Certificates, Identifiers &amp; Profiles</strong></span> in the right-hand navigation bar.</li><li class="listitem" value="3">Click on <span class="strong"><strong class="calibre2">Provisioning Profiles</strong></span>.</li><li class="listitem" value="4">Click on the plus button in the top-right corner of the window.</li><li class="listitem" value="5">Select <span class="strong"><strong class="calibre2">App Store</strong></span> under <span class="strong"><strong class="calibre2">Distribution</strong></span> and click on <span class="strong"><strong class="calibre2">Continue</strong></span>.</li><li class="listitem" value="6">Select your app ID. You should have created one already in <a class="calibre1" title="Chapter 7. Deploying and Testing on Devices" href="part0056_split_000.html#page">Chapter 7</a>, <span class="strong"><em class="calibre12">Deploying and Testing on Devices</em></span>; click on <span class="strong"><strong class="calibre2">Continue</strong></span>.</li><li class="listitem" value="7">Select the certificate for the provisioning profile. Normally, there will be only one option here. Click on <span class="strong"><strong class="calibre2">Continue</strong></span>.</li><li class="listitem" value="8">Give the profile an appropriate name such as <code class="literal">MyAppAppStore</code>. Click on <span class="strong"><strong class="calibre2">Generate</strong></span>.</li><li class="listitem" value="9">Once complete, you can download and install the profile manually or synchronize your provisioning profiles in Xcode under <span class="strong"><strong class="calibre2">Preferences</strong></span> | <span class="strong"><strong class="calibre2">Accounts</strong></span>, as we did earlier in the book.</li></ol><div class="calibre13"/></div><p class="calibre8">You will arrive at the following screen when successful:</p><div class="mediaobject"><img src="../images/00092.jpeg" alt="Creating a distribution provisioning profile" class="calibre9"/></div><p class="calibre10"> </p></div></div>

<div class="book" title="Submitting an app to the iOS App Store">
<div class="book" title="Adding your app to iTunes Connect"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch12lvl2sec49" class="calibre1"/>Adding your app to iTunes Connect</h2></div></div></div><p class="calibre8">For our next<a id="id762" class="calibre1"/> set of steps, we will start filling out the details of your application to be displayed on the Apple App Store.</p><p class="calibre8">We can begin by<a id="id763" class="calibre1"/> performing the following set of steps to set up your app in iTunes Connect:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Navigate<a id="id764" class="calibre1"/> to <a class="calibre1" href="http://itunesconnect.apple.com">http://itunesconnect.apple.com</a> and log in.</li><li class="listitem" value="2">Click on <span class="strong"><strong class="calibre2">My Apps</strong></span>.</li><li class="listitem" value="3">Click on the plus button in the top-left corner of the window, followed by <span class="strong"><strong class="calibre2">New iOS App</strong></span>.</li><li class="listitem" value="4">Enter an app <span class="strong"><strong class="calibre2">Name</strong></span> to be displayed on the App Store.</li><li class="listitem" value="5">Enter the <span class="strong"><strong class="calibre2">Version</strong></span> to be displayed on the App Store.</li><li class="listitem" value="6">Choose a <span class="strong"><strong class="calibre2">Primary Language</strong></span> for your app.</li><li class="listitem" value="7">Enter a value in the <span class="strong"><strong class="calibre2">SKU</strong></span> field. This is used to identify your app in reports.</li><li class="listitem" value="8">Select your <span class="strong"><strong class="calibre2">Bundle ID</strong></span>. You should have already created one in <a class="calibre1" title="Chapter 7. Deploying and Testing on Devices" href="part0056_split_000.html#page">Chapter 7</a>, <span class="strong"><em class="calibre12">Deploying and Testing on Devices</em></span>; click on <span class="strong"><strong class="calibre2">Continue</strong></span>.</li><li class="listitem" value="9">There is a lot of required information to fill out here. If you miss any, iTunes Connect is pretty helpful at displaying warnings. It should be fairly user-friendly since the site is meant to be used by marketing professionals as well as developers.</li><li class="listitem" value="10">Click on <span class="strong"><strong class="calibre2">Save</strong></span> after making your changes.</li></ol><div class="calibre13"/></div><p class="calibre8">There are a lot of <a id="id765" class="calibre1"/>optional fields too. Make sure you fill out <span class="strong"><strong class="calibre2">Review Notes</strong></span> or <span class="strong"><strong class="calibre2">Demo Account Information</strong></span>. If there is any additional information, the app review team will require to review your application. When complete, you will <a id="id766" class="calibre1"/>see your application with the status <span class="strong"><strong class="calibre2">Prepare for Submission</strong></span>, as seen in the following screenshot:</p><div class="mediaobject"><img src="../images/00093.jpeg" alt="Adding your app to iTunes Connect" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">Now we need to actually upload our app to iTunes Connect. You must either upload a build from Xcode or Application Loader. Either method will produce the same results, but some prefer to use Application Loader if a nondeveloper submits the app.</p></div></div>

<div class="book" title="Submitting an app to the iOS App Store">
<div class="book" title="Making an iOS binary for the App Store"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch12lvl2sec50" class="calibre1"/>Making an iOS binary for the App Store</h2></div></div></div><p class="calibre8">Our last step for App<a id="id767" class="calibre1"/> Store submission is to provide our binary file that contains our application to the store. We need to create the <span class="strong"><strong class="calibre2">Release</strong></span><a id="id768" class="calibre1"/> build of our<a id="id769" class="calibre1"/> application, signed with the distribution provisioning profile we created earlier in this chapter.</p><p class="calibre8">Xamarin Studio makes this very simple. We can configure the build as follows:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Click on the solution configuration dropdown in the top-left corner of Xamarin Studio and select <span class="strong"><strong class="calibre2">AppStore</strong></span>.</li><li class="listitem" value="2">By default, Xamarin Studio will set all the configuration options that you need to submit this build configuration.</li><li class="listitem" value="3">Next, select your iOS<a id="id770" class="calibre1"/> application project and navigate to <span class="strong"><strong class="calibre2">Build</strong></span> | <span class="strong"><strong class="calibre2">Archive</strong></span>.</li></ol><div class="calibre13"/></div><p class="calibre8">After a few moments, Xamarin Studio will open the archived builds menu, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00094.jpeg" alt="Making an iOS binary for the App Store" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">The process creates<a id="id771" class="calibre1"/> a <code class="literal">xarchive</code> file that is stored in <code class="literal">~/Library/Developer/Xcode/Archives</code>. The <span class="strong"><strong class="calibre2">Validate…</strong></span> button will check your archive for any potential errors that can occur during the upload, while <span class="strong"><strong class="calibre2">Distribute…</strong></span> will actually submit the application to the store. Sadly, at the time of writing this book, the <span class="strong"><strong class="calibre2">Distribute…</strong></span> button merely launches the <span class="strong"><strong class="calibre2">Application Loader</strong></span> application, which cannot upload the <code class="literal">xarchive</code> files. Until Xamarin works this out, you can access these options for the archive in Xcode by navigating to <span class="strong"><strong class="calibre2">Window</strong></span> | <span class="strong"><strong class="calibre2">Organizer</strong></span> in the <span class="strong"><strong class="calibre2">Archives</strong></span> tab.</p><p class="calibre8">Go ahead and locate the archive in Xcode; you might have to restart Xcode if it does not appear, and perform the following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Click on <span class="strong"><strong class="calibre2">Distribute…</strong></span>. Don't worry, it will validate the archive before uploading.</li><li class="listitem" value="2">Select <span class="strong"><strong class="calibre2">Submit to the iOS App Store</strong></span> and click on <span class="strong"><strong class="calibre2">Next</strong></span>.</li><li class="listitem" value="3">Log in with your credentials for iTunes Connect and click on <span class="strong"><strong class="calibre2">Next</strong></span>.</li><li class="listitem" value="4">Select the appropriate provisioning profile for the application and click on <span class="strong"><strong class="calibre2">Submit</strong></span>.</li></ol><div class="calibre13"/></div><p class="calibre8">After several moments, depending on the size of your application, you will get a confirmation screen, and the status of your application will change to <span class="strong"><strong class="calibre2">Upload Received</strong></span>. The following<a id="id772" class="calibre1"/> screenshot shows what a confirmation screen looks<a id="id773" class="calibre1"/> like:</p><div class="mediaobject"><img src="../images/00095.jpeg" alt="Making an iOS binary for the App Store" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">If you return to iTunes Connect, and navigate to the <span class="strong"><strong class="calibre2">Prerelease</strong></span> tab, you will see the build you just uploaded with a status of <span class="strong"><strong class="calibre2">Processing</strong></span>:</p><div class="mediaobject"><img src="../images/00096.jpeg" alt="Making an iOS binary for the App Store" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">After a few minutes, the build will get processed and can be added to an App Store release. The next <a id="id774" class="calibre1"/>step is to select the build under the <span class="strong"><strong class="calibre2">Versions</strong></span> tab, which is under the <span class="strong"><strong class="calibre2">Build</strong></span> section, as shown<a id="id775" class="calibre1"/> in the following screenshot:</p><div class="mediaobject"><img src="../images/00097.jpeg" alt="Making an iOS binary for the App Store" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">After hitting <span class="strong"><strong class="calibre2">Save</strong></span>, you should be able to click on <span class="strong"><strong class="calibre2">Submit for Review</strong></span> without any remaining warnings. Next, answer the three questions about export laws, ad identifiers, and so on and hit <span class="strong"><strong class="calibre2">Submit</strong></span> as the final step to submit your app.</p><p class="calibre8">At this point, you have no control over the status of your application while its waiting in line to be reviewed by an Apple employee. This can take one to two weeks, depending on the current workload of apps to be reviewed and the time of the year. Updates will also go through the same process, but the wait time is generally a bit shorter than a new app submission.</p><p class="calibre8">Luckily, there are a few situations where you can fast track this process. If you navigate to <a class="calibre1" href="https://developer.apple.com/appstore/contact/?topic=expedite">https://developer.apple.com/appstore/contact/?topic=expedite</a>, you can request for an expedited app review. Your issue must either be a critical bug fix or a time-sensitive event related to your application. Apple doesn't guarantee accepting an expedite request, but it can be a lifesaver in times of need.</p><p class="calibre8">Additionally, if something goes wrong with a build you submitted, you can cancel the submission by going to<a id="id776" class="calibre1"/> the top of the app details page and selecting <span class="strong"><strong class="calibre2">remove this version from review</strong></span>. In situations where you discover a bug after submission, this allows you to upload a new build<a id="id777" class="calibre1"/> in its place.</p></div></div>
<div class="book" title="Signing your Android applications"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch12lvl1sec81" class="calibre1"/>Signing your Android applications</h1></div></div></div><p class="calibre8">All Android packages (the <code class="literal">apk</code> files) are signed by a certificate or a <code class="literal">keystore</code> file to enable their installation on a device. When you are debugging/developing your application, your package is<a id="id778" class="calibre1"/> automatically signed by a development certificate that was generated by the Android SDK. It is fine to use this certificate for development or even beta testing; however, it cannot be used on an application distributed to Google Play.</p><p class="calibre8">To create a production certificate, we can use a command-line tool included with the Android SDK named <code class="literal">keytool</code>. To create your own <code class="literal">keystore</code> file, run the following line in a terminal window:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">keytool -genkey -v -keystore &lt;filename&gt;.keystore -alias &lt;key-name&gt; -keyalg RSA -keysize 2048 -validity 10000</strong></span>
</pre></div><p class="calibre8">Replace <code class="literal">&lt;filename&gt;</code> and <code class="literal">&lt;key-name&gt;</code> with appropriate terms for your application. The <code class="literal">keytool</code> command-line tool will then prompt several questions for you to identify the party that is signing the application. This is very similar to an<a id="id779" class="calibre1"/> <span class="strong"><strong class="calibre2">SSL</strong></span> certificate if you have ever worked with one before. You will also be prompted for a keystore password and a key password; you can let these be the same or change them, depending on how secure you want your key to be.</p><p class="calibre8">Your console output will look something like what is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00098.jpeg" alt="Signing your Android applications" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">When complete, you should store your <code class="literal">keystore</code> file and password in a very safe place. Once you sign an application with this <code class="literal">keystore</code> file and submit it to Google Play, you will not be able to submit the updates of the application without signing it with the same key. There is no <a id="id780" class="calibre1"/>mechanism to retrieve a lost <code class="literal">keystore</code> file. If you do happen to lose it, your only option is to remove the existing app from the store, and submit a new app that contains your updated changes. This can potentially cause you to lose a lot of users.</p><p class="calibre8">To sign an Android package, you can use another command-line tool included with the Android SDK named <code class="literal">jarsigner</code>. However, Xamarin Studio simplifies this process by providing a user interface to run your package.</p><p class="calibre8">Open your Android project in Xamarin Studio and carry out the following steps to walk you through the process of signing an <code class="literal">apk</code> file:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Change your build configuration to <span class="strong"><strong class="calibre2">Release</strong></span>.</li><li class="listitem" value="2">Select the appropriate project and navigate to <span class="strong"><strong class="calibre2">Project</strong></span> | <span class="strong"><strong class="calibre2">Publish Android Application.</strong></span></li><li class="listitem" value="3">Select the <code class="literal">keystore</code> file that you just created.</li><li class="listitem" value="4">Enter the values in the <span class="strong"><strong class="calibre2">Password</strong></span>, <span class="strong"><strong class="calibre2">Alias</strong></span>, and <span class="strong"><strong class="calibre2">Key Password</strong></span> fields you used when creating the key. Click on <span class="strong"><strong class="calibre2">Forward</strong></span>.</li><li class="listitem" value="5">Choose a directory to deploy the <code class="literal">apk</code> file and click on <span class="strong"><strong class="calibre2">Create</strong></span>.</li></ol><div class="calibre13"/></div><p class="calibre8">When successful, a pad in Xamarin Studio will appear that displays the progress. The pad that appears looks like what is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00099.jpeg" alt="Signing your Android applications" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">It is important to note that Xamarin.Android automatically runs a second tool called <code class="literal">zipalign</code> after signing<a id="id781" class="calibre1"/> the APK. This tool aligns the bytes within an APK to improve the start up time of your app. If you plan on running <code class="literal">jarsigner</code> from the command line itself, you must run <code class="literal">zipalign</code> as well. Otherwise, the app will crash on startup, and Google Play will also not accept the APK.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Submitting the app to Google Play"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch12lvl1sec82" class="calibre1"/>Submitting the app to Google Play</h1></div></div></div><p class="calibre8">Once you have a signed the Android package, submitting your application to Google Play is relatively painless <a id="id782" class="calibre1"/>compared to iOS. Everything can be completed via the <span class="strong"><strong class="calibre2">Developer Console</strong></span> tab in the browser without having to upload the <a id="id783" class="calibre1"/>package with an OS X application.</p><p class="calibre8">Before starting the submission, make sure you have completed the tasks on the following checklist:</p><div class="book"><ul class="itemizedlist"><li class="listitem">You have declared an <code class="literal">AndroidManifest.xml</code> file with your application name, package name, and icon declared.</li><li class="listitem">You have an <code class="literal">apk</code> file signed with a production key.</li><li class="listitem">You have selected an application name for Google Play. This is not unique across the store.</li><li class="listitem">You have a 512 x 512 high-resolution icon image for Google Play.</li><li class="listitem">You have a well-written and edited description for the store.</li><li class="listitem">You have at least two screenshots. However, I recommend that you use all the eight slots that include sizes for phones and 7- and 10-inch tablets.</li></ul></div><p class="calibre8">After going through the checklist, you should be fully prepared to submit your application to Google Play. The tab to add new apps looks like the following screenshot:</p><div class="mediaobject"><img src="../images/00100.jpeg" alt="Submitting the app to Google Play" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">To begin <a id="id784" class="calibre1"/>with, navigate to <a class="calibre1" href="https://play.google.com/apps/publish">https://play.google.com/apps/publish</a> and log in to your account, then <a id="id785" class="calibre1"/>carry out the following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Select the <span class="strong"><strong class="calibre2">All Applications</strong></span> tab and click on <span class="strong"><strong class="calibre2">Add new application</strong></span>.</li><li class="listitem" value="2">Enter a name<a id="id786" class="calibre1"/> to be displayed for the app on Google Play and click on <span class="strong"><strong class="calibre2">Upload APK</strong></span>.</li><li class="listitem" value="3">Click on <span class="strong"><strong class="calibre2">Upload your first APK to Production</strong></span>.</li><li class="listitem" value="4">Browse to your signed <code class="literal">apk</code> file and click on <span class="strong"><strong class="calibre2">OK</strong></span>. You will see the <span class="strong"><strong class="calibre2">APK</strong></span> tab's checkmark turn green.</li><li class="listitem" value="5">Select the <span class="strong"><strong class="calibre2">Store Listing</strong></span> tab.</li><li class="listitem" value="6">Fill out all the required fields, including <span class="strong"><strong class="calibre2">Description</strong></span>, <span class="strong"><strong class="calibre2">High-res Icon</strong></span>, <span class="strong"><strong class="calibre2">Categorization</strong></span>, and <span class="strong"><strong class="calibre2">Privacy Policy</strong></span> (or select the checkbox that says you aren't submitting a policy), and provide at least two screenshots. </li><li class="listitem" value="7">Click on <span class="strong"><strong class="calibre2">Save</strong></span>. You will see the checkmark on the <span class="strong"><strong class="calibre2">Store Listing</strong></span> tab turn green.</li><li class="listitem" value="8">Select the <span class="strong"><strong class="calibre2">Pricing &amp; Distribution</strong></span> tab.</li><li class="listitem" value="9">Select a price and the countries you wish to distribute to.</li><li class="listitem" value="10">Accept the agreement for <span class="strong"><strong class="calibre2">Content guidelines</strong></span> and <span class="strong"><strong class="calibre2">US export laws</strong></span>.</li><li class="listitem" value="11">Click on <span class="strong"><strong class="calibre2">Save</strong></span>. You will see the checkmark on the <span class="strong"><strong class="calibre2">Pricing &amp; Distribution</strong></span> tab turn green.</li><li class="listitem" value="12">Select<a id="id787" class="calibre1"/> the <span class="strong"><strong class="calibre2">Ready to publish</strong></span> dropdown in the top-right corner, as shown in the following<a id="id788" class="calibre1"/> screenshot, and select <span class="strong"><strong class="calibre2">Publish this app</strong></span>:</li></ol><div class="calibre13"/></div><div class="mediaobject"><img src="../images/00101.jpeg" alt="Submitting the app to Google Play" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">In a few hours, your application will be available on Google Play. No approval process is required, and the updates to your apps are equally painless.</p></div>

<div class="book" title="Submitting the app to Google Play">
<div class="book" title="Google Play Developer Program Policies"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch12lvl2sec51" class="calibre1"/>Google Play Developer Program Policies</h2></div></div></div><p class="calibre8">To provide a safe store environment, Google retroactively deletes applications that violate its policies and will generally delete the entire developer account—not just the application. Google's policies<a id="id789" class="calibre1"/> are are aimed at improving the quality of applications available on Google Play and are not quite as lengthy as the set of rules on iOS. That being said, the following is a basic summary of Google's policies:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Apps cannot have sexually explicit material, gratuitous violence, or hate speeches.</li><li class="listitem">Apps cannot infringe upon copyrighted material.</li><li class="listitem">Apps cannot be malicious in nature, or capture private information of users without their knowledge.</li><li class="listitem">Apps cannot modify the basic functionalities of users' devices (such as modifying the home screen) without their consent. If applications include this functionality, it must be easy for the users to turn off this functionality.</li><li class="listitem">All the digital content within your application must use Google Play's in-app billing (or in-app purchases). Physical goods cannot be purchased with IAPs.</li><li class="listitem">Applications must not abuse the cellular network usage that could result in the user incurring high bill amounts.</li></ul></div><p class="calibre8">As with iOS, if you have <a id="id790" class="calibre1"/>a concern about one of the policies, it is best to procure professional, legal advice about the policy. For a complete list<a id="id791" class="calibre1"/> of the policies, visit <a class="calibre1" href="https://play.google.com/about/developer-content-policy.html">https://play.google.com/about/developer-content-policy.html</a>.</p><div class="mediaobject"><img src="../images/00102.jpeg" alt="Google Play Developer Program Policies" class="calibre9"/></div><p class="calibre10"> </p></div></div>
<div class="book" title="Tips to make a successful mobile app"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch12lvl1sec83" class="calibre1"/>Tips to make a successful mobile app</h1></div></div></div><p class="calibre8">From my personal experience, I have been submitting applications built with Xamarin to the iOS App Store and Google Play for quite some time. After delivering over 50 mobile applications<a id="id792" class="calibre1"/> totaling tens of millions downloads, a lot of lessons are to be learned about what makes a mobile application a success or a failure. Xamarin apps are indistinguishable from Java or Objective-C apps to the end user, so you can make your app successful by following the same patterns as standard iOS or Android applications.</p><p class="calibre8">There is quite a bit you can do to make your app more successful. Here are some tips to follow:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre2">Pricing it right</strong></span>: If your application appeals to almost anyone, consider a <span class="strong"><strong class="calibre2">freemium</strong></span> model that makes revenue from ad placements or in-app purchases. However, if your app is fairly niche, you will be much better off pricing your app at $1.99 or higher. However, premium apps must hold a higher standard of quality.</li><li class="listitem"><span class="strong"><strong class="calibre2">Knowing your competition</strong></span>: If there are other apps in the same space as yours, make sure your application is better or offers a much wider feature set than the competition. It might also be a good idea to avoid the space altogether if there are already several apps with the same functionality as yours.</li><li class="listitem"><span class="strong"><strong class="calibre2">Prompting loyal users for reviews</strong></span>: It is a good idea to prompt users for a review after they <a id="id793" class="calibre1"/>open your application several times. This gives users who really like your application a chance to write a good review.</li><li class="listitem"><span class="strong"><strong class="calibre2">Supporting your users</strong></span>: Provide a valid support e-mail address or Facebook page for you to easily interact with your users. Respond to bug reports and negative reviews—Google Play even has the option to e-mail users who write reviews on your app. Adding a feedback button directly in the app is also a great option here.</li><li class="listitem"><span class="strong"><strong class="calibre2">Keeping your application small</strong></span>: Staying under the 100 MB limit on iOS or 50 MB on Google Play will allow users to download your application on their cellular data plan. Doing this negates the possibility of friction to install your app, as users will associate a lengthy download with a slow running application.</li><li class="listitem"><span class="strong"><strong class="calibre2">Submitting your app to review websites</strong></span>: Try to get as many reviews on the web as possible. Apple provides the ability to send coupon codes, but with the Android version of your app, you can send your actual Android package. Sending your app to review websites or popular Youtube channels can be a great way to free advertising.</li><li class="listitem"><span class="strong"><strong class="calibre2">Using an app analytics or a tracking service</strong></span>: Reporting your app's usage and crash reports can be very helpful to understand your users. Fixing crashes in the wild and modifying your user interface to improve spending behavior is very important. Examples of these would be to add Google Analytics or Flurry Analytics to your app.</li></ul></div><p class="calibre8">There is no silver bullet to having a successful mobile application. If your application is compelling, fulfills a need, and functions quickly and properly, you could have the next hit on your hands. Being able to deliver a consistent cross-platform experience using Xamarin will also give you a head start on your competitors.</p></div>
<div class="book" title="Summary"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch12lvl1sec84" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">In this chapter, we covered everything you need to know to submit your application to the iOS App Store and Google Play. We covered the App Store Review Guidelines and simplified them for the most common situations you might run into during the approval process. We went over the set up process for provisioning your app's metadata and upload your binary to iTunes Connect. For Android, we went over how to create a production signing key and sign your Android package (<code class="literal">apk</code>) file. We went over submitting an application to Google Play, and finished the chapter with tips on how to deliver a successful and hopefully profitable application to the app stores.</p><p class="calibre8">I hope that with this book, you have experienced an end-to-end, practical walkthrough to develop real-world, cross-platform applications with Xamarin. Using C#, which is such a great language compared to the alternatives, you should be very productive. Additionally, you will save time by sharing code without, in any way, limiting the native experience for your users.</p></div></body></html>