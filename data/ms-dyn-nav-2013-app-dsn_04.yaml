- en: Chapter 4. Relationship Management
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第四章  关系管理
- en: Relationship management software is typically a result of what ERP applications
    have achieved.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 关系管理软件通常是ERP应用所取得的成果。
- en: In earlier days, everyone had a rolodex on their desk with phone numbers and
    addresses and salespeople would always know by heart who was a good customer and
    which customers were always late paying or had bad margins.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在早期，每个人在桌子上都有一个名片夹，里面装有电话号码和地址，销售人员总是能记住谁是好客户，哪些客户总是付款晚或利润低。
- en: The introduction of RM software completely changed that, allowing us to maintain
    all companies' contacts in a single place and analyze sales data very easily.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: RM软件的引入完全改变了这一点，使我们能够在一个地方维护所有公司的联系人，并非常容易地分析销售数据。
- en: Relationship management has been part of Microsoft Dynamics since Version 2.0
    and was dramatically changed and improved in Version 3.0\. The current Microsoft
    Dynamics NAV RM software is mostly the same as in that version, except for the
    Microsoft Outlook integration that keeps changing in every version.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 关系管理自Microsoft Dynamics 2.0版本以来一直是其一部分，并在3.0版本中经历了巨大的变化和改进。当前的Microsoft Dynamics
    NAV RM软件与那个版本基本相同，除了与Microsoft Outlook的集成在每一版本中都在变化。
- en: In this chapter, we will deep dive into this module, which is very complete.
    After reading this chapter, you will have a good understanding of the concepts
    and how to maintain master data and analyze transaction data.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将深入探讨这个非常完整的模块。阅读本章后，你将很好地理解概念以及如何维护主数据和分析交易数据。
- en: We will also perform some application changes in the relationship management
    part.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还将在关系管理部分进行一些应用程序更改。
- en: How companies work
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 公司如何运作
- en: In traditional accounting software, we differentiate customers and vendors as
    business relations for invoices, but companies have many more relations we would
    like to register in our system.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在传统的会计软件中，我们将客户和供应商作为业务关系用于发票，但公司有许多我们希望在系统中注册的其他关系。
- en: Also, a company or person can have multiple relations with our company. The
    best example is my relationship with Microsoft. As everyone, I use the software
    so I am a customer, both in my business and personal life. On the other hand,
    Microsoft hires me to teach workshops and do presentations, which makes me a vendor.
    As an MVP, I have a totally different relationship with them. They give me an
    award and invite me to special events and allow me to access the company store.
    They also ask for my advice in future versions, so to them, I am their consultant.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，公司或人员可以与我们公司有多个关系。最好的例子是我与Microsoft的关系。像所有人一样，我使用该软件，因此我是客户，无论是在我的商业还是个人生活中。另一方面，Microsoft雇佣我来教授研讨会和进行演示，这使我成为供应商。作为MVP，我与他们的关系完全不同。他们给我颁发奖项，邀请我参加特别活动，并允许我访问公司商店。他们还要求我在未来的版本中提供建议，因此对他们来说，我是他们的顾问。
- en: So one person or company can have different roles in RM. Microsoft Dynamics
    NAV is able to handle all that while maintaining a single point of data entry
    and maintenance.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，一个人或公司可以在RM中扮演不同的角色。Microsoft Dynamics NAV能够处理所有这些，同时保持单一的数据输入和维护点。
- en: Unlike financial applications, RM is much more flexible. The functionality and
    rules of financial applications are defined by government regulations and are
    mandatory for companies to comply with. Companies are not forced to use RM but
    once implemented, everyone understands the benefits and never want to do without
    it.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 与财务应用不同，RM具有更大的灵活性。财务应用的功能和规则由政府法规定义，并且公司必须遵守。公司不是被迫使用RM，但一旦实施，每个人都会理解其好处，并且不愿意放弃它。
- en: Contacts
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 联系人
- en: The starting point of the RM application is the **Contact** table. This is where
    we store the address, phone numbers, e-mail addresses, and so on of everyone we
    know.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: RM应用的起点是**联系人**表。这是我们存储我们所知道每个人的地址、电话号码、电子邮件地址等的地方。
- en: When we open the **Contact list**, we see that companies and persons are grouped
    for an easy overview.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们打开**联系人列表**时，我们会看到公司和人员被分组以便于快速浏览。
- en: '![Contacts](img/0365EN_04_01.jpg)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![联系人](img/0365EN_04_01.jpg)'
- en: The cut-off text is not important for reference in this screenshot
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 截止文本在此截图中的参考并不重要
- en: As we learned in the previous chapters, a page in Microsoft Dynamics NAV is
    based on a single table, so that must mean that companies and persons are stored
    in the same table.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们在前面的章节中学到的，Microsoft Dynamics NAV中的一个页面基于一个单一的表，这意味着公司和人员必须存储在同一个表中。
- en: When we open the contact card, we can clearly see that this is the case. The
    **Type** field indicates whether the contact is a business or a person and whether
    the person belongs to a company. The **Company No.** field refers to a contact
    with type **Company**. This is a one-to-many relationship meaning that if a physical
    person has a relationship with more than one company, he or she needs to be maintained
    for each company with a relation.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们打开联系人卡时，我们可以清楚地看到这一点。**类型**字段表示联系人是一个商业实体还是个人，以及该个人是否属于一家公司。**公司编号**字段指的是类型为**公司**的联系人。这是一个一对多关系，意味着如果一个物理人与多家公司有联系，他或她需要为每个有关系的公司维护一个。
- en: 'The following screenshot is from the contact card in Microsoft Dynamics NAV:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图来自Microsoft Dynamics NAV中的联系人卡：
- en: '![Contacts](img/0365EN_04_02.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![联系人](img/0365EN_04_02.jpg)'
- en: 'Let''s step through the tabs and look at some important fields:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们浏览一下选项卡并查看一些重要字段：
- en: '**No.**: This is a unique key value determined by a Number Series. Companies
    and persons have the same numbering.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**编号**：这是一个由数字序列确定的唯一键值。公司和个人的编号相同。'
- en: '**Type**: This indicates whether this contact is a person or a company.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**类型**：这表示此联系人是一个人还是一家公司。'
- en: '**Company Name**: When the contact is a person and connected to a company,
    it is automatically populated with that company''s name.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**公司名称**：当联系人是个人且与公司相关联时，会自动填充该公司的名称。'
- en: '**Name**: This is the name of the contact. If the contact is a person, we can
    click on the **AssistEdit** button next to the name to open the name details.
    The name is automatically broken down in to first, middle, and last name depending
    on the number of words we enter. However, if our contact has a more complex name
    like "Walter van den Broek", which is typical for Dutch people, the system is
    unable to break it down.![Contacts](img/0365EN_04_03.jpg)'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**姓名**：这是联系人的姓名。如果联系人是一个人，我们可以点击姓名旁边的**AssistEdit**按钮来打开姓名详情。姓名会根据我们输入的单词数量自动分解为名、中名和姓。然而，如果我们的联系人有一个更复杂的名字，如“Walter
    van den Broek”，这在荷兰人中很典型，系统就无法将其分解。![联系人](img/0365EN_04_03.jpg)'
- en: '**Address**: Enter the street where the contact lives or has an office.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**地址**：输入联系人的居住街道或办公室所在的街道。'
- en: Tip
  id: totrans-27
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: It is always best practice to enter the postal address here since this will
    be used on all documents. For a visiting address, use the **Alternative Address**
    feature.
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 总是最好在这里输入邮政地址，因为这将用于所有文件。对于访问地址，请使用**备用地址**功能。
- en: '**Post Code & City**: These fields are connected via the **Post Code** table
    and one can populate the other if that table is maintained, which is an optional
    feature.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**邮政编码 & 城市**：这些字段通过**邮政编码**表连接，如果维护了该表，则可以填充另一个字段，这是一个可选功能。'
- en: Note
  id: totrans-30
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Most companies maintain the **Post Code** table for their country and manually
    enter the post codes for foreign countries. Most countries offer a post code/city
    list for sale or as a web service, which will speed up data entry and keep people
    from entering the wrong master data.
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 大多数公司为其国家维护**邮政编码**表，并手动输入外国国家的邮政编码。大多数国家提供邮政编码/城市列表出售或作为网络服务，这将加快数据录入并防止人们输入错误的主数据。
- en: '**Search Name**: This is automatically populated with the **Name** field and
    lets you search for contacts faster, as you can enter this field instead of the
    **No.** field when referencing to a contact.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**搜索姓名**：此字段会自动填充**姓名**字段，并允许您更快地搜索联系人，因为您可以在引用联系人时输入此字段而不是**编号**字段。'
- en: '**(Mobile) Phone, Fax**, and **Telex No.**: This is a reference to the phone
    and fax numbers of this company. The (mobile) phone field also allows you to start
    an interaction with this contact.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**(移动电话**)、**传真**和**电传号**：这是指该公司的电话和传真号码。移动电话字段还允许您与该联系人开始互动。'
- en: '**Sales Person**: This is the main salesperson for this contact. If this contact
    is promoted to a customer, the salespersons'' name will be printed on the order
    form and invoices.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**销售人员**：这是此联系人的主要销售人员。如果此联系人晋升为客户，销售人员姓名将打印在订单表和发票上。'
- en: '**Salutation Code**: This special field refers to how this contact should be
    addressed. The salutation code table allows you to build phrases such as "Dear
    Mrs. Brown". We''ll see more about salutation codes in segments.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**称呼代码**：这个特殊字段指的是如何称呼此联系人。称呼代码表允许您构建诸如“亲爱的布朗夫人”之类的短语。我们将在后续部分了解更多关于称呼代码的内容。'
- en: '**E-Mail**: This field contains the e-mail address of the contact. By pressing
    the **E-Mail** button [![Contacts](img/0365EN_04_04.jpg)], we can send an e-mail
    directly.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**电子邮件**：此字段包含联系人的电子邮件地址。通过按**电子邮件**按钮 [![联系人](img/0365EN_04_04.jpg)]，我们可以直接发送电子邮件。'
- en: '**Homepage**: Here is where the URL of the contacts website goes. We can access
    the website by clicking on the **URL** button [![Contacts](img/0365EN_04_05.jpg)].'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主页**：这里是联系人网站的URL。我们可以通过点击**URL**按钮 [![联系人](img/0365EN_04_05.jpg)] 访问网站。'
- en: '**Correspondence Type**: This field is used when we create a Microsoft Word
    document in an interaction. It indicates whether we send a hardcopy, e-mail, or
    fax.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**通信类型**：当我们在一个交互中创建Microsoft Word文档时使用此字段。它指示我们发送的是副本、电子邮件还是传真。'
- en: '**Currency Code & VAT Registration No.**: When this contact is promoted to
    a customer or vendor, the currency code and VAT registration no. are inherited
    from here.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**货币代码和增值税登记号**：当此联系人晋升为客户或供应商时，货币代码和增值税登记号将从这里继承。'
- en: '**Territory Code**: This field can be used in segments to filter on geographic
    regions.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**地区代码**：此字段可以在段中用于过滤地理区域。'
- en: Salutation codes
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 问候代码
- en: When we perform mail merge, we want the letters to start nicely with "Dear Harry"
    or dear "Mrs. Brown". This can be done using salutation codes.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们进行邮件合并时，我们希望信件以“亲爱的哈利”或“亲爱的布朗夫人”等开头。这可以通过问候代码来完成。
- en: We can create as many codes as we like but a contact can only use one. This
    is the list in the CRONUS demo database.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以创建尽可能多的代码，但一个联系人只能使用一个。这是CRONUS演示数据库中的列表。
- en: '![Salutation codes](img/0365EN_04_06.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![问候代码](img/0365EN_04_06.jpg)'
- en: 'There is one salutation code for companies but most are for persons. When we
    look at the formulas for **Female Married** or **Unmarried**, we see this screen:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 对于公司有一个问候代码，但大多数都是针对个人的。当我们查看**已婚女性**或**未婚**的公式时，我们会看到这个屏幕：
- en: '![Salutation codes](img/0365EN_04_07.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![问候代码](img/0365EN_04_07.jpg)'
- en: We can enter a formal and informal code. The salutation can have up to five
    variables pointing to **Job Title**, **First Name**, **Middle Name**, **Surname**,
    **Initials**, and **Company Name**.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以输入正式和非正式代码。问候可以有最多五个变量指向**职位名称**、**名字**、**中间名**、**姓氏**、**首字母**和**公司名称**。
- en: When we look at the result for Karen Friske, it will be "Dear Ms. Karen Friske"
    or "Hi Karen".
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们查看Karen Friske的结果时，它将是“亲爱的Karen女士”或“嗨，Karen”。
- en: At the end of this chapter, we will look at how to create extra salutation types.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章末尾，我们将探讨如何创建额外的问候类型。
- en: Alternative addresses
  id: totrans-50
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 替代地址
- en: Like we said earlier in this chapter, it is best practice to use the address
    fields in the contact table for the postal address since this will be printed
    on all documents.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们本章前面所说的，最佳实践是在联系人表中使用地址字段作为邮政地址，因为这将打印在所有文件上。
- en: In the **Contact Alt. Address Card** table, we can add as many other addresses
    to a contact as we want.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在**联系人替代地址卡**表中，我们可以为联系人添加尽可能多的其他地址。
- en: '![Alternative addresses](img/0365EN_04_08.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![替代地址](img/0365EN_04_08.jpg)'
- en: Tip
  id: totrans-54
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Although the codes are not related to anything, it is best practice to have
    a rule here. Always use the same code for home or office addresses. We can later
    use this when printing labels or segments.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这些代码与任何事物无关，但最好有一个规则。始终为家庭或办公地址使用相同的代码。我们可以在稍后打印标签或段时使用此规则。
- en: An alternative address can also have a valid to and valid end date to control
    which alternative address is currently active.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 替代地址也可以有一个有效的开始日期和结束日期，以控制当前哪个替代地址是活跃的。
- en: Relationships with customer and vendor
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 与客户和供应商的关系
- en: In [Chapter 2](ch02.html "Chapter 2. A Sample Application"), *A Sample Application*,
    you saw that the contact table is the umbrella data of the customer, vendor, and
    bank account master data tables.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第2章](ch02.html "第2章。一个示例应用")中，*一个示例应用*，你看到联系人表是客户、供应商和银行账户主数据表的伞状数据。
- en: Each contact of the type **Company** can be promoted as one of these tables.
    The benefit is that all address information fields have a single place of maintenance
    and are inherited. It also allows us to analyze sales data into relationship management
    as we will see later in this chapter when discussing segments.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 每个类型的**公司**联系人都可以晋升为这些表之一。好处是所有地址信息字段都有一个单一的维护位置，并且可以继承。这也允许我们分析销售数据到关系管理，正如我们将在本章后面讨论段时看到的。
- en: When we create master data, a different Number Series is used. At the end of
    this chapter, we will look at how to change that in the code.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们创建主数据时，会使用不同的数字序列。在本章末尾，我们将探讨如何在代码中更改这一点。
- en: 'A contact of **Type: Person** cannot be created as the **Customer**, **Vendor**,
    or **Bank Account**.'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '**类型：人员** 的联系人无法创建为 **客户**、**供应商** 或 **银行账户**。'
- en: Duplicates
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 重复项
- en: 'When entering new contacts, the system can search for duplicate contacts. In
    the Duplicate Search String Setup table, we can enable the filtering on eight
    fields: **Name**, **Name2**, **Address**, **Address2**, **Post Code**, **City**,
    **Phone No.**, and **VAT Registration No**.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 当输入新联系人时，系统可以搜索重复联系人。在 **重复搜索字符串设置** 表中，我们可以启用对八个字段的过滤：**名称**、**名称2**、**地址**、**地址2**、**邮政编码**、**城市**、**电话号码**
    和 **增值税登记号**。
- en: For each field, we can set up which part should be used when searching for a
    duplicate. We can use the option **First** and **Last** and a length, which is
    useful for the **Name**, **Address**, and **City** fields. Using **First** with
    the full length of the field will search for an exact match, which is useful for
    **Post Code**, **Phone No.**, and **VAT Registration No**.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每个字段，我们可以设置在搜索重复项时应使用哪一部分。我们可以使用 **第一个** 和 **最后一个** 以及长度，这对于 **名称**、**地址**
    和 **城市** 字段很有用。使用 **第一个** 与字段的全长进行搜索将查找精确匹配，这对于 **邮政编码**、**电话号码** 和 **增值税登记号**
    很有用。
- en: 'In the **Marketing Setup** table, we can specify the percentage of matching
    criteria that should result in a warning, as shown in the following screenshot:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在 **营销设置** 表中，我们可以指定应导致警告的匹配标准百分比，如下面的截图所示：
- en: '![Duplicates](img/0365EN_04_09.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![重复项](img/0365EN_04_09.jpg)'
- en: For each contact, the system will save these values in `Cont. Duplicate Search
    String table (5086)`.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每个联系人，系统将在 `Cont. Duplicate Search String table (5086)` 中保存这些值。
- en: When we enter a new contact, the system will also generate the same strings
    and compare these to the ones in the database. When there is a match, the system
    will show a warning with the duplicate contacts.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们输入新的联系人时，系统也会生成相同的字符串，并将这些字符串与数据库中的字符串进行比较。当有匹配时，系统将显示一个带有重复联系人的警告。
- en: Profiles
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置文件
- en: The contact table has a very limited number of fields and does not allow much
    creativity for us to add flexible information. This is where profiles are used.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 联系人表具有非常有限的数量字段，并且不允许我们添加太多灵活的信息。这就是配置文件被使用的地方。
- en: Profiles allow the users to create an unlimited number of extra information
    sources that can be manually or automatically populated.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 配置文件允许用户创建无限数量的额外信息源，这些信息源可以手动或自动填充。
- en: 'Let''s have a look at an example profile:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看一个示例配置文件：
- en: '![Profiles](img/0365EN_04_11.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![配置文件](img/0365EN_04_11.jpg)'
- en: This profile is for contacts of type **Company**. It has **Question** and **Answer**
    lines. A question can have one or multiple answers and we can define as many questions
    and answers as we want. The last column shows how many contacts have this profile
    answer.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 这个配置文件是为 **公司** 类型的联系人准备的。它包含 **问题** 和 **答案** 行。一个问题可以有一个或多个答案，我们可以定义尽可能多的问题和答案。最后一列显示了有多少联系人具有此配置文件答案。
- en: A profile is used from the **Contact Card**.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 配置文件是从 **联系人卡片** 中使用的。
- en: '![Profiles](img/0365EN_04_12.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![配置文件](img/0365EN_04_12.jpg)'
- en: When we click on this, a new page opens where we can select the required profile
    and answer the questions.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们点击这个选项时，会打开一个新页面，我们可以选择所需的配置文件并回答问题。
- en: '![Profiles](img/0365EN_04_13.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![配置文件](img/0365EN_04_13.jpg)'
- en: The answers are displayed in the **Lines** subpage of the **Contact Card** window.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 答案显示在 **联系人卡片** 窗口的 **行** 子页中。
- en: Automatic profiles
  id: totrans-80
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 自动配置文件
- en: Profiles can also be automatically answered based on formulas. This is done
    using the **Auto Contact Classification** option and setting up the **Question
    Details**.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 配置文件也可以根据公式自动回答。这是通过使用 **自动联系人分类** 选项和设置 **问题详情** 来实现的。
- en: '![Automatic profiles](img/0365EN_04_14.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![自动配置文件](img/0365EN_04_14.jpg)'
- en: The **Profile Question Details** are fixed and hardcoded. They depend on the
    relationship between a contact and a customer or vendor as discussed earlier in
    this chapter.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '**配置文件问题详情** 是固定的，并且是硬编码的。它们取决于联系人与客户或供应商之间的关系，如本章前面所述。'
- en: '![Automatic profiles](img/0365EN_04_15.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![自动配置文件](img/0365EN_04_15.jpg)'
- en: We will not describe all the possibilities as this is very well covered in the
    online help.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不会描述所有可能性，因为在线帮助已经很好地涵盖了这一点。
- en: When the questions are set up, the answers should have a **From Value** and
    **To Value** to allow the system to pick the right one.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 当问题设置好时，答案应该有一个**从值**和**到值**，以便系统选择正确的答案。
- en: To generate the answers, a batch job is used called **Update Contact Classification**
    where we can filter on a profile.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 为了生成答案，使用了一个名为**更新联系分类**的批处理作业，我们可以根据配置文件进行筛选。
- en: '![Automatic profiles](img/0365EN_04_16.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![自动配置文件](img/0365EN_04_16.jpg)'
- en: Interactions
  id: totrans-89
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 交互
- en: We have all kinds of interaction moments with our contacts. Whether they are
    phone calls, mailings, or sending an invoice, we can register them in Microsoft
    Dynamics NAV.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 我们与联系人的交互时刻有很多种。无论是电话、邮件还是发送发票，我们都可以在Microsoft Dynamics NAV中注册它们。
- en: As with profiles, there are interactions that are generated automatically and
    manually. Manual interactions are created using a wizard.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 与配置文件一样，有一些交互是自动生成的，也有一些是手动生成的。手动交互是通过向导创建的。
- en: All interactions relate to an **Interaction Template Code**. The system allows
    an unlimited amount of code we can define ourselves. The interaction code will
    also determine how the rest of wizard will behave.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 所有交互都与一个**交互模板代码**相关。系统允许我们定义无限量的代码。交互代码还将决定其余向导的行为。
- en: '![Interactions](img/0365EN_04_17.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![交互](img/0365EN_04_17.jpg)'
- en: Interactions can be **Inbound** or **Outbound** and initiated by us or them.
    These are informative fields.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 交互可以是**入站**或**出站**，由我们或他们发起。这些是信息字段。
- en: The **Wizard Action** field determines whether the wizard will generate a mail
    merge document, allow us to attach a previously created document, or do nothing.
    Mail merge allows us to create a Word document with all fields from the contact
    table.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: '**向导操作**字段决定了向导是否会生成邮件合并文档，允许我们附加之前创建的文档，或者什么都不做。邮件合并允许我们创建一个包含联系表所有字段的Word文档。'
- en: 'Let''s create an interaction and look at how that is done. To create an interaction,
    we choose **Create Interaction** on the contact card or list and click on the
    **Create Interaction** button from the **Process Actions**. This will open the
    following wizard:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们创建一个交互并看看是如何操作的。要创建一个交互，我们在联系卡片或列表中选择**创建交互**，然后从**过程操作**中点击**创建交互**按钮。这将打开以下向导：
- en: '![Interactions](img/0365EN_04_18.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![交互](img/0365EN_04_18.jpg)'
- en: 'The first page asks us what type of interaction we would like to start. Let''s
    make a memo:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 第一页询问我们想要启动哪种类型的交互。让我们创建一个备忘录：
- en: '![Interactions](img/0365EN_04_19.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![交互](img/0365EN_04_19.jpg)'
- en: 'This is the next step as our interaction code defines that we will generate
    a mail merge:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 这是下一步，因为我们的交互代码定义了我们将生成邮件合并：
- en: '![Interactions](img/0365EN_04_20.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![交互](img/0365EN_04_20.jpg)'
- en: We can now create the memo in Microsoft Word with all necessary fields already
    filled in.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在可以在Microsoft Word中创建备忘录，所有必要的字段都已经填写完毕。
- en: '![Interactions](img/0365EN_04_21.jpg)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![交互](img/0365EN_04_21.jpg)'
- en: After closing Microsoft Word, we move on to the next step and when we populate
    all fields, we can finish the wizard. This will save the interaction in the database
    and print the memo since we choose **Hard Copy** as **Correspondence Type**.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 关闭Microsoft Word后，我们继续下一步，当填写所有字段后，我们可以完成向导。这将把交互保存在数据库中，并打印备忘录，因为我们选择**硬拷贝**作为**通信类型**。
- en: Note
  id: totrans-105
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: It is also possible to postpone interactions and restart them later.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 也可能推迟交互并在稍后重新启动。
- en: Automatic interactions
  id: totrans-107
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 自动交互
- en: Some interactions can also be automatically generated, for example, each time
    we print an invoice or shipment.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 一些交互也可以自动生成，例如，每次我们打印发票或发货单时。
- en: Which interaction code is used for each transaction is defined in the **Interaction
    Template Setup**. For every print, we want an interaction log entry to be generated
    and we need to set up a code.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 每笔交易使用的交互代码在**交互模板设置**中定义。对于每次打印，我们希望生成一个交互日志条目，我们需要设置一个代码。
- en: '![Automatic interactions](img/0365EN_04_22.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![自动交互](img/0365EN_04_22.jpg)'
- en: Tip
  id: totrans-111
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Be careful when printing a lot of documents, as the interaction log entry table
    can be locked for a longer period forcing other users in the database to wait
    until the process is completed. To avoid this, enable auto-increment on this table
    as described in this blog at [http://markbrummel.wordpress.com/2014/05/25/tip-14-autoincrement-interaction-log-entries/](http://markbrummel.wordpress.com/2014/05/25/tip-14-autoincrement-interaction-log-entries/).
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 在打印大量文档时要小心，因为交互日志条目表可能会锁定较长时间，迫使数据库中的其他用户等待直到过程完成。为了避免这种情况，请启用此表上的自动递增，如本博客中所述[http://markbrummel.wordpress.com/2014/05/25/tip-14-autoincrement-interaction-log-entries/](http://markbrummel.wordpress.com/2014/05/25/tip-14-autoincrement-interaction-log-entries/)。
- en: Other automatically created interaction log entries are created by segments,
    which we will look at later in the chapter.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 其他自动创建的交互日志条目是由段创建的，我们将在本章后面讨论。
- en: Finished interactions
  id: totrans-114
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 完成的交互
- en: When completed, the interactions are connected to a contact and can be used
    for analysis purposes. It is also possible to start a To-do from an interaction.
    We'll look at that in the next paragraph.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，交互操作将连接到联系人，并可用于分析目的。也可以从交互操作中开始一个待办事项。我们将在下一段中讨论这一点。
- en: To-do's
  id: totrans-116
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 待办事项
- en: The To-do's are the lowest level of activities in the relationship management
    model. They are best compared to Masks or Meetings in Microsoft Outlook.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 待办事项是关系管理模型中的最低级别活动。它们最好与微软 Outlook 中的掩码或会议进行比较。
- en: To-do's can be created directly in the system or from another event. We can
    create a To-do from the interaction we just created. Let's do this.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以直接在系统中或从另一个事件中创建待办事项。我们可以从刚刚创建的交互操作中创建一个待办事项。让我们这样做。
- en: '![To-do''s](img/0365EN_04_23.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![待办事项](img/0365EN_04_23.jpg)'
- en: The reference here is the tab, Create To-do, and hence the cut-off text at the
    side is fine
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 此处的参考是标签，创建待办事项，因此侧面的截断文本是合适的。
- en: When we click on **Create To-do** form the **Interaction Log Entries**, the
    system shows us a wizard that will guide us through the process, just like the
    **Interaction** wizard.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们点击**交互日志条目**中的**创建待办事项**时，系统会显示一个向导，它将引导我们完成这个过程，就像**交互**向导一样。
- en: '![To-do''s](img/0365EN_04_24.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![待办事项](img/0365EN_04_24.jpg)'
- en: There are three types of To-do's, **Standard** (blank), **Meeting**, and **Phone
    Call**. The steps in the wizard depend on the type we select. Let's select a **Meeting**.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 待办事项有三种类型，**标准**（空白）、**会议**和**电话**。向导中的步骤取决于我们选择哪种类型。让我们选择一个**会议**。
- en: The next step asks the attendees for the meeting and allows a template for the
    invitation, which then again will create an Interaction Log Entry.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步要求参会者提供会议信息，并允许创建邀请模板，然后这将再次创建一个交互日志条目。
- en: '![To-do''s](img/0365EN_04_25.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![待办事项](img/0365EN_04_25.jpg)'
- en: Note
  id: totrans-126
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: To perform this step, the To-do organizer should have a valid e-mail address.
    This can be set up in the sales persons.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 要执行此步骤，待办事项组织者应有一个有效的电子邮件地址。这可以在销售人员中设置。
- en: The next step only asks for a location so we will click on **Finish**.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步只要求提供一个位置，因此我们将点击**完成**。
- en: When we now open the To-do's from the **Sales & Marketing Department**, we can
    open the **Sales Person** per day matrix, which shows us the meeting we just created.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们现在打开来自**销售与市场部门**的待办事项时，我们可以打开按日查看的**销售人员**矩阵，它显示了刚刚创建的会议。
- en: '![To-do''s](img/0365EN_04_26.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![待办事项](img/0365EN_04_26.jpg)'
- en: The cut-off text is not a part of the referenced section in the screenshot
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 截断文本不是截图中所引用部分的组成部分。
- en: We'll see more of To-do's when we discuss **Opportunities** and **Outlook Integration**.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们讨论**机会**和** Outlook 集成**时，我们将看到更多关于待办事项的内容。
- en: Opportunities
  id: totrans-133
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 机会
- en: When we discussed profiles, we could already see that relationship management
    is tightly integrated with the ERP part of the application. This is also the case
    for opportunities.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们讨论配置文件时，我们已经可以看到关系管理与应用程序的 ERP 部分紧密集成。机会也是如此。
- en: Opportunities allow us to manage all the quote requests we get from our prospects,
    creating a workflow that will guide us to a deal that is won or lost. This then
    allows us to analyze the win and lose deals and change our business based on this
    information.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 机会使我们能够管理我们从潜在客户那里收到的所有报价请求，创建一个将引导我们达成或失去交易的流程。这然后允许我们分析赢和输的交易，并根据这些信息改变我们的业务。
- en: We can analyze the sales pipeline and make a proper judgement of our future
    order position allowing us to schedule capacity in time.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以分析销售流程，并对我们的未来订单位置做出适当的判断，从而允许我们及时安排产能。
- en: Workflow
  id: totrans-137
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 工作流程
- en: Each opportunity we create will follow a sales cycle in the system. This will
    guide us step by step though the process.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 我们创建的每个机会都将遵循系统中的销售周期。这将一步一步地引导我们完成这个过程。
- en: Let's have a look at the sales cycles in the CRONUS database.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看CRONUS数据库中的销售周期。
- en: 'There are four sales cycles defined. The most important field is the **Probability
    Calculation** formula. This will determine how the system calculates the current
    value of all opportunities with this code. We can see the **Calculated Current
    Value** by opening the **Statistics** window of a sales cycle, as shown in the
    following screenshot:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 定义了四个销售周期。最重要的字段是**概率计算**公式。这将确定系统如何计算具有此代码的所有机会的当前价值。我们可以通过打开销售周期的**统计**窗口来查看**计算当前价值**，如下面的截图所示：
- en: '![Workflow](img/0365EN_04_27.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![工作流程](img/0365EN_04_27.jpg)'
- en: 'There are four options to choose from: `Multiply`, `Add`, `Chances of Success
    %`, and `Completed %`. The function `UpdateEstimates` in the `Opportunity Entry
    (5093)` table calculates this:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 有四种选择可供选择：`乘法`、`加法`、`成功率百分比`和`完成百分比`。`Opportunity Entry (5093)`表中的`UpdateEstimates`函数计算这个：
- en: '[PRE0]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The `Probability Calculation` first calculates a `Probability %` field, which
    will then lead to the required `Calculated Current Value`.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '`概率计算`首先计算一个`概率百分比`字段，然后这将导致所需的`计算当前价值`。'
- en: Sales stages
  id: totrans-145
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 销售阶段
- en: Each sales cycle has different stages that will guide us through the sales process.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 每个销售周期都有不同的阶段，将引导我们完成销售过程。
- en: '![Sales stages](img/0365EN_04_28.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![销售阶段](img/0365EN_04_28.jpg)'
- en: The current sales stage of an opportunity defines the `Completed %` field. We
    can decide with **Allow Skip** option whether a sales stage is mandatory. The
    quote required will force us to assign a sales quote to this opportunity as we
    will see later when we create an opportunity.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 机会的当前销售阶段定义了`完成百分比`字段。我们可以通过**允许跳过**选项来决定销售阶段是否是强制性的。所需的报价将迫使我们为这个机会分配一个销售报价，正如我们稍后创建机会时将看到的。
- en: Activity codes
  id: totrans-149
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 活动代码
- en: Each sales stage has an activity code. This will define which To-do's are created
    to support us in the sales process.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 每个销售阶段都有一个活动代码。这将定义在销售过程中为我们创建哪些待办事项。
- en: '![Activity codes](img/0365EN_04_29.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![活动代码](img/0365EN_04_29.jpg)'
- en: This is a very powerful tool, enabling sales people to create a workflow for
    each sales process.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个非常强大的工具，使销售人员能够为每个销售过程创建一个工作流程。
- en: Let's create an opportunity and see what happens in the system.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们创建一个机会，看看系统里会发生什么。
- en: Creating an opportunity
  id: totrans-154
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建机会
- en: An opportunity starts by selecting an existing contact or creating a new one.
    From the **Contact Card**, we can navigate to **Related Information** | **Contact**
    | **Opportunities** | **List**.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 机会始于选择一个现有联系人或创建一个新的联系人。从**联系卡**，我们可以导航到**相关信息** | **联系** | **机会** | **列表**。
- en: This leads us to a filtered lists of opportunities linked to this contact.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 这将带我们到一个与该联系相关的机会过滤列表。
- en: Here we can select **Create Opportunity**.![Creating an opportunity](img/0365EN_04_30.jpg)
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这里，我们可以选择**创建机会**。![创建机会](img/0365EN_04_30.jpg)
- en: This opens the wizard that will guide us though the process. In the first window,
    we enter the description `Sell Chairs` and click on **Next** to take us to the
    second step.![Creating an opportunity](img/0365EN_04_31.jpg)
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将打开一个向导，将引导我们完成这个过程。在第一个窗口中，我们输入描述`Sell Chairs`并点击**下一步**进入第二步。![创建机会](img/0365EN_04_31.jpg)
- en: In this step, we choose **Sales Cycle** code **FIRSTSMALL** and select **Finish**.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此步骤中，我们选择**销售周期**代码**FIRSTSMALL**并选择**完成**。
- en: Selecting **Next** will allow us to enter additional information, such as assigning
    a sales campaign, and activating the first stage. We will skip that now and discuss
    campaigns later in this chapter.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**下一步**将允许我们输入更多信息，例如分配销售活动，并激活第一阶段。我们现在将跳过这一步，并在本章后面讨论活动。
- en: When we now open the created opportunity, the information should look like the
    following screenshot. There are no activity lines as we have not yet activated
    the first stage.
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当我们现在打开创建的机会时，信息应该看起来像以下截图。因为我们还没有激活第一阶段，所以没有活动行。
- en: '![Creating an opportunity](img/0365EN_04_32.jpg)'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![创建机会](img/0365EN_04_32.jpg)'
- en: The cut-off text is not a part of the reference in this screenshot
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 截止文本不是此截图中的参考部分
- en: Let's activate the first stage and see what happens. We do that by navigating
    to **Actions** | **Functions** | **Update**. We enter a wizard where we select
    **First**.![Creating an opportunity](img/0365EN_04_33.jpg)
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们激活第一阶段并看看会发生什么。我们通过导航到**操作** | **功能** | **更新**来完成。我们进入一个向导，在那里我们选择**第一**。![创建机会](img/0365EN_04_33.jpg)
- en: We'll click on **Next** twice and enter step three of the wizard.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将连续点击**下一步**两次并进入向导的第三步。
- en: In this step, we should enter the estimated sales value and **chance of success
    (%)** of getting this deal. This is important to calculate the **calculated estimated
    value** we discussed earlier.![Creating an opportunity](img/0365EN_04_34.jpg)
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这一步，我们应该输入估计的销售价值和**成功几率（%）**以获得这笔交易。这对于计算我们之前讨论的**计算估计值**非常重要。![创建机会](img/0365EN_04_34.jpg)
- en: When we click on **Finish**, we come back to the **Opportunity** page and see
    that the current value is **260,00**.![Creating an opportunity](img/0365EN_04_35.jpg)
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当我们点击**完成**时，我们回到**机会**页面，看到当前值为**260,00**。![创建机会](img/0365EN_04_35.jpg)
- en: The cut-off text is not a part of the reference in this screenshot
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 截止文本不是此截图中的参考部分
- en: 'Since the probability calculation of this sales cycle is **Add**, the formula
    is:'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 由于这个销售周期的概率计算是**添加**，公式是：
- en: '[PRE1]'
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: This will lead to `(50 + 2) / 2 = 26 and 1000 * 26 / 100 = 260`.
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将导致 `(50 + 2) / 2 = 26 和 1000 * 26 / 100 = 260`。
- en: Now we navigate to **Related Information** | **Opportunity** | **To-Dos** and
    see that the system has created two To-do's for us that we have to complete.![Creating
    an opportunity](img/0365EN_04_36.jpg)
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们导航到**相关信息** | **机会** | **待办事项**，我们看到系统为我们创建了两个我们必须完成的待办事项。![创建机会](img/0365EN_04_36.jpg)
- en: The cut-off text is not a part of the reference in this screenshot
  id: totrans-173
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 截止文本不是此截图中的参考部分
- en: This will help us remember our daily tasks and allow management to see nothing
    is forgotten. The next stages in this sales cycle are **Qualification** and **Presentation**.![Creating
    an opportunity](img/0365EN_04_37.jpg)
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将帮助我们记住我们的日常任务，并允许管理层看到没有遗忘任何事情。这个销售周期中的下一阶段是**资格**和**展示**。![创建机会](img/0365EN_04_37.jpg)
- en: We can enter these stages by entering the wizard again and selecting **Next**.![Creating
    an opportunity](img/0365EN_04_38.jpg)
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以通过再次进入向导并选择**下一步**来进入这些阶段。![创建机会](img/0365EN_04_38.jpg)
- en: After selecting the **Next** button twice, we hit step three. Since one of our
    To-do's was verifying the quality of the opportunity, we can now say for example
    that the chance of success is 80 percent.![Creating an opportunity](img/0365EN_04_39.jpg)
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在连续点击**下一步**两次后，我们进入第三步。由于我们的待办事项之一是验证机会的质量，我们现在可以说例如成功的几率是80%。![创建机会](img/0365EN_04_39.jpg)
- en: We'll select the **Cancel existing open to-dos** Checkbox to make sure our workflow
    is updated. You will see that the **Calculated Current Value** has increased to
    **425,00**:![Creating an opportunity](img/0365EN_04_40.jpg)
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将选择**取消现有打开的待办事项**复选框以确保我们的工作流程已更新。您将看到**计算当前值**已增加到**425,00**：![创建机会](img/0365EN_04_40.jpg)
- en: When we enter the next stage, we will get the following error message telling
    us that assigning a quote is mandatory to enter the next step:![Creating an opportunity](img/0365EN_04_41.jpg)
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当我们进入下一阶段时，我们会得到以下错误消息，告诉我们分配报价是进入下一步的强制要求：![创建机会](img/0365EN_04_41.jpg)
- en: Sales quote
  id: totrans-179
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 销售报价
- en: To assign a sales quote to an opportunity, we navigate to **Actions** | **Functions**
    | **Assign Sales Quote** from the **Opportunity Card**. This will open a new sales
    quote with all fields populated from the opportunity.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 要将销售报价分配给机会，我们从**机会卡**导航到**操作** | **功能** | **分配销售报价**。这将打开一个新的销售报价，其中所有字段都从机会中填充。
- en: '![Sales quote](img/0365EN_04_42.jpg)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![销售报价](img/0365EN_04_42.jpg)'
- en: Note
  id: totrans-182
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备注
- en: To assign a quote to a contact without a **Sell-to Customer No.**, we need to
    use the **Sell-to Customer Template Code**. This can be used when the **Show more
    fields** option is activated on the **General** fast tab.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 要将报价分配给没有**销售客户编号**的联系人，我们需要使用**销售客户模板代码**。这可以在**常规**快速选项卡上激活**显示更多字段**选项时使用。
- en: We will select two furniture items and populate the **Quantity** and **Line
    Discount %** fields.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将选择两个家具项目并填写**数量**和**行折扣百分比**字段。
- en: When we now update the opportunity, we can use the quote amount of 796,80 which
    will lead to a **Calculated Current Value** of 478,08 in step three and 557,76
    in step four.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们现在更新机会时，我们可以使用796,80的报价金额，这将导致第三步中的**计算当前值**为478,08，第四步为557,76。
- en: Note
  id: totrans-186
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备注
- en: To update the opportunity to step 4, the sales person should have a valid e-mail
    address, which can be set up in the sales persons.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 要将机会更新到第4步，销售人员应该有一个有效的电子邮件地址，这可以在销售人员中设置。
- en: Closing the deal
  id: totrans-188
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 成交
- en: Step five is the final step in the sales cycle stages we used in our example.
    Now we need to tell the system whether the deal is won or lost. To do this, we
    navigate to **Actions** | **Functions** | **Close** from the **Opportunity Card**.
    We will select **Won** and click on **Next**.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 第5步是我们示例中使用的销售周期阶段的最后一步。现在我们需要告诉系统这笔交易是赢还是输。为此，我们从**机会卡**导航到**操作** | **功能**
    | **关闭**。我们将选择**赢**并点击**下一步**。
- en: '![Closing the deal](img/0365EN_04_43.jpg)'
  id: totrans-190
  prefs: []
  type: TYPE_IMG
  zh: '![成交](img/0365EN_04_43.jpg)'
- en: After selecting a valid reason and the sales amount, we can close the deal.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 在选择了一个有效的原因和销售金额后，我们可以关闭交易。
- en: '![Closing the deal](img/0365EN_04_44.jpg)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![成交](img/0365EN_04_44.jpg)'
- en: The system now creates a customer for this contact and updates the quote with
    this number. We need to promote the quote to an order manually.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 系统现在为这个联系人创建一个客户，并使用这个编号更新报价。我们需要手动将报价提升为订单。
- en: Creating segments
  id: totrans-194
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建段落
- en: Segments allow us to slice and dice the data in our system to create a filtered
    list of contacts. This information can then be used to create an interaction such
    as a mailing or start a sales campaign.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 段落允许我们切割和分解系统中的数据，以创建一个筛选后的联系人列表。然后，可以使用这些信息创建一个交互，例如邮寄或启动销售活动。
- en: Since Microsoft Dynamics NAV relationship management is integrated with the
    ERP system, we can filter on both RM and ERP data.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 由于Microsoft Dynamics NAV关系管理集成到ERP系统中，我们可以对RM和ERP数据进行筛选。
- en: 'Let''s create a new segment and look at the possibilities:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们创建一个新的段落并查看其可能性：
- en: '![Creating segments](img/0365EN_04_45.jpg)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
  zh: '![创建段落](img/0365EN_04_45.jpg)'
- en: The segment has a **No.** and **Description field**. The no. can be defined
    using the Number Series.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 段落有一个**编号**和**描述字段**。编号可以使用数字序列定义。
- en: On the **Interaction** tab, we select **Interaction Template Code**. We will
    select an interaction that generates a Word document so we can use the mail merge
    capabilities of segments.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 在**交互**选项卡上，我们选择**交互模板代码**。我们将选择一个生成Word文档的交互，这样我们就可以使用段落的邮件合并功能。
- en: The **Unit Cost (LCY)** is important to determine the total cost of this segment
    especially when we use it with campaigns, as we will see later in the chapter.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '**单位成本（LCY）**对于确定该段落的总成本非常重要，尤其是在我们与活动一起使用时，正如我们在本章后面将要看到的。'
- en: Adding contacts
  id: totrans-202
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加联系人
- en: With our segment defined, we can now start filtering the system for contact
    information by navigating to **Actions** | **Functions** | **Contacts** | **Add
    Contacts**.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 在定义了我们的段落之后，我们现在可以通过导航到**操作** | **功能** | **联系人** | **添加联系人**来开始通过筛选系统中的联系人信息。
- en: '![Adding contacts](img/0365EN_04_46.jpg)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![添加联系人](img/0365EN_04_46.jpg)'
- en: 'This opens a selection window, allowing us to filter on different parts of
    the application:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 这将打开一个选择窗口，允许我们在应用程序的不同部分进行筛选：
- en: '**Options**: This is further divided into four categories:'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**选项**：这进一步分为四个类别：'
- en: '**Allow Existing Contacts**: If you run multiple selections and check this
    option, the system will create new segment lines each time a contact is within
    the selection.'
  id: totrans-207
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**允许现有联系人**：如果您运行多个选择并勾选此选项，则每次联系人位于选择中时，系统都会创建新的段落行。'
- en: '**Expand Companies**: When you select this option, the system will add the
    persons related to the companies in the selection.'
  id: totrans-208
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**展开公司**：当你选择此选项时，系统将为选择中的公司添加相关的人员。'
- en: '**Allow Related Companies**: When **Expand Companies** is selected, this option
    will delete the company record if a company has one or more persons in the filter.'
  id: totrans-209
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**允许相关公司**：当选择**展开公司**时，此选项将删除具有一个或多个人员的公司记录。'
- en: '**Ignore Exclusion**: A contact can be ignored on segments. Checking this flag
    will ignore this field.'
  id: totrans-210
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**忽略排除**：联系人可以在段落下被忽略。勾选此标志将忽略此字段。'
- en: '**Contact**: Here we can filter directly on all fields in the contact table.
    For example, all contacts in the country NL.'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**联系人**：在这里，我们可以直接在联系人表的全部字段上进行筛选。例如，所有在荷兰的联系人。'
- en: '**Profile**: This allows us to filter on any profile answer. When we use automatic
    profile answers, we can for example filter on customers with a specific turnover
    or profit value.'
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**配置文件**：这允许我们根据任何配置文件答案进行筛选。当我们使用自动配置文件答案时，例如，我们可以根据特定的营业额或利润值筛选客户。'
- en: '**Mailing Group**: We can save any segment to a mailing group allowing easy
    reuse of previously generated filters.'
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**邮寄组**：我们可以将任何段落到邮寄组中保存，以便轻松重复使用之前生成的筛选器。'
- en: '**Interaction Log Entry**: We can filter on contacts who have had specific
    interaction codes. For example, everyone who had a sales invoice in the last year.'
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**交互日志条目**：我们可以根据特定的交互代码筛选联系人。例如，过去一年内有销售发票的每个人。'
- en: '**Job Responsibility**: If we want to send out a mail to all managers, we select
    the matching job responsibility code.'
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**工作职责**：如果我们想向所有经理发送邮件，我们选择匹配的工作职责代码。'
- en: '**Industry Group**: This allows us to filter out companies in specific industries.'
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**行业组**：这允许我们筛选特定行业的公司。'
- en: '**Business Relation**: This is by default used to integrate with customers,
    vendors, and bank accounts but can also be expanded with extra information.'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**业务关系**：默认情况下，用于与客户、供应商和银行账户集成，但也可以通过额外信息进行扩展。'
- en: '**Value Entry**: This is probably the most powerful filter where we can filter
    on specific item numbers and posting dates from the related contact.'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**值输入**：这可能是最强大的过滤器，我们可以根据相关联系人的特定项目编号和过账日期进行筛选。'
- en: Refine/reduce contacts
  id: totrans-219
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 精细/减少联系人
- en: After adding all contacts from The Netherlands, we might want to refine or reduce
    this, which can be done with the same filtering as adding contacts. Refining will
    check whether the contacts in the segments match the specific filter criteria
    and reducing will remove all contacts in the segment that match the criteria.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 在添加了所有荷兰的联系人之后，我们可能想要精细或减少这个列表，这可以通过与添加联系人相同的筛选方式完成。精细会检查分段中的联系人是否匹配特定的筛选标准，而减少则会移除所有匹配标准的分段中的联系人。
- en: We will reduce the segment with City Waalwijk.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将减少带有Waalwijk城市的分段。
- en: Segment criteria
  id: totrans-222
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 分段标准
- en: We can now ask the system what criteria we used by navigating to **Related Information**
    | **Segments** | **Criteria**.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在可以通过导航到**相关信息** | **分段** | **标准**来询问系统我们使用了哪些标准。
- en: '![Segment criteria](img/0365EN_04_47.jpg)'
  id: totrans-224
  prefs: []
  type: TYPE_IMG
  zh: '![分段标准](img/0365EN_04_47.jpg)'
- en: This allows us to see what we did, but also to undo the last actions or save
    the criteria.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 这允许我们查看我们做了什么，也可以撤销最后一步操作或保存标准。
- en: '![Segment criteria](img/0365EN_04_48.jpg)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![分段标准](img/0365EN_04_48.jpg)'
- en: Mailing groups
  id: totrans-227
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 邮寄组
- en: Another option to reuse a segment is to apply a mailing group to all contacts
    in a segment. To start this, we click on **Apply Mailing Group** in the **ACTIONS**
    tab from the **Segment Card**.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个重用分段的方法是将邮寄组应用于分段中的所有联系人。要开始这个操作，我们点击**分段卡**中的**操作**选项卡上的**应用邮寄组**。
- en: '![Mailing groups](img/0365EN_04_49.jpg)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![邮寄组](img/0365EN_04_49.jpg)'
- en: This will create a record in the Contact Mailing Group table for each contact
    in the segment.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 这将为分段中的每个联系人创建一个联系人邮寄组表记录。
- en: Log segment
  id: totrans-231
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 日志分段
- en: When the segment is finished, it should be logged. Logging the segment will
    start the mail merge process in our segment and create the.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 当分段完成时，应该进行记录。记录分段将在我们的分段中启动邮件合并过程并创建。
- en: '![Log segment](img/0365EN_04_50.jpg)'
  id: totrans-233
  prefs: []
  type: TYPE_IMG
  zh: '![日志分段](img/0365EN_04_50.jpg)'
- en: Note
  id: totrans-234
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备注
- en: Using this option will also print the letters in this example. For an exercise
    it might be useful to enable a PDF printer or turn of your printer and remove
    the print job.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 使用此选项也将打印此示例中的信件。为了练习，可能需要启用PDF打印机或关闭打印机并删除打印作业。
- en: If required, the system can directly generate a follow up segment if we wanted
    to use this segment with a campaign.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 如果需要，系统可以直接生成一个后续分段，如果我们想使用这个分段进行营销活动。
- en: Campaigns
  id: totrans-237
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 营销活动
- en: Most big companies with marketing departments have sales campaigns to improve
    their sales. These are typically periods where some items are more interesting
    for customers to buy.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数有营销部门的大公司都有销售营销活动来提高销售额。这些通常是某些商品对客户更有吸引力的时期。
- en: With the campaigns in Microsoft Dynamics NAV, we can manage the sales prices
    and see the results of a specific campaign both from a cost and profit viewpoint.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中，我们可以管理销售价格，并从成本和利润的角度查看特定营销活动的结果。
- en: 'Let''s open a campaign and see what information it contains:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们打开一个营销活动并查看它包含的信息：
- en: '![Campaigns](img/0365EN_04_51.jpg)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
  zh: '![营销活动](img/0365EN_04_51.jpg)'
- en: Each campaign has a unique **No.** field that can be created using Number Series
    and **Description**. The **No.** field should be carefully chosen since it will
    be used throughout the application where this campaign is used.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 每个营销活动都有一个唯一的**编号**字段，可以使用数字序列和**描述**来创建。**编号**字段应仔细选择，因为它将在整个应用程序中使用，该营销活动被使用的地方。
- en: The **Status Code** options can be custom defined but do not impact business
    logic. The **Starting Date** and **Ending Date** fields are important for the
    pricing information. The special price and discounts will only be valid within
    these periods.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '**状态代码**选项可以自定义定义，但不会影响业务逻辑。**开始日期**和**结束日期**字段对于定价信息很重要。特殊价格和折扣只在这些期间内有效。'
- en: Via the **Invoicing** tab, we can see that campaigns are integrated with dimensions.
    This gives us the powerful option to define a dimension code for each campaign
    and create an analysis view to analyze the results in the financial part of Microsoft
    Dynamics NAV, like we discussed in the previous chapter.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 通过**发票**选项卡，我们可以看到活动与维度集成。这为我们提供了强大的选项，可以为每个活动定义一个维度代码，并创建一个分析视图来分析Microsoft
    Dynamics NAV财务部分的结果，就像我们在上一章中讨论的那样。
- en: Pricing
  id: totrans-245
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 定价
- en: Microsoft Dynamics NAV allows special item pricing for campaigns. If a sales
    order is generated from a campaign, the system will use the special price automatically.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV允许为活动设置特殊项目定价。如果从活动生成销售订单，系统将自动使用特殊价格。
- en: By navigating to **Related Information** | **Campaign** | **Sales Prices**,
    we can enter the pricing information for this campaign.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 通过导航到**相关信息** | **活动** | **销售价格**，我们可以输入此活动的定价信息。
- en: '![Pricing](img/0365EN_04_52.jpg)'
  id: totrans-248
  prefs: []
  type: TYPE_IMG
  zh: '![定价](img/0365EN_04_52.jpg)'
- en: This price table is filtered exactly the same way as discussed in our example
    application in [Chapter 2](ch02.html "Chapter 2. A Sample Application"), *A Sample
    Application*.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 这个价格表与我们在[第2章](ch02.html "第2章。一个示例应用")中讨论的示例应用中的方式完全相同，*一个示例应用*。
- en: Segments
  id: totrans-250
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 细分市场
- en: To select customers or prospects for a campaign, we need to create one or more
    segments. These segments should be connected to the campaign using the **Campaign
    No.** field. Everyone related to these segments will get the specific prices and
    discounts.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 为了为活动选择客户或潜在客户，我们需要创建一个或多个细分市场。这些细分市场应通过**活动编号**字段与活动连接。与这些细分市场相关的人员将获得特定的价格和折扣。
- en: The segments are also used to create the interaction log entries and To-do's
    for this campaign. We need to make our target group aware that this campaign exists
    by sending them a letter, fax, e-mail, or even a phone call.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 这些细分市场也用于创建此活动的交互日志条目和待办事项。我们需要通过发送信件、传真、电子邮件甚至电话，让我们的目标群体意识到这个活动的存在。
- en: Activate
  id: totrans-253
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 激活
- en: By activating the campaign, the system will add all contacts to the campaign
    group and create interaction log entries.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 通过激活活动，系统将所有联系人添加到活动组中，并创建交互日志条目。
- en: The interaction log entries will be used to calculate the cost of a campaign.
    Each interaction has a specific cost and all costs add up to the total amount
    on the campaign.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 交互日志条目将用于计算活动的成本。每次交互都有一个特定的成本，所有成本加起来就是活动上的总金额。
- en: When an opportunity comes in, we can point this to a specific campaign. The
    value of this opportunity is also used in estimating the success of the campaign.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 当机会来临时，我们可以将其指向特定的活动。这个机会的价值也用于估计活动的成功程度。
- en: The campaign is also copied into the sales documents using the dimensions attached
    to the campaign. This allows us to further analyze the results.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 活动也将通过附加到活动的维度复制到销售文档中。这使我们能够进一步分析结果。
- en: Outlook integration
  id: totrans-258
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Outlook集成
- en: Salespeople are often on the road without online access to the ERP system, and
    Microsoft Dynamics NAV does not have an offline mode. To solve this problem, Microsoft
    Dynamics NAV is integrated with Microsoft Outlook. This allows salespeople to
    view contacts and tasks offline and replicate with the back office system when
    possible.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 销售人员经常在路上，无法访问ERP系统，而Microsoft Dynamics NAV没有离线模式。为了解决这个问题，Microsoft Dynamics
    NAV与Microsoft Outlook集成。这使得销售人员可以离线查看联系人和任务，并在可能的情况下与后台系统同步。
- en: If salespeople use a Windows Mobile phone with Microsoft Outlook, they can even
    have all their Microsoft Dynamics NAV information on their device.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 如果销售人员使用带有Microsoft Outlook的Windows Mobile手机，他们甚至可以在设备上拥有所有Microsoft Dynamics
    NAV信息。
- en: Using user-defined views will also enable us to synchronize other Microsoft
    Dynamics NAV data to Microsoft Outlook, for example, the customer table with the
    current value of the **Balance** field or the item table with the current inventory.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 使用用户定义的视图还可以使我们能够将其他Microsoft Dynamics NAV数据同步到Microsoft Outlook，例如，带有**余额**字段当前值的客户表或带有当前库存的项目表。
- en: We will discuss the possibilities of interfacing with Microsoft Outlook in [Chapter
    9](ch09.html "Chapter 9. Interfacing"), *Interfacing*.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在[第9章](ch09.html "第9章。接口")，*接口*中讨论与Microsoft Outlook接口的可能性。
- en: E-mail logging
  id: totrans-263
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 邮件记录
- en: Microsoft Dynamics NAV also has a capability to read exchange shared folders
    such as `info@ mailboxes`. For each e-mail, the system can generate Interaction
    Log Entries and To-do's.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV 还具有读取交换共享文件夹的能力，例如 `info@ 邮箱`。对于每封电子邮件，系统都可以生成交互日志条目和待办事项。
- en: The setup
  id: totrans-265
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置
- en: Before implementing relationship management, we should properly set up the options.
    This can be done in the **Marketing Setup**.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 在实施关系管理之前，我们应该正确设置选项。这可以在**营销设置**中完成。
- en: '![The setup](img/0365EN_04_53.jpg)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![设置](img/0365EN_04_53.jpg)'
- en: 'Let''s take a look at all the fields:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看看所有字段：
- en: '**Attachment Storage Type**: The attachments in the interaction log entries
    can either be stored in the database (embedded) or on the filesystem (disk file).
    It is highly recommended to store them on the filesystem.'
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**附件存储类型**：交互日志条目中的附件可以存储在数据库中（嵌入式）或文件系统中（磁盘文件）。强烈建议将它们存储在文件系统中。'
- en: '**Attachment Storage Location**: If we chose to store the attachments on file
    system, this is where we specify the path.'
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**附件存储位置**：如果我们选择在文件系统中存储附件，这就是我们指定路径的地方。'
- en: '**Index Mode**: When using a contact search, this should be set to **Auto**.
    It might have a small drawback on performance and cause the database to become
    bigger.'
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**索引模式**：在执行联系人搜索时，应将其设置为**自动**。这可能在性能上略有不足，并可能导致数据库变得更大。'
- en: '**Inheritance**: When entering a person''s profile, it can inherit the salesperson
    code, territory code, country/region code, language code, address details, and
    communication details from the company it belongs to.'
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**继承**：在输入个人资料时，可以继承所属公司的销售员代码、地区代码、国家/地区代码、语言代码、地址详情和通信详情。'
- en: '**Defaults**: A new contact can get a default salesperson code, territory code,
    country/region code, language code, or correspondence type. There is a different
    default salutation code for companies and persons.'
  id: totrans-273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**默认值**：新联系人可以获取默认销售员代码、地区代码、国家/地区代码、语言代码或通信类型。公司和个人的默认问候代码不同。'
- en: '**Default Sales Cycle Code**: Every new opportunity will automatically get
    this code.'
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**默认销售周期代码**：每个新的机会都将自动获得此代码。'
- en: '**Mergefield Language ID**: This defines if the Word merge fields are in the
    local language or in English.'
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**合并字段语言ID**：这定义了Word合并字段是使用本地语言还是英语。'
- en: '**Synchronization**: Here, we enter the default business relation code for
    customers, vendors, and bank accounts.'
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**同步**：在这里，我们输入客户、供应商和银行账户的默认业务关系代码。'
- en: '**Maintain Dupl. Search strings**: Check this field if duplicate contact functions
    are used.'
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**维护重复搜索字符串**：如果使用重复联系人功能，请检查此字段。'
- en: '**Autosearch for Duplicates**: Use this option if the system should automatically
    search when entering new contacts.'
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自动搜索重复项**：如果系统在输入新联系人时应自动搜索，请使用此选项。'
- en: '**Search Hit %**: This determines the percentage of matching lines from the
    duplicate search string setup should have to qualify as a duplicate contact.'
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**搜索命中百分比**：这决定了从重复搜索字符串设置中匹配的行数百分比，应达到以作为重复联系人的标准。'
- en: Customizing relationship management
  id: totrans-280
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 定制关系管理
- en: RM is a complete module that is not often highly customized or verticalized.
    However, we will describe some possible changes and how to integrate an add-on,
    in our case the squash application with relationship management.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: RM是一个完整的模块，通常不会高度定制或垂直化。然而，我们将描述一些可能的更改以及如何集成附加组件，在我们的案例中是squash应用程序与关系管理。
- en: All examples in this chapter are part of the objects downloaded for [Chapter
    2](ch02.html "Chapter 2. A Sample Application"), *A Sample Application*.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中的所有示例都是[第2章](ch02.html "第2章。一个示例应用")下载的对象的一部分，*一个示例应用*。
- en: Salutation formula types
  id: totrans-283
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问候公式类型
- en: By default, the system has two salutation formula types, formal and informal,
    allowing us to print Dear Mrs. Brown, or Dear Angela, but what if we want to print
    Attn. Mrs. Brown?
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，系统有两种问候公式类型，正式和非正式，允许我们打印“亲爱的布朗夫人”，或“亲爱的安吉拉”，但如果我们想打印“致布朗夫人”，怎么办呢？
- en: For this, we need to first add an option to the **Salutation Type** field in
    the **Salutation Formula** table.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 为了做到这一点，我们首先需要向**问候公式**表中的**问候类型**字段添加一个选项。
- en: '![Salutation formula types](img/0365EN_04_54.jpg)'
  id: totrans-286
  prefs: []
  type: TYPE_IMG
  zh: '![问候公式类型](img/0365EN_04_54.jpg)'
- en: Support the formula
  id: totrans-287
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 支持公式
- en: Next, we want to use the formula when printing a Contact Cover Sheet. This uses
    the **Format Address** functionality from codeunit 365.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们希望在打印联系封面时使用公式。这使用了来自代码单元365的**格式地址**功能。
- en: This codeunit is the single point in Dynamics NAV where all the address formatting
    is done.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 此代码单元是Dynamics NAV中完成所有地址格式化的唯一点。
- en: 'The formatting of contact persons is done in the `ContactAddrAlt` function.
    We should make the following change:'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 联系人的格式化是在`ContactAddrAlt`函数中完成的。我们应该进行以下更改：
- en: '[PRE2]'
  id: totrans-291
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Tip
  id: totrans-292
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Always comment out the original line of code before you make a change. This
    will enable you to always go back to standard code and help when upgrading this
    solution to a newer version.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行更改之前，始终注释掉原始代码行。这将使您始终可以回到标准代码，并在升级此解决方案到新版本时提供帮助。
- en: Most NAV partners and developers have their own way of documenting and commenting.
    The example in here is the minimum comment requirement. We will discuss versioning
    objects in [Chapter 10](ch10.html "Chapter 10. Application Design"), *Application
    Design*.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数NAV合作伙伴和开发人员都有自己的文档和注释方式。这里的例子是最低注释要求。我们将在[第10章](ch10.html "第10章。应用设计")*应用设计*中讨论对象版本控制。
- en: The GetSalutation function
  id: totrans-295
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 获取问候函数
- en: 'In our modification, we use the `GetSalutation` function in `Contact table
    (5050)` instead of the **Name** field. Let''s have a look at that function and
    analyze what it does:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的修改中，我们使用`Contact table (5050)`中的`GetSalutation`函数代替**名称**字段。让我们看看这个函数并分析它做了什么：
- en: '[PRE3]'
  id: totrans-297
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The function uses two parameters: `SalutationType` and `LanguageCode`. With
    these values and the salutation code of the contact, it checks whether there is
    a valid formula. Since we only added a new option, the code still works because
    at database level, the **Option** field is translated to an **Integer**.'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 该函数使用两个参数：`SalutationType`和`LanguageCode`。使用这些值和联系人的问候代码，它检查是否存在有效的公式。由于我们只添加了一个新选项，代码仍然有效，因为在数据库级别，**选项**字段被转换为**整数**。
- en: Note
  id: totrans-299
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: For documentation purposes, we could also implement the new option value in
    this function. The downside of this would be that we do a modification that is
    not technically necessary but needs to be maintained and upgraded.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 为了文档目的，我们也可以在这个函数中实现新的选项值。这样做的不利之处在于，我们进行了一个技术上不必要的修改，但需要维护和升级。
- en: Depending on the order of the formula, the necessary name fields are combined
    and used as the return value of the function.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 根据公式的顺序，必要的名称字段被组合并用作函数的返回值。
- en: Setup the salutation formula
  id: totrans-302
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置问候公式
- en: If we want to use our new salutation formula, we need to set it up first. We
    will do this for F-MAR to test it with CT100191 Megan Sherman from American Wood
    Exports.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们要使用我们新的问候公式，我们首先需要设置它。我们将为F-MAR进行此操作，以使用CT100191 Megan Sherman从American
    Wood Exports进行测试。
- en: '![Setup the salutation formula](img/0365EN_04_55.jpg)'
  id: totrans-304
  prefs: []
  type: TYPE_IMG
  zh: '![设置问候公式](img/0365EN_04_55.jpg)'
- en: Test the solution
  id: totrans-305
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 测试解决方案
- en: 'After adding the new formula, we print a cover sheet from the contact card
    using the **Contact Cover Sheet** option from the **Report** actions. The result
    will look like this:'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 在添加新公式后，我们将使用**报告**操作中的**联系封面**选项从联系卡打印封面。结果将如下所示：
- en: '![Test the solution](img/0365EN_04_56.jpg)'
  id: totrans-307
  prefs: []
  type: TYPE_IMG
  zh: '![测试解决方案](img/0365EN_04_56.jpg)'
- en: Customer and vendor numbering
  id: totrans-308
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 客户和供应商编号
- en: Another common requirement from end users is to maintain the same number when
    creating a customer or vendor from a contact.
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 最终用户的一个常见要求是在从联系信息创建客户或供应商时保持相同的编号。
- en: 'This can be done by adding one line of code to the `CreateCustomer` function
    in the contact table:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以通过在联系表中的`CreateCustomer`函数中添加一行代码来完成：
- en: '[PRE4]'
  id: totrans-311
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'This works because by populating the `No.` field, the Number Series functionality
    in the `OnInsert` trigger does not start:'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 这之所以有效，是因为通过填充“编号”字段，`OnInsert`触发器中的数字序列功能不会启动：
- en: '[PRE5]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Disabling the direct creation of customers and vendors
  id: totrans-314
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 禁用直接创建客户和供应商
- en: When using this option, it should be disabled to directly create a customer
    or vendor. This can be done easily by removing the `No. Series` from the **Sales
    & Receivables Setup** and **Purchases & Payables Setup**. This results in a runtime
    error message when creating the customer or vendor.
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用此选项时，应禁用直接创建客户或供应商。这可以通过从**销售与应收账款设置**和**采购与应付账款设置**中移除`编号序列`来实现。这将在创建客户或供应商时导致运行时错误消息。
- en: Sharing contact information across companies
  id: totrans-316
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在公司间共享联系信息
- en: When more companies have their administration in Microsoft Dynamics NAV, they
    most often have the same owner or group of owners that want their contact data
    to span across their companies.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 当更多公司在Microsoft Dynamics NAV中进行管理时，它们通常拥有相同的所有者或所有者群体，他们希望他们的联系数据跨越他们的公司。
- en: This can be achieved by sharing some tables across all companies and changing
    some business logic.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以通过在所有公司之间共享一些表并更改一些业务逻辑来实现。
- en: Share tables
  id: totrans-319
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 共享表
- en: By default, Microsoft Dynamics NAV will create a separate instance of each table
    for each company. This can be changed with the `DataPerCompany` property in the
    table designer.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Microsoft Dynamics NAV将为每个公司创建每个表的单独实例。这可以通过表设计器中的`DataPerCompany`属性来更改。
- en: '![Share tables](img/0365EN_04_57.jpg)'
  id: totrans-321
  prefs: []
  type: TYPE_IMG
  zh: '![共享表](img/0365EN_04_57.jpg)'
- en: 'The following lists should be shared across the database since they contain
    the main contact information and the link to the customer and vendor data:'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 以下列表应跨数据库共享，因为它们包含主要联系人信息和客户与供应商数据的链接：
- en: 5050 - Contact
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 5050 - 联系人
- en: 5051 - Contact Alt. Address
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 5051 - 联系人备用地址
- en: 5052 - Contact Alt. Addr. Date Range
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 5052 - 联系人备用地址日期范围
- en: 5053 - Business Relation
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 5053 - 业务关系
- en: 5054 - Contact Business Relation
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 5054 - 联系人业务关系
- en: This will allow us to reuse contact data in all companies. Other tables are
    optional to share but might be useful.
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 这将允许我们在所有公司中重用联系人数据。其他表可以共享，但可能有用。
- en: By sharing the **Contact Profile Answer** table, other companies can see how
    a customer is doing within the group.
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 通过共享**联系人配置文件答案**表，其他公司可以了解客户在集团中的表现。
- en: The segment tables could be shared in order to slice and dice information across
    the company. This also requires the criteria tables to be shared.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 分段表可以共享，以便在公司内切片和切块信息。这也需要共享标准表。
- en: Tip
  id: totrans-331
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: When you share the profile or segment tables, the reports that calculate them
    should be started for each company individually in the database.
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 当你共享配置文件或分段表时，计算它们的报告应在数据库中为每个公司单独启动。
- en: Campaigns and opportunities should not be shared since that interfaces with
    the ERP system. Never share financial tables such as the value entry or document
    tables.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 营销活动和机会不应共享，因为它们与ERP系统接口。永远不要共享财务表，如价值录入或文档表。
- en: Interaction log entries could be shared but we should realize that most table
    relations to sales and purchase documents will not work when we are in the wrong
    company.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 交互日志条目可以共享，但我们应该意识到，当我们处于错误的公司时，大多数与销售和采购文档相关的表关系将不起作用。
- en: Business relation
  id: totrans-335
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 业务关系
- en: When sharing the contacts across the companies, we are interested to see in
    which company contacts are customer and vendor. We also want to maintain those
    tables when the contact information changes.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 当在各个公司之间共享联系人时，我们感兴趣的是看到哪些公司在哪些公司中是客户和供应商。我们还想在联系人信息更改时维护这些表。
- en: This means that besides sharing the Contact Business Relation table, we should
    also add a field indicating the company and add this field to the primary key.
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着除了共享联系人业务关系表外，我们还应该添加一个表示公司的字段，并将此字段添加到主键中。
- en: '![Business relation](img/0365EN_04_58.jpg)'
  id: totrans-338
  prefs: []
  type: TYPE_IMG
  zh: '![业务关系](img/0365EN_04_58.jpg)'
- en: C/AL code modifications
  id: totrans-339
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: C/AL代码修改
- en: To make this customization work, we need the C/AL code to understand what we
    want to do. It needs to understand that we added the company. Let's go through
    all the functions we need to change to make this work.
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 要使此自定义功能正常工作，我们需要C/AL代码理解我们想要做什么。它需要理解我们添加了公司。让我们查看所有需要更改以使此功能正常工作的函数。
- en: The functions that create the customer and vendor records we saw in [Chapter
    2](ch02.html "Chapter 2. A Sample Application"), *A Sample Application*, should
    also be checked, for example, the function `CreateCustomer` in the contact table.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在[第2章](ch02.html "第2章。一个示例应用")*一个示例应用*中看到的创建客户和供应商记录的功能也应该进行检查，例如，联系人表中的`CreateCustomer`函数。
- en: '[PRE6]'
  id: totrans-342
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'And a little bit further up in the C/AL code:'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 在C/AL代码的稍上方：
- en: '[PRE7]'
  id: totrans-344
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'We should also check the code that maintains data integrity, which is the `CustVendBank-Update
    Codeunit (5055)` that we discussed in [Chapter 2](ch02.html "Chapter 2. A Sample
    Application"), *A Sample Application*:'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还应该检查维护数据完整性的代码，即我们在[第2章](ch02.html "第2章。一个示例应用")*一个示例应用*中讨论的`CustVendBank-Update
    Codeunit (5055)`：
- en: '[PRE8]'
  id: totrans-346
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Here, we use the `CHANGECOMPANY` C/AL command to change the company for a specific
    instance of a variable.
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们使用`CHANGECOMPANY` C/AL命令来更改特定变量的公司。
- en: Note
  id: totrans-348
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: There are more functions impacted such as the `UpdateQuotes` function in the
    contact table. Analyze your database before implementing this feature.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 还有更多受影响的函数，例如联系表中的`UpdateQuotes`函数。在实施此功能之前，请分析您的数据库。
- en: Number Series
  id: totrans-350
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 编号系列
- en: The last change we should do for a properly working system is create a new instance
    of the Number Series functionality.
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一个正常工作的系统，我们最后应该做的更改是创建编号系列功能的新实例。
- en: This can be achieved relatively easily since the Number Series are an isolated
    set of objects.
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 由于编号系列是一个独立的对象集合，因此这可以相对容易地实现。
- en: In the object designer, we should filter on this set of objects and export them
    to a `.txt` file.
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 在对象设计器中，我们应该过滤这一组对象，并将它们导出到一个`.txt`文件。
- en: 'Table (308): No. Series'
  id: totrans-354
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 表格（308）：编号系列
- en: 'Table (309): No. Series Line'
  id: totrans-355
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 表格（309）：编号系列行
- en: 'Table (310): No. Series Relationship'
  id: totrans-356
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 表格（310）：编号系列关系
- en: 'Report (21): No. Series'
  id: totrans-357
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报告（21）：编号系列
- en: 'Report (22): No. Series Check'
  id: totrans-358
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报告（22）：编号系列检查
- en: 'Codeunit (396): NoSeriesManagement'
  id: totrans-359
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代码单元（396）：NoSeriesManagement
- en: 'Page (456): No. Series'
  id: totrans-360
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 页面（456）：编号系列
- en: 'Page (457): No. Series Lines'
  id: totrans-361
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 页面（457）：编号系列行
- en: 'Page (458): No. Series Relationships'
  id: totrans-362
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 页面（458）：编号系列关系
- en: 'In this file, we can renumber them and rename them so we get something like
    this:'
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个文件中，我们可以重新编号并重命名它们，以便我们得到如下内容：
- en: 'Table (123456721): No. Series (Shared)'
  id: totrans-364
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 表格（123456721）：编号系列（共享）
- en: 'Table (123456722): No. Series Line (Shared)'
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 表格（123456722）：编号系列行（共享）
- en: 'Table (123456723): No. Series Rel. (Shared)'
  id: totrans-366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 表格（123456723）：编号系列（共享）
- en: 'Report (123456721): No. Series (Shared)'
  id: totrans-367
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报告（123456721）：编号系列（共享）
- en: 'Report (123456722): No. Series Check (Shared)'
  id: totrans-368
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报告（123456722）：编号系列检查（共享）
- en: 'Codeunit (123456721): NoSeriesManagement (Shared)'
  id: totrans-369
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代码单元（123456721）：NoSeriesManagement（共享）
- en: 'Page (123456721): No. Series (Shared)'
  id: totrans-370
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 页面（123456721）：编号系列（共享）
- en: 'Page (123456722): No. Series Lines (Shared)'
  id: totrans-371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 页面（123456722）：编号系列行（共享）
- en: 'Page (123456723): No. Series Rel. (Shared)'
  id: totrans-372
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 页面（123456723）：编号系列关系（共享）
- en: Where, the tables should be `DataPerCompany` No.
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 其中，表格应该是`DataPerCompany`编号。
- en: Final steps
  id: totrans-374
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 最终步骤
- en: When we have shared Number Series functionality, we can implement this in the
    existing objects.
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们有了共享编号系列功能时，我们可以在现有的对象中实现这一点。
- en: The **Contact Nos.** field in the marketing setup table should change the table
    relation to the Shared No. Series table as well as the **No. Series** field in
    the contact table.
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在营销设置表中，**联系号码**字段应将表格关系更改为共享编号系列表以及联系表中的**编号系列**字段。
- en: The `NoSeriesMgt` variable in the contact table should move from `NoSeriesManagement`
    to `SharedNoSeriesMgt`.
  id: totrans-377
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 联系表中的`NoSeriesMgt`变量应从`NoSeriesManagement`移动到`SharedNoSeriesMgt`。
- en: Alternative approaches
  id: totrans-378
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 替代方法
- en: Sharing the contact information across companies is a change that has been implemented
    by many companies and can be considered safe. Other tables in Microsoft Dynamics
    NAV are more difficult to share because of financial or operational information.
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: 在公司之间共享联系信息是许多公司已经实施过的更改，并且可以被认为是安全的。由于财务或运营信息，Microsoft Dynamics NAV中的其他表格更难以共享。
- en: A typical example in the standard application is `Item table (27)`. This contains
    a field `Cost is Adjusted (29)`, which is used when running cost adjustment. If
    this table will be shared across all companies, it would create a major issue
    with running this function. We will discuss cost adjustment in [Chapter 5](ch05.html
    "Chapter 5. Production"), *Production*.
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: '在标准应用程序中，一个典型的例子是`项目表（27）`。这个表包含一个字段`Cost is Adjusted (29)`，当运行成本调整时使用。如果这个表格将在所有公司之间共享，将会在运行此功能时产生一个主要问题。我们将在[第5章](ch05.html
    "第5章。生产") *生产* 中讨论成本调整。 '
- en: 'For this issue, there are two commonly implemented solutions:'
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个问题，有两个常见的解决方案：
- en: '**Shared Master Items**: We can create a new table called master item. This
    table is shared across all companies and contains the information we share like
    descriptions and pricing. When the data in this table is changed, it should enable
    a mechanism comparable to the `CustVendBank-Update Codeunit (5055)`, which updates
    the items in the other companies using the `CHANGECOMPANY` C/AL function.'
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**共享主项目**：我们可以创建一个新的表格，称为主项目。这个表格在所有公司之间共享，包含我们共享的信息，如描述和定价。当这个表格中的数据发生变化时，应该启用一个类似于`CustVendBank-Update
    Codeunit (5055)`的机制，该机制使用`CHANGECOMPANY` C/AL函数更新其他公司的项目。'
- en: '**External Synchronization**: We could implement something that will export
    the changes done in one company into an XML file. An Application Server can run
    in the background and read this xml file and implement these changes to other
    companies in the database or even other databases.'
  id: totrans-383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**外部同步**：我们可以实现一些将一个公司中做的更改导出到XML文件的功能。一个应用程序服务器可以在后台运行并读取此xml文件，并将这些更改应用到数据库中的其他公司或甚至其他数据库。'
- en: The first solution with master items looks a lot like the way contacts work
    in the standard application and is a perfect example of look, learn, and love
    using proven data structures in customized solutions.
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个使用主项目的解决方案很像标准应用程序中联系人的工作方式，是观察、学习和在定制解决方案中使用经过验证的数据结构的完美示例。
- en: Adding contacts to segments
  id: totrans-385
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加联系人到段
- en: The last change we are implementing in relationship management is adding a table
    to the **Add Contacts** functionality in segments.
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在关系管理中实施的最后一个更改是在段中添加到**添加联系人**功能的一个表。
- en: We have seen that it is already complete but a vertical solution might want
    to integrate its ledger entry tables here.
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到它已经完整，但一个垂直解决方案可能希望在这里集成其账簿条目表。
- en: For this example, we will make it possible to filter in the squash ledger entries
    from the example application in [Chapter 2](ch02.html "Chapter 2. A Sample Application"),
    *A Sample Application*.
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个例子，我们将使它能够从[第2章](ch02.html "第2章。一个示例应用程序")的示例应用程序中筛选压榨账簿条目，*一个示例应用程序*。
- en: Expanding report
  id: totrans-389
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 扩展报告
- en: The first step is to add the squash ledger entries as `DataItem` to the Add
    Contacts report (5198). We will copy the functionality from the Value Entries
    as this is comparable functionality.
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是将压榨账簿条目作为`DataItem`添加到添加联系人报告（5198）。我们将从值条目复制功能，因为这具有相似的功能。
- en: Tip
  id: totrans-391
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Always find comparable standard application functionality to learn from. Never
    just copy and paste this but learn how it's done and apply your own knowledge.
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 总是寻找可比较的标准应用程序功能来学习。永远不要只是复制粘贴，而是学习它是如何完成的，并应用你自己的知识。
- en: '![Expanding report](img/0365EN_04_59.jpg)'
  id: totrans-393
  prefs: []
  type: TYPE_IMG
  zh: '![扩展报告](img/0365EN_04_59.jpg)'
- en: We cannot copy and paste the table relation from the other contact business
    relation `DataItem` since squash players are contact persons, not companies. Our
    table relation should be `Contact No.=FIELD(No.)`.
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不能从其他联系人业务关系`DataItem`复制粘贴表关系，因为压榨球员是联系人，而不是公司。我们的表关系应该是`Contact No.=FIELD(No.)`。
- en: 'The code in our Contact Business Relation table tells us that we need two new
    variables or the type Boolean, `SquashFilters` and `SkipSquashLedgerEntry`:'
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在联系人业务关系表中的代码告诉我们，我们需要两个新的布尔类型变量，`SquashFilters`和`SkipSquashLedgerEntry`：
- en: '[PRE9]'
  id: totrans-396
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The `SquashFilters` is determined in the `OnPreReport` trigger:'
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: '`SquashFilters`在`OnPreReport`触发器中确定：'
- en: '[PRE10]'
  id: totrans-398
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The code in the Squash Ledger Entry `DataItem` should look like this:'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 压榨账簿条目`DataItem`中的代码应如下所示：
- en: '[PRE11]'
  id: totrans-400
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Make sure we filter on our instance of Contact Business Relation and that we
    filter on our link to the squash player table.
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: 确保我们根据我们的联系人业务关系实例进行筛选，并且根据我们与压榨球员表的链接进行筛选。
- en: The `ContactOK` indicates that all contact persons connected to this squash
    ledger entry will be inserted.
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: '`ContactOK`表示所有与该压榨账簿条目相连的联系人将被插入。'
- en: Implementing criteria filters
  id: totrans-403
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实施标准筛选器
- en: To support the criteria filter functionality, we need to make two changes, one
    to the **Add Contacts** report and the other to the `SegCriteriaManagement` codeunit.
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 为了支持标准筛选器功能，我们需要对**添加联系人**报告和`SegCriteriaManagement`代码单元进行两个更改。
- en: 'In the **Add Contacts** report, we add this C/AL code to the `OnPreReport`
    trigger. This will make a call to the `SegCriteriaManagement Codeunit (5062)`:'
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: 在**添加联系人**报告中，我们在`OnPreReport`触发器中添加此C/AL代码。这将调用`SegCriteriaManagement 代码单元（5062）`：
- en: '[PRE12]'
  id: totrans-406
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'In the `SegCriteriaManagement` codeunit, we add this code to the `SegCriteriaFilter`
    function, which will require a new local variable for `Squash Ledger Entry`:'
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: 在`SegCriteriaManagement`代码单元中，我们在`SegCriteriaFilter`函数中添加此代码，这将需要一个新局部变量`Squash
    Ledger Entry`：
- en: '[PRE13]'
  id: totrans-408
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Test solution
  id: totrans-409
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 测试解决方案
- en: 'Now, we can test the solution by trying to add all squash player of type **Member**
    to a **Segment**:'
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以通过尝试将所有类型的**成员**压榨球员添加到**段**来测试解决方案：
- en: '![Test solution](img/0365EN_04_60.jpg)'
  id: totrans-411
  prefs: []
  type: TYPE_IMG
  zh: '![测试解决方案](img/0365EN_04_60.jpg)'
- en: The result is a segment with the required squash players.
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是一个包含所需压榨球员的段。
- en: '![Test solution](img/0365EN_04_61.jpg)'
  id: totrans-413
  prefs: []
  type: TYPE_IMG
  zh: '![测试解决方案](img/0365EN_04_61.jpg)'
- en: Note
  id: totrans-414
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: This change also needs to be implemented to the reduce/refine functionality,
    which works similar to the add contacts report.
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: 此更改也需要实施到减少/细化功能，该功能与添加联系人报告类似。
- en: Summary
  id: totrans-416
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we took a deep dive into the Microsoft Dynamics NAV relationship
    management functionality. We learned how it is integrated with the ERP part of
    the system. Relationship management can be very useful to analyze sales data.
    With profiles, we can filter on turnover and profit figures and use them in segments.
  id: totrans-417
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们深入探讨了微软Dynamics NAV的关系管理功能。我们学习了它是如何与系统的ERP部分集成的。关系管理对于分析销售数据非常有用。通过配置文件，我们可以根据营业额和利润数字进行筛选，并在各个部分中使用它们。
- en: Interaction Log Entries allow us to keep track of all the contact moments with
    the people we do business with. Outlook integration can be used for salespeople
    to work remotely and synchronize with the system.
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: 交互日志条目使我们能够跟踪与我们的商业伙伴的所有接触时刻。Outlook集成可用于销售人员远程工作并与系统同步。
- en: Campaigns and opportunities help us to keep track of the quote process and make
    our sales working more efficient.
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: 营销活动和机会帮助我们跟踪报价过程，并使我们的销售工作更加高效。
- en: Lastly, we looked at some common requirements to change the relationship management
    system to meet our company's specific requirements.
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们查看了一些将关系管理系统更改以满足我们公司特定需求的常见要求。
- en: In the next chapters, we will look at the ERP part of Microsoft Dynamics NAV
    starting with the process in [Chapter 5](ch05.html "Chapter 5. Production"), *Production*,
    and [Chapter 6](ch06.html "Chapter 6. Trade"), *Trade*.
  id: totrans-421
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将从[第5章](ch05.html "第5章。生产")“生产”和[第6章](ch06.html "第6章。贸易")“贸易”开始，探讨微软Dynamics
    NAV的ERP部分。
