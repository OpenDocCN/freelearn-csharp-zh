<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Creating Textures, Maps, and Materials</h1>
                </header>
            
            <article>
                
<p>In this chapter, we will cover:</p>
<ul>
<li>Creating a basic material with Standard Shader (Specular setup)</li>
<li>Adapting a basic material from Specular setup to Metallic</li>
<li>Applying Normal maps to a Material</li>
<li>Adding Transparency and Emission maps to a material</li>
<li>Highlighting materials at mouse-over</li>
<li>Adding Detail maps to a material</li>
<li>Fading the transparency of a material</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Introduction</h1>
                </header>
            
            <article>
                
<p><span>There is a close relationship between <strong><span class="KeyWordPACKT">Textures</span></strong>, <span class="KeyWordPACKT"><strong>Materials</strong>,</span> and <strong><span class="KeyWordPACKT">Shaders</span></strong>, and their relationships are important:</span></p>
<ul>
<li><span class="KeyWordPACKT">Textures</span> <span><span>are two-dimensional images. The surface of 2D and 3D objects in Unity games are defined by meshes. The <strong><span class="KeyWordPACKT">Texture</span></strong> images are mapped onto meshes by <strong><span class="KeyWordPACKT">Materials</span></strong> – each point (vertex) on a mesh has to be mapped to some value in the <strong><span class="KeyWordPACKT">Texture</span></strong>. A <strong><span class="KeyWordPACKT">Texture</span></strong> may indicate colors, but may indicate bumps/wrinkles or transparency – all of which can contribute to determining what is finally rendered for the user to see.</span></span></li>
<li><strong><span class="KeyWordPACKT">Materials</span></strong> <span>specify which <strong><span class="KeyWordPACKT">Shader</span></strong> should be used to render the images onto the meshes, plus values for the <strong><span class="KeyWordPACKT">Shader's</span></strong> parameters (such as which textures/parts of a texture map, colors, other values). Learn more at the Unity documentation page about Materials:</span> <a href="https://docs.unity3d.com/Manual/Materials.html"><span class="URLPACKT">https://docs.unity3d.com/Manual/Materials.html</span></a>.</li>
<li><strong><span class="KeyWordPACKT">Shaders</span></strong> <span>define the method to render an object. <strong><span class="KeyWordPACKT">Shaders</span></strong> can use multiple textures for more sophisticated results, and specify which parameters may be customized in the <span class="KeyWordPACKT">Material Inspector</span>. At the end of the day, <strong><span class="KeyWordPACKT">Shaders</span></strong> are code and mathematics, but Unity provides a set of <strong><span class="KeyWordPACKT">Shaders</span></strong> for us. We can also use the new <span class="KeyWordPACKT"><strong>Shader Graph</strong></span> package, which allows the creation of sophisticated <strong><span class="KeyWordPACKT">Shaders</span></strong> using a visual, drag-and-drop graphing interface. In addition, custom shaders can be written in the <strong><span class="KeyWordPACKT">ShaderLab</span></strong> language.</span></li>
</ul>
<p><span>Unity offers physically-based <span class="KeyWordPACKT">Shaders</span>. <span class="KeyWordPACKT"><strong>Physically-Based Rendering</strong></span> (<strong><span class="KeyWordPACKT">PBR</span></strong>) is a technique that simulates the appearance of <strong><span class="KeyWordPACKT">Materials</span></strong> based on how the light reacts with that <strong><span class="KeyWordPACKT">Material</span></strong> (more specifically, the matter from which that material is made) in the real world. Such a technique allows for more realistic and consistent materials. So, your creations in Unity should look better than ever. Creating <strong><span class="KeyWordPACKT">Materials</span></strong> in Unity has also become more efficient now. Once you have chosen between the available workflows (<strong><span class="KeyWordPACKT">Metallic</span></strong> or <strong><span class="KeyWordPACKT">Specular</span></strong> setup; we'll get back to that later), there is no longer a need to browse the drop-down menus in search of specific features, as Unity optimizes the shader for the created <strong><span class="KeyWordPACKT">Material</span></strong>, removing unnecessary code for unused properties once the material has been set up and the texture maps have been assigned.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating and saving texture maps</h1>
                </header>
            
            <article>
                
<p>The visual aspects of a material can be modified through the use of textures. In order to create and edit image files, you will need an image editor, such as Adobe Photoshop (the industry standard, and has its native format supported by Unity) or GIMP. In order to follow the recipes in this chapter, it's strongly recommended that you have access to a few pieces of software such as these.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p><span>When saving <strong><span class="KeyWordPACKT">Texture Maps</span></strong>, especially the ones that have an <strong><span class="KeyWordPACKT">Alpha Channel</span></strong>, you might want to choose an adequate file format. PSD, Photoshop's native format, is practical for preserving the original artwork in many layers. The PNG format is also a great option, but please note that Photoshop doesn't handle PNG's <span class="KeyWordPACKT"><strong>Alpha Channel</strong></span> independently of the transparency, possibly compromising the material's appearance. Also, PNG files don't support layers. For this chapter, we will often use the TIF format for three main reasons:</span></p>
<ul>
<li><span>I</span>t's open to those not using Photoshop</li>
<li><span>I</span>t uses layers</li>
<li><span>It preserves the <span class="KeyWordPACKT"><strong>Alpha Channel</strong></span> information</span></li>
</ul>
<p><span>The file size is significantly greater than in PSDs and PNGs, so feel free to save your work as PSDs (if you have Photoshop) or PNGs (if you don't need layers and, if using Photoshop, <span class="KeyWordPACKT"><strong>Alpha Channels</strong></span>).</span></p>
<p><span>Finally, a word of advice: although it's possible to manually create <span class="KeyWordPACKT"><strong>Texture Maps</strong></span> for our materials by using the traditional image-editing software, new tools such as Allegorthmic's Substance Painter and Bitmap2Material make this work much more efficient, complete, and intuitive, complementing the traditional <strong><span class="KeyWordPACKT">Texture</span></strong>-making process or replacing it altogether. These tools provide <span class="KeyWordPACKT">Texture</span> work support in a similar way to what zBrush and Mudbox did for 3D modeling. For design professionals, we strongly recommend at least trying such tools. Note, however, that products from Allegorithmic won't make use of Unity's Standard Shader, relying on the substance files (which are natively supported by Unity).</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The big picture</h1>
                </header>
            
            <article>
                
<p><span>To understand the <span class="KeyWordPACKT"><strong>Standard Shaders</strong></span>, it's a good idea to know the workflows, their properties, and how they affect the material's appearance. There are, however, many possible ways to work with <strong><span class="KeyWordPACKT">Materials</span></strong> – texture map requirements, for instance, might change from engine to engine, or from one tool to another. Presently, Unity supports two different workflows: one based on <strong><span class="KeyWordPACKT">Specular</span></strong>, and another based on <span class="KeyWordPACKT">Metallic</span> values. Although both workflows share similar properties (such as <strong><span class="KeyWordPACKT">Normal</span></strong>, <strong><span class="KeyWordPACKT">Height</span></strong>, <strong><span class="KeyWordPACKT">Occlusion</span></strong>, and <strong><span class="ScreenTextPACKT"><span class="packt_screen">Emission</span></span></strong>), they differ in the way the diffuse color and reflectance properties are set up.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Standard Shader (Specular workflow)</h1>
                </header>
            
            <article>
                
<p><span>Unity's Standard <strong><span class="KeyWordPACKT">Shader</span></strong> (<strong><span class="KeyWordPACKT">Specular</span></strong> setup) uses</span> <strong>Albedo</strong> and <strong>Specular/Smoothness</strong> maps, combining them to create some of the material's aspect – mainly its color and reflectance qualities. The following shows the difference between the <strong>Albedo</strong> and <strong>Smoothness</strong> maps:</p>
<ul>
<li><strong>Albedo</strong>: This is the material's diffused color. Plainly and simply, this is how you usually describe the appearance of the <strong>Material</strong> (the British flag is red, white and blue; Ferrari's logo is a black horse in a yellow setting; some sunglasses' lenses are semi-transparent gradients). This description, however, can be deceptive. Purely metallic objects (such as aluminum, chrome, and gold) should have black as their diffuse color. Their colors, as we perceive them, have originated from their specular channel. Non-metallic objects (plastic, wood, and even painted or rusted metal), on the other hand, have very distinct diffuse colors. <strong>Texture Maps</strong> for the <strong>Albedo</strong> property feature RGB channels for colors and (optionally) an Alpha Channel for transparency.</li>
<li><strong>Specular/Smoothness</strong><span>: This refers to the shininess of the material. <strong><span class="KeyWordPACKT">Texture</span></strong> maps make use of RGB channels for specular color (which inform hue and intensity), and <span class="KeyWordPACKT"><strong>Alpha Channel</strong></span> for smoothness/gloss (dark values for less shiny surfaces and blurred reflections; light/white values for shiny, mirror-like appearance). It is important to note that non-metallic objects feature neutral, very dark specular colors (with plastic, for instance, you should work with a grey value around 59). Metallic objects, on the other hand, feature very light values, and are also a bit yellowish in hue.</span></li>
</ul>
<p>To illustrate such concepts, we have created a battery object, featuring brushed metal caps and a plastic body. Observe how each map contributes to the final result:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/0be3aaf1-343d-4ed6-b6a6-ec64080ec85e.png" style="width:33.08em;height:23.33em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Standard Shader (Metallic workflow)</h1>
                </header>
            
            <article>
                
<p><span>Unity's default <span class="KeyWordPACKT"><strong>Standard Shader</strong></span> combines <strong><span class="ScreenTextPACKT"><span class="packt_screen">Albedo</span></span></strong> and <span class="packt_screen"><strong><span class="ScreenTextPACKT">Metallic</span></strong><span class="ScreenTextPACKT">/</span><strong><span class="ScreenTextPACKT">Glossiness</span></strong></span> maps to create the color and reflectance qualities of the material. The following are the differences:</span></p>
<ul>
<li><strong>Albedo</strong>: As in the <strong>Specular</strong> workflow, this is the <strong>Material's</strong> diffuse color; how you would describe the <strong>Material</strong>. However, <strong>Albedo</strong> maps for the Metallic workflow should be configured in a slightly different way than ones for <strong>Specular</strong> workflow. This time around, the perceived diffuse color of metallic materials (grey for iron, yellow/orange for golden, and so on) have to be present in the Albedo map. Again, Albedo maps feature RGB channels for the colors and (optionally) an Alpha Channel for transparency.</li>
<li><strong><span class="ScreenTextPACKT"><span class="packt_screen">Metallic/Smooth</span><span class="packt_screen">ness</span></span></strong><span>: This refers to how metallic the <strong><span class="KeyWordPACKT"><span class="packt_screen">Material</span></span></strong> looks. <span class="KeyWordPACKT"><strong>Metallic Texture Maps</strong></span> make use of the Red channel for the <strong><span class="ScreenTextPACKT"><span class="packt_screen">Metallic</span></span></strong> value (black for non-metallic and white for metallic <strong><span class="KeyWordPACKT">Materials</span></strong> that are not painted or rusted) and the <span class="KeyWordPACKT"><strong>Alpha Channel</strong></span> for smoothness (in a similar way to the <strong><span class="KeyWordPACKT">Specular</span></strong> workflow). Please note that <strong><span class="ScreenTextPACKT">Metallic</span></strong> maps do not include any information on hue, and in these cases the yellow-ish nature of the metallic gloss should be applied to the <strong><span class="ScreenTextPACKT"><span class="packt_screen">Albedo</span></span></strong> map.</span></li>
</ul>
<p><span>To reproduce the battery that illustrated the <strong><span class="KeyWordPACKT">Specular</span></strong> workflow by using the Metallic workflow, maps would have to be recreated as follows:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/10084c58-6e08-4a11-85dd-4886cdcedbc6.png" style="width:37.75em;height:26.75em;"/></div>
<p>You might have noticed that we've used white to convey a metallic object. Technically, since only the Red channel is relevant, we could have used red (R: 255, G: 0, B: 0), yellow (R: 255, G: 255, B: 0), or, for that matter, any color that has a red value of 255.</p>
<p><span>The Unity documentation pages provide two very useful charts giving examples of common properties for the <span class="KeyWordPACKT"><strong>Standard Shader</strong></span> <strong><span class="KeyWordPACKT">Metallic</span></strong> and <strong><span class="KeyWordPACKT">Specular</span></strong> workflows (</span><a href="https://docs.unity3d.com/Manual/StandardShaderMaterialCharts.html"><span class="URLPACKT">https://docs.unity3d.com/Manual/StandardShaderMaterialCharts.html</span></a>):</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5e14f4b7-f16c-4aa3-82a1-cb0b6bfefee4.png" style="width:63.92em;height:33.00em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Other material properties</h1>
                </header>
            
            <article>
                
<p><span>It's also worth mentioning that Unity's <span class="KeyWordPACKT"><strong>Standard Shaders</strong></span> support other maps such as:</span></p>
<ul>
<li><strong><span class="KeyWordPACKT">Normal Maps</span></strong><span>: The normal map adds detailed bumpiness into the <strong><span class="KeyWordPACKT">Material</span></strong>, simulating a more complex geometry. For instance, the internal ring on the positive (top) node of the battery that illustrated shader workflows is not modeled in the 3D object's geometry, but rather created through a simple <strong><span class="KeyWordPACKT">Normal Map</span></strong>.</span></li>
<li><strong><span class="KeyWordPACKT">Occlusion Maps</span></strong>: A greyscale map is used to simulate the dark sections of an object under ambient light. Usually, it is used to emphasize joints, creases, and other details of geometry.</li>
<li><strong><span class="KeyWordPACKT">Height Maps</span></strong>: These add a displacement effect, giving the impression of depth without the need for complex geometry.</li>
<li><strong><span class="KeyWordPACKT">Emission Maps</span></strong><span><span>: These add color emitted by the <strong><span class="KeyWordPACKT">Material</span></strong>, as if self-illuminated, such as fluorescent surfaces or LCDs. <strong><span class="KeyWordPACKT">Texture</span></strong> maps for Emission maps feature RGB channels for color.</span></span></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Resources</h1>
                </header>
            
            <article>
                
<p><span class="KeyWordPACKT"><strong>Physically-Based Rendering</strong></span> (<strong>PBR</strong>) is a complex (and current) topic, so it's a good idea to study it a bit by familiarizing yourself with the tools and concepts behind it. To help you with this task, we have included a non-exhaustive list of resources that you should take a look at.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Unity samples and documentation</h1>
                </header>
            
            <article>
                
<p><span>Before you start, it might be a good idea to read Unity's documentation on <strong><span class="KeyWordPACKT">Textures</span></strong><span class="KeyWordPACKT">,</span> <strong><span class="KeyWordPACKT">Materials</span></strong><span class="KeyWordPACKT">,</span> and <strong><span class="KeyWordPACKT">Shaders</span></strong>. They can be found online:</span></p>
<ul>
<li><a href="https://docs.unity3d.com/Manual/Textures.html" target="_blank"><span class="URLPACKT">https://docs.unity3d.com/Manual/Textures.html</span></a></li>
<li><span class="URLPACKT"><a href="https://docs.unity3d.com/Manual/Materials.html" target="_blank">https://docs.unity3d.com/Manual/Materials.html</a></span></li>
<li><a href="https://docs.unity3d.com/Manual/shader-StandardShader.html" target="_blank"><span class="URLPACKT">https://docs.unity3d.com/Manual/shader-StandardShader.html</span></a></li>
</ul>
<p><span>This chapter covers a number of techniques used to create, often manually and sometimes automatically, texture maps that are capable of giving distinctive features to materials. Hopefully, you will become confident working with Unity's <strong><span class="KeyWordPACKT">Physically-Based Shading</span></strong>, which is capable of understanding differences between available workflows, is aware of the role of each material property, and is ready to make better-looking materials for your games. We have also explored ways of changing the properties of materials during runtime by accessing an object's <strong><span class="KeyWordPACKT">Material</span></strong> via script.</span></p>
<p>Unity has put together a great resource for those looking for some pointers regarding how to set up maps for a variety of materials:</p>
<ul>
<li><span>The <span class="KeyWordPACKT"><strong>Shader Calibration</strong> <strong>Scene</strong></span>, which can be downloaded (for free) from the Unity Asset Store. It is a fantastic collection, featuring sample materials (both <strong><span class="KeyWordPACKT">Metallic</span></strong> and <strong><span class="KeyWordPACKT">Specular</span></strong> setup) for wood, metal, rubber, plastic, glass, skin, mud, and much more:</span> <a href="https://assetstore.unity.com/packages/essentials/tutorial-projects/shader-calibration-scene-25422"><span class="URLPACKT">https://assetstore.unity.com/packages/essentials/tutorial-projects/shader-calibration-scene-25422</span></a>.</li>
</ul>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">References</h1>
                </header>
            
            <article>
                
<p><span>Here's a list of interesting, detailed material on <span class="KeyWordPACKT"><strong>Physically-Based Rendering</strong></span> (within and outside Unity):</span></p>
<ul>
<li><span>For a deep understanding of <span class="KeyWordPACKT"><strong>Physically-Based</strong> <strong>Rendering</strong></span>, we recommend you to take a look at <span class="ItalicsPACKT">The</span> <span class="ItalicsPACKT">Comprehensive PBR Guide</span>, written by Wes McDermott from Allegorithmic. Allegorithmic's guide takes an in-depth look at the practical and theoretical aspects of PBR, including a great analysis of possible workflows. The guide is freely available in two volumes at</span> <a href="http://www.allegorithmic.com/pbr-guide" target="_blank"><span class="URLPACKT">http://www.allegorithmic.com/pbr-guide</span></a>.</li>
<li>Mastering Physically Based Shading in Unity 5 by Renaldas Zioma (Unity), Erland Körner (Unity), and Wes McDermott (Allegorithmic), is available at <a href="http://www.slideshare.net/RenaldasZioma/unite2014-mastering-physically-based-shading-in-unity-5" target="_blank"><span class="URLPACKT">http://www.slideshare.net/RenaldasZioma/unite2014-mastering-physically-based-shading-in-unity-5</span></a>. This is a detailed presentation about using PBS in Unity. Originally presented at the Unite 2014 conference, it contains some out-of-date information, but it is still worth taking a look at.</li>
<li>Physically Based Shading in Unity 5 by Aras Pranckevičius, from Unity, is available at <a href="http://aras-p.info/texts/talks.html" target="_blank"><span class="URLPACKT">http://aras-p.info/texts/talks.html</span></a>. Slides and notes from a presentation on the subject are given at the GDC.</li>
<li>Tutorial: Physically Based Rendering, And You Can Too! by Joe "EarthQuake" Wilson is available at <a href="http://www.marmoset.co/toolbag/learn/pbr-practice" target="_blank"><span class="URLPACKT">http://www.marmoset.co/toolbag/learn/pbr-practice</span></a>. It is a great overview from the makers of Marmoset Toolbag and Skyshop.</li>
<li>Polycount PBR Wiki, available at <span class="URLPACKT">http://wiki.polycount.com/wiki/PBR</span>, is a list of resources compiled by the Polycount community.</li>
<li>Lots of general 3D graphics articles and tutorials from Jeremy Brin of Pixar: <a href="http://3drender.com/"><span class="URLPACKT">http://3drender.com/</span></a>.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Tools</h1>
                </header>
            
            <article>
                
<p>This is a new generation of texturing software for you to check out, in case you haven't yet:</p>
<ul>
<li>Substance Painter is a 3D painting application from Allegorithmic. It is available at <a href="http://www.allegorithmic.com/products/substance-painter" target="_blank"><span class="URLPACKT">http://www.allegorithmic.com/products/substance-painter</span></a>. Again, it's worth mentioning that Allegorithmic products won't make use of Unity's Standard Shader, relying instead on substance files that are natively supported by Unity.</li>
<li>Bitmap2Material creates full-featured materials (including normal maps and specular maps) from a single bitmap image. Also, it is from Allegorithmic, and it is available at <span class="URLPACKT"><a href="http://www.allegorithmic.com/products/bitmap2material" target="_blank">http://www.allegorithmic.com/products/bitmap2material</a>.<a href="http://www.allegorithmic.com/products/bitmap2material" target="_blank"/></span></li>
<li>Quixel DDO is a plugin for creating PBR-ready textures in Adobe Photoshop. From Quixel, it is available at <span class="URLPACKT"><a href="http://www.quixel.se/ddo" target="_blank">http://www.quixel.se/ddo</a>.</span></li>
<li>Quixel NDO is a plugin for creating Normal maps in Adobe Photoshop. From Quixel, it is available at <span class="URLPACKT"><a href="http://www.quixel.se/ndo" target="_blank">http://www.quixel.se/ndo</a>.</span></li>
<li><span>Mari is a 3D painting tool from The Foundry. It is available at <a href="http://www.thefoundry.co.uk/products/mari/">h<span class="URLPACKT">ttp://www.thefoundry.co.uk/products/mari/</span></a>.</span></li>
<li>CrazyBump is a standalone tool for Windows and Mac, which is available at <a href="http://www.crazybump.com" target="_blank"><span class="URLPACKT">http://www.crazybump.com</span></a><span class="URLPACKT">.</span><a href="http://www.crazybump.com" target="_blank"/></li>
<li>The GIMP normalmap plugin, available for Windows only, is available at <span class="URLPACKT"><a href="http://code.google.com/p/gimp-normalmap/" target="_blank">http://code.google.com/p/gimp-normalmap/</a>.</span></li>
<li>NVIDIA Texture Tools for Adobe Photoshop, available for Windows only, is available at <span class="URLPACKT"><a href="http://developer.nvidia.com/nvidia-texture-tools-adobe-photoshop" target="_blank">http://developer.nvidia.com/nvidia-texture-tools-adobe-photoshop</a>.</span></li>
<li><span>The</span> <strong>NormalMap Online</strong> <span>free online tool, developed by Christian Petry, can be used to generate <strong><span class="KeyWordPACKT">Normal</span></strong> maps, regardless of your computers <span class="KeyWordPACKT"><strong>Operating System</strong></span>. This tool can be accessed at</span> <span class="URLPACKT"><a href="http://cpetry.github.io/NormalMap-Online/" target="_blank">http://cpetry.github.io/NormalMap-Online/</a>.</span></li>
</ul>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Additional reading</h1>
                </header>
            
            <article>
                
<p><span>Two new Unity features relating to <strong><span class="KeyWordPACKT">Materials</span></strong> and <strong><span class="KeyWordPACKT">Textures</span></strong> are the <span class="KeyWordPACKT"><strong>Shader Graph</strong></span> tool, and the <span class="KeyWordPACKT"><strong>Video Player</strong></span> component. Learn more about these in their own chapter: <span class="ItalicsPACKT"><em>Shader</em> Graphs and <em>Video Players</em></span><em>.</em></span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating a basic material with Standard Shader (Specular setup)</h1>
                </header>
            
            <article>
                
<p><span>In this recipe, we will learn how to create a basic <strong><span class="KeyWordPACKT">Material</span></strong> using the new <span class="KeyWordPACKT"><strong>Standard Shader</strong></span> (<strong><span class="KeyWordPACKT">Specular Setup</span></strong>), an <span class="packt_screen"><span class="ScreenTextPACKT">Albedo</span></span> map, and a <span class="packt_screen"><strong><span class="ScreenTextPACKT">Specular</span></strong><span class="ScreenTextPACKT">/</span><strong><span class="ScreenTextPACKT">Smoothness</span></strong></span> map. The <strong><span class="KeyWordPACKT">Material</span></strong> will feature both metallic and non-metallic parts, with various smoothness levels.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Two files have been prepared to support this recipe: a 3D model (in FBX format) of a battery, and an UVW template texture (in PNG format) to guide us when creating the diffuse texture map. 3D models and UVW templates can be made with 3D modeling software, such as 3DS MAX, Maya, or Blender. All necessary files are available in the <kbd>05_01</kbd> folder.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>To create a basic material, follow these steps:</p>
<ol>
<li><span>Create a new Unity 3D project and import the <span class="packt_screen"><strong><span class="ScreenTextPACKT">battery.fbx</span></strong></span> and <span class="packt_screen"><strong><span class="ScreenTextPACKT">uvw_template.png</span></strong></span> files to your project.</span></li>
<li><span>Place the battery model in the scene by dragging it from the <kbd><span class="KeyWordPACKT">Assets</span></kbd> folder, in the <strong><span class="KeyWordPACKT">Project</span></strong> panel, to the <strong><span class="KeyWordPACKT">Hierarchy</span></strong> panel. Select it on the <strong><span class="KeyWordPACKT">Hierarchy</span></strong> panel and make sure, via the <span class="ScreenTextPACKT">Transform</span> component on the <strong><span class="KeyWordPACKT">Inspector</span></strong> panel, that it is positioned at X: 0, Y: 0, Z: 0.</span></li>
<li><span>Let's create a <span class="packt_screen"><strong><span class="ScreenTextPACKT">Specular</span></strong><span class="ScreenTextPACKT">/</span><strong><span class="ScreenTextPACKT">Smoothness</span></strong></span> map for our object. Open the image file called <strong><span class="ScreenTextPACKT"><span class="packt_screen">uvw_template.png</span></span></strong> in your image editor (we'll use Adobe Photoshop to illustrate the next steps). Note that the image file has only a single layer, mostly transparent, containing the UVW mapping templates that we will use as guidelines for our specular map.</span></li>
</ol>
<ol start="4">
<li>Create a new layer and place it beneath the one with the guidelines. Fill the new layer with dark gray (R: 56, G: 56, B: 56). The guidelines will be visible at the top of the solid black fill:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/94875c40-4411-4dd3-a97d-9bd3502eebb9.png"/></div>
<ol start="5">
<li>Create a new layer and select the upper section of the image (the one with the circles). Fill that area with a slightly-hued light gray (R: 196, G: 199, B: 199):</li>
</ol>
<div class="packt_infobox"><span>The RGB values for our specular map are not arbitrary: <span class="KeyWordPACKT"><strong>Physically-Based Shading</strong></span> takes out most of the guesswork from the mapping process, replacing it with the research for references. In our case, we have used colors based on the reflectance values of iron (the slightly-hued light gray) and plastic (the dark gray). Check out the chapter's conclusion for a list of references.</span></div>
<ol start="6">
<li>Use the text elements in white to add a brand, size, and positive/negative indicators to the battery body. Then, hide the guidelines layer:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/b693e9a1-92e7-4749-8155-5a5cdb75f150.png"/></div>
<p class="mce-root"/>
<ol start="7">
<li><span>Select all your lay</span><span>ers and organize them into a group (in Photoshop, this can be done by clicking on the drop-down menu in the <strong><span class="KeyWordPACKT">Layers</span></strong> window and navigating to <span class="ScreenTextPACKT"><span class="packt_screen">Window</span> | <span class="packt_screen">New Group from Layers...</span></span>). Name the new group <span class="ScreenTextPACKT"><span class="packt_screen">Specular</span></span>:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/12a9d148-88a6-4b71-bbff-0789d609a3b8.png" style="width:37.67em;height:29.25em;"/></div>
<ol start="8">
<li><span>Duplicate the</span> <span class="packt_screen"><span><span class="ScreenTextPACKT">Sp</span></span><span><span class="ScreenTextPACKT">ecular</span></span></span> <span>group (in the <span class="ScreenTextPACKT"><span class="packt_screen">Layers</span></span> window, right-click on the group's name and select <span class="ScreenTextPACKT"><span class="packt_screen">Duplicate Group...</span></span>). Name the duplicated group <span class="ScreenTextPACKT"><span class="packt_screen">Smoothness</span></span>.</span></li>
</ol>
<ol start="9">
<li><span>Hide the <span class="packt_screen"><span class="ScreenTextPACKT">Smoothness</span></span> group. Expand the <span class="packt_screen"><span class="ScreenTextPACKT">Specular</span></span> group and hide all text layers:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/9b6c0e71-e9f3-497f-a268-ceb6e80870d3.png" style="width:56.17em;height:36.42em;"/></div>
<ol start="10">
<li><span>Unhide the</span> <span class="packt_screen"><span><span class="ScreenTextPACKT">Smo</span></span><span><span class="ScreenTextPACKT">othness</span></span></span> <span>group, and hide the <span class="ScreenTextPACKT"><span class="packt_screen">Specular</span></span> group. Select the dark gray layer. Make an area selection around the upper region of the battery body, and fill it with light gray (R: 220, G: 220, B: 220). Rescale and rearrange the <span class="packt_screen"><span class="ScreenTextPACKT">Text</span></span> layers if needed:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5d02084e-2625-446a-bba2-87643d57670d.png" style="width:56.50em;height:38.92em;"/></div>
<ol start="11">
<li>Duplicate the layer that contains the gray fill for the upper section of the image (the one that went over the circles).</li>
<li><span>To add a brushed quality to this material, add a <span class="packt_screen"><span class="ScreenTextPACKT">Noise</span></span> filter to the duplicated layer (in Photoshop, this can be done by navigating to <span class="ScreenTextPACKT"><span class="packt_screen">Filter | Noise | Add Noise...</span></span>). Use 50% as the <span class="ScreenTextPACKT">Amount</span> and set <span class="ScreenTextPACKT">Monochromatic</span> to <span class="ScreenTextPACKT">true</span>. Then, apply a <span class="ScreenTextPACKT">Motion Blur</span> filter (<span class="ScreenTextPACKT">Filter | Blur | Motion Blur...</span>) using <span class="ScreenTextPACKT">30</span> pixels as the <span class="ScreenTextPACKT"><span class="packt_screen">Distance</span></span>.</span></li>
</ol>
<ol start="13">
<li><span>Duplicate the <span class="ScreenTextPACKT"><span class="packt_screen">Smoothness</span></span> group. Select the duplicated group and merge it into a single layer (on the <span class="packt_screen"><span class="ScreenTextPACKT">Layers</span></span> window, right-click on the group's name and select <span class="ScreenTextPACKT">Merge Group</span>).</span></li>
<li>Select the merged layer, use the <em>Ctrl</em> + a key combination to select the entire image, and copy it using the <em>Ctrl + c </em>keys:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/aed12078-d495-485c-8852-92a9b3e904a2.png"/></div>
<ol start="15">
<li><span>Hide the merged layer</span> <span>and the <span class="packt_screen"><span class="ScreenTextPACKT">Smoothness</span></span> group. Unhide the <span class="packt_screen"><span class="ScreenTextPACKT">Specular</span></span> group.</span></li>
<li><span>In your image editor, access the image channels window (in Photoshop, this can be done by navigating to <span class="ScreenTextPACKT"><span class="packt_screen">Window | Channels</span></span>). Create a <span class="ScreenTextPACKT"><span class="packt_screen">New Channel</span></span>. This will be our <span class="ScreenTextPACKT">Alpha Channel</span>.</span></li>
</ol>
<ol start="17">
<li><span>Paste the image that you previously copied (from the merged layer) in to the <span class="KeyWordPACKT"><strong>Alpha</strong> <strong>Channel</strong></span>. Set all channels as visible:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f03bb096-e393-4582-916c-7b9862c0e471.png"/></div>
<ol start="18">
<li><span>Sa</span>ve your image i<span>n the project's</span> <kbd>Assets</kbd> folder as Battery_specular, either in Photoshop format (PSD) or TIF format.</li>
<li><span>Let's work on the <span class="ScreenTextPACKT">Albedo</span> map. Save a copy of</span> <strong>Battery_specular</strong> as <strong>Battery_albedo</strong>. From the <strong>Channels</strong> window, delete the <strong>Alpha Channel</strong>.</li>
</ol>
<ol start="20">
<li><span>From the</span> <strong>Layers</strong> window, hide the <strong>Smoothness</strong> copy merged layer, and unhide the <strong>Smoothness</strong> group. Expand the <strong>Smoothness</strong> group, and hide the layer where the Noise filter was applied:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/aab26a45-d8e7-4668-b161-3ab75f3d3aea.png"/></div>
<p class="mce-root"/>
<ol start="21">
<li>Change the color <span>of the upper rectangle to black. Change the light gray area to dark red (R: 204, G: 0, B: 0), and the dark gray to red (R: 255, G: 0, B: 0). Rename the group <span class="ScreenTextPACKT">Albedo</span> and save the file:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7fb820d5-5ca1-41f7-bd85-456f769ed60c.png"/></div>
<ol start="22">
<li>Go back to Unity <span>and make sure that both files were imported. From the <strong><span class="KeyWordPACKT">Project</span></strong> panel, create a new <strong><span class="KeyWordPACKT">Material</span></strong> (menu: <span class="ScreenTextPACKT"><span class="packt_screen">Create | Material</span></span>). Name it <span class="ScreenTextPACKT"><span class="packt_screen">Battery_MAT</span></span>.</span></li>
<li><span>Select <span class="ScreenTextPACKT"><span class="packt_screen">Battery_MAT</span></span>. From the Inspector panel, change the <span class="packt_screen"><span class="ScreenTextPACKT">Shader</span></span> to <span class="packt_screen"><span class="ScreenTextPACKT">Standard</span> <span class="ScreenTextPACKT">(Specular setup)</span></span><span class="ScreenTextPACKT">,</span> make sure that the rendering mode is set to <span class="ScreenTextPACKT"><span class="packt_screen">Opaqu</span><span class="packt_screen">e</span></span>, and that the <span class="packt_screen"><span class="ScreenTextPACKT">Smoothness</span></span> <span class="packt_screen">slider</span> is at the maximum value of 1:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6d15cd6f-0f24-4943-8181-21e63b2b3e1a.png"/></div>
<ol start="24">
<li><span>Set</span> <span class="packt_screen">Battery_specular</span> as the <span class="packt_screen">Specular</span> map, and <span class="packt_screen">Battery_albedo</span> as the <span class="packt_screen">Albedo</span> map for <span class="packt_screen">Battery_MAT</span>.</li>
<li><span>Drag the <span class="ScreenTextPACKT"><span class="packt_screen">Battery_MAT</span></span> Material from the <strong><span class="KeyWordPACKT">Project</span></strong> project and drop it into the <strong><span class="ScreenTextPACKT">battery</span></strong> object in the Hierarchy:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/fb634eaa-f24c-4196-8816-beb37fd43291.png"/></div>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>Ultimately, the visual aspect of the battery is a combination of three properties of its material: <strong><span class="ScreenTextPACKT">Specular</span></strong>, <strong><span class="ScreenTextPACKT">Smoothness</span>,</strong> and <strong><span class="ScreenTextPACKT">Albedo</span></strong>.</p>
<p>To compose the dark red part of the plastic body, for instance, we have mixed the following:</p>
<ul>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Specular map (RGB)</span></span></strong>: Very dark grey specularity (for non-metallic appearance)</span></li>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Smoothness</span> (the <span class="KeyWordPACKT">Alpha Channel</span> of the <span class="ScreenTextPACKT">Specular</span> map)</span></strong>: Light gray (for a glossy aspect)</span></li>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Albedo</span> map</span></strong>: Dark red (for a dark-red color)</span></li>
</ul>
<p>The light red portion, on the other hand, combines the following:</p>
<ul>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Specular map (RGB)</span></span></strong>: That same dark grey specular</span></li>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Smoothness</span> (the <span class="KeyWordPACKT">Alpha Channel</span> of the <span class="ScreenTextPACKT">Specular</span> map)</span></strong>: Dark gray (for a matte aspect)</span></li>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Albedo</span> map</span></strong>: Red (for a red color)</span></li>
</ul>
<p>Finally, the brushed metal used for the top and bottom covers combines the following:</p>
<ul>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Specular map (RGB)</span></span></strong>: Light grey (for a metallic aspect)</span></li>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Smoothness</span> (the <span class="KeyWordPACKT">Alpha Channel</span> of the <span class="ScreenTextPACKT">Specular</span> map)</span></strong>: A blurred grey noise pattern (for a brushed aspect)</span></li>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Albedo</span> map</span></strong>: Black (for a red color)</span></li>
</ul>
<p>Regarding how the image layers are structured, it's good practice to organize your layers into groups named after the property that they are related to. As texture maps get more diversified, it can be a good idea to keep a file that contains all the maps for quick reference and consistency.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>The following are some things you should have in mind when working with Albedo maps.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Setting the texture type for an image file</h1>
                </header>
            
            <article>
                
<p><span>Since image files can be used for several purposes within Unity (<strong><span class="KeyWordPACKT">Texture Maps</span></strong>, UI textures, cursors, and more), it's a good idea to check whether the right</span> <span class="ScreenTextPACKT"><strong>Texture Type</strong></span> <span>is assigned to your file. This can be done by selecting the image file in the <strong><span class="KeyWordPACKT">Project</span></strong> panel, and in the <strong><span class="KeyWordPACKT">Inspector</span></strong> panel by using the drop-down menu to select the right</span> <span class="ScreenTextPACKT"><strong>Texture Type</strong></span> (in this case, <span class="ScreenTextPACKT">Texture</span>). Please note that other settings can be adjusted, such as <span class="packt_screen"><span class="ScreenTextPACKT">Wrap Mode</span>, <span class="ScreenTextPACKT">Filter Mode</span>,</span> and <span class="packt_screen"><span class="ScreenTextPACKT">Maximum</span> <span class="ScreenTextPACKT">Size</span></span><span>. This last parameter is very useful if you want to keep your <span class="KeyWordPACKT">Texture</span> maps small in size for your game, while still being able to edit them in full size.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Combining the map with color</h1>
                </header>
            
            <article>
                
<p><span>When editing a <strong><span class="KeyWordPACKT">Material</span></strong>, the color picker to the right of the</span> <span class="ScreenTextPACKT"><span class="packt_screen">Albedo</span></span> map slot, on the <span class="ScreenTextPACKT"><span class="packt_screen">Inspector</span></span> <span>panel, can be used to select the <strong><span class="KeyWordPACKT">Material's</span></strong> color, in case there is no <strong><span class="KeyWordPACKT">Texture</span></strong> map. If a <strong><span class="KeyWordPACKT">Texture</span></strong> map is being used, the selected color will be multiplied to the image, allowing variations on the <strong><span class="KeyWordPACKT">Material's</span></strong> color hue.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Adapting a basic material from Specular setup to Metallic</h1>
                </header>
            
            <article>
                
<p><span>For a better understanding of the differences between <strong><span class="KeyWordPACKT">Metallic</span></strong> and <strong><span class="KeyWordPACKT">Specular</span></strong> workflows, we will modify the</span> <span class="packt_screen"><span class="ScreenTextPACKT">Albedo</span></span> and <span class="packt_screen"><span class="ScreenTextPACKT">Specular/Smoothness</span></span> maps that are used on a <span class="ScreenTextPACKT">Specular</span> <span>setup <span class="KeyWordPACKT">Material</span>, in order to adapt them to the <span class="KeyWordPACKT">Metallic</span> workflow. The material to be generated will feature both metallic and non-metallic parts, with various smoothness levels.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe builds on the previous one, so make a copy of that project and use the copy for this recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>To create a basic Material using the Metallic workflow, follow these steps:</p>
<ol>
<li><span>From the <strong><span class="KeyWordPACKT">Project</span></strong> panel, select the <span class="packt_screen"><span class="ScreenTextPACKT">battery_prefab</span></span> element. From the Inspector, access its <strong><span class="KeyWordPACKT">Material</span></strong> (named <span class="ScreenTextPACKT"><span class="packt_screen">Battery_MAT</span></span>) and change its <strong><span class="ScreenTextPACKT"><span class="packt_screen">Shader</span></span></strong> to <span class="ScreenTextPACKT"><span class="packt_screen">Standard</span></span> (as opposed to its current shader – <span class="ScreenTextPACKT"><span class="packt_screen">Standard</span></span></span> (<span><span class="ScreenTextPACKT"><span class="packt_screen">Specular setup</span></span></span>)<span><span class="ScreenTextPACKT">:</span></span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/58465255-8446-4383-ac80-f175f9d232ca.png"/></div>
<ol start="2">
<li><span>In the <strong><span class="KeyWordPACKT">Project</span></strong></span> <span>panel, find the <span class="packt_screen"><span class="ScreenTextPACKT">Battery_specular</span></span> map and rename it <span class="ScreenTextPACKT"><span class="packt_screen">Battery_metallic</span></span>. Open it in your image editor (we'll use Adobe Photoshop to illustrate the following steps).</span></li>
<li><span>Find the layer group named <span class="ScreenTextPACKT">Specular</span> and rename it <span class="ScreenTextPACKT">Metallic</span>. Fill the light gray layer (named <span class="ScreenTextPACKT"><span class="packt_screen">Layer 2</span></span>, in the <span class="packt_screen"><span class="ScreenTextPACKT">Metallic</span></span> group) with white (R: 255, G: 255, B: 255), and the dark gray layer (named <span class="ScreenTextPACKT"><span class="packt_screen">Layer 1</span></span>, in the <span class="packt_screen"><span class="ScreenTextPACKT">Metallic</span></span> group) with black (R: 0, G: 0, B: 0). Save the file:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/cc125bc5-64bd-497a-b5f0-5b99a40f02f5.png" style="width:37.00em;height:23.83em;"/></div>
<ol start="4">
<li>Go back to Unit<span>y. From the <strong><span class="KeyWordPACKT">Inspector</span></strong>, set the <span class="packt_screen">modified <span class="ScreenTextPACKT">Battery_metallic</span></span> map as the <span class="ScreenTextPACKT"><span class="packt_screen">Metallic</span></span> map of the <span class="ScreenTextPACKT"><span class="packt_screen">Battery_MAT</span></span> material. Also, set <span class="ScreenTextPACKT"><span class="packt_screen">None</span></span> as the Albedo map for that <strong><span class="KeyWordPACKT">Material</span></strong>. This will give you an idea of how the <strong><span class="KeyWordPACKT">Material</span></strong> is coming along:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5b4d871f-8cc3-4ec0-a18e-eb7f695a9b5c.png" style="width:27.33em;height:23.08em;"/></div>
<p class="mce-root"/>
<ol start="5">
<li>Let's adj<span>ust the <strong><span class="ScreenTextPACKT">Albedo</span></strong> texture map. From the <strong><span class="KeyWordPACKT">Project</span></strong> panel, locate the <strong><span class="ScreenTextPACKT">Battery_albedo</span></strong> map and open it in your image editor. Use the <span class="ScreenTextPACKT"><strong>Paint Bucket</strong></span> tool to fill the black area of <span class="ScreenTextPACKT"><strong>Layer</strong> <strong>2</strong></span>, in the <strong><span class="ScreenTextPACKT">Albedo</span></strong> group, with light gray (R: 196, G: 199, B: 199). Save the file:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/4c69eb38-ff86-46c1-b9b0-e93878eba73e.png" style="width:37.67em;height:20.67em;"/></div>
<ol start="6">
<li><span>Go back to Unity. Fr</span><span>om the <strong><span class="KeyWordPACKT">Inspector</span></strong>, set the modified <span class="ScreenTextPACKT"><span class="packt_screen">Battery_albedo</span></span> map as the <span class="ScreenTextPACKT">Albedo</span> map of the <span class="ScreenTextPACKT"><span class="packt_screen">Battery_MAT</span></span> material.</span></li>
<li><span>Your <strong><span class="KeyWordPACKT">Material</span></strong> is ready, combining visual properties based on the different maps that you have edited and assigned:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6319067e-0c98-4a98-a5b5-a2324ccdd440.png" style="width:23.58em;height:18.75em;"/></div>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p><span>The visual aspect of the battery is a combination of three properties of its material: <span class="ScreenTextPACKT">Metallic</span>, <span class="ScreenTextPACKT">Smoothness</span>, and <span class="ScreenTextPACKT">Albedo</span>.</span></p>
<p>To compose the dark-red part of the plastic body, for instance, we have mixed the following:</p>
<ul>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Metallic map (RGB)</span></span></strong>: Black (for a non-metallic appearance)</span></li>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Smoothness</span> (the <span class="KeyWordPACKT">Alpha Channel</span> of a <span class="ScreenTextPACKT">Metallic</span> map)</span></strong>: Light gray (for a glossy appearance)</span></li>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Albedo</span> map</span></strong>: Dark red (for a dark-red color)</span></li>
</ul>
<p>The light-red portion, on the other hand, combines the following:</p>
<ul>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Metallic map (RGB)</span></span></strong>: Black</span></li>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Smoothness</span> (the <span class="KeyWordPACKT">Alpha Channel</span> of the <span class="ScreenTextPACKT">Metallic</span> map)</span></strong>: Dark gray (for a matte appearance)</span></li>
<li><strong><span class="packt_screen"><span class="ScreenTextPACKT">The Albedo</span> map</span></strong>: Red (for a red color)</li>
</ul>
<p>Finally, the brushed metal used for the top and bottom covers combines the following:</p>
<ul>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Metallic map (RGB)</span></span></strong>: White (for a metallic aspect)</span></li>
<li><span><strong><span class="packt_screen">The <span class="ScreenTextPACKT">Smoothness</span> (the <span class="KeyWordPACKT">Alpha Channel</span> of the <span class="ScreenTextPACKT">Metallic</span> map)</span></strong>: Blurred grey noise pattern (for a brushed appearance);</span></li>
<li><strong><span class="packt_screen"><span class="ScreenTextPACKT">The Albedo</span> map</span></strong>: Light grey (for an iron-like appearance)</li>
</ul>
<p>Remember to organize your layers into groups named after the property that they are related to.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Applying Normal maps to a Material</h1>
                </header>
            
            <article>
                
<p><span class="KeyWordPACKT"><strong>Normal Maps</strong></span> <span>are generally used to simulate complex geometry that would be too expensive, in terms of computer processing, to be actually represented by the 3D polygons during the game's runtime. To oversimplify: <span class="KeyWordPACKT"><strong>Normal Maps</strong></span> fake complex geometry on low-definition 3D meshes. These maps can be generated either by projecting high-definition 3D meshes onto low-poly ones (a technique usually referred to as baking), or, as will be the case for this recipe, from another <strong><span class="KeyWordPACKT">Texture</span></strong> map:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/aca76bb4-a20e-4950-8cb4-17c64dcb8cf6.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p><span>For this recipe, we will prepare two <strong><span class="KeyWordPACKT">Texture</span></strong> maps: the <strong><span class="KeyWordPACKT">Heightmap</span></strong> and the <strong><span class="KeyWordPACKT">Normal</span></strong> map. The former will be made from simple shapes in an image editor. The latter will be automatically processed from the <span class="KeyWordPACKT">Heightmap</span>. Although there are a number of tools that can be used to generate <strong><span class="KeyWordPACKT">Normal</span></strong> maps, we will use the free, online <span class="ScreenTextPACKT">NormalMap tool</span>:</span> <a href="http://cpetry.github.io/NormalMap-Online/"><span class="URLPACKT">http://cpetry.github.io/NormalMap-Online/</span></a>.</p>
<p><span>To help you with this recipe, we've provided an FBX 3D model of the battery (<span class="ScreenTextPACKT"><span class="packt_screen">battery.fbx</span></span>), and its <span class="ScreenTextPACKT"><span class="packt_screen">Albedo</span></span> and <span class="packt_screen"><span class="ScreenTextPACKT">Specular</span></span></span> <strong>Textures</strong> (<span class="packt_screen">Battery_albedo.tif</span> <strong>and</strong> <span class="packt_screen">Battery_specular.tif</span>).</p>
<p><span>We've also included the UVW template texture (in PNG format) to guide you when creating the diffuse <strong><span class="KeyWordPACKT">Texture</span></strong> map. All the files are in the <kbd>05_03</kbd> folder.</span></p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p><span>To apply a <span class="KeyWordPACKT"><strong>Normal Map</strong></span> to a <strong><span class="KeyWordPACKT">Material</span></strong>, follow these steps:</span></p>
<ol>
<li><span>Import <span class="packt_screen"><span class="ScreenTextPACKT">battery.fbx</span></span> and its <span class="ScreenTextPACKT"><span class="packt_screen">Albedo</span></span> and <span class="ScreenTextPACKT"><span class="packt_screen">Specular</span></span> <strong><span class="KeyWordPACKT">Textures</span></strong> to your project.</span></li>
<li><span>Add an instance of your 3D model in the Scene by dragging asset <strong><span class="ScreenTextPACKT"><span class="packt_screen">battery</span></span></strong> from the <span class="KeyWordPACKT">Project</span> panel into the <span class="KeyWordPACKT">Scene</span> (or <span class="KeyWordPACKT">Hierarchy</span>) panel.</span></li>
<li><span>In the</span> <strong>Project</strong> panel, select model asset <span class="packt_screen">battery</span>. In the <strong>Inspector</strong>, click the <strong>Materials</strong> button and then click <span class="packt_screen">Extract Materials...</span> You should now have a <strong>Material</strong> asset file in the <strong>Project</strong> panel named <span class="packt_screen">BatteryMaterial</span>.</li>
<li><span>Select <span class="packt_screen"><span class="ScreenTextPACKT">BatteryMaterial</span></span>, and change the <span class="ScreenTextPACKT"><span class="packt_screen">Shader</span></span> to <span class="ScreenTextPACKT"><span class="packt_screen">Standard (Specular setup)</span></span>. Drag <span class="KeyWordPACKT">the</span> <span class="ScreenTextPACKT"><span class="packt_screen">Battery_albedo</span></span> <strong>Texture</strong> from the <strong><span class="KeyWordPACKT">Project</span></strong> panel into the <span class="ScreenTextPACKT"><span class="packt_screen">Albedo Texture</span></span> slot in the <span class="KeyWordPACKT"><span class="packt_screen">Inspector</span></span>. Drag <span class="KeyWordPACKT">the</span> <span class="ScreenTextPACKT"><span class="packt_screen">Battery_specular</span></span> <strong>Texture</strong> from the <strong><span class="KeyWordPACKT">Project</span></strong> panel into the <span class="ScreenTextPACKT"><span class="packt_screen">Specular Texture</span></span> slot.</span></li>
<li><span>After comparing the <strong><span class="ScreenTextPACKT">battery</span></strong> model in your project with some reference photos, inform yourself about the features that should be reproduced by the Normal map: (A) a bumpy ring at the top, and (B) some circular creases at the bottom:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6d9f90e0-76cf-40e4-836d-50fb396187df.png" style="width:17.58em;height:17.58em;"/></div>
<ol start="6">
<li><span>In an image ed</span><span>itor, open <span class="ScreenTextPACKT"><span class="packt_screen">uvw_template.png</span></span>. Create a new layer, fill it with grey (RGB: 128), and position it below the pre-existing layer:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/08eba0a7-00fd-4d8e-a032-c5aba36e676b.png" style="width:39.25em;height:24.33em;"/></div>
<ol start="7">
<li>On a separate layer, draw a white circle centered on the battery's top. Then, on another layer, draw a black circle, centered on the battery's bottom:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/04ed61fd-9a39-44e7-93e9-74343d5d1cf4.png" style="width:22.08em;height:22.08em;"/></div>
<ol start="8">
<li><span>If you ha</span><span>ve used vector shapes to make the circles, rasterize their layers (in Adobe Photoshop, right-click on the layer's name and select the <span class="ScreenTextPACKT"><span class="packt_screen">Rasterize Layer</span></span> option from the context menu).</span></li>
<li><span>Blur the white circle (in Photoshop, this can be done by navigating to <span class="packt_screen"><span class="ScreenTextPACKT">Filter | Blur | Gaussian Blur...</span></span>). Use 4,0 pixels as the <span class="packt_screen"><span class="ScreenTextPACKT">Radius</span></span>.</span></li>
<li><span>Hide the <span class="ScreenTextPACKT">UVW template</span> layer and save the image as <span class="ScreenTextPACKT">Battery_height.png</span>.</span></li>
<li><span>If you want to convert the <span class="KeyWordPACKT">Heightmap</span> directly from Unity, import it into your project. Select it from the <span class="KeyWordPACKT">Project</span> panel and, from the <span class="KeyWordPACKT">Inspector</span> panel, change its <span class="ScreenTextPACKT">Texture Type</span> to <span class="KeyWordPACKT">Normal</span> map. Check the <span class="ScreenTextPACKT"><span class="packt_screen">Create</span></span> from Grayscale option, adjust <span class="ScreenTextPACKT"><span class="packt_screen">Bumpiness</span></span> and <span class="ScreenTextPACKT"><span class="packt_screen">Filtering</span></span> as you like, and click on <span class="ScreenTextPACKT"><span class="packt_screen">Apply</span></span> to save the changes:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/21de53a3-6a0d-4693-a6fd-a764855171e5.png"/></div>
<p class="mce-root"/>
<ol start="12">
<li><span>To convert your</span> <span><span class="ScreenTextPACKT"><span class="packt_screen">Heightmap</span></span> externally, go to</span> <a href="http://cpetry.github.io/NormalMap-Online/" target="_blank"><span class="URLPACKT">http://cpetry.github.io/NormalMap-Online/</span></a><span>. Drag the <span class="ScreenTextPACKT"><span class="packt_screen">Battery_height.png</span></span> file to the appropriate image slot. Feel free to play with the <span class="packt_screen"><span class="ScreenTextPACKT">Strength</span>, <span class="ScreenTextPACKT">Level,</span></span></span> and <span class="packt_screen">Blur/Sharp</span> parameters:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/696f8e0f-fb80-444c-a70b-19f56bccd227.png"/></div>
<ol start="13">
<li><span>Save the resul</span><span>ting <strong><span class="KeyWordPACKT">Normal</span></strong> map as <span class="packt_screen"><span class="ScreenTextPACKT">Battery_normal.jpg</span></span> and add it to your Unity project.</span></li>
<li><span>In Unity, select <span class="ScreenTextPACKT"><span class="packt_screen">Battery_normal</span></span> from the <strong><span class="KeyWordPACKT">Project</span></strong> panel. Then, in the <span class="KeyWordPACKT">Inspector</span>, change its <span class="ScreenTextPACKT"><span class="packt_screen">Texture Type</span></span> to <span class="ScreenTextPACKT"><span class="packt_screen">Normal</span></span>, leaving the Create from <span class="ScreenTextPACKT">Grayscale</span> box unchecked. Click on <span class="ScreenTextPACKT">Apply</span> to save the changes.</span></li>
</ol>
<ol start="15">
<li><span>In the <strong><span class="KeyWordPACKT">Project</span></strong> panel, select the <span class="ScreenTextPACKT"><span class="packt_screen">BatteryMaterial</span> asset</span>. In the <span class="KeyWordPACKT">Inspector</span> for the <span class="packt_screen"><span class="ScreenTextPACKT">Material</span></span> component, assign <span class="ScreenTextPACKT"><span class="packt_screen">Battery_normal</span></span> to the <span class="ScreenTextPACKT"><span class="packt_screen">Normal Map</span></span> slot. To adjust its intensity and direction, change its value to -0.35:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6852b8d9-a6d2-4190-8128-94d87727ccc0.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p><span>The <span class="KeyWordPACKT">Normal Map</span> was calculated from the grey values on the <span class="ScreenTextPACKT"><span class="packt_screen">Heightmap</span></span>, where the lighter tones were interpreted as recesses (applied to the top of the battery), and the darker tones as bulges (applied to the bottom). Since the desired output was actually the opposite, it was necessary to adjust the <span class="KeyWordPACKT"><strong>Normal Map</strong></span> to a negative value (<span class="ScreenTextPACKT"><span class="packt_screen">-0.35</span></span>). Another possible solution to the issue would have been to redraw the <span class="ScreenTextPACKT"><span class="packt_screen">Heightmap</span></span> and switch the colors for the white and black circles.</span></p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Adding Transparency and Emission maps to a material</h1>
                </header>
            
            <article>
                
<p><span>The <span class="ScreenTextPACKT"><span class="packt_screen">Emission</span></span> property can be used to simulate a variety of self-illuminated objects, from the LEDs of mobile displays to futuristic Tron suits. <span class="ScreenTextPACKT"><span class="packt_screen">Transparency</span></span>, on the other hand, can make the diffuse color of a <strong><span class="KeyWordPACKT">Material</span></strong> more or less visible. In this recipe, you will learn how to configure these properties to produce a toy's cardboard packaging that features a partially-transparent plastic case, cutouts (totally transparent), and glow-in-the-dark text:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/d7c3c7b3-f5d3-435c-8d23-351c6d377f57.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>For this recipe, we have prepared two files in the <kbd>05_04</kbd> folder:</p>
<ul>
<li><span class="ScreenTextPACKT"><span class="packt_screen">package.fbx</span></span>: A 3D object of a package (FBX format)</li>
<li><span class="ScreenTextPACKT"><span class="packt_screen">card_diffuse_start.png</span></span>: The diffused texture map for the packaging (PNG format)</li>
</ul>
<p class="mce-root"/>
<p>Also provided are the two final, image-edited files you'll create in the project:</p>
<ul>
<li><span class="ScreenTextPACKT"><span class="packt_screen">card_diffuse.png</span></span><span>: The <span class="packt_screen"><span class="ScreenTextPACKT">Albedo</span></span> texture map for the packaging with cutouts (PNG format)</span></li>
<li><span class="ScreenTextPACKT"><span class="packt_screen">card_emission.png</span></span><span>: The <span class="packt_screen"><span class="ScreenTextPACKT">Emission</span></span> <strong><span class="KeyWordPACKT">Texture</span></strong> map for the emission glow text (PNG format)</span></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>To add transparency and color emission maps to materials, follow these steps:</p>
<ol start="1">
<li>Import the provided files.</li>
<li><span>Duplicate <span class="KeyWordPACKT">the</span> <span class="packt_screen"><span class="ScreenTextPACKT">card_diffuse_start</span> </span><strong>Texture</strong>, naming the <span class="packt_screen">copy <span class="ScreenTextPACKT">card_diffuse</span></span>.</span></li>
<li><span>From the</span> <strong>Project</strong> panel, drag the FBX model <span class="packt_screen">package</span> into the <strong>Hierarchy</strong> to create a GameObject in the <strong>Scene</strong>.</li>
<li><span>Create a new <strong><span class="KeyWordPACKT">Material</span></strong> <span class="packt_screen">named <span class="ScreenTextPACKT">m_card</span></span>. Choose <strong><span class="KeyWordPACKT">Project</span></strong> menu: <span class="packt_screen"><span class="ScreenTextPACKT">Create | Material</span></span>. Drag <span class="KeyWordPACKT">the</span> <span class="ScreenTextPACKT"><span class="packt_screen">card_diffuse</span> <strong>Texture</strong></span> into the <strong><span class="ScreenTextPACKT">Albedo</span></strong> property of <span class="ScreenTextPACKT"><span class="packt_screen">m_card</span></span>.</span></li>
<li><span>In the <strong><span class="KeyWordPACKT">Hierarchy</span></strong>, select <span class="packt_screen"><span class="ScreenTextPACKT">PackageCard</span></span> (child of package), and assign it your new <span class="ScreenTextPACKT"><span class="packt_screen">m_card</span> Material</span>.</span></li>
<li><span>Create a new <strong><span class="KeyWordPACKT">Material</span></strong> named <span class="ScreenTextPACKT"><span class="packt_screen">m_plastic</span></span>. Choose <strong><span class="KeyWordPACKT">Project</span></strong> menu: <span class="packt_screen"><span class="ScreenTextPACKT">Create | Material</span></span>. Change its <span class="ScreenTextPACKT"><span class="packt_screen">Rendering Mode</span></span> to <span class="ScreenTextPACKT"><span class="packt_screen">Transparent</span></span>. Use the <span class="ScreenTextPACKT">Diffuse</span> color picker to change the color's RGB values to 56/56/56, and <span class="packt_screen"><span class="ScreenTextPACKT">Alpha</span></span> to 25. Change the <span class="ScreenTextPACKT"><span class="packt_screen">Smoothness</span></span> level to 0.9:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/67bf2148-5a0f-4bf8-bb50-690b74dc99f5.png"/></div>
<ol start="7">
<li><span>In the <strong><span class="KeyWordPACKT">Hierarchy</span></strong>, s</span><span>elect <span class="ScreenTextPACKT"><span class="packt_screen">PackagePlastic</span></span> (child of package), and assign it your new <span class="ScreenTextPACKT"><span class="packt_screen">m_plastic</span> <strong>Material</strong></span>. The plastic portion of the 3D model should now appear partially transparent, as if made of plastic.</span></li>
</ol>
<ol start="8">
<li><span>To create the cutouts around the package and hang hole, we need to first prepare the diffuse image in an image editor (such as Photoshop). Open <span class="KeyWordPACKT">the</span> <span class="ScreenTextPACKT"><span class="packt_screen">card_diffuse</span> <strong>Texture</strong></span> in your image editor.</span></li>
<li><span>We will add transparency to the image by deleting the white areas around the package (and the hang hole). Make a selection of those areas (in Photoshop, this can be done with the <span class="ScreenTextPACKT"><span class="packt_screen">Magic Wand Tool</span></span>).</span></li>
<li><span>Make sure you unlock the <span class="ScreenTextPACKT"><span class="packt_screen">Background</span></span> layer by clicking on the lock icon, to the left of the layer's name:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/3193dd7a-0d15-4c7e-acef-b047d6fd03c6.png"/></div>
<ol start="11">
<li>Delete the previously-made selection (this can be done in Photoshop by pressing the Delete key). The background of the image should be transparent:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/9f5d88fc-5756-4257-983b-557600be7199.png"/></div>
<ol start="12">
<li>Save your file in your image editor, and return to Unity.</li>
<li><span>Select <span class="KeyWordPACKT">the</span> <span class="packt_screen"><span class="ScreenTextPACKT">m_card</span> </span><strong>Material</strong> in the <span class="KeyWordPACKT">Project</span> panel. In the <span class="KeyWordPACKT">Inspector,</span> change its <span class="ScreenTextPACKT"><span class="packt_screen">Rendering Mode</span></span> to <span class="ScreenTextPACKT"><span class="packt_screen">Cutout</span></span>, and adjust its <span class="ScreenTextPACKT"><span class="packt_screen">Alpha Cutoff</span></span> to 0.9:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/94e20698-938e-4418-b2b3-f0e074a5dce2.png"/></div>
<div class="packt_infobox">Choosing <span class="packt_screen"><span class="ScreenTextPACKT">Cutout</span></span> means that your material can be either invisible or fully visible, not allowing for semi-transparency. The <strong><span class="ScreenTextPACKT">Alpha Cutoff</span></strong> is used to get rid of unwanted pixels around the transparent borders.</div>
<ol start="14">
<li><span>Let's wo</span><span>rk on the <span class="packt_screen"><span class="ScreenTextPACKT">Emission</span></span> map for the bright lettering. From the <strong><span class="KeyWordPACKT">Assets</span></strong> folder, duplicate <span class="KeyWordPACKT">the</span> <span class="packt_screen"><span class="ScreenTextPACKT">card_diffuse.png</span></span> <span class="ScreenTextPACKT"><strong>Texture</strong></span>, rename it <span class="ScreenTextPACKT"><span class="packt_screen">card_emission.png</span></span>, and open it in your image editor.</span></li>
<li><span>Select all the characters from the Ms. Laser inscription and the green star (in Photoshop, this can be done with the <span class="ScreenTextPACKT"><strong>Magic Wand</strong></span> tool, keeping the <em><span class="ScreenTextPACKT">Shift</span></em> key pressed while selecting multiple areas).</span></li>
<li><span>Copy and paste your selection into a new layer. Then, select it and apply a <span class="ScreenTextPACKT">Noise</span> filter to it (in Photoshop, this can be done by navigating to <span class="ScreenTextPACKT"><span class="packt_screen">Filter | Noise | Add Noise...</span></span>). Use 50% as the value.</span></li>
<li><span>Create a new layer and, using a tool such as the <span class="packt_screen"><span class="ScreenTextPACKT">Paint Bucket</span></span>, fill it with black (R: 0, G: 0, B: 0). Place this black layer beneath the one with the colored elements.</span></li>
</ol>
<ol start="18">
<li><span>Flatten your image (in Photoshop this can be done by navigating to <span class="ScreenTextPACKT"><span class="packt_screen">Layer | Flatten Image</span></span>):</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/cfdc4c40-4740-45f2-8c94-8336c3c562cd.png" style="width:34.42em;height:34.42em;"/></div>
<ol start="19">
<li>Save your file in your image editor, and return to Unity.</li>
<li><span>Select <span class="KeyWordPACKT">the</span> <span class="packt_screen"><span class="ScreenTextPACKT">m_card</span></span> <strong>Material</strong> in the <strong><span class="KeyWordPACKT">Project</span></strong> panel. Check the <span class="ScreenTextPACKT"><span class="packt_screen">Emission</span></span> property – three new properties should appear:</span>
<ul>
<li><span><strong><span class="packt_screen"><span class="KeyWordPACKT">A Texture</span> slot</span></strong>: Set this to Texture <span class="packt_screen"><span class="ScreenTextPACKT">card_emission</span></span> (drag asset file from the <span class="KeyWordPACKT">Project</span> panel)</span></li>
<li><strong><span class="packt_screen"><span class="ScreenTextPACKT">A Color</span> slot</span></strong>: Set this to white (R: 255; G: 255; B: 255)</li>
<li><span class="packt_screen"><strong><span class="ScreenTextPACKT">A Global Illumination</span></strong> <span><strong>drop-down menu</strong></span></span><span>: Ensure this is set to <span class="ScreenTextPACKT"><span class="packt_screen">Baked</span></span> (so that its glow won't be added to the <span class="ScreenTextPACKT">Lightmaps</span> or influence the illumination in <span class="KeyWordPACKT">Real-Time</span>):</span></li>
</ul>
</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/66b98314-62e5-4de4-bd8c-7123d7e32e5b.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p><span>Unity is able to read four channels of a texture map: R (Red), G (Green), B (Blue), and A (Alpha). When set to <span class="ScreenTextPACKT"><span class="packt_screen">Transparent</span></span> or <span class="ScreenTextPACKT"><span class="packt_screen">Cutout</span></span>, the <span class="KeyWordPACKT"><strong>Alpha Channel</strong></span> of the diffuse texture map sets the transparency of the material according to each pixel's brightness level (the <span class="ScreenTextPACKT">Cutout</span> mode will not render semi-transparency – only fully visible or invisible pixels).</span></p>
<p><span>We didn't add an <span class="ScreenTextPACKT"><span class="packt_screen">Alpha Channel</span></span> – this is because Photoshop exports the PNG's Alpha map based on its transparency. To help you visualize the <span class="ScreenTextPACKT">Alpha</span> map, the provided folder also contains <span class="KeyWordPACKT">the</span> <span class="packt_screen"><span class="ScreenTextPACKT">package_diffuse.tif</span></span> (TIF format) Texture file; an image file featuring an <span class="KeyWordPACKT"><span class="packt_screen">Alpha</span></span> map that works in exactly the same way as the PNG file that we have generated:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7fa82fa6-c7d3-4810-befb-b3e8c7eae32f.png"/></div>
<p><span>Regarding the <span class="packt_screen"><span class="ScreenTextPACKT">Emission</span></span> texture map, Unity assigns its RGB colors to the <span class="KeyWordPACKT">Material</span>, combining them with the appropriate color selection slot, and allows adjustments to the intensity of that <span class="ScreenTextPACKT">Emission</span>.</span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p><span>Let's look at a little more information on <span class="ScreenTextPACKT"><span class="packt_screen">Transparency</span></span> and <span class="ScreenTextPACKT"><span class="packt_screen">Emission</span></span>.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using texture maps with the Transparent Mode</h1>
                </header>
            
            <article>
                
<p><span>Please note that you can use a bitmap texture for the <span class="ScreenTextPACKT"><span class="packt_screen">Diffuse</span></span> map in the <span class="ScreenTextPACKT"><span class="packt_screen">Transparent</span></span> render mode. In this case, RGB values will be interpreted as the <span class="ScreenTextPACKT">Diffuse</span> color, while the <span class="ScreenTextPACKT">Alpha</span> will be used to determine that pixel's transparency (in this case, semi-transparent materials are allowed).</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Avoiding issues with the semi-transparent objects</h1>
                </header>
            
            <article>
                
<p><span>You might have noticed that the plastic case was made from two objects (<span class="ScreenTextPACKT"><span class="packt_screen">PackagePlastic</span></span> and <span class="ScreenTextPACKT"><span class="packt_screen">innerPlastic</span></span>). This was done to avoid z-sorting problems, where faces are rendered in front of other geometry when they should be behind it. Having multiple meshes instead of a single one allows these faces to be correctly sorted for rendering. <strong><span class="KeyWordPACKT">Materials</span></strong> in the <span class="packt_screen"><span class="ScreenTextPACKT">Cutout</span></span> mode are not affected by this problem, though.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Emitting light over other objects</h1>
                </header>
            
            <article>
                
<p><span>The <span class="ScreenTextPACKT">Emission</span> value can be used to calculate the <strong><span class="KeyWordPACKT">Material's</span></strong> light projection over other objects when using <span class="ScreenTextPACKT">Lightmaps</span>.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Highlighting materials at mouse-over</h1>
                </header>
            
            <article>
                
<p>Changing the color of an object at runtime can be a very effective way of letting players know that they can interact with it. This is very useful in a number of game genres, such as puzzles and point-and-click adventures, and it can also be used to create 3D user interfaces.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>To highlight a material at mouse-over, follow these steps:</p>
<ol>
<li>Create a new 3D project.</li>
<li><span>Create <strong><span class="KeyWordPACKT">3D Cube</span></strong> in the scene (Hierarchy menu:</span> <strong>Create | 3D Object | Cube</strong><span>).</span></li>
<li><span>In the <span class="KeyWordPACKT">Project</span> panel, create a new <strong><span class="KeyWordPACKT">Material</span></strong> aaset named <span class="ScreenTextPACKT"><span class="packt_screen">m_cube</span></span>. Set its <span class="ScreenTextPACKT"><span class="packt_screen">Albedo Color</span></span> to red.</span></li>
<li><span>In the <strong><span class="KeyWordPACKT">Hierarchy</span></strong><span class="KeyWordPACKT">,</span> select the <strong>Cube</strong> GameObject, and assign it <span class="KeyWordPACKT">the</span> <span class="ScreenTextPACKT"><span class="packt_screen">m_cube</span> <strong>Material</strong></span> (drag the asset from the <span class="KeyWordPACKT">Project</span> panel).</span></li>
<li><span>Create a new C# script-class named <span class="ScreenTextPACKT"><span class="packt_screen">MouseOverHighlighter</span></span>, and add an instance object as a component to the <span class="ScreenTextPACKT"><span class="packt_screen">Cube</span></span>:</span></li>
</ol>
<pre style="padding-left: 30px"><span>    using UnityEngine;<br/> <br/>         public class MouseOverHighlighter : MonoBehaviour {<br/>         public Color mouseOverColor = Color.yellow;<br/> <br/>         private Material originalMaterial;<br/>         private Material mouseOverMaterial;<br/>         private MeshRenderer meshRenderer;<br/> <br/>         void Start() {<br/>             meshRenderer = GetComponent&lt;MeshRenderer&gt;();<br/>             originalMaterial = meshRenderer.material;<br/>             mouseOverMaterial = new <br/>             Material(meshRenderer.sharedMaterial);<br/>             mouseOverMaterial.color = mouseOverColor;<br/>         }<br/> <br/>         void OnMouseOver() {<br/>             meshRenderer.material = mouseOverMaterial;<br/>         }<br/> <br/>         void OnMouseExit() {<br/>             meshRenderer.material = originalMaterial;<br/>         }<br/>     }</span> </pre>
<ol start="6">
<li>With the <span class="packt_screen">Cube</span> <span>selected, in the <span class="ScreenTextPACKT"><span class="packt_screen">Mouse Over Highlighter</span> (<span class="packt_screen">Script</span>)</span> component in the <span class="KeyWordPACKT">Inspector</span>, you'll see the mouse-over color is yellow. You may wish to change this.</span></li>
</ol>
<ol start="7">
<li><span>Test the scene. The <span class="ScreenTextPACKT"><span class="packt_screen">Cube</span></span> will be highlighted red when the mouse is over it (and green when clicked on).</span></li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>The <kbd><span class="CodeInTextPACKT">Start()</span></kbd> <span>method does four things:</span></p>
<ul>
<li><span>Stores a reference to the <span class="packt_screen"><span class="ScreenTextPACKT">MeshRenderer</span></span> component in the <kbd>meshRenderer</kbd></span> variable</li>
<li>Stores a reference to the original Material of the GameObject in the <kbd>originalMaterial</kbd> variable</li>
<li>Creates a new Material named mouseOverMaterial</li>
<li>Sets the color of <span><kbd>mouseOverMaterial</kbd> to the color in the </span><span class="packt_screen">mouseOverColor</span> public variable</li>
</ul>
<p><span>The cube is automatically sent the mouse enter/exit events as the user moves the mouse pointer over and away from the part of the screen where the cube is visible. Our code adds a behavior to the cube when these events are detected.</span></p>
<p>When the <kbd>OnMouseOver</kbd> message is received, the method with that name is invoked, and the GameObject's material is set to<span> </span><span><kbd>mouseOverMaterial</kbd>. When the <kbd>OnMouseExit</kbd> message is received, the GameObject's material is returned to <kbd>originalMaterial</kbd></span>.</p>
<p>The material property of the Renderer is a copy of the </p>
<div class="packt_infobox">If the Material of a GameObject is shared by several objects, we must be careful when changing Material properties to only change those we want to. If we wish to only change values for a particular GameObject, use the <kbd>.material</kbd> property of <kbd>Renderer</kbd> <span>–</span> since a separate clone is created if more than one object uses the same Material. If we want all GameObjects using the same Material to be affected by changes, use the <kbd>.sharedMaterial</kbd> property of <kbd>Renderer</kbd>. Since there was only one GameObject in this recipe, either could have been used.<br/>
Read more at<a href="https://docs.unity3d.com/ScriptReference/Renderer-material.html"> https://docs.unity3d.com/ScriptReference/Renderer-material.html</a></div>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>Here are some ways to enhance this recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Collider needed for custom meshes</h1>
                </header>
            
            <article>
                
<p><span>We created a primitive <span class="KeyWordPACKT">3D Cube</span> – this automatically has a <span class="ScreenTextPACKT">Box Collider</span> component. If you were to use the preceding script with a custom 3D mesh object, ensure the GameObject has a <span class="ScreenTextPACKT"><span class="packt_screen">Physics | Collider</span></span> component, so that it will respond to mouse events.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Mouse Down/Up events – for clicking color</h1>
                </header>
            
            <article>
                
<p>We can extend our code to also display a different color when an object is clicked on (mouse down/up events).</p>
<p>Do the following:</p>
<ol>
<li><span>Remove the scripted <kbd><span class="ScreenTextPACKT">MouseOverHighlighter</span></kbd> from the Cube <kbd>GameObject</kbd>.</span></li>
<li><span>Create a new C# script-class named <kbd><span class="ScreenTextPACKT">MouseOverDownHighlighter</span></kbd>, and add an instance object as a component to the Cube:</span></li>
</ol>
<pre style="padding-left: 30px"><span>    using UnityEngine;<br/> <br/>     public class MouseOverDownHighlighter : MonoBehaviour {<br/>         public Color mouseOverColor = Color.yellow;<br/>         public Color mouseDownColor = Color.green;<br/> <br/>         private Material originalMaterial;<br/>         private Material mouseOverMaterial;<br/>         private Material mouseDownMaterial;<br/>         private MeshRenderer meshRenderer;<br/> <br/>         private bool mouseOver = false;<br/> <br/>         void Start() {<br/>             meshRenderer = GetComponent&lt;MeshRenderer&gt;();<br/>             originalMaterial = meshRenderer.sharedMaterial;<br/>             mouseOverMaterial = NewMaterialWithColor(mouseOverColor);<br/>             mouseDownMaterial = NewMaterialWithColor(mouseDownColor);<br/> <br/>         }<br/> <br/>         void OnMouseEnter() {<br/>             mouseOver = true;<br/>             meshRenderer.sharedMaterial = mouseOverMaterial;<br/>         }<br/> <br/>         void OnMouseDown() {<br/>             meshRenderer.sharedMaterial = mouseDownMaterial;<br/>         }<br/> <br/>         void OnMouseUp() {<br/>             if (mouseOver)<br/>                 OnMouseEnter();<br/>             else<br/>                 OnMouseExit();<br/>         }<br/> <br/>         void OnMouseExit() {<br/>             mouseOver = false;<br/>             meshRenderer.sharedMaterial = originalMaterial;<br/>         }<br/> <br/>         private Material NewMaterialWithColor(Color newColor) {<br/>             Material material = new Material(meshRenderer.sharedMaterial);<br/>             material.color = newColor;<br/> <br/>             return material;<br/>         }<br/>     }</span> </pre>
<ol start="3">
<li>There are two pu<span>blic <span class="ScreenTextPACKT">Colors:</span> one for mouse-over and one for mouse-down (click) highlighting.</span></li>
<li><span>Run the <span class="KeyWordPACKT">Scene</span>. You should now see different highlight colors when the mouse pointer is over the <span class="ScreenTextPACKT">Cube</span>, and when you click the mouse button when the mouse pointer is over the <span class="ScreenTextPACKT">Cube</span>.</span></li>
</ol>
<p><span>Since we are creating two new <span class="KeyWordPACKT">Materials</span>, the reusable</span> <kbd><span class="CodeInTextPACKT">NewMaterialWithColor(...)</span></kbd> <span>C# method </span><span>is included above, to simplify the content of the</span> <kbd><span class="CodeInTextPACKT">Start()</span></kbd> <span>method. A Boolean (true/false) variable has been introduced, so that the correct behavior occurs after the mouse button is released, depending on whether the mouse pointer is still over the object (</span><kbd><span class="CodeInTextPACKT">mouseOver = true</span></kbd><span>) or has moved away from the object (</span><kbd><span class="CodeInTextPACKT">mouseOver = false</span></kbd><span>).</span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Adding Detail maps to a material</h1>
                </header>
            
            <article>
                
<p><span>When creating a large object, there is not only the desire to <strong><span class="KeyWordPACKT">Texture</span></strong> it as a whole, but also to add details that can make it look better when viewed up close. To overcome the need for large, memory-hogging, highly-detailed texture maps, the use of <span class="KeyWordPACKT">Detail maps</span> can make a real difference.</span></p>
<p><span>In this recipe, we will add <span class="KeyWordPACKT"><strong>Detail maps</strong></span> to a rocket toy by applying a <span class="KeyWordPACKT"><strong>Detail mask</strong></span> and a <span class="KeyWordPACKT"><strong>Detail Normal</strong></span> map. In our case, we want to add a textured quality (and a stripe pattern) to the green plastic, except in the region where there is a battery compartment and the toy's logo:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/0992c355-f09f-42d9-bbc9-a91bca56df54.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>For this recipe, we have prepared three files in the <kbd>05_06</kbd> folder:</p>
<ul>
<li><span class="ScreenTextPACKT"><span class="packt_screen">rocketToy.fbx</span></span>: A 3D object of a package (FBX format)</li>
<li><span class="ScreenTextPACKT"><span class="packt_screen">ship_diffuse.png</span></span>: The diffused texture map for the rocket ship toy (PNG format)</li>
<li><span class="ScreenTextPACKT"><span class="packt_screen">ship_height.png</span></span>: The heightmap to be used to create a normal map (PNG format)</li>
</ul>
<p>Also provided are the four final, image-edited files you'll create in the project:</p>
<ul>
<li><span class="ScreenTextPACKT"><span class="packt_screen">detail_diffuse.png</span></span><span>: The <span class="ScreenTextPACKT">Albedo</span> texture map for the packaging with cutouts (PNG format)</span></li>
<li><span class="ScreenTextPACKT"><span class="packt_screen">detail_height.png</span></span>: The greyscale gradient circle <span>–</span> for the dimpled surface detail effect (PNG format)</li>
<li><span class="ScreenTextPACKT"><span class="packt_screen">ship_mask.tif</span></span>: The detail mask <span>–</span> indicating how much the text and battery holder appear raised up (TIF format)</li>
<li><span class="ScreenTextPACKT"><span class="packt_screen">ship_mask2.tif</span></span><span>: The detail mask – where the <span class="ScreenTextPACKT">Alpha</span> for the battery holder is greater, so no dimples will appear from <kbd><span class="ScreenTextPACKT">detail_height</span></kbd></span> <span>(TIF format)</span></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>To add the Detail maps to your object, follow these steps:</p>
<ol>
<li>Import the provided files.</li>
<li><span>In the <span class="KeyWordPACKT"><span class="packt_screen">Project</span></span> panel, select the <span class="ScreenTextPACKT"><span class="packt_screen">rocketToy</span> model asset</span>. In the <span class="packt_screen"><span class="KeyWordPACKT">Inspector</span></span><span class="KeyWordPACKT">,</span> click the <kbd><span class="KeyWordPACKT">Materials</span></kbd> button and then click <span class="packt_screen"><span class="ScreenTextPACKT">Extract Materials...</span></span> Extract the model's <span class="KeyWordPACKT">Materials</span> into a new folder named</span> <kbd>Materials</kbd>. You should now have five Materials for each part of the rocketToy model (<kbd>MAT_base/end/level1/2/3</kbd>):</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f3705b1e-91b8-4d41-b41c-8d3ccce5f1fb.png" style="width:40.33em;height:20.83em;"/></div>
<p class="mce-root"/>
<ol start="3">
<li><span>Select <strong><span class="KeyWordPACKT">Mater</span></strong></span><span><strong><span class="KeyWordPACKT">ial</span></strong> <span class="ScreenTextPACKT"><span class="packt_screen">MAT_rocketLevel1</span></span>, and change the <span class="packt_screen"><span class="ScreenTextPACKT">Shader</span></span> to <span class="packt_screen"><span class="ScreenTextPACKT">Standard</span></span> <span class="ScreenTextPACKT">(<span class="packt_screen">Specular setup</span>)</span>. Drag <span class="KeyWordPACKT">the</span> <span class="ScreenTextPACKT"><kbd>ship_diffuse</kbd> Texture</span> from the <span class="KeyWordPACKT">Project</span> panel into the <span class="ScreenTextPACKT"><strong>Albedo</strong> Texture</span> slot in the <span class="KeyWordPACKT">Inspector</span> properties for <span class="ScreenTextPACKT"><span class="packt_screen">MAT_rocketLevel1</span></span>.</span></li>
<li><span>Drag the <span class="ScreenTextPACKT"><kbd>rocketToy</kbd> model asset</span> from the <span class="KeyWordPACKT"><span class="packt_screen">Project</span></span> panel into the <span class="KeyWordPACKT"><span class="packt_screen">Scene</span></span> panel (or <span class="KeyWordPACKT">Hierarchy</span>) to add an instance of the model as a <kbd>GameObject</kbd> in the <span class="KeyWordPACKT">Scene</span>. You should be able to see the image of the text of the toy's logo ("<span class="ScreenTextPACKT">Rocket</span>") and the battery compartment in level 1 (above the base).</span></li>
<li><span>Duplicate <span class="KeyWordPACKT">the</span> <span class="ScreenTextPACKT"><span class="packt_screen">ship_diffuse</span> Texture,</span> naming the copy <span class="ScreenTextPACKT"><span class="packt_screen">ship_mask</span></span>.</span></li>
<li><span>Open <span class="ScreenTextPACKT"><span class="packt_screen">ship_mask</span></span> in your image editor. Select all the solid green pixels around the logo and battery compartment (in Photoshop, this can be done with the <span class="ScreenTextPACKT">Magic Wand</span> tool, keeping the <em>Shift</em> key pressed while selecting multiple areas):</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/2bd99e7e-351b-4815-8909-b43d6d25d6f9.png"/></p>
<ol start="7">
<li><span>Keeping your selection active, access the image <span class="ScreenTextPACKT"><span class="packt_screen">Channels</span></span> window (in Photoshop,</span> this can be done by navigati<span>ng to <span class="ScreenTextPACKT"><span class="packt_screen">Window | Channels</span></span>). Click on <span class="ScreenTextPACKT"><span class="packt_screen">New Channel</span></span>. This will be our <span class="ScreenTextPACKT"><span class="packt_screen">Alpha Channel</span></span>:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/2d7a5008-c9f3-4627-bd0e-b0bcc735dfc0.png"/></div>
<ol start="8">
<li><span>Hi</span>de the <span class="packt_screen">Red</span>, <span class="packt_screen">Green</span>, and <span class="packt_screen">Blue</span> <span>channels. Select the <span class="KeyWordPACKT">Alpha Channel</span> and paint the selection white. Select the area of the battery compartment and paint it grey (R, G, and B: 100):</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/587ea264-1e9e-41bd-82b9-bbf9241713b2.png"/></div>
<ol start="9">
<li><span>Save it in the TI</span><span>F format as <span class="ScreenTextPACKT"><span class="packt_screen">ship_mask.tif</span></span>, in the <kbd><span class="KeyWordPACKT">Assets</span></kbd> folder. Make sure that you include <span class="KeyWordPACKT"><span class="packt_screen">Alpha Channels</span></span>:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e25e7cd6-5d2f-4853-9c87-3f2755c6cc8b.png"/></div>
<ol start="10">
<li>Now that we have the mask, let's create a diffuse map for our detail. In your image editor, create a new image with the following dimensions: width: 64, and height: 64:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6d4ef0c4-490e-4bc0-bd1c-3413ebbbcbce.png"/></div>
<ol start="11">
<li>Fill the new image with grey (R, G, and B: 128). Use shapes or rectangular fills to create a dark grey (R, G, and B: 100) horizontal line that is about 16 pixels tall:</li>
<li><span>Save the image as <span class="ScreenTextPACKT">detail_diff.png</span> in the <span class="KeyWordPACKT">Assets</span> folder.</span></li>
<li><span>Create a new 64 x 64 image. Use a <span class="ScreenTextPACKT">Gradient</span> tool to create a black and white <span class="ScreenTextPACKT">Radial Gradient</span> (in Photoshop, this can be done with the <span class="ScreenTextPACKT">Gradient Tool</span> in <span class="ScreenTextPACKT">Radial</span> mode):</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ef807d3f-147d-4412-aaf7-5fbc1448224b.png"/></div>
<p class="mce-root"/>
<p class="mce-root"/>
<ol start="14">
<li><span>Save the image</span> <span>as <span class="ScreenTextPACKT"><span class="packt_screen">detail_height.png</span></span> in the <kbd><span class="KeyWordPACKT">Assets</span></kbd> folder. Return to the Unity editor.</span></li>
<li><span>From the <kbd><span class="KeyWordPACKT">Assets</span></kbd> folder, select <span class="ScreenTextPACKT"><span class="packt_screen">detail_height</span></span>. In the <span class="KeyWordPACKT"><span class="packt_screen">Inspector</span></span>, change its <span class="ScreenTextPACKT"><span class="packt_screen">Texture</span> Type</span> to <span class="packt_screen"><span class="KeyWordPACKT">Normal</span></span> map, check the <span class="ScreenTextPACKT">Create</span> from <span class="packt_screen"><span class="ScreenTextPACKT">Graysc</span><span class="ScreenTextPACKT">ale</span></span> option, adjust <span class="ScreenTextPACKT">Bumpiness</span> to 0.25, and set <span class="ScreenTextPACKT"><span class="packt_screen">Filtering</span></span> to <span class="ScreenTextPACKT">smooth</span>. Click on <span class="packt_screen"><span class="ScreenTextPACKT">Apply</span></span> to save the changes:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/2bce8852-1024-4696-82e0-e8698b83827d.png"/></div>
<ol start="16">
<li>Do the same for the <span class="packt_screen">ship_height</span> Texture <span>–</span> in the <span class="packt_screen">Inspector</span>, change its <span class="packt_screen">Texture</span> Type to Normal map, check the <span class="packt_screen">Create</span> from <span class="packt_screen">Grayscale</span> option, adjust <span class="packt_screen">Bumpiness</span> to <kbd>0.25</kbd>, and set Filtering to smooth. Click on <span class="packt_screen">Apply</span> to save the changes.</li>
<li><span>Select <span class="KeyWordPACKT">the</span> <kbd><span class="ScreenTextPACKT">MAT_rocketLevel1</span></kbd> Material and view its properties in the <span class="packt_screen"><span class="KeyWordPACKT">Inspector</span></span>. Set the following properties:</span>
<ul>
<li><span>Assign <span class="KeyWordPACKT">the</span></span> <span class="ScreenTextPACKT"><span class="packt_screen">ship_height</span></span> <strong>Texture</strong> to the <span class="packt_screen">Normal</span> Map slot, and set its <span class="packt_screen">intensity</span> to <kbd>0.3</kbd>.</li>
<li><span>Assign <span class="KeyWordPACKT">the</span></span> <span class="ScreenTextPACKT"><span class="packt_screen">ship_mask</span> <strong>Texture</strong></span> to the <span class="packt_screen">Detail Mask</span> slot.</li>
<li><span>Assign <span class="KeyWordPACKT">the</span></span> <span class="ScreenTextPACKT"><span class="packt_screen">detail_diff</span></span> <strong>Texture</strong> to <span class="packt_screen">Secondary Maps | Detail Albedo x 2</span>.</li>
<li><span>Assign <span class="KeyWordPACKT">the</span> <span class="packt_screen">detail_height</span> <strong>Texture</strong> as <span class="packt_screen">Secondary Maps</span> | <span class="packt_screen">Normal Map</span>, and set its <span class="packt_screen">intensity</span> to <kbd>0.6</kbd>.</span></li>
</ul>
</li>
<li><span>In the <span class="ScreenTextPACKT">Secondary Maps</span> section, change the <span class="ScreenTextPACKT">Tiling</span> values as follows:</span>
<ul>
<li>Set <span class="packt_screen"><span class="ScreenTextPACKT">Tiling</span> X</span> to <kbd>200</kbd> and <span class="packt_screen">Y</span> to <kbd>50</kbd>.</li>
<li>Set <span class="ScreenTextPACKT"><span class="packt_screen">UV Set</span></span> to <span class="packt_screen">UV1</span>.</li>
</ul>
</li>
</ol>
<div class="packt_infobox"><span>Until we set <span class="ScreenTextPACKT"><span class="packt_screen">UV Set</span></span> to <span class="packt_screen">UV1</span>, you might have noticed that the pattern was not seamless. This was because we were using the same <span class="ScreenTextPACKT"><span class="packt_screen">UV Set</span></span> from our <span class="ScreenTextPACKT">Diffuse</span> <span class="KeyWordPACKT">Texture</span>. However, the object has been assigned to two different UV channels (back when it was being modelled). While <span class="ScreenTextPACKT">UV channel 1</span> contains the mapping for our <span class="ScreenTextPACKT">Diffuse</span> map, <span class="ScreenTextPACKT">UV channel 2</span> uses a basic cylindrical mapping. We need to change the <strong><span class="ScreenTextPACKT">Secondary Maps</span></strong> section's <span class="ScreenTextPACKT">UV Set</span> from <span class="ScreenTextPACKT"><span class="packt_screen">UV0</span></span> to <span class="ScreenTextPACKT"><span class="packt_screen">UV1</span></span>.</span></div>
<ol start="19">
<li>The <span class="packt_screen">Detail m<span>ap</span></span> <span>f</span><span>or your <span class="KeyWordPACKT">Material</span> is ready:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/00c84fc3-bc56-46f6-b4aa-be14a4a837bc.png"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p><span>When in use, <span class="ScreenTextPACKT">Secondary Maps</span> are blended onto the <span class="KeyWordPACKT">Material's</span> primary <span class="ScreenTextPACKT">Diffuse</span> and <span class="ScreenTextPACKT">Normal</span> maps – that's why our object is green even after the<span class="ScreenTextPACKT"> Diffuse Detail</span> is applied: the grey tones are superimposed on the original <span class="ScreenTextPACKT">Diffuse</span> <span class="KeyWordPACKT">Texture</span>. By using a <span class="ScreenTextPACKT">Detail Mask</span>, the artist defines which areas of the object should be affected by <span class="ScreenTextPACKT">Secondary Maps</span>. This is great for customization, and also for creating nuances (such as the semi-bumped battery compartment in our example).</span></p>
<p class="mce-root"/>
<p><span>Another helpful feature is the possibility of using a separate UV channel for <span class="ScreenTextPACKT">Details</span> maps and <span class="ScreenTextPACKT">Tiling</span>. Besides adding variation to <span class="KeyWordPACKT">Texture</span> mapping, this allows us to paint the details that can be perceived even at a very close distance by dramatically enhancing the visual quality of our objects.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Fading the transparency of a material</h1>
                </header>
            
            <article>
                
<p><span>A feature of many games is for objects to fade away to invisible, or appear gradually from invisible to fully visible. Unity provides the special <span class="ScreenTextPACKT">Rendering Mode</span> of <span class="ScreenTextPACKT">Fade</span> for exactly this purpose.</span></p>
<p>In this recipe, we will create an object that, once clicked, fades out and disappears. We'll also look at how to enahnce the code, to take account of the GameObject's own initial alpha value, to self-destruct when fading has finished and so on.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Follow these steps:</p>
<ol>
<li><span>Create a new <strong><span class="ScreenTextPACKT">3D Sphere</span></strong>, named <span class="ScreenTextPACKT"><span class="packt_screen">Sphere-Game</span></span>. Choose menu: <span class="ScreenTextPACKT"><span class="packt_screen">3D Object | Sphere</span></span>.</span></li>
<li><span>Select <span class="ScreenTextPACKT"><span class="packt_screen">Sphere-Game</span></span> and ensure it has a <span class="ScreenTextPACKT">Collider</span> (if you are using a custom 3D object, you might have to add a collider through menu: <span class="ScreenTextPACKT">Add</span> <span class="packt_screen"><span class="ScreenTextPACKT">Component | Physics | Box</span> (or <span class="ScreenTextPACKT">Mesh</span>)</span> <span class="ScreenTextPACKT">Collider)</span>.</span></li>
<li><span>Create a new <span class="KeyWordPACKT">Material</span> named <span class="packt_screen"><span class="ScreenTextPACKT">m_fade</span></span>.</span></li>
<li><span>With <span class="KeyWordPACKT">the</span> <span class="packt_screen"><span class="ScreenTextPACKT">m_fade</span> </span><strong>Material</strong> selected, change its <span class="packt_screen"><span class="ScreenTextPACKT">Rendering Mode</span></span> to <span class="ScreenTextPACKT"><span class="packt_screen">Fade</span> in the Inspector</span>:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6c51d7b1-d92d-4c4f-95fd-a3447b3906d7.png"/></div>
<div class="packt_infobox"><span>The <strong><span class="ScreenTextPACKT">Fade</span></strong> rendering mode is specifically designed for situations such as this. Other rendering modes, such as <span class="ScreenTextPACKT">Transparent</span>, will turn the <span class="ScreenTextPACKT">Albedo</span> color transparent, but not the specular highlights nor the reflections, in which case the object will still be visible.</span></div>
<ol start="5">
<li><span>Apply <span class="KeyWordPACKT">the</span></span> <span class="packt_screen"><span><span class="ScreenTextPACKT">m_</span></span><span><span class="ScreenTextPACKT">fade</span></span></span> <span><strong><span class="ScreenTextPACKT">Material</span></strong> to <span class="ScreenTextPACKT"><span class="packt_screen">Sphere-Game</span></span> by dragging it from the <span class="KeyWordPACKT">Project</span> panel into the <span class="ScreenTextPACKT">Sphere-Game</span> GameObject.</span></li>
<li><span>Create a new C# script-class named <span class="ScreenTextPACKT">FadeAway</span> and add an instance object as a component to <span class="ScreenTextPACKT"><span class="packt_screen">Sphere-Game</span></span>:</span></li>
</ol>
<pre style="padding-left: 60px"><span>using UnityEngine;<br/>     public class FadeObject: MonoBehaviour {<br/>         public float fadeDurationSeconds = 1.0f;<br/>         public float alphaStart = 1.0f;<br/>         public float alphaEnd = 0.0f;<br/>         private float startTime;<br/>         private MeshRenderer meshRenderer;<br/>         private Color fadeColor;<br/>         private bool isFading = false;<br/> <br/>         void Start () {<br/>             meshRenderer = GetComponent&lt;MeshRenderer&gt;();<br/>             fadeColor = meshRenderer.material.color;<br/>             UpdateMaterialAlpha(alphaStart);<br/>         }<br/> <br/>         void Update() {<br/>             if (isFading)<br/>                 FadeAlpha();<br/>         }<br/> <br/>         void OnMouseUp() {<br/>             StartFading();<br/>         }<br/> <br/>         private void StartFading()<br/>         {<br/>             startTime = Time.time;<br/>             isFading = true;<br/>         }<br/> <br/>         private void FadeAlpha()<br/>         {<br/>             float timeFading = Time.time - startTime;<br/>             float fadePercentage = timeFading / <br/>             fadeDurationSeconds;<br/>             float alpha = Mathf.Lerp(alphaStart, alphaEnd, <br/>            fadePercentage);<br/>             UpdateMaterialAlpha(alpha);<br/> <br/>             if (fadePercentage &gt;= 1)<br/>                 isFading = false;<br/>         }<br/> <br/>         private void UpdateMaterialAlpha(float newAlpha) {<br/>             fadeColor.a = newAlpha;<br/>             meshRenderer.material.color = fadeColor;<br/>         }<br/>     }</span> </pre>
<ol start="7">
<li>Play your <span class="packt_screen">Scene</span> and <span>click on the <span class="packt_screen"><span class="ScreenTextPACKT">Spher</span></span><span class="ScreenTextPACKT"><span class="packt_screen">e</span></span> to see it fade away and self-destruct.</span></li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p><span>The opaqueness of the material using a transparent <strong><span class="ScreenTextPACKT">Shader</span></strong> is determined by the <strong>alpha</strong> value of its main <strong>color</strong>. This recipe is based around changing the <span class="ScreenTextPACKT">Alpha</span> value of the <strong><span class="ScreenTextPACKT">Color</span></strong> of the <strong><span class="ScreenTextPACKT">MeshRenderer</span></strong>.</span></p>
<p>There are three public variables:</p>
<ul>
<li><kbd><span class="ScreenTextPACKT">fadeDurationSeconds</span></kbd>: The time in seconds we want our fading to take</li>
<li><kbd><span class="ScreenTextPACKT">alphaStart</span></kbd>: The initial alpha (transparency) we want the GameObject to start with (1 = fully visible, 0 = invisible)</li>
<li><kbd>a<span class="ScreenTextPACKT">lphaEnd</span></kbd>: The alpha value we want to fade the GameObject into</li>
</ul>
<p>The <span class="CodeInTextPACKT"><kbd>UpdateMaterialAlpha(...)</kbd> method</span> <span>updates the alpha value of the GameObject's <span class="ScreenTextPACKT">Color</span> object with the given value by updating the alpha value of <span class="ScreenTextPACKT">the</span></span> <span class="CodeInTextPACKT"><kbd>fadeColor</kbd> Color variable</span><span>, and then forcing the <span class="ScreenTextPACKT">MeshRenderer</span> <span class="KeyWordPACKT">Material</span> to update its <span class="ScreenTextPACKT">Color</span> value to match those in</span> <span class="CodeInTextPACKT">fadeColor</span>.</p>
<p>When the Scene begins, the <kbd><span class="CodeInTextPACKT">Start()</span></kbd> <span>method caches a reference to the <span class="ScreenTextPACKT">MeshRenderer</span> component (the</span> <span class="CodeInTextPACKT"><kbd>meshRenderer</kbd> variable</span><span>), and also the <span class="ScreenTextPACKT">Color</span> object of the <span class="KeyWordPACKT">Material</span> of the <span class="ScreenTextPACKT">MeshRenderer</span> (the</span> <span class="CodeInTextPACKT"><kbd>fadeColor</kbd> variable</span>). Finally, the GameObject's alpha is set to match the value of variable <span class="CodeInTextPACKT">alphaStart</span>, by invoking the <span class="CodeInTextPACKT"><kbd>UpdateMaterialAlpha(...)</kbd> method</span>.</p>
<p class="mce-root"/>
<p>The <kbd><span class="CodeInTextPACKT">OnMouseUp()</span></kbd> method is invoked when the user clicks the <span class="packt_screen">GameObject</span> with their mouse. This invokes the <span class="CodeInTextPACKT"><kbd>StartFading()</kbd> method</span>.</p>
<div class="packt_infobox">The actions to start fading weren't simply put in this method, since we may also wish to start fading due to some other events (such as keyboard clicks, a timer hitting some value, or an NPC changing into some mode such as dying). So we separate the logic that detects that event that we are interested has taken place, with the actions we wish to perform, in this case to start the fading process.</div>
<p>The <kbd><span class="CodeInTextPACKT">StartFading()</span></kbd> method <span>records the current <strong><span class="KeyWordPACKT">Time</span></strong>, since we need that to know when to finish fading (time when we started fading +</span> <span class="CodeInTextPACKT">fadeDurationSeconds</span>). Also the <span class="CodeInTextPACKT">isFading Boolean flag</span> is set to true, so logic elsewhere relating to fading will know it's time to do things.</p>
<p>The <span class="CodeInTextPACKT"><kbd>Update()</kbd> method, </span>called each frame, tests whether the <span class="CodeInTextPACKT"><kbd>isFading</kbd> flag</span> is <span class="packt_screen">true</span>. If it is, the <span class="CodeInTextPACKT"><kbd>FadeAlpha()</kbd> method</span> is invoked for each frame.</p>
<p><span class="CodeInTextPACKT">The <kbd>FadeAlpha()</kbd></span> method is where the majority of our alpha-fading logic is based:</p>
<ul>
<li><kbd>timeFading</kbd> is calculated: The time since we started fading</li>
<li><kbd><span class="CodeInTextPACKT">fadePercentage</span></kbd> is calculated: How far we are from start (0) to finish (1) of our fading</li>
<li><span class="CodeInTextPACKT">alpha</span> is calculated: The appropriate alpha value for our fade percentage, using the <kbd><span class="CodeInTextPACKT">Lerp(...)</span></kbd> method to choose an <kbd>intermedia</kbd> value based on a <kbd>0..1</kbd> percentage</li>
<li>The <kbd><span class="CodeInTextPACKT">UpdateMaterialAlpha(...)</span></kbd> method with the new alpha value</li>
<li>If fading has finished (<span class="CodeInTextPACKT"><kbd>fadePercentage</kbd> &gt;= 1</span>), we set the <span class="CodeInTextPACKT"><kbd>isFading</kbd> Boolean flag</span> to false to indicate this</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>Here are some ways to enhance our fading features.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Start with keypress and fade in from invisible</h1>
                </header>
            
            <article>
                
<p>The preceding code can fade in from invisible (<span class="CodeInTextPACKT"><kbd>alphaStart</kbd> = 0</span>) to fully visible (<span class="CodeInTextPACKT"><kbd>alphaEnd</kbd> = 1</span><span>). However, if we can't see the object initially, then it's a bit much to ask the player to click an invisible <span class="KeyWordPACKT">Sphere</span>! So let's add code to the</span> <span class="CodeInTextPACKT"><kbd>Update()</kbd> method</span> (checked each frame) to detect when the <em>F</em> key is pressed, as an alternative way to start our fading process:</p>
<pre class="SourceCode"><span>void Update()<br/> {<br/> if (Input.GetKeyDown(KeyCode.F))<br/> StartFading();<br/> <br/> if (isFading)<br/> FadeAlpha();<br/> }</span></pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Destroy object when fading complete</h1>
                </header>
            
            <article>
                
<p>If fading to invisible is how a GameObject communicates to the player that it is leaving the scene (completed/dying), then we may want that GameObject to be Destroyed after the fading process is completed. Let's add this feature to our code.</p>
<p>Do the following:</p>
<ol>
<li>Add a new public Boolean variable to our script (default to false):</li>
</ol>
<pre style="padding-left: 60px">public bool destroyWhenFadingComplete = true; </pre>
<ol start="2">
<li>Add a new <span class="CodeInTextPACKT"><kbd>EndFade()</kbd> method</span>, which sets <kbd><span class="CodeInTextPACKT">isFading</span></kbd> to <kbd>false</kbd>, and then tests whether the public <kbd><span class="CodeInTextPACKT">destroyWhenFadingComplete</span></kbd> variable was set to true, and if so, Destroys the GameObject:</li>
</ol>
<pre style="padding-left: 90px"><span>private void EndFade() {<br/>         isFading = false;<br/> <br/>         if(destroyWhenFadingComplete)<br/>             Destroy (gameObject);<br/>     }</span> </pre>
<p class="mce-root"/>
<ol start="3">
<li>Refactor the <kbd><span class="CodeInTextPACKT">FadeAlpha()</span></kbd> method so that it invokes <kbd><span class="CodeInTextPACKT">EndFade()</span></kbd> when the fading is completed (<kbd><span class="CodeInTextPACKT">fadeProgress &gt;= fadeDurationSeconds</span></kbd>):</li>
</ol>
<pre style="padding-left: 60px"><span>    private void FadeAlpha()<br/>     {<br/>         float fadeProgress = Time.time - startTime;<br/>         float alpha = Mathf.Lerp(alphaStart, alphaEnd, fadeProgress <br/>          / fadeDurationSeconds);<br/>         UpdateMaterialAlpha(alpha);<br/> <br/>         if (fadeProgress &gt;= fadeDurationSeconds)<br/>             EndFade();<br/>     }</span> </pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using GameObect's alpha as our starting alpha value</h1>
                </header>
            
            <article>
                
<p><span>It may be that the game designer has set the alpha value of a GameObject in the Inspector to the initial value they want. So let's enhance our code to allow this to be indicated by checking a public Boolean flag variable in the <strong><span class="KeyWordPACKT">Inspector</span></strong>, and adding code to read and use the GameObject's alpha if that option is chosen.</span></p>
<p>Do the following:</p>
<ol>
<li><span>In the <strong><span class="KeyWordPACKT">Inspector</span></strong>, click the <span class="packt_screen"><span class="ScreenTextPACKT">Color</span> picker</span> for the <span class="KeyWordPACKT">Material</span></span> <span class="packt_screen">Albedo</span><span>, and set the <kbd><span class="ScreenTextPACKT">Alpha</span></kbd> value to something other than <span class="ScreenTextPACKT">255</span> (for example, set to <span class="ScreenTextPACKT">32</span>, which is mostly transparent):</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/44bd6cbf-10ea-4cab-84c3-f3a4e6dc1862.png"/></div>
<ol start="2">
<li>Add a new public Boolean variable to our script (default to false):</li>
</ol>
<pre style="padding-left: 60px">public bool useMaterialAlpha = false; </pre>
<ol start="3">
<li>Add logic to the <kbd><span class="CodeInTextPACKT">Start()</span></kbd> method <span>so that if this flag is true, we use the alpha value of the <span class="ScreenTextPACKT">Color</span> read from the GameObject's <span class="KeyWordPACKT">Material</span> as the <span class="KeyWordPACKT">Scene</span> begins (<kbd><span class="ScreenTextPACKT">fadeColor.a</span></kbd>):</span></li>
</ol>
<pre style="padding-left: 60px"><span>void Start () {<br/>         meshRenderer = GetComponent&lt;MeshRenderer&gt;();<br/> <br/>         // set object material's original color as fadeColor<br/>         fadeColor = meshRenderer.material.color;<br/> <br/>         // IF using material's original alpha value, THEN use <br/>             //material's alpha value for alphaStart<br/>         if (useMaterialAlpha)<br/>             alphaStart = fadeColor.a;<br/> <br/>         // start object's alpha at our alphaStart value<br/>         UpdateMaterialAlpha(alphaStart);<br/>     }</span> </pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using a coroutine for our fading loop</h1>
                </header>
            
            <article>
                
<p>Where possible, we should avoid adding code in the <span class="CodeInTextPACKT"><kbd>Update()</kbd> method</span>, since this is invoked every frame, and so can reduce the performance of our games, especially if many objects have scripted components with <kbd><span class="CodeInTextPACKT">Update()</span></kbd> methods, all testing flags every frame.</p>
<p><span>One very effective solution is to invoke a coroutine when we want some actions performed over several frames, since a coroutine can perform some actions, then yield control back to the rest of the <span class="KeyWordPACKT">Scene</span>, and then resume its actions from the point it left off previously, and so on until its logic is completed.</span></p>
<p>Do the following:</p>
<ol>
<li>Remove the <span class="CodeInTextPACKT"><kbd>Update()</kbd> method</span>.</li>
<li>Add a new using statement at the top of the script class, since coroutines return an <kbd><span class="CodeInTextPACKT">IEnumerator</span></kbd> value, which is part of the <kbd><span class="CodeInTextPACKT">System.Collections</span></kbd> package:</li>
</ol>
<pre style="padding-left: 60px">using System.Collections; </pre>
<p class="mce-root"/>
<p class="mce-root"/>
<ol start="3">
<li>Add a new method:</li>
</ol>
<pre style="padding-left: 60px"><span>private IEnumerator FadeFunction() {<br/>         while (isFading)<br/>         {<br/>             yield return new WaitForEndOfFrame();<br/>             FadeAlpha();<br/>         }<br/>     }</span> </pre>
<ol start="4">
<li>Refactor the <kbd><span class="CodeInTextPACKT">StartFading()</span></kbd> method, so that is starts our coroutine:</li>
</ol>
<pre style="padding-left: 60px"><span>private void StartFading() {<br/>         startTime = Time.time;<br/>         isFading = true;<br/>         StartCoroutine(FadeFunction());<br/>     }</span> </pre>
<p>That's it <span>–</span> once the coroutine has been started, it will be called each frame until it completes its logic, temporarily suspending its execution each time a yield statement is executed.</p>


            </article>

            
        </section>
    </body></html>