<html><head></head><body>
<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06" class="calibre1"/>Chapter 6. XamChat for Android</h1></div></div></div><p class="calibre8">In this chapter, we will begin developing the Android UI for our XamChat sample application. We will use the native Android APIs directly to create our application and call into our shared portable class library similar to what we did on iOS. Similarly, our Xamarin.Android application will be indistinguishable from an Android application written in Java.</p><p class="calibre8">To begin writing the Android version of XamChat, open the solution provided in the previous chapters, and create a new <strong class="calibre2">Android Application</strong> project. Name the project <code class="literal">XamChat.Droid</code> or some other appropriate name of your choice.</p><p class="calibre8">In this chapter, we will cover:</p><div><ul class="itemizedlist"><li class="listitem">The Android Manifest</li><li class="listitem">Writing a login screen for XamChat</li><li class="listitem">Android's ListView and BaseAdapter</li><li class="listitem">Adding a friends list</li><li class="listitem">Adding a list of messages</li></ul></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_1"><a id="ch06lvl1sec44" class="calibre1"/>Introducing Android Manifest</h1></div></div></div><p class="calibre8">All Android <a id="id359" class="calibre1"/>applications have an XML file called the Android Manifest, which declares the basic information about the app such as the application version and name, and is named <code class="literal">AndroidManifest.xml</code>. This is very similar to the <code class="literal">Info.plist</code> file on iOS, but Android puts much more emphasis on its importance. A default project doesn't have a manifest, so let's begin by creating one by navigating to <strong class="calibre2">Project Options</strong> | <strong class="calibre2">Android Application</strong> and clicking on <strong class="calibre2">Add Android Manifest</strong>. Several new settings for your application will appear.</p></div></div>

<div><div><div><div><div><div><h2 class="title1" id="calibre_pb_2"><a id="ch06lvl2sec22" class="calibre1"/>Setting up the Manifest</h2></div></div></div><p class="calibre8">The most important <a id="id360" class="calibre1"/>settings, shown in the following screenshot, are as follows:</p><div><ul class="itemizedlist"><li class="listitem"><strong class="calibre2">Application name</strong>: This is the title of your application, which is displayed below the icon. It is not the same as the name selected on Google Play.</li><li class="listitem"><strong class="calibre2">Package name</strong>: This is similar to that on iOS; it's your app's bundle identifier or bundle ID. It is a unique name used to identify your application. The convention is to use the reverse domain style with your company name at the beginning; for example, <code class="literal">com.packt.xamchat</code>. It must begin with a lower case letter and contain at least one "." character within.</li><li class="listitem"><strong class="calibre2">Application icon</strong>: This is the icon displayed for your app on Android's home screen.</li><li class="listitem"><strong class="calibre2">Version number</strong>: This is a one-digit number that represents the version of your application. Raising this number indicates a newer version on Google Play.</li><li class="listitem"><strong class="calibre2">Version name</strong>: This is a user-friendly version string for your app that users will see in settings and on Google Play; for example, <strong class="calibre2">1.0.0</strong>.</li><li class="listitem"><strong class="calibre2">Minimum Android version</strong>: This is the minimum version of Android that your application supports. In modern Android apps, you can generally target Android 4.0, but this is a decision based on your application's core audience.</li><li class="listitem"><strong class="calibre2">Target Android version</strong>: This is the version of the Android SDK your application is compiled against. Using higher numbers gives you access to new APIs, however, you might need to do some checks to call these APIs on newer devices.</li><li class="listitem"><strong class="calibre2">Install Location</strong>: This defines the different locations your Android application can be installed to: auto (user settings), external (SD card), or internal (device internal memory).</li></ul></div><div><img src="img/00046.jpeg" alt="Setting up the Manifest" class="calibre9"/></div><p class="calibre10"> </p><div><div><div><div><h3 class="title2"><a id="ch06lvl3sec01" class="calibre1"/>Common manifest permissions</h3></div></div></div><p class="calibre8">In addition to these settings, there is a set of checkboxes labeled <strong class="calibre2">Required permissions</strong>. These are displayed to users<a id="id361" class="calibre1"/> on Google Play prior to the application being installed. This is Android's way of enforcing a level of security, giving users a way to see what kinds of access an app will have to make changes to their device.</p><p class="calibre8">The following are some<a id="id362" class="calibre1"/> commonly used manifest permissions:</p><div><ul class="itemizedlist"><li class="listitem"><strong class="calibre2">Camera</strong>: This provides<a id="id363" class="calibre1"/> access to the device camera</li><li class="listitem"><strong class="calibre2">Internet</strong>: This provides <a id="id364" class="calibre1"/>access to make web requests over the Internet</li><li class="listitem"><strong class="calibre2">ReadContacts</strong>: This provides<a id="id365" class="calibre1"/> access to read the device's contacts library</li><li class="listitem"><strong class="calibre2">ReadExternalStorage</strong>: This <a id="id366" class="calibre1"/>provides access to read the SD card</li><li class="listitem"><strong class="calibre2">WriteContacts</strong>: This provides access to <a id="id367" class="calibre1"/>modify the device's contacts library</li><li class="listitem"><strong class="calibre2">WriteExternalStorage</strong>: This provides <a id="id368" class="calibre1"/>access to write to the SD card</li></ul></div><p class="calibre8">In addition to these settings, a manual change to Android Manifest will be required many times. In this case, you can edit the manifest file as you would edit a standard XML file in Xamarin Studio. For a complete<a id="id369" class="calibre1"/> list of valid XML elements and attributes, visit <a class="calibre1" href="http://developer.android.com/guide/topics/manifest/manifest-intro.html">http://developer.android.com/guide/topics/manifest/manifest-intro.html</a>.</p><p class="calibre8">Now let's fill out the following settings for our application:</p><div><ul class="itemizedlist"><li class="listitem"><strong class="calibre2">Application name</strong>: <code class="literal">XamChat</code></li><li class="listitem"><strong class="calibre2">Package name</strong>: <code class="literal">com.yourcompanyname.xamchat</code>; make sure to name future apps beginning with <code class="literal">com.yourcompanyname</code></li><li class="listitem"><strong class="calibre2">Version number</strong>: Just start with the number <code class="literal">1</code></li><li class="listitem"><strong class="calibre2">Version</strong>: This can be any string, but it is recommended to use something that resembles a version number</li><li class="listitem"><strong class="calibre2">Minimum Android version</strong>: Select <strong class="calibre2">Android 4.0.3 (API Level 15)</strong></li><li class="listitem"><strong class="calibre2">Required permissions</strong>: Select <strong class="calibre2">Internet</strong>; we will be using it later</li></ul></div><p class="calibre8">At this point, we need to reference our<a id="id370" class="calibre1"/> shared code from our portable class library we created in <a class="calibre1" title="Chapter 4. XamChat – a Cross-platform App" href="part0036_split_000.html#page">Chapter 4</a>, <em class="calibre12">XamChat – a Cross-platform App</em>. Right-click on the <strong class="calibre2">References</strong> folder for the<a id="id371" class="calibre1"/> project, then click on <strong class="calibre2">Edit References...</strong>, and add a reference to the <code class="literal">XamChat.Core</code> project. You will now be able to access all the shared code that was written in <a class="calibre1" title="Chapter 4. XamChat – a Cross-platform App" href="part0036_split_000.html#page">Chapter 4</a>, <em class="calibre12">XamChat – a Cross-platform App</em>.</p><p class="calibre8">Go to the <code class="literal">Resources</code> directory, and in the <code class="literal">values</code> folder, open <code class="literal">Strings.xml</code>; this is where all the text throughout your Android app should be stored. This is an Android convention that will make it very easy to add multiple languages to your application. Let's change our strings to the following:</p><div><pre class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;resources&gt;
    &lt;string name="ApplicationName"&gt;XamChat&lt;/string&gt;
    &lt;string name="ErrorTitle"&gt;Oops!&lt;/string&gt;
    &lt;string name="Loading"&gt;Loading&lt;/string&gt;
&lt;/resources&gt;</pre></div><p class="calibre8">We'll use these values<a id="id372" class="calibre1"/> later in the chapter. Feel free to add new ones in cases where you display the text to the user. If you need to add more languages, it is very straightforward; you can see the <a id="id373" class="calibre1"/>Android documentation on this subject at <a class="calibre1" href="http://developer.android.com/guide/topics/resources/localization.html">http://developer.android.com/guide/topics/resources/localization.html</a>.</p></div></div></div></div>

<div><div><div><div><div><div><h2 class="title1" id="calibre_pb_3"><a id="ch06lvl2sec23" class="calibre1"/>Creating and implementing the application class</h2></div></div></div><p class="calibre8">Now let's implement<a id="id374" class="calibre1"/> our main application class; add a new <strong class="calibre2">Activity</strong> from the <strong class="calibre2">New File</strong> dialog. We won't be subclassing <code class="literal">Activity</code> in this<a id="id375" class="calibre1"/> file, but this template adds several Android <code class="literal">using</code> statements to the top of the file that imports the<a id="id376" class="calibre1"/> Android APIs to be used within your code. Create a new <code class="literal">Application</code> class where we can register<a id="id377" class="calibre1"/> everything in our <code class="literal">ServiceContainer</code> as follows:</p><div><pre class="programlisting">[Application(Theme = "@android:style/Theme.Holo.Light")]
public class Application : Android.App.Application
{
  public Application(IntPtr javaReference, JniHandleOwnership transfer): base(javaReference, transfer)
  {
  }

  public override void OnCreate()
  {
    base.OnCreate();

    //ViewModels
    ServiceContainer.Register&lt;LoginViewModel&gt;(() =&gt; new LoginViewModel());
    ServiceContainer.Register&lt;FriendViewModel&gt;(() =&gt; new FriendViewModel());
    ServiceContainer.Register&lt;MessageViewModel&gt;(() =&gt; new MessageViewModel());
    ServiceContainer.Register&lt;RegisterViewModel&gt;(() =&gt; new RegisterViewModel());

    //Models
    ServiceContainer.Register&lt;ISettings&gt;(() =&gt; new FakeSettings());
    ServiceContainer.Register&lt;IWebService&gt;(() =&gt; new FakeWebService());
  }
}</pre></div><p class="calibre8">We used the built-in Android theme, <code class="literal">Theme.Holo.Light</code>, just because it is a neat theme that matches the default style we used on iOS. Note the strange, empty constructor we have to create for this class to function. This is a current requirement of a custom <code class="literal">Application</code> class in Xamarin. You can just recognize this as boilerplate code, and you will need to add this<a id="id378" class="calibre1"/> in this case.</p><p class="calibre8">Now let's<a id="id379" class="calibre1"/> implement a simple base class for all the activities throughout our app. Create an <code class="literal">Activities</code> folder in the <code class="literal">XamChat.Droid</code> project and a new file named<a id="id380" class="calibre1"/> <code class="literal">BaseActivity.cs</code> with the following content:</p><div><pre class="programlisting">[Activity]
public class BaseActivity&lt;TViewModel&gt; : Activitywhere TViewModel : BaseViewModel
{
  protected readonly TViewModel viewModel;
  protected ProgressDialog progress;

  public BaseActivity()
  {
    viewModel = ServiceContainer.Resolve(typeof(TViewModel)) asTViewModel;
  }
  protected override void OnCreate(Bundle bundle)
  {
    base.OnCreate(bundle);
    progress = new ProgressDialog(this);
    progress.SetCancelable(false);progress.SetTitle(Resource.String.Loading);}
  protected override void OnResume()
  {
    base.OnResume();
    viewModel.IsBusyChanged += OnIsBusyChanged;
  }
  protected override void OnPause()
  {
    base.OnPause();
    viewModel.IsBusyChanged -= OnIsBusyChanged;
  }
  void OnIsBusyChanged (object sender, EventArgs e)
  {
    if (viewModel.IsBusy)
      progress.Show();
    else
      progress.Hide();
  }
}</pre></div><p class="calibre8">We did several things here to simplify the development of our other activities. First, we made this class<a id="id381" class="calibre1"/> generic, and made a protected variable named <code class="literal">viewModel</code> to store a ViewModel of a specific type. Note that we did not use generics on controllers in iOS due to platform<a id="id382" class="calibre1"/> limitations (see more on Xamarin's documentation website at <a class="calibre1" href="http://docs.xamarin.com/guides/ios/advanced_topics/limitations/">http://docs.xamarin.com/guides/ios/advanced_topics/limitations/</a>). We also implemented <code class="literal">IsBusyChanged</code>, and displayed a simple<a id="id383" class="calibre1"/> <code class="literal">ProgressDialog</code> function with the <code class="literal">Loading</code> string from the<a id="id384" class="calibre1"/> <code class="literal">Strings.xml</code> file to indicate the network activity.</p><p class="calibre8">Let's add one more method to display errors to the user, as follows:</p><div><pre class="programlisting">protected void DisplayError(Exception exc)
{
  string error = exc.Message;
  new AlertDialog.Builder(this)
  .SetTitle(Resource.String.ErrorTitle) 
  .SetMessage(error)
  .SetPositiveButton(Android.Resource.String.Ok,(IDialogInterfaceOnClickListener)null)
  .Show();
}</pre></div><p class="calibre8">This method will display a pop-up dialog indicating that something went wrong. Notice that we also used <code class="literal">ErrorTitle</code> and the built-in Android resource for an <code class="literal">Ok</code> string.</p><p class="calibre8">This will complete the core setup for our Android application. From here, we can move on to implement the UI for the screens throughout our app.</p></div></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec45" class="calibre1"/>Adding a login screen</h1></div></div></div><p class="calibre8">Before creating Android views, it is important to know the different layouts or view group types available in Android. iOS does not have an equivalent for some of these because iOS has a <a id="id385" class="calibre1"/>very small variation of screen sizes on its devices. Since Android has virtually infinite screen sizes and densities, the Android SDK has a lot of built-in support for auto-sizing and layout for views.</p></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_1"><a id="ch06lvl2sec24" class="calibre1"/>Layouts and ViewGroups in Andorid</h2></div></div></div><p class="calibre8">The following are the<a id="id386" class="calibre1"/> common types of layouts:</p><div><ul class="itemizedlist"><li class="listitem"><code class="literal">ViewGroup</code>: This<a id="id387" class="calibre1"/> is the base class for a view that contains a collection of child views. You normally<a id="id388" class="calibre1"/> won't use this class directly.</li><li class="listitem"><code class="literal">LinearLayout</code>: This is a layout that positions its child views in rows or columns (but not both). You <a id="id389" class="calibre1"/>can also set weights on each<a id="id390" class="calibre1"/> child to have them span different percentages of the available space.</li><li class="listitem"><code class="literal">RelativeLayout</code>: This is a layout <a id="id391" class="calibre1"/>that gives much more flexibility on the position of its children. You can position child views <a id="id392" class="calibre1"/>relative to each other so that they are above, below, to the left, or to the right of one another.</li><li class="listitem"><code class="literal">FrameLayout</code>: This layout<a id="id393" class="calibre1"/> positions its child views directly on top of one another<a id="id394" class="calibre1"/> in the <strong class="calibre2">z order</strong> on the screen. This layout is<a id="id395" class="calibre1"/> best used for cases where you have a large child view that needs other views on top of it and perhaps docked to one side.</li><li class="listitem"><code class="literal">ListView</code>: This displays <a id="id396" class="calibre1"/>views vertically in a list with the<a id="id397" class="calibre1"/> help of an adapter class that determines the number of child views. It also has support for its children to be selected.</li><li class="listitem"><code class="literal">GridView</code>: This displays<a id="id398" class="calibre1"/> views in rows and columns <a id="id399" class="calibre1"/>within a grid. It also requires the use of an adapter class to supply the number of children.</li></ul></div><p class="calibre8">Before we begin writing the login screen, delete the <code class="literal">Main.axml</code> and <code class="literal">MainActivity.cs</code> files that were created from the Android project template, as they are not useful for this application. Next, create an Android layout file named <code class="literal">Login.axml</code> in the <code class="literal">layout</code> folder of the <code class="literal">Resources</code> directory in your project.</p><p class="calibre8">Now we can start adding functionalities to our Android layout as follows:</p><div><ol class="orderedlist"><li class="listitem" value="1">Double-click on<a id="id400" class="calibre1"/> the <code class="literal">Login.axml</code> file to open the Android designer.</li><li class="listitem" value="2">Drag two <strong class="calibre2">Plain Text</strong> views onto the layout found in the <strong class="calibre2">Text Fields</strong> section.</li><li class="listitem" value="3">In the <strong class="calibre2">Id</strong> field, enter <code class="literal">@+id/username</code> and <code class="literal">@+id/password</code> respectively. This is a step that you will take for any control you want to work with from C# code.</li><li class="listitem" value="4">For the password field, set its <strong class="calibre2">Input Type</strong> property to <code class="literal">textPassword</code>.</li><li class="listitem" value="5">Drag a <strong class="calibre2">Button</strong> onto the layout and set its <strong class="calibre2">Text</strong> property to <code class="literal">Login</code>.</li><li class="listitem" value="6">Set the button's <strong class="calibre2">Id</strong> property to <code class="literal">@+id/login</code>. We will be using this control from code.</li></ol><div></div><p class="calibre8">Your layout will look something like what is shown in the following screenshot when complete:</p><div><img src="img/00047.jpeg" alt="Layouts and ViewGroups in Andorid" class="calibre9"/></div><p class="calibre10"> </p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_2"><a id="ch06lvl2sec25" class="calibre1"/>Implementing the login functionality</h2></div></div></div><p class="calibre8">Now create a new <a id="id401" class="calibre1"/>Android Activity file named <code class="literal">LoginActivity.cs</code> in the <code class="literal">Activites</code> folder we created earlier. We will use this as the main activity that <a id="id402" class="calibre1"/>starts when the application runs. Let's implement the login functionality as follows:</p><div><pre class="programlisting">[Activity(Label = "@string/ApplicationName", MainLauncher = true)]
public class LoginActivity : BaseActivity&lt;LoginViewModel&gt;
{
  EditText username, password;
  Button login;

  protected override void OnCreate(Bundle bundle)
  {
    base.OnCreate(bundle);
    SetContentView(Resource.Layout.Login);
    username = FindViewById&lt;EditText&gt;(Resource.Id.username);
    password = FindViewById&lt;EditText&gt;(Resource.Id.password);
    login = FindViewById&lt;Button&gt;(Resource.Id.login);
    login.Click += OnLogin;
  }
  protected override void OnResume()
  {
    base.OnResume();
    username.Text = password.Text = string.Empty;
  }
  async void OnLogin (object sender, EventArgs e)
  {
    viewModel.Username = username.Text;
    viewModel.Password = password.Text;
    try
    {
      await viewModel.Login();
        //TODO: navigate to a new activity
    }
    catch (Exception exc)
    {
      DisplayError(exc);
    }
  }
}</pre></div><p class="calibre8">Notice that we set <code class="literal">MainLauncher</code> to <code class="literal">true</code> to make this activity the first activity for the application. In some apps, a splash screen is used as the first activity, so keep this in mind if you need to add a splash screen. We also took advantage of the <code class="literal">ApplicationName</code> value and the <code class="literal">BaseActivity</code> class we set up earlier in the chapter. We also overrode <code class="literal">OnResume</code> to clear out the two <code class="literal">EditText</code> controls so that the values are cleared out if you return to the screen.</p><p class="calibre8">Now if you launch the<a id="id403" class="calibre1"/> application, you will be greeted by the login screen we just implemented, as shown in the following screenshot:</p><div><img src="img/00048.jpeg" alt="Implementing the login functionality" class="calibre9"/></div><p class="calibre10"> </p></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec46" class="calibre1"/>Using ListView and BaseAdapter</h1></div></div></div><p class="calibre8">Now let's<a id="id404" class="calibre1"/> implement a conversations list on Android. The Android equivalent of the <code class="literal">UITableView</code> and <code class="literal">UITableViewSource</code> iOS classes are <code class="literal">ListView</code> and <code class="literal">BaseAdapter</code>. There<a id="id405" class="calibre1"/> are parallel concepts for these Android classes, such as implementing abstract methods and recycling cells during scrolling. There are a few different types of adapters used in Android such as <code class="literal">ArrayAdapter</code> or <code class="literal">CursorAdaptor</code>, although <code class="literal">BaseAdapter</code> is generally best suited for simple lists.</p></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_1"><a id="ch06lvl2sec26" class="calibre1"/>Implementing the conversations screen</h2></div></div></div><p class="calibre8">Let's implement our <a id="id406" class="calibre1"/>conversations screen. Let's begin by making a new Android Activity in your <code class="literal">Activities</code> folder named <code class="literal">ConversationsActivity.cs</code>. Let's start with only a couple of changes to the class definition as follows:</p><div><pre class="programlisting">[Activity(Label = "Conversations")]
public class ConversationsActivity :BaseActivity&lt;MessageViewModel&gt;
{
  //Other code here later
}</pre></div><p class="calibre8">Perform the following steps to<a id="id407" class="calibre1"/> implement a couple of Android layouts:</p><div><ol class="orderedlist"><li class="listitem" value="1">Create a new Android layout in the <code class="literal">layout</code> folder of the <code class="literal">Resources</code> directory named <code class="literal">Conversations.axml</code>.</li><li class="listitem" value="2">Drag a <strong class="calibre2">ListView</strong> control from <strong class="calibre2">Toolbox</strong> onto the layout, and set its <strong class="calibre2">Id</strong> to <code class="literal">@+id/conversationsList</code>.</li><li class="listitem" value="3">Create a second Android layout in the <code class="literal">layout</code> folder in the <code class="literal">Resources</code> directory named <code class="literal">ConversationListItem.axml</code>.</li><li class="listitem" value="4">Drag a <strong class="calibre2">Text (Medium)</strong> and a <strong class="calibre2">Text (Small)</strong> control onto the layout from the <strong class="calibre2">Toolbox</strong> pane.</li><li class="listitem" value="5">Set their IDs to <code class="literal">@+id/conversationUsername</code> and <code class="literal">@+id/conversationLastMessage</code>.</li><li class="listitem" value="6">Finally, let's set each of their <strong class="calibre2">Margins</strong> to <code class="literal">3dp</code> in the <strong class="calibre2">Layout</strong> tab of the <strong class="calibre2">Properties</strong> box.</li></ol><div></div><p class="calibre8">This will set up all the layout files we'll need to use throughout the conversations screen. Your <a id="id408" class="calibre1"/><code class="literal">ConversationListItem.axml</code> layout will look something like what's shown in the following screenshot:</p><div><img src="img/00049.jpeg" alt="Implementing the conversations screen" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">Now we can<a id="id409" class="calibre1"/> implement <code class="literal">BaseAdapter</code> as a nested class inside <code class="literal">ConversationsActivity</code><a id="id410" class="calibre1"/> as follows:</p><div><pre class="programlisting">class Adapter : BaseAdapter&lt;Conversation&gt;
{
  readonly MessageViewModel messageViewModel = ServiceContainer.Resolve&lt;MessageViewModel&gt;();
  readonly LayoutInflater inflater;

  public Adapter(Context context)
  {
    inflater = (LayoutInflater)context.GetSystemService (Context.LayoutInflaterService);
  }
  public override long GetItemId(int position)
  {
    //This is an abstract method, just a simple implementation
    return position;
  }
  public override View GetView(int position, View convertView, ViewGroup parent)
  {
    if (convertView == null)
    {
      convertView = inflater.Inflate (Resource.Layout.ConversationListItem, null);
    }
    var conversation = this [position];
    var username = convertView.FindViewById&lt;TextView&gt;(Resource.Id.conversationUsername);
    var lastMessage = convertView.FindViewById&lt;TextView&gt;(Resource.Id.conversationLastMessage);
    username.Text = conversation.Username;
    lastMessage.Text = conversation.LastMessage;
    return convertView;
  }
  public override int Count
  {
    get { return messageViewModel.Conversations == null ? 0: messageViewModel.Conversations.Length; }
  }
  public override Conversation this[int index]
  {
    get { return messageViewModel.Conversations [index]; }
  }
}</pre></div><p class="calibre8">The following<a id="id411" class="calibre1"/> is a review of what is going on inside the adapter:</p><div><ol class="orderedlist"><li class="listitem" value="1">We subclassed <code class="literal">BaseAdapter&lt;Conversation&gt;</code>.</li><li class="listitem" value="2">We passed in <code class="literal">Context</code> (our activity) so that we can pull out <code class="literal">LayoutInflater</code>. This class enables you to load XML layout resources and inflate them into a view object.</li><li class="listitem" value="3">We implemented <a id="id412" class="calibre1"/><code class="literal">GetItemId</code>. This is a general method used to identify rows, but we just returned the position for now.</li><li class="listitem" value="4">We set up <code class="literal">GetView</code>, which recycles the <code class="literal">convertView</code> variable by only creating a new view if it is null. We also pulled out the text views in our layout to set their text.</li><li class="listitem" value="5">We overrode <code class="literal">Count</code> to return the number of conversations.</li><li class="listitem" value="6">We implemented an indexer to return a <code class="literal">Conversation</code> object for a position.</li></ol><div></div><p class="calibre8">Overall, this should be fairly similar to what we did on iOS.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_2"><a id="ch06lvl2sec27" class="calibre1"/>Setting up the adapter</h2></div></div></div><p class="calibre8">Now let's set up the<a id="id413" class="calibre1"/> adapter in our activity by adding the following to the body of <code class="literal">ConversationsActivity</code>:</p><div><pre class="programlisting">ListView listView;
Adapter adapter;

protected override void OnCreate(Bundle bundle)
{
  base.OnCreate(bundle);
  SetContentView(Resource.Layout.Conversations);
  listView = FindViewById&lt;ListView&gt;(Resource.Id.conversationsList);
  listView.Adapter = adapter = new Adapter(this);
}
protected async override void OnResume()
{
  base.OnResume();
  try
  {
    await viewModel.GetConversations();
    adapter.NotifyDataSetInvalidated();
  }
  catch (Exception exc)
  {
    DisplayError(exc);
  }
}</pre></div><p class="calibre8">This code will set up the adapter and reload our list of conversations when the activity appears on the screen. Note<a id="id414" class="calibre1"/> that we called <code class="literal">NotifyDataSetInvalidated</code> here so that <code class="literal">ListView</code> reloads its rows after the number of conversations has been updated. This is parallel to what we did on iOS by calling the <code class="literal">UITableView's</code> <code class="literal">ReloadData</code> method.</p><p class="calibre8">Last but not least, we need to modify the <code class="literal">OnLogin</code> method we set up earlier in <code class="literal">LoginActivity</code> to start our new activity as follows:</p><div><pre class="programlisting">StartActivity(typeof(ConversationsActivity));</pre></div><p class="calibre8">Now if we compile and run our application, we can navigate to a conversations list after logging in, as shown in the following screenshot:</p><div><img src="img/00050.jpeg" alt="Setting up the adapter" class="calibre9"/></div><p class="calibre10"> </p></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec47" class="calibre1"/>Implementing the friends list</h1></div></div></div><p class="calibre8">Before we start implementing<a id="id415" class="calibre1"/> the friends list screen, we must first add a menu item to <code class="literal">ActionBar</code> in our application. Let's begin by creating a new <code class="literal">menu</code> folder within the <code class="literal">Resources</code> folder of our project. Next, create a new Android layout file named <code class="literal">ConversationsMenu.axml</code>. Remove the default layout created by XML, and replace it with the following:</p><div><pre class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;menu &gt;
  &lt;item android:id="@+id/addFriendMenu"android:icon="@android:drawable/ic_menu_add"android:showAsAction="ifRoom"/&gt;
&lt;/menu&gt;</pre></div><p class="calibre8">We set up a root menu with one menu item inside it.</p><p class="calibre8">The following is a breakdown of what we set for the item in XML:</p><div><ul class="itemizedlist"><li class="listitem"><code class="literal">android:id</code>: We will use this later in C# to reference the menu item with <code class="literal">Resource.Id.addFriendMenu</code>.</li><li class="listitem"><code class="literal">android:icon</code>: This is an image resource used to display the menu item. We used a built-in Android one for a generic <em class="calibre12">plus</em> icon.</li><li class="listitem"><code class="literal">android:showAsAction</code>: This will make the menu item visible if there is room for the item. If for some reason the device's screen is too narrow, an overflow menu would be displayed for the menu item.</li></ul></div><p class="calibre8">Now we can make<a id="id416" class="calibre1"/> some changes in <code class="literal">ConversationsActivity.cs</code> to display the menu item as follows:</p><div><pre class="programlisting">public override bool OnCreateOptionsMenu(IMenu menu)
{
  MenuInflater.Inflate(Resource.Menu.ConversationsMenu, menu);
  return base.OnCreateOptionsMenu(menu);
}</pre></div><p class="calibre8">This code will take our layout and apply it to the menu at the top in our activity's action bar. Next, we can add some code to be run when the menu item is selected as follows:</p><div><pre class="programlisting">public override bool OnOptionsItemSelected(IMenuItem item)
{
  if (item.ItemId == Resource.Id.addFriendMenu)
  {
    //TODO: launch the next activity
  }
  return base.OnOptionsItemSelected(item);
}</pre></div><p class="calibre8">Now let's implement the next activity. Let's begin by making a copy of <code class="literal">Conversations.axml</code> found in the <code class="literal">layout</code> folder in the <code class="literal">Resources</code> directory and rename it <code class="literal">Friends.axml</code>. The only change we'll make in this file will be to rename the ListView's ID to <code class="literal">@+id/friendsList</code>.</p><p class="calibre8">Next, perform the following steps to create a layout that can be used for the list items in <code class="literal">ListView</code>:</p><div><ol class="orderedlist"><li class="listitem" value="1">Make a new Android layout called <code class="literal">FriendListItem.axml</code>.</li><li class="listitem" value="2">Open the layout and switch to the <strong class="calibre2">Source</strong> tab found at the bottom of the screen.</li><li class="listitem" value="3">Change the root <code class="literal">LinearLayout</code> XML element to a <code class="literal">RelativeLayout</code> element.</li><li class="listitem" value="4">Switch back to the <strong class="calibre2">Content</strong> tab found at the bottom of the screen.</li><li class="listitem" value="5">Drag a <strong class="calibre2">Text (Large)</strong> control from the <strong class="calibre2">Toolbox</strong> pane onto the layout and set its <strong class="calibre2">Id</strong> to <code class="literal">@+id/friendName</code>.</li><li class="listitem" value="6">Drag an <strong class="calibre2">ImageView</strong> control from the <strong class="calibre2">Toolbox</strong> pane onto the layout; you can either let its <strong class="calibre2">Id</strong> be its default value or blank it out.</li><li class="listitem" value="7">Change the image view's image to <code class="literal">@android:drawable/ic_menu_add</code>. This is the same plus icon we used earlier in the chapter. You can select it from the <strong class="calibre2">Resources</strong> dialog under the <strong class="calibre2">Framework Resources</strong> tab.</li><li class="listitem" value="8">Set the <strong class="calibre2">Width</strong> and <strong class="calibre2">Height</strong> of both the controls to <code class="literal">wrap_content</code>. This is found under the <strong class="calibre2">Layout</strong> tab under the <strong class="calibre2">ViewGroup</strong> section.</li><li class="listitem" value="9">Next, check the value for <strong class="calibre2">Align Parent Right</strong> on just the image view.</li><li class="listitem" value="10">Finally, set the <strong class="calibre2">Margins</strong> of both the controls to <code class="literal">3dp</code> in the <strong class="calibre2">Layout</strong> tab of the <strong class="calibre2">Properties</strong> <a id="id417" class="calibre1"/>box.</li></ol><div></div><p class="calibre8">Using the Xamarin designer can be very productive, but some developers prefer a higher level of control. You might consider writing the XML code yourself as an alternative, which is fairly straightforward, as shown in the following code:</p><div><pre class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout 
android:layout_width="fill_parent"
android:layout_height="fill_parent"&gt;
  &lt;TextView android:text="Large Text"
  android:textAppearance="?android:attr/textAppearanceLarge"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:id="@+id/friendName"
  android:layout_margin="3dp" /&gt;
  &lt;ImageView 
  android:src="img/ic_menu_add" 
  android:layout_alignParentRight="true" 
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_margin="3dp" /&gt;
&lt;/RelativeLayout&gt;</pre></div><p class="calibre8">Since we now have all the layouts we need for the new screen, let's create an Android Activity in the <code class="literal">Activities</code> folder named <code class="literal">FriendsActivity.cs</code>. Let's create the basic definition of the <a id="id418" class="calibre1"/>activity as follows, just like we did before:</p><div><pre class="programlisting">[Activity(Label = "Friends")]
public class FriendsActivity : BaseActivity&lt;FriendViewModel&gt;
{
  protected override void OnCreate(Bundle bundle)
  {
    base.OnCreate(bundle);
  }
}</pre></div><p class="calibre8">Now, let's implement a nested <code class="literal">Adapter</code> class to set up the list view items as follows:</p><div><pre class="programlisting">class Adapter : BaseAdapter&lt;User&gt;
{
  readonly FriendViewModel friendViewModel = ServiceContainer.Resolve&lt;FriendViewModel&gt;();
  readonly LayoutInflater inflater;

  public Adapter(Context context)
  {
    inflater = (LayoutInflater)context.GetSystemService (Context.LayoutInflaterService);
  }
  public override long GetItemId(int position)
  {
    return position;
  }
  public override View GetView(int position, View convertView, ViewGroup parent)
  {
    if (convertView == null)
    {
      convertView = inflater.Inflate(Resource.Layout.FriendListItem, null);
    }
    var friend = this [position];
    var friendname = convertView.FindViewById&lt;TextView&gt;(Resource.Id.friendName);
    friendname.Text = friend.Username;
    return convertView;
  }
  public override int Count
  {
    get { return friendViewModel.Friends == null ? 0: friendViewModel.Friends.Length; }
  }
  public override User this[int index]
  {
    get { return friendViewModel.Friends [index]; }
  }
}</pre></div><p class="calibre8">There is really no<a id="id419" class="calibre1"/> difference in this adapter and the previous one we implemented for the conversations screen. We only have to set the friend's name, and we use the <code class="literal">User</code> object instead of the <code class="literal">Conversation</code> object.</p><p class="calibre8">To finish setting up the adapter, we can update the body of the <code class="literal">FriendsActivity</code> class as follows:</p><div><pre class="programlisting">ListView listView;
Adapter adapter;

protected override void OnCreate(Bundle bundle)
{
  base.OnCreate(bundle);
  SetContentView(Resource.Layout.Friends);
  listView = FindViewById&lt;ListView&gt;(Resource.Id.friendsList);
  listView.Adapter = adapter = new Adapter(this);
}
protected async override void OnResume()
{
  base.OnResume();
  try
  {
    await viewModel.GetFriends();
    adapter.NotifyDataSetInvalidated();
  }
  catch (Exception exc)
  {
    DisplayError(exc);
  }
}</pre></div><p class="calibre8">Last but not least, we can update <code class="literal">OnOptionsItemSelected</code> in the <code class="literal">ConversationsActivity</code> class as follows:</p><div><pre class="programlisting">public override bool OnOptionsItemSelected(IMenuItem item)
{
  if (item.ItemId == Resource.Id.addFriendMenu)
  {
    StartActivity(typeof(FriendsActivity));
  }
  return base.OnOptionsItemSelected(item);
}</pre></div><p class="calibre8">So, if we compile<a id="id420" class="calibre1"/> and run the application, we can navigate to a fully implemented friends list screen, as shown in the following screenshot:</p><div><img src="img/00051.jpeg" alt="Implementing the friends list" class="calibre9"/></div><p class="calibre10"> </p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec48" class="calibre1"/>Composing messages</h1></div></div></div><p class="calibre8">The next screen is a bit more complicated. We will need to create a <code class="literal">ListView</code> that uses multiple layout files <a id="id421" class="calibre1"/>for each row, depending on the type of the row. We'll also need to perform some layout tricks to place a view below the <code class="literal">ListView</code> and set up the <code class="literal">ListView</code> to autoscroll.</p><p class="calibre8">For the next screen, let's begin by creating a new layout named <code class="literal">Messages.axml</code> in the <code class="literal">layout</code> folder of the <code class="literal">Resources</code> directory and then perform the following steps:</p><div><ol class="orderedlist"><li class="listitem" value="1">Drag a new <strong class="calibre2">ListView</strong> onto the layout. Set its <strong class="calibre2">Id</strong> to <code class="literal">@+id/messageList</code>.</li><li class="listitem" value="2">Check the box for <strong class="calibre2">Stack From Bottom</strong>, and set <strong class="calibre2">Transcript Mode</strong> to <code class="literal">alwaysScroll</code>. This will set it up in order to display items from the bottom up.</li><li class="listitem" value="3">Set the <strong class="calibre2">Weight</strong> value to <code class="literal">1</code> for the <strong class="calibre2">ListView</strong> in the <strong class="calibre2">Layout</strong> tab under the <strong class="calibre2">LinearLayout</strong> section.</li><li class="listitem" value="4">Drag a new <strong class="calibre2">RelativeLayout</strong> onto the layout. Let its <strong class="calibre2">Id</strong> be the default value, or remove it.</li><li class="listitem" value="5">Drag a new <strong class="calibre2">Button</strong> inside <strong class="calibre2">RelativeLayout</strong>. Set its <strong class="calibre2">Id</strong> to <code class="literal">@+id/sendButton</code>.</li><li class="listitem" value="6">Check the box for <strong class="calibre2">Align Parent Right</strong> in the <strong class="calibre2">Layout</strong> tab.</li><li class="listitem" value="7">Drag a new <strong class="calibre2">Plain Text</strong> found in the <strong class="calibre2">Text Field</strong> section inside <strong class="calibre2">RelativeLayout</strong> to the left of the button. Set its <strong class="calibre2">Id</strong> to <code class="literal">@+id/messageText</code>.</li><li class="listitem" value="8">In the <strong class="calibre2">Layout</strong> tab, set <strong class="calibre2">To Left Of</strong> to <code class="literal">@+id/sendButton</code>, and set its <strong class="calibre2">Width</strong> to <code class="literal">match_parent</code>.</li><li class="listitem" value="9">Check the box for <strong class="calibre2">Center in Parent</strong> to fix the vertical centering.</li></ol><div></div><p class="calibre8">When completed, the<a id="id422" class="calibre1"/> XML file will be as follows:</p><div><pre class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
  
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent"&gt;
  &lt;ListView
    android:minWidth="25px"
    android:minHeight="25px"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/messageList"
    android:layout_weight="1"
    android:stackFromBottom="true"
    android:transcriptMode="alwaysScroll" /&gt;
  &lt;RelativeLayout
  android:minWidth="25px"
  android:minHeight="25px"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"&gt;
  &lt;Button
    android:text="Send"
    android:layout_alignParentRight="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/sendButton" /&gt;
  &lt;EditText
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@id/sendButton"
    android:layout_centerInParent="true"
    android:id="@+id/messageText" /&gt;
  &lt;/RelativeLayout&gt;
&lt;/LinearLayout&gt;
</pre></div><p class="calibre8">Next, perform the following steps to make two more Android layouts:</p><div><ol class="orderedlist"><li class="listitem" value="1">Create a new layout named <code class="literal">MyMessageListItem.axml</code> in the <code class="literal">layout</code> folder of the <code class="literal">Resources</code> directory.</li><li class="listitem" value="2">Open the layout and switch to the <strong class="calibre2">Source</strong> tab. Change the root XML element to a <code class="literal">RelativeLayout</code> element.</li><li class="listitem" value="3">Switch back to the <strong class="calibre2">Content</strong> tab, and drag two <strong class="calibre2">TextView</strong> controls onto the layout.</li><li class="listitem" value="4">In the <strong class="calibre2">Id</strong> field, enter <code class="literal">@+id/myMessageText</code> and <code class="literal">@+id/myMessageDate</code> respectively.</li><li class="listitem" value="5">For both<a id="id423" class="calibre1"/> the views, set <strong class="calibre2">Margin</strong> to <code class="literal">3dp</code>, and <strong class="calibre2">Width</strong> and <strong class="calibre2">Height</strong> to <code class="literal">wrap_content</code>.</li><li class="listitem" value="6">For the first TextView, set its <strong class="calibre2">Color</strong> to <code class="literal">@android:color/holo_blue_bright</code> under the <strong class="calibre2">Style</strong> tab.</li><li class="listitem" value="7">For the second TextView, check the <strong class="calibre2">Align Parent Right</strong> checkbox under the <strong class="calibre2">Layout</strong> tab.</li><li class="listitem" value="8">Create a new layout named <code class="literal">TheirMessageListItem.axml</code> and repeat the process. Select a different color for the first TextView in the new layout.</li></ol><div></div><p class="calibre8">Finally, we'll need to create a new activity for the screen. Create a new Android Activity named <code class="literal">MessagesActivity.cs</code> in the <code class="literal">Activities</code> directory. Let's begin with the standard code to set up an activity as follows:</p><div><pre class="programlisting">[Activity(Label = "Messages")]
public class MessagesActivity : BaseActivity&lt;MessageViewModel&gt;
{
  protected override void OnCreate(Bundle bundle)
  {
    base.OnCreate(bundle);
  }
}</pre></div><p class="calibre8">Next, let's implement a more<a id="id424" class="calibre1"/> complicated adapter than what we implemented earlier as follows:</p><div><pre class="programlisting">class Adapter : BaseAdapter&lt;Message&gt;
{
  readonly MessageViewModel messageViewModel = ServiceContainer.Resolve&lt;MessageViewModel&gt;();
  readonly ISettings settings = ServiceContainer.Resolve&lt;ISettings&gt;();
  readonly LayoutInflater inflater;
  const int MyMessageType = 0, TheirMessageType = 1;

  public Adapter (Context context)
  {
    inflater = (LayoutInflater)context.GetSystemService (Context.LayoutInflaterService);
  }
  public override long GetItemId(int position)
  {
    return position;
  }
  public override int Count
  {
    get { return messageViewModel.Messages == null ? 0: messageViewModel.Messages.Length; }
  }
  public override Message this[int index]
  {
    get { return messageViewModel.Messages [index]; }
  }
  public override int ViewTypeCount
  {
    get { return 2; }
  }
  public override int GetItemViewType(int position)
  {
    var message = this [position];
    return message.UserId == settings.User.Id ?MyMessageType : TheirMessageType;
  }
}</pre></div><p class="calibre8">This includes everything except our implementation of <code class="literal">GetView</code>, which we'll get to shortly. Here, the first changes are some constants for <code class="literal">MyMessageType</code> and <code class="literal">TheirMessageType</code>. We then implemented <code class="literal">ViewTypeCount</code> and <code class="literal">GetItemViewType</code>. This is Android's mechanism for using two different layouts for list items in a list view. We use one type of layout<a id="id425" class="calibre1"/> for the user's messages and a different one for the other user in the conversation.</p><p class="calibre8">Next, let's implement <code class="literal">GetView</code> as follows:</p><div><pre class="programlisting">public override View GetView(int position, View convertView, ViewGroup parent)
{
  var message = this [position];
  int type = GetItemViewType(position);
  if (convertView == null)
  {
    if (type == MyMessageType)
    {
      convertView = inflater.Inflate(Resource.Layout.MyMessageListItem, null);
    }
    else
    {
      convertView = inflater.Inflate(Resource.Layout.TheirMessageListItem, null);
    }
  }
  TextView messageText, dateText;
  if (type == MyMessageType)
  {
    messageText = convertView.FindViewById&lt;TextView&gt;(Resource.Id.myMessageText);
    dateText = convertView.FindViewById&lt;TextView&gt;(Resource.Id.myMessageDate);
  }
  else
  {
    messageText = convertView.FindViewById&lt;TextView&gt;(Resource.Id.theirMessageText);
    dateText = convertView.FindViewById&lt;TextView&gt;(Resource.Id.theirMessageDate);
    }
  messageText.Text = message.Text;
  dateText.Text = message.Date.ToString("MM/dd/yy HH:mm");
  return convertView;
}</pre></div><p class="calibre8">Let's break down our implementation through the following steps:</p><div><ol class="orderedlist"><li class="listitem" value="1">We first pull out the <code class="literal">message</code> object for the position of the row.</li><li class="listitem" value="2">Next, we grab the view type that determines whether it is the current user's message or the other user in the conversation.</li><li class="listitem" value="3">If <code class="literal">convertView</code> is <code class="literal">null</code>, we inflate the appropriate layout based on the type.</li><li class="listitem" value="4">Next, we pull the two text views, <code class="literal">messageText</code> and <code class="literal">dateText</code>, out of the <code class="literal">convertView</code>. We have to use the type value to make sure that we use the correct resource IDs.</li><li class="listitem" value="5">We set the appropriate text on both the text views using the <code class="literal">message</code> object.</li><li class="listitem" value="6">We return <code class="literal">convertView</code>.</li></ol><div></div><p class="calibre8">Now let's finish<a id="id426" class="calibre1"/> <code class="literal">MessagesActivity</code> by setting up the rest of the adapter. First, let's implement some member variables and the <code class="literal">OnCreate</code> method as follows:</p><div><pre class="programlisting">ListView listView;
EditText messageText;
Button sendButton;
Adapter adapter;

protected override void OnCreate(Bundle bundle)
{
  base.OnCreate(bundle);

  Title = viewModel.Conversation.Username;
  SetContentView(Resource.Layout.Messages);
  listView = FindViewById&lt;ListView&gt;(Resource.Id.messageList);
  messageText = FindViewById&lt;EditText&gt;(Resource.Id.messageText);
  sendButton = FindViewById&lt;Button&gt;(Resource.Id.sendButton);

  listView.Adapter = adapter = new Adapter(this);

  sendButton.Click += async (sender, e) =&gt;
  {
    viewModel.Text = messageText.Text;
    try
    {
      await viewModel.SendMessage();
      messageText.Text = string.Empty;
      adapter.NotifyDataSetInvalidated();
      listView.SetSelection(adapter.Count);
    }
    catch (Exception exc)
    {
      DisplayError(exc);
    }
  };
}</pre></div><p class="calibre8">So far this activity is fairly standard compared to our previous activities in this chapter. We also had to wire up the <code class="literal">Click</code> event of <code class="literal">sendButton</code> in <code class="literal">OnCreate</code> so that it sends the message and<a id="id427" class="calibre1"/> refreshes the list. We also used a trick to scroll the list view to the end by setting its selection to the last item.</p><p class="calibre8">Next, we'll need to implement <code class="literal">OnResume</code> to load the messages, invalidate the adapter, and then scroll the list view to the end as follows:</p><div><pre class="programlisting">protected async override void OnResume()
{
  base.OnResume();
  try
  {
    await viewModel.GetMessages();
    adapter.NotifyDataSetInvalidated();
    listView.SetSelection(adapter.Count);
  }
  catch (Exception exc)
  {
    DisplayError(exc);
  }
}</pre></div><p class="calibre8">So finally, if you compile and run the app, you will be able to navigate to the messages screen, and add new messages to the list, as shown in the following screenshot:</p><div><img src="img/00052.jpeg" alt="Composing messages" class="calibre9"/></div><p class="calibre10"> </p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec49" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">In this chapter, we started out by going over the basic settings in the Android Manifest file. Next, we implemented a custom <code class="literal">Application</code> class to set up our <code class="literal">ServiceContainer</code>. We then went over the different types of Android layouts and implemented a login screen using native Android views. We implemented the friends list screen, and learned about the basics of <code class="literal">ListView</code> and adapters. Finally, we implemented the messages screen, and used the more advanced functionality available in list view adapters and layouts.</p><p class="calibre8">After completing this chapter, you will have a partially functional Android version of XamChat. You will have gained a deeper understanding of the Android SDK and tools. You should be confident in developing your own Android applications using Xamarin. Take it upon yourself to implement the remaining screens that we did not cover in the chapter. If you get lost, feel free to review the full sample application included with this book. In the next chapter, we'll cover how to deploy to mobile devices and why is it very important to test your applications on real devices.</p></div></body></html>