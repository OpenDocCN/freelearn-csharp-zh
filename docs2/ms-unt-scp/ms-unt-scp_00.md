# 前言

*精通 Unity 脚本编写*是对使用 Unity 中的 C#进行游戏脚本编写的一些高级、非常规和强大方法的简洁且专注的探索。这使得这本书在当前非常重要，因为尽管存在大量的“入门”文献和教程，但关于更高级主题的讨论相对较少，且形式结构化。本书假设你已经熟悉 Unity 的基础知识，例如资产导入、关卡设计、光照贴图和 C#或 JavaScript 中的基本脚本编写。从一开始，它就研究如何将脚本创造性地应用于实现更复杂的目标的实际案例研究和示例，包括调试、人工智能、定制渲染、编辑器扩展、动画和运动等主题。本书的核心目的不是在理论层面展示抽象原理和技巧，而是展示理论如何在现实世界的例子中得到应用，帮助你最大限度地发挥编程知识，构建不仅能够工作而且能够优化工作的坚实游戏。为了最大限度地利用这本书，请按顺序从开头到结尾阅读每一章，并在阅读时保持一种普遍和抽象的心态。也就是说，将每一章视为一个特定例子和演示，这些例子和演示展示了跨越时间和空间的更普遍原则；你可以从我在特定上下文中使用的具体环境中提取这些原则，并在其他地方重新部署以满足你的需求。简而言之，将这里的知识不仅视为与我选择的特定例子和案例研究相关，而且认为它与你的项目高度相关。那么，让我们开始吧。

# 本书涵盖的内容

第一章，*Unity C# 快速回顾*，以非常简短的方式总结了 C#和 Unity 中的脚本编写基础知识。它并不旨在成为基础知识的完整或全面指南。相反，它旨在为那些以前学习过基础知识但可能已经有一段时间没有编写脚本，并且希望在开始后续章节之前快速回顾的人提供复习课程。如果你对脚本编写的基础知识（如类、继承、属性和多态）感到舒适，那么你可能可以跳过这一章。

第二章，*调试*，深入探讨了调试。能够编写坚实有效的代码部分取决于你发现并成功修复错误的能力，这些错误在它们发生时出现。这使得调试成为一项关键技能。本章不仅将探讨基础知识，还将通过 MonoDevelop 界面深入了解调试，并建立一个有用的错误记录系统。

第三章，*单例、静态、游戏对象和世界*，探讨了访问、更改和管理游戏对象的广泛功能。具体来说，我们将看到用于构建全局和持久对象的单例设计模式，以及许多其他用于搜索、列出、排序和排列对象的技巧。在 Unity 中，脚本依赖于在统一的游戏世界或坐标系中操作对象，以实现令人信服的结果。

第四章，*事件驱动编程*，将事件驱动编程视为重新构思游戏架构以进行优化的重要途径。通过将繁重的工作负载从更新和频繁的事件转移到事件驱动系统中，我们将为完成其他任务释放大量宝贵的处理时间。

第五章，*摄像机、渲染和场景*，深入探讨了如何工作摄像机，不仅从表面上看，而且如何深入其架构并自定义其渲染输出。我们将探索视锥体测试、剔除问题、视线、正交投影、深度和层级、后期处理效果等。

第六章，*使用 Mono*，概述了庞大的 Mono 库及其一些最有用的类，从字典、列表和堆栈到其他功能，如字符串、正则表达式和 Linq。到本章结束时，你将更好地定位自己，能够快速有效地处理大量数据。

第七章，*人工智能*，成功地将之前涵盖的所有内容应用于一个单一的示例项目中，该项目考虑了人工智能：创建一个聪明的敌人，执行一系列行为，从徘徊、追逐、巡逻、攻击、逃跑和寻找健康加成。在创建这个角色时，我们将涵盖视线问题、近距离检测和路径查找。

第八章，*自定义 Unity 编辑器*，专注于 Unity 编辑器，它在许多方面都功能丰富，但有时你需要或希望它做得更多。本章探讨了如何创建用于自定义编辑器本身的编辑器类，以不同的方式表现并更好地工作。我们将创建自定义检查器属性，甚至创建一个完全功能化的本地化系统，以便无缝地在多种语言之间切换你的游戏。

第九章，*处理纹理、模型和 2D*，探讨了您可以使用 2D 元素（如精灵、纹理和 GUI 元素）做很多事情。即使是 3D 游戏，2D 元素也扮演着重要的角色，在这里我们将探讨一系列 2D 问题，并探索有效且强大的解决方案。

第十章，*源代码控制和其它技巧*，以一般性笔记结束本书。它考虑了广泛的各种各样的技巧和窍门（有用的概念和应用），虽然它们不属于任何特定类别，但整体上却至关重要。我们将看到良好的编码实践、编写清晰代码的技巧、数据序列化、源代码和版本控制集成等等。

# 您需要为此书准备的内容

这本书是一本以 Unity 为重点的书籍，这意味着您只需要一份 Unity 副本。Unity 包含了您跟随本书所需的一切，包括代码编辑器。可以从[`unity3d.com/`](http://unity3d.com/)下载 Unity。Unity 是一个支持两种主要许可证的单个应用程序，免费版和专业版。免费版限制了某些功能的访问，但仍然提供了强大的功能集。一般来说，本书的大多数章节和示例都与免费版兼容，这意味着您通常可以使用免费版跟随。然而，一些章节和示例将需要专业版。

# 这本书面向的对象

这是一本面向熟悉 Unity 基础知识以及脚本基础的学生、教育工作者和专业人士的高级书籍。无论您使用 Unity 的时间长短，或是有经验的用户，这本书都有一些重要且有价值的内容，可以帮助您改进游戏开发工作流程。

# 习惯用法

在本书中，您将找到多种文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称如下所示：“一旦创建，新的脚本文件将在`项目`文件夹内生成，文件扩展名为`.cs`。”

代码块以如下方式设置：

```cs
01 using UnityEngine;
02 using System.Collections;
03 
04 public class MyNewScript : MonoBehaviour 
05 {
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```cs
//We should hide this object if its Y position is above 100 units
bool ShouldHideObject = (transform.position.y > 100) ? true : false;

//Update object visibility
gameObject.SetActive(!ShouldHideObject);
```

**新术语**和**重要词汇**以粗体显示。屏幕上看到的单词，例如在菜单或对话框中，在文本中显示如下：“一种方法是，从应用程序菜单中选择**资产** | **创建** | **C# 脚本**。”

### 注意

警告或重要注意事项如下所示。

### 小贴士

小贴士和技巧看起来像这样。

# 读者反馈

我们欢迎读者的反馈。让我们知道您对这本书的看法——您喜欢或不喜欢什么。读者反馈对我们很重要，因为它帮助我们开发出您真正能从中获得最大收益的标题。

要向我们发送一般反馈，请简单地发送电子邮件至`<feedback@packtpub.com>`，并在邮件主题中提及书籍的标题。

如果您在某个主题上具有专业知识，并且您对撰写或为书籍做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您是 Packt 书籍的骄傲拥有者，我们有多个方面可以帮助您从您的购买中获得最大收益。

## 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)下载您购买的所有 Packt 出版物的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

## 下载本书的颜色图像

我们还为您提供了一个包含本书中使用的截图/图表的颜色图像的 PDF 文件。颜色图像将帮助您更好地理解输出的变化。您可以从：[`www.packtpub.com/sites/default/files/downloads/0655OT_ColoredImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/0655OT_ColoredImages.pdf)下载此文件。

## 勘误

尽管我们已经尽一切努力确保内容的准确性，但错误仍然会发生。如果您在我们的某本书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误****提交****表**链接，并输入您的勘误详情来报告。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站或添加到该标题的勘误部分下的现有勘误列表中。

要查看之前提交的勘误表，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书籍名称。所需信息将在**勘误**部分显示。

## 盗版

互联网上对版权材料的盗版是一个持续存在的问题，涉及所有媒体。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上发现任何形式的我们作品的非法副本，请立即提供位置地址或网站名称，以便我们可以追究补救措施。

请通过链接将疑似盗版材料发送至 `<copyright@packtpub.com>` 与我们联系。

我们感谢您在保护我们作者和我们提供有价值内容的能力方面的帮助。

## 问题

如果您对本书的任何方面有问题，您可以联系 `<questions@packtpub.com>`，我们将尽力解决问题。
