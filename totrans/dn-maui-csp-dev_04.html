<html><head></head><body>
		<div><h1 id="_idParaDest-52" class="chapter-number"><a id="_idTextAnchor054"/>4</h1>
			<h1 id="_idParaDest-53"><a id="_idTextAnchor055"/>MVVM and Controls</h1>
			<p>In <a href="B19723_03.xhtml#_idTextAnchor036"><em class="italic">Chapter 3</em></a>, we examined the fundamentals of .NET MAUI, but our code was in the code-behind files associated with XAML files. It is time, though, to turn our attention to the consensus architecture for .NET MAUI.</p>
			<p><strong class="bold">Model-View-ViewModel</strong> (<strong class="bold">MVVM</strong>) is not a tool or a platform but an architecture. Simply put, it is a way of organizing your code and thinking to optimize the creation of .NET MAUI applications and to facilitate unit testing (see <a href="B19723_09.xhtml#_idTextAnchor160"><em class="italic">Chapter 9</em></a>).</p>
			<p>At its simplest, MVVM consists of three sets of files, that is three namespaces, which essentially means three folders (with subfolders as needed). Taken in turn, <code>Model</code> is the set of classes that define the <em class="italic">shape</em> of your data. This just means that the classes that represent data are held in the model.</p>
			<p><code>View</code> is, in simple words, the page that the user sees.</p>
			<p><code>ViewModel</code> is where all the action happens. It is the set of classes that manage the logic of your program and that contain the <em class="italic">properties</em> that are presented in <code>View</code>. We’ll get into <strong class="bold">ViewModel</strong> (<strong class="bold">VM</strong>) properties as we go.</p>
			<p>In this chapter, we will explore the following topics:</p>
			<ul>
				<li>Setting up MVMM</li>
				<li>Data binding</li>
				<li>Views</li>
				<li>XAML versus C#</li>
				<li>Behaviors</li>
				<li>Popups and dialogs</li>
				<li>Brushes</li>
			</ul>
			<h1 id="_idParaDest-54"><a id="_idTextAnchor056"/>Technical requirements</h1>
			<p>For this chapter, you will need the latest version of Visual Studio (any edition).</p>
			<p>Each chapter in this book is saved as a branch. The code shown in this chapter and the next is in the branch at <a href="https://github.com/PacktPublishing/.NET-MAUI-for-C-Sharp-Developers/tree/MVVMAndControls">https://github.com/PacktPublishing/.NET-MAUI-for-C-Sharp-Developers/tree/MVVMAndControls</a>. If you check out the branch you’ll see where we ended up, but if you want some of the intermediate steps, just examine the commits that contributed to the branch. To follow along, however, check out the branch at <a href="https://github.com/PacktPublishing/.NET-MAUI-for-C-Sharp-Developers/tree/Navigation/tree/XAMLAndCSharp">https://github.com/PacktPublishing/.NET-MAUI-for-C-Sharp-Developers/tree/Navigation/tree/XAMLAndCSharp</a> as the starting point.</p>
			<h1 id="_idParaDest-55"><a id="_idTextAnchor057"/>Setting up for MVVM</h1>
			<p>MVVM is as much <a id="_idIndexMarker067"/>a way to organize your files and folders as it is an architectural approach. To get started using MVVM we’ll do two things:</p>
			<ol>
				<li>Create the folders.</li>
				<li>Download the associated Community Toolkits.</li>
			</ol>
			<h2 id="_idParaDest-56"><a id="_idTextAnchor058"/>Creating folders</h2>
			<p>We will be creating three folders. Before I tell you the names of these folders, I should say there is some disagreement<a id="_idIndexMarker068"/> about what exactly to name them. <em class="italic">Table 4.1</em> shows the folder names and their alternatives:</p>
			<table id="table001-1" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="bold">Name </strong><strong class="bold">we’ll use</strong></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold">Alternative 1</strong></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold">Alternative 2</strong></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><code>Model</code></p>
						</td>
						<td class="No-Table-Style">
							<p><code>Models</code></p>
						</td>
						<td class="No-Table-Style"/>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><code>View</code></p>
						</td>
						<td class="No-Table-Style">
							<p><code>Views</code></p>
						</td>
						<td class="No-Table-Style">
							<p><code>Pages</code></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><code>ViewModel</code></p>
						</td>
						<td class="No-Table-Style">
							<p><code>ViewModels</code></p>
						</td>
						<td class="No-Table-Style"/>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 4.1 – Naming the folders</p>
			<p>As you can see, the key difference is whether or not the name of the folder should use the plural, reflecting the fact that there will be more than one file in each folder, or the singular (as we will do), reflecting the name Model-View-ViewModel. I can’t think of a less important controversy, and<a id="_idIndexMarker069"/> it clearly doesn’t matter what you choose as long as you are consistent. Arbitrarily, we’ll use the first.</p>
			<p>Thus, create three folders in your project: <code>Model</code>, <code>View</code>, and <code>ViewModel</code>, as shown in <em class="italic">Figure 4</em><em class="italic">.1</em>:</p>
			<div><div><img src="img/Figure_4.1_B19723.jpg" alt="Figure 4.1 – MVVM Folders&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.1 – MVVM Folders</p>
			<p><code>MainPage</code> is now in the wrong place. Drag <code>MainPage.xaml</code> to the <code>View</code> folder (it will bring its code-behind with it). You need to fix the namespace in the XAML file:</p>
			<pre class="source-code">
x:Class="ForgetMeNotDemo.View.MainPage"</pre>
			<p>And in the code behind:</p>
			<pre class="source-code">
namespace ForgetMeNotDemo.View;</pre>
			<p>Microsoft provides libraries<a id="_idIndexMarker070"/> that are not part of .NET MAUI as they were created by the .NET community, but which, nonetheless, Microsoft endorses and supports. Much of the functionality of these community toolkits will probably migrate into .NET MAUI itself.</p>
			<h2 id="_idParaDest-57"><a id="_idTextAnchor059"/>The MVVM Community Toolkit</h2>
			<p>Open <code>CommunityToolkit-MVVM</code> and click on <strong class="bold">CommunityToolkit.MVVM</strong>. This wonderful toolkit will make programming with MVVM infinitely easier than it otherwise would be. See <em class="italic">Figure 4</em><em class="italic">.2</em>:</p>
			<div><div><img src="img/Figure_4.2_B19723.jpg" alt="Figure 4.2 – Getting the NuGet package&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.2 – Getting the NuGet package</p>
			<p>We’ll come back to how to use this toolkit when we talk about <em class="italic">source code generators</em>. Next, let’s take a look at some of the views.</p>
			<h2 id="_idParaDest-58"><a id="_idTextAnchor060"/>Exploring views</h2>
			<p>.NET MAUI Controls is a <a id="_idIndexMarker072"/>generic term for pages, layouts, and views. In this chapter, we will look at views, while pages and layouts <a id="_idIndexMarker073"/>will be reviewed in the next chapter. In <a href="B19723_07.xhtml#_idTextAnchor129"><em class="italic">Chapter 7</em></a>, we’ll look at navigating between pages.</p>
			<p class="callout-heading">Views versus pages</p>
			<p class="callout">From the perspective<a id="_idIndexMarker074"/> of MVVM, a view is a page. From the perspective of .NET MAUI, <code>View</code> is a control. So, just to keep you totally confused, a View consists of Views and layouts. To avoid this absurdity, we’ll refer to the latter as controls. Some frameworks call these widgets. From time to time I’ll forget and refer to these controls as Views, but the context will make clear what I mean.</p>
			<p>A .NET MAUI Control is an object that maps to native controls on each target platform. Thus, a .NET MAUI Button <a id="_idIndexMarker075"/>maps to an iOS, Android, Macintosh, and Windows native Button.</p>
			<p>The principal way to display <a id="_idIndexMarker076"/>text is with <code>Label</code>. The inheritance tree for <code>Label</code> is as follows:</p>
			<p><code>Object</code> &gt; <code>BindableObject</code> &gt; <code>Element</code> &gt; <code>NavigableElement</code> &gt;</p>
			<p>  <code>VisualElement</code> &gt; <code>View</code> &gt; <code>Label</code></p>
			<p>An object is, of course, the base for every class in C#. We’ll skip over <code>BindableObject</code> for now, and we’ll group <code>Element</code>, <code>NavigableElement</code>, and <code>VisualElement</code> together as things you can see on your page. This brings us to <code>View</code> as described previously, and then <code>Label</code> itself.</p>
			<p>The most common property to use on <code>Label</code> is <code>Text</code>. <code>Text</code> is what <code>Label</code> displays, thus you can write the following:</p>
			<pre class="source-code">
&lt;Label Text="Hello World" /&gt;</pre>
			<p>This creates a Label that displays the iconic greeting. But there is more you can do with <code>Label</code>, as we saw in the previous chapter.</p>
			<h2 id="_idParaDest-59"><a id="_idTextAnchor061"/>Forget Me Not labels</h2>
			<p>Let’s look at Labels in the context<a id="_idIndexMarker077"/> of Forget Me Not. We already have the application, but it is just what we get out of the box. Let’s revise this first page to create the initial page for Forget Me Not.</p>
			<p>Please click on the <code>VerticalStackLayout</code> on <code>MainPage.xaml</code> That will collapse <code>VerticalStackLayout</code> and allow you to delete it all at once, as shown in <em class="italic">Figure 4</em><em class="italic">.3</em>:</p>
			<div><div><img src="img/Figure_4.3_B19723.jpg" alt="Figure 4.3 – Collapsed VerticalStackLayout&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.3 – Collapsed VerticalStackLayout</p>
			<p>Next, go to the code-behind file (<code>MainPage.xaml.cs</code>) and remove the counter and the <code>OnCounterClicked</code> event handler.</p>
			<p>Having cleaned all that<a id="_idIndexMarker078"/> out, we are ready to put in new code. We need a layout we can put labels into, so let’s create an empty <code>VerticalStackLayout</code>, and add a Label Control to it that says <code>Welcome to Forget </code><code>Me Not</code>.</p>
			<pre class="source-code">
&lt;VerticalStackLayout&gt;
    &lt;Label Text="Welcome to Forget Me Not"/&gt;
&lt;/VerticalStackLayout&gt;</pre>
			<p>We’re ready to build on that. Let’s add some of the more common properties for making <code>Label</code> look good:</p>
			<pre class="source-code">
&lt;VerticalStackLayout&gt;
    &lt;Label
        x:Name="HelloLabel"
        Margin="20"
        BackgroundColor="Red"
        FontAttributes="Bold"
        FontSize="Small"
        HorizontalOptions="Center"
        HorizontalTextAlignment="Center"
        Text="Welcome to Forget Me Not"
        TextColor="Yellow"
        VerticalTextAlignment="Center" /&gt;
&lt;/VerticalStackLayout&gt;</pre>
			<p>We’ll examine each of these properties in turn, but first, <em class="italic">Figure 4</em><em class="italic">.4</em> shows what the page looks like right now:</p>
			<div><div><img src="img/Figure_4.4_B19723.jpg" alt="Figure 4.4 – Label&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.4 – Label</p>
			<p>Note that the title (<strong class="bold">Home</strong>) is an artifact of the page. What we care about is the Label shown below it.</p>
			<p>Let’s see if we can’t make that look<a id="_idIndexMarker079"/> a bit nicer before we examine the properties of <code>Label</code> by adding just a bit of padding:</p>
			<pre class="source-code">
&lt;VerticalStackLayout&gt;
    &lt;Label
        BackgroundColor="Red"
        FontAttributes="Bold"
        FontSize="Small"
        HorizontalOptions="Center"
        HorizontalTextAlignment="Center"
        LineBreakMode="WordWrap"
        Margin="20"
        MaxLines="5"
        Padding="10"
        Text="Welcome to Forget Me Not"
        TextColor="Yellow"
        VerticalTextAlignment="Center"
        x:Name="HelloLabel" /&gt;
&lt;/VerticalStackLayout&gt;</pre>
			<p>That gives us the page, as<a id="_idIndexMarker080"/> shown in <em class="italic">Figure 4</em><em class="italic">.5</em>.</p>
			<p class="callout-heading">XAML Styler</p>
			<p class="callout">Notice that the properties are laid out nicely and in alphabetical order. This is due to a (free) tool named XAML Styler which you can<a id="_idIndexMarker081"/> get from the Visual Studio Marketplace (<a href="https://bit.ly/XAMLstyler">https://bit.ly/XAMLstyler</a>).</p>
			<div><div><img src="img/Figure_4.5_B19723.jpg" alt="Figure  4.5 – Label with Padding&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure  4.5 – Label with Padding</p>
			<p>Much better. Let’s examine the preceding code with the padding line by line.</p>
			<p>Most of these properties are self-explanatory. The <code>BackgroundColor</code> property controls the entire label. In our case, we’ve set the <code>Padding</code> property (as described in <a href="B19723_03.xhtml#_idTextAnchor036"><em class="italic">Chapter 3</em></a>) to <code>10</code>; thus, the red shows with a padding of <code>10</code> all around the text.</p>
			<p>As you can see, we set the text to <code>Bold</code> using the <code>FontAttributes</code> property. The possible attributes are <code>Bold</code>, <code>Italic</code>, and <code>None</code>, with <code>None</code> being the default.</p>
			<p><code>FontSize</code> can be entered in device-independent units (for example, <code>FontSize = "20")</code> or in one of the enumerated constants such as <code>Micro</code>, <code>Small</code>, <code>Large</code>, and so on.</p>
			<p><code>HorizontalOptions</code> and <code>VerticalOptions</code> place the label on the page relative to the edges of the page. We touched on this in the previous chapter. In the case of <code>HorizontalOptions</code>, the choices are <code>Start</code> (far left), <code>Center</code> (middle), or <code>End</code> (far right).</p>
			<p>The next property is <code>LineBreakMode</code>, which goes with the <code>MaxLines</code> property. Together they determine how many lines of text the label can support and where the lines will be wrapped. To see this, modify the text <a id="_idTextAnchor062"/>to say “<em class="italic">Welcome to Forget Me Not, so glad you are here, we couldn’t do this without you and we appreciate your patience.</em>” As you can see in <em class="italic">Figure 4</em><em class="italic">.6</em>, the text is now centered on multiple lines, and each line breaks at a word boundary.</p>
			<div><div><img src="img/Figure_4.6_B19723.jpg" alt="Figure 4.6 – Multi-line Label&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.6 – Multi-line Label</p>
			<p>As noted earlier, <code>Label</code> has<a id="_idIndexMarker082"/> dozens of properties, and while we’ve covered the most important ones, you can always look up the others on Microsoft Learn. In this case, the page you’ll need is <a href="https://bit.ly/MicrosoftLabel">https://bit.ly/MicrosoftLabel</a>.</p>
			<p>The key to displaying data in the MVVM model is data binding, which allows us to associate a view and a property and then allows .NET MAUI to keep the view up to date as the value of the property changes. Let’s explore this next.</p>
			<h1 id="_idParaDest-60"><a id="_idTextAnchor063"/>Data binding</h1>
			<p>One of the most powerful aspects of .NET MAUI is <strong class="bold">data binding</strong> and data binding works extremely well with MVVM. The idea is to <em class="italic">bind</em> data (values) to controls. For example, we might have a class with the text we want to display on this label held on a public property (you can only bind to public properties). Rather than having to copy that text from the class <a id="_idIndexMarker083"/>to the label, we just tell the label the name of the property.</p>
			<p>The public property will be kept in a class in <code>ViewModel</code>. But we have to answer the question how does <code>View</code> know where to look for the property? That is handled by setting <code>BindingContext</code>.</p>
			<p>Let’s look at a simple example. In <code>ViewModel</code>, create a new file named <code>MainViewModel.cs</code>.</p>
			<p class="callout-heading">Naming ViewModel</p>
			<p class="callout">The most common naming convention is to<a id="_idIndexMarker084"/> name the page with the word page, such as <code>MainPage</code> or <code>LoginPage</code> but to drop the word page in the <code>ViewModel</code> name, such as <code>MainViewModel</code> and <code>LoginViewModel</code>. So, that is what we’ll do in this book.</p>
			<p class="callout">Note that other programmers will use the <code>MainPageViewModel</code> name. On the other hand, some do not use the word <em class="italic">page</em> but rather <em class="italic">view</em>, as in <code>MainView</code> and <code>LoginView</code>. What is most important is for you (and your team) to be consistent so that it is easy to guess and find the associated pages and view models.</p>
			<p>Before going ahead, notice<a id="_idIndexMarker085"/> that Visual Studio has put your class into the <code>ForgetMeNotDemo.ViewModel</code> namespace (if you named your project <code>ForgetMeNot</code>, the namespace will be <code>ForgetMeNot.ViewModel</code>). This is based on the folder the <code>.cs</code> file is in.</p>
			<p>Make sure the class is public and that it is marked <code>partial</code>. All binding in .NET MAUI is done with partial classes, allowing the rest of the class to be handled internally and by generated partial classes.</p>
			<h2 id="_idParaDest-61"><a id="_idTextAnchor064"/>Creating a public property</h2>
			<p>We now want to<a id="_idIndexMarker086"/> create a property named <code>FullName</code>.</p>
			<p>The original way to do this looked something like this:</p>
			<pre class="source-code">
private string fullName;
public string FullName
{
   get =&gt; fullName;
   set
   {
     fullName = value;
     OnPropertyChanged();
   }
}</pre>
			<p>However, the absolute best approach is to take advantage of the code generators in the <code>NuGet</code> package we just added. These work by using attributes. Add an attribute above the <code>[ObservableObject]</code> class <a id="_idIndexMarker087"/>declaration like this:</p>
			<pre class="source-code">
using CommunityToolkit.Mvvm.ComponentModel;
namespace ForgetMeNotDemo.ViewModel;
<strong class="bold">[ObservableObject]</strong>
public partial class MainViewModel
{
}</pre>
			<p>That attribute will allow you to generate properties. Above each property, use the <code>ObservableProperty</code> attribute:</p>
			<pre class="source-code">
[ObservableProperty]
  private string fullName;</pre>
			<p>This will cause the <code>NuGet</code> package to (invisibly) generate the uppercase public property and its <code>OnPropertyChanged()</code> method call as if you had entered them yourself.</p>
			<p>Before we look at how to set the <code>FullName</code> value, we need to set up <code>BindingContext</code>.</p>
			<h2 id="_idParaDest-62"><a id="_idTextAnchor065"/>Setting up BindingContext</h2>
			<p><code>BindingContext</code> tells your <code>View</code> where to get its bound data. You can set this in a number of ways; the most common is to set it in the<a id="_idIndexMarker088"/> code-behind <a id="_idIndexMarker089"/>file for the <code>View</code> class (in this case, <code>MainPage.xaml.cs</code>). First, we declare an instance of <code>ViewModel</code>:</p>
			<pre class="source-code">
private MainViewModel vm = new MainViewModel();
Next, we assign the BindingContext to that instance in the
  constructor:
public <a id="_idTextAnchor066"/>MainPage()
{
  InitializeComponent();
  BindingContext = vm;
}</pre>
			<p>Here is the code <a id="_idIndexMarker090"/>behind the class:</p>
			<pre class="source-code">
public partial class MainPage : ContentPage
{
  private MainViewModel vm = new MainViewModel();
  public MainPage()
  {
    InitializeComponent();
    BindingContext = vm;
  }
}</pre>
			<p>Next, we’ll see how to assign values to the <code>ViewModel</code> class properties.</p>
			<p class="callout-heading">Names</p>
			<p class="callout">I don’t usually like abbreviations for names. There are rare exceptions, and using <code>vm</code> for <code>ViewModel</code> is such a strong convention that I yield to peer-group pressure.</p>
			<h2 id="_idParaDest-63"><a id="_idTextAnchor067"/>Assigning values to the View Model class properties</h2>
			<p>You can assign your string in <code>ViewModel</code>, in the <code>ViewModel</code> constructor, or in the override for the <code>OnAppearing</code> method. <code>OnAppearing</code> is called before <code>View</code> is displayed and looks <a id="_idIndexMarker091"/>like this (you put this in the <a id="_idIndexMarker092"/>code-behind file):</p>
			<pre class="source-code">
protected override void OnAppearing()
{
  base.OnAppearing();
  vm.FullName = "Jesse Liberty";
}</pre>
			<p>We will return to <code>OnAppearing</code> and its sibling <code>OnDisappearing</code> method, in <a href="B19723_07.xhtml#_idTextAnchor129"><em class="italic">Chapter 7</em></a>.</p>
			<p class="callout-heading">InitializeComponent</p>
			<p class="callout"><code>InitializeComponent</code> must be in the constructor of every code-behind file. It is the responsibility of <code>InitializeComponent</code> to initialize all the controls on the page.</p>
			<h2 id="_idParaDest-64"><a id="_idTextAnchor068"/>Implementing Binding</h2>
			<p>You are now ready to bind the <code>FullName</code> property to <code>Label</code>. In the XAML, change the <code>Label</code> text property<a id="_idIndexMarker093"/> to this:</p>
			<pre class="source-code">
Text="{Binding FullName}"</pre>
			<p class="callout-heading">Naming properties and fields</p>
			<pre>myMemberField</strong>), though there is no agreement at all as to whether member fields should be prepended with an underbar as in <code>_myMemberField</code>. We won’t use the underbar in this book, but feel free to do so as long, again, as you are consistent.</pre>
			<p>Using the binding keyword tells <code>Label</code> to get its value from the <code>FullName</code> property found in the <code>ViewModel</code> set by <code>BindingContext</code>.</p>
			<p>You will want to pay attention to the syntax. It is always as shown here: open quotes, open braces, the <code>Binding</code> keyword, property name, closing brace, and closing quotes. Okay, I lied. It is sometimes more complex, but these elements are always there.</p>
			<p>The result of this<a id="_idIndexMarker094"/> construct is that the value of <code>FullName</code> is placed inside the <code>Text</code> property of the label, as shown in <em class="italic">Figure 4</em><em class="italic">.7</em>:</p>
			<div><div><img src="img/Figure_4.7_B19723.jpg" alt="Figure 4.7 – A label with data-bound text&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.7 – A label with data-bound text</p>
			<p>One of the distinguishing characteristics of an MVVM program is that the logic is in <code>ViewModel</code> rather than in the code-behind file, which we will explore next.</p>
			<h2 id="_idParaDest-65"><a id="_idTextAnchor069"/>ViewModel versus code-behind</h2>
			<p>The more you can put<a id="_idIndexMarker095"/> into <code>ViewModel</code> (rather than the code-behind file) the easier it will be to test your program (see <a href="B19723_09.xhtml#_idTextAnchor160"><em class="italic">Chapter 9</em></a> on unit testing). Some MVVM fans think <em class="italic">nothing</em> should be in the code-behind<a id="_idIndexMarker096"/> file besides the required call to <code>InitializeComponent</code>. They argue that even setting <code>ViewModel</code> should be done in the XAML to keep the code-behind file as <a id="_idIndexMarker097"/>empty as possible.</p>
			<p>I take a more moderate view of this. I often set <code>BindingContext</code> in the code-behind file. I do move all my <em class="italic">event handling</em> out of the code-behind file as you’ll see when we talk about commands:</p>
			<pre class="source-code">
LoginPage.xaml.cs:
public partial class LoginPage : ContentPage
{
    LoginViewModel vm = new LoginViewModel();
    public LoginPage()
    {
        BindingContext = vm;
        InitializeComponent();
    }
}</pre>
			<p>Notice that <code>BindingContext</code> here is set before calling <code>InitializeComponent</code>. While either can come first in most cases, setting up all your bindings before initializing the page is generally good<a id="_idIndexMarker098"/> practice. Thus, we’ll stick with the<a id="_idIndexMarker099"/> approach shown<a id="_idIndexMarker100"/> here.</p>
			<p class="callout-heading">Renegade code-behind</p>
			<p class="callout">There are times when it is just much easier to put a method in the code-behind file. Be careful with this, however. 99% of the time, when it seems really important to put something in the code-behind file, you actually can make it work in <code>ViewModel</code>, and that is much better (again, for testing). But if you do have to put something in the code-behind file, do not feel bad, and do not let other .NET MAUI programmers push you around.</p>
			<p>The center of developing<a id="_idIndexMarker101"/> most apps, the part that people respond to, is the <strong class="bold">user interface</strong> (<strong class="bold">UI</strong>). In .NET MAUI, the UI consists of views in layouts. Let’s turn our attention to the most important views.</p>
			<h1 id="_idParaDest-66"><a id="_idTextAnchor070"/>Views</h1>
			<p>There are many controls for displaying and obtaining data from the user. The following sections will cover the most <a id="_idIndexMarker102"/>common and useful ones, including those shown here:</p>
			<ul>
				<li>Images</li>
				<li>Labels</li>
				<li>Buttons</li>
				<li>ImageButtons</li>
				<li>Entering text</li>
			</ul>
			<h2 id="_idParaDest-67"><a id="_idTextAnchor071"/>Images</h2>
			<p>You <em class="italic">can</em> write a .NET MAUI program<a id="_idIndexMarker103"/> without images, but it is likely to look pretty boring. Managing images is much easier in .NET MAUI than it was in <code>Xamarin.Forms</code>. Now, instead <a id="_idIndexMarker104"/>of having to have one image for each resolution in iOS and Android, you place one image in the resources folder, and .NET MAUI takes care of the rest for all the platforms!</p>
			<p>In this example, we’ll use an image named <code>flower.png</code>, which you can download from our GitHub repository. If you prefer, though, you can use any image you like. We’ll place the image in the <code>Resources</code> &gt; <code>Images</code> folder.</p>
			<p>When we are ready to display it, we’ll use an <strong class="bold">Image View</strong>. Here is a simple example:</p>
			<pre class="source-code">
&lt;Image
    HeightRequest="200"
    HorizontalOptions="Center"
    Source="{Binding FavoriteFlower}" /&gt;</pre>
			<p>I’ve only set three properties, but they accomplish quite a bit. <code>HeightRequest</code> sets, as you might guess, the height of the image on the page in device-independent units (in this case, <code>200</code>). I’ve set it to be centered. Most importantly, I’ve identified the source—that is the name of the image. But rather than lock in the name of the image in <code>View</code>, I’ve bound it to a property in <code>MainPageViewModel</code>.</p>
			<p>The result is that <code>MainPage</code> now<a id="_idIndexMarker105"/> looks like <em class="italic">Figure 4</em><em class="italic">.8</em>:</p>
			<div><div><img src="img/Figure_4.8_B19723.jpg" alt="Figure 4.8 – Binding the source to a property in ViewModel&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.8 – Binding the source to a property in ViewModel</p>
			<p>Of course, there are a number of<a id="_idIndexMarker106"/> additional properties you can set. A set of favorites<a id="_idIndexMarker107"/> for me are the <code>Rotation</code> properties, which can rotate on the <em class="italic">x</em>, <em class="italic">y</em>, and <em class="italic">z</em> axes. If I add the <code>RotationX</code> property like this:</p>
			<pre class="source-code">
&lt;Image
    HeightRequest="200"
    HorizontalOptions="Center"
    RotationX="45"
    Source="flower.png" /&gt;</pre>
			<p>The image rotates, as shown in <em class="italic">Figure 4</em><em class="italic">.9</em>:</p>
			<div><div><img src="img/Figure_4.9_B19723.jpg" alt="Figure 4.9 – RotationX=”45”&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.9 – RotationX=”45”</p>
			<p>Another useful trick is to make the image semi-transparent by setting <code>Opacity</code> to a value between <code>0</code> and <code>1</code>. <em class="italic">Figure 4</em><em class="italic">.10</em> shows the<a id="_idIndexMarker108"/> same image with an opacity of <code>.25</code>. I removed <code>StackLayout</code> and substituted a <code>Grid</code>. More about grids in the next chapter, but if you just <a id="_idIndexMarker109"/>declare one and put <code>Label</code> and <code>Image</code> into it with no other <code>Grid</code> properties, they lay one on top of the other:</p>
			<pre class="source-code">
&lt;Grid&gt;
    &lt;Label
        BackgroundColor="Red"
        FontAttributes="Bold"
        FontSize="Small"
        HeightRequest="50"
        HorizontalOptions="Center"
        HorizontalTextAlignment="Center"
        LineBreakMode="WordWrap"
        Margin="20"
        MaxLines="5"
        Padding="10"
        Text="{Binding FullName}"
        TextColor="Yellow"
        VerticalTextAlignment="Center"
        x:Name="HelloLabel" /&gt;
    &lt;Image
        HeightRequest="200"
        HorizontalOptions="Center"
        IsVisible="True"
        Opacity=".25"
        RotationX="45"
        Source="{Binding FavoriteFlower}"
        x:Name="BigFlower" /&gt;
&lt;/Grid&gt;</pre>
			<p><em class="italic">Figure 4</em><em class="italic">.10</em> shows <a id="_idIndexMarker110"/>the result:</p>
			<div><div><img src="img/Figure_4.10_B19723.jpg" alt="Figure 4.10 – Overlay and semi-transparent effect&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.10 – Overlay and semi-transparent effect</p>
			<p>There is<a id="_idIndexMarker111"/> endless room <a id="_idIndexMarker112"/>for creativity.</p>
			<h3>Clicking on an image</h3>
			<p>One of the key things that many<a id="_idIndexMarker113"/> people want to do with an image is click on it. There are two solutions to this problem. The easiest is to use a button.</p>
			<p>Buttons can have text and a number of other properties, but the most important is the command. The command tells <code>ViewModel</code> what to do when the button is clicked.</p>
			<p>To show how this works, I’m going to put a new property on our image, <code>IsVisible</code>, and set it to <code>true</code>. As long as that is <code>true</code>, the image is visible. But, as you can imagine, setting it false makes the big flower invisible. Not only is it invisible, but it also takes up no space on the page, so the button will be directly under the label.</p>
			<p>Here is the code for <code>Button</code>:</p>
			<pre class="source-code">
&lt;Button
    Text="Click me"
    Command="{Binding ToggleFlowerVisibilityCommand}"/&gt;</pre>
			<p>This is the simplest button I can make (we’ll look at making it nicer in just a bit). The key here is the <code>Command</code> parameter. You can tell by the <code>Binding</code> keyword that <code>ToggleFlowerVisibility</code> will be in <code>ViewModel</code>. Sure enough, it is, but rather than declaring a command and pointing it at a method, we can use the code generator to do the heavy lifting<a id="_idIndexMarker114"/> for us.</p>
			<p>Here is the modified <code>MainViewModel</code>:</p>
			<pre class="source-code">
[ObservableObject]
public partial class MainViewModel
{
  [ObservableProperty] private bool flowerIsVisible = true;
    [1]
  [ObservableProperty] private string fullName;
  [ObservableProperty] private string favoriteFlower =
    "flower.png";
  [RelayCommand]  [2]
  private void ToggleFlowerVisibility()  [3]
  {
    FlowerIsVisible = !FlowerIsVisible;
  }
}</pre>
			<p>This is an example of <em class="italic">convention over configuration</em> – the <code>Command</code> property in <code>Button</code> is <code>ToggleFlowerVisibilityCommand</code>, but when you implement it in <code>RelayCommand</code> [2], you name it <code>ToggleFlowerVisibility</code> [3] leaving off <code>Command</code>.</p>
			<p>Note that we created <code>FlowerIsVisible</code> [1] as an <code>ObservableProperty</code>, we simply toggle it from <code>true</code> to <code>false</code> and back on each click.</p>
			<h2 id="_idParaDest-68"><a id="_idTextAnchor072"/>Button properties</h2>
			<p>As it is now, the button will be displayed<a id="_idIndexMarker115"/> as it would appear natively on each platform. But these buttons can be pretty ugly. We can make them much nicer by taking over more of their appearance.</p>
			<p>Here is my XAML for <code>Button</code>, which while not beautiful, will illustrate some of the properties you can use to take control of the button’s appearance:</p>
			<pre class="source-code">
&lt;Button
     BackgroundColor="Red"
     BorderColor="Black"
     BorderWidth="2"
     Command="{Binding ToggleFlowerVisibilityCommand}"
     CornerRadius="20"
     FontSize="Small"
     HeightRequest="35"
     Padding="5"
     Text="Don't Click Me"
     TextColor="Yellow"
     WidthRequest="150" /&gt;</pre>
			<p>There are three new properties that we’ve not seen before. The first is <code>BorderColor</code>, which goes along with <code>BorderWidth</code>. This provides a border around the button. Since we’ve set <code>BackgroundColor</code> to <code>Red</code>, the border will stand out. The final new property is <code>CornerRadius</code>, which gives us a nice rounding of the corners of the otherwise square button. Put that all together, and you get a button that looks like <em class="italic">Figure 4</em><em class="italic">.11</em>:</p>
			<div><div><img src="img/Figure_4.11_B19723.jpg" alt="Figure 4.11 – A nicer-looking button&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.11 – A nicer-looking button</p>
			<p class="callout-heading">Why is this button still ugly?</p>
			<p class="callout">I am certainly not a UI person, and so my pages tend to be fairly ugly until fixed by someone who knows what they are doing. The screen images in this book will reflect that inability.</p>
			<h2 id="_idParaDest-69"><a id="_idTextAnchor073"/>ImageButton</h2>
			<p>At times, rather than havin<a id="_idIndexMarker116"/>g text, we’d rather have an image on the button. There is an <code>ImageButton</code> control that combines many of the properties of the <code>Image</code> control and the <code>Button</code> control:</p>
			<pre class="source-code">
&lt;ImageButton
    BorderColor="Black"
    BorderWidth="2"
    Command="{Binding ToggleFlowerVisibilityCommand}"
    MaximumHeightRequest="75"
    MaximumWidthRequest="75"
    Padding="5"
    Source="{Binding FavoriteFlower}" /&gt;</pre>
			<p>You can see how similar it is to the <code>Button</code> control. In fact, I’ve preserved the command binding and the source binding, so we end up with a small image of the flower under the big image, but clicking on the small one (<code>ImageButton</code>) causes the big one (<code>Image</code>) to become invisible and then visible, and so on. I’ll show both visible in <em class="italic">Figure 4</em><em class="italic">.12</em> because it is hard to toggle an image on paper:</p>
			<div><div><img src="img/Figure_4.12_B19723.jpg" alt="Figure 4.12 – ImageButton&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.12 – ImageButton</p>
			<h2 id="_idParaDest-70"><a id="_idTextAnchor074"/>TapGestureRecognizer</h2>
			<p>The second way to handle tapping on an image is to assign a gesture recognizer. The type of <code>GestureRecognizer</code> we’re<a id="_idIndexMarker117"/> going to assign is <code>TapGestureRecognizer</code>, which will recognize when the image itself has been tapped. To be safe, we’ll set it so that the image has to be double-tapped. When that happens, the image will “poof!” disappear.</p>
			<p>We’ll remove <code>ImageButton</code>, and just have <code>Image</code> (and <code>Label</code>). Here is our new XAML file:</p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage
    BackgroundColor="White"
    x:Class="ForgetMeNotDemo.View.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"&gt;
    &lt;ScrollView&gt;
        &lt;VerticalStackLayout&gt;
            &lt;Label
                BackgroundColor="Red"
                FontAttributes="Bold"
                FontSize="Small"
                HeightRequest="50"
                HorizontalOptions="Center"
                HorizontalTextAlignment="Center"
                LineBreakMode="WordWrap"
                Margin="20"
                MaxLines="5"
                Padding="10"
                Text="{Binding FullName}"
                TextColor="Yellow"
                VerticalTextAlignment="Center"
                x:Name="HelloLabel" /&gt;
            &lt;Image
                HeightRequest="200"
                HorizontalOptions="Center"
                IsVisible="{Binding FlowerIsVisible}" [1]
                Source="{Binding FavoriteFlower}"
                x:Name="BigFlower"&gt;
                &lt;Image.GestureRecognizers&gt;     [2]
                    &lt;TapGestureRecognizer      [3]
                        Command="{Binding
                          ImageTappedCommand}" [4]
                        NumberOfTapsRequired="2" /&gt; [5]
                &lt;/Image.GestureRecognizers&gt;
            &lt;/Image&gt;
        &lt;/VerticalStackLayout&gt;
    &lt;/ScrollView&gt;
&lt;/ContentPage&gt;</pre>
			<p>We see at [1] that the image<a id="_idIndexMarker118"/> starts as visible. Between the opening and closing brackets for <code>Image</code> we add <code>GestureRecognizer</code> [2]. Within <code>GestureRecognizer</code> we add <code>TapGestureRecognizer</code> [3], and we define <code>ImageTappedCommand</code> [4] just as we did with other commands. Finally, we declare that for the command to fire, the user must tap twice [5].</p>
			<p>Here is an example of <code>RelayCommand</code> from <code>ViewModel</code>:</p>
			<pre class="source-code">
[RelayCommand]
private void ImageTapped()
{
  FlowerIsVisible = !FlowerIsVisible;
}</pre>
			<p>As you can see, this handler is nearly identical to the previous one. However, this one won’t work as intended. Before reading further, try to figure out what will happen when we double-click on the image (to make it invisible) and then try to do so again (to make it visible). Take your time. I’ll wait here.</p>
			<p>You can solve this by going back to <code>Button</code>, or perhaps putting a <code>GestureRcognizer</code> on the Label.</p>
			<p>When you double-tap on the image, it does, in fact, disappear because <code>IsVisible</code> is set to false. However, once it disappears, it is gone, and there is nothing there to tap on to bring it back:</p>
			<pre class="source-code">
&lt;Label
    BackgroundColor="Red"
    FontAttributes="Bold"
    FontSize="Small"
    HeightRequest="50"
    HorizontalOptions="Center"
    HorizontalTextAlignment="Center"
    LineBreakMode="WordWrap"
    Margin="20"
    MaxLines="5"
    Padding="10"
    Text="{Binding FullName}"
    TextColor="Yellow"
    VerticalTextAlignment="Center"
    x:Name="HelloLabel"&gt;
    &lt;Label.GestureRecognizers&gt;
        &lt;TapGestureRecognizer Command="{Binding
          ImageTappedCommand}" /&gt;
    &lt;/Label.GestureRecognizers&gt;
&lt;/Label&gt;</pre>
			<p>What’s interesting here is that the <code>TapGestureRecognizer</code> command points to the same <code>RelayCommand</code>; it <a id="_idIndexMarker119"/>will be invoked either by double-tapping on the image or single-tapping on the label.</p>
			<p>The following are two takeaway points from this section:</p>
			<ul>
				<li><code>TapGestureRecognizer</code> allows you to make any control tappable, which can be pretty powerful.</li>
				<li>Once <code>View</code> is invisible, it is no longer on the page. You can make it visible again from the code behind, but only if you do so by way of a different control (as we did with <code>ButtonImage</code>).</li>
			</ul>
			<p>After displaying text, the most important aspect of an app is the ability to obtain text from the user. For that, the <a id="_idIndexMarker120"/>principal views are <code>Entry</code> and <code>Editor</code>. Let’s have a look at them next.</p>
			<h2 id="_idParaDest-71"><a id="_idTextAnchor075"/>Entering text</h2>
			<p>We’ve looked at displaying text, let’s turn <a id="_idIndexMarker121"/>our attention to entering text. There are two controls that are principally responsible for this:</p>
			<ol>
				<li><code>Entry</code>: Used for entering a line of text</li>
				<li><code>Editor</code>: Used for entering multiple lines of text</li>
			</ol>
			<p>These two controls are obviously related, but they have different properties. <code>Entry</code> is designed to take a single line of text and <code>Editor</code> handles multi-line entry.</p>
			<p>To see these views at work, let’s create a login page for Forget Me Not.</p>
			<h3>Forget Me Not login page</h3>
			<p>We’ve been playing with the <code>MainPage</code>, but in truth, the actual application has a very simple <code>MainPage</code>: just the image. Things<a id="_idIndexMarker122"/> get more interesting with the login page. We will make a first approximation of the login page as it will allow us to use the <code>Entry</code> and <code>Editor</code> controls, though we will evolve this page as we go.</p>
			<h3>Creating the login page</h3>
			<p>The first task is to create the login<a id="_idIndexMarker123"/> page. To do so, right-click on the <code>LoginPage.xaml</code>, as shown in <em class="italic">Figure 4</em><em class="italic">.13</em>:</p>
			<div><div><img src="img/Figure_4.13_B19723.jpg" alt="Figure 4.13 – Add Item dialog box&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.13 – Add Item dialog box</p>
			<h3>XAML versus C#</h3>
			<p>If you wish to create the UI for the login page using C# rather than XAML, choose <strong class="bold">ContentPage (C#)</strong> instead. We’ll look at both in this section, but let’s start with the XAML version.</p>
			<p>Examine the XAML page <a id="_idIndexMarker124"/>out of the box. The class is set to <code>ForgetMeNotDemo.View.LoginPage</code>, reflecting<a id="_idIndexMarker125"/> the namespace (when we created the file under <code>View</code> that became the namespace automatically). The<a id="_idIndexMarker126"/> XAML also has <code>VerticalStackLayout</code> and inside that, <code>Label</code>.</p>
			<p>Take a very quick look at the code-behind file. Note that <code>namespace</code> has been created for you and that the page derives from <code>ContentPage</code> .</p>
			<p>Go back to the XAML page and delete <code>Label</code> in <code>VerticalScrollView</code>. When the application is complete, it should look like <em class="italic">Figure 4</em><em class="italic">.14</em>:</p>
			<div><div><img src="img/Figure_4.14_B19723.jpg" alt="Figure 4.14 – Login.XAML (top portion)&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.14 – Login.XAML (top portion)</p>
			<p>As you can see, we have<a id="_idIndexMarker127"/> two labels. To the right of each label is an entry, and the entry<a id="_idIndexMarker128"/> has placeholder text. As soon as you start typing in the entry, the placeholder<a id="_idIndexMarker129"/> text will disappear.</p>
			<p>There are also three buttons. To lay this out properly, we’d like to use <code>Grid</code>, but we’re not covering grids until <a href="B19723_06.xhtml#_idTextAnchor115"><em class="italic">Chapter 6</em></a>, <em class="italic">Layouts</em>. That’s not a problem, though, because it gives us the opportunity to look at nesting <code>StackLayouts</code> and using <code>HorizontalStackLayout</code>.</p>
			<p>To get started, we’ll just create the top line. We’d like flexibility for the text in the label, and we’d like to capture the <em class="italic">User name</em> entry in a property of <code>ViewModel</code> that we haven’t created yet. Let’s do that now. Right-click on the <code>LoginViewModel</code> class.</p>
			<p>In <code>LoginViewModel</code> add <code>ObservableProperty</code> for the user name:</p>
			<pre class="source-code">
namespace ForgetMeNotDemo.ViewModel
{
  [ObservableObject]
  internal partial class LoginViewModel
  {
    [ObservableProperty] private string name;</pre>
			<p>When the user types a name into the Entry control it will be saved in this property.</p>
			<p class="callout-heading">OneWay and TwoWay binding</p>
			<p class="callout">Controls can be <code>OneWay</code>, in which case the control gets its value from the data source (in this case, the property) but can’t send it<a id="_idIndexMarker130"/> back, or <code>TwoWay</code>, in which case the <a id="_idIndexMarker131"/>control gets its data from<a id="_idIndexMarker132"/> the data source but can also write a<a id="_idIndexMarker133"/> value back. <code>Entry</code> defaults to <code>TwoWay</code>.</p>
			<p>We’re ready to<a id="_idIndexMarker134"/> create the top line in <code>LoginPage</code> in XAML:</p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage
    Title="LoginPage"
    x:Class="ForgetMeNotDemo.View.LoginPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"&gt;
    &lt;VerticalStackLayout&gt;
        &lt;HorizontalStackLayout WidthRequest="300"&gt;
            &lt;Label
                FontSize="Medium"
                HorizontalOptions="Start"
                Margin="10,20,10,0"
                Text="User Name"
                VerticalOptions="Center"
                VerticalTextAlignment="Center" /&gt;
            &lt;Entry
                HorizontalOptions="End"
                Placeholder="User Name"
                Text="{Binding Name}"
                WidthRequest="150" /&gt;
        &lt;/HorizontalStackLayout&gt;
    &lt;/VerticalStackLayout&gt;
&lt;/ContentPage&gt;</pre>
			<p>We’re using three<a id="_idIndexMarker135"/> properties on <code>Entry</code>:</p>
			<ol>
				<li><code>HorizontalOptions</code>: Here we are setting it to <code>End</code> so that <code>Entry</code> will be to the far right of the line</li>
				<li><code>PlaceHolder</code>: This is the text that<a id="_idIndexMarker136"/> will be displayed until the user starts to enter text</li>
				<li><code>Text</code>: We have bound<a id="_idIndexMarker137"/> this to the <code>Name</code> property in <code>ViewModel</code></li>
			</ol>
			<p>There is one problem looking at this page: there is no way to get there (yet). For now, rather than having the program open at <code>MainPage</code>, we’ll have it open to our new <code>LoginPage</code>. To do so, go to <code>AppShell.xaml</code> and change <code>ShellContent</code> to look like this:</p>
			<pre class="source-code">
&lt;ShellContent
    Title="Home"
    ContentTemplate="{DataTemplate view1:LoginPage}"
    Route="LoginPage" /&gt;</pre>
			<p>We’ll be discussing the Shell and routing in <a href="B19723_07.xhtml#_idTextAnchor129"><em class="italic">Chapter 7</em></a>, but this will work for now.</p>
			<p>Run the program. If you run it on an Android device or emulator, it should look more or less like <em class="italic">Figure 4</em><em class="italic">.15</em>:</p>
			<div><div><img src="img/Figure_4.15_B19723.jpg" alt="Figure 4.15 – LoginPage, the first iteration&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.15 – LoginPage, the first iteration</p>
			<p>Even for me, it’s not very attractive, but it does demonstrate the controls and the layout. Try typing in the <strong class="bold">User Name</strong> entry. Notice<a id="_idIndexMarker138"/> that the placeholder text disappears instantly.</p>
			<p>We need a way to tell whether <a id="_idIndexMarker139"/>the value you entered is really binding to the <code>Name</code> property. To do this, let’s add a label and bind it to the <code>Name</code> property. That way, when we enter text into the<a id="_idIndexMarker140"/> entry it will be reflected in <code>Label</code>:</p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage
    Title="LoginPage"
    x:Class="ForgetMeNotDemo.View.LoginPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"&gt;
    &lt;VerticalStackLayout&gt;
        &lt;HorizontalStackLayout WidthRequest="300"&gt;
            &lt;Label
                FontSize="Medium"
                HorizontalOptions="Start"
                Margin="10,20,10,0"
                Text="User Name"
                VerticalOptions="Center"
                VerticalTextAlignment="Center" /&gt;
            &lt;Entry
                HorizontalOptions="End"
                Placeholder="User Name"
                Text="{Binding Name}"
                WidthRequest="150" /&gt;
        &lt;/HorizontalStackLayout&gt;
        &lt;Label
            Margin="10,30,10,0"
            Text="{Binding Name}" /&gt;
    &lt;/VerticalStackLayout&gt;
&lt;/ContentPage&gt;</pre>
			<p>However, before we can make that<a id="_idIndexMarker141"/> work, we have to set up <code>BindingContext</code>, as we did on <code>MainPage</code>. Open<a id="_idIndexMarker142"/> the code-behind file for the XAML page and set up <code>LoginViewModel</code> as the<a id="_idIndexMarker143"/> binding context:</p>
			<pre class="source-code">
public partial class LoginPage : ContentPage
{
    LoginViewModel vm = new LoginViewModel();
public LoginPage()
    {
        BindingContext = vm;
        InitializeComponent();
    }
}</pre>
			<p>When we run this and type<a id="_idIndexMarker144"/> into the entry the text is saved in the <code>Name</code> property in <code>ViewModel</code>. Since the label is bound to the same property, the<a id="_idIndexMarker145"/> text is immediately <a id="_idIndexMarker146"/>shown there as well, as seen in <em class="italic">Figure 4</em><em class="italic">.16</em>:</p>
			<div><div><img src="img/Figure_4.16_B19723.jpg" alt="Figure 4.16 – Proving that the entry is binding to the Name property&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.16 – Proving that the entry is binding to the Name property</p>
			<p>Now that we know it is working, delete the label. Let’s do the same thing for the password that we did for the name, except that we don’t want anyone to see the password we’re entering. No problem, <code>Entry</code> has a <code>boolean</code> property, <code>IsPassword</code>, which we’ll set to <code>True</code>:</p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage
    Title="LoginPage"
    x:Class="ForgetMeNotDemo.View.LoginPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"&gt;
    &lt;VerticalStackLayout&gt;
        &lt;HorizontalStackLayout WidthRequest="300"&gt;
            &lt;Label
                FontSize="Medium"
                HorizontalOptions="Start"
                Margin="10,20,10,0"
                Text="User Name"
                VerticalOptions="Center"
                VerticalTextAlignment="Center" /&gt;
            &lt;Entry
                HorizontalOptions="End"
                Placeholder="User Name"
                Text="{Binding Name}"
                WidthRequest="150" /&gt;
        &lt;/HorizontalStackLayout&gt;
        &lt;HorizontalStackLayout WidthRequest="300"&gt;
            &lt;Label
                FontSize="Medium"
                HorizontalOptions="Start"
                Margin="10,10,10,0"
                Text="Password"
                VerticalOptions="Center"
                VerticalTextAlignment="Center" /&gt;
            &lt;Entry
                HorizontalOptions="End"
                Placeholder="Password"
                IsPassword="True"
                Text="{Binding Password}"
                WidthRequest="150" /&gt;
        &lt;/HorizontalStackLayout&gt;
    &lt;/VerticalStackLayout&gt;
&lt;/ContentPage&gt;</pre>
			<p>Before continuing, notice that we have <code>VerticalStackLayout</code> that contains two <code>HorizontalStackLayouts</code>. This is a not uncommon layout, but again we’ll get more control over the<a id="_idIndexMarker147"/> appearance <a id="_idIndexMarker148"/>when we <a id="_idIndexMarker149"/>move on to <code>Grid</code>.</p>
			<p>The result of this XAML is shown in <em class="italic">Figure 4</em><em class="italic">.17</em>:</p>
			<div><div><img src="img/Figure_4.17_B19723.jpg" alt="Figure 4.17 – Using the password Boolean on Entry&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.17 – Using the password Boolean on Entry</p>
			<p>Let’s complete this first iteration of the page by adding the three buttons. We’ll only give one (<strong class="bold">Submit</strong>) a command <a id="_idIndexMarker150"/>for now:</p>
			<pre class="source-code">
&lt;HorizontalStackLayout Margin="10,10,10,0"&gt;
    &lt;Button
        BackgroundColor="Gray"
        Command="{Binding SubmitCommand}"
        Margin="5"
        Text="Submit" /&gt;
    &lt;Button
        BackgroundColor="Gray"
        Margin="5"
        Text="Create Account" /&gt;
    &lt;Button
        BackgroundColor="Gray"
        Margin="5"
        Text="Forgot Password" /&gt;
&lt;/HorizontalStackLayout&gt;</pre>
			<p>The<a id="_idIndexMarker151"/> result is <a id="_idIndexMarker152"/>shown in <em class="italic">Figure 4</em><em class="italic">.18</em>:</p>
			<div><div><img src="img/Figure_4.18_B19723.jpg" alt="Figure 4.18 – Adding the buttons&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.18 – Adding the buttons</p>
			<p>When you run this, you<a id="_idIndexMarker153"/> may notice that it works fine, except that clicking on <strong class="bold">Submit</strong> doesn’t do anything. That is because we named the command but never<a id="_idIndexMarker154"/> implemented it. We’re going to save doing so for a while. Actually, for a long while. We’ll tackle the real implementation<a id="_idIndexMarker155"/> when we get to <a href="B19723_11.xhtml#_idTextAnchor216"><em class="italic">Chapter 11</em></a>, <em class="italic">Working with </em><em class="italic">the API</em>.</p>
			<h3>The Title</h3>
			<p>You may have noticed that the page has a <strong class="bold">LoginPage</strong> title. The good news is that we got that for free (.NET MAUI created it <a id="_idIndexMarker156"/>when we created the page). However, it would be nice to have a space between <strong class="bold">Login</strong> and <strong class="bold">Page</strong>.</p>
			<p>At the top of the XAML page is the declaration of <code>ContentPage</code>, and the first property set there is <code>Title</code>.</p>
			<pre class="source-code">
&lt;ContentPage
    Title="LoginPage"</pre>
			<p>Just insert the missing space, and all will be right with the world.</p>
			<h3>Editor</h3>
			<p>The second primary way of entering text into your application is with the <code>Editor</code> control. The principal <a id="_idIndexMarker157"/>difference from the <code>Entry</code> class is that <code>Editor</code> is designed for multi-line data entry. You have a lot of control over the text, as you’ll see in the next example.</p>
			<p>Let’s add an editor to the login page. We’ll set it so that it is only visible if the user clicks on <strong class="bold">Forgot Password</strong>. The user will be encouraged to explain exactly where the password was the last time they saw it and why they were so careless when we told them to keep the password secure.</p>
			<p>Reopen <code>LoginPage.xaml</code> and add an <code>Editor</code> inside <code>VerticalStackLayout</code>, at the very bottom:</p>
			<pre class="source-code">
&lt;Editor
    FontSize="Small"
    HeightRequest="300"
    IsTextPredictionEnabled="True"  [1]
    Margin="10"
    MaxLength="500"   [2]
    Placeholder="Explain yourself here (up to 500
      characters)"
    PlaceholderColor="Red" [3]
    Text="{Binding LostPasswordExcuse}"
    TextColor="Blue"  [4]
    VerticalTextAlignment="Center" [5]
    x:Name="LoginEditor" /&gt;</pre>
			<p>I’ve used a number of properties on the editor, and a few of them are new.</p>
			<p>[1] <code>IsTextPredictionEnabled</code> allows your editor to offer the user text to complete their sentence. You’ve seen this, no doubt, when working with Gmail and other applications. This is <a id="_idIndexMarker158"/>actually <code>True</code> by default; you might want to set it to <code>False</code> when asking for a user’s name or other conditions in which the prediction might be annoying.</p>
			<p>[2] <code>MaxLength</code> manages how many characters the user may enter into the editor.</p>
			<p>[3] <code>PlaceHolderColor</code> allows you to set the color of the placeholder text.</p>
			<p>[4] Similarly, <code>TextColor</code> sets the color of the text the user enters.</p>
			<p>[5] <code>VerticalTextAlignment</code> sets where, within the editor, the text will lie.</p>
			<p><em class="italic">Figure 4</em><em class="italic">.19</em> shows what <strong class="bold">Login Page</strong> looks like before the user enters anything into the editor, and <em class="italic">Figure 4</em><em class="italic">.20</em> shows what it looks like after the user has entered a few lines of text:</p>
			<div><div><img src="img/Figure_4.19_B19723.jpg" alt="Figure 4.19 – Before the user enters text into the editor&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.19 – Before the user enters text into the editor</p>
			<p>You can enter as much<a id="_idIndexMarker159"/> text as you want into the editor, up to whatever maximum you’ve set in the declaration of the control.</p>
			<div><div><img src="img/Figure_4.20_B19723.jpg" alt="Figure 4.20 – After the user enters text into the editor&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.20 – After the user enters text into the editor</p>
			<p>Although the margin is only<a id="_idIndexMarker160"/> set to <code>10</code>, there is a huge space between the buttons and the text. That is because we set <code>VerticalTextAlignment</code> to <code>Center</code>. If we change it to <code>Start</code>, the text will move to the top of the editor, as shown in <em class="italic">Figure 4</em><em class="italic">.21</em>:</p>
			<div><div><img src="img/Figure_4.21_B19723.jpg" alt="Figure 4.21 – Moving the text in the editor to the top (start) position&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.21 – Moving the text in the editor to the top (start) position</p>
			<p>Buttons inherently rely on <a id="_idIndexMarker161"/>events, but events are handled in the code-behind file, and we’d like to keep all our logic in <code>ViewModel</code>. The answer to that is the <code>EventToCommand</code> behavior, which we will consider next.</p>
			<h1 id="_idParaDest-72"><a id="_idTextAnchor076"/>Behaviors</h1>
			<p>The <code>Editor</code> control has a number of events. These can be handled by event handlers in the code-behind file, but <a id="_idIndexMarker162"/>for the reasons already explained (and explained) we’d rather not do that. So, here enters behaviors.</p>
			<p>Behaviors let you add functionality to your controls without having to create subclasses. They <em class="italic">tack on</em> the behavior. What we want to do now is tack on the ability to manage commands in a control (<code>Editor</code>) that doesn’t have commands.</p>
			<p>The .NET MAUI Community Toolkit comes with a plethora of behaviors, including <code>EventToCommandBehavior</code>. This wonderful behavior allows you to transform an event (which would be handled in the code-behind file) into a command, which can be handled in <code>ViewModel</code>.</p>
			<p>The event we want to change in <code>Editor</code> is <code>OnEditorCompleted</code>, which is raised when the user hits the <em class="italic">Enter</em> key (or, on Windows, the <em class="italic">Tab</em> key):</p>
			<pre class="source-code">
&lt;Editor
    FontSize="Small"
    HeightRequest="300"
    IsTextPredictionEnabled="True"
    Margin="10"
    MaxLength="500"
    Placeholder="Explain yourself here (up to 500
        characters)"
    PlaceholderColor="Red"
    Text="{Binding LostPasswordExcuse}"
    TextColor="Blue"
    VerticalTextAlignment="Start"
    x:Name="LoginEditor"&gt;
    &lt;Editor.Behaviors&gt;
        &lt;behaviors:EventToCommandBehavior
            EventName="Completed"
            Command="{Binding EditorCompletedCommand}" /&gt;
    &lt;/Editor.Behaviors&gt;
&lt;/Editor&gt;</pre>
			<p>The syntax is reminiscent of <code>GestureRecognizers</code>, and that is not a coincidence. The idea is to enable a<a id="_idIndexMarker163"/> control to have various collections and to be able to declare those collections in the XAML.</p>
			<p>You can, of course, declare the same thing in C#:</p>
			<pre class="source-code">
Var editor = new Editor();
var behavior = new EventToCommandBehavior
{
   EventName = nameof(Editor.Completed),
   Command= new EditorCompletedCommand()
};</pre>
			<p>As noted earlier, anything you can do in XAML, you can also do in C#.</p>
			<p>You manage the<a id="_idIndexMarker164"/> command (however you create it) in <code>ViewModel</code>, just as you would any other command. For fun, let’s add a label below the editor and bind it to <code>LostPasswordExcuse</code>, but only show it until the user presses <em class="italic">Enter</em>.</p>
			<p><code>Login.xaml</code> now looks like this:</p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage
    Title="Login Page"
    x:Class="ForgetMeNotDemo.View.LoginPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:behaviors="http://schemas.microsoft.com/dotnet/
        2022/maui/toolkit"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"&gt;
    &lt;VerticalStackLayout&gt;
        &lt;HorizontalStackLayout WidthRequest="300"&gt;
            &lt;Label
                FontSize="Medium"
                HorizontalOptions="Start"
                Margin="10,20,10,0"
                Text="User Name"
                VerticalOptions="Center"
                VerticalTextAlignment="Center" /&gt;
            &lt;Entry
                HorizontalOptions="End"
                Placeholder="User Name"
                Text="{Binding Name}"
                WidthRequest="150" /&gt;
        &lt;/HorizontalStackLayout&gt;
        &lt;HorizontalStackLayout WidthRequest="300"&gt;
            &lt;Label
                FontSize="Medium"
                HorizontalOptions="Start"
                Margin="10,10,10,0"
                Text="Password"
                VerticalOptions="Center"
                VerticalTextAlignment="Center" /&gt;
            &lt;Entry
                HorizontalOptions="End"
                IsPassword="True"
                Placeholder="Password"
                Text="{Binding Password}"
                WidthRequest="150" /&gt;
        &lt;/HorizontalStackLayout&gt;
        &lt;HorizontalStackLayout Margin="10,10,10,0"&gt;
            &lt;Button
                BackgroundColor="Gray"
                Command="{Binding SubmitCommand}"
                Margin="5"
                Text="Submit" /&gt;
            &lt;Button
                BackgroundColor="Gray"
                Margin="5"
                Text="Create Account" /&gt;
            &lt;Button
                BackgroundColor="Gray"
                Margin="5"
                Text="Forgot Password" /&gt;
        &lt;/HorizontalStackLayout&gt;
        &lt;Editor
            FontSize="Small"
            HeightRequest="300"
            IsTextPredictionEnabled="True"
            Margin="10"
            MaxLength="5"
            Placeholder="Explain yourself here (up to 500
                characters)"
            PlaceholderColor="Red"
            Text="{Binding LostPasswordExcuse}"
            TextColor="Blue"
            VerticalTextAlignment="Start"
            x:Name="LoginEditor"&gt;
            &lt;Editor.Behaviors&gt;
                &lt;behaviors:EventToCommandBehavior
                    EventName="Completed"
                    Command="{Binding EditorCompleted
                        Command}" /&gt;
            &lt;/Editor.Behaviors&gt;
        &lt;/Editor&gt;
        &lt;Label
            FontSize="Small"
            IsVisible="{Binding EditorContentVisible}"
            LineBreakMode="WordWrap"
            Margin="10"
            Text="{Binding LostPasswordExcuse}"
            x:Name="EditorContents" /&gt;
    &lt;/VerticalStackLayout&gt;
&lt;/ContentPage&gt;</pre>
			<p>The Community Toolkit<a id="_idIndexMarker165"/> provides us with a much easier way to handle commands in <code>ViewModel</code>.</p>
			<h1 id="_idParaDest-73"><a id="_idTextAnchor077"/>Popups and dialogs</h1>
			<p>It is not uncommon to want to alert the user to a condition or change or to get back a bit of data from the user with an alert, as shown in <em class="italic">Figure 4</em><em class="italic">.22</em>:</p>
			<div><div><img src="img/Figure_4.22_B19723.jpg" alt="Figure 4.22 – The Alert dialog&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.22 – The Alert dialog</p>
			<p>To keep things clean, remove the Editor<a id="_idIndexMarker166"/> and its associated Label from <code>LoginPage.xaml</code> and remove the constructor and <code>ICommand</code> from <code>ViewModel</code>. We won’t need them in the final version.</p>
			<p>The <code>DisplayAlert</code> object can only be called from a page. Later, you’ll see how to handle <code>SubmitCommand</code> on the Button in <code>ViewModel</code> and send a message to the page to show the alert. For now, let’s keep things simple, and change the Button’s <code>SubmitCommand</code> to an event:</p>
			<pre class="source-code">
&lt;Button
    BackgroundColor="Gray"
    Clicked="OnSubmit"
    Margin="5"
    Text="Submit" /&gt;</pre>
			<p>The event handler is placed in the code-behind file. Notice the signature of the event handler:</p>
			<pre class="source-code">
private async void OnSubmit(object sender, EventArgs e)
 {
   await DisplayAlert(
     "Submit",
     $"You entered {vm.Name} and {vm.Password}",
     "OK");
 }</pre>
			<p>The dialog in <em class="italic">Figure 4</em><em class="italic">.22</em> displayed <a id="_idIndexMarker167"/>data but did not interact with the user (except to say to press <strong class="bold">OK</strong> to close the dialog). However, we can allow the user to make a choice and then record which button they press.</p>
			<p class="callout-heading">Event handler signature</p>
			<p class="callout"><code>OnSubmit</code> wants to be <code>async</code> because you want to call <code>DisplayAlert</code> with <code>await</code>. With events (and only events) <code>async</code> is not an async Task but rather an async void. The parameters are always an <code>Object</code> type and <code>EventArgs</code> or a type derived from <code>EventArgs</code>. The first is typically named <code>sender</code> as this is the <code>View</code> that raised the event. <code>EventArgs</code> is empty and <a id="_idIndexMarker168"/>serves as the base class for specific types of arguments that some events pass into the event handler. Since we won’t be using event handlers in the final code, you don’t have to worry too much about this.</p>
			<p>Here we’ve considered only one of the three types of alerts. Let’s look at the other two next.</p>
			<h2 id="_idParaDest-74"><a id="_idTextAnchor078"/>Presenting the user with a choice</h2>
			<p>While we’re at it, let’s look<a id="_idIndexMarker169"/> at the other two types of alerts. One asks the user to select one of two choices. We’ll add that to the <code>CreateAccount</code> button just for now.</p>
			<p>Let’s add a <code>clicked</code> event to the <code>OnCreate</code> button:</p>
			<pre class="source-code">
&lt;Button
    BackgroundColor="Gray"
    Clicked="OnCreate"
    Margin="5"
    Text="Create Account" /&gt;</pre>
			<p>And, to have a place to show the result, let’s add a label after the closing <code>HorizontalStackLayout</code> tag:</p>
			<pre class="source-code">
&lt;Label Text="Create account?" x:Name="CreateAccount" /&gt;</pre>
			<p>The code-behind file has the event handler, which will update our label:</p>
			<pre class="source-code">
private async void OnCreate(object sender, EventArgs e)
{
  CreateAccount.Text = (await DisplayAlert(
    "Create?",
    "Did you want to create an account?",
    "Yes",
    "No")).ToString();
}</pre>
			<p>DisplayA<code>lert</code> returns a Boolean, so we call <code>ToString()</code> to place it in the text field of the <code>CreateAccount</code> label. The dialog is shown in <em class="italic">Figure 4</em><em class="italic">.23</em>:</p>
			<div><div><img src="img/Figure_4.23_B19723.jpg" alt="Figure 4.23 – Using dialog to prompt a choice&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.23 – Using dialog to prompt a choice</p>
			<p>We can go further and <a id="_idIndexMarker170"/>offer the user a series of choices. This is often referred to as a <em class="italic">wizard</em>, as it can be used to walk the user through a series of actions.</p>
			<h2 id="_idParaDest-75"><a id="_idTextAnchor079"/>ActionSheet</h2>
			<p>The third variant<a id="_idIndexMarker171"/> of dialog is <code>ActionSheet</code>. Here we can put forward a number of choices and allow the user to select one. We’ll attach this to an event handler for the <strong class="bold">Forgot </strong><strong class="bold">Password</strong> button:</p>
			<pre class="source-code">
&lt;Button
    BackgroundColor="Gray"
    Clicked="OnForgotPassword"
    Margin="5"
    Text="Forgot Password" /&gt;</pre>
			<p>Here’s the event handler:</p>
			<pre class="source-code">
private async void OnForgotPassword(object sender,
  EventArgs e)
{
  CreateAccount.Text = (await DisplayActionSheet(
    "How can we solve this?", [1]
    "Cancel",   [2]
    null,       [3]
    "Get new password",
    "Show me my hint",
    "Delete account"));
}</pre>
			<p>[1] The first parameter is the title.</p>
			<p>[2] The second parameter <a id="_idIndexMarker172"/>is the text for the <strong class="bold">Cancel</strong> button.</p>
			<p>[3] The third parameter is the text for the <code>null</code>.</p>
			<p>This is followed by a list of choices. <em class="italic">Figure 4</em><em class="italic">.24</em> shows what this looks like when it runs:</p>
			<div><div><img src="img/Figure_4.24_B19723.jpg" alt="Figure 4.24 – ActionSheet&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.24 – ActionSheet</p>
			<p>Finally, there are times <a id="_idIndexMarker173"/>when we want to allow the user to enter free-form data.</p>
			<h2 id="_idParaDest-76"><a id="_idTextAnchor080"/>Displaying a prompt</h2>
			<p>The final variant<a id="_idIndexMarker174"/> of dialog provides a prompt to the user who can fill in a value. We’ll need to modify the event handler for <code>OnCreate</code> to illustrate this:</p>
			<pre class="source-code">
private async void OnCreate(object sender, EventArgs e)
{
  CreateAccount.Text = await DisplayPromptAsync(
    title:"New Account",
    message:"How old are you?",
    placeholder:"Please enter your age",
    keyboard:Keyboard.Numeric,
    accept: "OK",
    cancel: "Cancel");
}</pre>
			<p>In this variant, it is common<a id="_idIndexMarker175"/> to use named parameters, as there are many options. <em class="italic">Figure 4</em><em class="italic">.25</em> shows what this looks like:</p>
			<div><div><img src="img/Figure_4.25_B19723.jpg" alt="Figure 4.25 – Display prompt&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.25 – Display prompt</p>
			<h2 id="_idParaDest-77"><a id="_idTextAnchor081"/>Toast</h2>
			<p>A very popular alternative to dialog <a id="_idIndexMarker176"/>boxes is the <em class="italic">Toast</em> view. This is a popup that comes up from the bottom of the page (much like toast coming up out of a toaster), which displays its message and then disappears.</p>
			<p>Let’s modify the handler for <code>OnCreate</code> again, this time to display a toast:</p>
			<pre class="source-code">
private async void OnCreate(object sender, EventArgs e)
{
    CancellationTokenSource = [1]
      new CancellationTokenSource();
    var message = "Your account was created";
    ToastDuration duration = ToastDuration.Short;  [2]
    var fontSize = 14;
    var toast = Toast.Make(message, duration, fontSize);
    await toast.Show(cancellationTokenSource.Token); [3]
}</pre>
			<p>When creating a Toast, you’ll need <code>cancellationToken</code>. Fortunately, you can instantiate one from the static <code>Token</code> object from the <code>CancellationTokenSource</code> object [1] and [3].</p>
			<p>You set the duration of how long the toast will be shown with the <code>ToastDuration</code> enumeration [2]. The choices are <code>Long</code> and <code>Short</code>.</p>
			<p><em class="italic">Figure 4</em><em class="italic">.26</em> shows the Toast:</p>
			<div><div><img src="img/Figure_4.26_B19723.jpg" alt="Figure 4.26 – Toast popup&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.26 – Toast popup</p>
			<h2 id="_idParaDest-78"><a id="_idTextAnchor082"/>Snackbar</h2>
			<p>If you need more control over the appearance<a id="_idIndexMarker177"/> of your Toast, you can use the closely related <code>Snackbar</code>. <code>Snackbar</code> not only has a plethora of options, it but it also has two steps. First is the display of the toast, and second is an (optional) action – that is, what <a id="_idIndexMarker178"/>do you want to do when the toast is dismissed? In this example, we’ll display a dialog.</p>
			<p>The cornucopia of options means that the event handler is a bit more extensive than usual:</p>
			<pre class="source-code">
private async void OnCreate(object sender, EventArgs e)
{
  CancellationTokenSource =  [1]
    new CancellationTokenSource();
  var message = "Your account was created";  [2]
  var dismissalText = "Click Here to Close the SnackBar";
    [3]
  TimeSpan duration = TimeSpan.FromSeconds(10);  [4]
  Action = async () =&gt;  [5]
    await DisplayAlert(
      "Snackbar Dismissed!",
      "The user has dismissed the snackbar",
      "OK");
  var snackbarOptions = new SnackbarOptions    [6]
  {
    BackgroundColor = Colors.Red,
    TextColor = Colors.Yellow,
    ActionButtonTextColor = Colors.Black,   [7]
    CornerRadius = new CornerRadius(20),
    Font = Microsoft.Maui.Font.SystemFontOfSize(14),
    ActionButtonFont = Microsoft.Maui.Font
      .SystemFontOfSize(14)
  };
  var snackbar = Snackbar.Make(
    message,
    action,
    dismissalText,
    duration,
    snackbarOptions);
  await snackbar.Show(cancellationTokenSource.Token);
}</pre>
			<p>[1] We start by creating <code>CancellationTokenSource</code> as we did previously.</p>
			<p>[2] Create a message to be displayed in the toast.</p>
			<p>[3] Add a message that can<a id="_idIndexMarker179"/> be clicked on to dismiss the toast.</p>
			<p>[4] Define how long you want the toast to be displayed. You can use any unit of time that <code>TimeSpan</code> supports (you could have the toast display for days!).</p>
			<p>[5] The action is what will happen when the toast is dismissed.</p>
			<p>[6] Here is where we set the characteristics of the toast.</p>
			<p>[7] You can set the text color for the toast and for the dismissal text independently of each other.</p>
			<p><em class="italic">Figure 4</em><em class="italic">.27</em> shows what <code>Snackbar</code> looks like before we click on it:</p>
			<div><div><img src="img/Figure_4.27_B19723.jpg" alt="Figure 4.27 – Snackbar&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.27 – Snackbar</p>
			<p>After the user clicks on the <code>SnackBar</code> disappears, and the <a id="_idIndexMarker180"/>action is fired; in this case, the dialog box appears, as shown in <em class="italic">Figure 4</em><em class="italic">.28</em>:</p>
			<div><div><img src="img/Figure_4.28_B19723.jpg" alt="Figure 4.28 – The action after the snackbar is dismissed&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.28 – The action after the snackbar is dismissed</p>
			<p>.NET MAUI does not have<a id="_idIndexMarker181"/> a horizontal line control, but we can put the <code>BoxView</code> control to work as an excellent substitute.</p>
			<h2 id="_idParaDest-79"><a id="_idTextAnchor083"/>BoxView</h2>
			<p>One of the simplest<a id="_idIndexMarker182"/> controls is <code>BoxView</code>, which simply draws a box on the page:</p>
			<pre class="source-code">
&lt;BoxView
    Color="Red"
    CornerRadius="20"
    HeightRequest="125"
    WidthRequest="100" /&gt;</pre>
			<p><em class="italic">Figure 4</em><em class="italic">.29</em> shows the <code>BoxView</code> control:</p>
			<div><div><img src="img/Figure_4.29_B19723.jpg" alt="Figure 4.29 – A simple BoxView control&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.29 – A simple BoxView control</p>
			<p>What good is this you ask? If you make the box height very small and the width very large, you get a nice line to<a id="_idIndexMarker183"/> divide your page. If we put the following after the <strong class="bold">Password</strong> entry, but before the buttons, we can neatly divide the page:</p>
			<pre class="source-code">
        &lt;BoxView
            Color="Red"
            HeightRequest="2"
            Margin="0,20"
            WidthRequest="400" /&gt;</pre>
			<p><em class="italic">Figure 4</em><em class="italic">.30</em> shows what this looks like:</p>
			<div><div><img src="img/Figure_4.30_B19723.jpg" alt="Figure 4.30 – Using the BoxView control to draw a line&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.30 – Using the BoxView control to draw a line</p>
			<p>Many UI experts like<a id="_idIndexMarker184"/> to frame controls with a border, potentially with a <em class="italic">drop shadow</em>. To do this you’ll want to use a <code>Frame</code> control.</p>
			<h2 id="_idParaDest-80"><a id="_idTextAnchor084"/>Frame</h2>
			<p>If you wish to create a border<a id="_idIndexMarker185"/> around another control, you’ll want to use a <code>Frame</code> control. <code>Frame</code> lets you define the color of the border, <code>CornerRadius</code>, and whether or not the frame has a shadow. Let’s create a frame around the <code>Password</code> entry field:</p>
			<pre class="source-code">
&lt;Frame
     BorderColor="Blue"
     CornerRadius="5"&gt;
     &lt;Entry
         HorizontalOptions="End"
         IsPassword="True"
         Placeholder="Password"
         Text="{Binding Password}"
         WidthRequest="150" /&gt;
 &lt;/Frame&gt;</pre>
			<p><em class="italic">Figure 4</em><em class="italic">.31</em> shows the<a id="_idIndexMarker186"/> result:</p>
			<div><div><img src="img/Figure_4.31_B19723.jpg" alt="Figure 4.31 – Putting a frame around the Password entry&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.31 – Putting a frame around the Password entry</p>
			<p>You control the color of the <code>BoxView</code> control and a number of other controls by painting the color using Brushes.</p>
			<h1 id="_idParaDest-81"><a id="_idTextAnchor085"/>Brushes</h1>
			<p>You can fill in the color of any number<a id="_idIndexMarker187"/> of controls using a brush. The easiest place to see this in action is with a <code>BoxView</code> control, or with <code>Frame</code>.</p>
			<p>There are three types of brushes, <strong class="bold">Solid</strong>, <strong class="bold">Linear Gradient</strong>, and <strong class="bold">Radial Gradient</strong>. Let’s explore them in a bit more detail.</p>
			<h2 id="_idParaDest-82"><a id="_idTextAnchor086"/>The Solid brush</h2>
			<p>The Solid Brush is used when <a id="_idIndexMarker188"/>you want to fill a control with a single color. Typically, the<a id="_idIndexMarker189"/> solid brush is implicit in the <code>BackgroundColor</code> property of the control, as we saw above when drawing the <code>BoxView</code> control.</p>
			<h2 id="_idParaDest-83"><a id="_idTextAnchor087"/>LinearGradientBrush</h2>
			<p><code>LinearGradientBrush</code> paints an area <a id="_idIndexMarker190"/>with a blend of two or more colors along a line called <a id="_idIndexMarker191"/>the gradient axis. You specify a start point and an endpoint, and then you specify stop points (where the colors switch) along the way.</p>
			<p>The start and endpoints are relative to the borders of the painted area, with <code>0,0</code> being the upper left corner (and the default start) and <code>1,1</code> being the lower right (and the default stop).</p>
			<p>To illustrate this, I’ll move the frame from around the password to a space of its own:</p>
			<pre class="source-code">
&lt;Frame
    BorderColor="Blue"
    CornerRadius="10"
    HasShadow="True"
    HeightRequest="100"
    WidthRequest="100"&gt;
    &lt;Frame.Background&gt;  [1]
        &lt;LinearGradientBrush EndPoint="1,0"&gt; [2]
            &lt;GradientStop Color="Yellow" Offset="0.2" /&gt;
              [3]
            &lt;GradientStop Color="Red" Offset="0.1" /&gt; [4]
        &lt;/LinearGradientBrush&gt;
    &lt;/Frame.Background&gt;
&lt;/Frame&gt;</pre>
			<p>[1] Here we create a <code>Background</code> property on <code>Frame</code>.</p>
			<p>[2] Within that, create <code>LinearGradientBrush</code>.</p>
			<p>Note that we specify <code>EndPoint</code> but not <code>StartPoint</code>, as we’re using the default <code>StartPoint</code> of <code>0,0</code>. By going <a id="_idIndexMarker192"/>from <code>0,0</code> to <code>1,0</code>, we create a horizontal gradient.</p>
			<p>[3] We have set the<a id="_idIndexMarker193"/> first <code>GradientStop</code> at <code>0.2</code>.</p>
			<p>[4] We set the second <code>GradientStop</code> at <code>0.1</code>, giving us about twice as much yellow as red.</p>
			<p><em class="italic">Figure 4</em><em class="italic">.32</em> shows the result:</p>
			<div><div><img src="img/Figure_4.32_B19723.jpg" alt="Figure 4.32 – LinearGradientBrush&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.32 – LinearGradientBrush</p>
			<p class="callout-heading">Gradient stops</p>
			<p class="callout">Gradient stops indicate the position along the gradient vector, ranging from <code>0</code> to <code>1</code>. In short, the first gradient shown here is two-tenths of the way, and the second is one-tenth of the way along the gradient vector.</p>
			<p>Gradients come in two<a id="_idIndexMarker194"/> flavors: linear, as shown in the previous example, and radial, as<a id="_idIndexMarker195"/> explained next.</p>
			<h2 id="_idParaDest-84"><a id="_idTextAnchor088"/>RadialGradientBrush</h2>
			<p>If we do the same<a id="_idIndexMarker196"/> thing with <code>RadialGradientBrush</code>, our coordinates start at the center, which defaults to <code>0.5,0.5</code>, and we supply the radius as <a id="_idIndexMarker197"/>a double. The default value is <code>0.5</code>. Let’s reproduce <code>LinearGradient</code> shown previously using <code>RadialGradientBrush</code>:</p>
			<pre class="source-code">
&lt;Frame
    BorderColor="Blue"
    CornerRadius="10"
    HasShadow="True"
    HeightRequest="100"
    WidthRequest="100"&gt;
    &lt;Frame.Background&gt;
        &lt;RadialGradientBrush&gt;
            &lt;GradientStop Color="Yellow" Offset="0.2" /&gt;
            &lt;GradientStop Color="Red" Offset="0.1" /&gt;
        &lt;/RadialGradientBrush&gt;
    &lt;/Frame.Background&gt;
&lt;/Frame&gt;</pre>
			<p>Notice that we did not specify the center or the radius, so we are using the default values. <em class="italic">Figure 4</em><em class="italic">.33</em> illustrates the result:</p>
			<div><div><img src="img/Figure_4.33_B19723.jpg" alt="Figure 4.33 – RadialGradientBrush&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.33 – RadialGradientBrush</p>
			<p>With this, we’ve come<a id="_idIndexMarker198"/> to the end of a very important <a id="_idIndexMarker199"/>chapter.</p>
			<h1 id="_idParaDest-85"><a id="_idTextAnchor089"/>Summary</h1>
			<p>This has been a long chapter, and we’ve covered many things, but if you break it down, the real topics were as follows:</p>
			<ul>
				<li>MVVM</li>
				<li><code>DataBinding</code></li>
				<li>Controls</li>
			</ul>
			<p>Of course, controls are a pretty big topic, and we’re not done. In the next chapter, we’ll talk about layouts, but we’ll also discuss how you style controls, animate controls, and more.</p>
			<p class="callout-heading">The 90% you use 90% of the time</p>
			<p class="callout">I did not try to cover every control, nor did I cover all the properties of the controls we did see. That would have turned this book into an encyclopedia, and my goal is to show you the 90% of .NET MAUI that you use day in and day out. If you find you need a different property or a different control, well, that’s what the (excellent) documentation is for. Just go to <a href="https://bit.ly/Liberty-Maui">https://bit.ly/Liberty-Maui</a>, or ask Google or your local AI agent, and you’ll be able to find every nook and cranny.</p>
			<p>The main takeaways from this chapter are:</p>
			<ul>
				<li>MVVM is the essential architecture for .NET MAUI. In MVVM, <code>Model</code> is the data (we’ve not seen this at work yet), <code>View</code> is the UI, and <code>ViewModel</code> is where all the logic is (or should be). We broke MVVM for much of this chapter and put the logic in the code-behind file, but that was only as a convenience and because we haven’t, yet, talked about getting data into and out of pages.</li>
				<li><code>DataBinding</code> is how you connect <code>ViewModel</code> to <code>View</code>. Rather than copying data from a property in <code>ViewModel</code> to a field in <code>View</code>, you bind that control to the property, and when the property’s value changes, the control is automagically updated.</li>
				<li>There is a boatload of controls available to you and each is displayed as a native control on all of the supported platforms: iOS, Android, Windows, and macOS. The fact that they are emitted as native controls is tremendously important. Not only will they look right, but they will also be wicked fast.</li>
				<li>Anything you can declare in XAML you can declare in C#.</li>
				<li>You can take control over the appearance of each control so that they look the same on every platform – anything from having the same color all the way to looking identical. That is entirely up to you. It only depends on how many properties you set on each control.</li>
			</ul>
			<h1 id="_idParaDest-86"><a id="_idTextAnchor090"/>Quiz</h1>
			<ol>
				<li>What are the advantages of MVVM?</li>
				<li>How do you create the connection between the <code>View</code> class and <code>ViewModel</code> so that data binding will work?</li>
				<li>What are two controls for entering data into a form?</li>
				<li>What is the most common control for displaying data?</li>
				<li>What is a <code>SnackBar</code>?</li>
			</ol>
			<h1 id="_idParaDest-87"><a id="_idTextAnchor091"/>You try it</h1>
			<ul>
				<li>Build a page that acts like a form</li>
				<li>Give it some prompts, entry fields, and buttons to accept the entry</li>
				<li>When the user fills in the field and clicks on the button, display a confirmation toast and show their entry in a label</li>
				<li>Add in an image, and for extra credit, enable that image to be clicked on and, when clicked on, display a congratulatory dialog box and/or toast (or if you are ambitious, use <code>SnackBar</code>!)</li>
				<li>Feel free to mix in additional controls</li>
			</ul>
		</div>
	</body></html>