<html><head></head><body>
		<div id="_idContainer083">
			<h1 id="_idParaDest-123" class="chapter-number"><a id="_idTextAnchor129"/>7</h1>
			<h1 id="_idParaDest-124"><a id="_idTextAnchor130"/>Understanding Navigation</h1>
			<p>Until now, we’ve been working with one page at a time, with no way to get to a page except by setting it in <strong class="source-inline">AppShell.xaml</strong>. Of course, this will not do for a real application, so in this chapter, we’ll look at various options for navigating from page to page. As you’ll see, .NET MAUI uses <em class="italic">shell navigation</em>, a process we’ll look at in <span class="No-Break">some depth.</span></p>
			<p>This chapter includes the <span class="No-Break">following topics:</span></p>
			<ul>
				<li>Exploring <span class="No-Break">the TabBar</span></li>
				<li>Creating the About and <span class="No-Break">Buddies pages</span></li>
				<li><span class="No-Break">Shell navigation</span></li>
				<li><span class="No-Break">Routing</span></li>
				<li>Passing values from page <span class="No-Break">to page</span></li>
			</ul>
			<h1 id="_idParaDest-125"><a id="_idTextAnchor131"/>Technical requirements</h1>
			<p>To get the most out of this chapter, you’ll need a copy of Visual Studio. The source code for the completed code shown in this chapter can be found here: <a href="https://github.com/PacktPublishing/.NET-MAUI-for-C-Sharp-Developers/tree/Navigation">https://github.com/PacktPublishing/.NET-MAUI-for-C-Sharp-Developers/tree/Navigation</a>. If you want to follow along, start with the code from the completion of <a href="B19723_06.xhtml#_idTextAnchor115"><span class="No-Break"><em class="italic">Chapter 6</em></span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-126"><a id="_idTextAnchor132"/>Exploring the TabBar</h1>
			<p>ForgetMeNot’s principal form of navigation will be the <strong class="source-inline">TabBar control</strong>. A Tab Bar is a way to jump to a specific <a id="_idIndexMarker295"/>page without going through other pages. It consists of icons, and sometimes descriptive text, across the bottom of every page, as shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer077" class="IMG---Figure">
					<img src="image/B19723_Figure_7.1.jpg" alt="Figure 7.1 – Tab Bar in the completed project&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.1 – Tab Bar in the completed project</p>
			<p>The four tabs at the bottom, as shown in <span class="No-Break"><em class="italic">Figure 7</em></span><em class="italic">.1</em>, will take the user directly to the <span class="No-Break">respective page.</span></p>
			<p class="callout-heading">The Home page</p>
			<p class="callout">Here you <a id="_idIndexMarker296"/>see the tabs we created on <strong class="source-inline">MainPage,</strong> which we created in <a href="B19723_04.xhtml#_idTextAnchor054"><span class="No-Break"><em class="italic">Chapter 4</em></span></a>, one of which we’ve <span class="No-Break">titled </span><span class="No-Break"><strong class="bold">Home</strong></span><span class="No-Break">.</span></p>
			<p>You create <strong class="source-inline">TabBar</strong> in <strong class="source-inline">AppShell.xaml</strong>. Within the <strong class="source-inline">TabBar</strong> tags, you provide one <strong class="source-inline">ShellContent</strong> element for each page. <strong class="source-inline">ShellContent</strong> has a <strong class="source-inline">Title</strong> property (the text displayed), an <strong class="source-inline">Icon</strong> property (the image displayed), and <strong class="source-inline">ContentTemplate</strong>, which specifies the content for <span class="No-Break">this tab:</span></p>
			<pre class="source-code">
&lt;TabBar &gt;
    &lt;ShellContent
        Title="Home"
        ContentTemplate="{DataTemplate view:MainPage}"
        Icon="icon_home" /&gt;
    &lt;ShellContent
        Title="About"
        ContentTemplate="{DataTemplate view:About}"
        Icon="icon_about" /&gt;
    &lt;ShellContent
        Title="Preferences"
        ContentTemplate="{DataTemplate view:Preferences}"
        Icon="icon_prefs" /&gt;
    &lt;ShellContent
        Title="Buddies"
        ContentTemplate="{DataTemplate view:BuddyList}"
        Icon="icon_buddies" /&gt;
&lt;/TabBar&gt;</pre>
			<p>Next, we need to <a id="_idIndexMarker297"/>create the pages that each <strong class="source-inline">ContentTemplate</strong> points to so that we can see <strong class="source-inline">TabBar</strong> <span class="No-Break">at work.</span></p>
			<h1 id="_idParaDest-127"><a id="_idTextAnchor133"/>Creating the About and Buddies pages</h1>
			<p>To see this navigation <a id="_idIndexMarker298"/>work, you’ll need to add the missing pages: <strong class="bold">About</strong> and <strong class="bold">Buddies</strong>. Creating the <strong class="bold">About</strong> page is very <a id="_idIndexMarker299"/>straightforward. Right-click on the <strong class="bold">View</strong> folder and choose <strong class="bold">Add New Item</strong>. If needed, expand the <span class="No-Break"><strong class="bold">AddNewItem</strong></span><span class="No-Break"> dialog.</span></p>
			<p>From the left panel, choose <strong class="bold">.NET MAUI</strong> and on the right, choose <strong class="bold">.NET MAUI ContentPage (XAML)</strong>. At the bottom of the dialog, put in the name for the new page: <strong class="source-inline">AboutPage.xaml</strong>, as shown in <span class="No-Break"><em class="italic">Figure 7</em></span><span class="No-Break"><em class="italic">.2</em></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer078" class="IMG---Figure">
					<img src="image/B19723_Figure_7.2.jpg" alt="Figure 7.2 – Creating AboutPage&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.2 – Creating AboutPage</p>
			<p>The <strong class="bold">About</strong> page is very simple and does not require any new types <span class="No-Break">of controls.</span></p>
			<h2 id="_idParaDest-128"><a id="_idTextAnchor134"/>Assembling the About page</h2>
			<p>Let’s assemble the <strong class="bold">About</strong> page quickly, as there <a id="_idIndexMarker300"/>is nothing new here. We’ll need the XAML to display the current version, and so on, and we’ll need the code-behind file to establish <strong class="source-inline">BindingContext</strong>. Finally, we’ll need <strong class="source-inline">ViewModel</strong>. Eventually, the <strong class="bold">About</strong> page will ask the service for its version number, but for now, we’ll <span class="No-Break">hardcode that:</span></p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage xmlns="http://schemas.microsoft.com/dotnet/
  2021/maui"
   xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ForgetMeNotDemo.View.AboutPage"
             Title="About"&gt;
    &lt;VerticalStackLayout Margin="10" Spacing="10"&gt;
        &lt;HorizontalStackLayout Spacing="10"&gt;
            &lt;Label
                FontAttributes="Bold"
                FontSize="22"
                Text="About this app"
                VerticalOptions="End" /&gt;
            &lt;Label
                FontSize="22"
                Text="v0.1"
                VerticalOptions="End" /&gt;
        &lt;/HorizontalStackLayout&gt;
        &lt;HorizontalStackLayout Spacing="10"&gt;
            &lt;Label
                FontAttributes="Bold"
                FontSize="22"
                Text="Api Version"
                VerticalOptions="End" /&gt;
            &lt;Label
                FontSize="22"
                Text="{Binding ApiVersion}"
                VerticalOptions="End" /&gt;
        &lt;/HorizontalStackLayout&gt;
        &lt;Label
            HeightRequest="60"
            Text="This app is written in XAML and C# with
            .NET MAUI by Jesse Liberty and Rodrigo Juarez."
            VerticalTextAlignment="Center" /&gt;
        &lt;Label
            HeightRequest="60"
            Text="Concept and original design by Robin
              Liberty"
            VerticalTextAlignment="Center" /&gt;
        &lt;Label FontSize="Small" Text="Icons from IconScout:
          https://iconscout.com" /&gt;
    &lt;/VerticalStackLayout&gt;
&lt;/ContentPage&gt;</pre>
			<p>The code-behind file looks<a id="_idIndexMarker301"/> like this (<span class="No-Break">for now):</span></p>
			<pre class="source-code">
  public AboutPage()
  {
    BindingContext = new AboutViewModel();
    InitializeComponent();
  }</pre>
			<p>And, finally, <strong class="source-inline">ViewModel</strong> looks<a id="_idIndexMarker302"/> like this (<span class="No-Break">for now):</span></p>
			<pre class="source-code">
namespace ForgetMeNotDemo.ViewModel;
[ObservableObject]
public partial class AboutViewModel
{
  [ObservableProperty] private string apiVersion;
  public AboutViewModel()
  {
    apiVersion = "1.0";
  }
}</pre>
			<p>The <strong class="bold">About</strong> page currently looks <span class="No-Break">like this:</span></p>
			<div>
				<div id="_idContainer079" class="IMG---Figure">
					<img src="image/B19723_Figure_7.3.jpg" alt="Figure 7.3 – The About page&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.3 – The About page</p>
			<p>That will give us something to <span class="No-Break">work with.</span></p>
			<p>Next, we need a <strong class="bold">BuddiesPage</strong>, that is, a page that lists all the user’s friends and relatives. Each Buddy<a id="_idIndexMarker303"/> will have a list of <strong class="bold">preferences</strong> that we can use when it is time to buy them <span class="No-Break">a present.</span></p>
			<p>For now, we’ll just use the out-of-the-box page that we get when we right-cli<a id="_idTextAnchor135"/>ck on <strong class="bold">View</strong> and add a new <strong class="bold">.NET MAUI XAML</strong> page, as shown in <span class="No-Break"><em class="italic">Figure 7</em></span><span class="No-Break"><em class="italic">.4</em></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer080" class="IMG---Figure">
					<img src="image/B19723_Figure_7.4.jpg" alt="Figure 7.4 – Creating the Buddies page&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.4 – Creating the Buddies page</p>
			<p>Next, open <strong class="source-inline">BuddiesPage.xaml</strong> and make one small change. Where the <strong class="source-inline">Text</strong> field of the <strong class="source-inline">Label</strong>  control says, <strong class="source-inline">Welcome to .NET MAUI!</strong> change it to <strong class="source-inline">Buddies Page</strong> so that we’ll know <a id="_idIndexMarker304"/>where we are when we navigate there. If you want, add a space between the words in the title <span class="No-Break">as well:</span></p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage xmlns="http://schemas.microsoft.com/dotnet/
  2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ForgetMeNotDemo.View.BuddiesPage"
             Title="Buddies Page"&gt;
    &lt;VerticalStackLayout&gt;
        &lt;Label
            Text="Buddies Page"
            VerticalOptions="Center"
            HorizontalOptions="Center" /&gt;
    &lt;/VerticalStackLayout&gt;
&lt;/ContentPage&gt;</pre>
			<p>Next, create <strong class="source-inline">BuddiesViewModel</strong> by right-clicking on the <strong class="bold">ViewModel</strong> folder and choosing <strong class="bold">Add</strong> | <span class="No-Break"><strong class="bold">Class</strong></span><span class="No-Break">.</span></p>
			<p>Finally, we need to tell the app where to start. We’ll do that in <strong class="source-inline">App.xaml.cs</strong> where we will set <strong class="source-inline">MainPage</strong> to be the new <strong class="source-inline">AppShell</strong> (which is how we’ll kick off the program and set ourselves up for shell navigation <span class="No-Break">as described):</span></p>
			<pre class="source-code">
namespace ForgetMeNotDemo;
public partial class App : Application
{
public App()
{
InitializeComponent();
MainPage = new AppShell();
}
}</pre>
			<p>Here is what <strong class="source-inline">AppShell.xaml</strong> should<a id="_idIndexMarker305"/> look <span class="No-Break">like now:</span></p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;Shell
    Shell.FlyoutBehavior="Disabled"
    x:Class="ForgetMeNotDemo.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:local="clr-namespace:ForgetMeNotDemo"
    xmlns:view="clr-namespace:ForgetMeNotDemo.View"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"&gt;
    &lt;TabBar&gt;
        &lt;ShellContent
            Title="Home"
            ContentTemplate="{DataTemplate view:MainPage}"
            Icon="icon_home" /&gt;
        &lt;ShellContent
            Title="About"
            ContentTemplate="{DataTemplate view:AboutPage}"
            Icon="icon_about" /&gt;
        &lt;ShellContent
            Title="Preferences"
            ContentTemplate="{DataTemplate
              view:PreferencesPage}"
            Icon="icon_prefs" /&gt;
        &lt;ShellContent
            Title="Buddies"
            ContentTemplate="{DataTemplate
              view:BuddiesPage}"
            Icon="icon_buddies" /&gt;
    &lt;/TabBar&gt;
&lt;/Shell&gt;</pre>
			<p>One more thing. Notice that each tab has an icon. To make that work and look as intended, you’ll either need to find icons online or get them by checking out the source code for this chapter in the <span class="No-Break"><strong class="source-inline">Navigation</strong></span><span class="No-Break"> branch.</span></p>
			<p>In either case, simply<a id="_idIndexMarker306"/> copy the images to the <strong class="source-inline">resources\image</strong> folder of your project, replacing the three dots with the full path on <span class="No-Break">your computer.</span></p>
			<p class="callout-heading">Image support</p>
			<p class="callout">Those of you who have worked with <strong class="source-inline">Xamarin.Forms</strong> will be delighted to know that the days of creating different size images and distributing them to the various folders for both iOS and Android are now over. Put the <strong class="source-inline">.svg</strong> file into the <strong class="source-inline">images</strong> folder and .NET MAUI will do all the rest for you! (You can use a <strong class="source-inline">.png</strong> file, but it won’t scale as nicely. To make the point, I made our flower image a <strong class="source-inline">.</strong><span class="No-Break"><strong class="source-inline">png</strong></span><span class="No-Break"> file.)</span></p>
			<p>Run the application and click on the various tabs. You should see it navigating to the various pages we’ve created. Notice in <span class="No-Break"><em class="italic">Figure 7</em></span><em class="italic">.5</em> that the current tab <em class="italic">lights up</em> – you get the effect for free and you do not have to create two icons, one for each of the currently selected and not <span class="No-Break">selected icons.</span></p>
			<div>
				<div id="_idContainer081" class="IMG---Figure">
					<img src="image/B19723_Figure_7.5.jpg" alt="Figure 7.5 – The Home tab “lit up”&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.5 – The Home tab “lit up”</p>
			<p>Now that our tabs and pages are in place, it is time to look at how you move from one page to another when there <a id="_idIndexMarker307"/>aren’t tabs for the pages you want to <span class="No-Break">navigate to.</span></p>
			<h1 id="_idParaDest-129"><a id="_idTextAnchor136"/>Shell navigation</h1>
			<p>That would be all you need to know about navigation if your app was just going to have the four pages that we’re <a id="_idIndexMarker308"/>accessing by the TabBar. Of course, you’ll almost certainly have more pages than that, and you’ll want a way to navigate from one page <span class="No-Break">to another.</span></p>
			<p>To see navigation from one page to another without using <strong class="source-inline">TabBar</strong>, we’ll need another page to navigate to. Let’s create the <strong class="bold">BuddyDetailsPage</strong>, which we’ll navigate to from the <span class="No-Break"><strong class="bold">Buddies</strong></span><span class="No-Break"> page.</span></p>
			<p>Once again, take the out-of-the-box page, but change <strong class="source-inline">Label</strong> to say <strong class="source-inline">Buddy </strong><span class="No-Break"><strong class="source-inline">Details Page</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage xmlns="http://schemas.microsoft.com/dotnet/
  2021/maui"
     xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
         x:Class="ForgetMeNotDemo.View.BuddyDetailsPage"
             Title="Buddy Details Page"&gt;
    &lt;VerticalStackLayout&gt;
        &lt;Label
            Text="Buddy Details Page"
            VerticalOptions="Center"
            HorizontalOptions="Center" /&gt;
    &lt;/VerticalStackLayout&gt;
&lt;/ContentPage&gt;</pre>
			<p>Next, return to the <strong class="bold">Buddies</strong> page, add a <strong class="source-inline">Button</strong> that says <strong class="source-inline">Go to details</strong> and give it the <span class="No-Break"><strong class="source-inline">GoToDetailsCommand</strong></span><span class="No-Break"> command:</span></p>
			<pre class="source-code">
        &lt;Button Text="Go to details"
               Command="{Binding GoToDetailsCommand}" /&gt;</pre>
			<p>In the <strong class="bold">BuddiesViewModel</strong> page, we’ll need to handle the <strong class="source-inline">GoToDetails</strong> command. The goal of our handler will be to<a id="_idIndexMarker309"/> navigate to <strong class="bold">BuddyDetails</strong>. We do that with <em class="italic">shell navigation</em>. Here’s the code to <span class="No-Break">do so:</span></p>
			<pre class="source-code">
[RelayCommand]
private async Task GoToDetails()
{
  await Shell.Current.GoToAsync("buddydetailspage");
}</pre>
			<p class="callout-heading">BindingContext</p>
			<p class="callout">Remember that for the <strong class="source-inline">GoToDetails</strong> command to work, you must bind the XAML to <strong class="source-inline">ViewModel</strong> by <a id="_idIndexMarker310"/>setting <strong class="source-inline">BindingContext</strong> in the <span class="No-Break">code-behind file.</span></p>
			<p>In this common construct, you pass in the page name to the <strong class="source-inline">GoToAsync</strong> static method on <strong class="source-inline">Shell.Current</strong>. The key question is, <em class="italic">how does it know what buddydetailspage is</em>, <em class="italic">given that</em> <strong class="source-inline">buddydetailspage</strong> <em class="italic">is a string?</em> The answer to that lies in <em class="italic">routing</em>, which we’ll <span class="No-Break">cover next.</span></p>
			<h1 id="_idParaDest-130"><a id="_idTextAnchor137"/>Routing</h1>
			<p>In .NET MAUI, you<a id="_idIndexMarker311"/> register your routes in <strong class="source-inline">AppShell.xaml.cs</strong>. For example, to connect the <strong class="source-inline">buddydetailspage</strong> string to the actual <strong class="source-inline">BuddyDetailsPage,</strong> you would <span class="No-Break">add this:</span></p>
			<pre class="source-code">
Routing.RegisterRoute("buddydetailspage",
  typeof(BuddyDetailsPage));</pre>
			<p>We’ll create a routing entry for all of the pages, including the ones we can access through tabs. This will give us the<a id="_idIndexMarker312"/> <span class="No-Break">greatest flexibility:</span></p>
			<pre class="source-code">
public partial class AppShell : Shell
{
  public AppShell()
  {
    InitializeComponent();
    Routing.RegisterRoute("buddiespage",
      typeof(BuddiesPage));
    Routing.RegisterRoute("buddydetailspage",
      typeof(BuddyDetailsPage));
    Routing.RegisterRoute("aboutpage", typeof(AboutPage));
    Routing.RegisterRoute("preferencespage",
      typeof(PreferencesPage));
    Routing.RegisterRoute("loginpage", typeof(LoginPage));
    Routing.RegisterRoute("mainpage", typeof(MainPage));
  }
}</pre>
			<p>Now the routing works as if by magic. You tell it where you want to go, passing in the route, and .NET MAUI handles the navigation. Start up the program if it isn’t already running and tap on the <strong class="bold">Buddies</strong> tab. On the <strong class="bold">Buddies</strong> page, tap on the <strong class="bold">Details</strong> button, and hey presto! You should be on the <strong class="bold">Buddy Details</strong> page. <span class="No-Break">Easy peasy.</span></p>
			<p>It’s great to be able to move from one page to another, but often the first page has data that the second page needs. So, let’s look at how you send that data to the <span class="No-Break">second page.</span></p>
			<h1 id="_idParaDest-131"><a id="_idTextAnchor138"/>Passing values from page to page</h1>
			<p>When navigating from one page to another, you’ll often want to pass in a value. There are a few ways to do this; here are<a id="_idIndexMarker313"/> the two <span class="No-Break">most common:</span></p>
			<ol>
				<li>Using the <strong class="source-inline">url (?)</strong> syntax as you might with a URL to navigate to a page on <span class="No-Break">the web</span></li>
				<li>Using navigation parameters with <span class="No-Break">a dictionary</span></li>
			</ol>
			<h2 id="_idParaDest-132"><a id="_idTextAnchor139"/>Passing values with the url (?) syntax</h2>
			<p>Let’s return to the <strong class="source-inline">Buddies</strong> page. Right now, the <strong class="source-inline">Button</strong> has a <strong class="source-inline">GoToDetailsCommand</strong><strong class="bold"> </strong>command. But the <strong class="bold">Details</strong> page <a id="_idIndexMarker314"/>needs to know which Buddy to show <a id="_idIndexMarker315"/><span class="No-Break">details about.</span></p>
			<p>We’ll modify <strong class="source-inline">RelayCommand</strong> in <strong class="source-inline">ViewModel</strong> to pass in <strong class="source-inline">BuddyId</strong>. To make this work, we need a <strong class="source-inline">Buddy</strong> object (which will have the <strong class="source-inline">Id</strong>). However, Buddy is just one of the types of users of this program, so let’s start by defining the <span class="No-Break"><strong class="source-inline">User</strong></span><span class="No-Break"> type:</span></p>
			<pre class="source-code">
[ObservableObject]
public partial class User
{
    [ObservableProperty]
    private string name;
    [ObservableProperty]  [1]
    private string id;
    [ObservableProperty]
    private List&lt;Buddy&gt; buddies;   [2]
    [ObservableProperty]
 //   private List&lt;Invitation&gt; invitations; [3]
    [ObservableProperty]
    private List&lt;Preference&gt; preferences; [4]
}</pre>
			<p>[1] Here is the <strong class="source-inline">Id</strong> property <span class="No-Break">we’ll need.</span></p>
			<p>[2] A user may have a collection of <strong class="source-inline">buddies</strong> (we’ll come back <span class="No-Break">to this).</span></p>
			<p>[3] A user may have a collection of <strong class="source-inline">invitations</strong>, which are sent out to potential <strong class="source-inline">buddies</strong> (we’ll come back to <span class="No-Break">this too).</span></p>
			<p>[4] The user has a list of <strong class="source-inline">preference</strong> objects, as we’ve <span class="No-Break">seen earlier.</span></p>
			<p>The <strong class="source-inline">Buddy</strong> class derives from the <strong class="source-inline">User</strong> class. Here it is in full, though we won’t be using most of these <a id="_idIndexMarker316"/>properties <span class="No-Break">for now:</span></p>
			<pre class="source-code">
public partial class Buddy : User
{
    [ObservableProperty] private string emailAddress;
    [ObservableProperty] private string? phoneNumber;
    [ObservableProperty] private string?
      mailingAddressLine1;
    [ObservableProperty] private string?
      mailingAddressLine2;
    [ObservableProperty] private string? website;
    [ObservableProperty] private string? twitter;
    [ObservableProperty] private string? facebook;
    [ObservableProperty] private string? instagram;
    [ObservableProperty] private string? linkedIn;
    [ObservableProperty] private string? venmoName;
    [ObservableProperty] private DateTime buddySince;
}</pre>
			<p class="callout-heading">Inheriting ObservableObject</p>
			<p class="callout">Notice that <strong class="source-inline">Buddy</strong> is not marked with the <strong class="source-inline">ObservableObject</strong> attribute. That is because it inherits from <strong class="source-inline">User</strong>, which is marked <span class="No-Break">as </span><span class="No-Break"><strong class="source-inline">ObservableObject</strong></span><span class="No-Break">.</span></p>
			<p>We will want to give<a id="_idIndexMarker317"/> the new page the <strong class="source-inline">Id</strong> of the <strong class="source-inline">Buddy</strong> object we’re passing in. We can do that using either of the methods for passing data (for example, the URL approach or <span class="No-Break">the dictionary).</span></p>
			<h3>Passing the Buddy Id</h3>
			<p>Returning to the <strong class="bold">Buddies</strong> page, there are<a id="_idIndexMarker318"/> two ways to get <strong class="source-inline">Id</strong> to the <strong class="bold">BuddiesDetail</strong> page. The first is just to pass <strong class="source-inline">Id</strong> using the <strong class="source-inline">?</strong> <span class="No-Break">syntax:</span></p>
			<pre class="source-code">
private async Task GoToDetails()
{
  await Shell.Current.GoToAsync
    ($"buddydetailspage?id={Id}");
}</pre>
			<p>If you want to pass two properties, for example, <strong class="source-inline">Id</strong> and <strong class="source-inline">Name</strong>, you concatenate them with <strong class="source-inline">&amp;&amp;</strong>. This should all be familiar to you from URLs you might use in <span class="No-Break">a browser:</span></p>
			<pre class="source-code">
private async Task GoToDetails()
{
  await Shell.Current.GoToAsync
    ($"buddydetailspage?id={Id}&amp;&amp;name={"BuddyName"});
}</pre>
			<p>This won’t work if <a id="_idIndexMarker319"/>we don’t have <strong class="source-inline">Id</strong> and <strong class="source-inline">Name</strong> in <strong class="source-inline">BuddiesViewModel</strong>, so let’s add <span class="No-Break">that here:</span></p>
			<pre class="source-code">
public partial class BuddiesViewModel
{
  [ObservableProperty] private string id = "001";
  [ObservableProperty] private string name = "jesse";</pre>
			<p>The call to <strong class="source-inline">GoToAsync</strong> will change pages to <strong class="source-inline">BuddyDetailsPage</strong> and send the parameters to the associated <span class="No-Break"><strong class="source-inline">ViewModel</strong></span><span class="No-Break"> (</span><span class="No-Break"><strong class="source-inline">BuddyDetailsViewModel</strong></span><span class="No-Break">).</span></p>
			<h3>QueryProperty</h3>
			<p>We mark up the receiving <strong class="source-inline">ViewModel</strong> with the <strong class="source-inline">QueryProperty</strong> attribute along with the name of the property<a id="_idIndexMarker320"/> to associate it with <strong class="source-inline">ViewModel</strong> and the string used in the <span class="No-Break"><strong class="source-inline">GoToAsync</strong></span><span class="No-Break"> method.</span></p>
			<p>To make that clearer, let’s create <strong class="source-inline">BuddyDetailsViewModel</strong>, and mark it as <strong class="source-inline">ObservableObject</strong>. We’ll give it two properties: <strong class="source-inline">Id</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">Name</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
[ObservableObject]
public partial class BuddyDetailsViewModel
{
  [ObservableProperty] private string id;
  [ObservableProperty] private string name;
}</pre>
			<p>We want the first parameter we passed in (<strong class="source-inline">id</strong>) to be assigned to the <strong class="source-inline">Id</strong> property, and we want the second parameter we passed in to be assigned to the <strong class="source-inline">Name</strong> property. For that, we use the <strong class="source-inline">QueryProperty</strong> attribute (placed above <span class="No-Break">the class):</span></p>
			<pre class="source-code">
using CommunityToolkit.Mvvm.ComponentModel;
namespace ForgetMeNotDemo.ViewModel;
[ObservableObject]
[QueryProperty(nameof(Id), "id")]
[QueryProperty(nameof(Name), "buddyname")]
public partial class BuddyDetailsViewModel
{
  [ObservableProperty] private string id;
  [ObservableProperty] private string name;
}</pre>
			<p>Now that you are <a id="_idIndexMarker321"/>comfortable with the two ways to pass data, let’s take a look at how we can integrate that into the flow of <span class="No-Break">the program.</span></p>
			<h3>Putting it together</h3>
			<p>On the <strong class="bold">Buddies</strong> page, the <a id="_idIndexMarker322"/>user clicks <span class="No-Break">on </span><span class="No-Break"><strong class="bold">GoToDetails</strong></span><span class="No-Break">.</span></p>
			<p>This fires the <strong class="source-inline">GoToDetails</strong> relay command <span class="No-Break">in </span><span class="No-Break"><strong class="source-inline">BuddiesViewModel</strong></span><span class="No-Break">.</span></p>
			<p>That method calls <span class="No-Break">the following:</span></p>
			<pre class="source-code">
await Shell.Current.GoToAsync
  ($"buddydetailspage?id={{Id}}&amp;&amp;buddyname={{Name}}");</pre>
			<p>This call to <strong class="source-inline">GoToAsync</strong> transfers us to <strong class="source-inline">BuddyDetailsPage</strong>, but passes in the two parameters (<strong class="source-inline">Id</strong> and <strong class="source-inline">Name</strong>) <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">BuddyDetailsViewModel</strong></span><span class="No-Break">!</span></p>
			<p><strong class="source-inline">BuddyDetailsViewModel</strong> parses the <strong class="source-inline">QueryProperty</strong> attributes and distributes the values to the <span class="No-Break">associated properties.</span></p>
			<p>The net effect is that you are now on <strong class="source-inline">BuddyDetailsPage</strong> with the <strong class="source-inline">Id</strong> and <strong class="source-inline">Name</strong> properties in the associated <strong class="source-inline">ViewModel</strong> populated <span class="No-Break">with values.</span></p>
			<p>To see this at work, go to the <strong class="source-inline">BuddyDetailsPage.xaml</strong> file and add two Label controls, one<a id="_idIndexMarker323"/> bound to <strong class="source-inline">Id</strong> and the other <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">Name</strong></span><span class="No-Break">.</span></p>
			<p>Here’s the <span class="No-Break">XAML page:</span></p>
			<pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage
    Title="Buddy Details Page"
    x:Class="ForgetMeNotDemo.View.BuddyDetailsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"&gt;
    &lt;VerticalStackLayout&gt;
        &lt;Label
            HorizontalOptions="Center"
            Text="Buddy Details Page"
            VerticalOptions="Center" /&gt;
        &lt;Label Text="{Binding Id}"/&gt;
        &lt;Label Text="{Binding Name}"/&gt;
    &lt;/VerticalStackLayout&gt;
&lt;/ContentPage&gt;</pre>
			<p>Remember to set <strong class="source-inline">BindingContext</strong> in the <span class="No-Break">code-behind page.</span></p>
			<p>Run the program and click on the <strong class="bold">Buddies</strong> tab. On the <strong class="bold">Buddies</strong> page, click on <strong class="bold">GoToDetails</strong> You will be transferred<a id="_idIndexMarker324"/> to the <strong class="bold">BuddiesDetails</strong> page, and the two values will <span class="No-Break">be displayed.</span></p>
			<p class="callout-heading">Stop right there</p>
			<p class="callout">Make sure you understand how all this hangs together before going ahead. If necessary, re-read starting with the <em class="italic">Passing values from page to </em><span class="No-Break"><em class="italic">page</em></span><span class="No-Break"> section.</span></p>
			<h2 id="_idParaDest-133"><a id="_idTextAnchor140"/>Passing values with a dictionary</h2>
			<p>At times, you will want to pass an entire object (or more) to the receiving <strong class="source-inline">ViewModel</strong>. You do this by instantiating a dictionary<a id="_idIndexMarker325"/> where the key is a string, and the value is <span class="No-Break">an object.</span></p>
			<p>Let’s revise <strong class="source-inline">GoToDetails</strong> to take an entire <strong class="source-inline">Buddy</strong> object. First, we need to create a <strong class="source-inline">Buddy</strong> object and put it <span class="No-Break">into </span><span class="No-Break"><strong class="source-inline">BuddyViewModel</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
[ObservableProperty] private Buddy rodrigo = new Buddy
{
  Id = "002",
  Name = "Rodrigo Juarez",
  Website = "https://jesseliberty.com"
};</pre>
			<p>Next, we need to create our dictionary. We can pick any arbitrary string as the key, and pass in the <strong class="source-inline">Buddy</strong> object (<strong class="source-inline">rodrigo</strong>) that we <span class="No-Break">just created:</span></p>
			<pre class="source-code">
[RelayCommand]
private async Task GoToDetails()
{
  var navigationParameter = new Dictionary&lt;string, object&gt;
  {
    {"TheBuddy", Rodrigo}
  };
  await Shell.Current.GoToAsync($"buddydetailspage",
    navigationParameter);
}</pre>
			<p>Once again, we are redirected to the <strong class="bold">BuddyDetails Page</strong> (based on the routing) but this time, the <strong class="source-inline">Buddy</strong> object itself is passed in. At the top of the <strong class="bold">BuddyDetailsPage,</strong> we indicate which <strong class="source-inline">Buddy</strong> object field to <a id="_idIndexMarker326"/>assign the incoming <strong class="source-inline">Buddy</strong> to, and we use the key from <span class="No-Break">the dictionary:</span></p>
			<pre class="source-code">
[ObservableObject]
[QueryProperty(nameof(MyBuddy), "TheBuddy")]
public partial class BuddyDetailsViewModel
{</pre>
			<p>We’ll add three properties for the page to <span class="No-Break">bind to:</span></p>
			<pre class="source-code">
[ObservableProperty] private string id;
[ObservableProperty] private string name;
[ObservableProperty] private string? website;</pre>
			<p>Notice that <strong class="source-inline">website</strong> is a nullable string. This is because it is marked as <strong class="source-inline">nullable</strong> in the <strong class="source-inline">Buddy</strong> definition. To make this work, you’ll want to enable <strong class="source-inline">nullable</strong>, at least on this page if not for <span class="No-Break">the project.</span></p>
			<p>The easiest way to manage the incoming <strong class="source-inline">Buddy</strong> object is <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
private Buddy myBuddy;
public Buddy MyBuddy
{
  get =&gt; myBuddy;
  set
  {
    Id = value.Id;
    Name = value.Name;
    Website = value.Website;
  }
}</pre>
			<p>If you go to <strong class="source-inline">BuddyDetailsPage.xaml</strong> and add a<a id="_idIndexMarker327"/> label whose text binds to <strong class="source-inline">website</strong>, the result will be as shown in <span class="No-Break"><em class="italic">Figure 7</em></span><span class="No-Break"><em class="italic">.5</em></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer082" class="IMG---Figure">
					<img src="image/B19723_Figure_7.6.jpg" alt="Figure 7.6 – The Buddy Details page after passing in the Buddy object&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.6 – The Buddy Details page after passing in the Buddy object</p>
			<h3>Putting it together</h3>
			<p>This can, at first, be confusing <a id="_idIndexMarker328"/>enough that it is worth going through the flow step <span class="No-Break">by step.</span></p>
			<p>In <strong class="source-inline">BuddiesPage,</strong> the user clicks on <strong class="bold">GoToDetails</strong> This fires <strong class="source-inline">GoToDetailsCommand</strong>, which is handled <span class="No-Break">in </span><span class="No-Break"><strong class="source-inline">BuddiesViewModel</strong></span><span class="No-Break">.</span></p>
			<p>In <strong class="source-inline">ViewModel</strong>, we have a <strong class="source-inline">Buddy</strong> property (as defined in the <strong class="source-inline">Models</strong> folder). The identifier for that <strong class="source-inline">Buddy</strong> object is <strong class="source-inline">rodrigo</strong>, and three of its fields <span class="No-Break">are initialized.</span></p>
			<p>We then assemble a dictionary to use as the parameter to the <strong class="source-inline">GoToAsync</strong> method. We pass in the name of the page we want to navigate to (as recorded in the <strong class="source-inline">AppShell.xaml.cs</strong> file in the <span class="No-Break"><strong class="source-inline">Routing.RegisterRoute</strong></span><span class="No-Break"> method).</span></p>
			<p>We also pass in the dictionary we <span class="No-Break">just created.</span></p>
			<p>.NET MAUI navigates to the page, and our dictionary is routed to the associated <strong class="source-inline">ViewModel</strong> (<strong class="source-inline">BuddyDetailsViewModel</strong>). There, the <strong class="source-inline">QueryProperty</strong> attribute associates the <strong class="source-inline">MyBuddy</strong> property with <strong class="source-inline">queryid</strong>, which we used <span class="No-Break">in </span><span class="No-Break"><strong class="source-inline">BuddiesPage</strong></span><span class="No-Break">.</span></p>
			<p>The property it matches is<a id="_idIndexMarker329"/> a <strong class="source-inline">Buddy</strong> type, so we can set the local properties with the properties from the <strong class="source-inline">Buddy</strong> object passed <span class="No-Break">in (</span><span class="No-Break"><strong class="source-inline">value</strong></span><span class="No-Break">).</span></p>
			<p>Since <strong class="source-inline">BuddyDetailsPage</strong> has <strong class="source-inline">Labels</strong> that bind to these properties in <strong class="source-inline">ViewModel</strong>, the right things <span class="No-Break">are displayed.</span></p>
			<h1 id="_idParaDest-134"><a id="_idTextAnchor141"/>Summary</h1>
			<p>In this chapter, we have focused on how you can move from one page to another without using <strong class="source-inline">TabBar</strong>, by using shell navigation and routesinstead.. We also looked at how you can pass data from the first page to the second using either URL syntax or by passing a dictionary containing the object or values you want <span class="No-Break">to send.</span></p>
			<p>In the next chapter, we will examine storing and <span class="No-Break">retrieving data.</span></p>
			<h1 id="_idParaDest-135"><a id="_idTextAnchor142"/>Quiz</h1>
			<ol>
				<li>Where do you <span class="No-Break">define </span><span class="No-Break"><strong class="source-inline">TabBar</strong></span><span class="No-Break">?</span></li>
				<li>What are the three properties of <span class="No-Break"><strong class="source-inline">TabBar ShellContent</strong></span><span class="No-Break">?</span></li>
				<li>Where are <span class="No-Break">routes registered?</span></li>
				<li>What is the method for navigating to <span class="No-Break">another page?</span></li>
				<li>What are the ways we’ve seen to pass data to <span class="No-Break">a page?</span></li>
			</ol>
			<h1 id="_idParaDest-136"><a id="_idTextAnchor143"/>You try it</h1>
			<p>Modify <strong class="source-inline">RelayCommand Submit</strong> in <strong class="source-inline">LoginViewModel</strong> to display the progress bar and then navigate to the <strong class="bold">Buddies</strong> page. Pass in the username and password, first as strings, then as a dictionary. Temporarily modify the <strong class="bold">Buddies</strong> page to display the values <span class="No-Break">passed in.</span></p>
		</div>
	</body></html>