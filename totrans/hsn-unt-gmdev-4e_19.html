<html><head></head><body>
  <div><h1 class="chapterNumber">15</h1>
    <h1 id="_idParaDest-203" class="chapterTitle">Interface Brilliance: Designing User-Friendly UI</h1>
    <p class="normal">Everything that is shown on the screen and transmitted through the speakers of a computer is a form of communication. In previous chapters, we used 3D models to let the user know that they are in a base in the middle of the mountains, and we reinforced that idea with the appropriate sound and music. But for our game, we need to communicate other information, such as the amount of life the player has left and the current score, and sometimes, it is difficult to express these things using the in-game graphics (there are some successful cases that manage to do this, such as <em class="keystroke">Dead Space</em>, but let’s keep things simple).</p>
    <p class="normal">In order to transmit this information, we need to add another layer of graphics on top of our scene, which is usually<a id="_idIndexMarker964"/> called the <strong class="keyWord">User Interface</strong> (<strong class="keyWord">UI</strong>). This will contain different visual elements, such as text fields, bars, and buttons, to prepare the user to make an informed decision, based on things such as fleeing to a safe place when their life is low.</p>
    <p class="normal">In this chapter, we will explore the following topics:</p>
    <ul>
      <li class="bulletList">Understanding the Canvas and RectTransform</li>
      <li class="bulletList">Canvas object types</li>
      <li class="bulletList">Creating a responsive UI</li>
    </ul>
    <p class="normal">Right now, these terms may mean nothing to you, but to simplify, think of the Canvas and RectTransform as the respective stage and actors of your UI drama. They’re crucial, and we’ll dive deep into how they work and play together.</p>
    <p class="normal">By the end of this chapter, you will be able to use the Unity UI system to create interfaces capable of informing the user about the state of the game, allowing them to take action by pressing buttons.</p>
    <p class="normal">We’re about to unravel how the Canvas and RectTransform work in unison to bring your game’s interface to life. It’s a bit like choreographing a dance – every element has its place and movement.</p>
    <h1 id="_idParaDest-204" class="heading-1">Understanding the Canvas and RectTransform</h1>
    <p class="normal">We are only going to focus on the in-game UI to communicate different information to the player using the Unity GUI system (or uGUI). At the time of writing, a new GUI system called UI Toolkit has been released. Even though we will introduce UI Toolkit, remember that uGUI isn’t going anywhere anytime soon. It’s crucial to grasp both to be versatile in your UI design approach. We will explore UI Toolkit in the next chapter.</p>
    <p class="normal">If you are going to work with Unity UI, you first need to understand its two main concepts—the <strong class="keyWord">Canvas</strong> and <strong class="keyWord">RectTransform</strong>. The <strong class="keyWord">Canvas</strong> is the <a id="_idIndexMarker965"/>master object that will contain and render our UI, and <strong class="keyWord">RectTransform</strong> is the<a id="_idIndexMarker966"/> feature in charge of positioning and adapting each UI element on our screen.</p>
    <p class="normal">In this section, we will be:</p>
    <ul>
      <li class="bulletList">Creating a UI with the Canvas</li>
      <li class="bulletList">Positioning elements with RectTransform</li>
    </ul>
    <p class="normal">Let’s start by using the Canvas component to create our UI.</p>
    <h2 id="_idParaDest-205" class="heading-2">Creating a UI with the Canvas</h2>
    <p class="normal">Let’s put theory <a id="_idIndexMarker967"/>into practice by creating a Canvas-based UI. We’ll start with something simple to get the ball rolling.</p>
    <p class="normal">In Unity UI, each<a id="_idIndexMarker968"/> image, text, and element you see in the UI is a GameObject with a set of proper components, but in order for them to work, they must be a child of a master GameObject with the Canvas component. This component is responsible for triggering the UI generation and drawing iterations over each child object. We can configure this component to specify exactly how that process works and adapt it to different possible requirements.</p>
    <p class="normal">To start, you can simply create a canvas with the <strong class="keyWord">GameObject</strong> | <strong class="keyWord">UI</strong> | <strong class="keyWord">Canvas</strong> option. After doing that, you will see a rectangle in the scene, which represents the user’s screen, so you can put elements inside it and preview where they will be located relative to the user’s monitor.</p>
    <p class="normal">You are probably <a id="_idIndexMarker969"/>wondering two things here. First, “<em class="keystroke">Why is the rectangle in the middle of the scene? I want it to always be on the screen!</em>” Don’t worry, because that will be exactly the case. When you edit the UI, you will see it as part of the level, as an object inside it, but when you play the game, it will always be projected over the screen, on top of every object. Also, you may be wondering why the rectangle is huge, and that’s because one pixel of the screen map corresponds to one meter on the scene when using the default <strong class="keyWord">Canvas</strong> <strong class="keyWord">Render Mode</strong>, the one called <strong class="keyWord">Screen Space - Overlay</strong>. There are other modes, but discussing them is outside of the scope of this chapter.</p>
    <p class="normal">Again, don’t <a id="_idIndexMarker970"/>worry about that; you will see all your UI elements with their proper size and position on the user’s screen when you see the game in the <strong class="keyWord">Game</strong> view. Consider setting the <strong class="keyWord">Game</strong> view size prior to editing it in the <strong class="keyWord">Scene</strong> view, given that the <strong class="keyWord">Scene</strong> view will follow the <strong class="keyWord">Game</strong> view dimensions. You can do that by clicking the dropdown saying <strong class="keyWord">Free Aspect</strong> at the top part of the <strong class="keyWord">Game</strong> panel and selecting the desired resolution or aspect ratio, <strong class="keyWord">16:9 Aspect</strong> being the most used option:</p>
    <p class="packt_figref"><img src="img/B21361_15_01.png" alt="" role="presentation"/></p>
    <p class="packt_figref">Figure 15.1: A default image UI element—a white box</p>
    <p class="normal">Before adding elements to our UI, it’s worth noting that when you created the UI, a second object was created alongside the Canvas, called <strong class="keyWord">EventSystem</strong>. This object is not necessary to render<a id="_idIndexMarker971"/> a UI but is necessary if you want the UI to be interactable, which means including actions such as clicking buttons, introducing text in fields, or navigating the UI with the joystick. The <strong class="keyWord">EventSystem</strong> component is responsible for sampling the user input, such as with <a id="_idIndexMarker972"/>a keyboard, mouse, or joystick, and sending that data to the UI to react accordingly. We can change <a id="_idIndexMarker973"/>the exact buttons to interact with the UI, but the defaults are OK for<a id="_idIndexMarker974"/> now, so just know that you need this object if you want to interact with the UI. If for some reason you delete the object, you can recreate it again in <strong class="keyWord">GameObject </strong>|<strong class="keyWord"> UI </strong>|<strong class="keyWord"> Event System</strong>.</p>
    <p class="normal">You’re building a great foundation. Keep this momentum going, as the principles you’re learning now will be vital as you advance.</p>
    <h2 id="_idParaDest-206" class="heading-2">Positioning elements with RectTransform</h2>
    <p class="normal">In Unity UI, each image, text, and element you see in the UI is a GameObject with a set of proper <a id="_idIndexMarker975"/>components according to its usage, but you will see that most of them have one component in common—<strong class="keyWord">RectTransform</strong>. Each piece of the UI is essentially a rectangle filled with text or images and has different behavior, so it is important to understand how the <strong class="keyWord">RectTransform</strong> component works and how to edit it.</p>
    <p class="normal">In order to <a id="_idIndexMarker976"/>experiment with this component, let’s create and edit the position of a simple white box element for the UI as follows:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Go to <strong class="screenText">GameObject | UI | Image</strong>. After that, you will see that a new GameObject is created within the <strong class="screenText">Canvas</strong> element. Unity will take care of setting any new UI element as a child of the Canvas; outside it, the element will not be visible:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_02_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.2: A default image UI element—a white box</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="2">Click <a id="_idIndexMarker977"/>on the <strong class="screenText">2D</strong> button in the top bar of the <strong class="screenText">Scene</strong> view. This will just change the perspective of the <strong class="screenText">Scene</strong> view to one that is better suited to edit the UI (and also 2D games):</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_03_PE.png" alt="A picture containing screenshot, text, font, number  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.3: The 2D button location</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="3">Double-click<a id="_idIndexMarker978"/> on the Canvas in the <strong class="screenText">Hierarchy</strong> window to make the UI fit entirely in the <strong class="screenText">Scene</strong> view. This will allow us to edit the UI clearly. You can also navigate the UI using the mouse scroll wheel to zoom, and click and drag the scroll wheel to pan the camera.</li>
      <li class="numberedList">Enable the <strong class="screenText">RectTransform</strong> tool, which is the fifth button in the top-left part of the Unity Editor (or press the <em class="keystroke">T</em> key). This will enable the rectangle gizmo, which allows you to move, rotate, and scale 2D elements. While the transform tools we have used so far work with the UI, they are not ideal. One example is that changing the size of a UI element is not the same as scaling the <a id="_idIndexMarker979"/>element; we want to modify the width and height of the element but keep its scale for animations, preventing distortion in 9-sliced images (there’s more on this later in this chapter).</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_04_PE.png" alt="A picture containing text, screenshot, design  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.4: The rectangle gizmo button</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="5">Using the<a id="_idIndexMarker980"/> rectangle gizmo, drag the object to move it, use the blue dots to change its size, or locate the mouse in a position near the blue dots until the cursor becomes a curved arrow to rotate it. Consider that resizing the object using this gizmo is not the same as scaling the object (there’ll be more on that shortly):</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_05_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.5: The rectangle gizmo for editing 2D elements</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="6">In<a id="_idIndexMarker981"/> the <strong class="screenText">Inspector</strong> window, notice <a id="_idIndexMarker982"/>that after changing the size of the UI element, the <strong class="screenText">Rect Transform</strong> settings’ <strong class="screenText">Scale</strong> property is still at <code class="inlineCode">1</code>, <code class="inlineCode">1</code>, <code class="inlineCode">1</code>, but you can see how the <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> properties changed. <strong class="screenText">RectTransform</strong> is essentially a classic transform but with <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> added (among other properties that we’ll explore later). You can set the exact values you want here, expressed in pixels:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_06_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.6: The Rect Transform properties</p>
    <p class="normal">Now that we <a id="_idIndexMarker983"/>know<a id="_idIndexMarker984"/> the very basics of how to position any UI object, let’s explore the different types of elements you can add to the Canvas.</p>
    <h1 id="_idParaDest-207" class="heading-1">Canvas object types</h1>
    <p class="normal">So far, we <a id="_idIndexMarker985"/>have used the simplest Canvas object type—a white box—but there are plenty of other object types we can use, such as images, buttons, and text. All of them use <strong class="keyWord">RectTransform</strong> to define their display area, but each one has its own concepts and configurations to understand.</p>
    <p class="normal">In this section, we will explore the following Canvas object concepts:</p>
    <ul>
      <li class="bulletList">Integrating assets for the UI</li>
      <li class="bulletList">Creating UI controls</li>
    </ul>
    <p class="normal">Let’s first start exploring how we can integrate images and fonts to use in our Canvas so that we can integrate them in our UI, using the <strong class="keyWord">Images</strong> and <strong class="keyWord">Text</strong> UI object types.</p>
    <h2 id="_idParaDest-208" class="heading-2">Integrating assets for the UI</h2>
    <p class="normal">Before making our UI use<a id="_idIndexMarker986"/> nice graphics assets, we<a id="_idIndexMarker987"/> need to integrate them properly into Unity to use them in our UI. In the following screenshot, you will find the UI design we propose for our game:</p>
    <figure class="mediaobject"><img src="img/B21361_15_07_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.7: UI design</p>
    <p class="normal">On top of <a id="_idIndexMarker988"/>that, we will add a <strong class="keyWord">Pause</strong> menu, which<a id="_idIndexMarker989"/> will be activated when the user presses <em class="keystroke">Esc</em>. It will look like the following screenshot:</p>
    <p class="packt_figref"><img src="img/B21361_15_08_PE.png" alt="" role="presentation"/></p>
    <p class="packt_figref">Figure 15.8: The Pause menu design</p>
    <p class="normal">Based on<a id="_idIndexMarker990"/> these designs, we can determine <a id="_idIndexMarker991"/>that we will need the following assets:</p>
    <ul>
      <li class="bulletList">The hero’s avatar image</li>
      <li class="bulletList">A health bar image</li>
      <li class="bulletList">A <strong class="keyWord">Pause</strong> menu background image</li>
      <li class="bulletList">A <strong class="keyWord">Pause</strong> menu button image</li>
      <li class="bulletList">Font for the text</li>
    </ul>
    <p class="normal">As always, we can find the required assets on the internet or in the Asset Store. In my case, I will use a mixture of both. Let’s start with the simplest one—the avatar. Follow the following steps:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Download the avatar you want from the internet, such as an image with the face of a character.</li>
      <li class="numberedList">Add it to your project, either by dragging it to the <strong class="screenText">Project</strong> window or by using the <strong class="screenText">Assets | Import New Asset</strong> option. Add it to the <code class="inlineCode">Sprites</code> folder.</li>
      <li class="numberedList">Select the texture, and in the <strong class="screenText">Inspector</strong> window, set the <strong class="screenText">Texture Type</strong> setting to <strong class="screenText">Sprite (2D and UI)</strong>. All textures are prepared for use in 3D by default. This option prepares our texture to be used in 2D contexts, like the UI and also 2D games.</li>
    </ol>
    <p class="normal">For the bars, buttons, and <a id="_idIndexMarker992"/>the window background, I’ll show you how to pick the right assets from the Asset Store. It’s a goldmine for UI elements, and I’ll point out a few gems. In my case, I found the package in the following <a id="_idIndexMarker993"/>screenshot a good one to use with my UI. As usual, remember that this exact package might not be available right now. </p>
    <p class="normal">If so, remember to look for another similar package, or pick the sprites from the GitHub repo:</p>
    <p class="packt_figref"><img src="img/B21361_15_09_PE.png" alt="A screenshot of a video game  Description automatically generated"/></p>
    <p class="packt_figref">Figure 15.9: Selected UI pack</p>
    <p class="normal">At first, the package contains lots of images configured the same way, as sprites, but we can further modify the import settings to achieve advanced behavior, which we will need for the buttons. The button asset comes with a fixed size, but what happens if you need a bigger button? One option is to use other button assets with different sizes, but this will lead to a lot of repetitions of the buttons and other assets, such as different-sized backgrounds for different windows, which will unnecessarily consume RAM.</p>
    <p class="normal">Another option is to use <a id="_idIndexMarker994"/>the <strong class="keyWord">9-slicing </strong>method, which consists of splitting an image so that the corners are separated from the other parts. This allows Unity to stretch the middle parts of the<a id="_idIndexMarker995"/> image to fit different sizes, keeping the corners at their original size, which, when combined with an image prepared for the 9-slices technique, can be used to create almost any size you need.</p>
    <p class="normal">In <em class="keystroke">Figure 15.10</em>, you<a id="_idIndexMarker996"/> can see a shape with nine slices in the bottom-left corner, and in the bottom-right corner of the same diagram, you can see the shape is stretched but keeps its corners at their original size. The top-right corner shows the shape stretched without slices. You can see how the non-sliced version is distorted:</p>
    <figure class="mediaobject"><img src="img/B21361_15_10_PE.png" alt="A picture containing screenshot, rectangle, square, line  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.10: Sliced versus non-sliced image stretching</p>
    <p class="normal">In this case, we can apply the nine slices to the button and the panel background images to use them in<a id="_idIndexMarker997"/> different parts of our game. In order to do this, do the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Open <a id="_idIndexMarker998"/>Package Manager using the <strong class="screenText">Window | Package Manager</strong> option.</li>
      <li class="numberedList">Verify that Package Manager shows all the packages, by setting the dropdown to the right of the <strong class="screenText">+</strong> button in the top-left part of the window to <strong class="screenText">Unity Registry</strong>.</li>
      <li class="numberedList">Install the 2D Sprite package to enable the sprite editing tools (if it is not already installed).</li>
      <li class="numberedList">Select the button sprite in the <strong class="screenText">Project</strong> window, and click on the <strong class="screenText">Sprite Editor</strong> button in the <strong class="screenText">Inspector</strong> window:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_11_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.11: The Sprite Editor button in the Inspector window</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="5">In the <strong class="screenText">Sprite Editor</strong> window, locate and drag the green dots at the edges of the image to move the slice rulers. Try to ensure that the slices are not located in the middle of the edges of the button. One thing to notice is that, in our case, we will work with three slices instead of nine because our button won’t be stretched vertically. If you don’t see the dots, try clicking the image to make them appear.</li>
      <li class="numberedList">Note that <a id="_idIndexMarker999"/>after dragging the green dots, the <strong class="screenText">Border</strong> properties (<strong class="screenText">L</strong>, <strong class="screenText">T</strong>, <strong class="screenText">R</strong>, and <strong class="screenText">B</strong>, which are left, top, right, and bottom, respectively) in the bottom-right corner changed. Those are the exact values you set by moving the green dots. Feel free to change<a id="_idIndexMarker1000"/> them to more round numbers to allow the nine slices to work evenly. In our case, left and right became a round <strong class="screenText">60</strong>, and top and bottom <strong class="screenText">50</strong>.</li>
      <li class="numberedList">Click on the <strong class="screenText">Apply</strong> button in the top-right corner of the window and close it:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_12_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.12: Nine slices in the Sprite Editor window</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="8">Repeat <em class="keystroke">steps 4</em> to <em class="keystroke">6</em> for the <strong class="screenText">Background</strong> panel image. In my case, you can see in <em class="keystroke">Figure 15.13</em> that this background is not completely prepared with nine slices in mind because all the middle areas of the image can be made smaller to save memory.</li>
    </ol>
    <p class="normal">When displaying this image with a smaller width, the 9-slicing method will stretch the middle part and will look the same, so essentially, this is wasted memory:</p>
    <figure class="mediaobject"><img src="img/B21361_15_13_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.13: Nine slices in the Sprite Editor window</p>
    <p class="normal">By <a id="_idIndexMarker1001"/>removing the middle parts, the image will look<a id="_idIndexMarker1002"/> almost the same, but a big part of the memory was saved, as seen in the following image.</p>
    <figure class="mediaobject"><img src="img/B21361_15_14.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.14: Optimized 9-slices background. The middle part will be a 1px strip of pixels that will expand</p>
    <p class="normal">Now that we <a id="_idIndexMarker1003"/>have prepared our sprites, we can find<a id="_idIndexMarker1004"/> a font to customize the text of our UI. Before discussing how to import fonts, it is worth mentioning that we will use <strong class="keyWord">TextMesh Pro</strong>, a Unity package (already included in the project) that provides a text rendering <a id="_idIndexMarker1005"/>solution much better than the old text component. If you have never used that component before, you shouldn’t worry about this detail.</p>
    <p class="normal">You must get fonts in the <code class="inlineCode">.ttf</code> or <code class="inlineCode">.otf</code> formats and import them into Unity. You can find lots of good, free font websites on the internet. I am used to working with the classic DaFont.com site, but there are plenty of other sites that you can use. In my case, I will work with the <code class="inlineCode">Militech</code> font:</p>
    <p class="packt_figref"><img src="img/B21361_15_15_PE.png" alt="A picture containing text, font, screenshot, graphics  Description automatically generated"/></p>
    <p class="packt_figref">Figure 15.15: My chosen font from DaFont.com to use in the project</p>
    <p class="normal">If the font <a id="_idIndexMarker1006"/>download comes with more than one file, you can just drag them all into Unity and then use the one that you like the most. Also, as <a id="_idIndexMarker1007"/>usual, try to put the font inside a folder called <code class="inlineCode">Fonts</code>. Now, these files’ format is not compatible with TextMesh Pro, our text rendering solution, so we must convert it using the <strong class="keyWord">Font Asset Creator</strong> window, as illustrated in the following steps:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Go to <strong class="screenText">Window | TextMesh Pro | Font Asset</strong> Creator.</li>
      <li class="numberedList">If this is the first time you have used TextMesh Pro in your project, a window will appear. You must click the <strong class="screenText">Import TMP Essentials</strong> option and wait for the import process to finish:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_16_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.16: TextMesh Pro first-run initialization</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="3">Close the <strong class="screenText">TMP Importer</strong> window.</li>
      <li class="numberedList">In<a id="_idIndexMarker1008"/> <strong class="screenText">Font Asset Creator</strong>, drag your font from the<a id="_idIndexMarker1009"/> <strong class="screenText">Project</strong> view to <strong class="screenText">Source Font File</strong>, or select it by clicking the <strong class="screenText">Target</strong> button on the right (the circle with the point at the center).</li>
      <li class="numberedList">Click the <strong class="screenText">Generate Font Atlas</strong> button and wait a moment:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_17_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.17: Converting font assets to TextMesh Pro</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="6">Click the <strong class="screenText">Save</strong> button, and save the converted font in the <strong class="screenText">Assets | TextMesh Pro | Fonts</strong> folder. Saving here is important, so don’t forget to pick the<a id="_idIndexMarker1010"/> correct folder:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_18.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.18: Saving the converted font in the correct folder (Mac)</p>
    <p class="normal">You’ve got the<a id="_idIndexMarker1011"/> groundwork set up. Let’s add more elements and see our UI come to life. The skills you’re learning here will be invaluable as you progress to the later chapters.</p>
    <h2 id="_idParaDest-209" class="heading-2">Creating UI controls</h2>
    <p class="normal">Each UI component, a <a id="_idIndexMarker1012"/>blend of images and text, needs thoughtful configuration. Let’s dive into how these elements come together to form an intuitive interface. We already have an image in our UI—the white rectangle we created previously. If you select it and look at the <strong class="screenText">Inspector</strong> window, you will notice that it has an <strong class="screenText">Image</strong> component, like the one in the following screenshot:</p>
    <p class="packt_figref"><img src="img/B21361_15_19_PE.png" alt="" role="presentation"/></p>
    <p class="packt_figref">Figure 15.19: The Image component’s Inspector window</p>
    <p class="normal">Understanding <a id="_idIndexMarker1013"/>these settings is crucial for optimal UI display. We’ll begin with the hero’s avatar, focusing on how to best represent it within our UI:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Using the rectangle gizmo, move the white rectangle to the top-left part of the UI:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_20_PE.png" alt="A picture containing screenshot, rectangle, line, square  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.20: The white rectangle located in the top-left part of the UI</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="2">In the <strong class="screenText">Inspector</strong> window, click on the circle to the right of the <strong class="screenText">Source Image</strong> property and pick the downloaded hero avatar sprite:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_21_PE.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 15.21: Setting the sprite of our Image component</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="3">Keeping the right aspect ratio ensures the image looks consistent on different screen sizes, avoiding any visual distortion. One way to do this is to click the <strong class="screenText">Set Native Size</strong> <a id="_idIndexMarker1014"/>button at the bottom of the Ima<strong class="screenText">ge</strong> component to make the image use the same size as the original sprite. However, by doing this, the image can become too big, so you can reduce the image size by pressing <em class="keystroke">Shift</em> to modify both the <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> values. Another option is to check the <strong class="screenText">Preserve Aspect</strong> checkbox to make sure the image fits the rectangle without stretching. In my case, I will use both:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_22_PE.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 15.22: The Preserve Aspect and Set Native Size image options</p>
    <p class="normal">Creating an intuitive life bar is crucial for the player experience. Let’s create the life bars by doing the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Create another <strong class="screenText">Image</strong> component using the <strong class="screenText">GameObject</strong> | <strong class="screenText">UI</strong> | <strong class="screenText">Image</strong> option.</li>
      <li class="numberedList">Set the <strong class="screenText">Source Image</strong> property to the life bar image you downloaded:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_23_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.23: The avatar and life bar</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="3">Set the <strong class="screenText">Image Type</strong> property to <strong class="screenText">Filled</strong>.</li>
      <li class="numberedList">Set the <strong class="screenText">Fill Method</strong> property to <strong class="screenText">Horizontal</strong>.</li>
      <li class="numberedList">Drag the <strong class="screenText">Fill Amount</strong> slider to see how the bar is cut according to the value of the slider. We will change that value via scripting later in <em class="chapterRef">Chapter 18</em>, <em class="italic">Performance Wizardry: Optimizing Your Game with Profiler Tools</em>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_24_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.24: The Fill Amount slider, cutting the image width to 73% of its size</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="6">In my case, the <a id="_idIndexMarker1015"/>bar image also comes with a bar frame, which lets you create another image, set the sprite, and position it on top of the life bar to frame it. The order in the hierarchy here impacts the visual stacking of these elements. This positioning is key for achieving the desired visual effect. So, in my case, I need to be sure the frame GameObject is below the health bar image in the hierarchy. Also, note that the bar frame image is not sliced, so there’s no need to use the <strong class="screenText">Sliced</strong> <strong class="screenText">Image</strong> <strong class="screenText">Type</strong> in this case. Feel free to try slicing it and see the results:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_25_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.25: Putting one image on top of the other to create a frame effect</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="7">Repeat <em class="italic">steps 1</em> to <em class="italic">6</em> to create the base bar at the bottom, or just copy and paste the bar and the frame and place it at the bottom of the screen:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_26_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.26: The player’s and player’s base health bars</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="8">Click on the <strong class="screenText">+</strong> button<a id="_idIndexMarker1016"/> in the <strong class="screenText">Project</strong> window and select the <strong class="screenText">Sprites</strong> | <strong class="screenText">Square</strong> option. This will create a simple squared sprite with a 4x4 resolution.</li>
      <li class="numberedList">Set the sprite as the base bar of the player’s base health bar instead of the downloaded bar sprite. This time, we will use a plain-white image for the bar because, in my case, the original one is red, and tinting the color of a red image to green is not possible. However, a white image can be easily tinted. Take into account the details of the original bar—for example, the little shadow in my original bar won’t be present here.</li>
      <li class="numberedList">Select the base health bar and set the <strong class="screenText">Color</strong> property to green:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_27_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.27: A bar with a squared sprite and green tint</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="11">One optional <a id="_idIndexMarker1017"/>step would be to convert the bar frame image into a 9-sliced image to allow us to change the original width to fit the screen.</li>
    </ol>
    <p class="normal">Now, let’s add the text fields for the <strong class="keyWord">Score</strong>, <strong class="keyWord">Bullets</strong>, <strong class="keyWord">Remaining Waves</strong>, and <strong class="keyWord">Remaining Enemies</strong> labels by doing the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Create a text label using the <strong class="screenText">GameObject</strong> | <strong class="screenText">UI</strong> | <strong class="screenText">Text - TextMesh Pro</strong> option (avoid the option that only says <strong class="screenText">Text</strong>). This will be the <strong class="screenText">Score</strong> label.</li>
      <li class="numberedList">Position the label in the top-right part of the screen.</li>
      <li class="numberedList">In the <strong class="screenText">Inspector</strong> window, set the content of the <strong class="screenText">Text Input</strong> property to <code class="inlineCode">Score: 0</code>.</li>
      <li class="numberedList">Set the <strong class="screenText">Font Size</strong> property to <code class="inlineCode">20</code>.</li>
      <li class="numberedList">Apply the converted font by clicking on the circle to the right of the <strong class="screenText">Font Asset</strong> property and selecting the desired font.</li>
      <li class="numberedList">In the <strong class="screenText">Alignment</strong> property, select the <strong class="screenText">Horizontal Right Align</strong> icon (the third button in the first row) and the <strong class="screenText">Vertical Center Align</strong> icon (the second button in the second row):</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_28_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.28: The settings for a text label</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="7">Repeat <em class="italic">steps 1</em> to <em class="italic">6 </em>to <a id="_idIndexMarker1018"/>create the other three labels (or just copy and paste the score three times). For the <strong class="screenText">Remaining Waves</strong> label, you can use the left alignment option to better match the original design:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_29_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.29: All the labels for our UI</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="8">Set the color of all the labels to white, as our scene will be mainly dark.</li>
    </ol>
    <p class="normal">Now that we have<a id="_idIndexMarker1019"/> completed the original UI design, we can create the <strong class="keyWord">Pause</strong> menu:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Create an <strong class="screenText">Image</strong> component for the menu’s background (<strong class="screenText">GameObject</strong> | <strong class="screenText">UI</strong> | <strong class="screenText">Image</strong>).</li>
      <li class="numberedList">Set the <strong class="screenText">Background</strong> panel sprite with the nine slices we made earlier.</li>
      <li class="numberedList">Set the <strong class="screenText">Image Type</strong> property to <strong class="screenText">Sliced</strong> if it is not already. This mode will apply the 9-slice scaling method to prevent the corners from stretching.</li>
      <li class="numberedList">There’s a chance that the image will stretch the corners anyway, which happens because sometimes the corners are quite big compared to the <strong class="screenText">RectTransform</strong> settings’ <strong class="screenText">Size</strong> property that you are using, so Unity has no option other than to do that. In this scenario, the correct solution is to have an artist who creates assets tailored to your game, but sometimes we don’t have that option. This time, we can just increase the <strong class="screenText">Pixels Per Unit</strong> value of the sprite file, which will reduce the scale of the original image while preserving its resolution. In the following two <a id="_idIndexMarker1020"/>screenshots, you can see the background image with a <strong class="screenText">Pixels Per Unit</strong> value of <code class="inlineCode">100</code>, and then again with <code class="inlineCode">700</code>. 
    <p class="numberedList">Remember to only do this for the 9-sliced or tiled-image types, or if you don’t have an artist to adjust it for you:</p>
    <figure class="mediaobject"><img src="img/B21361_15_30_PE.png" alt="A screenshot of a video game  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.30: On top, a large 9-sliced image in a small RectTransform component, which is small enough to shrink the corners, and at the bottom, the same image with Pixels Per Unit set to 700</p></li>
    </ol>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="5">Create a <strong class="screenText">TextMesh Pro</strong> text field, position it where you want the <strong class="screenText">Pause</strong> label to be in your diagram, set it to display the <strong class="screenText">Pause</strong> text, and set the font. Remember that you can change the text color with the <strong class="screenText">Color</strong> property.</li>
      <li class="numberedList">Drag the text field onto the background image. The parenting system in <strong class="screenText">Canvas</strong> works the same—if you move the parent, the children will move with it. The idea is that if we disable the panel, it will also disable the buttons and all its content:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_31_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.31: The Pause label</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="7">Create two<a id="_idIndexMarker1021"/> buttons by going to <strong class="screenText">GameObject</strong> | <strong class="screenText">UI</strong> | <strong class="screenText">Button - TextMesh Pro</strong> (avoid using the one that only says <strong class="screenText">Button</strong>). Position them where you want them on the background image.</li>
      <li class="numberedList">Set them as children of the <strong class="screenText">Pause</strong> background image by dragging them into the <strong class="screenText">Hierarchy</strong> window.</li>
      <li class="numberedList">Select the buttons, and set the <strong class="screenText">Source Image</strong> property of their <strong class="screenText">Image</strong> components to use the button sprite that we downloaded earlier. Remember our <strong class="screenText">Pixels Per Unit</strong> fix from <em class="keystroke">step 4</em> in this list if you have the same problem as before.</li>
      <li class="numberedList">You will see that the button is essentially an image with a child <strong class="screenText">TextMesh Pro</strong> text object. Change the font of each button and the text in each one to <code class="inlineCode">Resume</code> and <code class="inlineCode">Quit</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_32_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.32: The Pause menu implementation</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="11">Remember <a id="_idIndexMarker1022"/>that you can hide the panel, by unchecking the checkbox to the right of the object name in the top part of the <strong class="screenText">Inspector</strong> window:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_33_PE.png" alt="A screenshot of a computer menu  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 15.33: Disabling a GameObject</p>
    <div><p class="normal">Today, I still remember my first sessions of playtesting, where I handed my game over to unknown people with the dream of amazing them with my great game, just to discover it wasn’t quite the case. Among lots of things you will discover that are missing in your game is User Experience (also known as UX). The key to it is to understand how the game flow feels and improve it. While the UX is not restricted to the UI only, I recommend researching this concept before designing UIs for your game, as it will help your user to better understand your game and the information the UI tries to give.</p>
    </div>
    <p class="normal">In this section, we <a id="_idIndexMarker1023"/>discussed how to import images and fonts to be integrated through the <strong class="keyWord">Image</strong>, <strong class="keyWord">Text</strong>, and <strong class="keyWord">Button</strong> components to create a rich and informative UI. Having done that, let’s discuss how to make them responsive.</p>
    <h1 id="_idParaDest-210" class="heading-1">Creating a responsive UI</h1>
    <p class="normal">Nowadays, it is <a id="_idIndexMarker1024"/>almost impossible to design a UI in a single resolution, and our target audience display devices can vary a lot. A PC has a<a id="_idIndexMarker1025"/> variety of different kinds of monitors with different resolutions (such as 1080p and 4K) and aspect ratios (such as 16:9, 16:10, and ultra-wide), and the same goes for mobile devices. We need to prepare our UI to adapt to the most common displays, and Unity UI has the tools needed to do so.</p>
    <p class="normal">In this section, we will explore the following UI responsiveness concepts:</p>
    <ul>
      <li class="bulletList">Adapting object positions</li>
      <li class="bulletList">Adapting object sizes</li>
    </ul>
    <p class="normal">We are going to explore how the UI elements can adapt their position and size to different screen sizes using the advanced features of the <strong class="keyWord">Canvas</strong> and <strong class="keyWord">RectTransform</strong> components, such as <strong class="keyWord">Anchors</strong> and <strong class="keyWord">Scalers</strong>.</p>
    <h2 id="_idParaDest-211" class="heading-2">Adapting object positions</h2>
    <p class="normal">To ensure <a id="_idIndexMarker1026"/>our UI adjusts correctly across different devices, let’s focus on adapting object positions using anchors.</p>
    <p class="normal">Right now, if we play our game, we will see how the UI fits nicely onto our screen. However, if for some reason we change the <strong class="keyWord">Game</strong> view size, we will see how objects start to disappear from the screen. In the following screenshots, you can see different-sized game windows and how the UI looks nice in one but bad in the others:</p>
    <figure class="mediaobject"><img src="img/B21361_15_34_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.34: The same UI but on different-sized screens</p>
    <p class="normal">The problem<a id="_idIndexMarker1027"/> is that we created the UI using whatever resolution we had in the editor, but as soon as we changed it slightly, the UI kept its design for the previous resolution. Also, if you look closely, you will see that the UI is always centered, such as in the second image, where the UI is cropped at its sides, or in the third image, where extra space is visible along the borders of the screen. </p>
    <p class="normal">This happens because every single element in the UI has its own anchor, a little cross you can see<a id="_idIndexMarker1028"/> when you select an object, such as the one in the following screenshot:</p>
    <p class="packt_figref"><img src="img/B21361_15_35_PE.png" alt="" role="presentation"/></p>
    <p class="packt_figref">Figure 15.35: An anchor cross in the bottom-right part of the screen belonging to the hero avatar in the top-left part of the screen</p>
    <p class="normal">The <em class="keystroke">x</em> and <em class="keystroke">y</em> position of the object is measured as a distance to that anchor, and the anchor has a position relative to the screen, with its default position being at the center of the screen. This means that on an <em class="keystroke">800 x 600</em> screen, the anchor will be placed at the <em class="keystroke">400 x 300</em> position, and on a <em class="keystroke">1920 x 1080</em> screen, the anchor will be located at the <em class="keystroke">960 x 540</em> position. If the <em class="keystroke">x</em> and <em class="keystroke">y</em> position of the element (the one in <strong class="keyWord">RectTransform</strong>) is <strong class="keyWord">0</strong>, the object will always be at a distance of 0 from the center. In the second screenshot of the previous three examples, the hero avatar falls outside of the screen because its distance from the center is greater than half the screen, and the current distance was calculated based on the previous bigger screen size. So, what we can do about that? Move the anchor!</p>
    <p class="normal">By setting a <a id="_idIndexMarker1029"/>relative position, we can position the anchor at different parts of our screen and make that part of the screen our reference position. In the case of our hero avatar, we can place the anchor in the top-left corner of the screen to guarantee that our avatar will be at a fixed distance from that corner.</p>
    <p class="normal">We can do that by following these steps:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Select your player avatar.</li>
      <li class="numberedList">Expand the <strong class="screenText">RectTranform</strong> component in <strong class="screenText">Inspector</strong>, if not expanded yet, in a way that you can see its properties. This will reveal the anchors in the <strong class="screenText">Scene</strong> view.</li>
      <li class="numberedList">Drag the anchor cross with your mouse to the top-left part of the screen. If, for some reason, the anchor breaks into pieces when you drag it, undo the change (press <em class="keystroke">Ctrl</em> + <em class="keystroke">Z</em>, or <em class="keystroke">Command</em> + <em class="keystroke">Z</em> on Mac) and try to drag it by clicking in the center. We will break the anchor later. Check the avatar image <strong class="screenText">RectTransform</strong> component to verify that the <strong class="screenText">Anchors</strong> property’s <strong class="screenText">Min</strong> and <strong class="screenText">Max</strong> sub-properties have the same values as in <em class="keystroke">Figure 15.36</em>, meaning the object has correctly configured the anchors to be in the top-left part of the screen:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_36_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.36: An image with an anchor in the top-left part of the screen</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="4">Put the anchor of the <strong class="screenText">Health Bar</strong> object and its frame in the same position. We want the bar to always be at the same distance from that corner so that it will move alongside the hero avatar if the screen size changes.</li>
      <li class="numberedList">Place the<a id="_idIndexMarker1030"/> anchor in the bottom-center part of the screen for the <strong class="screenText">Boss Bar</strong> object so that it will always be centered. Later, we will deal with adjusting its size.</li>
      <li class="numberedList">Put the <strong class="screenText">Remaining Waves</strong> label in the bottom-left corner, and <strong class="screenText">Remaining Enemies</strong> in the bottom-right corner:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_37_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.37: The anchors for the life bar and the labels</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="7">Put the <strong class="screenText">Score</strong> and <strong class="screenText">Bullets</strong> anchors in the top-right corner:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_38_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.38: The anchors for the Score and Bullets labels</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="8">Select any element, and drag the sides of the Canvas rectangle with your mouse to preview how the elements will adapt to their positions. Take into account that you must select any object that is a direct child of the Canvas; the text within the buttons won’t have that option:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_39_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.39: Previewing the Canvas resizing</p>
    <p class="normal">Now that our<a id="_idIndexMarker1031"/> UI elements have adapted to their positions, let’s consider scenarios where the object size must adapt as well.</p>
    <h2 id="_idParaDest-212" class="heading-2">Adapting object sizes</h2>
    <p class="normal">The first<a id="_idIndexMarker1032"/> thing to consider when dealing with different aspect ratios is that our screen elements may not only move from their original design position (which we fixed in the previous section) but also may not fit into the original design. In our UI, we have the case of the health bar, where the bar clearly doesn’t adapt to the screen width when we preview it on a wider screen. We can fix this by breaking our anchors.</p>
    <p class="normal">When we break our anchors, the position and size of our object are calculated as a distance relative to the different anchor parts. If we split the anchor horizontally, instead of having <strong class="screenText">X</strong> and <strong class="screenText">Width</strong> properties we will have <strong class="screenText">Left</strong> and <strong class="screenText">Right</strong> properties, representing the distance between the left and right anchor. We can use this in the following way:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Select <a id="_idIndexMarker1033"/>the health bar, and drag the left part of the anchor all the way to the left part of the screen and the right part to the right part of the screen.</li>
      <li class="numberedList">Do the same for the health bar frame:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_40_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.40: The splitter anchor in the health bar</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="3">Check the <strong class="screenText">Rect Transform</strong> settings’ <strong class="screenText">Left</strong> and <strong class="screenText">Right</strong> properties in the <strong class="screenText">Inspector</strong> window, which represent the current distance to their respective anchors. If you want, you can add a specific value, especially if your health bars are displayed outside the screen:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_41_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.41: The Left and Right properties of a split anchor</p>
    <p class="normal">Using the Canvas Scaler effectively helps maintain UI element proportions across various resolutions, a crucial aspect of modern game design.</p>
    <p class="normal">This way, the object will always be at a fixed distance of a relative position to the screen—in this case, the sides of the screen. If you are working with a child object, as is the case with the <strong class="keyWord">Text</strong> and <strong class="keyWord">Image</strong> components of the buttons, the anchors are relative to the parent. If you pay attention to the anchors of the text, they are not only split horizontally but also vertically. This allows the text to adapt its position to the size of the button, so you won’t have to change it manually:</p>
    <figure class="mediaobject"><img src="img/B21361_15_42_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.42: The split anchors of the text of the button</p>
    <p class="normal">Now, this solution<a id="_idIndexMarker1034"/> is not suitable for all scenarios. Let’s consider a case where the hero avatar is displayed in a higher resolution than what it was designed for. Even if the avatar is correctly placed, it will be displayed smaller because the screen has more pixels per inch than screens with lower resolutions and the same physical size. You could consider using split anchors, but the width and height anchors could be scaled differently on different aspect ratio screens, so the original image becomes distorted. Instead, we can use the <strong class="keyWord">Canvas Scaler</strong> component.</p>
    <p class="normal">The <strong class="keyWord">Canvas Scaler</strong> component defines <a id="_idIndexMarker1035"/>what one pixel means in our scenario. If our UI design resolution is 1080p but we see it on a 4K display (which is twice the horizontal and vertical resolution of 1080p, meaning four times the number of pixels), we can scale the UI so that a pixel becomes two pixels, adapting its size to keep the same proportional size as the original design. Basically, the idea is that if the screen is bigger, our elements should also be bigger.</p>
    <p class="normal">We can use this component by doing the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Select the <strong class="screenText">Canvas</strong> object, and locate the <strong class="screenText">Canvas Scaler</strong> component in the <strong class="screenText">Inspector</strong> window.</li>
      <li class="numberedList">Set the <strong class="screenText">UI Scale Mode</strong> property to <strong class="screenText">Scale With Screen Size</strong>.</li>
      <li class="numberedList">If working with an artist, set the reference resolution to the resolution in which the artist created the UI, keeping in mind that it must be the highest target device resolution (this isn’t the case for us). In our case, we are not sure which resolution the artist of the downloaded assets had in mind, so we can select <code class="inlineCode">1920 x 1080</code>, which is the full HD resolution size and is very common nowadays.</li>
      <li class="numberedList">Set the <strong class="screenText">Match</strong> property to <strong class="screenText">Height</strong>. The idea of this property is that it sets which side of the resolution will be considered when carrying out the scaling calculation. In our case, if we are playing the game in 1080p resolution, 1 UI pixel equals 1 real screen pixel. However, if we are playing in 720p resolution, 1 UI pixel will be 0.6 real pixels, so the elements will be smaller on smaller-resolution screens, keeping the correct size. We didn’t choose a <strong class="screenText">Width</strong> value in this case because we can have extreme widths of screens, such as ultra-wide, and if we picked that option, those screens would scale the UI unnecessarily. Another option is to set this value to <code class="inlineCode">0.5</code> to consider the two values, but on a PC, this doesn’t make too much sense. On a mobile device, you should choose this based on the orientation of the game, setting the height for landscape mode<a id="_idIndexMarker1036"/> and the width for portrait mode.</li>
      <li class="numberedList">Try previewing a wider and higher screen to see how this setting works:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_43_PE.png" alt="A screenshot of a computer  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 15.43: Canvas Scaler with the correct settings for standard PC games</p>
    <p class="normal">You will find that your UI will be smaller than your original design, which is because we should have set these properties before. Right now, the only fix is to resize everything again. Take this into account the next time you try this exercise; we only followed this order for learning purposes.</p>
    <div><p class="normal">Another way to make your UI adapt to its contents is by using layout components, like Horizonal Layout. These components will automatically adapt the size and position of their child elements to follow certain rules, like making sure all elements are next to each other. This is especially useful in things like item lists, where you add and remove elements, and you can expect the list to adapt to these changes. For more info, check out this documentation: <a href="mailto:https://docs.unity3d.com/Packages/com.unity.ugui@2.0/manual/comp-UIAutoLayout.html">https://docs.unity3d.com/Packages/com.unity.ugui@2.0/manual/comp-UIAutoLayout.html</a></p>
    </div>
    <p class="normal">With this knowledge, you are now ready to start scripting the UI to reflect what’s happening in the game.</p>
    <h1 id="_idParaDest-213" class="heading-1">Scripting the UI</h1>
    <p class="normal">We<a id="_idIndexMarker1037"/> previously created a UI layout with elements such as bars, text, and buttons, but so far, they are static. We need to make them adapt to the game’s actual state. In this section, we are going to discuss the following UI scripting concepts:</p>
    <ul>
      <li class="bulletList">Showing information in the UI</li>
      <li class="bulletList">Programming the Pause menu</li>
    </ul>
    <p class="normal">We will start by seeing how to display and update dynamic information in our UI, using scripts that modify the text and images that are displayed with Canvas elements. After that, we will create the<strong class="screenText"> </strong>pause functionality, which will be used throughout the UI. Developing the pause functionality is more than just adding a feature; it’s about enhancing user control and game interaction, a key aspect of the UX.</p>
    <p class="normal">Armed with this understanding, you’re set to bring your game’s UI to an interactive level. It’s time to make your UI not just a visual element but also an integral part of your game’s storytelling.</p>
    <h2 id="_idParaDest-214" class="heading-2">Showing information in the UI</h2>
    <p class="normal">We’ve touched <a id="_idIndexMarker1038"/>on using the UI to convey critical game data. Now, let’s dive into the practical aspect: scripting the UI to dynamically reflect the player’s health status in real time, using the <code class="inlineCode">Life</code> script we created earlier:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Add a new script called <strong class="screenText">Life Bar</strong> to the <strong class="screenText">HealthBar</strong> Canvas child object, which is the UI <strong class="screenText">Image</strong> component we created earlier to represent the life bar:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_44_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.44: The Life Bar component in the player’s HealthBar Canvas</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="2">In <code class="inlineCode">LifeBar</code>, the <a id="_idIndexMarker1039"/>script adds a <code class="inlineCode">Life</code> type field. This way, our script will ask the editor which <code class="inlineCode">Life</code> component we will be monitoring. Save the script:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_45_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.45: Editor-configurable reference to a Life component</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="3">In the editor, drag the <strong class="screenText">Player</strong> GameObject from the <strong class="screenText">Hierarchy</strong> window to the <strong class="screenText">Target Life</strong> property to make the life bar reference the player’s life, and remember to have the <strong class="screenText">HealthBar</strong> object selected before dragging <strong class="screenText">Player</strong>. This way, we tell our <strong class="screenText">LifeBar</strong> script which Life component to check to see how much life the player has remaining. Something interesting here is that the enemies have the same Life component, so we can easily use this component to create life bars for every other object that has a life in our game:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_46_PE.png" alt="A screen shot of a computer  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 15.46: Dragging Player to reference its Life component</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="4">Add the <code class="inlineCode">using UnityEngine.UI;</code> line right after the <code class="inlineCode">using</code> statements in the first few lines<a id="_idIndexMarker1040"/> of the script. This will tell C# that we will interact with the UI scripts:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_47_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.47: All the using statements in our script. We are not going to use them all, but let’s keep them for now</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="5">Create a <code class="inlineCode">private</code> field (without the <code class="inlineCode">public</code> keyword) of the <code class="inlineCode">Image</code> type. We will save the reference to the component here shortly:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_48_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.48: Private reference to an image</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="6">Using <code class="inlineCode">GetComponent</code> in <code class="inlineCode">Awake</code>, access the reference to the <code class="inlineCode">Image</code> component in our GameObject (<code class="inlineCode">HealthBar</code>) and save it in the <code class="inlineCode">image</code> field. As usual, the idea is to get this reference just once and save it for later use in the <code class="inlineCode">Update</code> function. Of course, this will always work when you put this component in an object with an <code class="inlineCode">Image</code> component. If not, the other option would be to create a public field of the <code class="inlineCode">Image</code> type and drag the image component into it:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_49_PE.png" alt="A picture containing text, font, screenshot, line  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.49: Saving the reference to the Image component in this object</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="7">Let’s set<a id="_idIndexMarker1041"/> up an <code class="inlineCode">Update</code> event function in the <code class="inlineCode">LifeBar</code> script. This function will be the heart of our UI update logic, keeping the health bar in sync with the player’s health.</li>
      <li class="numberedList">In the <code class="inlineCode">Update</code> event, divide the amount of life by <code class="inlineCode">100</code> to have our current life percentage expressed in the <code class="inlineCode">0</code> to <code class="inlineCode">1</code> range (assuming our maximum life is <code class="inlineCode">100</code>), and set the result in the <code class="inlineCode">fillAmount</code> field of the <code class="inlineCode">Image</code> component, as shown in the following screenshot. Remember that <code class="inlineCode">fillAmount</code> expects a value between <code class="inlineCode">0</code> and <code class="inlineCode">1</code>, with <code class="inlineCode">0</code> signaling that the bar is empty and <code class="inlineCode">1</code> signaling that the bar is at its full capacity:
    <figure class="mediaobject"><img src="img/B21361_15_50_PE.png" alt="A picture containing text, font, screenshot, line  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.50: Updating the fill amount of the LifeBar script’s Image component according to the Life component</p>
    <p class="normal">Using a specific number like 100 directly in the code is a classic example of hardcoding. To maintain flexibility, consider referencing a <code class="inlineCode">Maximum Life</code> field or using a constant.</p></li>
    </ol>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="9">Save the script, and in the editor, select the player and play the game. During <strong class="screenText">Play</strong> mode, press <em class="keystroke">Esc</em> to regain access to the mouse, and change the player’s health in the <strong class="screenText">Inspector</strong> window to see how the life bar updates accordingly. You can also test this by making the player receive damage somehow, such as by making enemies <a id="_idIndexMarker1042"/>spawn bullets (there’ll be more on enemies later):</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_51_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.51: Full LifeBar script</p>
    <p class="normal">In the previous chapter, we explored the concept of events to detect changes in the state of other objects. The life bar is another example of using an event, as we can change the fill amount of the image when the life actually changes. I challenge you to try to create an event when the life changes and implement this script using the one we looked at in the previous chapter.</p>
    <p class="normal">You may be thinking that this UI behavior could be directly coded within the <code class="inlineCode">Life</code> component, and that’s completely possible, but the idea here is to create simple scripts with little pressure to keep our code separated. Each script should have just one reason to be modified, and mixing UI behavior and gameplay behavior in a single script would give the script two responsibilities, which results in two possible reasons to change our script. With this approach, we can also set the player’s base life bar at the bottom by just adding the same <a id="_idIndexMarker1043"/>script to its life bar but dragging<a id="_idIndexMarker1044"/> the <strong class="keyWord">Base Damage </strong>object, which we created in the previous chapter, as the target life this time.</p>
    <p class="normal">For those using visual scripting, here’s a breakdown of what you’ll need to integrate. It’s about translating our C# logic into a more visual, node-based format:</p>
    <figure class="mediaobject"><img src="img/B21361_15_52_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.52: Full LifeBar visual graph</p>
    <p class="normal">First, we added a <code class="inlineCode">targetLife</code> variable of type <code class="inlineCode">GameObject</code> to the <strong class="keyWord">Variables</strong> component of our life bar image. Then, we dragged our <strong class="keyWord">Player</strong> GameObject (called <strong class="keyWord">Robot</strong> so far) to this variable; the life bar now has a reference to the object from which we want to display its life. Then, we<a id="_idIndexMarker1045"/> added a <strong class="keyWord">LifeBar</strong> visual graph; in the <strong class="keyWord">Update</strong> node, it<a id="_idIndexMarker1046"/> calls <a id="_idIndexMarker1047"/>the <strong class="keyWord">Set Fill Amount </strong>node in order to update the fill amount of the image. Remember that, in this case, just calling the <strong class="keyWord">Set Fill Amount</strong> node will show that we refer to the image component where this visual graph is located, so there’s no<a id="_idIndexMarker1048"/> need to use <strong class="keyWord">GetComponent</strong> here. In order to calculate the fill amount, we get the <strong class="keyWord">targetLife</strong> GameObject reference, and, using a<a id="_idIndexMarker1049"/> second <strong class="keyWord">Get Variable</strong> node, we extract the life variable of that object. Finally, we divide that by 100 (we needed to create a <strong class="keyWord">Float Literal</strong> node<a id="_idIndexMarker1050"/> in order to represent the value <strong class="keyWord">100</strong>) and pass that to the<strong class="keyWord"> Set Fill Amount</strong> node. As usual, you can check the complete version on the GitHub repository.</p>
    <p class="normal">The principle <a id="_idIndexMarker1051"/>we applied here – single object responsibility – is part of the <a id="_idIndexMarker1052"/>broader <strong class="keyWord">SOLID </strong>principles in object-oriented programming. These principles are foundational for robust and scalable code architecture. If you don’t know what SOLID is, I strongly recommend you search for <code class="inlineCode">SOLID programming principles</code> on the internet to improve your programming best practices.</p>
    <p class="normal">Now that we have sorted out the player’s life bar, let’s make the <code class="inlineCode">Bullets</code> label update according to the player’s remaining bullets. Something to consider here is that our current <code class="inlineCode">PlayerShooting</code> script has unlimited bullets, so let’s change that by following these steps:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Add a public <code class="inlineCode">int</code> type field to the <code class="inlineCode">PlayerShooting</code> script, called <code class="inlineCode">bulletsAmount</code>.</li>
      <li class="numberedList">In the <code class="inlineCode">if</code> statement that checks the pressure of the left mouse button, add a condition to check whether the number of bullets is greater than <code class="inlineCode">0</code>.</li>
      <li class="numberedList">Inside the <code class="inlineCode">if</code> statement, reduce the number of bullets by <code class="inlineCode">1</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_53_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.53: Limiting the number of bullets to shoot</p>
    <p class="normal">In the visual scripting<a id="_idIndexMarker1053"/> version, the modified shooting condition <a id="_idIndexMarker1054"/>of the <strong class="keyWord">PlayerShooting</strong> visual graph will look like this:</p>
    <figure class="mediaobject"><img src="img/B21361_15_54_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.54: Shooting only if bullets are available and reducing the number of bullets after shooting</p>
    <p class="normal">As you can<a id="_idIndexMarker1055"/> see, we simply check if the new <strong class="keyWord">bullets</strong> variable we added is greater than zero and then use an <strong class="keyWord">If</strong> node condition for the execution of<a id="_idIndexMarker1056"/> the <strong class="keyWord">Instantiate</strong> node. The bullet decrement will look like this:</p>
    <p class="packt_figref"><img src="img/B21361_15_55_PE.png" alt="Graphical user interface, text, application, chat or text message  Description automatically generated"/></p>
    <p class="packt_figref">Figure 15.55: Decrementing the bullet count in the visual graph</p>
    <p class="normal">We simply <a id="_idIndexMarker1057"/>subtract one from the <strong class="screenText">bullets</strong> variable and set the bullets again with this value.</p>
    <p class="normal">With a dedicated counter for bullets in place, our next step is to bring this element to life in the UI. Visualizing the bullet count is not just a feature – it’s an essential aspect of gameplay that keeps players tactically aware:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Add a <code class="inlineCode">PlayerBulletsUI</code> script to the bullet’s <code class="inlineCode">Text</code> GameObject. In my case, I called it <code class="inlineCode">Bullets Label</code>.</li>
      <li class="numberedList">Add the <code class="inlineCode">using TMPro;</code> statement at the beginning of the file, given that we will modify the <code class="inlineCode">TextMesh Pro</code> component of our label.</li>
      <li class="numberedList">Add a private field of the <code class="inlineCode">TMP_Text</code> type, saving it in the reference to the <code class="inlineCode">Text</code> component in <code class="inlineCode">Awake</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_56_PE.png" alt="Graphical user interface, text, application, email  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.56: Caching the reference to the Text component</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="4">Create<a id="_idIndexMarker1058"/> a <code class="inlineCode">public</code> field of the <code class="inlineCode">PlayerShooting</code> type called <code class="inlineCode">targetShooting</code>, and drag <strong class="screenText">Player</strong> to this property in the Editor. As was the case for the <code class="inlineCode">LifeBar</code> component, the idea is that our UI script will access the script that has the remaining bullets to update the text, bridging the two scripts (<code class="inlineCode">Text</code> and <code class="inlineCode">PlayerShooting</code>) to keep their responsibilities separated.</li>
      <li class="numberedList">Create an <code class="inlineCode">Update</code> statement, and inside it, set the <code class="inlineCode">text</code> field of the text reference (I know, confusing) with a concatenation of <code class="inlineCode">"Bullets: "</code> and the <code class="inlineCode">bulletsAmount</code> field of the <code class="inlineCode">targetShooting</code> reference. This way, we will replace the text of the label according to the current amount of bullets:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_57_PE.png" alt="A picture containing chart  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.57: Updating the Bullets text label</p>
    <p class="normal">A key coding principle to remember is that string concatenation allocates memory. To maintain optimal performance, it’s prudent to concatenate strings only when it’s essential – a strategic approach to memory management in game development.</p>
    <p class="normal">Regarding <a id="_idIndexMarker1059"/>visual scripting, before actually setting the text, we need to add support for TextMesh Pro in visual scripting. Visual scripting requires manually specifying which Unity systems and packages we are going to use, and as TextMesh Pro is<a id="_idIndexMarker1060"/> not strictly a core Unity feature, it might not be included by default. We can add support for TextMesh Pro in visual scripting by doing the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Go to <strong class="screenText">Edit | Project Settings</strong> and select the <strong class="screenText">Visual Scripting</strong> category.</li>
      <li class="numberedList">Expand the <strong class="screenText">Node Library</strong> option using the arrow to its left.</li>
      <li class="numberedList">Check if you have <strong class="screenText">Unity.TextMesh Pro</strong> in that list. If you do, feel free to skip the rest of these steps.</li>
      <li class="numberedList">Use the <strong class="screenText">+</strong> button at the bottom of the list to add a new library.</li>
      <li class="numberedList">Click where it says (<strong class="screenText">No Assembly</strong>), and search for <strong class="screenText">Unity.TextMesh Pro</strong>.</li>
      <li class="numberedList">Click the <strong class="screenText">Regenerate Nodes</strong> button, and wait until the regeneration process is done:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_58_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.58: Adding TextMesh Pro support to visual scripting</p>
    <p class="normal">After making those <a id="_idIndexMarker1061"/>settings, this is what the visual graph to add to the <strong class="keyWord">Bullets</strong> text GameObject will look like:</p>
    <figure class="mediaobject"><img src="img/B21361_15_59_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.59: Updating the Bullets text label in visual scripting</p>
    <p class="normal">As usual, we<a id="_idIndexMarker1062"/> need a reference to the player to check its bullets, so we created a <code class="inlineCode">targetBullets</code> variable of type <strong class="keyWord">GameObject</strong> and dragged the <strong class="screenText">Player</strong> there. Then, we<a id="_idIndexMarker1063"/> use a <strong class="keyWord">Get Variable</strong> node to extract the bullets amount from that reference and concatenate the string <code class="inlineCode">"Bullets: "</code>, using <a id="_idIndexMarker1064"/>the <strong class="keyWord">String Literal</strong> node, with the amount of bullets using the <strong class="keyWord">Concat</strong> node. That <a id="_idIndexMarker1065"/>node will do the same as when we added two strings together using the <strong class="keyWord">+</strong> operator in C#. Finally, we use the <strong class="keyWord">Set Text (Source Text, Sync Text InputBox)</strong> node to update the text of our text field.</p>
    <p class="normal">If you look at the two scripts, you will find a pattern. You can access the <strong class="screenText">UI</strong> and <strong class="screenText">Gameplay</strong> components and update the <strong class="keyWord">UI </strong>component accordingly, and most UI scripts will behave in the same way. Keeping this in mind, I challenge you to create the necessary scripts to make the <strong class="keyWord">Score</strong>, <strong class="keyWord">Enemies</strong>, and <strong class="keyWord">Waves</strong> counters work. Remember to add <code class="inlineCode">using TMPro;</code> to use the <code class="inlineCode">TMP_Text</code> component. </p>
    <p class="normal">After finishing this, you can compare your solution with the one in the <a id="_idIndexMarker1066"/>following screenshot, starting with <code class="inlineCode">ScoreUI</code>:</p>
    <figure class="mediaobject"><img src="img/B21361_15_60_PE.png" alt="Graphical user interface, text, application  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.60: The ScoreUI script</p>
    <p class="normal">Also, we need the <code class="inlineCode">WavesUI</code> component:</p>
    <figure class="mediaobject"><img src="img/B21361_15_61_PE.png" alt="Graphical user interface, text, application, email  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.61: The WavesUI script</p>
    <p class="normal">Finally, we<a id="_idIndexMarker1067"/> need <code class="inlineCode">EnemiesUI</code>:</p>
    <figure class="mediaobject"><img src="img/B21361_15_62_PE.png" alt="Graphical user interface, text, application, email  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.62: The EnemiesUI script</p>
    <p class="normal">Note how we<a id="_idIndexMarker1068"/> took advantage of the existence of<a id="_idIndexMarker1069"/> the <strong class="keyWord">onChanged</strong> events in<a id="_idIndexMarker1070"/> the <strong class="keyWord">WavesManager</strong> and <strong class="keyWord">EnemyManager</strong> scripts <a id="_idIndexMarker1071"/>to only update the text fields when needed. Also, note how we didn’t need to drag a reference to get the values to display, as all these scripts use managers to get that info.</p>
    <p class="normal">Regarding <a id="_idIndexMarker1072"/>visual scripting, we have<a id="_idIndexMarker1073"/> the <strong class="keyWord">ScoreUI </strong>script:</p>
    <figure class="mediaobject"><img src="img/B21361_15_63_PE.png" alt="Graphical user interface, text, application, chat or text message  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.63: The ScoreUI visual script</p>
    <p class="normal">Then, the <strong class="keyWord">WavesUI</strong> script:</p>
    <figure class="mediaobject"><img src="img/B21361_15_64_PE.png" alt="Graphical user interface, application  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.64: The WavesUI visual script</p>
    <p class="normal">And<a id="_idIndexMarker1074"/> finally, the <strong class="keyWord">EnemiesUI</strong> script:</p>
    <figure class="mediaobject"><img src="img/B21361_15_65_PE.png" alt="Graphical user interface, application  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.65: The EnemiesUI visual script</p>
    <p class="normal">As you can see, we<a id="_idIndexMarker1075"/> have used the events already coded in the managers to change the UI only when necessary. Also, note how we used <strong class="screenText">Scene</strong> variables to get the info to display. With our UI labels and bars in place, our next step is to bring the Pause menu to life. This involves scripting interactions that enhance the game’s interactivity.</p>
    <h2 id="_idParaDest-215" class="heading-2">Programming the Pause menu</h2>
    <p class="normal">Let’s revisit our <a id="_idIndexMarker1076"/>previously designed Pause menu, which is ready to be brought to life. Coding a pause feature might seem intricate, but with a strategic approach, we can simplify the process. So again, we will use a simple approach to pause most behaviors, which is stopping time! Remember that most of our movement scripts use time functionality, such as <strong class="screenText">Delta Time</strong> (which we discussed in <em class="chapterRef">Chapter 2</em>, <em class="italic">Crafting Scenes and Game Elements</em>), as a way to calculate the amount of movement to apply. There is also a way to simulate time going slower or faster, which is by setting <code class="inlineCode">timeScale</code>. This field will affect Unity’s time system’s speed, and we can set it to <code class="inlineCode">0</code> to simulate that time has stopped, which will pause animations, stop particles, and reduce <strong class="screenText">Delta Time </strong>to <code class="inlineCode">0</code>, making our movements stop. So let’s do it:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Create a script called <code class="inlineCode">Pause</code>, and add it to a new GameObject called <code class="inlineCode">Pause</code>.</li>
      <li class="numberedList">Add the <code class="inlineCode">using UnityEngine.InputSystem;</code> statement at the beginning of the script file to be able to read input.</li>
      <li class="numberedList">In <code class="inlineCode">Update</code>, detect when the <em class="keystroke">Esc</em> key is pressed. We can add a mapping to our <strong class="screenText">Player Input</strong> asset file and read the input, as we did in <em class="keystroke">Chapter 2</em>, <em class="keystroke">Crafting Scenes and Game Elements</em>, but to learn a new way of using the input system, we will use the <code class="inlineCode">Keyboard.current</code> variable to directly read the state of a key in the <strong class="screenText">Update</strong> method, instead of using mapping. Consider that it is always recommended to use input<a id="_idIndexMarker1077"/> mapping, but let’s do this for learning purposes. You can set the <code class="inlineCode">Time.timeScale</code> variable to <code class="inlineCode">0</code> when the <em class="keystroke">Esc</em> key is pressed, as you can see in the following image:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_66_PE.png" alt="Graphical user interface, text, application, email  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.66: Stopping time to simulate a pause</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="4">Save and test this by playing the game and pressing the <em class="keystroke">Esc</em> key. You will notice that almost everything will stop, like animations of characters’ movement, but you can see how the shoot functionality still works. That’s because the <code class="inlineCode">PlayerShooting</code> script is not time-dependent. One solution here could be to simply check whether <code class="inlineCode">Time.timeScale</code> is greater than <code class="inlineCode">0</code> to prevent this:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_67_PE.png" alt="Graphical user interface, text, application  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.67: Checking Pause in the player shooting script</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="5">The same needs to be done in our <code class="inlineCode">EnemyFSM</code> <code class="inlineCode">Shoot</code> method.</li>
    </ol>
    <p class="normal">As usual, we <a id="_idIndexMarker1078"/>have pursued the simplest way here, but there is a better approach. I challenge you to try to create <code class="inlineCode">PauseManager</code> with a Boolean, indicating whether the game is paused or not and changing <code class="inlineCode">timeScale</code> in the process.</p>
    <p class="normal">Now that we have a simple but effective way to pause the game, let’s make the <strong class="keyWord">Pause</strong> menu visible to resume the game by doing the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Add a field of the <code class="inlineCode">GameObject</code> type, called <code class="inlineCode">pauseMenu</code>, in the <code class="inlineCode">Pause</code> script. The idea is to drag the <strong class="screenText">Pause</strong> menu here so that we have a reference to enable and disable it.</li>
      <li class="numberedList">In <code class="inlineCode">Awake</code>, add <code class="inlineCode">pauseMenu.SetActive(false);</code> to disable the <strong class="screenText">Pause</strong> menu at the beginning of the game. Even if we disabled the <strong class="screenText">Pause</strong> menu in the Editor, we add this just in case we re-enable it by mistake. It must always start as disabled.</li>
      <li class="numberedList">Using the same function but passing <code class="inlineCode">true</code> as the first parameter, enable the <strong class="screenText">Pause</strong> menu in the <em class="keystroke">Esc</em> key pressure check:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_68_PE.png" alt="Graphical user interface, text, application, chat or text message  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.68: Enabling the Pause menu when pressing the Esc key</p>
    <p class="normal">Now, we need<a id="_idIndexMarker1079"/> to make the <strong class="keyWord">Pause</strong> menu buttons work. If you recall, we explored the concept of events, implementing them with UnityEvents in the different managers. Our <strong class="keyWord">Pause</strong> menu buttons use the same class to implement the <code class="inlineCode">onClick</code> event, which is an event that informs us that a specific button has been pressed. Let’s resume the game when pressing those buttons by doing the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Create a field of the <code class="inlineCode">Button</code> type in our <code class="inlineCode">Pause</code> script called <code class="inlineCode">resumeButton</code>, and drag <code class="inlineCode">resumeButton</code> to it; this way, our <code class="inlineCode">Pause</code> script has a reference to the button.</li>
      <li class="numberedList">In <code class="inlineCode">Awake</code>, add a listener function called <code class="inlineCode">OnResumePressed</code> to the <code class="inlineCode">onClick</code> event of <code class="inlineCode">resumeButton</code>.</li>
      <li class="numberedList">Make the <code class="inlineCode">OnResumePressed</code> function set <code class="inlineCode">timeScale</code> to <code class="inlineCode">1</code> and disable the <strong class="screenText">Pause</strong> menu, as we did in <code class="inlineCode">Awake</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_69_PE.png" alt="Graphical user interface, text, application, chat or text message  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.69: Unpausing the game</p>
    <p class="normal">If you save and <a id="_idIndexMarker1080"/>test this, you will notice that you cannot click the <strong class="keyWord">Resume</strong> button because we disabled the cursor at the beginning of the game, so make sure you re-enable it while in <code class="inlineCode">Pause</code> mode and disable it when you resume:</p>
    <figure class="mediaobject"><img src="img/B21361_15_70_PE.png" alt="Graphical user interface, text, application  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.70: Showing and hiding the cursor while in pause mode</p>
    <p class="normal">One final thing to<a id="_idIndexMarker1081"/> consider is that we want to set the time scale to <code class="inlineCode">1</code> again <a id="_idIndexMarker1082"/>on the <strong class="keyWord">OnDestroy</strong> method. This method gets executed when the <strong class="keyWord">Pause</strong> object is destroyed, which will happen when we manually destroy the object via scripting or, most importantly in this case, if we change scenes. The idea is to make sure to resume the time system if we change scenes while in the <strong class="keyWord">Pause</strong> menu so that the next scene can play the game properly:</p>
    <p class="packt_figref"><img src="img/B21361_15_71_PE.png" alt="Graphical user interface  Description automatically generated with medium confidence"/></p>
    <p class="packt_figref">Figure 15.71: Resetting the time scale when leaving the scene</p>
    <p class="normal">Regarding the <a id="_idIndexMarker1083"/>visual scripting version of the <strong class="keyWord">Pause</strong> script, note that we don’t have an equivalent to <code class="inlineCode">Keyboard.current</code>, so we will need to replace using the input mappings. In order to add an input mapping for the <em class="keystroke">Esc</em> key, do the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Double-click the <strong class="screenText">Player Input</strong> asset to edit it. You can find it by selecting the <strong class="screenText">Player</strong> GameObject, and then clicking the box at the right of the <strong class="screenText">Actions</strong> property of the <strong class="screenText">PlayerInput</strong> component in the Inspector.</li>
      <li class="numberedList">Using the <strong class="screenText">+</strong> button in the top-right corner of the <strong class="screenText">Actions</strong> list (the middle list), create a new action called <code class="inlineCode">Pause</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_72_PE.png" alt="Graphical user interface, application, table  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.72: Creating a new input mapping</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="3">Click the <strong class="screenText">&lt;No Binding&gt;</strong> item inside the <strong class="screenText">Pause</strong> action we just created (below it).</li>
      <li class="numberedList">In the <strong class="screenText">Path</strong> property in the <strong class="screenText">Binding Properties</strong> section (on the right side of the screen), click the empty rectangle at its left, and search and select the <strong class="screenText">Escape [Keyboard]</strong> button:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B21361_15_73_PE.png" alt="Graphical user interface, application  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.73: Adding a key to the mapping</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="5">Click the <strong class="screenText">Save Asset</strong> button in the top-middle part of the screen.</li>
    </ol>
    <p class="normal">Now, you can <a id="_idIndexMarker1084"/>add the following graph, this time to the <strong class="keyWord">Player</strong> GameObject, as we need to read input from it:</p>
    <figure class="mediaobject"><img src="img/B21361_15_74_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 15.74: Pausing when Esc is pressed</p>
    <p class="normal">So far, nothing new; we detect that <em class="keystroke">Esc</em> is pressed, when it happens, we call <strong class="keyWord">Set Time Scale</strong> and specify the <code class="inlineCode">0</code> value. Then, we activate the <strong class="keyWord">Pause</strong> menu (having a reference via a variable, <code class="inlineCode">pauseMenu</code>, in the <strong class="keyWord">Variables</strong> component), and we enable the cursor. Finally, we set the time scale to <code class="inlineCode">1</code> when the object is destroyed.</p>
    <p class="normal">Regarding<a id="_idIndexMarker1085"/> the <strong class="keyWord">Resume</strong> behavior, the nodes to add to the same <strong class="keyWord">Pause</strong> graph will look like this:</p>
    <figure class="mediaobject"><img src="img/B21361_15_75_PE.png" alt="Graphical user interface, text, application  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.75: Unpausing when the Resume button is clicked</p>
    <p class="normal">The only new element on this graph is the usage<a id="_idIndexMarker1086"/> of the <strong class="keyWord">On Button Click</strong> node. As you might expect, that node is an event, and anything connected to it will execute under the pressure of a button. The way to specify which button we refer to is by connecting the <strong class="keyWord">Button</strong> reference variable to the input pin of <strong class="keyWord">On Button Click</strong>. You can see how we created a variable of type <strong class="keyWord">Button</strong> called <code class="inlineCode">resumeButton</code> in the <strong class="keyWord">Variables</strong> component to do this.</p>
    <p class="normal">Now that you know how to code buttons, I challenge you to code the <code class="inlineCode">Exit</code> button’s behavior. Again, remember to add <code class="inlineCode">using UnityEngine.UI</code>. Also, you will need to call <code class="inlineCode">Application.Quit();</code> to exit the game, but take into account that this will do nothing in the editor; we don’t want to close the editor while creating the game. This function only works when you build the game.</p>
    <p class="normal">So, for now, just call it, and if you want to print a message to be sure that the button works properly, you can; a solution is provided in the following screenshot:</p>
    <p class="packt_figref"><img src="img/B21361_15_76_PE.png" alt="Graphical user interface, text, application, chat or text message  Description automatically generated"/></p>
    <p class="packt_figref">Figure 15.76: The Quit button script</p>
    <p class="normal">This solution<a id="_idIndexMarker1087"/> proposes that you add this script directly to the <strong class="keyWord">Quit</strong> button GameObject itself so that the script listens to the <code class="inlineCode">onClick</code> event on its <code class="inlineCode">Button</code> sibling component and, when receiving the event, it executes the <code class="inlineCode">Quit</code> function. You could also add this behavior to the <code class="inlineCode">Pause</code> script, and while that will work, remember that if a script can be split into two because it does two unrelated tasks, it is always best to split it so that separate behavior is unrelated. Here, the pause behavior is not related to the quit behavior.</p>
    <p class="normal">Regarding the visual scripting version, the graph to add to the <strong class="keyWord">Quit</strong> button would look like this:</p>
    <figure class="mediaobject"><img src="img/B21361_15_77_PE.png" alt="Graphical user interface, application  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 15.77: The Quit button visual script</p>
    <p class="normal">Simple, right? As <a id="_idIndexMarker1088"/>we put this in the button itself, we don’t even need to specify which button it is, as it automatically detects that we refer to ourselves.</p>
    <p class="normal">Now that we have our pause system set up using the UI and buttons, we are ready for the next chapter, where we will continue to look at other visual and auditive ways to make our player aware of what has happened.</p>
    <h1 id="_idParaDest-216" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, we introduced the basics of the UI, understanding the <strong class="keyWord">Canvas</strong> and <strong class="keyWord">RectTransform </strong>components to locate objects onscreen and create a UI layout. We also covered different kinds of UI elements, mainly <strong class="keyWord">Image</strong> and <strong class="keyWord">Text</strong>, to give life to our UI layout and make it appealing to the user. Finally, we discussed how to adapt UI objects to different resolutions and aspect ratios to make our UI adapt to different screen sizes, even though we cannot predict the exact monitor our user will play the game on. All of this allows us to create any UI we will need in our game using the Canvas.</p>
    <p class="normal">In the next chapter, we will explore how to create UIs using UI Toolkit instead, another Unity system to create UIs, and compare both the Canvas and UI Toolkit to see when to use which.</p>
    <h1 id="_idParaDest-217" class="heading-1">Learn more on Discord</h1>
    <p class="normal">Read this book alongside other users, Unity game development experts, and the author himself. Ask questions, provide solutions to other readers, chat with the author via Ask Me Anything sessions, and much more. Scan the QR code or visit the link to join the community:</p>
    <p class="normal"><a href="https://packt.link/unitydev">https://packt.link/unitydev</a></p>
    <p class="normal"><img src="img/QR_Code1498477041053909218.png" alt="" role="presentation"/></p>
  </div>
</body></html>