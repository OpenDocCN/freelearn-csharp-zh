<html><head></head><body>
<div id="_idContainer086">
<h1 class="chapter-number" id="_idParaDest-68"><a id="_idTextAnchor250"/><span class="koboSpan" id="kobo.1.1">3</span></h1>
<h1 id="_idParaDest-69"><a id="_idTextAnchor251"/><span class="koboSpan" id="kobo.2.1">Converting a Xamarin.Forms App into .NET MAUI</span></h1>
<p><span class="koboSpan" id="kobo.3.1">Before we dive too far into .NET MAUI, we will look back at an existing Xamarin.Forms app and convert it into .NET MAUI. </span><span class="koboSpan" id="kobo.3.2">This chapter will guide you through the steps to convert an existing Xamarin.Forms app running on Mono into a .NET MAUI app running on .NET 7. </span><span class="koboSpan" id="kobo.3.3">We will discuss two different methods for converting your Xamarin.Forms application into .NET MAUI. </span><span class="koboSpan" id="kobo.3.4">The first method will use a new .NET MAUI project and move our old Xamarin.Forms code into the new project. </span><span class="koboSpan" id="kobo.3.5">The second method will use the </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">.NET Upgrade Assistant</span></strong><span class="koboSpan" id="kobo.5.1"> tool to do some of the upgrades </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">for us.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">If you are new to .NET MAUI and are not coming from Xamarin.Forms app development, feel free to skip this chapter and go straight to the </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">next project.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">The following topics will be covered in </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">this chapter:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.11.1">Moving code to a new .NET </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">MAUI project</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">An overview of upgrading a </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">Xamarin.Forms app</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Installing and running .NET </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">Upgrade Assistant</span></span></li>
</ul>
<h1 id="_idParaDest-70"><a id="_idTextAnchor252"/><a id="_idTextAnchor253"/><span class="koboSpan" id="kobo.17.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.18.1">To complete this project, you need to have Visual Studio installed on your </span><strong class="bold"><span class="koboSpan" id="kobo.19.1">Macintosh</span></strong><span class="koboSpan" id="kobo.20.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.21.1">Mac</span></strong><span class="koboSpan" id="kobo.22.1">) or PC, as well as the .NET Mobile components. </span><span class="koboSpan" id="kobo.22.2">Refer to </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.23.1">Chapter 1</span></em></span><span class="koboSpan" id="kobo.24.1">, </span><em class="italic"><span class="koboSpan" id="kobo.25.1">Introduction to .NET MAUI</span></em><span class="koboSpan" id="kobo.26.1">, for more details on how to set up your environment.</span><a id="_idTextAnchor254"/><span class="koboSpan" id="kobo.27.1"> There are additional components that will be installed in this chapter, so you will need an internet connection to download and install .NET Upgrade Assistant. </span><span class="koboSpan" id="kobo.27.2">This chapter provides screenshots and instructions for Visual Studio </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">on Windows.</span></span></p>
<p><span class="koboSpan" id="kobo.29.1">This chapter will both be a classic </span><strong class="bold"><span class="koboSpan" id="kobo.30.1">File</span></strong><span class="koboSpan" id="kobo.31.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.32.1">New</span></strong><span class="koboSpan" id="kobo.33.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.34.1">Project</span></strong><span class="koboSpan" id="kobo.35.1"> chapter and use an existing app, guiding you step by step through the process of migrating an app from Xamarin.Forms to .NET MAUI. </span><span class="koboSpan" id="kobo.35.2">For the second app, you will need to download the source from this book’s </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">GitHub repository.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">You can find the full source for the code in this chapter at </span><a href="https://github.com/PacktPublishing/MAUI-Projects-3rd-Edition"><span class="koboSpan" id="kobo.38.1">https://github.com/PacktPublishing/MAUI-Projects-3rd-Edition</span></a><span class="koboSpan" id="kobo.39.1"> under the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.40.1">Chapter03</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.41.1"> folder.</span></span></p>
<h1 id="_idParaDest-71"><a id="_idTextAnchor255"/><span class="koboSpan" id="kobo.42.1">Project overview</span></h1>
<p><span class="koboSpan" id="kobo.43.1">This chapter is not meant to be an exhaustive tome of all the things you need to be aware of when converting your </span><a id="_idIndexMarker350"/><span class="koboSpan" id="kobo.44.1">Xamarin.Forms app into .NET MAUI. </span><span class="koboSpan" id="kobo.44.2">Rather, it is an overview of what you need to consider when migrating your app, along with two walk-throughs of methods to accomplish that task. </span><span class="koboSpan" id="kobo.44.3">There are too many variations in application styles, versions, frameworks, custom controls, and so on for this one chapter to cover every scenario. </span><span class="koboSpan" id="kobo.44.4">That could take an entire book and would most likely be outdated by the time it was published. </span><span class="koboSpan" id="kobo.44.5">So, in this chapter, we are</span><a id="_idIndexMarker351"/><span class="koboSpan" id="kobo.45.1"> going to focus on a simple migration method that has the benefit of using the .NET MAUI Single Project feature and .NET Migration Assistant, which will automate much of the manual stuff and is constantly </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">being updated.</span></span></p>
<p><span class="koboSpan" id="kobo.47.1">The first part of this chapter will use a new Xamarin.Forms app created from the Shell template. </span><span class="koboSpan" id="kobo.47.2">The second part of this chapter will use .NET Upgrade Assistant to upgrade the open source app, BuildChat, which is available on GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">at </span></span><a href="https://github.com/mindofai/Build2019Chat"><span class="No-Break"><span class="koboSpan" id="kobo.49.1">https://github.com/mindofai/Build2019Chat</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.50.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.51.1">Every development book needs to have a chat app; this book is no different. </span><span class="koboSpan" id="kobo.51.2">For .NET Migration Assistant, we will use an existing chat app that was built using Xamarin.Forms. </span><span class="koboSpan" id="kobo.51.3">The app can be debugged and tested locally, so there is no need to set up and configure any </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">cloud services.</span></span></p>
<p><span class="koboSpan" id="kobo.53.1">The build time for this project is about </span><span class="No-Break"><span class="koboSpan" id="kobo.54.1">one hour.</span></span></p>
<h1 id="_idParaDest-72"><a id="_idTextAnchor256"/><span class="koboSpan" id="kobo.55.1">Migrating into a blank .NET MAUI template</span></h1>
<p><span class="koboSpan" id="kobo.56.1">This method of moving your existing app </span><a id="_idIndexMarker352"/><span class="koboSpan" id="kobo.57.1">code into a new .NET MAUI app is used mainly for smaller, simpler apps that do not have a lot of external dependencies, such as NuGet, or native libraries. </span><span class="koboSpan" id="kobo.57.2">The largest benefit of this method is that your migrated app will be in a single project, targeting all the .NET MAUI-supported platforms. </span><span class="koboSpan" id="kobo.57.3">If your original app only targeted Android and iOS, using this method could get you Mac Catalyst and Windows targets for free. </span><span class="koboSpan" id="kobo.57.4">Using .NET Upgrade Assistant will not add any platforms that you didn’t </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">already target.</span></span></p>
<p><span class="koboSpan" id="kobo.59.1">To illustrate these steps, we will create a new project, just like we did in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.60.1">Chapter 2</span></em></span><span class="koboSpan" id="kobo.61.1">. </span><span class="koboSpan" id="kobo.61.2">This time, however, we will have to </span><a id="_idIndexMarker353"/><span class="koboSpan" id="kobo.62.1">create a Xamarin.Forms </span><span class="No-Break"><span class="koboSpan" id="kobo.63.1">project first.</span></span></p>
<h2 id="_idParaDest-73"><a id="_idTextAnchor257"/><span class="koboSpan" id="kobo.64.1">Creating a new Xamarin.Forms app</span></h2>
<p><span class="koboSpan" id="kobo.65.1">The following steps will guide you through </span><a id="_idIndexMarker354"/><span class="koboSpan" id="kobo.66.1">creating a new </span><a id="_idIndexMarker355"/><span class="No-Break"><span class="koboSpan" id="kobo.67.1">Xamarin.Forms project:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.68.1">Open Visual Studio 2022 and select </span><strong class="bold"><span class="koboSpan" id="kobo.69.1">Create a </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.70.1">new project</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer052">
<span class="koboSpan" id="kobo.72.1"><img alt="Figure 3.1 – Visual Studio 2022" src="image/B19214_03_1.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.73.1">Figure 3.1 – Visual Studio 2022</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.74.1">This will open the </span><strong class="bold"><span class="koboSpan" id="kobo.75.1">Create a new </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.76.1">project</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.77.1"> wizard.</span></span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.78.1">In the search field, type </span><strong class="source-inline"><span class="koboSpan" id="kobo.79.1">Xamarin.Forms</span></strong><span class="koboSpan" id="kobo.80.1"> and select the </span><strong class="bold"><span class="koboSpan" id="kobo.81.1">Mobile App (Xamarin.Forms)</span></strong><span class="koboSpan" id="kobo.82.1"> item</span><a id="_idIndexMarker356"/><span class="koboSpan" id="kobo.83.1"> from </span><span class="No-Break"><span class="koboSpan" id="kobo.84.1">the list:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer053">
<span class="koboSpan" id="kobo.85.1"><img alt="Figure 3.2 – New Xamarin.Forms project" src="image/B19214_03_2.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.86.1">Figure 3.2 – New Xamarin.Forms project</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.87.1">Complete the next </span><a id="_idIndexMarker357"/><span class="koboSpan" id="kobo.88.1">page of the wizard by naming your project </span><strong class="source-inline"><span class="koboSpan" id="kobo.89.1">MauiMigration</span></strong><span class="koboSpan" id="kobo.90.1">, and then </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.92.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer054">
<span class="koboSpan" id="kobo.94.1"><img alt="Figure 3.3 – Configuring the Xamarin.Forms project" src="image/B19214_03_3.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.95.1">Figure 3.3 – Configuring the Xamarin.Forms project</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.96.1">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.97.1">Flyout</span></strong><span class="koboSpan" id="kobo.98.1"> template and </span><a id="_idIndexMarker358"/><span class="koboSpan" id="kobo.99.1">ensure that all </span><a id="_idIndexMarker359"/><span class="koboSpan" id="kobo.100.1">three Xamarin.Forms platforms </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">are checked:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer055">
<span class="koboSpan" id="kobo.102.1"><img alt="Figure 3.4 – Selecting the Xamarin.Forms template and platforms" src="image/B19214_03_4.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.103.1">Figure 3.4 – Selecting the Xamarin.Forms template and platforms</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.104.1">You may receive a few messages about out-of-support components. </span><span class="koboSpan" id="kobo.104.2">These are expected if this is the</span><a id="_idIndexMarker360"/><span class="koboSpan" id="kobo.105.1"> first time you are creating a Xamarin.Forms app and can be </span><span class="No-Break"><span class="koboSpan" id="kobo.106.1">safely ignored.</span></span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.107.1">Finalize the setup by </span><a id="_idIndexMarker361"/><span class="koboSpan" id="kobo.108.1">clicking </span><strong class="bold"><span class="koboSpan" id="kobo.109.1">Create</span></strong><span class="koboSpan" id="kobo.110.1"> and wait for Visual Studio to create </span><span class="No-Break"><span class="koboSpan" id="kobo.111.1">the project.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.112.1">Before we begin to migrate this app, it’s a good idea to make sure it </span><span class="No-Break"><span class="koboSpan" id="kobo.113.1">works properly.</span></span></p></li>
<li><span class="koboSpan" id="kobo.114.1">Run the app and test out all the buttons, flyout options, </span><span class="No-Break"><span class="koboSpan" id="kobo.115.1">and menus.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.116.1">On the </span><strong class="bold"><span class="koboSpan" id="kobo.117.1">About</span></strong><span class="koboSpan" id="kobo.118.1"> page, there is a </span><strong class="bold"><span class="koboSpan" id="kobo.119.1">Learn more</span></strong><span class="koboSpan" id="kobo.120.1"> button that will open a browser and navigate you to the Xamarin.Forms quickstart </span><span class="No-Break"><span class="koboSpan" id="kobo.121.1">web page:</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer056">
<span class="koboSpan" id="kobo.122.1"><img alt="Figure 3.5 – The Learn ﻿more button" src="image/B19214_03_5.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.123.1">Figure 3.5 – The Learn more button</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.124.1">The flyout menu has</span><a id="_idIndexMarker362"/><span class="koboSpan" id="kobo.125.1"> three options: </span><strong class="bold"><span class="koboSpan" id="kobo.126.1">About</span></strong><span class="koboSpan" id="kobo.127.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.128.1">Browse</span></strong><span class="koboSpan" id="kobo.129.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.130.1">Logout</span></strong><span class="koboSpan" id="kobo.131.1">. </span><span class="koboSpan" id="kobo.131.2">Ensure you click on each one and explore all </span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">their functionality:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer057">
<span class="koboSpan" id="kobo.133.1"><img alt="Figure 3.6 – Flyout menu options" src="image/B19214_03_6.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.134.1">Figure 3.6 – Flyout menu options</span></p>
<p><span class="koboSpan" id="kobo.135.1">Now that we have </span><a id="_idIndexMarker363"/><span class="koboSpan" id="kobo.136.1">explored this Xamarin.Forms app, let’s move on to creating the new .NET MAUI project, which will act as our </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">new app.</span></span></p>
<h2 id="_idParaDest-74"><a id="_idTextAnchor258"/><span class="koboSpan" id="kobo.138.1">Creating a new .NET MAUI app</span></h2>
<p><span class="koboSpan" id="kobo.139.1">We will add a new project to the current solution to</span><a id="_idIndexMarker364"/><span class="koboSpan" id="kobo.140.1"> make things easier. </span><span class="koboSpan" id="kobo.140.2">To create a new .NET MAUI project, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">these </span></span><span class="No-Break"><a id="_idIndexMarker365"/></span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.143.1">In Visual Studio, right-click the </span><strong class="source-inline"><span class="koboSpan" id="kobo.144.1">MauiMigration</span></strong><span class="koboSpan" id="kobo.145.1"> solution item in </span><strong class="bold"><span class="koboSpan" id="kobo.146.1">Solution Explorer</span></strong><span class="koboSpan" id="kobo.147.1"> and select </span><strong class="bold"><span class="koboSpan" id="kobo.148.1">File</span></strong><span class="koboSpan" id="kobo.149.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.150.1">Add</span></strong><span class="koboSpan" id="kobo.151.1"> | </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.152.1">New Project</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer058">
<span class="koboSpan" id="kobo.154.1"><img alt="Figure 3.7 – Adding a new project to solution" src="image/B19214_03_7.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.155.1">Figure 3.7 – Adding a new project to solution</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.156.1">In</span><a id="_idIndexMarker366"/><span class="koboSpan" id="kobo.157.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.158.1">Add a new project</span></strong><span class="koboSpan" id="kobo.159.1"> dialog, select </span><strong class="bold"><span class="koboSpan" id="kobo.160.1">.NET MAUI App</span></strong><span class="koboSpan" id="kobo.161.1"> and</span><a id="_idIndexMarker367"/> <span class="No-Break"><span class="koboSpan" id="kobo.162.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.163.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.164.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer059">
<span class="koboSpan" id="kobo.165.1"><img alt="Figure 3.8 – Adding a new .NET MAUI project" src="image/B19214_03_8.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.166.1">Figure 3.8 – Adding a new .NET MAUI project</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.167.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.168.1">Configure your new project</span></strong><span class="koboSpan" id="kobo.169.1"> dialog, set</span><a id="_idIndexMarker368"/><span class="koboSpan" id="kobo.170.1"> the project </span><a id="_idIndexMarker369"/><span class="koboSpan" id="kobo.171.1">name to </span><strong class="source-inline"><span class="koboSpan" id="kobo.172.1">MyMauiApp</span></strong><span class="koboSpan" id="kobo.173.1"> and </span><span class="No-Break"><span class="koboSpan" id="kobo.174.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.175.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.176.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer060">
<span class="koboSpan" id="kobo.177.1"><img alt="Figure 3.9 – Configuring the .NET MAUI project" src="image/B19214_03_9.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.178.1">Figure 3.9 – Configuring the .NET MAUI project</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.179.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.180.1">Additional Information</span></strong><span class="koboSpan" id="kobo.181.1"> dialog, ensure that the selected framework is </span><strong class="bold"><span class="koboSpan" id="kobo.182.1">.NET 7.0 (Standard Term Support)</span></strong><span class="koboSpan" id="kobo.183.1"> and </span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.185.1">Create</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.186.1">.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.187.1">Now that we have the shell of the .NET </span><a id="_idIndexMarker370"/><span class="koboSpan" id="kobo.188.1">MAUI app, we can start moving the important parts of the Xamarin.Forms app </span><a id="_idIndexMarker371"/><span class="koboSpan" id="kobo.189.1">over to the .NET </span><span class="No-Break"><span class="koboSpan" id="kobo.190.1">MAUI project.</span></span></p>
<h2 id="_idParaDest-75"><a id="_idTextAnchor259"/><span class="koboSpan" id="kobo.191.1">Migrating the MauiMigration app to MyMauiApp</span></h2>
<p><span class="koboSpan" id="kobo.192.1">Migrating a Xamarin.Forms app into a</span><a id="_idIndexMarker372"/><span class="koboSpan" id="kobo.193.1"> blank new .NET MAUI template will involve the following </span><span class="No-Break"><span class="koboSpan" id="kobo.194.1">high-level steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.195.1">Copy your app files into the</span><a id="_idIndexMarker373"/> <span class="No-Break"><span class="koboSpan" id="kobo.196.1">new template.</span></span></li>
<li><span class="koboSpan" id="kobo.197.1">Change the Xamarin.Forms namespace to its .NET </span><span class="No-Break"><span class="koboSpan" id="kobo.198.1">MAUI equivalent.</span></span></li>
<li><span class="koboSpan" id="kobo.199.1">Update the app startup so that it uses </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">your views.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.201.1">The next few sections will explain</span><a id="_idIndexMarker374"/><span class="koboSpan" id="kobo.202.1"> how to accomplish </span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">these steps.</span></span></p>
<h3><span class="koboSpan" id="kobo.204.1">Copying files to a new project</span></h3>
<p><span class="koboSpan" id="kobo.205.1">To begin, let’s copy the</span><a id="_idIndexMarker375"/><span class="koboSpan" id="kobo.206.1"> XAML and C# files and folders from the Xamarin.Forms project to the .NET MAUI project. </span><span class="koboSpan" id="kobo.206.2">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.207.1">MauiMigration</span></strong><span class="koboSpan" id="kobo.208.1"> project, select the </span><strong class="source-inline"><span class="koboSpan" id="kobo.209.1">Models</span></strong><span class="koboSpan" id="kobo.210.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.211.1">Services</span></strong><span class="koboSpan" id="kobo.212.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.213.1">ViewModels</span></strong><span class="koboSpan" id="kobo.214.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.215.1">Views</span></strong><span class="koboSpan" id="kobo.216.1"> folders. </span><span class="koboSpan" id="kobo.216.2">We will copy these files instead of moving them so that we don’t destroy the original project. </span><span class="koboSpan" id="kobo.216.3">Right-click any of the selected folders and select </span><strong class="bold"><span class="koboSpan" id="kobo.217.1">Copy</span></strong><span class="koboSpan" id="kobo.218.1">. </span><span class="koboSpan" id="kobo.218.2">Right-click the </span><strong class="source-inline"><span class="koboSpan" id="kobo.219.1">MauiApp</span></strong><span class="koboSpan" id="kobo.220.1"> project and </span><span class="No-Break"><span class="koboSpan" id="kobo.221.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.222.1">Paste</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.224.1">A few images are also needed; we will copy them from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.225.1">MauiMigration.UWP</span></strong><span class="koboSpan" id="kobo.226.1"> project. </span><span class="koboSpan" id="kobo.226.2">Under the </span><strong class="source-inline"><span class="koboSpan" id="kobo.227.1">MauiMigration.UWP</span></strong><span class="koboSpan" id="kobo.228.1"> project, you will find three image files called </span><strong class="source-inline"><span class="koboSpan" id="kobo.229.1">icon_about.png</span></strong><span class="koboSpan" id="kobo.230.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.231.1">icon_feed.png</span></strong><span class="koboSpan" id="kobo.232.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.233.1">xamarin_logo.png</span></strong><span class="koboSpan" id="kobo.234.1">. </span><span class="koboSpan" id="kobo.234.2">Select all three files and copy them just like you did for the previous files. </span><span class="koboSpan" id="kobo.234.3">Paste the files into the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.235.1">MyMauiApp/Resources/Images</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.236.1"> folder.</span></span></p>
<p><span class="koboSpan" id="kobo.237.1">Visual Studio may make some changes to your project file when you copy/paste files, such as adding new item groups that remove and add the same file to the project. </span><span class="koboSpan" id="kobo.237.2">You can safely remove these changes as the single project system knows how to handle </span><strong class="source-inline"><span class="koboSpan" id="kobo.238.1">XAML</span></strong><span class="koboSpan" id="kobo.239.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.240.1">.png</span></strong><span class="koboSpan" id="kobo.241.1"> files. </span><span class="koboSpan" id="kobo.241.2">If you get compilation errors related to missing images or errors in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.242.1">XAML</span></strong><span class="koboSpan" id="kobo.243.1"> files, check </span><strong class="source-inline"><span class="koboSpan" id="kobo.244.1">MyMAuiApp.csproj</span></strong><span class="koboSpan" id="kobo.245.1"> for any additional </span><strong class="source-inline"><span class="koboSpan" id="kobo.246.1">ItemGroups</span></strong><span class="koboSpan" id="kobo.247.1"> that reference either the </span><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">.png</span></strong><span class="koboSpan" id="kobo.249.1"> files or </span><strong class="source-inline"><span class="koboSpan" id="kobo.250.1">XAML</span></strong><span class="koboSpan" id="kobo.251.1"> files and </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">remove them.</span></span></p>
<p><span class="koboSpan" id="kobo.253.1">The following screenshot shows an example of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.254.1">MyMauiApp.csproj</span></strong><span class="koboSpan" id="kobo.255.1"> file after copying the images from </span><strong class="source-inline"><span class="koboSpan" id="kobo.256.1">MauiMigration.UWP</span></strong><span class="koboSpan" id="kobo.257.1">. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.258.1">Figure 3</span></em></span><em class="italic"><span class="koboSpan" id="kobo.259.1">.10</span></em><span class="koboSpan" id="kobo.260.1"> shows the changes that Visual Studio added; these can </span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">be removed:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer061">
<span class="koboSpan" id="kobo.262.1"><img alt="Figure 3.10 – Visual Studio added unnecessary items" src="image/B19214_03_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.263.1">Figure 3.10 – Visual Studio added unnecessary items</span></p>
<p><span class="koboSpan" id="kobo.264.1">Next, we will need to</span><a id="_idIndexMarker376"/><span class="koboSpan" id="kobo.265.1"> update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.266.1">XAML</span></strong><span class="koboSpan" id="kobo.267.1"> files so that they reference .NET </span><span class="No-Break"><span class="koboSpan" id="kobo.268.1">MAUI controls.</span></span></p>
<h3><span class="koboSpan" id="kobo.269.1">Updating namespaces</span></h3>
<p><span class="koboSpan" id="kobo.270.1">Currently, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.271.1">XAML</span></strong><span class="koboSpan" id="kobo.272.1"> files are</span><a id="_idIndexMarker377"/><span class="koboSpan" id="kobo.273.1"> still using the Xamarin.Forms namespace. </span><span class="koboSpan" id="kobo.273.2">To update these files, we need to change </span><span class="No-Break"><span class="koboSpan" id="kobo.274.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.275.1">
</span></pre> <p><span class="koboSpan" id="kobo.276.1">We must amend this </span><span class="No-Break"><span class="koboSpan" id="kobo.277.1">like so:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.278.1">
</span></pre> <p><span class="koboSpan" id="kobo.279.1">You can use the </span><strong class="bold"><span class="koboSpan" id="kobo.280.1">Find and Replace</span></strong><span class="koboSpan" id="kobo.281.1"> feature in Visual Studio to make these changes or manually edit each file. </span><span class="koboSpan" id="kobo.281.2">To use the </span><strong class="bold"><span class="koboSpan" id="kobo.282.1">Find and Replace</span></strong><span class="koboSpan" id="kobo.283.1"> dialog, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.284.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.285.1">In </span><strong class="bold"><span class="koboSpan" id="kobo.286.1">Solution Explorer</span></strong><span class="koboSpan" id="kobo.287.1">, select the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.288.1">MyMauiApp</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.289.1"> project.</span></span></li>
<li><span class="koboSpan" id="kobo.290.1">From the Visual Studio menu select </span><strong class="bold"><span class="koboSpan" id="kobo.291.1">Edit</span></strong><span class="koboSpan" id="kobo.292.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.293.1">Find and Replace</span></strong><span class="koboSpan" id="kobo.294.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.295.1">Replace in Files</span></strong><span class="koboSpan" id="kobo.296.1"> (or </span><em class="italic"><span class="koboSpan" id="kobo.297.1">Ctrl</span></em><span class="koboSpan" id="kobo.298.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.299.1">Shift</span></em><span class="koboSpan" id="kobo.300.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.301.1">H</span></em><span class="koboSpan" id="kobo.302.1">) to open the </span><strong class="bold"><span class="koboSpan" id="kobo.303.1">Find and </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.304.1">Replace</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.305.1"> dialog:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer062">
<span class="koboSpan" id="kobo.306.1"><img alt="Figure 3.11 – The Find and Replace dialog﻿" src="image/B19214_03_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.307.1">Figure 3.11 – The Find and Replace dialog</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.308.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.309.1">Look in</span></strong><span class="koboSpan" id="kobo.310.1"> field, select </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.311.1">Current project</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.312.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.313.1">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.314.1">Replace All</span></strong><span class="koboSpan" id="kobo.315.1"> button; there</span><a id="_idIndexMarker378"/><span class="koboSpan" id="kobo.316.1"> should only be five places to make </span><span class="No-Break"><span class="koboSpan" id="kobo.317.1">that change.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.318.1">Once completed, there are a few other changes that need t</span><a id="_idTextAnchor260"/><span class="koboSpan" id="kobo.319.1">o </span><span class="No-Break"><span class="koboSpan" id="kobo.320.1">be made.</span></span></p>
<p><span class="koboSpan" id="kobo.321.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.322.1">NewItemPage.xaml</span></strong><span class="koboSpan" id="kobo.323.1"> file, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.324.1">Views</span></strong><span class="koboSpan" id="kobo.325.1"> folder of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.326.1">MyMauiApp</span></strong><span class="koboSpan" id="kobo.327.1"> project, remove the following </span><span class="No-Break"><span class="koboSpan" id="kobo.328.1">highlighted text:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.329.1">
Title="New Item"
</span><strong class="bold"><span class="koboSpan" id="kobo.330.1"/></strong>
<strong class="bold"><span class="koboSpan" id="kobo.331.1">ios:Page.UseSafeArea="true"</span></strong><span class="koboSpan" id="kobo.332.1">&gt;</span></pre> <p><span class="koboSpan" id="kobo.333.1">Now that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">XAML</span></strong><span class="koboSpan" id="kobo.335.1"> file namespace changes are complete, we can move on to the C# </span><span class="No-Break"><span class="koboSpan" id="kobo.336.1">namespace changes.</span></span></p>
<p><span class="koboSpan" id="kobo.337.1">Using the </span><strong class="bold"><span class="koboSpan" id="kobo.338.1">Find and Replace</span></strong><span class="koboSpan" id="kobo.339.1"> dialog again, we can remove all the Xamarin.Forms namespace references. </span><span class="koboSpan" id="kobo.339.2">This time, by using a regular expression, we can remove multiple lines. </span><span class="koboSpan" id="kobo.339.3">Use the following expression in the </span><strong class="bold"><span class="koboSpan" id="kobo.340.1">Find</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.341.1">entry box:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.342.1">
^using Xamarin\.[Forms,Essentials].*;</span></pre> <p><span class="koboSpan" id="kobo.343.1">Then, check the </span><strong class="bold"><span class="koboSpan" id="kobo.344.1">Use regular expressions</span></strong><span class="koboSpan" id="kobo.345.1"> checkbox and select </span><strong class="bold"><span class="koboSpan" id="kobo.346.1">Current project</span></strong><span class="koboSpan" id="kobo.347.1"> for </span><strong class="bold"><span class="koboSpan" id="kobo.348.1">Look in</span></strong><span class="koboSpan" id="kobo.349.1">, as </span><span class="No-Break"><span class="koboSpan" id="kobo.350.1">shown here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer063">
<span class="koboSpan" id="kobo.351.1"><img alt="Figure 3.12 – Find and Replace – C# namespaces" src="image/B19214_03_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.352.1">Figure 3.12 – Find and Replace – C# namespaces</span></p>
<p><span class="koboSpan" id="kobo.353.1">Most of the changes have</span><a id="_idIndexMarker379"/><span class="koboSpan" id="kobo.354.1"> been made, and the app should compile at this point. </span><span class="koboSpan" id="kobo.354.2">However, it is not using any of the code we have copied and modified as .NET MAUI Shell does not</span><a id="_idIndexMarker380"/><span class="koboSpan" id="kobo.355.1"> reference the copied pages. </span><span class="koboSpan" id="kobo.355.2">The next step is to hook Shell into </span><span class="No-Break"><span class="koboSpan" id="kobo.356.1">our code.</span></span></p>
<h3><span class="koboSpan" id="kobo.357.1">Modifying the app startup</span></h3>
<p><span class="koboSpan" id="kobo.358.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.359.1">MyMauiApp</span></strong><span class="koboSpan" id="kobo.360.1"> project is still using the default </span><strong class="source-inline"><span class="koboSpan" id="kobo.361.1">MainPage.xaml</span></strong><span class="koboSpan" id="kobo.362.1"> file as its startup page. </span><span class="koboSpan" id="kobo.362.2">The next step in our </span><a id="_idIndexMarker381"/><span class="koboSpan" id="kobo.363.1">migration is to make the </span><strong class="source-inline"><span class="koboSpan" id="kobo.364.1">AppShell.xaml</span></strong><span class="koboSpan" id="kobo.365.1"> file the same as it is for our </span><span class="No-Break"><span class="koboSpan" id="kobo.366.1">Xamarin.Forms app.</span></span></p>
<p><span class="koboSpan" id="kobo.367.1">What we need to copy is in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.368.1">MauiMigration</span></strong><span class="koboSpan" id="kobo.369.1"> project, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.370.1">AppShell.xaml</span></strong><span class="koboSpan" id="kobo.371.1"> file, starting at line 76 until line 101, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.372.1">code snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.373.1">
    &lt;!--
        When the Flyout is visible this defines the content to display in the flyout.
</span><span class="koboSpan" id="kobo.373.2">        FlyoutDisplayOptions="AsMultipleItems" will create a separate flyout item for each child element           https://docs.microsoft.com/dotnet/api/xamarin.forms.shellgroupitem.flyoutdisplayoptions?view=xamarin-forms
    --&gt;
    &lt;FlyoutItem Title="About" Icon="icon_about.png"&gt;
        &lt;ShellContent Route="AboutPage" ContentTemplate="{DataTemplate local:AboutPage}" /&gt;
    &lt;/FlyoutItem&gt;
    &lt;FlyoutItem Title="Browse" Icon="icon_feed.png"&gt;
        &lt;ShellContent Route="ItemsPage" ContentTemplate="{DataTemplate local:ItemsPage}" /&gt;
    &lt;/FlyoutItem&gt;
    &lt;!-- When the Flyout is visible this will be a menu item you can tie a click behavior to  --&gt;
    &lt;MenuItem Text="Logout" StyleClass="MenuItemLayoutStyle" Clicked="OnMenuItemClicked"&gt;
    &lt;/MenuItem&gt;
    &lt;!--
        TabBar lets you define content that won't show up in a flyout menu. </span><span class="koboSpan" id="kobo.373.3">When this content is active
        the flyout menu won't be available. </span><span class="koboSpan" id="kobo.373.4">This is useful for creating areas of the application where
        you don't want users to be able to navigate away from. </span><span class="koboSpan" id="kobo.373.5">If you would like to navigate to this
        content you can do so by calling
        await Shell.Current.GoToAsync("//LoginPage");
    --&gt;
    &lt;TabBar&gt;
        &lt;ShellContent Route="LoginPage" ContentTemplate="{DataTemplate local:LoginPage}" /&gt;
    &lt;/TabBar&gt;</span></pre> <p><span class="koboSpan" id="kobo.374.1">Copy the preceding code and</span><a id="_idIndexMarker382"/><span class="koboSpan" id="kobo.375.1"> replace the following lines in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.376.1">MyMauiApp</span></strong><span class="koboSpan" id="kobo.377.1"> project’s </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.378.1">AppShell.xaml</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.379.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.380.1">
    &lt;ShellContent
        Title="Home"
        ContentTemplate="{DataTemplate local:MainPage}"
        Route="MainPage" /&gt;</span></pre> <p><span class="koboSpan" id="kobo.381.1">To enable the flyout, you will need to remove the following highlighted text </span><span class="No-Break"><span class="koboSpan" id="kobo.382.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.383.1">AppShell.xaml</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.385.1">
    
    </span><strong class="bold"><span class="koboSpan" id="kobo.386.1">Shell.FlyoutBehavior="Disabled"</span></strong><span class="koboSpan" id="kobo.387.1">&gt;</span></pre> <p><span class="koboSpan" id="kobo.388.1">The final change that we need to make will register the correct instance for the </span><strong class="bold"><span class="koboSpan" id="kobo.389.1">Browse</span></strong><span class="koboSpan" id="kobo.390.1"> page to use for the list of items. </span><span class="koboSpan" id="kobo.390.2">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.391.1">MauiProgram.cs</span></strong><span class="koboSpan" id="kobo.392.1"> file and make the changes highlighted in the </span><a id="_idIndexMarker383"/><span class="koboSpan" id="kobo.393.1">following </span><span class="No-Break"><span class="koboSpan" id="kobo.394.1">code block:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.395.1">
using Microsoft.Extensions.Logging;
</span><strong class="bold"><span class="koboSpan" id="kobo.396.1">using MauiMigration.Services;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.397.1">using MauiMigration.Models;</span></strong><span class="koboSpan" id="kobo.398.1">
namespace MyMauiApp
{
    public static class MauiProgram
    {
        public static MauiApp CreateMauiApp()
        {
            var builder = MauiApp.CreateBuilder();
            builder
                .UseMauiApp&lt;App&gt;()
                .ConfigureFonts(fonts =&gt;
                {
                    fonts.AddFont("OpenSans-Regular.ttf", "OpenSansRegular");
                    fonts.AddFont("OpenSans-Semibold.ttf", "OpenSansSemibold");
                });
            </span><strong class="bold"><span class="koboSpan" id="kobo.399.1">DependencyService.RegisterSingleton&lt;IDataStore&lt;Item&gt;&gt;(new MockDataStore());</span></strong><span class="koboSpan" id="kobo.400.1">
#if DEBUG
        builder.Logging.AddDebug();
#endif
        return builder.Build();
        }
    }
}</span></pre> <p><span class="koboSpan" id="kobo.401.1">At this point, you should be able to compile and run the converted project. </span><span class="koboSpan" id="kobo.401.2">Make sure you set </span><strong class="source-inline"><span class="koboSpan" id="kobo.402.1">MyMauiApp</span></strong><span class="koboSpan" id="kobo.403.1"> as the startup project before running. </span><span class="koboSpan" id="kobo.403.2">Play around with the app and make sure it is all working before </span><a id="_idIndexMarker384"/><span class="koboSpan" id="kobo.404.1">moving on to the next section on manually migrating your apps to .</span><span class="No-Break"><span class="koboSpan" id="kobo.405.1">NET MAUI.</span></span></p>
<h1 id="_idParaDest-76"><a id="_idTextAnchor261"/><span class="koboSpan" id="kobo.406.1">Manual migration overview</span></h1>
<p><span class="koboSpan" id="kobo.407.1">In the previous section, we converted a simple Xamarin.Forms app into .NET MAUI using the Single Project system. </span><span class="koboSpan" id="kobo.407.2">This project did not use any advanced features of Xamarin.Forms, such as external NuGets, custom controls, or any commercial controls. </span><span class="koboSpan" id="kobo.407.3">These are additional items that you will have to consider when migrating your apps from Xamarin.Forms to .</span><span class="No-Break"><span class="koboSpan" id="kobo.408.1">NET MAUI.</span></span></p>
<p><span class="koboSpan" id="kobo.409.1">In this section, we are going to discuss </span><a id="_idIndexMarker385"/><span class="koboSpan" id="kobo.410.1">the basic flow that you should go through to migrate your Xamarin.Forms app to .NET MAUI. </span><span class="koboSpan" id="kobo.410.2">This is by no means an all-inclusive list; the .NET MAUI team is updating a wiki page that details all their knowledge in </span><span class="No-Break"><span class="koboSpan" id="kobo.411.1">one location.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.412.1">Official migration guide</span></p>
<p class="callout"><span class="koboSpan" id="kobo.413.1">The guidelines for migrating your Xamarin.Forms apps to .NET MAUI are continually evolving since the release of .NET MAUI, based on usage and feedback. </span><span class="koboSpan" id="kobo.413.2">To review the latest guidelines, please visit the following URL in your favorite </span><span class="No-Break"><span class="koboSpan" id="kobo.414.1">browser: </span></span><a href="https://learn.microsoft.com/en-us/dotnet/maui/get-started/migrate?view=net-maui-7.0"><span class="No-Break"><span class="koboSpan" id="kobo.415.1">https://learn.microsoft.com/en-us/dotnet/maui/get-started/migrate?view=net-maui-7.0</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.416.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.417.1">When migrating your apps from Xamarin.Forms to .NET MAUI, you will need to follow the overall steps </span><span class="No-Break"><span class="koboSpan" id="kobo.418.1">outlined </span></span><span class="No-Break"><a id="_idIndexMarker386"/></span><span class="No-Break"><span class="koboSpan" id="kobo.419.1">here:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.420.1">Convert the Xamarin.Forms projects from .NET Framework into .NET </span><span class="No-Break"><span class="koboSpan" id="kobo.421.1">SDK style.</span></span></li>
<li><span class="koboSpan" id="kobo.422.1">Update the code from Xamarin.Forms to .</span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">NET MAUI.</span></span></li>
<li><span class="koboSpan" id="kobo.424.1">Update any incompatible dependencies with .NET </span><span class="No-Break"><span class="koboSpan" id="kobo.425.1">6+ versions.</span></span></li>
<li><span class="koboSpan" id="kobo.426.1">Address any breaking </span><span class="No-Break"><span class="koboSpan" id="kobo.427.1">API changes.</span></span></li>
<li><span class="koboSpan" id="kobo.428.1">Run the converted app and verify </span><span class="No-Break"><span class="koboSpan" id="kobo.429.1">its functionality.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.430.1">.NET Upgrade Assistant is a tool that will attempt to perform the first four steps for you. </span><span class="koboSpan" id="kobo.430.2">However, before we dive into using .NET Upgrade Assistant, we are going to look at what each of these steps entails so that we have a firm understanding of how to migrate our app if .NET Upgrade Assistant is unable to operate on an </span><span class="No-Break"><span class="koboSpan" id="kobo.431.1">app project.</span></span></p>
<h2 id="_idParaDest-77"><a id="_idTextAnchor262"/><span class="koboSpan" id="kobo.432.1">Converting the Xamarin.Forms projects from .NET Framework into .NET SDK style</span></h2>
<p><span class="koboSpan" id="kobo.433.1">Some Xamarin.Forms projects are based on the .NET Framework project template. </span><span class="koboSpan" id="kobo.433.2">It is a verbose project format that has been </span><a id="_idIndexMarker387"/><span class="koboSpan" id="kobo.434.1">updated for .NET projects. </span><span class="koboSpan" id="kobo.434.2">The new format, typically referred to as the SDK style, is a much more concise format with better defaults. </span><span class="koboSpan" id="kobo.434.3">Xamarin.Forms projects created with Visual Studio 16.5 or later use the newer </span><span class="No-Break"><span class="koboSpan" id="kobo.435.1">SDK format.</span></span></p>
<p><span class="koboSpan" id="kobo.436.1">To convert an old format project file, such as the one we will be using with .NET Upgrade Assistant, in the </span><em class="italic"><span class="koboSpan" id="kobo.437.1">Installing and running .NET Upgrade Assistant</span></em><span class="koboSpan" id="kobo.438.1"> section later in this chapter, you would need to change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.439.1">&lt;Project /&gt;</span></strong><span class="koboSpan" id="kobo.440.1"> element to the new SDK style, </span><span class="No-Break"><span class="koboSpan" id="kobo.441.1">like this:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.442.1">Find a line like this in your </span><span class="No-Break"><span class="koboSpan" id="kobo.443.1">project file:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.444.1">
&lt;Project ToolsVersion="4.0" DefaultTargets="Build" &gt;</span></pre></li> <li><span class="koboSpan" id="kobo.445.1">Replace it with </span><span class="No-Break"><span class="koboSpan" id="kobo.446.1">the following:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.447.1">
&lt;Project Sdk="Microsoft.NET.Sdk"&gt;</span></pre></li> </ol>
<p><span class="koboSpan" id="kobo.448.1">Remember that you will have to make this change for all your Xamarin.Forms projects, platform-specific projects, and any shared </span><span class="No-Break"><span class="koboSpan" id="kobo.449.1">library projects.</span></span></p>
<p><span class="koboSpan" id="kobo.450.1">Let’s look at the specific changes that you might have to make for a typical Xamarin.Forms project that targets</span><a id="_idIndexMarker388"/><span class="koboSpan" id="kobo.451.1"> both Android </span><span class="No-Break"><span class="koboSpan" id="kobo.452.1">and iOS.</span></span></p>
<p><span class="koboSpan" id="kobo.453.1">To convert the shared library project of a Xamarin.Forms app into a .NET MAUI project, we need to replace the contents of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.454.1">csproj</span></strong><span class="koboSpan" id="kobo.455.1"> file with </span><span class="No-Break"><span class="koboSpan" id="kobo.456.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.457.1">
&lt;Project Sdk="Microsoft.NET.Sdk"&gt;
  &lt;PropertyGroup&gt;
    </span><strong class="bold"><span class="koboSpan" id="kobo.458.1">&lt;TargetFrameworks&gt;net7.0-ios;net7.0-android; &lt;/TargetFrameworks&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.459.1">    &lt;TargetFrameworks Condition="$([MSBuild]::IsOSPlatform</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.460.1">('windows'))"&gt;$(TargetFrameworks);net7.0-windows10.0.19041.0</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.461.1">&lt;/TargetFrameworks&gt;</span></strong><span class="koboSpan" id="kobo.462.1">
    </span><strong class="bold"><span class="koboSpan" id="kobo.463.1">&lt;UseMaui&gt;True&lt;/UseMaui&gt;</span></strong><span class="koboSpan" id="kobo.464.1">
    &lt;OutputType&gt;Library&lt;/OutputType&gt;
    &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;
    &lt;!-- Required for C# Hot Reload --&gt;
    &lt;UseInterpreter Condition="'$(Configuration)' == 'Debug'"&gt;True&lt;/UseInterpreter&gt;
    </span><strong class="bold"><span class="koboSpan" id="kobo.465.1">&lt;SupportedOSPlatformVersion Condition="$([MSBuild]::GetTargetPlatformIdentifier('$</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.466.1">(TargetFramework)')) == 'ios'"&gt;14.2&lt;/SupportedOSPlatformVersion&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.467.1">    &lt;SupportedOSPlatformVersion Condition="$([MSBuild]::GetTargetPlatformIdentifier('$</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.468.1">(TargetFramework)')) == 'android'"&gt;21.0&lt;/SupportedOSPlatformVersion&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.469.1">    &lt;SupportedOSPlatformVersion Condition="$([MSBuild]::GetTargetPlatformIdentifier('$</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.470.1">(TargetFramework)')) == 'windows'"&gt;10.0.17763.0&lt;/SupportedOS</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.471.1">PlatformVersion&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.472.1">    &lt;TargetPlatformMinVersion Condition="$([MSBuild]::GetTargetPlatformIdentifier('$</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.473.1">(TargetFramework)')) == 'windows'"&gt;10.0.17763.0&lt;/Target</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.474.1">PlatformMinVersion&gt;</span></strong><span class="koboSpan" id="kobo.475.1">
  &lt;/PropertyGroup&gt;
&lt;/Project&gt;</span></pre> <p><span class="koboSpan" id="kobo.476.1">The important bits are highlighted. </span><strong class="source-inline"><span class="koboSpan" id="kobo.477.1">&lt;UseMaui&gt;True&lt;/UseMaui&gt;</span></strong><span class="koboSpan" id="kobo.478.1"> will enable the project system to automatically add the correct </span><a id="_idIndexMarker389"/><span class="koboSpan" id="kobo.479.1">references to the project for .NET MAUI libraries. </span><span class="koboSpan" id="kobo.479.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">&lt;TargetFrameworks&gt;</span></strong><span class="koboSpan" id="kobo.481.1"> elements are updated</span><a id="_idIndexMarker390"/><span class="koboSpan" id="kobo.482.1"> for the correct </span><strong class="bold"><span class="koboSpan" id="kobo.483.1">Target Framework Monikers</span></strong><span class="koboSpan" id="kobo.484.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.485.1">TFMs</span></strong><span class="koboSpan" id="kobo.486.1">) for .NET 6 </span><span class="No-Break"><span class="koboSpan" id="kobo.487.1">or 7.</span></span></p>
<p><span class="koboSpan" id="kobo.488.1">.NET MAUI also requires an additional </span><strong class="source-inline"><span class="koboSpan" id="kobo.489.1">&lt;SupportedOSPlatformVersion&gt;</span></strong><span class="koboSpan" id="kobo.490.1"> property, which is set conditionally based </span><span class="No-Break"><span class="koboSpan" id="kobo.491.1">on </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.492.1">TargetPlatformIdentifier</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.493.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.494.1">That is a significant amount of reduction from the .NET Framework </span><strong class="source-inline"><span class="koboSpan" id="kobo.495.1">csproj</span></strong><span class="koboSpan" id="kobo.496.1"> files. </span><span class="koboSpan" id="kobo.496.2">In addition to the property reduction, you can remove most of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.497.1">&lt;ItemGroup&gt;…&lt;/ItemGroup&gt;</span></strong><span class="koboSpan" id="kobo.498.1"> entries since all source files are now included by default. </span><span class="koboSpan" id="kobo.498.2">The groups to leave are the groups containing </span><strong class="source-inline"><span class="koboSpan" id="kobo.499.1">&lt;ProjectReferences /&gt;</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.500.1">entries.</span></span></p>
<p><span class="koboSpan" id="kobo.501.1">Now that we’ve converted the shared project, let’s review the changes needed for an </span><span class="No-Break"><span class="koboSpan" id="kobo.502.1">Android project.</span></span></p>
<p><span class="koboSpan" id="kobo.503.1">As with all .NET Framework projects, we will need to change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.504.1">&lt;Project …&gt;</span></strong><span class="koboSpan" id="kobo.505.1"> element to </span><span class="No-Break"><span class="koboSpan" id="kobo.506.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.507.1">
&lt;Project Sdk="Microsoft.NET.Sdk"&gt;</span></pre> <p><span class="koboSpan" id="kobo.508.1">Now, remove all the </span><strong class="source-inline"><span class="koboSpan" id="kobo.509.1">&lt;PropertyGroup&gt;…&lt;/PropertyGroup&gt;</span></strong><span class="koboSpan" id="kobo.510.1"> elements since they are default values, and replace them with </span><span class="No-Break"><span class="koboSpan" id="kobo.511.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.512.1">
&lt;PropertyGroup&gt;
  </span><strong class="bold"><span class="koboSpan" id="kobo.513.1">&lt;UseMaui&gt;True&lt;/UseMaui&gt;</span></strong><span class="koboSpan" id="kobo.514.1">
  </span><strong class="bold"><span class="koboSpan" id="kobo.515.1">&lt;TargetFramework&gt;net7.0-android&lt;/TargetFramework&gt;</span></strong><span class="koboSpan" id="kobo.516.1">
  &lt;OutputType&gt;Exe&lt;/OutputType&gt;
  &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;
  </span><strong class="bold"><span class="koboSpan" id="kobo.517.1">&lt;SupportedOSPlatformVersion Condition="'$(TargetFramework)' == 'net7.0-android'"&gt;31.0&lt;/SupportedOSPlatformVersion&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.518.1">&lt;/PropertyGroup&gt;</span></strong><span class="koboSpan" id="kobo.519.1">
&lt;PropertyGroup&gt;
  &lt;UseInterpreter Condition="$(TargetFramework.Contains('-android'))"&gt;True&lt;/UseInterpreter&gt;
&lt;/PropertyGroup&gt;</span></pre> <p><span class="koboSpan" id="kobo.520.1">Again, in the Android project, we </span><a id="_idIndexMarker391"/><span class="koboSpan" id="kobo.521.1">set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.522.1">&lt;UseMaui&gt;</span></strong><span class="koboSpan" id="kobo.523.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.524.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">TargetFramework&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.526.1"> properties.</span></span></p>
<p><span class="koboSpan" id="kobo.527.1">To finish migrating this project file, remove all the </span><strong class="source-inline"><span class="koboSpan" id="kobo.528.1">&lt;ItemGroup&gt;</span></strong><span class="koboSpan" id="kobo.529.1"> elements and their contents, except for the one group that contains the </span><strong class="source-inline"><span class="koboSpan" id="kobo.530.1">&lt;AndroidResource&gt;</span></strong><span class="koboSpan" id="kobo.531.1"> elements. </span><span class="koboSpan" id="kobo.531.2">Finally, remove the </span><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">&lt;Import&gt;</span></strong><span class="koboSpan" id="kobo.533.1"> element at the bottom of the project file; it is no </span><span class="No-Break"><span class="koboSpan" id="kobo.534.1">longer needed.</span></span></p>
<p><span class="koboSpan" id="kobo.535.1">The next project type to look at is an iOS project. </span><span class="koboSpan" id="kobo.535.2">The changes here will be very similar to the changes in an Android project but with an iOS twist. </span><span class="koboSpan" id="kobo.535.3">Xamarin.Forms iOS projects are also a .NET Framework style project, so we will need to change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">&lt;Project …&gt;</span></strong><span class="koboSpan" id="kobo.537.1"> element to </span><span class="No-Break"><span class="koboSpan" id="kobo.538.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.539.1">
&lt;Project Sdk="Microsoft.NET.Sdk"&gt;</span></pre> <p><span class="koboSpan" id="kobo.540.1">Then, we will need to remove all the existing </span><strong class="source-inline"><span class="koboSpan" id="kobo.541.1">&lt;PropertyGroup&gt;</span></strong><span class="koboSpan" id="kobo.542.1"> elements and add </span><span class="No-Break"><span class="koboSpan" id="kobo.543.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.544.1">
&lt;PropertyGroup&gt;
  </span><strong class="bold"><span class="koboSpan" id="kobo.545.1">&lt;UseMaui&gt;true&lt;/UseMaui&gt;</span></strong><span class="koboSpan" id="kobo.546.1">
  </span><strong class="bold"><span class="koboSpan" id="kobo.547.1">&lt;TargetFramework&gt;net7.0-ios&lt;/TargetFramework&gt;</span></strong><span class="koboSpan" id="kobo.548.1">
  &lt;OutputType&gt;Exe&lt;/OutputType&gt;
  &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;
  </span><strong class="bold"><span class="koboSpan" id="kobo.549.1">&lt;SupportedOSPlatformVersion </span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.550.1">Condition="$([MSBuild]::GetTargetPlatformIdentifier('$</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.551.1">(TargetFramework)')) == 'ios'"&gt;14.2&lt;/SupportedOSPlatformVersion&gt;</span></strong><span class="koboSpan" id="kobo.552.1">
&lt;/PropertyGroup&gt;</span></pre> <p><span class="koboSpan" id="kobo.553.1">Again, you will notice the </span><strong class="source-inline"><span class="koboSpan" id="kobo.554.1">&lt;UseMaui&gt;</span></strong><span class="koboSpan" id="kobo.555.1"> property being set, and that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.556.1">&lt;TargetFramwork&gt;</span></strong><span class="koboSpan" id="kobo.557.1"> value </span><span class="No-Break"><span class="koboSpan" id="kobo.558.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.559.1">net7.0-ios</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.560.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.561.1">To finish converting an iOS </span><a id="_idIndexMarker392"/><span class="koboSpan" id="kobo.562.1">project, remove the </span><strong class="source-inline"><span class="koboSpan" id="kobo.563.1">&lt;ItemGroup&gt;</span></strong><span class="koboSpan" id="kobo.564.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.565.1">&lt;Import&gt;</span></strong><span class="koboSpan" id="kobo.566.1"> elements except for the one containing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.567.1">&lt;ProjectReference&gt;</span></strong><span class="koboSpan" id="kobo.568.1"> items; those are </span><span class="No-Break"><span class="koboSpan" id="kobo.569.1">still needed.</span></span></p>
<h2 id="_idParaDest-78"><a id="_idTextAnchor263"/><span class="koboSpan" id="kobo.570.1">Updating code from Xamarin.Forms to .NET MAUI</span></h2>
<p><span class="koboSpan" id="kobo.571.1">Updating the code from </span><a id="_idIndexMarker393"/><span class="koboSpan" id="kobo.572.1">Xamarin.Forms to .NET MAUI consists of several steps. </span><span class="koboSpan" id="kobo.572.2">First, we need to add some new code that is required to initialize .NET MAUI. </span><span class="koboSpan" id="kobo.572.3">Refer to the </span><em class="italic"><span class="koboSpan" id="kobo.573.1">Examining the files section</span></em><span class="koboSpan" id="kobo.574.1"> of </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.575.1">Chapter 2</span></em></span><span class="koboSpan" id="kobo.576.1"> for more details on the files that </span><span class="No-Break"><span class="koboSpan" id="kobo.577.1">are needed.</span></span></p>
<p><span class="koboSpan" id="kobo.578.1">The first change you will need is in the shared project. </span><span class="koboSpan" id="kobo.578.2">Add a new class file called </span><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">MauiProgram.cs</span></strong><span class="koboSpan" id="kobo.580.1"> with the following </span><span class="No-Break"><span class="koboSpan" id="kobo.581.1">contents, minimally:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.582.1">
public static class MauiProgram
{
    public static MauiApp CreateMauiApp()
    {
        var builder = MauiApp.CreateBuilder();
        builder
            .UseMauiApp&lt;App&gt;()
            .ConfigureFonts(fonts =&gt;
            {
                fonts.AddFont("OpenSans-Regular.ttf", 
"OpenSansRegular");
             });
        return builder.Build();
    }
}</span></pre> <p><span class="koboSpan" id="kobo.583.1">You may have to add additional code to this file so that it can handle additional needs for your application, such as registering types for dependency injection or registering additional library features, such </span><a id="_idIndexMarker394"/><span class="No-Break"><span class="koboSpan" id="kobo.584.1">as logging.</span></span></p>
<p><span class="koboSpan" id="kobo.585.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.586.1">Platforms/Android</span></strong><span class="koboSpan" id="kobo.587.1"> folder, add a new class file named </span><strong class="source-inline"><span class="koboSpan" id="kobo.588.1">MainApplication.cs</span></strong><span class="koboSpan" id="kobo.589.1"> and update the class so that it looks </span><span class="No-Break"><span class="koboSpan" id="kobo.590.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.591.1">
[Application]
public class MainApplication : MauiApplication
{
    public MainApplication(IntPtr handle, JniHandleOwnership ownership)
    : base(handle, ownership)
    {
    }
    protected override MauiApp CreateMauiApp() =&gt; MauiProgram.CreateMauiApp();
}</span></pre> <p><span class="koboSpan" id="kobo.592.1">We must also make a few adjustments to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.593.1">MainActivity</span></strong><span class="koboSpan" id="kobo.594.1"> class. </span><span class="koboSpan" id="kobo.594.2">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.595.1">MainActivity.cs</span></strong><span class="koboSpan" id="kobo.596.1"> file and make the changes highlighted in the </span><span class="No-Break"><span class="koboSpan" id="kobo.597.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.598.1">
[Activity(Label = "ManualMigration", Icon = "@mipmap/icon", 
Theme = </span><strong class="bold"><span class="koboSpan" id="kobo.599.1">"@style/Theme.MaterialComponents"</span></strong><span class="koboSpan" id="kobo.600.1">, MainLauncher = true, 
ConfigurationChanges = ConfigChanges.ScreenSize | ConfigChanges.
</span><span class="koboSpan" id="kobo.600.2">Orientation | ConfigChanges.UiMode | ConfigChanges.ScreenLayout | 
ConfigChanges.SmallestScreenSize )]
public class MainActivity </span><strong class="bold"><span class="koboSpan" id="kobo.601.1">: MauiAppCompatActivity</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.602.1">{</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.603.1">    protected override void OnCreate(Bundle savedInstanceState)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.604.1">    {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.605.1">        base.OnCreate(savedInstanceState);</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.606.1">    }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.607.1">}</span></strong></pre> <p><span class="koboSpan" id="kobo.608.1">The final change we would</span><a id="_idIndexMarker395"/><span class="koboSpan" id="kobo.609.1"> need to make in the Android project is to update </span><strong class="source-inline"><span class="koboSpan" id="kobo.610.1">targetSdkVersion</span></strong><span class="koboSpan" id="kobo.611.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.612.1">AndroidManifest.xml</span></strong><span class="koboSpan" id="kobo.613.1"> file to version </span><strong class="source-inline"><span class="koboSpan" id="kobo.614.1">33</span></strong><span class="koboSpan" id="kobo.615.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.616.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.617.1">
&lt;uses-sdk android:minSdkVersion="21" </span><strong class="bold"><span class="koboSpan" id="kobo.618.1">android:targetSdkVersion="33"</span></strong><span class="koboSpan" id="kobo.619.1"> /&gt;</span></pre> <p class="callout-heading"><span class="koboSpan" id="kobo.620.1">Android SDK versions</span></p>
<p class="callout"><span class="koboSpan" id="kobo.621.1">Since the Android SDK is updated yearly, it may be the case that the version of .NET for Android and .NET MAUI that you are</span><a id="_idIndexMarker396"/><span class="koboSpan" id="kobo.622.1"> using is also using a version of the Android SDK that is greater than </span><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">33</span></strong><span class="koboSpan" id="kobo.624.1">. </span><span class="koboSpan" id="kobo.624.2">The good news is that you will get an error in Visual Studio if </span><strong class="source-inline"><span class="koboSpan" id="kobo.625.1">targetSdkVersion</span></strong><span class="koboSpan" id="kobo.626.1"> is too low or is not installed. </span><span class="koboSpan" id="kobo.626.2">Just follow the instructions in the build error to set the SDK </span><span class="No-Break"><span class="koboSpan" id="kobo.627.1">version correctly.</span></span></p>
<p><span class="koboSpan" id="kobo.628.1">That is all the changes we need to make in the Android project for now. </span><span class="koboSpan" id="kobo.628.2">Moving on to the iOS project, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">AppDelegate.cs</span></strong><span class="koboSpan" id="kobo.630.1"> file can be updated so that it matches </span><span class="No-Break"><span class="koboSpan" id="kobo.631.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.632.1">
public partial class AppDelegate : MauiUIApplicationDelegate
{
    protected override MauiApp CreateMauiApp() =&gt; MauiProgram.
</span><span class="koboSpan" id="kobo.632.2">CreateMauiApp();
}</span></pre> <p><span class="koboSpan" id="kobo.633.1">The final change for the iOS project is to open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.634.1">Info.plist</span></strong><span class="koboSpan" id="kobo.635.1"> file and change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.636.1">MinimumOSVersion</span></strong><span class="koboSpan" id="kobo.637.1"> property </span><span class="No-Break"><span class="koboSpan" id="kobo.638.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.639.1">15.2</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.640.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.641.1">With the base changes needed</span><a id="_idIndexMarker397"/><span class="koboSpan" id="kobo.642.1"> to start your app as a .NET MAUI app done, the next changes are much broader </span><span class="No-Break"><span class="koboSpan" id="kobo.643.1">brush strokes:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.644.1">Remove all </span><strong class="source-inline"><span class="koboSpan" id="kobo.645.1">Xamarin.*</span></strong><span class="koboSpan" id="kobo.646.1"> namespaces from </span><strong class="source-inline"><span class="koboSpan" id="kobo.647.1">.</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.648.1">cs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.649.1"> files.</span></span></li>
<li><span class="koboSpan" id="kobo.650.1">Change all </span><strong class="source-inline"><span class="koboSpan" id="kobo.651.1">xaml</span></strong><span class="koboSpan" id="kobo.652.1"> namespace declarations from </span><span class="No-Break"><span class="koboSpan" id="kobo.653.1">the following:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.654.1">
</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.655.1">You will need to amend them </span><span class="No-Break"><span class="koboSpan" id="kobo.656.1">like so:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.657.1"/></pre></li> </ol>
<p><span class="koboSpan" id="kobo.658.1">You may notice that these are the same changes we made in the previous section when using a .NET MAUI </span><span class="No-Break"><span class="koboSpan" id="kobo.659.1">Single Project.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.660.1">About images</span></p>
<p class="callout"><span class="koboSpan" id="kobo.661.1">.NET MAUI has improved image handling for the various platforms that it targets. </span><span class="koboSpan" id="kobo.661.2">You can provide a single SVG image file, and it will resize the image correctly for all platforms for you. </span><span class="koboSpan" id="kobo.661.3">Since the SVG format is based on vectors, it will render much better than other formats such as JPG and PNG after resizing. </span><span class="koboSpan" id="kobo.661.4">It is recommended that you convert your images into SVG format, if possible, to take advantage of this feature in .</span><span class="No-Break"><span class="koboSpan" id="kobo.662.1">NET MAUI.</span></span></p>
<h2 id="_idParaDest-79"><a id="_idTextAnchor264"/><span class="koboSpan" id="kobo.663.1">Updating any incompatible NuGet packages</span></h2>
<p><span class="koboSpan" id="kobo.664.1">There are a lot of NuGet packages out there and there is no way we can cover them all. </span><span class="koboSpan" id="kobo.664.2">But, in general, for each of the NuGet packages that are in use in your app, be sure to look for a version that specifically </span><a id="_idIndexMarker398"/><span class="koboSpan" id="kobo.665.1">supports .NET MAUI or the version of .NET that you are targeting. </span><span class="koboSpan" id="kobo.665.2">You can use the NuGet Gallery page to determine whether a package supports .NET MAUI. </span><span class="koboSpan" id="kobo.665.3">Using a popular package such as PCLCrypto version 2.0.147 (</span><a href="https://www.nuget.org/packages/PCLCrypto/2.0.147#supportedframeworks-body-tab"><span class="koboSpan" id="kobo.666.1">https://www.nuget.org/packages/PCLCrypto/2.0.147#supportedframeworks-body-tab</span></a><span class="koboSpan" id="kobo.667.1">) targets classic Xamarin projects but not .NET 6 or .NET 7. </span><span class="koboSpan" id="kobo.667.2">You can find the compatible frameworks under the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.668.1">Frameworks</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.669.1"> tab:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer064">
<span class="koboSpan" id="kobo.670.1"><img alt="Figure 3.13 – NuGet Gallery page for PCLCrypto v2.0.147" src="image/B19214_03_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.671.1">Figure 3.13 – NuGet Gallery page for PCLCrypto v2.0.147</span></p>
<p><span class="koboSpan" id="kobo.672.1">However, version 2.1.40-alpha (</span><a href="https://www.nuget.org/packages/PCLCrypto/2.1.40-alpha#supportedframeworks-body-tab"><span class="koboSpan" id="kobo.673.1">https://www.nuget.org/packages/PCLCrypto/2.1.40-alpha#supportedframeworks-body-tab</span></a><span class="koboSpan" id="kobo.674.1">) lists .NET 6</span><a id="_idIndexMarker399"/><span class="koboSpan" id="kobo.675.1"> and .NET 7 as </span><span class="No-Break"><span class="koboSpan" id="kobo.676.1">compatible frameworks:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer065">
<span class="koboSpan" id="kobo.677.1"><img alt="Figure 3.14 – NuGet Gallery page for PCLCrypto v2.1.40-alpha" src="image/B19214_03_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.678.1">Figure 3.14 – NuGet Gallery page for PCLCrypto v2.1.40-alpha</span></p>
<p><span class="koboSpan" id="kobo.679.1">Currently, we know of the following</span><a id="_idIndexMarker400"/> <span class="No-Break"><span class="koboSpan" id="kobo.680.1">NuGet changes:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.681.1">Remove all Xamarin.Forms and Xamarin.Essentials NuGet references from your projects. </span><span class="koboSpan" id="kobo.681.2">These are now included in .NET MAUI directly. </span><span class="koboSpan" id="kobo.681.3">You will have to make some namespace adjustments as those </span><span class="No-Break"><span class="koboSpan" id="kobo.682.1">have changed.</span></span></li>
<li><span class="koboSpan" id="kobo.683.1">Replace Xamarin.Community Toolkit with the latest preview of .NET MAUI Community Toolkit. </span><span class="koboSpan" id="kobo.683.2">You will have to make some namespace adjustments as those </span><span class="No-Break"><span class="koboSpan" id="kobo.684.1">have changed.</span></span></li>
<li><span class="koboSpan" id="kobo.685.1">If you reference any of the following SkiaSharp NuGet packages directly, replace them with the </span><span class="No-Break"><span class="koboSpan" id="kobo.686.1">latest previews:</span></span><ul><li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.687.1">SkiaSharp.Views.Maui.Controls</span></strong></span></li><li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.688.1">SkiaSharp.Views.Maui.Core</span></strong></span></li><li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.689.1">SkiaSharp.Views.Maui.Controls.Compatibility</span></strong></span></li></ul></li>
</ul>
<p><span class="koboSpan" id="kobo.690.1">You can find the latest version of NuGet packages on the NuGet Gallery website </span><span class="No-Break"><span class="koboSpan" id="kobo.691.1">at </span></span><a href="https://nuget.org/packages"><span class="No-Break"><span class="koboSpan" id="kobo.692.1">https://nuget.org/packages</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.693.1">.</span></span></p>
<h2 id="_idParaDest-80"><a id="_idTextAnchor265"/><span class="koboSpan" id="kobo.694.1">Addressing any breaking API changes</span></h2>
<p><span class="koboSpan" id="kobo.695.1">Unfortunately, there is no magic bullet for any of these types of changes. </span><span class="koboSpan" id="kobo.695.2">You will simply have to start from the top of your </span><a id="_idIndexMarker401"/><span class="koboSpan" id="kobo.696.1">error list and work your way through them. </span><span class="koboSpan" id="kobo.696.2">You can review the release notes linked in the official migration guide, available at </span><a href="https://learn.microsoft.com/en-us/dotnet/maui/migration/"><span class="koboSpan" id="kobo.697.1">https://learn.microsoft.com/en-us/dotnet/maui/migration/</span></a><span class="koboSpan" id="kobo.698.1">, as </span><span class="No-Break"><span class="koboSpan" id="kobo.699.1">helpful hints.</span></span></p>
<p><span class="koboSpan" id="kobo.700.1">For example, a common type of error that’s seen is </span><strong class="source-inline"><span class="koboSpan" id="kobo.701.1">error CS0104: 'ViewExtensions' is an ambiguous reference between 'Microsoft.Maui.Controls.ViewExtensions' and 'Microsoft.Maui.ViewExtensions'</span></strong><span class="koboSpan" id="kobo.702.1">. </span><span class="koboSpan" id="kobo.702.2">This can be fixed by explicitly using the full namespace when referencing the type or by using a type alias – for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.703.1">using ViewExtensions = </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.704.1">Microsoft.Maui.Controls.ViewExtensions</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.705.1">.</span></span></p>
<h2 id="_idParaDest-81"><a id="_idTextAnchor266"/><span class="koboSpan" id="kobo.706.1">Custom renderers and effects</span></h2>
<p><span class="koboSpan" id="kobo.707.1">Your application may use custom renderers or effects to provide a unique user experience. </span><span class="koboSpan" id="kobo.707.2">Covering how to upgrade</span><a id="_idIndexMarker402"/><span class="koboSpan" id="kobo.708.1"> these components is beyond the scope of this chapter. </span><span class="koboSpan" id="kobo.708.2">To learn more about how to upgrade renderers and effects, visit the Microsoft Learn site for .NET MAUI migration </span><span class="No-Break"><span class="koboSpan" id="kobo.709.1">at </span></span><a href="https://learn.microsoft.com/en-us/dotnet/maui/migration/"><span class="No-Break"><span class="koboSpan" id="kobo.710.1">https://learn.microsoft.com/en-us/dotnet/maui/migration/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.711.1">.</span></span></p>
<h2 id="_idParaDest-82"><a id="_idTextAnchor267"/><span class="koboSpan" id="kobo.712.1">Running the converted app and verifying its functionality</span></h2>
<p><span class="koboSpan" id="kobo.713.1">This is not the last step – I</span><a id="_idIndexMarker403"/><span class="koboSpan" id="kobo.714.1"> recommend that you attempt to do this after each change. </span><span class="koboSpan" id="kobo.714.2">Building your app as you make changes ensures that you are moving in the right direction. </span><span class="koboSpan" id="kobo.714.3">I recommend that you </span><strong class="bold"><span class="koboSpan" id="kobo.715.1">rebuild</span></strong><span class="koboSpan" id="kobo.716.1"> over </span><strong class="bold"><span class="koboSpan" id="kobo.717.1">building</span></strong><span class="koboSpan" id="kobo.718.1"> and even go so far as to delete the </span><strong class="source-inline"><span class="koboSpan" id="kobo.719.1">obj</span></strong><span class="koboSpan" id="kobo.720.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.721.1">bin</span></strong><span class="koboSpan" id="kobo.722.1"> folders beforehand. </span><span class="koboSpan" id="kobo.722.2">This</span><a id="_idIndexMarker404"/><span class="koboSpan" id="kobo.723.1"> will ensure that you are building with the latest changes and dependencies, by forcing a </span><span class="No-Break"><span class="koboSpan" id="kobo.724.1">NuGet restore.</span></span></p>
<p><span class="koboSpan" id="kobo.725.1">Now that we know the basics of how to convert a Xamarin.Forms app, let’s use .NET Upgrade Assistant to migrate a project </span><span class="No-Break"><span class="koboSpan" id="kobo.726.1">for us.</span></span></p>
<h1 id="_idParaDest-83"><a id="_idTextAnchor268"/><span class="koboSpan" id="kobo.727.1">Installing and running .NET Upgrade Assistant</span></h1>
<p><span class="koboSpan" id="kobo.728.1">As stated previously, .NET Upgrade Assistant will attempt to perform the first four steps of the migration of your Xamarin.Forms app to .NET MAUI outlined in the previous section. </span><span class="koboSpan" id="kobo.728.2">The tool is under active </span><a id="_idIndexMarker405"/><span class="koboSpan" id="kobo.729.1">development and as the team discovers new improvements, they are added. </span><span class="koboSpan" id="kobo.729.2">This is mostly due to feedback they receive from </span><a id="_idIndexMarker406"/><span class="koboSpan" id="kobo.730.1">developers </span><span class="No-Break"><span class="koboSpan" id="kobo.731.1">like you.</span></span></p>
<p><span class="koboSpan" id="kobo.732.1">At the time of writing, .NET Upgrade Assistant did not work on all projects and has the </span><span class="No-Break"><span class="koboSpan" id="kobo.733.1">following limitations:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.734.1">Xamarin.Forms must be version 5.0 </span><span class="No-Break"><span class="koboSpan" id="kobo.735.1">and higher</span></span></li>
<li><span class="koboSpan" id="kobo.736.1">Only Android and iOS projects </span><span class="No-Break"><span class="koboSpan" id="kobo.737.1">are converted</span></span></li>
<li><span class="koboSpan" id="kobo.738.1">.NET MAUI must be properly installed with the </span><span class="No-Break"><span class="koboSpan" id="kobo.739.1">appropriate workloads</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.740.1">If you have followed the steps from </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.741.1">Chapter 1</span></em></span><span class="koboSpan" id="kobo.742.1">, then the last should should already </span><span class="No-Break"><span class="koboSpan" id="kobo.743.1">be satisfied.</span></span></p>
<p><span class="koboSpan" id="kobo.744.1">If your Xamarin.Forms app meets these criteria, then we can get started by installing</span><a id="_idIndexMarker407"/> <span class="No-Break"><span class="koboSpan" id="kobo.745.1">the tool.</span></span></p>
<h2 id="_idParaDest-84"><a id="_idTextAnchor269"/><span class="koboSpan" id="kobo.746.1">Installing .NET Upgrade Assistant</span></h2>
<p><span class="koboSpan" id="kobo.747.1">.NET Upgrade Assistant is a Visual Studio</span><a id="_idIndexMarker408"/><span class="koboSpan" id="kobo.748.1"> extension on Windows and a command-line tool on Windows and macOS. </span><span class="koboSpan" id="kobo.748.2">You can use the integrated developer PowerShell in Visual Studio or any command-line prompt to install the tool. </span><span class="koboSpan" id="kobo.748.3">Follow these steps to install the tool using Visual Studio </span><span class="No-Break"><span class="koboSpan" id="kobo.749.1">on Windows:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.750.1">In Visual Studio, select the </span><strong class="bold"><span class="koboSpan" id="kobo.751.1">Extensions</span></strong><span class="koboSpan" id="kobo.752.1"> menu, then the </span><strong class="bold"><span class="koboSpan" id="kobo.753.1">Manage Extensions</span></strong><span class="koboSpan" id="kobo.754.1"> item. </span><span class="koboSpan" id="kobo.754.2">This will open the </span><strong class="bold"><span class="koboSpan" id="kobo.755.1">Manage </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.756.1">Extensions</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.757.1"> dialog.</span></span></li>
<li><span class="koboSpan" id="kobo.758.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.759.1">Manage Extensions</span></strong><span class="koboSpan" id="kobo.760.1"> dialog, use the search box to search </span><span class="No-Break"><span class="koboSpan" id="kobo.761.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.762.1">upgrade</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.763.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.764.1">Select </span><strong class="bold"><span class="koboSpan" id="kobo.765.1">.NET Upgrade Assistant</span></strong><span class="koboSpan" id="kobo.766.1"> and </span><span class="No-Break"><span class="koboSpan" id="kobo.767.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.768.1">Download</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.769.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer066">
<span class="koboSpan" id="kobo.770.1"><img alt="Figure 3.15 – Visual Studio – the Manage Extensions dialog﻿" src="image/B19214_03_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.771.1">Figure 3.15 – Visual Studio – the Manage Extensions dialog</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.772.1">Once the extension has</span><a id="_idIndexMarker409"/><span class="koboSpan" id="kobo.773.1"> been downloaded, you will need to close and reopen Visual Studio to install </span><span class="No-Break"><span class="koboSpan" id="kobo.774.1">the extension:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer067">
<span class="koboSpan" id="kobo.775.1"><img alt="Figure 3.16 – Installing the .NET Upgrade Assistant VSIX" src="image/B19214_03_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.776.1">Figure 3.16 – Installing the .NET Upgrade Assistant VSIX</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.777.1">Click </span><strong class="bold"><span class="koboSpan" id="kobo.778.1">Modify</span></strong><span class="koboSpan" id="kobo.779.1"> and then</span><a id="_idIndexMarker410"/><span class="koboSpan" id="kobo.780.1"> follow the instructions to complete </span><span class="No-Break"><span class="koboSpan" id="kobo.781.1">the installation.</span></span></li>
<li><span class="koboSpan" id="kobo.782.1">Once the installation is complete, reopen </span><span class="No-Break"><span class="koboSpan" id="kobo.783.1">Visual Studio.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.784.1">Now that the tool has been installed, we can use it to convert a </span><span class="No-Break"><span class="koboSpan" id="kobo.785.1">Xamarin.Forms project!</span></span></p>
<h2 id="_idParaDest-85"><a id="_idTextAnchor270"/><span class="koboSpan" id="kobo.786.1">Preparing to run .NET Upgrade Assistant</span></h2>
<p><span class="koboSpan" id="kobo.787.1">For the remainder of this chapter, we </span><a id="_idIndexMarker411"/><span class="koboSpan" id="kobo.788.1">will be using Visual Studio on Windows to migrate a Xamarin.Forms app to .</span><span class="No-Break"><span class="koboSpan" id="kobo.789.1">NET MAUI.</span></span></p>
<p><span class="koboSpan" id="kobo.790.1">To run .NET Upgrade Assistant, we will need a Xamarin.Forms project to upgrade. </span><span class="koboSpan" id="kobo.790.2">For this portion of the chapter, we will use the Xamarin.Forms app that was demoed at the Microsoft Build conference in 2019. </span><span class="koboSpan" id="kobo.790.3">The source can be found at </span><a href="https://github.com/mindofai/Build2019Chat"><span class="koboSpan" id="kobo.791.1">https://github.com/mindofai/Build2019Chat</span></a><span class="koboSpan" id="kobo.792.1">, though you can find it in this book’s GitHub repository at </span><a href="https://github.com/PacktPublishing/MAUI-Projects-3rd-Edition"><span class="koboSpan" id="kobo.793.1">https://github.com/PacktPublishing/MAUI-Projects-3rd-Edition</span></a><span class="koboSpan" id="kobo.794.1"> under the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.795.1">Chapter03/Build2019Chat</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.796.1"> folder.</span></span></p>
<p><span class="koboSpan" id="kobo.797.1">Once you have downloaded the source, open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.798.1">BuildChat.sln</span></strong><span class="koboSpan" id="kobo.799.1"> file in Visual Studio. </span><span class="koboSpan" id="kobo.799.2">Once the project has finished loading, make sure your configuration is correct by running the app first. </span><span class="koboSpan" id="kobo.799.3">You should see a screen that looks like this </span><span class="No-Break"><span class="koboSpan" id="kobo.800.1">on Android:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer068">
<span class="koboSpan" id="kobo.801.1"><img alt="Figure 3.17 – The original app on Android" src="image/B19214_03_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.802.1">Figure 3.17 – The original app on Android</span></p>
<p><span class="koboSpan" id="kobo.803.1">Now that we have confirmed that the original app runs, we can follow these steps to prepare for running .NET </span><a id="_idIndexMarker412"/><span class="No-Break"><span class="koboSpan" id="kobo.804.1">Upgrade Assistant:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.805.1">Right-click the </span><strong class="source-inline"><span class="koboSpan" id="kobo.806.1">BuildChat</span></strong><span class="koboSpan" id="kobo.807.1"> solution node in </span><strong class="bold"><span class="koboSpan" id="kobo.808.1">Solution Explorer</span></strong><span class="koboSpan" id="kobo.809.1"> and select </span><strong class="bold"><span class="koboSpan" id="kobo.810.1">Manage NuGet Packages </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.811.1">for Solution…</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.812.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer069">
<span class="koboSpan" id="kobo.813.1"><img alt="Figure 3.18 – Solution context menu" src="image/B19214_03_18.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.814.1">Figure 3.18 – Solution context menu</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.815.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.816.1">NuGet – Solution</span></strong><span class="koboSpan" id="kobo.817.1"> window</span><a id="_idIndexMarker413"/><span class="koboSpan" id="kobo.818.1"> that opens, select the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.819.1">Updates</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.820.1"> tab:</span></span></li>
</ol>
<p class="IMG---Figure"> </p>
<div>
<div class="IMG---Figure" id="_idContainer070">
<span class="koboSpan" id="kobo.821.1"><img alt="Figure 3.19 – The NuGet – Solution window" src="image/B19214_03_19.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.822.1">Figure 3.19 – The NuGet – Solution window</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.823.1">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.824.1">Select all packages</span></strong><span class="koboSpan" id="kobo.825.1"> checkbox, then </span><span class="No-Break"><span class="koboSpan" id="kobo.826.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.827.1">Update</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.828.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.829.1">Visual Studio will prompt you with a preview of all the changes that will be made. </span><span class="koboSpan" id="kobo.829.2">Click </span><strong class="bold"><span class="koboSpan" id="kobo.830.1">OK</span></strong><span class="koboSpan" id="kobo.831.1"> once you have </span><span class="No-Break"><span class="koboSpan" id="kobo.832.1">reviewed them.</span></span></li>
<li><span class="koboSpan" id="kobo.833.1">Visual Studio will then prompt you to accept the license terms for packages that have them. </span><span class="koboSpan" id="kobo.833.2">Once you have reviewed the license terms, click </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.834.1">I Accept</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.835.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.836.1">After updating, you may </span><a id="_idIndexMarker414"/><span class="koboSpan" id="kobo.837.1">still have a </span><strong class="bold"><span class="koboSpan" id="kobo.838.1">gold bar</span></strong><span class="koboSpan" id="kobo.839.1"> indicator in the Visual Studio window from running the application earlier. </span><span class="koboSpan" id="kobo.839.2">You can safely dismiss the message by clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.840.1">X</span></strong><span class="koboSpan" id="kobo.841.1"> button on </span><span class="No-Break"><span class="koboSpan" id="kobo.842.1">the right:</span></span><div class="IMG---Figure" id="_idContainer071"><span class="koboSpan" id="kobo.843.1"><img alt="Figure 3.20 – Xamarin.Forms version gold bar" src="image/B19214_03_20.jpg"/></span></div></li>
</ol>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.844.1">Figure 3.20 – Xamarin.Forms version gold bar</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.845.1">Once the packages have been updated, let’s make sure the app is still working by running it again. </span><span class="koboSpan" id="kobo.845.2">You </span><a id="_idIndexMarker415"/><span class="koboSpan" id="kobo.846.1">should get a build error like </span><span class="No-Break"><span class="koboSpan" id="kobo.847.1">the following:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer072">
<span class="koboSpan" id="kobo.848.1"><img alt="Figure 3.21 – Error after upgrading packages" src="image/B19214_03_21.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.849.1">Figure 3.21 – Error after upgrading packages</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.850.1">To resolve this error, in </span><strong class="bold"><span class="koboSpan" id="kobo.851.1">Solution Explorer</span></strong><span class="koboSpan" id="kobo.852.1">, select the </span><strong class="source-inline"><span class="koboSpan" id="kobo.853.1">BuildChat.Android</span></strong><span class="koboSpan" id="kobo.854.1"> project, then press </span><em class="italic"><span class="koboSpan" id="kobo.855.1">Alt</span></em><span class="koboSpan" id="kobo.856.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.857.1">Enter</span></em><span class="koboSpan" id="kobo.858.1"> at the same time to open the project </span><span class="No-Break"><span class="koboSpan" id="kobo.859.1">properties page.</span></span></li>
<li><span class="koboSpan" id="kobo.860.1">Use the </span><strong class="bold"><span class="koboSpan" id="kobo.861.1">Target Framework</span></strong><span class="koboSpan" id="kobo.862.1"> dropdown to change the value from </span><strong class="source-inline"><span class="koboSpan" id="kobo.863.1">Android 8.1 (Oreo)</span></strong><span class="koboSpan" id="kobo.864.1"> to </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.865.1">Android 10.0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.866.1">.</span></span></li>
</ol>
<p class="callout-heading"><span class="koboSpan" id="kobo.867.1">Google Play support</span></p>
<p class="callout"><span class="koboSpan" id="kobo.868.1">You may get a warning about Google Play requiring new apps and updates to support a specific version of Android. </span><span class="koboSpan" id="kobo.868.2">To remove that warning, just set </span><strong class="bold"><span class="koboSpan" id="kobo.869.1">Target Framework</span></strong><span class="koboSpan" id="kobo.870.1"> to the version indicated in the </span><span class="No-Break"><span class="koboSpan" id="kobo.871.1">warning message.</span></span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.872.1">Visual Studio will prompt you to confirm the change as it has to close and re-open the project. </span><span class="No-Break"><span class="koboSpan" id="kobo.873.1">Select </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.874.1">Yes</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.875.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.876.1">Visual Studio may also prompt you to install the Android version if you haven’t installed it. </span><span class="koboSpan" id="kobo.876.2">Follow the</span><a id="_idIndexMarker416"/><span class="koboSpan" id="kobo.877.1"> prompts to install the </span><span class="No-Break"><span class="koboSpan" id="kobo.878.1">Android version.</span></span></li>
<li><span class="koboSpan" id="kobo.879.1">Attempting to run the project again yields a new set </span><span class="No-Break"><span class="koboSpan" id="kobo.880.1">of errors:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer073">
<span class="koboSpan" id="kobo.881.1"><img alt="Figure 3.22 – Missing packages error" src="image/B19214_03_22.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.882.1">Figure 3.22 – Missing packages error</span></p>
<ol>
<li value="13"><span class="koboSpan" id="kobo.883.1">To resolve this error, right-click the </span><strong class="source-inline"><span class="koboSpan" id="kobo.884.1">BuildChat.Android</span></strong><span class="koboSpan" id="kobo.885.1"> project and select </span><strong class="bold"><span class="koboSpan" id="kobo.886.1">Unload Project</span></strong><span class="koboSpan" id="kobo.887.1">. </span><span class="koboSpan" id="kobo.887.2">The project file should open in Visual </span><span class="No-Break"><span class="koboSpan" id="kobo.888.1">Studio automatically.</span></span></li>
<li><span class="koboSpan" id="kobo.889.1">Locate </span><strong class="source-inline"><span class="koboSpan" id="kobo.890.1">&lt;ItemGroup&gt;</span></strong><span class="koboSpan" id="kobo.891.1"> in the file with </span><strong class="source-inline"><span class="koboSpan" id="kobo.892.1">&lt;PackageReference&gt;</span></strong><span class="koboSpan" id="kobo.893.1"> items and make the changes highlighted in the </span><span class="No-Break"><span class="koboSpan" id="kobo.894.1">following snippet:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.895.1">
&lt;ItemGroup&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.SignalR.Client"&gt;
    &lt;Version&gt;7.0.9&lt;/Version&gt;
    &lt;/PackageReference&gt;
    &lt;PackageReference Include="Xamarin.Forms" Version="5.0.0.2578" /&gt;
    &lt;PackageReference Include="Xamarin.Android.Support.Design" Version="28.0.0.3" /&gt;
    &lt;PackageReference Include="Xamarin.Android.Support.v7.AppCompat" Version="28.0.0.3" /&gt;
    &lt;PackageReference Include="Xamarin.Android.Support.v4" Version="28.0.0.3" /&gt;
    &lt;PackageReference Include="Xamarin.Android.Support.v7.CardView" Version="28.0.0.3" /&gt;
</span><strong class="bold"><span class="koboSpan" id="kobo.896.1">&lt;PackageReference Include="Xamarin.AndroidX.MediaRouter" Version="1.2.0" /&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.897.1">    &lt;PackageReference Include="Xamarin.AndroidX.Palette" Version="1.0.0.5" /&gt;</span></strong><span class="koboSpan" id="kobo.898.1">
&lt;/ItemGroup&gt;</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.899.1">You could also use Visual </span><a id="_idIndexMarker417"/><span class="koboSpan" id="kobo.900.1">Studio’s NuGet Package Manager to add </span><span class="No-Break"><span class="koboSpan" id="kobo.901.1">these packages.</span></span></p></li> <li><span class="koboSpan" id="kobo.902.1">Save and reload the project before trying to run it again. </span><span class="koboSpan" id="kobo.902.2">Since the project was unloaded, you will need to set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.903.1">BuildChat.Android</span></strong><span class="koboSpan" id="kobo.904.1"> project as the startup </span><span class="No-Break"><span class="koboSpan" id="kobo.905.1">project again.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.906.1">You should be able to run the application at this time since some warnings can be ignored. </span><span class="koboSpan" id="kobo.906.2">If not, review the previous steps to make sure you made all the changes correctly. </span><span class="koboSpan" id="kobo.906.3">At this point, we are ready to run the upgrade assistant to convert from Xamarin.Forms into .</span><span class="No-Break"><span class="koboSpan" id="kobo.907.1">NET</span></span><span class="No-Break"><a id="_idIndexMarker418"/></span><span class="No-Break"><span class="koboSpan" id="kobo.908.1"> MAUI.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.909.1">Treat warnings as errors</span></p>
<p class="callout"><span class="koboSpan" id="kobo.910.1">If you have the project option to treat warnings as errors set to anything other than none, then the warnings will prevent you from running the app. </span><span class="koboSpan" id="kobo.910.2">Set the option to none to allow the app to run. </span><span class="koboSpan" id="kobo.910.3">The option defaults </span><span class="No-Break"><span class="koboSpan" id="kobo.911.1">to none.</span></span></p>
<h2 id="_idParaDest-86"><a id="_idTextAnchor271"/><span class="koboSpan" id="kobo.912.1">Running .NET Upgrade Assistant</span></h2>
<p><span class="koboSpan" id="kobo.913.1">Running .NET Upgrade Assistant </span><a id="_idIndexMarker419"/><span class="koboSpan" id="kobo.914.1">from within Visual Studio is a straightforward process. </span><span class="koboSpan" id="kobo.914.2">We will upgrade each project individually; there isn’t any method to upgrade all the projects in </span><span class="No-Break"><span class="koboSpan" id="kobo.915.1">one go.</span></span></p>
<h3><span class="koboSpan" id="kobo.916.1">Upgrading the BuildChat project</span></h3>
<p><span class="koboSpan" id="kobo.917.1">Let’s start with the</span><a id="_idIndexMarker420"/><span class="koboSpan" id="kobo.918.1"> shared project, </span><strong class="source-inline"><span class="koboSpan" id="kobo.919.1">BuildChat</span></strong><span class="koboSpan" id="kobo.920.1">, by following </span><span class="No-Break"><span class="koboSpan" id="kobo.921.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.922.1">Select the </span><strong class="source-inline"><span class="koboSpan" id="kobo.923.1">BuildChat</span></strong><span class="koboSpan" id="kobo.924.1"> project in </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.925.1">Solution Explorer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.926.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.927.1">Use the context menu to select the </span><strong class="bold"><span class="koboSpan" id="kobo.928.1">Upgrade</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.929.1">menu item:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer074">
<span class="koboSpan" id="kobo.930.1"><img alt="Figure 3.23 – Upgrading the BuildChat project" src="image/B19214_03_23.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.931.1">Figure 3.23 – Upgrading the BuildChat project</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.932.1">This will open the </span><strong class="bold"><span class="koboSpan" id="kobo.933.1">Upgrade</span></strong><span class="koboSpan" id="kobo.934.1"> assistant in</span><a id="_idIndexMarker421"/><span class="koboSpan" id="kobo.935.1"> a </span><span class="No-Break"><span class="koboSpan" id="kobo.936.1">document window:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer075">
<span class="koboSpan" id="kobo.937.1"><img alt="Figure 3.24 – Upgrading the BuildChat project" src="image/B19214_03_24.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.938.1">Figure 3.24 – Upgrading the BuildChat project</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.939.1">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.940.1">In-place project </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.941.1">upgrade</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.942.1"> option.</span></span></li>
<li><span class="koboSpan" id="kobo.943.1">Depending on the</span><a id="_idIndexMarker422"/><span class="koboSpan" id="kobo.944.1"> versions of .NET you have installed, you will be prompted to choose one. </span><span class="koboSpan" id="kobo.944.2">If you followed the setup instructions in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.945.1">Chapter 1</span></em></span><span class="koboSpan" id="kobo.946.1">, you should have the .NET 7.0 option available. </span><span class="koboSpan" id="kobo.946.2">Select </span><strong class="bold"><span class="koboSpan" id="kobo.947.1">.NET 7.0</span></strong><span class="koboSpan" id="kobo.948.1"> and </span><span class="No-Break"><span class="koboSpan" id="kobo.949.1">select </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.950.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.951.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer076">
<span class="koboSpan" id="kobo.952.1"><img alt="Figure 3.25 – Choosing the preferred target framework" src="image/B19214_03_25.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.953.1">Figure 3.25 – Choosing the preferred target framework</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.954.1">At this point, you are allowed to review the changes that will be made by expanding each node in</span><a id="_idIndexMarker423"/><span class="koboSpan" id="kobo.955.1"> the list. </span><span class="koboSpan" id="kobo.955.2">You can also choose to not upgrade certain items by removing the check in the checkbox next to that item. </span><span class="koboSpan" id="kobo.955.3">When you have inspected all the changes, make sure all items are checked again, then click </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.956.1">Upgrade selection</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.957.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer077">
<span class="koboSpan" id="kobo.958.1"><img alt="Figure 3.26 – Reviewing the upgrade" src="image/B19214_03_26.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.959.1">Figure 3.26 – Reviewing the upgrade</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.960.1">Visual Studio will start</span><a id="_idIndexMarker424"/><span class="koboSpan" id="kobo.961.1"> the upgrade process. </span><span class="koboSpan" id="kobo.961.2">You can monitor it as it completes </span><span class="No-Break"><span class="koboSpan" id="kobo.962.1">each item:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer078">
<span class="koboSpan" id="kobo.963.1"><img alt="Figure 3.27 – Upgrade in progress" src="image/B19214_03_27.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.964.1">Figure 3.27 – Upgrade in progress</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.965.1">When it’s finished, you </span><a id="_idIndexMarker425"/><span class="koboSpan" id="kobo.966.1">can inspect each item to see what the result of the </span><span class="No-Break"><span class="koboSpan" id="kobo.967.1">upgrade was:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer079">
<span class="koboSpan" id="kobo.968.1"><img alt="Figure 3.28 – Upgrade complete" src="image/B19214_03_28.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.969.1">Figure 3.28 – Upgrade complete</span></p>
<p><span class="koboSpan" id="kobo.970.1">A white check in a green circle indicates some transformation was completed and successful, a green check with a white background means the step was skipped since nothing was needed, and a red </span><a id="_idIndexMarker426"/><span class="koboSpan" id="kobo.971.1">cross (not shown) means the transformation failed. </span><span class="koboSpan" id="kobo.971.2">You can view the complete output from the tool by inspecting the </span><strong class="bold"><span class="koboSpan" id="kobo.972.1">Upgrade Assistant</span></strong><span class="koboSpan" id="kobo.973.1"> log in the </span><span class="No-Break"><span class="koboSpan" id="kobo.974.1">output pane:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer080">
<span class="koboSpan" id="kobo.975.1"><img alt="Figure 3.29 – Upgrade Assistant log output" src="image/B19214_03_29.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.976.1">Figure 3.29 – Upgrade Assistant log output</span></p>
<p><span class="koboSpan" id="kobo.977.1">Do not be concerned with </span><a id="_idIndexMarker427"/><span class="koboSpan" id="kobo.978.1">the errors in the error window at this point. </span><span class="koboSpan" id="kobo.978.2">There will be errors until we finish upgrading the remaining projects. </span><span class="koboSpan" id="kobo.978.3">Now that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.979.1">BuildChat</span></strong><span class="koboSpan" id="kobo.980.1"> project has been upgraded, we can upgrade the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.981.1">BuildChat.Android</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.982.1"> project.</span></span></p>
<h3><span class="koboSpan" id="kobo.983.1">Upgrading the BuildChat.Android project</span></h3>
<p><span class="koboSpan" id="kobo.984.1">The steps for upgrading the remaining projects are largely the same – the only difference will be the steps involved in </span><a id="_idIndexMarker428"/><span class="koboSpan" id="kobo.985.1">upgrading each project. </span><span class="koboSpan" id="kobo.985.2">The next two sections will skip the screenshots and just provide the steps. </span><span class="koboSpan" id="kobo.985.3">To complete the upgrade for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.986.1">BuildChat.Android</span></strong><span class="koboSpan" id="kobo.987.1"> project, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.988.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.989.1">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.990.1">BuildChat.Android</span></strong><span class="koboSpan" id="kobo.991.1"> project in </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.992.1">Solution Explorer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.993.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.994.1">Use the context menu to select the </span><strong class="bold"><span class="koboSpan" id="kobo.995.1">Upgrade</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.996.1">menu item.</span></span></li>
<li><span class="koboSpan" id="kobo.997.1">This will open the </span><strong class="bold"><span class="koboSpan" id="kobo.998.1">Upgrade</span></strong><span class="koboSpan" id="kobo.999.1"> assistant in a </span><span class="No-Break"><span class="koboSpan" id="kobo.1000.1">document window.</span></span></li>
<li><span class="koboSpan" id="kobo.1001.1">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.1002.1">In-place project </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1003.1">upgrade</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1004.1"> option.</span></span></li>
<li><span class="koboSpan" id="kobo.1005.1">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.1006.1">.NET 7.0</span></strong><span class="koboSpan" id="kobo.1007.1"> option, then </span><span class="No-Break"><span class="koboSpan" id="kobo.1008.1">select </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1009.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1010.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1011.1">Review the changes that will be made by expanding each node in the list. </span><span class="koboSpan" id="kobo.1011.2">Make sure all items are checked, then click </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1012.1">Upgrade Selection</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1013.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1014.1">Visual Studio will complete the </span><span class="No-Break"><span class="koboSpan" id="kobo.1015.1">upgrade process.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1016.1">Now that .NET Upgrade Assistant has completed the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1017.1">BuildChat.Android</span></strong><span class="koboSpan" id="kobo.1018.1"> project, we can upgrade the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1019.1">BuildChat.iOS</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1020.1"> project.</span></span></p>
<h3><span class="koboSpan" id="kobo.1021.1">Upgrading the BuildChat.iOS project</span></h3>
<p><span class="koboSpan" id="kobo.1022.1">The steps for upgrading the iOS project are largely the same – the only difference will be the steps involved in upgrading each project. </span><span class="koboSpan" id="kobo.1022.2">To complete the upgrade for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1023.1">BuildChat.iOS</span></strong><span class="koboSpan" id="kobo.1024.1"> project, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.1025.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1026.1">Select the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1027.1">BuildChat.iOS</span></strong><span class="koboSpan" id="kobo.1028.1"> project in </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1029.1">Solution Explorer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1030.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1031.1">Use the context menu to select the </span><strong class="bold"><span class="koboSpan" id="kobo.1032.1">Upgrade</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1033.1">menu item.</span></span></li>
<li><span class="koboSpan" id="kobo.1034.1">This will open the </span><strong class="bold"><span class="koboSpan" id="kobo.1035.1">Upgrade</span></strong><span class="koboSpan" id="kobo.1036.1"> assistant in a </span><span class="No-Break"><span class="koboSpan" id="kobo.1037.1">document window:</span></span></li>
<li><span class="koboSpan" id="kobo.1038.1">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.1039.1">In-place project </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1040.1">upgrade</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1041.1"> option.</span></span></li>
<li><span class="koboSpan" id="kobo.1042.1">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.1043.1">.NET 7.0</span></strong><span class="koboSpan" id="kobo.1044.1"> option, then </span><span class="No-Break"><span class="koboSpan" id="kobo.1045.1">select </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1046.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1047.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1048.1">Review the changes that</span><a id="_idIndexMarker429"/><span class="koboSpan" id="kobo.1049.1"> will be made by expanding each node in the list. </span><span class="koboSpan" id="kobo.1049.2">Make sure all items are checked, then click </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1050.1">Upgrade Selection</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1051.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1052.1">Visual Studio will complete the </span><span class="No-Break"><span class="koboSpan" id="kobo.1053.1">upgrade process.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1054.1">Now that .NET Upgrade Assistant has completed the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1055.1">BuildChat.iOS</span></strong><span class="koboSpan" id="kobo.1056.1"> project, we can see how well </span><span class="No-Break"><span class="koboSpan" id="kobo.1057.1">it worked.</span></span></p>
<h3><span class="koboSpan" id="kobo.1058.1">Completing the upgrade to .NET MAUI</span></h3>
<p><span class="koboSpan" id="kobo.1059.1">With .NET Upgrade Assistant having done all the work it can to upgrade the projects, we can now see what is left for us to</span><a id="_idIndexMarker430"/><span class="koboSpan" id="kobo.1060.1"> complete the upgrade to .</span><span class="No-Break"><span class="koboSpan" id="kobo.1061.1">NET MAUI.</span></span></p>
<p><span class="koboSpan" id="kobo.1062.1">The first thing we want to do is make sure that the project is clean of all the previous build artifacts. </span><span class="koboSpan" id="kobo.1062.2">This will ensure we are referencing all the right dependencies in our build output by forcing a restore and build. </span><span class="koboSpan" id="kobo.1062.3">The best way to accomplish this is to remove the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1063.1">bin</span></strong><span class="koboSpan" id="kobo.1064.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1065.1">obj</span></strong><span class="koboSpan" id="kobo.1066.1"> folders from each </span><span class="No-Break"><span class="koboSpan" id="kobo.1067.1">project folder.</span></span></p>
<p><span class="koboSpan" id="kobo.1068.1">Use </span><strong class="bold"><span class="koboSpan" id="kobo.1069.1">File Explorer</span></strong><span class="koboSpan" id="kobo.1070.1"> to remove the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1071.1">bin</span></strong><span class="koboSpan" id="kobo.1072.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1073.1">obj</span></strong><span class="koboSpan" id="kobo.1074.1"> folders from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1075.1">BuildChat</span></strong><span class="koboSpan" id="kobo.1076.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1077.1">BuildChat.Android</span></strong><span class="koboSpan" id="kobo.1078.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1079.1">BuildChat.iOS</span></strong><span class="koboSpan" id="kobo.1080.1"> folders, then build </span><span class="No-Break"><span class="koboSpan" id="kobo.1081.1">the solution.</span></span></p>
<p><span class="koboSpan" id="kobo.1082.1">We’ll end up with a few build </span><a id="_idIndexMarker431"/><span class="koboSpan" id="kobo.1083.1">errors for each project, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1084.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer081">
<span class="koboSpan" id="kobo.1085.1"><img alt="Figure 3.30 – Package issues" src="image/B19214_03_30.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1086.1">Figure 3.30 – Package issues</span></p>
<p><span class="koboSpan" id="kobo.1087.1">To resolve these errors, either use Visual Studio’s NuGet Package Manager to add a reference to version 7.0.1 of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1088.1">Microsoft.Extensions.Logging.Abstractions</span></strong><span class="koboSpan" id="kobo.1089.1"> package to all the projects, or follow these steps to update the project </span><span class="No-Break"><span class="koboSpan" id="kobo.1090.1">files manually:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1091.1">Select the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1092.1">BuildChat</span></strong><span class="koboSpan" id="kobo.1093.1"> project in </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1094.1">Solution Explorer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1095.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.1096.1">The project file will open in a document </span><span class="No-Break"><span class="koboSpan" id="kobo.1097.1">window automatically.</span></span></p></li>
<li><span class="koboSpan" id="kobo.1098.1">Locate the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1099.1">ItemGroup</span></strong><span class="koboSpan" id="kobo.1100.1"> element that contains the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1101.1">PackageReference</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1102.1"> items.</span></span></li>
<li><span class="koboSpan" id="kobo.1103.1">Make the changes highlighted in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1104.1">following snippet:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1105.1">
&lt;ItemGroup&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.SignalR.Client" Version="7.0.9" /&gt;
</span><strong class="bold"><span class="koboSpan" id="kobo.1106.1">    &lt;PackageReference Include="Microsoft.Extensions.Logging.Abstractions" Version="7.0.1" /&gt;</span></strong><span class="koboSpan" id="kobo.1107.1">
&lt;/ItemGroup&gt;</span></pre></li> <li><span class="koboSpan" id="kobo.1108.1">Select the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1109.1">BuildChat.Android</span></strong><span class="koboSpan" id="kobo.1110.1"> project in </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1111.1">Solution Explorer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1112.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.1113.1">The project file will open in a document </span><span class="No-Break"><span class="koboSpan" id="kobo.1114.1">window automatically.</span></span></p></li>
<li><span class="koboSpan" id="kobo.1115.1">Locate the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1116.1">ItemGroup</span></strong><span class="koboSpan" id="kobo.1117.1"> element that contains the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1118.1">PackageReference</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1119.1"> items.</span></span></li>
<li><span class="koboSpan" id="kobo.1120.1">Make the changes</span><a id="_idIndexMarker432"/><span class="koboSpan" id="kobo.1121.1"> highlighted in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1122.1">following snippet:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1123.1">
&lt;ItemGroup&gt;
    &lt;PackageReference Include="Xamarin.AndroidX.MediaRouter" Version="1.2.0" /&gt;
    &lt;PackageReference Include="Xamarin.AndroidX.Palette" Version="1.0.0.5" /&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.SignalR.Client" Version="7.0.9" /&gt;
</span><strong class="bold"><span class="koboSpan" id="kobo.1124.1">    &lt;PackageReference Include="Microsoft.Extensions.Logging.Abstractions" Version="7.0.1" /&gt;</span></strong><span class="koboSpan" id="kobo.1125.1">
&lt;/ItemGroup&gt;</span></pre></li> <li><span class="koboSpan" id="kobo.1126.1">Select the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1127.1">BuildChat.iOS</span></strong><span class="koboSpan" id="kobo.1128.1"> project in </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1129.1">Solution Explorer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1130.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.1131.1">The project file will open in a document </span><span class="No-Break"><span class="koboSpan" id="kobo.1132.1">window automatically.</span></span></p></li>
<li><span class="koboSpan" id="kobo.1133.1">Locate the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1134.1">ItemGroup</span></strong><span class="koboSpan" id="kobo.1135.1"> element that contains the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1136.1">PackageReference</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1137.1"> items.</span></span></li>
<li><span class="koboSpan" id="kobo.1138.1">Make the changes highlighted in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1139.1">following snippet:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1140.1">
&lt;ItemGroup&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.SignalR.Client" Version="7.0.9" /&gt;
</span><strong class="bold"><span class="koboSpan" id="kobo.1141.1">    &lt;PackageReference Include="Microsoft.Extensions.Logging.Abstractions" Version="7.0.1" /&gt;</span></strong><span class="koboSpan" id="kobo.1142.1">
&lt;/ItemGroup&gt;</span></pre></li> </ol>
<p><span class="koboSpan" id="kobo.1143.1">Now that we have added the required package references, we can try building the app again. </span><span class="koboSpan" id="kobo.1143.2">After this build, we’ll get two </span><span class="No-Break"><span class="koboSpan" id="kobo.1144.1">new errors:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer082">
<span class="koboSpan" id="kobo.1145.1"><img alt="Figure 3.31 – Namespace does not exist errors" src="image/B19214_03_31.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1146.1">Figure 3.31 – Namespace does not exist errors</span></p>
<p><span class="koboSpan" id="kobo.1147.1">These two errors show two areas that the upgrade assistant did not upgrade. </span><span class="koboSpan" id="kobo.1147.2">Luckily, we covered how to upgrade these </span><a id="_idIndexMarker433"/><span class="koboSpan" id="kobo.1148.1">two files easier in this chapter. </span><span class="koboSpan" id="kobo.1148.2">Let’s upgrade them again, starting with the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1149.1">BuildChat.Android</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1150.1"> project.</span></span></p>
<p><span class="koboSpan" id="kobo.1151.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1152.1">MainActivity.cs</span></strong><span class="koboSpan" id="kobo.1153.1"> file and make the changes highlighted in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1154.1">following code:</span></span></p>
<pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1155.1">using Microsoft.Maui;</span></strong><span class="koboSpan" id="kobo.1156.1">
namespace BuildChat.Droid
{
    [Activity(Label = "BuildChat", Icon = "@mipmap/icon", </span><strong class="bold"><span class="koboSpan" id="kobo.1157.1">Theme = "@style/Theme.MaterialComponents"</span></strong><span class="koboSpan" id="kobo.1158.1">, MainLauncher = true, ConfigurationChanges = ConfigChanges.ScreenSize | ConfigChanges.Orientation)]
    public class MainActivity : </span><strong class="bold"><span class="koboSpan" id="kobo.1159.1">MauiAppCompatActivity</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1160.1">    {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1161.1">        protected override void OnCreate(Bundle savedInstanceState)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1162.1">        {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1163.1">            base.OnCreate(savedInstanceState);</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1164.1">        }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1165.1">    }</span></strong><span class="koboSpan" id="kobo.1166.1">
}</span></pre> <p><span class="koboSpan" id="kobo.1167.1">That should complete the changes needed for the Android project. </span><span class="koboSpan" id="kobo.1167.2">Now, to upgrade the iOS project, open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1168.1">AppDelegate.cs</span></strong><span class="koboSpan" id="kobo.1169.1"> file in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1170.1">BuildChat.iOS</span></strong><span class="koboSpan" id="kobo.1171.1"> and update it so that it matches </span><span class="No-Break"><span class="koboSpan" id="kobo.1172.1">the </span></span><span class="No-Break"><a id="_idIndexMarker434"/></span><span class="No-Break"><span class="koboSpan" id="kobo.1173.1">following:</span></span></p>
<pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1174.1">using Foundation;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1175.1">using Microsoft.Maui;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1176.1">using Microsoft.Maui.Hosting;</span></strong><span class="koboSpan" id="kobo.1177.1">
namespace BuildChat.iOS
{
    // The UIApplicationDelegate for the application. </span><span class="koboSpan" id="kobo.1177.2">This class is responsible for launching the
    // User Interface of the application, as well as listening (and optionally responding) to
    // application events from iOS.
</span><span class="koboSpan" id="kobo.1177.3">    [Register("AppDelegate")]
    public partial class AppDelegate : </span><strong class="bold"><span class="koboSpan" id="kobo.1178.1">MauiUIApplicationDelegate</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1179.1">    {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1180.1">        protected override MauiApp CreateMauiApp() =&gt; MauiProgram.CreateMauiApp();</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1181.1">    }</span></strong><span class="koboSpan" id="kobo.1182.1">
}</span></pre> <p><span class="koboSpan" id="kobo.1183.1">The final change for the iOS project is to open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1184.1">Info.plist</span></strong><span class="koboSpan" id="kobo.1185.1"> file and change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1186.1">MinimumOSVersion</span></strong><span class="koboSpan" id="kobo.1187.1"> property to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1188.1">15.2</span></strong><span class="koboSpan" id="kobo.1189.1">. </span><span class="koboSpan" id="kobo.1189.2">To make this change, use </span><strong class="bold"><span class="koboSpan" id="kobo.1190.1">Generic PList Editor</span></strong><span class="koboSpan" id="kobo.1191.1">. </span><span class="koboSpan" id="kobo.1191.2">To open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1192.1">Info.plist</span></strong><span class="koboSpan" id="kobo.1193.1"> file and make this change, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.1194.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1195.1">Select the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1196.1">Info.plist</span></strong><span class="koboSpan" id="kobo.1197.1"> file in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1198.1">BuildChat.iOS</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1199.1"> project.</span></span></li>
<li><span class="koboSpan" id="kobo.1200.1">Use the context</span><a id="_idIndexMarker435"/><span class="koboSpan" id="kobo.1201.1"> menu (right-click) and select </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1202.1">Open With…</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1203.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1204.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.1205.1">Open With</span></strong><span class="koboSpan" id="kobo.1206.1"> dialog, select </span><strong class="bold"><span class="koboSpan" id="kobo.1207.1">Generic Plist Editor</span></strong><span class="koboSpan" id="kobo.1208.1">, then </span><span class="No-Break"><span class="koboSpan" id="kobo.1209.1">select </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1210.1">OK</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1211.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer083">
<span class="koboSpan" id="kobo.1212.1"><img alt="Figure 3.32 – Opening the Info.plist file" src="image/B19214_03_32.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1213.1">Figure 3.32 – Opening the Info.plist file</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.1214.1">Find the entry labeled </span><strong class="source-inline"><span class="koboSpan" id="kobo.1215.1">Minimum system version</span></strong><span class="koboSpan" id="kobo.1216.1"> and change the value from </span><strong class="source-inline"><span class="koboSpan" id="kobo.1217.1">8.0</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1218.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1219.1">15.1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1220.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer084">
<span class="koboSpan" id="kobo.1221.1"><img alt="Figure 3.33 – Changing the minimum system version" src="image/B19214_03_33.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1222.1">Figure 3.33 – Changing the minimum system version</span></p>
<p><span class="koboSpan" id="kobo.1223.1">Great – that should complete the</span><a id="_idIndexMarker436"/><span class="koboSpan" id="kobo.1224.1"> changes needed to get the app running as a .NET MAUI application! </span><span class="koboSpan" id="kobo.1224.2">The following are the before and after screenshots of the application; </span><em class="italic"><span class="koboSpan" id="kobo.1225.1">before</span></em><span class="koboSpan" id="kobo.1226.1"> is on the left and </span><em class="italic"><span class="koboSpan" id="kobo.1227.1">after</span></em><span class="koboSpan" id="kobo.1228.1"> is on </span><span class="No-Break"><span class="koboSpan" id="kobo.1229.1">the right:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer085">
<span class="koboSpan" id="kobo.1230.1"><img alt="" role="presentation" src="image/B19214_03_34.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"> </p>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1231.1">Figure 3.34 – Xamarin.Forms versus .NET MAUI</span></p>
<p><span class="koboSpan" id="kobo.1232.1">There are some visual changes</span><a id="_idIndexMarker437"/><span class="koboSpan" id="kobo.1233.1"> between Xamarin.Forms and .NET MAUI, and you can tweak the .NET MAUI settings for the layouts and controls to get a very </span><span class="No-Break"><span class="koboSpan" id="kobo.1234.1">similar output.</span></span></p>
<h1 id="_idParaDest-87"><a id="_idTextAnchor272"/><span class="koboSpan" id="kobo.1235.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1236.1">In this chapter, we focused on upgrading a Xamarin.Forms app to .NET MAUI. </span><span class="koboSpan" id="kobo.1236.2">We learned how to upgrade the project files from .NET Framework to SDK-style projects, application startup files, XAML views, and C# files needed for .NET MAUI. </span><span class="koboSpan" id="kobo.1236.3">We started by doing this manually to learn about all the required steps and changes. </span><span class="koboSpan" id="kobo.1236.4">We ended this chapter by using .NET Upgrade Assistant to make many of the changes for us. </span><span class="koboSpan" id="kobo.1236.5">We also learned how to upgrade to the Single Project format, which is the default for .NET MAUI. </span><span class="koboSpan" id="kobo.1236.6">Now, we can pick the best method for the project we </span><span class="No-Break"><span class="koboSpan" id="kobo.1237.1">are upgrading.</span></span></p>
<p><span class="koboSpan" id="kobo.1238.1">While we covered a lot in this chapter, it was not exhaustive. </span><span class="koboSpan" id="kobo.1238.2">There is a lot of variation in different projects, from NuGet package dependencies and vendor-provided controls to customizations using renderers and effects. </span><span class="koboSpan" id="kobo.1238.3">The app you are upgrading may use one or all of these, and you can find additional help on the Microsoft Learn site for upgrading Xamarin.Forms to .NET </span><span class="No-Break"><span class="koboSpan" id="kobo.1239.1">MAUI: </span></span><a href="https://learn.microsoft.com/en-us/dotnet/maui/migration/"><span class="No-Break"><span class="koboSpan" id="kobo.1240.1">https://learn.microsoft.com/en-us/dotnet/maui/migration/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1241.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1242.1">If you are interested in seeing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1243.1">BuildChat</span></strong><span class="koboSpan" id="kobo.1244.1"> app fully functional, try using .NET Upgrade Assistant on the service that was also built for the 2019 Microsoft Build conference. </span><span class="koboSpan" id="kobo.1244.2">You can find the source on GitHub at </span><a href="https://github.com/mindofai/SignalRChat/tree/master"><span class="koboSpan" id="kobo.1245.1">https://github.com/mindofai/SignalRChat/tree/master</span></a><span class="koboSpan" id="kobo.1246.1">. </span><span class="koboSpan" id="kobo.1246.2">You could also use ChatGPT to help you build the service yourself using Azure Functions </span><span class="No-Break"><span class="koboSpan" id="kobo.1247.1">and SignalR.</span></span></p>
<p><span class="koboSpan" id="kobo.1248.1">In the next chapter, we will build an app that displays news articles using the new .NET </span><span class="No-Break"><span class="koboSpan" id="kobo.1249.1">MAUI Shell.</span></span></p>
</div>


<div class="Content" id="_idContainer087">
<h1 id="_idParaDest-88" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor273"/><span class="koboSpan" id="kobo.1.1">Part 2: Basic Projects</span></h1>
<p><span class="koboSpan" id="kobo.2.1">In this part, you will learn about .NET MAUI features such as Shell, CollectionView, Image, Button, Label, CarouselView, Grid, Custom Controls, and Gestures. </span><span class="koboSpan" id="kobo.2.2">You will explore using location services, calling custom web APIs, and designing your XAML for different </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">form factors.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">This part has the </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">following chapters:</span></span></p>
<ul>
<li><a href="B19214_04.xhtml#_idTextAnchor274"><em class="italic"><span class="koboSpan" id="kobo.6.1">Chapter 4</span></em></a><span class="koboSpan" id="kobo.7.1">, </span><em class="italic"><span class="koboSpan" id="kobo.8.1">Building a News App Using .NET MAUI Shell</span></em></li>
<li><a href="B19214_05.xhtml#_idTextAnchor399"><em class="italic"><span class="koboSpan" id="kobo.9.1">Chapter 5</span></em></a><span class="koboSpan" id="kobo.10.1">, </span><em class="italic"><span class="koboSpan" id="kobo.11.1">Building a Matchmaking App with Rich UX Using Animations</span></em></li>
<li><a href="B19214_06.xhtml#_idTextAnchor513"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 6</span></em></a><span class="koboSpan" id="kobo.13.1">, </span><em class="italic"><span class="koboSpan" id="kobo.14.1">Building a Photo Gallery App Using CollectionView and CarouselView</span></em></li>
<li><a href="B19214_07.xhtml#_idTextAnchor569"><em class="italic"><span class="koboSpan" id="kobo.15.1">Chapter 7</span></em></a><span class="koboSpan" id="kobo.16.1">, </span><em class="italic"><span class="koboSpan" id="kobo.17.1">Building a Location Tracking App Using GPS and Maps</span></em></li>
<li><a href="B19214_08.xhtml#_idTextAnchor708"><em class="italic"><span class="koboSpan" id="kobo.18.1">Chapter 8</span></em></a><span class="koboSpan" id="kobo.19.1">, </span><em class="italic"><span class="koboSpan" id="kobo.20.1">Building a Weather App for Multiple Form Factors</span></em></li>
</ul>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer088">
</div>
</div>
</body></html>