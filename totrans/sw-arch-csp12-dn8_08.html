<html><head></head><body>
<div class="Basic-Text-Frame" id="_idContainer189">
<h1 class="chapterNumber"><span class="koboSpan" id="kobo.1.1">8</span></h1>
<h1 class="chapterTitle" id="_idParaDest-161"><span class="koboSpan" id="kobo.2.1">Understanding DevOps Principles and CI/CD</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">Although many people define DevOps as a process, the more you work with it, the better you understand it as a philosophy. </span><span class="koboSpan" id="kobo.3.2">This chapter will cover the main concepts, principles, and tools you need to develop and deliver your software with DevOps.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4.1">By considering the DevOps philosophy, this chapter will focus on </span><strong class="keyWord"><span class="koboSpan" id="kobo.5.1">service design thinking</span></strong><span class="koboSpan" id="kobo.6.1">, that is, keeping in mind that the software you design is a service offered to an organization or part of an organization. </span><span class="koboSpan" id="kobo.6.2">The main takeaway of this approach is that the highest priority is the value your software gives to the target organization. </span><span class="koboSpan" id="kobo.6.3">Moreover, you are not just offering working code and an agreement to fix bugs but also a solution for all the needs that your software was conceived for. </span><span class="koboSpan" id="kobo.6.4">In other words, your job includes everything it needs to satisfy those needs, such as monitoring users’ satisfaction and quickly adapting the software when the user needs change, due to issues or new requirements.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.7.1">Service design thinking is strictly tied to the </span><strong class="keyWord"><span class="koboSpan" id="kobo.8.1">Software as a Service</span></strong><span class="koboSpan" id="kobo.9.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.10.1">SaaS</span></strong><span class="koboSpan" id="kobo.11.1">) model, which is discussed in </span><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 10</span></em><span class="koboSpan" id="kobo.13.1">, </span><em class="italic"><span class="koboSpan" id="kobo.14.1">Deciding on the Best Cloud-Based Solution</span></em><span class="koboSpan" id="kobo.15.1">. </span><span class="koboSpan" id="kobo.15.2">In fact, the simplest way to offer solutions based on web services is to offer the usage of web services as a service, instead of selling the software that implements them.</span></p>
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.16.1">Continuous Integration</span></strong><span class="koboSpan" id="kobo.17.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.18.1">CI</span></strong><span class="koboSpan" id="kobo.19.1">) and </span><strong class="keyWord"><span class="koboSpan" id="kobo.20.1">Continuous Delivery </span></strong><span class="koboSpan" id="kobo.21.1">(</span><strong class="keyWord"><span class="koboSpan" id="kobo.22.1">CD</span></strong><span class="koboSpan" id="kobo.23.1">) are sometimes stated as prerequisites for DevOps. </span><span class="koboSpan" id="kobo.23.2">So, the purpose of this chapter is also to discuss how to enable CI/CD in a real scenario, considering the challenges that you, as a software architect, will need to deal with.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.24.1">The following topics will be covered in this chapter:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.25.1">Understanding DevOps principles: CI, CD, and continuous feedback</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.26.1">Understanding how to implement DevOps using Azure DevOps and GitHub</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.27.1">Understanding the risks and challenges when using CI/CD</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.28.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.29.1">WWTravelClub</span></code><span class="koboSpan" id="kobo.30.1"> project case, presented in </span><em class="chapterRef"><span class="koboSpan" id="kobo.31.1">Chapter 21</span></em><em class="italic"><span class="koboSpan" id="kobo.32.1">, Case Study</span></em><span class="koboSpan" id="kobo.33.1">, will be discussed during these topics, giving you the opportunity to understand how the DevOps philosophy can be implemented. </span><span class="koboSpan" id="kobo.33.2">All the screenshots exemplifying the DevOps principles come from the main use case of the book, so you will be able to understand the DevOps principles easily.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.34.1">By the end of this chapter, you will be able to design software according to service design thinking principles and use Azure Pipelines to deploy your application. </span><span class="koboSpan" id="kobo.34.2">You will be able to decide whether to use CI/CD in your project environment. </span><span class="koboSpan" id="kobo.34.3">Additionally, you will be able to define the tools needed for the successful use of this approach.</span></p>
<h1 class="heading-1" id="_idParaDest-162"><span class="koboSpan" id="kobo.35.1">Technical requirements</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.36.1">This chapter requires Visual Studio 2022 Community Edition or better, with all the Azure tools installed. </span><span class="koboSpan" id="kobo.36.2">You may also need an Azure DevOps account, as described in </span><em class="chapterRef"><span class="koboSpan" id="kobo.37.1">Chapter 3</span></em><span class="koboSpan" id="kobo.38.1">, </span><em class="italic"><span class="koboSpan" id="kobo.39.1">Managing Requirements</span></em><span class="koboSpan" id="kobo.40.1">. </span><span class="koboSpan" id="kobo.40.2">It requires a free Azure account too. </span><span class="koboSpan" id="kobo.40.3">If you have not already created one, the </span><em class="italic"><span class="koboSpan" id="kobo.41.1">Creating an Azure account</span></em><span class="koboSpan" id="kobo.42.1"> subsection of </span><em class="chapterRef"><span class="koboSpan" id="kobo.43.1">Chapter 1</span></em><span class="koboSpan" id="kobo.44.1">, </span><em class="italic"><span class="koboSpan" id="kobo.45.1">Understanding the Importance of Software Architecture</span></em><span class="koboSpan" id="kobo.46.1">, explains how to do so. </span><span class="koboSpan" id="kobo.46.2">This chapter uses the same code as </span><em class="chapterRef"><span class="koboSpan" id="kobo.47.1">Chapter 9</span></em><span class="koboSpan" id="kobo.48.1">, </span><em class="italic"><span class="koboSpan" id="kobo.49.1">Testing Your Enterprise Application</span></em><span class="koboSpan" id="kobo.50.1">.</span></p>
<h1 class="heading-1" id="_idParaDest-163"><span class="koboSpan" id="kobo.51.1">Describing DevOps</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.52.1">DevOps is a term that is derived from the combination of the words </span><em class="italic"><span class="koboSpan" id="kobo.53.1">Development</span></em><span class="koboSpan" id="kobo.54.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.55.1">Operations</span></em><span class="koboSpan" id="kobo.56.1">, and the DevOps </span><a id="_idIndexMarker509"/><span class="koboSpan" id="kobo.57.1">process simply unifies actions in these two areas. </span><span class="koboSpan" id="kobo.57.2">However, when you start to study a little bit more about it, you will realize that just connecting these two areas is not enough to achieve the true goals of this philosophy.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.58.1">We can also say that DevOps is the process that answers the current needs of people, regarding software delivery.</span></p>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.59.1">Donovan Brown has a spectacular definition of what DevOps is: </span><em class="italic"><span class="koboSpan" id="kobo.60.1">DevOps is the union of people, process, and products to enable continuous delivery of value to our end users</span></em><span class="koboSpan" id="kobo.61.1"> (</span><a href="http://donovanbrown.com/post/what-is-devops"><span class="url"><span class="koboSpan" id="kobo.62.1">http://donovanbrown.com/post/what-is-devops</span></span></a><span class="koboSpan" id="kobo.63.1">).</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.64.1">A way to deliver value continuously to our end users, using processes, people, and products: this is the best description of the DevOps philosophy. </span><span class="koboSpan" id="kobo.64.2">We need to develop and deliver customer-oriented software. </span><span class="koboSpan" id="kobo.64.3">As soon as all areas of a company understand that the key point is the end user, your task as a software architect is to present the technology that will facilitate the process of delivery.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.65.1">All the content in this</span><a id="_idIndexMarker510"/><span class="koboSpan" id="kobo.66.1"> book is connected to this approach. </span><span class="koboSpan" id="kobo.66.2">It is never a matter of knowing a bunch of tools and technologies. </span><span class="koboSpan" id="kobo.66.3">As a software architect, you must understand that there is always a way to bring faster solutions to your end user easily, linked to their real needs. </span><span class="koboSpan" id="kobo.66.4">For this reason, you need to learn the DevOps principles, which will be discussed in this chapter.</span></p>
<h1 class="heading-1" id="_idParaDest-164"><span class="koboSpan" id="kobo.67.1">Understanding DevOps principles</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.68.1">Considering DevOps as a philosophy, there</span><a id="_idIndexMarker511"/><span class="koboSpan" id="kobo.69.1"> are some principles that enable the process to work well in your team. </span><span class="koboSpan" id="kobo.69.2">These principles are </span><strong class="keyWord"><span class="koboSpan" id="kobo.70.1">CI</span></strong><span class="koboSpan" id="kobo.71.1">, </span><strong class="keyWord"><span class="koboSpan" id="kobo.72.1">CD</span></strong><span class="koboSpan" id="kobo.73.1">, and </span><strong class="keyWord"><span class="koboSpan" id="kobo.74.1">continuous feedback</span></strong><span class="koboSpan" id="kobo.75.1">.</span></p>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.76.1">Microsoft has a specific web page for defining the DevOps overview, culture, practices, tools, and its relation to the cloud. </span><span class="koboSpan" id="kobo.76.2">Please check this out at </span><a href="https://azure.microsoft.com/en-us/overview/what-is-devops/"><span class="url"><span class="koboSpan" id="kobo.77.1">https://azure.microsoft.com/en-us/overview/what-is-devops/</span></span></a><span class="koboSpan" id="kobo.78.1">.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.79.1">DevOps is represented by the symbol of infinity in many books and technical articles. </span><span class="koboSpan" id="kobo.79.2">This represents the necessity for a continuous approach in the software development life cycle. </span><span class="koboSpan" id="kobo.79.3">During the cycle, you will need to plan, build, continuously integrate, deploy, operate, and get feedback, and then start all over again. </span><span class="koboSpan" id="kobo.79.4">The process must be a collaborative one since everybody has the same focus—to deliver value to the end user. </span><span class="koboSpan" id="kobo.79.5">Together with these principles, you “as a software architect” will need to decide on the best software development process that fits this approach. </span><span class="koboSpan" id="kobo.79.6">We discussed these processes in </span><em class="chapterRef"><span class="koboSpan" id="kobo.80.1">Chapter 1</span></em><span class="koboSpan" id="kobo.81.1">, </span><em class="italic"><span class="koboSpan" id="kobo.82.1">Understanding the Importance of Software Architecture</span></em><span class="koboSpan" id="kobo.83.1">.</span></p>
<h2 class="heading-2" id="_idParaDest-165"><span class="koboSpan" id="kobo.84.1">CI</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.85.1">When you start building</span><a id="_idIndexMarker512"/><span class="koboSpan" id="kobo.86.1"> enterprise solutions, collaboration is the key to getting things </span><a id="_idIndexMarker513"/><span class="koboSpan" id="kobo.87.1">done faster and meeting the users’ needs. </span><span class="koboSpan" id="kobo.87.2">Version control systems, as we discussed in </span><em class="chapterRef"><span class="koboSpan" id="kobo.88.1">Chapter 4</span></em><span class="koboSpan" id="kobo.89.1">, </span><em class="italic"><span class="koboSpan" id="kobo.90.1">Best Practices in Coding C# 12</span></em><span class="koboSpan" id="kobo.91.1">, are essential for this process, but these tools do not do the job by themselves, especially if they are not well configured.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.92.1">As a software architect, you must know that </span><strong class="keyWord"><span class="koboSpan" id="kobo.93.1"> CI</span></strong><span class="koboSpan" id="kobo.94.1"> will help you to adopt a concrete approach to software development collaboration. </span><span class="koboSpan" id="kobo.94.2">When you implement it, as soon as a developer commits their code, the main code is automatically compiled and tested, according to unit and functional tests available in the project.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.95.1">The good thing when you </span><a id="_idIndexMarker514"/><span class="koboSpan" id="kobo.96.1">apply CI is that you can motivate developers to merge their changes as fast as they can to minimize merge conflicts. </span><span class="koboSpan" id="kobo.96.2">They can also share unit tests, which will improve the quality of software. </span><span class="koboSpan" id="kobo.96.3">This will make your master branch stable and safe after every commit from your team.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.97.1">The key point of CI is the ability to</span><a id="_idIndexMarker515"/><span class="koboSpan" id="kobo.98.1"> identify problems faster. </span><span class="koboSpan" id="kobo.98.2">You will have this opportunity when you allow code to be tested and analyzed by others. </span><span class="koboSpan" id="kobo.98.3">The only thing the DevOps approach helps with is making sure this happens as quickly as possible.</span></p>
<h2 class="heading-2" id="_idParaDest-166"><span class="koboSpan" id="kobo.99.1">CD</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.100.1">Once every single commit </span><a id="_idIndexMarker516"/><span class="koboSpan" id="kobo.101.1">of your application is built and this code is tested with both unit tests and functional tests, you may also want to enable </span><strong class="keyWord"><span class="koboSpan" id="kobo.102.1">CD</span></strong><span class="koboSpan" id="kobo.103.1">. </span><span class="koboSpan" id="kobo.103.2">Doing this is not just a</span><a id="_idIndexMarker517"/><span class="koboSpan" id="kobo.104.1"> matter of configuring the tool. </span><span class="koboSpan" id="kobo.104.2">As a software architect, you need to be sure that the team and the process are ready to go to this step.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.105.1">The CD approach needs to guarantee that the production environment will be kept safe in each new deployment. </span><span class="koboSpan" id="kobo.105.2">To do so, a multi-stage pipeline is a great practice to be adopted.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.106.1">The following screenshot shows an approach with common stages, using this book’s use case, </span><strong class="screenText"><span class="koboSpan" id="kobo.107.1">WWTravelClub</span></strong><span class="koboSpan" id="kobo.108.1">, as a demonstration:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.109.1"><img alt="A screenshot of a computer  Description automatically generated" src="../Images/B19820_08_01.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.110.1">Figure 8.1: Release stages using Azure DevOps</span></p>
<p class="normal"><span class="koboSpan" id="kobo.111.1">As you can see, these stages </span><a id="_idIndexMarker518"/><span class="koboSpan" id="kobo.112.1">were configured using the Azure DevOps release pipeline, which will be explained soon. </span><span class="koboSpan" id="kobo.112.2">Each stage has its own purpose, which will affect the </span><a id="_idIndexMarker519"/><span class="koboSpan" id="kobo.113.1">quality of the product ultimately delivered. </span><span class="koboSpan" id="kobo.113.2">Let’s look at the stages:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.114.1">Development/tests</span></strong><span class="koboSpan" id="kobo.115.1">: This stage is used by developers and testers to build new functionality. </span><span class="koboSpan" id="kobo.115.2">This </span><a id="_idIndexMarker520"/><span class="koboSpan" id="kobo.116.1">environment will certainly be the one that is most exposed to bugs and incomplete functions.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.117.1">Staging</span></strong><span class="koboSpan" id="kobo.118.1">: This environment gives</span><a id="_idIndexMarker521"/><span class="koboSpan" id="kobo.119.1"> a brief version of new functionalities to areas of the team not related to development and tests. </span><span class="koboSpan" id="kobo.119.2">Program managers, marketing, vendors, and others can use it as an area of study, validation, and even preproduction. </span><span class="koboSpan" id="kobo.119.3">Additionally, quality assurance teams can guarantee that the new releases are correctly deployed, considering both functionality and infrastructure.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.120.1">Production</span></strong><span class="koboSpan" id="kobo.121.1">: This is the stage</span><a id="_idIndexMarker522"/><span class="koboSpan" id="kobo.122.1"> where customers have their solution running. </span><span class="koboSpan" id="kobo.122.2">The goal for a good production environment, according to CD, is to have it updated as quickly as possible. </span><span class="koboSpan" id="kobo.122.3">The frequency will vary according to team size, but there are some approaches where this process happens more than once a day.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.123.1">The adoption of these three stages of deploying your application will positively impact the quality of the solution. </span><span class="koboSpan" id="kobo.123.2">It will also enable the team to have a safer deployment process, with fewer risks and better product stability. </span><span class="koboSpan" id="kobo.123.3">This approach may look a bit expensive at first sight, but without it, the results of bad deployment will generally be more expensive than this investment.</span></p>
<h2 class="heading-2" id="_idParaDest-167"><span class="koboSpan" id="kobo.124.1">Risks and challenges when using CI/CD</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.125.1">Now that we have an idea of how useful CI/CD is, it would be nice to think about the risks and challenges you may encounter while implementing it. </span><span class="koboSpan" id="kobo.125.2">The goal of this section is to help you, as a software</span><a id="_idIndexMarker523"/><span class="koboSpan" id="kobo.126.1"> architect, mitigate the risks and find a better way to overcome the challenges, using good processes and techniques.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.127.1">The list of risks and challenges </span><a id="_idIndexMarker524"/><span class="koboSpan" id="kobo.128.1">that will be discussed in this section are as follows:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.129.1">Continuous production deployment</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.130.1">Incomplete features in production</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.131.1">Unstable solutions for testing</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.132.1">Once you have the techniques and the processes defined to deal with them, there is no reason not to use CI/CD.</span></p>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.133.1">Remember that DevOps does not depend on CI/CD. </span><span class="koboSpan" id="kobo.133.2">You can use a process where code integration and software deployment are human-based. </span><span class="koboSpan" id="kobo.133.3">However, CI/CD does make DevOps work more smoothly.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.134.1">Now, let us have a look at them.</span></p>
<h3 class="heading-3" id="_idParaDest-168"><span class="koboSpan" id="kobo.135.1">Disabling continuous production deployment</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.136.1">Continuous production deployment is a process where, after a commit of a new piece of code and some pipeline steps, you will have this code in the </span><strong class="keyWord"><span class="koboSpan" id="kobo.137.1">production</span></strong><span class="koboSpan" id="kobo.138.1"> environment. </span><span class="koboSpan" id="kobo.138.2">This is not impossible, but it is hard and</span><a id="_idIndexMarker525"/><span class="koboSpan" id="kobo.139.1"> expensive to do. </span><span class="koboSpan" id="kobo.139.2">Besides, you need to have well-established, sophisticated processes, as well as a team with substantial experience and expertise to enable it. </span><span class="koboSpan" id="kobo.139.3">The problem is that most of the demos and samples you will find on the internet presenting CI/CD will show you a fast track to deploying code. </span><span class="koboSpan" id="kobo.139.4">The demonstrations of CI/CD make it look so simple! </span><span class="koboSpan" id="kobo.139.5">This </span><em class="italic"><span class="koboSpan" id="kobo.140.1">simplicity</span></em><span class="koboSpan" id="kobo.141.1"> might suggest that you should implement it as soon as possible. </span><span class="koboSpan" id="kobo.141.2">However, if you think a little more, this scenario can be dangerous if you deploy directly into production! </span><span class="koboSpan" id="kobo.141.3">In a solution that needs to be available 24 hours a day, 7 days a week, this is impractical. </span><span class="koboSpan" id="kobo.141.4">So you will need to worry about that and think of different solutions.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.142.1">The first one is the use of a multi-stage scenario, as we described before. </span><span class="koboSpan" id="kobo.142.2">The multi-stage scenario can bring more security to the ecosystem of the deployment you are building. </span><span class="koboSpan" id="kobo.142.3">Besides, you will get more options to avoid incorrect deployments into production, such as pre-deployment approvals,</span></p>
<p class="normal"><span class="koboSpan" id="kobo.143.1">You can build a deployment pipeline where all your code and software structure will be updated by this tool. </span><span class="koboSpan" id="kobo.143.2">However, if you have something outside of this scenario, such as database scripts and environment configurations, an incorrect publication into production may cause damage to end users. </span><span class="koboSpan" id="kobo.143.3">Besides, the decision of when the production environment will be</span><a id="_idIndexMarker526"/><span class="koboSpan" id="kobo.144.1"> updated needs to be planned, and in many scenarios, all the platform users need to be notified of the upcoming change. </span><span class="koboSpan" id="kobo.144.2">It is worth mentioning that, in these hard-to-decide cases, it is a good idea to use a </span><strong class="keyWord"><span class="koboSpan" id="kobo.145.1">change management</span></strong><span class="koboSpan" id="kobo.146.1"> procedure, based</span><a id="_idIndexMarker527"/><span class="koboSpan" id="kobo.147.1"> on the </span><strong class="keyWord"><span class="koboSpan" id="kobo.148.1">Information Technology Infrastructure Library </span></strong><span class="koboSpan" id="kobo.149.1">(</span><strong class="keyWord"><span class="koboSpan" id="kobo.150.1">ITIL</span></strong><span class="koboSpan" id="kobo.151.1">) or ISO 20000.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.152.1">So the challenge of delivering code to production will make you think about a schedule to do so. </span><span class="koboSpan" id="kobo.152.2">It does not matter whether your cycle is monthly, daily, or even at each commit. </span><span class="koboSpan" id="kobo.152.3">The key point here is that you need to create a process and a pipeline that guarantees that only good and approved software is at the production stage. </span><span class="koboSpan" id="kobo.152.4">It is worth noting, however, that the longer you leave deployments, the scarier they are, as the deviation between the previously deployed version and the new one will be greater, and more changes will be pushed out in one go. </span><span class="koboSpan" id="kobo.152.5">The more frequently you can deploy, the better.</span></p>
<h3 class="heading-3" id="_idParaDest-169"><span class="koboSpan" id="kobo.153.1">Incomplete features</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.154.1">While a developer of your team is creating a new feature or fixing a bug, you will probably consider generating a branch, which</span><a id="_idIndexMarker528"/><span class="koboSpan" id="kobo.155.1"> means they can avoid the use of the branch designed for CD. </span><span class="koboSpan" id="kobo.155.2">A branch can be considered a feature available in code repositories to enable the creation of an independent line of development, since it isolates code.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.156.1">As you can see in the following screenshot, creating a branch for </span><strong class="screenText"><span class="koboSpan" id="kobo.157.1">wwtravelclub</span></strong><span class="koboSpan" id="kobo.158.1"> using Visual Studio is quite simple:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.159.1"><img alt="Graphical user interface, text, application, email  Description automatically generated" src="../Images/B19820_08_02.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.160.1">Figure 8.2: Creating a branch in Visual Studio</span></p>
<p class="normal"><span class="koboSpan" id="kobo.161.1">This seems to be a good approach, but let us suppose that the developer has considered the implementation ready for deployment and has just merged the code into the master branch, although this is also considered a bad practice. </span><span class="koboSpan" id="kobo.161.2">What if this feature is not ready yet, just because a requirement was omitted? </span><span class="koboSpan" id="kobo.161.3">What if the bug has caused incorrect behavior? </span><span class="koboSpan" id="kobo.161.4">The result could</span><a id="_idIndexMarker529"/><span class="koboSpan" id="kobo.162.1"> be a release with an incomplete feature or an incorrect fix.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.163.1">One of the good practices to avoid broken features and even incorrect fixes in the master branch is the use</span><a id="_idIndexMarker530"/><span class="koboSpan" id="kobo.164.1"> of </span><strong class="keyWord"><span class="koboSpan" id="kobo.165.1">Pull Requests</span></strong><span class="koboSpan" id="kobo.166.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.167.1">PRs</span></strong><span class="koboSpan" id="kobo.168.1">). </span><span class="koboSpan" id="kobo.168.2">PRs will let other team developers know that the code you developed is ready to be merged. </span><span class="koboSpan" id="kobo.168.3">The following screenshot shows how you can use the Azure DevOps WWTravelClub repository to create a </span><strong class="keyWord"><span class="koboSpan" id="kobo.169.1">New pull request</span></strong><span class="koboSpan" id="kobo.170.1"> for a change you have made.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.171.1"><img alt="Interface gráfica do usuário, Texto, Aplicativo, Email  Descrição gerada automaticamente" src="../Images/B19820_08_03.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.172.1">Figure 8.3: Creating a PR</span></p>
<p class="normal"><span class="koboSpan" id="kobo.173.1">Once the PR is created and</span><a id="_idIndexMarker531"/><span class="koboSpan" id="kobo.174.1"> the reviewers are defined, each reviewer will be able to analyze the code and decide whether it is healthy enough to be in the master branch.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.175.1">The following screenshot shows a way to check the code, by using the compare tool to analyze the change in the </span><strong class="screenText"><span class="koboSpan" id="kobo.176.1">WWTravelClub</span></strong><span class="koboSpan" id="kobo.177.1"> code:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.178.1"><img alt="Interface gráfica do usuário, Texto, Aplicativo, Email  Descrição gerada automaticamente" src="../Images/B19820_08_04.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.179.1">Figure 8.4: Analyzing the PR</span></p>
<p class="normal"><span class="koboSpan" id="kobo.180.1">Once all approvals are</span><a id="_idIndexMarker532"/><span class="koboSpan" id="kobo.181.1"> done, you will be able to safely merge the code to the master branch, as you can see in the following screenshot. </span><span class="koboSpan" id="kobo.181.2">To merge the code, you will need to click on </span><strong class="screenText"><span class="koboSpan" id="kobo.182.1">Complete merge</span></strong><span class="koboSpan" id="kobo.183.1">. </span><span class="koboSpan" id="kobo.183.2">It is important to mention that you can also do this in Visual Studio, which has a better user interface. </span><span class="koboSpan" id="kobo.183.3">If the CI trigger is enabled in the WWTravelClub project, as we will show in this chapter, Azure DevOps will start a build pipeline:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.184.1"><img alt="Interface gráfica do usuário, Texto, Aplicativo, Email  Descrição gerada automaticamente" src="../Images/B19820_08_05.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.185.1">Figure 8.5: Merging the PR</span></p>
<p class="normal"><span class="koboSpan" id="kobo.186.1">Without a process like this, there</span><a id="_idIndexMarker533"/><span class="koboSpan" id="kobo.187.1"> is a great chance of having a master branch with a lot of bad code, and this code being deployed there may cause damage together with CD. </span><span class="koboSpan" id="kobo.187.2">A code review is an excellent practice in CI/CD scenarios, and it is considered a wonderful practice to create good quality software in general.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.188.1">The challenge that you need to focus on here is guaranteeing that only entire features will appear to your end users. </span><span class="koboSpan" id="kobo.188.2">You can use</span><a id="_idIndexMarker534"/><span class="koboSpan" id="kobo.189.1"> the </span><strong class="keyWord"><span class="koboSpan" id="kobo.190.1">feature flag</span></strong><span class="koboSpan" id="kobo.191.1"> principle to solve this, which is a technique that makes sure only features that are ready are presented to end users.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.192.1">In the </span><strong class="keyWord"><span class="koboSpan" id="kobo.193.1">Feature Flag</span></strong><span class="koboSpan" id="kobo.194.1"> or </span><strong class="keyWord"><span class="koboSpan" id="kobo.195.1">Feature Toggle</span></strong><span class="koboSpan" id="kobo.196.1"> technique, you must create a solution that has, in each feature, the possibility to test it in a setup to see whether it is enabled or not. </span><span class="koboSpan" id="kobo.196.2">According to this, all the functionalities will be presented to the user.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.197.1">It is worth mentioning that to control feature availability in an environment, feature flags are much safer than using branching/PRs. </span><span class="koboSpan" id="kobo.197.2">Both have their place, but PRs are about controlling the quality of code at the CI stage, and feature flags are for controlling feature availability at the CD stage.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.198.1">Again, we are not talking about CI/CD as a </span><em class="italic"><span class="koboSpan" id="kobo.199.1">tool</span></em><span class="koboSpan" id="kobo.200.1"> but as a </span><em class="italic"><span class="koboSpan" id="kobo.201.1">process</span></em><span class="koboSpan" id="kobo.202.1">, to be defined and used every single time you</span><a id="_idIndexMarker535"/><span class="koboSpan" id="kobo.203.1"> need to deliver code for production.</span></p>
<h3 class="heading-3" id="_idParaDest-170"><span class="koboSpan" id="kobo.204.1">An unstable solution for testing</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.205.1">If you have already mitigated the two other risks </span><a id="_idIndexMarker536"/><span class="koboSpan" id="kobo.206.1">presented in this section, you may find it uncommon to have bad code after CI/CD. </span><span class="koboSpan" id="kobo.206.2">It is true that the worries presented earlier will certainly reduce if you work with a multi-stage scenario and PRs before pushing to the final stage. </span><span class="koboSpan" id="kobo.206.3">But the risk of having unstable code, especially when it comes to business logic rules, remains even if you apply all the recommendations we will discuss later.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.207.1">But is there a way to accelerate the evaluation of a release while being sure that this new release is ready for your stakeholders’ tests? </span><span class="koboSpan" id="kobo.207.2">Yes, there is! </span><span class="koboSpan" id="kobo.207.3">Technically, the way you can do so is by automating unit and functional testing. </span><span class="koboSpan" id="kobo.207.4">This technique is explained in more detail in </span><em class="chapterRef"><span class="koboSpan" id="kobo.208.1">Chapter 9</span></em><span class="koboSpan" id="kobo.209.1">, </span><em class="italic"><span class="koboSpan" id="kobo.210.1">Testing Your Enterprise Application</span></em><span class="koboSpan" id="kobo.211.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.212.1">However, it is worth saying that it is impracticable to automate every single part of a piece of software, considering the efforts needed to do so. </span><span class="koboSpan" id="kobo.212.2">Besides, the maintenance of automation can be more expensive in scenarios where the user interface or the business rules change a lot. </span><span class="koboSpan" id="kobo.212.3">Although this is a tough decision, as a software architect, you must always incentivize the usage of automated testing.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.213.1">To exemplify it, let us have a look at the following screenshot, which shows the unit and functional test samples for WWTravelClub, created by an Azure DevOps project template:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.214.1"><img alt="Graphical user interface, text, application, email  Description automatically generated" src="../Images/B19820_08_06.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.215.1">Figure 8.6: Unit and functional tests projects</span></p>
<p class="normal"><span class="koboSpan" id="kobo.216.1">There are some architectural patterns, such as SOLID, presented in </span><em class="italic"><span class="koboSpan" id="kobo.217.1">Chapter 6</span></em><span class="koboSpan" id="kobo.218.1">, and quality assurance approaches, such as peer review, that will give you better results than software testing. </span><span class="koboSpan" id="kobo.218.2">However, these approaches do not invalidate automation practice. </span><span class="koboSpan" id="kobo.218.3">The truth is that all of them will be </span><a id="_idIndexMarker537"/><span class="koboSpan" id="kobo.219.1">useful for getting a stable solution, especially when you run a CI scenario. </span><span class="koboSpan" id="kobo.219.2">In this environment, the best thing you can do is to detect errors and incorrect behaviors as fast as you can. </span><span class="koboSpan" id="kobo.219.3">Both unit and functional tests, as shown earlier, will help you with this.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.220.1">Unit tests will help you a lot in discovering business logic errors before deployment, during the build pipeline. </span><span class="koboSpan" id="kobo.220.2">For instance, in the following screenshot from the WWTravelClub build process, you will find a simulated error that canceled the build, since the unit test did not pass:</span></p>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.221.1">Certain free services on Azure may be deactivated due to the possibility of misuse. </span><span class="koboSpan" id="kobo.221.2">However, you have the option to request the reactivation of these services by submitting a request.</span></p>
</div>
<figure class="mediaobject"><span class="koboSpan" id="kobo.222.1"><img alt="" role="presentation" src="../Images/B19820_08_07.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.223.1">Figure 8.7: Unit test result</span></p>
<p class="normal"><span class="koboSpan" id="kobo.224.1">The way to get this error is quite simple. </span><span class="koboSpan" id="kobo.224.2">You need to code something that does not respond according to what the unit tests are checking. </span><span class="koboSpan" id="kobo.224.3">Once you commit it, assuming you have the trigger for CD on, you will build the code in the pipeline. </span><span class="koboSpan" id="kobo.224.4">So after the build of the code, the unit tests will run. </span><span class="koboSpan" id="kobo.224.5">If the code does not match the tests anymore, you </span><a id="_idIndexMarker538"/><span class="koboSpan" id="kobo.225.1">will get an error.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.226.1">The following screenshot shows an error during the functional tests in the </span><strong class="keyWord"><span class="koboSpan" id="kobo.227.1">Development/Tests</span></strong><span class="koboSpan" id="kobo.228.1"> stage of the WWTravelClub project. </span><span class="koboSpan" id="kobo.228.2">In this instance, the </span><strong class="keyWord"><span class="koboSpan" id="kobo.229.1">Development/Tests</span></strong><span class="koboSpan" id="kobo.230.1"> environment has a bug that was rapidly detected by functional tests:</span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.231.1"><img alt="" role="presentation" src="../Images/B19820_08_08.png"/></span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.232.1">Figure 8.8: Functional test result</span></p>
<p class="normal"><span class="koboSpan" id="kobo.233.1">But this is not the only</span><a id="_idIndexMarker539"/><span class="koboSpan" id="kobo.234.1"> good thing about applying functional tests during CI/CD. </span><span class="koboSpan" id="kobo.234.2">Let us look at the following screenshot from the </span><strong class="keyWord"><span class="koboSpan" id="kobo.235.1">Releases</span></strong><span class="koboSpan" id="kobo.236.1"> pipeline interface in Azure DevOps. </span><span class="koboSpan" id="kobo.236.2">If you look at </span><strong class="keyWord"><span class="koboSpan" id="kobo.237.1">Release-9</span></strong><span class="koboSpan" id="kobo.238.1">, you will realize that, since this error happened after the publication in the </span><strong class="keyWord"><span class="koboSpan" id="kobo.239.1">Development/Tests</span></strong><span class="koboSpan" id="kobo.240.1"> environment, the multi-stage environment will protect the other stages of the wrong deployment, especially the WWTravelClub production stage:</span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.241.1"><img alt="Graphical user interface, text, application, email  Description automatically generated" src="../Images/B19820_08_09.png"/></span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.242.1">Figure 8.9: Multi-stage environment protection</span></p>
<p class="normal"><span class="koboSpan" id="kobo.243.1">The key point for success in the CI process is to think about it as a useful tool to accelerate the delivery of software and to not forget that a team always needs to deliver value to its end users. </span><span class="koboSpan" id="kobo.243.2">With this approach, the</span><a id="_idIndexMarker540"/><span class="koboSpan" id="kobo.244.1"> techniques presented earlier will provide incredible ways to achieve the results that your team aims for.</span></p>
<h2 class="heading-2" id="_idParaDest-171"><span class="koboSpan" id="kobo.245.1">Continuous feedback</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.246.1">Once you have a solution that runs perfectly in the deployment scenario described in the previous section, feedback will be essential for your team to understand the results of the release and how the version works for customers. </span><span class="koboSpan" id="kobo.246.2">To get this feedback, there are some tools that can help </span><a id="_idIndexMarker541"/><span class="koboSpan" id="kobo.247.1">both developers and customers, bringing them together to fast-track the process of feedback.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.248.1">The main purpose of continuous feedback is to enable developers to get information about the application running in production, enabling the team to improve the infrastructure of the environment deployed and, at the same time, detect improvements that can be made in the source code and user interface.</span></p>
<h1 class="heading-1" id="_idParaDest-172"><span class="koboSpan" id="kobo.249.1">Tools to facilitate DevOps implementation</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.250.1">Considering that </span><a id="_idIndexMarker542"/><span class="koboSpan" id="kobo.251.1">DevOps is a philosophy, there are many tools that can be used to help you with its implementation. </span><span class="koboSpan" id="kobo.251.2">The following topics will present some of the most-used ones in a Microsoft environment.</span></p>
<h2 class="heading-2" id="_idParaDest-173"><span class="koboSpan" id="kobo.252.1">Azure DevOps</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.253.1">As soon as you start working with a platform such as Azure DevOps, enabling CI/CD will be easy when it comes to</span><a id="_idIndexMarker543"/><span class="koboSpan" id="kobo.254.1"> clicking on the options</span><a id="_idIndexMarker544"/><span class="koboSpan" id="kobo.255.1"> to do so. </span><span class="koboSpan" id="kobo.255.2">So technology is not the Achilles’ heel for implementing this process.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.256.1">The following screenshot shows an example of how easy it is to turn on CI/CD using the Azure DevOps WWTravelClub pipeline. </span><span class="koboSpan" id="kobo.256.2">By clicking in the </span><strong class="keyWord"><span class="koboSpan" id="kobo.257.1">Pipelines</span></strong><span class="koboSpan" id="kobo.258.1"> and editing it, you will be able to set a trigger that enables CI/CD after some clicks:</span></p>
<figure class="mediaobject"> <span class="koboSpan" id="kobo.259.1"><img alt="A screenshot of a computer  Description automatically generated" src="../Images/B19820_08_10.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.260.1">Figure 8.10: Enabling the CI trigger</span></p>
<p class="normal"><span class="koboSpan" id="kobo.261.1">CI/CD will help you solve some problems. </span><span class="koboSpan" id="kobo.261.2">For instance, it will force you to test your code, since you will need to commit the changes faster so that other developers can make use of the code you are programming.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.262.1">Conversely, you will not do CI/CD just by enabling a CI build in Azure DevOps. </span><span class="koboSpan" id="kobo.262.2">For sure, you will turn on the possibility of starting a build as soon as you get a commit done and the code is complete, but this is far from saying you have CI/CD available in your solution.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.263.1">The reason you, as a software architect, need to worry a bit more about it is related to a real understanding of what DevOps is. </span><span class="koboSpan" id="kobo.263.2">The need to deliver value to the end user will always be a good way to </span><a id="_idIndexMarker545"/><span class="koboSpan" id="kobo.264.1">decide how the development life cycle will work. </span><span class="koboSpan" id="kobo.264.2">So even if turning on CI/CD is easy, what is the real business impact of this feature being enabled for your end users? </span><span class="koboSpan" id="kobo.264.3">Once you have all the answers to this question and you know how to reduce the risks of its implementation, then you will be able to say that you have a CI/CD process implemented.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.265.1">CI/CD is a principle that will </span><a id="_idIndexMarker546"/><span class="koboSpan" id="kobo.266.1">make DevOps work better and faster. </span><span class="koboSpan" id="kobo.266.2">However, DevOps can live without it, if you are not sure if your process is mature enough to enable code to be continuously delivered.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.267.1">Moreover, if you turn on CI/CD in a team that is not mature enough to deal with its complexity, you will probably cause a bad understanding of DevOps, since you will start incurring some risks while deploying your solution. </span><span class="koboSpan" id="kobo.267.2">The point is that CI/CD is not a prerequisite for DevOps. </span></p>
<p class="normal"><span class="koboSpan" id="kobo.268.1">When you have CI/CD enabled, you can make things faster in DevOps. </span><span class="koboSpan" id="kobo.268.2">However, you can practice DevOps without it.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.269.1">Deployments and other release</span><a id="_idIndexMarker547"/><span class="koboSpan" id="kobo.270.1"> artifacts are added to different pipelines, called release pipelines, to decouple them from build-related artifacts. </span><span class="koboSpan" id="kobo.270.2">With Release Pipelines, you cannot edit a </span><code class="inlineCode"><span class="koboSpan" id="kobo.271.1">.yaml</span></code><span class="koboSpan" id="kobo.272.1"> file, but you will work with a graphic interface, as follows:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.273.1">Click the </span><strong class="keyWord"><span class="koboSpan" id="kobo.274.1">Releases</span></strong><span class="koboSpan" id="kobo.275.1"> left menu tab to create a new </span><strong class="keyWord"><span class="koboSpan" id="kobo.276.1">Release Pipeline</span></strong><span class="koboSpan" id="kobo.277.1">. </span><span class="koboSpan" id="kobo.277.2">As soon as you click </span><strong class="keyWord"><span class="koboSpan" id="kobo.278.1">Add a new pipeline</span></strong><span class="koboSpan" id="kobo.279.1">, you will be prompted to add the first task of the first pipeline stage. </span><span class="koboSpan" id="kobo.279.2">In fact, the whole release pipeline is composed of different stages, each grouping sequences of tasks. </span><span class="koboSpan" id="kobo.279.3">While each stage is just a sequence of tasks, the stages diagram can branch, and we can add several branches after each stage. </span><span class="koboSpan" id="kobo.279.4">This way, we can deploy to different platforms that each require different tasks. </span><span class="koboSpan" id="kobo.279.5">In our simple example, we will use a single stage.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.280.1">Select the </span><strong class="keyWord"><span class="koboSpan" id="kobo.281.1">Azure App Service Deployment</span></strong><span class="koboSpan" id="kobo.282.1"> task. </span><span class="koboSpan" id="kobo.282.2">As soon as you add this task, you will be prompted to fill in the missing information.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.283.1">Select your subscription, and then, if an </span><strong class="screenText"><span class="koboSpan" id="kobo.284.1">Authorization</span></strong><span class="koboSpan" id="kobo.285.1"> button appears, click it to authorize Azure Pipelines to access your subscription. </span><span class="koboSpan" id="kobo.285.2">Then, select </span><strong class="screenText"><span class="koboSpan" id="kobo.286.1">Windows</span></strong><span class="koboSpan" id="kobo.287.1"> as the deployment platform, and finally, select the app service you created from the </span><strong class="screenText"><span class="koboSpan" id="kobo.288.1">App service name</span></strong><span class="koboSpan" id="kobo.289.1"> drop-down list. </span><span class="koboSpan" id="kobo.289.2">Task settings are automatically saved while you write them, so you just need to click the </span><strong class="screenText"><span class="koboSpan" id="kobo.290.1">Save</span></strong><span class="koboSpan" id="kobo.291.1"> button for the whole pipeline.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.292.1">Now, we need to connect this pipeline to a source artifact. </span><span class="koboSpan" id="kobo.292.2">Click the </span><strong class="keyWord"><span class="koboSpan" id="kobo.293.1">Add Artifact</span></strong><span class="koboSpan" id="kobo.294.1"> button and then select </span><strong class="keyWord"><span class="koboSpan" id="kobo.295.1">Build</span></strong><span class="koboSpan" id="kobo.296.1"> as the source type, because we need to connect the </span><a id="_idIndexMarker548"/><span class="koboSpan" id="kobo.297.1">new release pipeline with the ZIP file created by our build pipeline. </span><span class="koboSpan" id="kobo.297.2">A settings window </span><a id="_idIndexMarker549"/><span class="koboSpan" id="kobo.298.1">appears:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.299.1"><img alt="" role="presentation" src="../Images/B19820_08_11.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.300.1">Figure 8.11: Defining the artifact to publish</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="5"><span class="koboSpan" id="kobo.301.1">Select our previous build pipeline from the drop-down list, and keep </span><strong class="keyWord"><span class="koboSpan" id="kobo.302.1">Latest</span></strong><span class="koboSpan" id="kobo.303.1"> as the version. </span><span class="koboSpan" id="kobo.303.2">Accept the suggested name under </span><strong class="keyWord"><span class="koboSpan" id="kobo.304.1">Source alias</span></strong><span class="koboSpan" id="kobo.305.1">.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.306.1">Our release pipeline is ready and can be used as-is. </span><span class="koboSpan" id="kobo.306.2">The image of the source artifact you just added contains a trigger icon in its top-right corner, as follows:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.307.1"><img alt="" role="presentation" src="../Images/B19820_08_12.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.308.1">Figure 8.12: Artifact ready to publish</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="7"><span class="koboSpan" id="kobo.309.1">If you click on the</span><a id="_idIndexMarker550"/><span class="koboSpan" id="kobo.310.1"> trigger icon, you</span><a id="_idIndexMarker551"/><span class="koboSpan" id="kobo.311.1"> are given the option to automatically trigger the release pipeline as soon as a new build is available:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.312.1"><img alt="Graphical user interface, application, Teams  Description automatically generated" src="../Images/B19820_08_13.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.313.1">Figure 8.13: Enabling the continuous deployment trigger</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="8"><span class="koboSpan" id="kobo.314.1">Keep it disabled; we can enable it after we have completed and manually tested the release pipeline.</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.315.1">As we mentioned earlier, in </span><a id="_idIndexMarker552"/><span class="koboSpan" id="kobo.316.1">preparation for an automatic trigger, we need to add a human approval task before the application is </span><a id="_idIndexMarker553"/><span class="koboSpan" id="kobo.317.1">deployed. </span><span class="koboSpan" id="kobo.317.2">Let’s add it with the following steps:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.318.1">Click the three dots on the right of the </span><strong class="screenText"><span class="koboSpan" id="kobo.319.1">Stage 1</span></strong><span class="koboSpan" id="kobo.320.1"> header:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.321.1"><img alt="" role="presentation" src="../Images/B19820_08_14.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.322.1">Figure 8.14: Adding human approval to a stage</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="2"><span class="koboSpan" id="kobo.323.1">Then, select </span><strong class="screenText"><span class="koboSpan" id="kobo.324.1">Add an agentless job</span></strong><span class="koboSpan" id="kobo.325.1">. </span><span class="koboSpan" id="kobo.325.2">Once the agentless job has been added, click the </span><strong class="keyWord"><span class="koboSpan" id="kobo.326.1">Add</span></strong><span class="koboSpan" id="kobo.327.1"> button and add a </span><strong class="keyWord"><span class="koboSpan" id="kobo.328.1">Manual intervention</span></strong><span class="koboSpan" id="kobo.329.1"> task. </span><span class="koboSpan" id="kobo.329.2">The following screenshot shows the </span><strong class="keyWord"><span class="koboSpan" id="kobo.330.1">Manual intervention</span></strong><span class="koboSpan" id="kobo.331.1"> settings:
    </span><figure class="mediaobject"><span class="koboSpan" id="kobo.332.1"><img alt="" role="presentation" src="../Images/B19820_08_15.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.333.1">Figure 8.15: Configuring human approval for a stage</span></p>
<p class="normal"><span class="koboSpan" id="kobo.334.1">Add instructions</span><a id="_idIndexMarker554"/><span class="koboSpan" id="kobo.335.1"> for the operator, and select your account in the </span><strong class="keyWord"><span class="koboSpan" id="kobo.336.1">Notify users</span></strong><span class="koboSpan" id="kobo.337.1"> field.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.338.1">Now, drag the</span><a id="_idIndexMarker555"/><span class="koboSpan" id="kobo.339.1"> whole </span><strong class="keyWord"><span class="koboSpan" id="kobo.340.1">Agentless job</span></strong><span class="koboSpan" id="kobo.341.1"> with the mouse, and place it before the application deployment task. </span><span class="koboSpan" id="kobo.341.2">It should look like this:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.342.1"><img alt="" role="presentation" src="../Images/B19820_08_16.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.343.1">Figure 8.16: Setting the human approval deployment tasks list</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.344.1">Finished! </span><span class="koboSpan" id="kobo.344.2">Click the </span><strong class="keyWord"><span class="koboSpan" id="kobo.345.1">Save</span></strong><span class="koboSpan" id="kobo.346.1"> button in the top-left corner to save the pipeline.</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.347.1">Now, everything is ready to </span><a id="_idIndexMarker556"/><span class="koboSpan" id="kobo.348.1">create our first</span><a id="_idIndexMarker557"/><span class="koboSpan" id="kobo.349.1"> automatic release. </span><span class="koboSpan" id="kobo.349.2">And to do so, a new release can be prepared and deployed as follows:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.350.1">Click the </span><strong class="screenText"><span class="koboSpan" id="kobo.351.1">Create release</span></strong><span class="koboSpan" id="kobo.352.1"> button to start the creation of a new release, as shown in the following screenshot:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.353.1"><img alt="" role="presentation" src="../Images/B19820_08_17.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.354.1">Figure 8.17: Creating a new release</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="2"><span class="koboSpan" id="kobo.355.1">Verify that the </span><strong class="screenText"><span class="koboSpan" id="kobo.356.1">Source alias</span></strong><span class="koboSpan" id="kobo.357.1"> is the last available one, add a </span><strong class="keyWord"><span class="koboSpan" id="kobo.358.1">Release description</span></strong><span class="koboSpan" id="kobo.359.1">, and then </span><a id="_idIndexMarker558"/><span class="koboSpan" id="kobo.360.1">click </span><strong class="keyWord"><span class="koboSpan" id="kobo.361.1">Create</span></strong><span class="koboSpan" id="kobo.362.1">. </span><span class="koboSpan" id="kobo.362.2">In a </span><a id="_idIndexMarker559"/><span class="koboSpan" id="kobo.363.1">short time, you should receive an email for release approval. </span><span class="koboSpan" id="kobo.363.2">Click the link it contains and go to the approval page:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.364.1"><img alt="" role="presentation" src="../Images/B19820_08_18.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.365.1">Figure 8.18: Approving a release</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.366.1">Click the </span><strong class="screenText"><span class="koboSpan" id="kobo.367.1">Approve</span></strong><span class="koboSpan" id="kobo.368.1"> button to</span><a id="_idIndexMarker560"/><span class="koboSpan" id="kobo.369.1"> approve the release. </span><span class="koboSpan" id="kobo.369.2">Wait for the deployment to complete. </span><span class="koboSpan" id="kobo.369.3">You should</span><a id="_idIndexMarker561"/><span class="koboSpan" id="kobo.370.1"> have all the tasks successfully completed, as shown in the following screenshot:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.371.1"><img alt="" role="presentation" src="../Images/B19820_08_19.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.372.1">Figure 8.19: Release deployed</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.373.1">You have run your first successful release pipeline!</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.374.1">In a real-life project, the release pipeline would contain more tasks. </span><span class="koboSpan" id="kobo.374.2">In fact, applications (before being deployed in the actual production environment) are deployed in a </span><strong class="keyWord"><span class="koboSpan" id="kobo.375.1">staging environment</span></strong><span class="koboSpan" id="kobo.376.1"> where they are beta-tested. </span><span class="koboSpan" id="kobo.376.2">Hence, after this first deployment, there would probably be some manual tests, manual authorization for the deployment in production, and the final deployment in production.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.377.1">Considering the multistage </span><a id="_idIndexMarker562"/><span class="koboSpan" id="kobo.378.1">scenario, you can set up the pipeline in a way where only with defined </span><a id="_idIndexMarker563"/><span class="koboSpan" id="kobo.379.1">authorizations will you be able to move from one stage to another:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.380.1"><img alt="" role="presentation" src="../Images/B19820_08_20.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.381.1">Figure 8.20: Defining pre-deployment conditions</span></p>
<p class="normal"><span class="koboSpan" id="kobo.382.1">As you can see in the preceding screenshot, it is quite simple to set up pre-deployment conditions, and there is more than a single option to customize the authorization method. </span><span class="koboSpan" id="kobo.382.2">This allows you to refine the CD approach, exactly meeting the needs of the project you are dealing with.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.383.1">The following screenshot shows the options provided by Azure DevOps for pre-deployment approval. </span><span class="koboSpan" id="kobo.383.2">You can define the people who can approve the stage and set policies for them, that is, revalidate the approver identity before completing the process. </span><span class="koboSpan" id="kobo.383.3">You, as a software architect, will need to identify the configuration that fits the project you are creating with this approach:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.384.1"><img alt="" role="presentation" src="../Images/B19820_08_21.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.385.1">Figure 8.21: Pre-deployment approval options</span></p>
<p class="normal"><span class="koboSpan" id="kobo.386.1">It is worth</span><a id="_idIndexMarker564"/><span class="koboSpan" id="kobo.387.1"> mentioning that although</span><a id="_idIndexMarker565"/><span class="koboSpan" id="kobo.388.1"> this approach is far better than a single-stage deployment, a DevOps pipeline will direct you, as a software architect, to another stage of monitoring. </span><span class="koboSpan" id="kobo.388.2">App Insights, which will be presented later, is an incredible tool for this.</span></p>
<h2 class="heading-2" id="_idParaDest-174"><span class="koboSpan" id="kobo.389.1">GitHub</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.390.1">Since GitHub’s acquisition</span><a id="_idIndexMarker566"/><span class="koboSpan" id="kobo.391.1"> by Microsoft, many features </span><a id="_idIndexMarker567"/><span class="koboSpan" id="kobo.392.1">have evolved and new options have been delivered, enhancing the power of this powerful tool. </span><span class="koboSpan" id="kobo.392.2">These integrations can be explored using the Azure portal and, particularly, GitHub Actions.</span></p>
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.393.1">GitHub Actions</span></strong><span class="koboSpan" id="kobo.394.1"> is a </span><a id="_idIndexMarker568"/><span class="koboSpan" id="kobo.395.1">set of tools that helps with the automation of software development. </span><span class="koboSpan" id="kobo.395.2">It enables a fast CI/CD service on any platform, using YAML files to define its workflows. </span><span class="koboSpan" id="kobo.395.3">You can consider GitHub Actions a new approach presented by Microsoft as a substitute for Azure DevOps Pipelines. </span><span class="koboSpan" id="kobo.395.4">You can automate any GitHub event using GitHub Actions, with thousands of actions available on GitHub Marketplace:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.396.1"><img alt="" role="presentation" src="../Images/B19820_08_22.png"/></span> </figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.397.1">Figure 8.22: GitHub Actions</span></p>
<p class="normal"><span class="koboSpan" id="kobo.398.1">Creating a workflow to</span><a id="_idIndexMarker569"/><span class="koboSpan" id="kobo.399.1"> build a .NET web app is quite simple via the GitHub Actions interface. </span><span class="koboSpan" id="kobo.399.2">As you can see</span><a id="_idIndexMarker570"/><span class="koboSpan" id="kobo.400.1"> in the preceding screenshot, there are some workflows that have already been created to help us out.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.401.1">The YAML we have below was generated by clicking the </span><strong class="keyWord"><span class="koboSpan" id="kobo.402.1">Set up this workflow</span></strong><span class="koboSpan" id="kobo.403.1"> option in the </span><strong class="keyWord"><span class="koboSpan" id="kobo.404.1">Configure</span></strong><span class="koboSpan" id="kobo.405.1"> options under </span><strong class="keyWord"><span class="koboSpan" id="kobo.406.1">.NET</span></strong><span class="koboSpan" id="kobo.407.1">:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.408.1">name: .NET
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.409.1">on</span></span><span class="koboSpan" id="kobo.410.1">:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
jobs:
  build:
    runs-</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.411.1">on</span></span><span class="koboSpan" id="kobo.412.1">: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Setup .NET
      uses: actions/setup-dotnet@v1
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.413.1">with</span></span><span class="koboSpan" id="kobo.414.1">:
        dotnet-version: </span><span class="hljs-number"><span class="koboSpan" id="kobo.415.1">8.0</span></span><span class="koboSpan" id="kobo.416.1">.x
    - name: Restore dependencies
      run: dotnet restore
    - name: Build
      run: dotnet build --no-restore
    - name: Test
      run: dotnet test --no-build --verbosity normal
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.417.1">With the adaptations </span><a id="_idIndexMarker571"/><span class="koboSpan" id="kobo.418.1">made below, it can build the application specifically created for this chapter:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.419.1">name: .NET </span><span class="hljs-number"><span class="koboSpan" id="kobo.420.1">8</span></span><span class="koboSpan" id="kobo.421.1"> Chapter </span><span class="hljs-number"><span class="koboSpan" id="kobo.422.1">08</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.423.1">on</span></span><span class="koboSpan" id="kobo.424.1">:
  push:
    branches:
    - main
env:
  DOTNET_CORE_VERSION: </span><span class="hljs-number"><span class="koboSpan" id="kobo.425.1">8.0</span></span><span class="koboSpan" id="kobo.426.1">.x
jobs:
  build:
    runs-</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.427.1">on</span></span><span class="koboSpan" id="kobo.428.1">: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup .NET </span><span class="hljs-number"><span class="koboSpan" id="kobo.429.1">8</span></span><span class="koboSpan" id="kobo.430.1">
        uses: actions/setup-dotnet@v1
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.431.1">with</span></span><span class="koboSpan" id="kobo.432.1">:
          include-prerelease: True
          dotnet-version: ${{ env.DOTNET_CORE_VERSION }}
      - name: Install dependencies
        run: dotnet restore ./ch08
      - name: Build
        run: dotnet build ./ch08 --configuration Release --no-restore
      - name: Test
        run: dotnet test ./ch08 --no-restore --verbosity normal
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.433.1">As you can see below, once</span><a id="_idIndexMarker572"/><span class="koboSpan" id="kobo.434.1"> the script is updated, it is possible to check the result of the workflow. </span><span class="koboSpan" id="kobo.434.2">It is also possible to enable CD if you want to. </span><span class="koboSpan" id="kobo.434.3">It is just a matter of defining the correct script:</span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.435.1"><img alt="" role="presentation" src="../Images/B19820_08_23.png"/></span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.436.1">Figure 8.23: Simple application compilation using GitHub Actions</span></p>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.437.1">Microsoft provides documentation specifically covering Azure and GitHub integration. </span><span class="koboSpan" id="kobo.437.2">Check this out at </span><a href="https://docs.microsoft.com/en-us/azure/developer/github"><span class="url"><span class="koboSpan" id="kobo.438.1">https://docs.microsoft.com/en-us/azure/developer/github</span></span></a><span class="koboSpan" id="kobo.439.1">.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.440.1">As a software</span><a id="_idIndexMarker573"/><span class="koboSpan" id="kobo.441.1"> architect, you need to understand which tool best fits your development team. </span><span class="koboSpan" id="kobo.441.2">Azure DevOps has a wonderful environment for enabling CI/CD, and so does GitHub. </span><span class="koboSpan" id="kobo.441.3">The key point </span><a id="_idIndexMarker574"/><span class="koboSpan" id="kobo.442.1">here is that no matter the option you decide on, there are risks and challenges that you will face once CI/CD is enabled. </span><span class="koboSpan" id="kobo.442.2">Let’s check them out in the next topic.</span></p>
<h2 class="heading-2" id="_idParaDest-175"><span class="koboSpan" id="kobo.443.1">Application Insights</span></h2>
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.444.1">Application Insights</span></strong><span class="koboSpan" id="kobo.445.1"> is a feature that </span><a id="_idIndexMarker575"/><span class="koboSpan" id="kobo.446.1">any software architect must have for continuous feedback on their solution. </span><span class="koboSpan" id="kobo.446.2">Application</span><a id="_idIndexMarker576"/><span class="koboSpan" id="kobo.447.1"> Insights is part of </span><strong class="keyWord"><span class="koboSpan" id="kobo.448.1">Azure Monitor</span></strong><span class="koboSpan" id="kobo.449.1">, a wider suite of monitoring features that also includes alerting, dashboards, and workbooks. </span><span class="koboSpan" id="kobo.449.2">As soon as you connect your app to it, you start receiving feedback on each request made to the software. </span><span class="koboSpan" id="kobo.449.3">This enables you to monitor not only the requests made but also your database performance, the errors that the application may be suffering from, and the calls that take the most time to process.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.450.1">Obviously, you will have costs relating to having this tool plugged into your environment, but the facilities that the tool provides will be worth it. </span><span class="koboSpan" id="kobo.450.2">It might be worth noting that, for simple applications, it could even be free because you pay for data ingested, for which there is</span><a id="_idIndexMarker577"/><span class="koboSpan" id="kobo.451.1"> a free quota. </span><span class="koboSpan" id="kobo.451.2">Aside from financial cost, you need to understand that there is a very small performance cost, since all the requests to store data in </span><strong class="keyWord"><span class="koboSpan" id="kobo.452.1">Application Insights</span></strong><span class="koboSpan" id="kobo.453.1"> run in a separate thread.</span></p>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.454.1">Several services, such as App Services, Functions, and so on, will give you the option to add Application Insights as part of the initial creation process, so you may have already created it while following along with this book.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.455.1">The following screenshot shows how easily you can create a tool in your environment:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.456.1"><img alt="Interface gráfica do usuário, Texto, Aplicativo, Email  Descrição gerada automaticamente" src="../Images/B19820_08_24.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.457.1">Figure 8.24: Creating Application Insights resources in Azure</span></p>
<p class="normal"><span class="koboSpan" id="kobo.458.1">For instance, let’s suppose</span><a id="_idIndexMarker578"/><span class="koboSpan" id="kobo.459.1"> you need to analyze the requests that are taking more time in your application. </span><span class="koboSpan" id="kobo.459.2">The process of attaching Application Insights to your web app is quite simple: it can be done as soon as you set it up. </span><span class="koboSpan" id="kobo.459.3">If you are not sure whether Application Insights is configured for your web app, you can find out using the Azure portal. </span><span class="koboSpan" id="kobo.459.4">Navigate to </span><strong class="keyWord"><span class="koboSpan" id="kobo.460.1">App Services</span></strong><span class="koboSpan" id="kobo.461.1"> and look at the </span><strong class="keyWord"><span class="koboSpan" id="kobo.462.1">Application Insights</span></strong><span class="koboSpan" id="kobo.463.1"> settings, as shown in the following</span><a id="_idIndexMarker579"/><span class="koboSpan" id="kobo.464.1"> screenshot:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.465.1"><img alt="" role="presentation" src="../Images/B19820_08_25.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.466.1">Figure 8.25: Enabling Application Insights in App Services</span></p>
<p class="normal"><span class="koboSpan" id="kobo.467.1">The interface will give you</span><a id="_idIndexMarker580"/><span class="koboSpan" id="kobo.468.1"> the opportunity to create or attach an already-created monitoring service to your web app. </span><span class="koboSpan" id="kobo.468.2">You can connect more than one web app to the same </span><strong class="screenText"><span class="koboSpan" id="kobo.469.1">Application Insights</span></strong><span class="koboSpan" id="kobo.470.1"> component.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.471.1">The following screenshot shows how to add a web app to an already-created </span><strong class="screenText"><span class="koboSpan" id="kobo.472.1">Application Insights</span></strong><span class="koboSpan" id="kobo.473.1"> resource:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.474.1"><img alt="" role="presentation" src="../Images/B19820_08_26.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.475.1">Figure 8.26: Enabling App Insights in App Services</span></p>
<p class="normal"><span class="koboSpan" id="kobo.476.1">Once you have</span><a id="_idIndexMarker581"/><span class="koboSpan" id="kobo.477.1"> Application Insights </span><a id="_idIndexMarker582"/><span class="koboSpan" id="kobo.478.1">configured for your web app, you will see the following screen in App Services:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.479.1"><img alt="Graphical user interface, text, application, email  Description automatically generated" src="../Images/B19820_08_27.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.480.1">Figure 8.27: Application Insights in App Services</span></p>
<p class="normal"><span class="koboSpan" id="kobo.481.1">Once it is connected to</span><a id="_idIndexMarker583"/><span class="koboSpan" id="kobo.482.1"> your solution, the</span><a id="_idIndexMarker584"/><span class="koboSpan" id="kobo.483.1"> data collection will happen continuously, and you will see the results in the dashboard provided by the component. </span><span class="koboSpan" id="kobo.483.2">You can find this screen in two places:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.484.1">In the same place where you configured Application Insights, inside the web app portal</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.485.1">In the Azure portal, after navigating through the Application Insights resource</span></li>
</ul>
<figure class="mediaobject"><span class="koboSpan" id="kobo.486.1"><img alt="" role="presentation" src="../Images/B19820_08_28.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.487.1">Figure 8.28: Application Insights in action</span></p>
<p class="normal"><span class="koboSpan" id="kobo.488.1">This dashboard</span><a id="_idIndexMarker585"/><span class="koboSpan" id="kobo.489.1"> gives you an idea of failed requests, server response time, and server requests. </span><span class="koboSpan" id="kobo.489.2">You can also turn on the availability </span><a id="_idIndexMarker586"/><span class="koboSpan" id="kobo.490.1">check, which will make requests to your selected URL from any of the Azure data centers.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.491.1">The beauty of Application Insights is in how deeply it analyzes your system. </span><span class="koboSpan" id="kobo.491.2">In the following screenshot, for instance, it gives you feedback on the number of requests made on the website. </span><span class="koboSpan" id="kobo.491.3">You can analyze this feedback by ranking the requests by the ones that took more time to process or the ones that were called more often.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.492.1"><img alt="Graphical user interface, text, application, email  Description automatically generated" src="../Images/B19820_08_29.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.493.1">Figure 8.29: Analyzing app performance using Application Insights</span></p>
<p class="normal"><span class="koboSpan" id="kobo.494.1">Considering this view can be filtered in </span><a id="_idIndexMarker587"/><span class="koboSpan" id="kobo.495.1">different ways and you receive the information just after it happens in</span><a id="_idIndexMarker588"/><span class="koboSpan" id="kobo.496.1"> your web app, this is certainly a tool that defines continuous feedback. </span><span class="koboSpan" id="kobo.496.2">This is one of the best ways you can use DevOps principles to achieve exactly what your customer needs.</span></p>
<h2 class="heading-2" id="_idParaDest-176"><span class="koboSpan" id="kobo.497.1">Test and Feedback</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.498.1">Another useful tool in the </span><a id="_idIndexMarker589"/><span class="koboSpan" id="kobo.499.1">process of</span><a id="_idIndexMarker590"/><span class="koboSpan" id="kobo.500.1"> continuous feedback is the </span><strong class="keyWord"><span class="koboSpan" id="kobo.501.1">Test and Feedback</span></strong><span class="koboSpan" id="kobo.502.1"> tool, designed by Microsoft to help product owners and quality assurance users with the process of analyzing new features.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.503.1">Using Azure DevOps, you can ask for feedback from your team by selecting an option inside each work item, as you can see in the following screenshot:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.504.1"><img alt="Graphical user interface, application  Description automatically generated" src="../Images/B19820_08_30.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.505.1">Figure 8.30: Requesting feedback using Azure DevOps</span></p>
<p class="normal"><span class="koboSpan" id="kobo.506.1">Once someone </span><a id="_idIndexMarker591"/><span class="koboSpan" id="kobo.507.1">receives a feedback request, they can use the </span><strong class="screenText"><span class="koboSpan" id="kobo.508.1">Test and Feedback</span></strong><span class="koboSpan" id="kobo.509.1"> tool to analyze and give the correct feedback to</span><a id="_idIndexMarker592"/><span class="koboSpan" id="kobo.510.1"> the team. </span><span class="koboSpan" id="kobo.510.2">They will be able to connect the tool to your Azure DevOps project, giving you more features while analyzing the feedback request.</span></p>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.511.1">You can download this tool from </span><a href="https://marketplace.visualstudio.com/items?itemName=ms.vss-exploratorytesting-web"><span class="url"><span class="koboSpan" id="kobo.512.1">https://marketplace.visualstudio.com/items?itemName=ms.vss-exploratorytesting-web</span></span></a><span class="koboSpan" id="kobo.513.1">.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.514.1">This tool is a web browser extension that you will need to install before use. </span><span class="koboSpan" id="kobo.514.2">The following screenshot shows how to set up an Azure DevOps project URL for the </span><strong class="screenText"><span class="koboSpan" id="kobo.515.1">Test and Feedback</span></strong><span class="koboSpan" id="kobo.516.1"> tool:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.517.1"><img alt="" role="presentation" src="../Images/B19820_08_31.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.518.1">Figure 8.31: Connecting Test and Feedback to an Azure DevOps organization</span></p>
<p class="normal"><span class="koboSpan" id="kobo.519.1">The tool is quite simple. </span><span class="koboSpan" id="kobo.519.2">You </span><a id="_idIndexMarker593"/><span class="koboSpan" id="kobo.520.1">can take screenshots, record </span><a id="_idIndexMarker594"/><span class="koboSpan" id="kobo.521.1">a process, or even make a note. </span><span class="koboSpan" id="kobo.521.2">The following screenshot shows how easily you can write a message inside a screenshot:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.522.1"><img alt="Graphical user interface  Description automatically generated" src="../Images/B19820_08_32.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.523.1">Figure 8.32: Giving feedback with the Test and Feedback tool</span></p>
<p class="normal"><span class="koboSpan" id="kobo.524.1">The good thing is that </span><a id="_idIndexMarker595"/><span class="koboSpan" id="kobo.525.1">you record</span><a id="_idIndexMarker596"/><span class="koboSpan" id="kobo.526.1"> all this analysis in a session timeline. </span><span class="koboSpan" id="kobo.526.2">As you can see in the next screenshot, you can have multiple pieces of feedback in the same session, which is good for the analysis process:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.527.1"><img alt="" role="presentation" src="../Images/B19820_08_33.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.528.1">Figure 8.33: Giving feedback with the Test and Feedback tool</span></p>
<p class="normal"><span class="koboSpan" id="kobo.529.1">Once you have done the</span><a id="_idIndexMarker597"/><span class="koboSpan" id="kobo.530.1"> analysis and you</span><a id="_idIndexMarker598"/><span class="koboSpan" id="kobo.531.1"> are connected to Azure DevOps, you will be able to report a bug (as shown in the following screenshot), create a task, or even start a new test case:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.532.1"><img alt="" role="presentation" src="../Images/B19820_08_34.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.533.1">Figure 8.34: Opening a bug in Azure DevOps</span></p>
<p class="normal"><span class="koboSpan" id="kobo.534.1">The result of the bug</span><a id="_idIndexMarker599"/><span class="koboSpan" id="kobo.535.1"> created can be checked on the </span><strong class="keyWord"><span class="koboSpan" id="kobo.536.1">Work items</span></strong><span class="koboSpan" id="kobo.537.1"> board in Azure DevOps. </span><span class="koboSpan" id="kobo.537.2">It is worth mentioning that you do </span><a id="_idIndexMarker600"/><span class="koboSpan" id="kobo.538.1">not need an Azure DevOps developer license to have access to this area of the environment. </span><span class="koboSpan" id="kobo.538.2">This enables you, as a software architect, to share this basic and useful tool with as many key users of the solution as you have.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.539.1">The following screenshot shows the bug created by the tool once you have connected it to your Azure DevOps project:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.540.1"><img alt="" role="presentation" src="../Images/B19820_08_35.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.541.1">Figure 8.35: New reported bug in Azure DevOps</span></p>
<p class="normal"><span class="koboSpan" id="kobo.542.1">It is important to have a </span><a id="_idIndexMarker601"/><span class="koboSpan" id="kobo.543.1">tool like this to get</span><a id="_idIndexMarker602"/><span class="koboSpan" id="kobo.544.1"> good feedback on your project. </span><span class="koboSpan" id="kobo.544.2">But, as a software architect, you may have to find the best solutions to hasten the feedback process. </span></p>
<h1 class="heading-1" id="_idParaDest-177"><span class="koboSpan" id="kobo.545.1">Summary</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.546.1">In this chapter, we have learned that DevOps is not only a bunch of techniques and tools used together to deliver software continuously but also a philosophy to enable continuous delivery of value to the end user of the project you are developing.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.547.1">Considering this approach, we saw how CI/CD and continuous feedback are essential to the purpose of DevOps. </span><span class="koboSpan" id="kobo.547.2">We also saw how Azure, Azure DevOps, GitHub, and Microsoft tools help you to achieve your goals.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.548.1">The chapter also covered the importance of understanding when you can enable CI/CD in the software development life cycle, considering the risks and challenges you will take as a software architect once you decide to use it for your solution.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.549.1">Additionally, the chapter introduced some solutions and concepts that can make this process easier, such as multi-stage environments, PR reviews, feature flags, peer reviews, and automated tests. </span><span class="koboSpan" id="kobo.549.2">Understanding these techniques and processes will enable you to guide your project toward safer behavior when it comes to CI/CD in a DevOps scenario.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.550.1">We also described </span><em class="italic"><span class="koboSpan" id="kobo.551.1">service design thinking</span></em><span class="koboSpan" id="kobo.552.1"> principles. </span><span class="koboSpan" id="kobo.552.2">Now, you should be able to analyze all the implications of these approaches for an organization, and you should be able to adapt pre-existing software development processes and hardware/software architectures to take advantage of the opportunities they offer.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.553.1">We also explained the need for, and the techniques involved in, the automation of the software cycle, cloud hardware infrastructure configuration, and application deployment.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.554.1">Once you have implemented the examples shown, you should be able to use Azure Pipelines to automate infrastructure configuration and application deployment. </span><span class="koboSpan" id="kobo.554.2">This chapter elucidated this approach using WWTravelClub as an example, enabling CI/CD inside Azure DevOps, and using Application Insights and the Test and Feedback tool for both technical and functional feedback. </span><span class="koboSpan" id="kobo.554.3">In real life, these tools will enable you to understand the current behavior of the system you are developing more quickly, as you will have continuous feedback on it.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.555.1">In the next chapter, we will see how automation for software testing works.</span></p>
<h1 class="heading-1" id="_idParaDest-178"><span class="koboSpan" id="kobo.556.1">Questions</span></h1>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.557.1">What is DevOps?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.558.1">What is continuous integration (CI)?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.559.1">What is continuous delivery (CD)?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.560.1">Can you have DevOps without CI/CD?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.561.1">What are the risks of enabling CI/CD in a non-mature team?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.562.1">How can a multi-stage environment help CI/CD?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.563.1">How can automated tests help CI/CD?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.564.1">How can PRs help CI/CD?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.565.1">Do PRs only work with CI/CD?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.566.1">What is continuous feedback?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.567.1">What is the difference between the build and release pipelines?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.568.1">What is the main purpose of Application Insights in the DevOps approach?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.569.1">How can the Test and Feedback tool help in the process of DevOps?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.570.1">What is the main goal of service design thinking?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.571.1">What is the preferred Azure tool for the automation of the whole application life cycle?</span></li>
</ol>
<h1 class="heading-1"><span class="koboSpan" id="kobo.572.1">Learn more on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.573.1">To join the Discord community for this book – where you can share feedback, ask questions to the authors, and learn about new releases – follow the QR code below:</span></p>
<p class="normal"><a href="https://packt.link/SoftwareArchitectureCSharp12Dotnet8"><span class="url"><span class="koboSpan" id="kobo.574.1">https://packt.link/SoftwareArchitectureCSharp12Dotnet8</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.575.1"><img alt="" role="presentation" src="../Images/QR_Code175081751210902046.png"/></span></p>
</div>
</body></html>