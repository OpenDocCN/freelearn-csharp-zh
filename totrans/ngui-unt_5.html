<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Building a Scrollable Viewport</h1></div></div></div><p>In this chapter, we will create a new scene and build a functional scrollable viewport in which we can drop objects that will stick to it. We will add interesting features such as scroll bars and keyboard scrolling with arrows.</p><p>This scrollable viewport<a id="id230" class="indexterm"/> will be the base of our game from the previous chapter. So, from here, the user will become the player. The idea is that the player can scroll and<a id="id231" class="indexterm"/> drag barriers on a viewport, which will take a few seconds to build. Enemies will come down from the top of the screen. If an enemy touches a barrier, he or she will be destroyed along with the barrier—but we will deal with enemies in <a class="link" href="ch07.html" title="Chapter 7. Creating a Game with NGUI">Chapter 7</a>, <em>Creating a Game with NGUI.</em>
</p><p>The more barriers there are on the scene, the longer the building process will be for the future barriers— this is the same idea with the barriers' cooldown.</p><div><div><div><div><h1 class="title"><a id="ch05lvl1sec37"/>Preparing the Game scene</h1></div></div></div><p>We will <a id="id232" class="indexterm"/>need to have our <strong>GameManager</strong> and <strong>Notification</strong> GameObjects as prefabs for this chapter.</p><p>From our <strong>Menu</strong> scene, create these two prefabs by dragging them separately in the folder of your choice in the <strong>Project</strong> view.</p><p>Now, let's create a new scene with <em>Ctrl</em> + <em>N</em> and perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Press <em>Ctrl</em> + <em>S</em> to save it, and enter <code class="literal">Game</code> as the scene's name.</li><li class="listitem">In our new scene, delete the <strong>Main Camera</strong> GameObject. We won't need it for this scene.</li><li class="listitem">Drag our <strong>GameManager</strong> prefab from the <strong>Project</strong> view into the <strong>Hierarchy</strong> view.</li><li class="listitem">Open the <strong>UI Tool</strong> wizard by navigating to <strong>NGUI</strong> | <strong>Create a New UI</strong>.</li><li class="listitem">Add a new <strong>Layer</strong> named <code class="literal">Game</code>.</li><li class="listitem">Select this <strong>Game</strong> layer for the <strong>Layer</strong> parameter in our <strong>UI Tool</strong> wizard.</li><li class="listitem">Click on the <strong>Create Your UI</strong> button.</li><li class="listitem">Select our new <strong>Camera</strong> GameObject, and set its <strong>Background Color</strong> to <strong>R</strong>: <code class="literal">0</code>, <strong>G</strong>: <code class="literal">0</code>, <strong>B</strong>: <code class="literal">0</code>, and <strong>A</strong>: <code class="literal">255</code>.<div><div><h3 class="title"><a id="note18"/>Note</h3><p>Make sure your <strong>Color</strong> selector popup is in the <strong>RGBA</strong> values and not <strong>HSVA</strong>. This can be done by using the button next to the <strong>Sliders</strong> option when you click on a <strong>Color</strong> parameter.</p></div></div></li><li class="listitem">Select our <strong>UI Root (2D)</strong> GameObject and then perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Set its <strong>Scaling Style</strong> parameter to <strong>FixedSize</strong>.</li><li class="listitem">Set its <strong>Manual Height</strong> to <code class="literal">1080</code>.</li></ol></div></li></ol></div><p>Ok,<a id="id233" class="indexterm"/> our scene and UI are ready. Your <strong>UI Root (2D)</strong> script should be as shown in the following screenshot:</p><div><img src="img/8667OT_05_01.jpg" alt="Preparing the Game scene"/></div><p>Let's start creating our scrollable viewport.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec38"/>The scrollable viewport</h1></div></div></div><p>We will<a id="id234" class="indexterm"/> start by creating a clipped, draggable background, and then add linked scroll bars as shown in the following screenshot:</p><div><img src="img/8667OT_05_02.jpg" alt="The scrollable viewport"/></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec50"/>Draggable background</h2></div></div></div><p>We <a id="id235" class="indexterm"/>want the player to be able to scroll on both axes. That means we need a background both larger and taller than the screen size. For this game, we will need quite a large environment to force him or her to scroll regularly. Let's create one that is twice the screen's size.</p><p>Perform the following steps to create the environment:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>Panel</strong> GameObject and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">Viewport</code>.</li><li class="listitem">Set its <strong>Clipping</strong> parameter to <strong>Alpha Clip</strong>.</li><li class="listitem">Set its <strong>Clipping</strong> <strong>Size</strong> to <code class="literal">1920</code> x <code class="literal">1080</code>.</li></ol></div></li><li class="listitem">Add a <strong>Draggable Panel</strong> component to it by navigating to <strong>Component</strong> | <strong>NGUI</strong> | <strong>Interaction</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Set its <strong>Drag Effect</strong> parameter to <strong>Momentum</strong>. We don't want the player to scroll out of bounds with the spring effect.</li><li class="listitem">Set its <strong>Momentum Amount</strong> value to <code class="literal">10</code>. Over 10, the background will continue scrolling too much on release.</li><li class="listitem">Set its <strong>Scale</strong> parameter to {<code class="literal">1</code>, <code class="literal">1</code>, <code class="literal">0</code>} to enable X and Y scrolling.</li></ol></div></li><li class="listitem">Attach a <strong>Drag Panel Contents</strong> component to it by navigating to <strong>Component</strong> | <strong>NGUI</strong> | <strong>Interaction</strong>.</li><li class="listitem">Attach a collider to it by navigating to <strong>NGUI</strong> | <strong>Attach a Collider</strong>, and set its <strong>Size</strong> to {<code class="literal">3840</code>, <code class="literal">2160</code>, <code class="literal">1</code>}.</li></ol></div><p>Now that <a id="id236" class="indexterm"/>our <strong>Draggable Panel</strong> is set up, let's add a tiling background as shown in the following screenshot:</p><div><img src="img/8667OT_05_03.jpg" alt="Draggable background"/></div><div><ol class="orderedlist arabic"><li class="listitem">Open the <strong>Widget Tool</strong> wizard by navigating to <strong>NGUI</strong> | <strong>Create a Widget</strong>. Then perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">If the <strong>Atlas</strong> field is set to <strong>None</strong>, drag the <strong>SciFi Atlas</strong> prefab in it by navigating to <strong>Assets</strong> | <strong>NGUI</strong> | <strong>Examples</strong> | <strong>Atlases</strong>.</li><li class="listitem">Select the <strong>Sprite</strong> template.</li><li class="listitem">Select the <strong>Honeycomb</strong> sprite.</li><li class="listitem">With our <strong>Viewport</strong> selected; click on the <strong>Add To</strong> button.</li></ol></div></li><li class="listitem">Select the new <strong>Sprite (Honeycomb)</strong> GameObject and then perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">Background</code>.</li><li class="listitem">Set its <strong>Sprite Type</strong> to <strong>Tiled</strong>.</li><li class="listitem">Set its <strong>Color Tint</strong> value to {<code class="literal">0</code>, <code class="literal">40</code>, <code class="literal">40</code>, <code class="literal">255</code>}.</li><li class="listitem">Set its <strong>Depth</strong> value to <code class="literal">0</code>.</li><li class="listitem">Set its <strong>Dimensions</strong> to <code class="literal">3840</code> x <code class="literal">2160</code>.</li></ol></div></li></ol></div><p>Click on the play button. That's it, we now have a scrollable viewport. You can drag the background by dragging your mouse while clicking.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec51"/>Linking scroll bars</h2></div></div></div><p>Let's <a id="id237" class="indexterm"/>add scroll bars to know where we are on the viewport. They must be on a separate panel rendered over our viewport, so that they won't move with the draggable background. Perform the following steps to add the scroll bars:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>Anchor</strong> GameObject.</li><li class="listitem">Create a new child with <em>Alt</em> + <em>Shift</em> + <em>N</em> and rename it as <code class="literal">UI</code>.</li><li class="listitem">Add a <strong>Panel</strong> component to it by navigating to <strong>Component</strong> | <strong>NGUI</strong> | <strong>UI</strong>, and set its <strong>Depth</strong> to <code class="literal">1</code> so that it can be displayed over the viewport.</li><li class="listitem">Open the <strong>Widget tool</strong> wizard by navigating to <strong>NGUI</strong> | <strong>Create a Widget</strong>. Then perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Select <strong>Scrollbar</strong> for the <strong>Template</strong> field.</li><li class="listitem">Select <strong>Dark</strong> sprite as <strong>Background</strong>.</li><li class="listitem">Select <strong>Highlight</strong> sprite as <strong>Foreground</strong>.</li><li class="listitem">Select <strong>Horizontal</strong> for <strong>Direction</strong>.</li><li class="listitem">With our <strong>UI</strong> GameObject selected, click on the <strong>Add To</strong> button.</li></ol></div></li><li class="listitem">On our <strong>Widget Tool</strong> wizard window, select <strong>Vertical</strong> for <strong>Direction</strong>. With our <strong>UI</strong> GameObject selected, click on the <strong>Add To</strong> button.<p>We have created both our horizontal and vertical scroll bars at the center of the scene as shown in the following screenshot:</p><div><img src="img/8667OT_05_04.jpg" alt="Linking scroll bars"/></div><p>Now, we need to place them correctly and adjust their size to fit the entire screen.</p></li><li class="listitem">Select<a id="id238" class="indexterm"/> the vertical <strong>Scroll Bar</strong> GameObject and rename it as <code class="literal">VerticalScrollbar</code>.</li><li class="listitem">Attach an <strong>Anchor</strong> component to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag our <strong>Viewport</strong> GameObject in the <strong>Container</strong> field.</li><li class="listitem">Set its <strong>Side</strong> parameter to <strong>TopRight</strong>.</li><li class="listitem">Set its <strong>Pixel Offset</strong> to {<code class="literal">-11</code>, <code class="literal">0</code>}.</li></ol></div></li><li class="listitem">Select our <strong>Background</strong> GameObject from <strong>VerticalScrollbar</strong>. Then perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Set its <strong>Color Tint</strong> to {<code class="literal">130</code>, <code class="literal">255</code>, <code class="literal">245</code>, <code class="literal">110</code>}.</li><li class="listitem">Set the <strong>Center</strong> coordinates of <strong>Box Collider</strong> to {<code class="literal">0</code>, <code class="literal">-540</code>, <code class="literal">0</code>}.</li><li class="listitem">Set the <strong>Size</strong> of <strong>Box Collider</strong> to {<code class="literal">22</code>, <code class="literal">1080</code>, <code class="literal">0</code>}.</li></ol></div></li><li class="listitem">Attach a <strong>Stretch</strong> component to it by navigating to <strong>Component</strong> | <strong>NGUI</strong> | <strong>UI</strong>.<div><ol class="orderedlist arabic"><li class="listitem">Set its <strong>Style</strong> parameter to <strong>Vertical</strong>.</li><li class="listitem">Set its <strong>Relative Size</strong> values to {<code class="literal">1</code>, <code class="literal">0.983</code>} in order to leave space for our horizontal scroll bar at the bottom of the screen.</li></ol></div></li><li class="listitem">Select the <strong>Foreground</strong> GameObject from <strong>VerticalScrollbar</strong>, and set its <strong>Color Tint</strong> to {<code class="literal">0</code>, <code class="literal">255</code>, <code class="literal">128</code>, <code class="literal">255</code>}.<p>Our vertical scroll bar is configured. Let's do the same for the horizontal scroll bar.</p></li><li class="listitem">Select the horizontal <strong>Scroll Bar</strong> GameObject, and rename it as <code class="literal">HorizontalScrollbar</code>.</li><li class="listitem">Attach an <strong>Anchor</strong> component to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong>. Then perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag our <strong>Viewport</strong> GameObject into the <strong>Container</strong> field.</li><li class="listitem">Set its <strong>Side</strong> parameter to <strong>BottomLeft</strong>.</li><li class="listitem">Set its <strong>Pixel Offset</strong> to {<code class="literal">0</code>, <code class="literal">11</code>}.</li></ol></div></li><li class="listitem">Select our <strong>Background</strong> GameObject from <strong>HorizontalScrollbar</strong> and perform these steps:<div><ol class="orderedlist arabic"><li class="listitem">Set its <strong>Color Tint</strong> to {<code class="literal">130</code>, <code class="literal">255</code>, <code class="literal">245</code>, <code class="literal">110</code>}.</li><li class="listitem">Set the <strong>Center</strong> coordinates of <strong>Box Collider</strong> to {<code class="literal">960</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Set the <strong>Size</strong> of <strong>Box Collider</strong> to {<code class="literal">1920</code>, <code class="literal">22</code>, <code class="literal">0</code>}.</li></ol></div></li><li class="listitem">Attach a <strong>Stretch</strong> component to it by navigating to <strong>Component</strong> | <strong>NGUI</strong> | <strong>UI</strong>, and set its <strong>Style</strong> parameter to <strong>Horizontal</strong>.</li><li class="listitem">Select the <strong>Foreground</strong> GameObject from <strong>HorizontalScrollbar</strong>, and set its <strong>Color Tint</strong> to {<code class="literal">0</code>, <code class="literal">255</code>, <code class="literal">128</code>, <code class="literal">255</code>}.</li></ol></div><p>Good. Both<a id="id239" class="indexterm"/> our horizontal and vertical scroll bars are set up. Now, we need to assign them to our scrollable viewport by performing the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>Viewport</strong> GameObject.</li><li class="listitem">Drag our <strong>HorizontalScrollbar</strong> GameObject from <strong>UI</strong> to the <strong>Horizontal Scroll Bar</strong> field in <strong>UIDraggable Panel</strong>.</li><li class="listitem">Drag our <strong>VerticalScrollbar</strong> GameObject from <strong>UI</strong> to the <strong>Vertical Scroll Bar</strong> field in <strong>UIDraggable Panel</strong>.</li><li class="listitem">Change the <strong>Show Scroll Bars</strong> parameter to <strong>Always</strong>.</li></ol></div><p>Click on the play button. That's it. Our scroll bars can be used to scroll, and they indicate where we are on the viewport as we scroll. Your hierarchy should be as shown in the following screenshot:</p><div><img src="img/8667OT_05_05.jpg" alt="Linking scroll bars"/></div><p>Now, let's add keyboard scrolling.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec52"/>Keyboard scrolling</h2></div></div></div><p>For this<a id="id240" class="indexterm"/> game, scrolling with the keyboard is important. In order to do so, we will create a custom script that will force our scroll bars to move depending on the pressed key. Select our <strong>Viewport</strong> GameObject, and attach a new <code class="literal">KeyboardScroll.cs</code> script to it. Open this new script, and declare the required variables and the <code class="literal">Awake()</code> method:</p><div><pre class="programlisting">//We need the Scrollbars for keyboard scroll
UIScrollBar hScrollbar;
UIScrollBar vScrollbar;
public float keyboardSensitivity = 1;

void Awake()
{
  //Assign both scrollbars on Awake
  hScrollbar = GetComponent&lt;UIDraggablePanel&gt;().horizontalScrollBar;
  vScrollbar = GetComponent&lt;UIDraggablePanel&gt;().verticalScrollBar;
}</pre></div><p>Okay, we <a id="id241" class="indexterm"/>have both of our scroll bars on <code class="literal">Awake()</code>, and a float value for sensitivity.</p><p>Now, let's check the horizontal and vertical input axes at each frame, and change our scroll bars' values consequently:</p><div><pre class="programlisting">void Update()
{
  //Get keyboard input axes values
  Vector2 keyDelta = Vector2.zero;
  keyDelta.Set(Input.GetAxis("Horizontal"), Input.GetAxis("Vertical"));
  //If no keyboard arrow is pressed, leave
  if(keyDelta == Vector2.zero) return;
  //Make it framerate independent and multiply by sensitivity
  keyDelta *= Time.deltaTime * keyboardSensitivity;
  //Scroll by adjusting scrollbars' values
  hScrollbar.value += keyDelta.x;
  vScrollbar.value -= keyDelta.y;
}</pre></div><p>Save the script and click on the play button. You can now scroll using the keyboard arrows. You may also adjust the <strong>Sensitivity</strong> parameter in the <strong>Inspector</strong> window as you see fit.</p><p>Now, it's time to create draggable barriers that we can drop inside our <strong>Viewport</strong> GameObject.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec39"/>Creating draggable barriers</h1></div></div></div><p>It is time to create our <a id="id242" class="indexterm"/>draggable barriers. The player will be able to drag-and-drop the <strong>BarrierObject</strong> prefab in the <strong>Viewport</strong> GameObject. This <strong>BarrierObject</strong> prefab will look as shown in the following screenshot:</p><div><img src="img/8667OT_05_06.jpg" alt="Creating draggable barriers"/></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec53"/>The BarrierObject prefab</h2></div></div></div><p>First, we need<a id="id243" class="indexterm"/> to create our <strong>BarrierObject</strong> prefab's holder that will contain the draggable object:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>UI</strong> GameObject.</li><li class="listitem">Create a new child with <em>Alt</em> + <em>Shift</em> + <em>N</em> and rename it as <code class="literal">Barrier</code>.</li><li class="listitem">Open the <strong>Widget Tool</strong> wizard by navigating to <strong>NGUI</strong> | <strong>Open</strong> and perform the given steps:<div><ol class="orderedlist arabic"><li class="listitem">Select <strong>Sprite</strong> for the <strong>Template</strong> parameter.</li><li class="listitem">Select <strong>Dark</strong> sprite for the <strong>Sprite</strong> field.</li><li class="listitem">With our <strong>Barrier</strong> GameObject selected, click on the <strong>Add To</strong> button.</li></ol></div></li><li class="listitem">Select our new barrier's <strong>Sprite (Dark)</strong> GameObject and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">Background</code>.</li><li class="listitem">Set its <strong>Sprite Type</strong> to <strong>Sliced</strong>.</li><li class="listitem">Set its <strong>Color Tint</strong> to {<code class="literal">0</code>, <code class="literal">250</code>, <code class="literal">250</code>, <code class="literal">170</code>}.</li><li class="listitem">Set its <strong>Depth</strong> value to <code class="literal">0</code>.</li><li class="listitem">Set its <strong>Dimensions</strong> to <code class="literal">200</code> x <code class="literal">200</code>.</li></ol></div></li><li class="listitem">Select our <strong>Barrier</strong> GameObject.</li><li class="listitem">Attach a collider to it by navigating to <strong>NGUI</strong> | <strong>Attach a Collider</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Set its <strong>Center</strong> coordinates in <strong>Box Collider</strong> to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Set the <strong>Size</strong> parameter of <strong>Box Collider</strong> to {<code class="literal">200</code>, <code class="literal">200</code>, <code class="literal">1</code>}.</li></ol></div></li><li class="listitem">Attach <strong>Anchor</strong> to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong>.<div><ol class="orderedlist arabic"><li class="listitem">Drag our <strong>Viewport</strong> GameObject in its <strong>Container</strong> field.</li><li class="listitem">Set its <strong>Side</strong> parameter to <strong>TopLeft</strong>.</li><li class="listitem">Set its <strong>Pixel Offset</strong> to {<code class="literal">100</code>, <code class="literal">-100</code>}.</li></ol></div></li></ol></div><p>Ok, we have our <strong>BarrierObject</strong> holder's background at the top left-hand corner as shown in the following screenshot:</p><div><img src="img/8667OT_05_07.jpg" alt="The BarrierObject prefab"/></div><p>Let's create<a id="id244" class="indexterm"/> the actual <strong>BarrierObject</strong> prefab, which will be a custom button:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>Barrier</strong> GameObject.</li><li class="listitem">Open the <strong>Widget tool</strong> wizard by navigating to <strong>NGUI</strong> | <strong>Create a Widget</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag the <strong>SciFi Font – Normal</strong> prefab into the <strong>Widget Tool</strong> wizard's <strong>Font</strong> field by navigating to <strong>Assets</strong> | <strong>NGUI</strong> | <strong>Examples</strong> | <strong>Atlases</strong> | <strong>SciFi</strong>.</li><li class="listitem">Select <strong>Button</strong> for the <strong>Template</strong> field.</li><li class="listitem">Select the <strong>Highlight</strong> sprite for the <strong>Background</strong> field.</li><li class="listitem">With our <strong>Barrier</strong> GameObject selected, click on the <strong>Add To</strong> button.</li></ol></div></li><li class="listitem">Select our new <strong>Button</strong> GameObject from <strong>Barrier</strong>.<div><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">BarrierObject</code>.</li><li class="listitem">Set its <strong>Center</strong> coordinates <strong>Box Collider</strong> to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Set <strong>Size</strong> of <strong>Box Collider</strong> to {<code class="literal">160</code>, <code class="literal">160</code>, <code class="literal">0</code>}.</li></ol></div></li><li class="listitem">Drag the <strong>Background</strong> GameObject from <strong>BarrierObject</strong> into the <strong>Target</strong> field in <strong>UIButton</strong>. Then perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Set its <strong>Normal Color</strong> to {<code class="literal">125</code>, <code class="literal">255</code>, <code class="literal">155</code>, <code class="literal">130</code>}.</li><li class="listitem">Set its <strong>Hover Color</strong> to {<code class="literal">100</code>, <code class="literal">255</code>, <code class="literal">60</code>, <code class="literal">255</code>}.</li><li class="listitem">Set its <strong>Pressed Color</strong> to {<code class="literal">20</code>, <code class="literal">255</code>, <code class="literal">0</code>, <code class="literal">160</code>}.</li><li class="listitem">Set its <strong>Disabled Color</strong> to {<code class="literal">115</code>, <code class="literal">115</code>, <code class="literal">155</code>, <code class="literal">255</code>}.</li></ol></div></li><li class="listitem">Select the <strong>Background</strong> GameObject from <strong>BarrierObject</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Set its <strong>Depth</strong> value to <code class="literal">1</code>.</li><li class="listitem">Set its <strong>Dimensions</strong> to <code class="literal">160</code> x <code class="literal">160</code>.</li></ol></div></li><li class="listitem">Select the <strong>Label</strong> GameObject from <strong>BarrierObject</strong> and then perform the given steps:<div><ol class="orderedlist arabic"><li class="listitem">Set its text to <code class="literal">[99FF99]Barrier</code>.</li><li class="listitem">Set its <strong>Depth</strong> to <code class="literal">2</code>.</li></ol></div></li></ol></div><p>Ok. We<a id="id245" class="indexterm"/> now have our <strong>BarrierObject</strong> in the <strong>Barrier</strong> holder. Let's make it draggable by performing the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>BarrierObject</strong> GameObject.</li><li class="listitem">Attach a <strong>Drag Object</strong> component to it by navigating to <strong>Component</strong> | <strong>NGUI</strong> | <strong>Interaction</strong>.<div><ol class="orderedlist arabic"><li class="listitem">Drag our <strong>BarrierObject</strong> GameObject in its <strong>Target</strong> field.</li><li class="listitem">Set its <strong>Scale</strong> parameter to {<code class="literal">1</code>, <code class="literal">1</code>, <code class="literal">0</code>} to avoid Z scrolling.</li><li class="listitem">Set its <strong>Drag Effect</strong> parameter to <strong>None</strong>. We want it to be precise.</li></ol></div></li><li class="listitem">Create and attach a new <code class="literal">BarrierObjectController.cs</code> C# script to it.</li></ol></div><p>Click on the play button. The <strong>BarrierObject</strong> prefab is now draggable. Now, it is time to handle the drop on the <strong>Viewport</strong> GameObject.</p><p>Before we continue, drag our <strong>BarrierObject</strong> in a folder of your choice in the <strong>Project</strong> view to make it a prefab.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec54"/>Dropping a barrier on Viewport</h2></div></div></div><p>In order to drop<a id="id246" class="indexterm"/> a barrier inside the <strong>Viewport</strong> GameObject, we need to catch the <strong>Viewport</strong> GameObject's <code class="literal">OnDrop()</code> event and check what was dropped:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>Viewport</strong> GameObject.</li><li class="listitem">Create and attach a new <code class="literal">ViewportHolder.cs</code> C# script to it.</li><li class="listitem">Open this new <code class="literal">ViewportHolder.cs</code> script.</li></ol></div><p>In this script, we can add a new <code class="literal">OnDrop()</code> method that will be called when an object is dropped on it:</p><div><pre class="programlisting">void OnDrop(GameObject droppedObj)
{
  //Get the dropped object's BarrierObjectController
  BarrierObjectController barrierObj = droppedObj.GetComponent&lt;BarrierObjectController&gt;();

  //If it actually has one, destroy the droppedObj
  if(barrierObj != null){
    Destroy(droppedObj);
  }
}</pre></div><p>Save the<a id="id247" class="indexterm"/> script and click on the play button. Surprisingly, when you drop the <strong>BarrierObject</strong> on the <strong>Viewport</strong> GameObject, nothing happens!</p><p>That's because, like in <a class="link" href="ch03.html" title="Chapter 3. Enhancing your UI">Chapter 3</a>, <em>Enhancing your UI</em>, the Collider of <strong>BarrierObject</strong> is enabled when the <code class="literal">OnPress(false)</code> event occurs. This obstructs the collision detection of <strong>UICamera</strong>.</p><p>We just have to disable the collider while dragging, and re-enable it when dropping it. Let's also make it reposition itself if it isn't dropped on the <strong>Viewport</strong> GameObject. Open our <code class="literal">BarrierObjectController.cs</code> script, and add following <code class="literal">OnPress()</code> method to do so:</p><div><pre class="programlisting">void OnPress(bool pressed)
{
  //Invert the Collider's state
  collider.enabled = !pressed;

  //If it has just been dropped
  if(!pressed)
  {
    //Get the target's collider
    Collider col = UICamera.lastHit.collider;
    //If the target has no collider or is not the viewport
    if(col == null || col.GetComponent&lt;ViewportHolder&gt;() == null)
    //Reset its localPosition to {0,0,0}
    transform.localPosition = Vector3.zero;
  }
}</pre></div><p>Save the script and click on the play button. This time, the collider is disabled when the <strong>BarrierObject</strong> prefab is dropped. So, it is indeed dropped on the collider of <strong>Viewport</strong> and destroyed instantly.</p><p>If it is dropped somewhere else (out of screen or on the barrier's container), it is automatically replaced at the center of the barrier's container. Let's make this <strong>BarrierObject</strong> a prefab by dragging it in the folder of your choice inside the <strong>Project</strong> view.</p><p>We can now create an <strong>ActiveBarrier</strong> prefab that will be instantiated on the <strong>Viewport</strong> GameObject.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec40"/>Creating an ActiveBarrier prefab</h1></div></div></div><p>When <a id="id248" class="indexterm"/>a <strong>BarrierObject</strong> is dropped on the <strong>Viewport</strong> GameObject, we want to instantiate an <strong>ActiveBarrier</strong> prefab that will take a few seconds to build, using a slider as status indicator as shown in the following screenshot:</p><div><img src="img/8667OT_05_08.jpg" alt="Creating an ActiveBarrier prefab"/></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec55"/>The ActiveBarrier prefab</h2></div></div></div><p>Let's <a id="id249" class="indexterm"/>create the <strong>ActiveBarrier</strong> prefab by performing the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>Viewport</strong> GameObject.</li><li class="listitem">Create a new child with <em>Alt</em> + <em>Shift</em> + <em>N</em>.</li><li class="listitem">Select this new child and rename it as <code class="literal">ActiveBarrier</code>.</li><li class="listitem">Open the <strong>Widget Tool</strong> wizard by navigating to <strong>NGUI</strong> | <strong>Create a Widget</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Select <strong>Progress Bar</strong> for the <strong>Template</strong> field.</li><li class="listitem">Set <strong>Dark</strong> sprite as <strong>Empty</strong>.</li><li class="listitem">Set the <strong>Highlight</strong> sprite as <strong>Full</strong>.</li><li class="listitem">With our <strong>ActiveBarrier</strong> GameObject selected, click on the <strong>Add To</strong> button.</li></ol></div><p>A <strong>Progress Bar</strong> has just been created as child of the <strong>ActiveBarrier</strong> GameObject as shown in the following screenshot:</p></li></ol></div><div><img src="img/8667OT_05_09.jpg" alt="The ActiveBarrier prefab"/></div><p>It doesn't look like anything. Let's configure it to look like an <strong>ActiveBarrier</strong> prefab by performing the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select <a id="id250" class="indexterm"/>our new <strong>Background</strong> GameObject from <strong>Progress Bar</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Uncheck its <strong>Fill Center</strong> boolean to only keep edges.</li><li class="listitem">Set its <strong>Color Tint</strong> to {<code class="literal">100</code>, <code class="literal">200</code>, <code class="literal">100</code>, <code class="literal">255</code>}.</li><li class="listitem">Set its <strong>Depth</strong> to <code class="literal">1</code> so that it can be rendered over the <strong>Viewport</strong> background.</li><li class="listitem">Set its <strong>Dimensions</strong> to <code class="literal">160</code> x <code class="literal">160</code>.</li></ol></div></li><li class="listitem">Select our <strong>Foreground</strong> GameObject from <strong>Progress Bar</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Set its <strong>Color Tint</strong> to {<code class="literal">75</code>, <code class="literal">190</code>, <code class="literal">95</code>, <code class="literal">255</code>}.</li><li class="listitem">Set its <strong>Depth</strong> value to <code class="literal">2</code>.</li><li class="listitem">Set its <strong>Dimensions</strong> to <code class="literal">160</code> x <code class="literal">160</code>.</li></ol></div></li><li class="listitem"> Select our <strong>Progress Bar</strong> from <strong>ActiveBarrier</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">Slider</code>.</li><li class="listitem">Set its <strong>Transform Position</strong> to {<code class="literal">-80</code>, <code class="literal">0</code>, <code class="literal">0</code>} to center it.</li><li class="listitem">Set the <strong>UISlider</strong> value to <code class="literal">0</code> to make sure it's empty at start.</li></ol></div></li><li class="listitem">Select our <strong>ActiveBarrier</strong> GameObject.</li><li class="listitem">Attach a collider to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong>, and set its <strong>Size</strong> to {<code class="literal">160</code>, <code class="literal">160</code>, <code class="literal">1</code>}.</li></ol></div><p>The slider of <strong>ActiveBarrier</strong> GameObject is ready. If you click on the play button and change the <strong>Slider</strong> value in the <strong>Inspector</strong> view during runtime, you will see the <strong>ActiveBarrier</strong> prefab building itself.</p><p>Let's add a label that will show the status of <strong>ActiveBarrier</strong>: either <strong>Building</strong> or <strong>Built</strong>.</p><div><ol class="orderedlist arabic"><li class="listitem">Duplicate our <strong>Label</strong> GameObject in <strong>BarrierObject</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag it inside our <strong>ActiveBarrier</strong> GameObject.</li><li class="listitem">Reset its <strong>Transform Position</strong> to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Set its <strong>Depth</strong> to <code class="literal">3</code>.</li><li class="listitem">Add a Localize component to it by navigating to <strong>Component</strong> | <strong>NGUI</strong> | <strong>UI</strong>.</li><li class="listitem">Set the key of <strong>UILocalize</strong> to <code class="literal">BuildingBarrier</code>.</li></ol></div></li><li class="listitem">Drag our <strong>ActiveBarrier</strong> in the folder of your choice inside the <strong>Project</strong> view to make it a prefab.</li><li class="listitem">Delete the <strong>ActiveBarrier</strong> instance from the scene.</li></ol></div><p>Ok, our<a id="id251" class="indexterm"/> <strong>ActiveBarrier</strong> prefab is ready. Now, add the following localization strings to <code class="literal">English.txt</code>:</p><div><pre class="programlisting">//Game
Barrier = [99FF99]Barrier
BuildingBarrier = [FF6666]Building\nBarrier...
Wait = Wait</pre></div><p>Also, add the following localization strings to <code class="literal">French.txt</code>:</p><div><pre class="programlisting">//Game
Barrier = [99FF99]Barrière
BuildingBarrier = [FF6666]Construction\nBarrière...
Wait = Attendez</pre></div><p>Now, everything is set for our <strong>ActiveBarrier</strong> prefab.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec56"/>Instantiating the ActiveBarrier prefab</h2></div></div></div><p>Now <a id="id252" class="indexterm"/>that we have our prefab, we need to instantiate it when a <strong>BarrierObject</strong> prefab is dropped inside the <strong>Viewport</strong> GameObject.</p><p>Open our <code class="literal">ViewportHolder.cs</code> script and declare our necessary variables:</p><div><pre class="programlisting">//We need our two barriers Prefabs
public Object barrierObjectPrefab;
public Object activeBarrierPrefab;

//We need the BarrierObject container
public GameObject barrierContainer;</pre></div><p>Save the script. Let's go back to the scene and assign these variables in the <strong>Inspector</strong> view:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Viewport</strong> GameObject.</li><li class="listitem">Drag the <strong>BarrierObject</strong> prefab from the <strong>Project</strong> view in the <strong>BarrierObject</strong> prefab field of <strong>Viewport Holder</strong>.</li><li class="listitem">Drag the <strong>ActiveBarrier</strong> prefab from the <strong>Project</strong> view in the <strong>ActiveBarrier</strong> prefab field <strong>Viewport Holder</strong>.</li><li class="listitem">Drag the <strong>Barrier</strong> GameObject in <strong>UI</strong> from the <strong>Hierarchy</strong> view to the <strong>Barrier Container</strong> field in <strong>Viewport Holder</strong>.</li></ol></div><p>The necessary variables are assigned. Go back to our <code class="literal">ViewportHolder.cs</code> script, and add the following two lines to call the appropriate methods, after <code class="literal">Destroy(droppedObj)</code>:</p><div><pre class="programlisting">RecreateBarrierObject();
CreateActiveBarrier(droppedObj.transform);</pre></div><p>Now, we <a id="id253" class="indexterm"/>can add these two methods that will recreate our <strong>BarrierObject</strong> prefab. Also, we can add an <strong>ActiveBarrier</strong> prefab to the <strong>Viewport</strong> GameObject:</p><div><pre class="programlisting">void RecreateBarrierObject()
{
  //Add a BarrierObject to the container
  Transform newBarrierTrans = NGUITools.AddChild(barrierContainer, barrierObjectPrefab as GameObject).transform;
  //Reset its localPosition to {0,0,0}
  newBarrierTrans.localPosition = Vector3.zero;
}

void CreateActiveBarrier(Transform barrierObjectTrans)
{
  //Add an ActiveBarrier to the Viewport
  Transform newActiveBarrierTrans = NGUITools.AddChild(gameObject, activeBarrierPrefab as GameObject).transform;
  //Set position to the droppedObject's position
  newActiveBarrierTrans.position = barrierObjectTrans.position;
}</pre></div><p>Click on the play button. When you drag the <strong>BarrierObject</strong> prefab onto the <strong>Viewport</strong> GameObject, it creates our <strong>ActiveBarrier</strong> prefab; and it recreates a <strong>BarrierObject</strong> prefab to be able to drag another one.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec57"/>Barrier's building process</h2></div></div></div><p>Right <a id="id254" class="indexterm"/>now, our dropped <strong>ActiveBarrier</strong> instances stay empty and never build. Let's make them fill themselves at a speed depending on the number of barriers in the scene:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>ActiveBarrier</strong> prefab in the <strong>Project</strong> view.</li><li class="listitem">Create and add an <code class="literal">ActiveBarrierController.cs</code> script to it.</li></ol></div><p>Open this new <code class="literal">ActiveBarrierController.cs</code> script, and add these necessary variables and the <code class="literal">Awake()</code> method to initialize them:</p><div><pre class="programlisting">//We will need the Slider and the Label's UILocalize
private UISlider slider;
private UILocalize loc;

void Awake()
{
  //Get necessary components at Awake()
  slider = GetComponentInChildren&lt;UISlider&gt;();
  loc = GetComponentInChildren&lt;UILocalize&gt;();
}</pre></div><p>Now that we have our necessary variables initialized, let's add a coroutine that will increase the <strong>UISlider</strong> value over time, at a rate depending on a given <code class="literal">buildTime</code>:</p><div><pre class="programlisting">public IEnumerator Build(float buildTime)
{
    while(slider.value &lt; 1) {
    slider.value += (Time.deltaTime / buildTime);
    yield return null;
  }
  //When slider value is &gt; 1
  BuildFinished();
}</pre></div><p>Ok. Let's add <a id="id255" class="indexterm"/>the <code class="literal">BuildFinished()</code> method that will set the <strong>Slider</strong> value to <code class="literal">1</code> (in case this value is higher), and change the <strong>UILocalize</strong> key:</p><div><pre class="programlisting">private void BuildFinished()
{
  //Make sure it's at 1
  slider.value = 1;
  //Set the key to "normal" barrier and update Localization
  loc.key = "Barrier";
  loc.Localize();
}</pre></div><p>Good. We just need to edit the <code class="literal">ViewportHolder.cs</code> script to add a <code class="literal">barrierCount</code> variable, and start the new <code class="literal">Build()</code> coroutine from <strong>ActiveBarrier</strong>.</p><p>Open the <code class="literal">ViewportHolder.cs</code> script and declare a new <code class="literal">int</code> after our <code class="literal">barrierContainer</code>:</p><div><pre class="programlisting">public int barrierCount = 0;</pre></div><p>Now, let's add these two simple lines of code to update the <code class="literal">barrierCount</code> variable and start the <code class="literal">Build()</code> coroutine on our new <strong>ActiveBarrier</strong> prefab:</p><div><pre class="programlisting">//Update barrierCount
barrierCount++;
//Start the Build Coroutine with the correct buildTime
StartCoroutine(newActiveBarrierTrans.GetComponent&lt;ActiveBarrierController&gt;().Build(barrierCount *2));</pre></div><p>Click on the play button. Now, our <strong>ActiveBarrier</strong> prefab builds itself depending on the number of <strong>ActiveBarriers</strong> on the scene!</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec58"/>Forwarding events to viewport</h2></div></div></div><p>You may<a id="id256" class="indexterm"/> have noticed that you cannot scroll if you click on an <strong>ActiveBarrier</strong> prefab. That's because it catches the events instead of our viewport.</p><p>Let's simply forward its events to the viewport:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>ActiveBarrier</strong> prefab in the <strong>Project</strong> view.</li><li class="listitem">Attach a <strong>Forward Events</strong> component to it by navigating to <strong>Component</strong> | <strong>NGUI</strong> | <strong>Interaction</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Check its <strong>On Press</strong> Boolean.</li><li class="listitem">Check its <strong>On Drag</strong> Boolean.</li></ol></div></li><li class="listitem">Open the <code class="literal">ActiveBarrierController.cs</code> script that is attached to it.</li></ol></div><p>We need to assign the target variable of the <strong>UIForward Event</strong> component when the <strong>ActiveBarrier</strong> prefab is created. To do so, add a new <code class="literal">Start()</code> method with the following:</p><div><pre class="programlisting">void Start()
{
  //Set the UIForwardEvents' target to the viewport
  GetComponent&lt;UIForwardEvents&gt;().target = transform.parent.gameObject;
}</pre></div><p>We can now scroll no matter what. We are missing something: a cooldown on the BarrierObjects that also depends on the number of ActiveBarriers.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec41"/>BarrierObject cooldown</h1></div></div></div><p>We will <a id="id257" class="indexterm"/>implement the cooldown system that will deactivate the <strong>BarrierObject</strong> button as shown in the following screenshot:</p><div><img src="img/8667OT_05_10.jpg" alt="BarrierObject cooldown"/></div><p>Then, we will make the barrier's apparition smoother by tweening its scale.</p><div><div><div><div><h2 class="title"><a id="ch05lvl2sec59"/>Cooldown implementation</h2></div></div></div><p>In order to implement<a id="id258" class="indexterm"/> the required cooldown, we need to open the <code class="literal">BarrierObjectController.cs</code> script and add the following  two necessary variables with an initialization on <code class="literal">Awake()</code>:</p><div><pre class="programlisting">//We will need the Button and the Label
private UIButton button;
private UILabel label;

void Awake()
{
  //Get necessary components at Awake
  button = GetComponentInChildren&lt;UIButton&gt;();
  label = GetComponentInChildren&lt;UILabel&gt;();
}</pre></div><p>Now that we have the button and label, we can add a <code class="literal">Cooldown()</code> coroutine that will deactivate the button and update the label to show the remaining time to the player:</p><div><pre class="programlisting">public IEnumerator Cooldown(int cooldown)
{
  //Deactivate the Barrier button and update Color to Disable
  button.isEnabled = false;
  button.UpdateColor(false, true);

  while(cooldown &gt; 0)
  {
    //Update Label with localized text each second
    label.text = Localization.instance.Get("Wait") + " " + cooldown.ToString() + "s";
    cooldown -= 1;
    //Wait for a second, then return to start of While
    yield return new WaitForSeconds(1);
  }
  //If cooldown &lt;= 0
  CooldownFinished();
}</pre></div><p>The previous coroutine updates the label and decreases the cooldown. We can now add the <code class="literal">CooldownFinished()</code> method that will reactivate the button and reset the label:</p><div><pre class="programlisting">void CooldownFinished()
{
  //Reset the Label's Text to "normal" Barrier
  label.text = Localization.instance.Get("Barrier");
  //Reactivate the Barrier button and update Color to Normal
  button.isEnabled = true;
  button.UpdateColor(true, true);
}</pre></div><p>Great, <a id="id259" class="indexterm"/>everything is ready for our cooldown. We just need to start the <code class="literal">Cooldown()</code> coroutine when a new <strong>BarrierObject</strong> prefab is created.</p><p>In order to do this, let's go back to our <code class="literal">ViewportHolder.cs</code> script and add the following line at the very end of the <code class="literal">RecreateBarrierObject()</code> method:</p><div><pre class="programlisting">//Start the new BarrierObject's Cooldown Coroutine
StartCoroutine(newBarrierTrans.GetComponent&lt;BarrierObjectController&gt;().Cooldown((barrierCount +1) *3));</pre></div><p>Perfect. Here, we needed to pass <code class="literal">barrierCount +1</code> as argument because at this stage it is not yet updated (it is incremented in the <code class="literal">CreateActiveBarrier()</code> method).</p><p>Click on the play button. When you drop a <strong>BarrierObject</strong> prefab on the <strong>Viewport</strong> GameObject, you will only be able to drop another one when the cooldown is finished. The more barriers you have, the longer the cooldown.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec60"/>BarrierObject smooth apparition</h2></div></div></div><p>Let's add a TweenScale<a id="id260" class="indexterm"/> to make the barrier's availability more obvious to the player. Go back to our <code class="literal">BarrierObjectController.cs</code> script and add the following two lines at the very end of the <code class="literal">CooldownFinished()</code> method:</p><div><pre class="programlisting">//Set its scale to {0,0,0}
transform.localScale = Vector3.zero;
//Tween it back to make it appear smoothly
TweenScale.Begin(gameObject, 0.3f, new Vector3(1,1,1));</pre></div><p>That's better. Now, the animated apparition of <strong>BarrierObject</strong> attracts the player's eye. But, hey, we created a notification in the previous chapter. Let's reuse it to make it even more obvious!</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec42"/>The barrier availability tool tip</h1></div></div></div><p>Let's set up <a id="id261" class="indexterm"/>notifications in the game using our previous work:</p><div><ol class="orderedlist arabic"><li class="listitem">Drag our <strong>Notification</strong> prefab inside our <strong>UI</strong> GameObject.</li><li class="listitem">Select the new <strong>Notification</strong> GameObject in the <strong>Hierarchy</strong> view, and then perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Change its <strong>Layer</strong> to <strong>Game</strong> (in the top right-hand corner of the <strong>Inspector</strong> view).</li><li class="listitem">A pop up will appear. Click on <strong>Yes</strong>, and change children.</li><li class="listitem">Open the <code class="literal">NotificationManager.cs</code> script that is attached to it.</li></ol></div></li></ol></div><p>First, we need to add a new notification type. This is done by adding a third line to our type <code class="literal">enum</code>:</p><div><pre class="programlisting">BarrierAvailable</pre></div><p>Now, add the following localization string to <code class="literal">English.txt</code>:</p><div><pre class="programlisting">BarrierAvailableNotification = New [99FF99]Barrier[FFFFFF] Available!</pre></div><p>Also, add the <a id="id262" class="indexterm"/>following localization string to <code class="literal">French.txt</code>:</p><div><pre class="programlisting">BarrierAvailableNotification = Nouvelle [99FF99]Barrière[FFFFFF] Disponible !</pre></div><p>Everything is set. Now, go back to our <code class="literal">BarrierObjectController.cs</code> script, and add the following line of code at the very end of the <code class="literal">CooldownFinished()</code> method:</p><div><pre class="programlisting">//Show Notification to inform the player
NotificationManager.instance.Show(NotificationManager.Type.BarrierAvailable, 1.5f);</pre></div><p>Click on the play button. A localized notification will appear as soon as a new barrier is available. This way, we are sure that the player will not miss it.</p></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec43"/>Summary</h1></div></div></div><p>In this chapter, we learned how to create a scrollable viewport using a scrollable background. Also, we linked the mouse drag, scroll bars, and keyboard arrows to it.</p><p>We used the <strong>UIDrag Object</strong> component to create our drag-and-drop system, allowing us to drag objects inside the scrollable viewport.</p><p>Coroutines helped us to create the barriers' building process and cooldown system. The <strong>UIForward Events</strong> component was used to forward events to the viewport. Finally, we reused our <strong>Notification</strong> prefab inside our new <strong>Game</strong> scene.</p><p>We now have the basic elements for <a class="link" href="ch07.html" title="Chapter 7. Creating a Game with NGUI">Chapter 7</a>, <em>Creating a Game with NGUI</em>. Now, it is time to discover how to add sprites and fonts to NGUI with <a class="link" href="ch06.html" title="Chapter 6. Atlas and Font Customization">Chapter 6</a>, <em>Atlas and Font Customization</em>. We will then use our own assets to create a game!</p></div></body></html>