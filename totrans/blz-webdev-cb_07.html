<html><head></head><body>
  <div id="_idContainer031">
   <h1 class="chapter-number" id="_idParaDest-236">
    <a id="_idTextAnchor236">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     7
    </span>
   </h1>
   <h1 id="_idParaDest-237">
    <a id="_idTextAnchor237">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Validating User Input Forms
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     In this chapter, we explore the essential aspect of ensuring the accuracy and integrity of data submitted through forms in Blazor applications.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     With effective validation, you’ll prevent erroneous data entry and enhance user interactions and application security.
    </span>
    <span class="koboSpan" id="kobo.3.3">
     Throughout this chapter, we will explore a comprehensive range of techniques and strategies you can employ while validating
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.4.1">
      user inputs.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.5.1">
     We begin with the fundamental process of adding validation to a form, setting the stage for more complex validation scenarios.
    </span>
    <span class="koboSpan" id="kobo.5.2">
     You will learn how Blazor handles basic validation scenarios and how you can extend them to meet specific domain needs.
    </span>
    <span class="koboSpan" id="kobo.5.3">
     After that, we explore the use of data annotations for form validation.
    </span>
    <span class="koboSpan" id="kobo.5.4">
     You’ll uncover how to simplify form validation using built-in annotations and how to leverage them to enforce rules and constraints directly on data models, reducing boilerplate code.
    </span>
    <span class="koboSpan" id="kobo.5.5">
     Right after, you will see how to implement custom validation attributes, which provide the flexibility to address unique business requirements.
    </span>
    <span class="koboSpan" id="kobo.5.6">
     Then, we address the validation of complex data models, ensuring that data integrity is maintained even in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.6.1">
      intricate scenarios.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.7.1">
     At the end of the chapter, we focus on improving the user experience of your forms.
    </span>
    <span class="koboSpan" id="kobo.7.2">
     We cover the styling of validation messages and modernizing validation summaries.
    </span>
    <span class="koboSpan" id="kobo.7.3">
     Good styling makes validation messages clear and more aligned with the application’s design, while toasts offer a dynamic way to alert users about issues without disrupting their workflow.
    </span>
    <span class="koboSpan" id="kobo.7.4">
     Lastly, we explore how to dynamically control form actions based on validation results, ensuring that users can only submit forms in a valid state, thereby avoiding unnecessary submissions and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.8.1">
      server load.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.9.1">
     By the end of this chapter, you’ll know how to implement effective validation strategies in your Blazor applications, ensuring correct user inputs and enhancing the usability and reliability of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.10.1">
      your application.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.11.1">
     Here’s the list of recipes we’re going to cover in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.12.1">
      this chapter:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.13.1">
      Adding validation to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.14.1">
       a form
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.15.1">
      Leveraging data annotations for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.16.1">
       form validation
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.17.1">
      Implementing custom
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.18.1">
       validation attributes
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.19.1">
      Validating complex
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.20.1">
       data models
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.21.1">
      Styling
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.22.1">
       validation messages
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.23.1">
      Displaying a toast when
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.24.1">
       validation fails
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.25.1">
      Enabling the submit option based on the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.26.1">
       form state
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-238">
    <a id="_idTextAnchor238">
    </a>
    <span class="koboSpan" id="kobo.27.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.28.1">
     In this chapter, recipes build on each other, so you can follow the entire journey within the same directory.
    </span>
    <span class="koboSpan" id="kobo.28.2">
     However, for clarity and easier initial setup, at the beginning of each recipe, you will find instructions on what working directory to create and which files are required to execute the task at hand.
    </span>
    <span class="koboSpan" id="kobo.28.3">
     But before diving in, make sure you have all the basic tools for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.29.1">
      Blazor development:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.30.1">
      A modern IDE (that supports
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.31.1">
       Blazor development)
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.32.1">
      A modern web browser (that
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.33.1">
       supports WebAssembly)
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.34.1">
      Browser dev tools (which can be a part of the modern
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.35.1">
       browser already)
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.36.1">
      A Blazor project (where you’ll write
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.37.1">
       your code)
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.38.1">
     In the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.39.1">
      Validating complex data models
     </span>
    </em>
    <span class="koboSpan" id="kobo.40.1">
     recipe, we utilize the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.41.1">
      Microsoft.AspNetCore.Components.DataAnnotations.Validation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.42.1">
     NuGet package, which is not pre-installed by default, so you might as well add it to your project now.
    </span>
    <span class="koboSpan" id="kobo.42.2">
     Keep in mind that the validation package is still in preview, so you’ll have to include prerelease packages in the NuGet feed in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.43.1">
      your IDE.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.44.1">
     You can find all the code written in this chapter and code samples on GitHub at:
    </span>
   </p>
   <p>
    <a href="https://github.com/PacktPublishing/Blazor-Web-Development-Cookbook/tree/main/BlazorCookbook.App.Client/Chapters/Chapter07">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.45.1">
       https://github.com/PacktPublishing/Blazor-Web-Development-Cookbook/tree/main/BlazorCookbook.App.Client/Chapters/Chapter07
      </span>
     </span>
    </a>
   </p>
   <h1 id="_idParaDest-239">
    <a id="_idTextAnchor239">
    </a>
    <span class="koboSpan" id="kobo.46.1">
     Adding validation to a form
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.47.1">
     In this recipe, we’ll
    </span>
    <a id="_idIndexMarker320">
    </a>
    <span class="koboSpan" id="kobo.48.1">
     explore the basics of user input validation in Blazor.
    </span>
    <span class="koboSpan" id="kobo.48.2">
     Validation is
    </span>
    <a id="_idIndexMarker321">
    </a>
    <span class="koboSpan" id="kobo.49.1">
     critical for preventing errors and security vulnerabilities, maintaining data consistency, and enhancing the user experience.
    </span>
    <span class="koboSpan" id="kobo.49.2">
     The Blazor community has created various NuGet packages for handling input validation, offering a range of features and configurations.
    </span>
    <span class="koboSpan" id="kobo.49.3">
     However, Blazor provides extensive built-in support for validating forms and displaying validation results in a user-friendly manner.
    </span>
    <span class="koboSpan" id="kobo.49.4">
     The native functionalities are lightweight and integrate directly with Blazor’s data binding and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.50.1">
      UI features.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.51.1">
     Let’s implement a small event creation form, where a user must provide the event name.
    </span>
    <span class="koboSpan" id="kobo.51.2">
     We will also display a validation message when the event name
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.52.1">
      is empty.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-240">
    <a id="_idTextAnchor240">
    </a>
    <span class="koboSpan" id="kobo.53.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.54.1">
     Before we add the first, basic validation to a form, create a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.55.1">
      Chapter07
     </span>
    </strong>
    <span class="koboSpan" id="kobo.56.1">
     /
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.57.1">
      Recipe01
     </span>
    </strong>
    <span class="koboSpan" id="kobo.58.1">
     directory – this will be your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.59.1">
      working directory.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-241">
    <a id="_idTextAnchor241">
    </a>
    <span class="koboSpan" id="kobo.60.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.61.1">
     Follow these steps to add a simple validation to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.62.1">
      a form:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.63.1">
      Create an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.64.1">
       Event
      </span>
     </strong>
     <span class="koboSpan" id="kobo.65.1">
      class with a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.66.1">
       Name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.67.1">
      property – we will use it as a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.68.1">
       form model:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.69.1">
public class Event
{
    public string Name { get; set; }
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.70.1">
      Create a routable
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.71.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.72.1">
      component that implements the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.73.1">
       IDisposable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.74.1">
      interface.
     </span>
     <span class="koboSpan" id="kobo.74.2">
      You
     </span>
     <a id="_idIndexMarker322">
     </a>
     <span class="koboSpan" id="kobo.75.1">
      will
     </span>
     <a id="_idIndexMarker323">
     </a>
     <span class="koboSpan" id="kobo.76.1">
      see compilation errors now, but we will resolve
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.77.1">
       them later:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.78.1">
@page "/ch07r01"
@implements IDisposable</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.79.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.80.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.81.1">
      block of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.82.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.83.1">
      , declare an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.84.1">
       Event
      </span>
     </strong>
     <span class="koboSpan" id="kobo.85.1">
      model to serve as the backing model for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.86.1">
       the form:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.87.1">
[SupplyParameterFromForm]
public Event Model { get; set; }</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.88.1">
      Below the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.89.1">
       Model
      </span>
     </strong>
     <span class="koboSpan" id="kobo.90.1">
      parameter declaration, introduce the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.91.1">
       Context
      </span>
     </strong>
     <span class="koboSpan" id="kobo.92.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.93.1">
       Store
      </span>
     </strong>
     <span class="koboSpan" id="kobo.94.1">
      variables for the form’s
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.95.1">
       state management:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.96.1">
protected EditContext Context;
protected ValidationMessageStore Store;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.97.1">
      Still within the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.98.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.99.1">
      block, implement a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.100.1">
       Save()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.101.1">
      placeholder method to simulate
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.102.1">
       form submission:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.103.1">
private void Save()
    =&gt; Console.WriteLine($"Saved {Model.Name}.");</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.104.1">
      Alongside
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.105.1">
       Save()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.106.1">
      , implement a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.107.1">
       ValidateForm()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.108.1">
      method, with a signature matching the response
     </span>
     <a id="_idIndexMarker324">
     </a>
     <span class="koboSpan" id="kobo.109.1">
      of a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.110.1">
       EventHandler
      </span>
     </strong>
     <span class="koboSpan" id="kobo.111.1">
      validation, which checks whether the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.112.1">
       Model.Name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.113.1">
      property
     </span>
     <a id="_idIndexMarker325">
     </a>
     <span class="koboSpan" id="kobo.114.1">
      has a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.115.1">
       valid value:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.116.1">
private void ValidateForm(object sender, ValidationRequestedEventArgs args)
{
    Store.Clear();
    if (string.IsNullOrWhiteSpace(Model.Name))
        Store.Add(() =&gt; Model.Name,
            "You must provide a name.");
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.117.1">
      Continuing in the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.118.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.119.1">
      block, override the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.120.1">
       OnInitialized()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.121.1">
      life cycle method to initialize the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.122.1">
       Model
      </span>
     </strong>
     <span class="koboSpan" id="kobo.123.1">
      instance if needed and set up both the form context and the validation
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.124.1">
       message container:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.125.1">
protected override void OnInitialized()
{
    Model ??= new();
    Context = new(Model);
    Context.OnValidationRequested += ValidateForm;
    Store = new(Context);
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.126.1">
      Finalize the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.127.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.128.1">
      block by implementing the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.129.1">
       Dispose()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.130.1">
      method to adhere to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.131.1">
       IDisposable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.132.1">
      requirement and unsubscribe from the validation
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.133.1">
       event handler:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.134.1">
public void Dispose()
{
    if (Context is not null)
        Context.OnValidationRequested -= ValidateForm;
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.135.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.136.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.137.1">
      markup, include an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.138.1">
       EditForm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.139.1">
      component, attaching
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.140.1">
       Context
      </span>
     </strong>
     <span class="koboSpan" id="kobo.141.1">
      to the
     </span>
     <a id="_idIndexMarker326">
     </a>
     <span class="koboSpan" id="kobo.142.1">
      appropriate
     </span>
     <a id="_idIndexMarker327">
     </a>
     <span class="koboSpan" id="kobo.143.1">
      parameter and linking the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.144.1">
       Save()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.145.1">
      method to handle the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.146.1">
       form submission:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.147.1">
&lt;EditForm EditContext="@Context"
          event-form="forEvent-form"
          OnValidSubmit="@Save"&gt;
&lt;/EditForm&gt;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.148.1">
      Inside
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.149.1">
       EditForm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.150.1">
      , add an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.151.1">
       InputText
      </span>
     </strong>
     <span class="koboSpan" id="kobo.152.1">
      component and bind it to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.153.1">
       Model.Name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.154.1">
      property.
     </span>
     <span class="koboSpan" id="kobo.154.2">
      Alongside
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.155.1">
       InputText
      </span>
     </strong>
     <span class="koboSpan" id="kobo.156.1">
      , add a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.157.1">
       ValidationMessage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.158.1">
      component to display validation errors for the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.159.1">
       attached property:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.160.1">
&lt;p&gt;Name: &lt;InputText @bind-Value="@Model.Name" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;ValidationMessage For="() =&gt; Model.Name" /&gt;&lt;/p&gt;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.161.1">
      Lastly, complete
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.162.1">
       EditForm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.163.1">
      by adding a submit button below the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.164.1">
       form fields:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.165.1">
&lt;button type="submit"&gt;Save&lt;/button&gt;</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-242">
    <a id="_idTextAnchor242">
    </a>
    <span class="koboSpan" id="kobo.166.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.167.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.168.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.169.1">
     , we create a simple
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.170.1">
      Event
     </span>
    </strong>
    <span class="koboSpan" id="kobo.171.1">
     class with a single
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.172.1">
      Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.173.1">
     property.
    </span>
    <span class="koboSpan" id="kobo.173.2">
     We will use
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.174.1">
      Event
     </span>
    </strong>
    <span class="koboSpan" id="kobo.175.1">
     as a model for our form.
    </span>
    <span class="koboSpan" id="kobo.175.2">
     Next, in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.176.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.177.1">
     , we create a routable
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.178.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.179.1">
     component, not specifying any render mode, which leads Blazor to default to static server-side mode.
    </span>
    <span class="koboSpan" id="kobo.179.2">
     As form validation is event driven,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.180.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.181.1">
     must implement the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.182.1">
      IDisposable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.183.1">
     interface, which we apply using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.184.1">
      @implements
     </span>
    </strong>
    <span class="koboSpan" id="kobo.185.1">
     directive.
    </span>
    <span class="koboSpan" id="kobo.185.2">
     You will see compilation errors now, but we will resolve
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.186.1">
      them later.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.187.1">
     Moving to
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.188.1">
      step 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.189.1">
     , within the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.190.1">
      @code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.191.1">
     block of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.192.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.193.1">
     , we utilize the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.194.1">
      Event
     </span>
    </strong>
    <span class="koboSpan" id="kobo.195.1">
     class to declare the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.196.1">
      Model
     </span>
    </strong>
    <span class="koboSpan" id="kobo.197.1">
     parameter, tagging it with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.198.1">
      SupplyParameterFromForm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.199.1">
     attribute to enable an automatic binding with the form.
    </span>
    <span class="koboSpan" id="kobo.199.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.200.1">
      step 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.201.1">
     , we introduce two form-backing variables:
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.202.1">
      EditContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.203.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.204.1">
      ValidationMessageStore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.205.1">
     .
    </span>
    <span class="koboSpan" id="kobo.205.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.206.1">
      EditContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.207.1">
     instance tracks changes to form inputs and manages the validation state, while
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.208.1">
      ValidationMessageStore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.209.1">
     holds and displays validation messages, simplifying the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.210.1">
      validation process.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.211.1">
     Proceeding to
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.212.1">
      step 5
     </span>
    </em>
    <span class="koboSpan" id="kobo.213.1">
     , we implement a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.214.1">
      Save()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.215.1">
     placeholder method.
    </span>
    <span class="koboSpan" id="kobo.215.2">
     Data persistence isn’t the focus of this chapter, so we log a brief message to the console to simulate a save operation.
    </span>
    <span class="koboSpan" id="kobo.215.3">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.216.1">
      step 6
     </span>
    </em>
    <span class="koboSpan" id="kobo.217.1">
     , we implement the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.218.1">
      ValidateForm()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.219.1">
     method with a signature that matches the
    </span>
    <a id="_idIndexMarker328">
    </a>
    <span class="koboSpan" id="kobo.220.1">
     validation
    </span>
    <a id="_idIndexMarker329">
    </a>
    <span class="koboSpan" id="kobo.221.1">
     handler required by
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.222.1">
      EditForm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.223.1">
     .
    </span>
    <span class="koboSpan" id="kobo.223.2">
     Whenever Blazor invokes
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.224.1">
      ValidateForm()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.225.1">
     , we first clear any messages in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.226.1">
      Store
     </span>
    </strong>
    <span class="koboSpan" id="kobo.227.1">
     to handle multiple validation attempts smoothly.
    </span>
    <span class="koboSpan" id="kobo.227.2">
     Then, we check whether the user provided the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.228.1">
      Model.Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.229.1">
     property; if not, we add a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.230.1">
      You must provide a name.
     </span>
    </strong>
    <span class="koboSpan" id="kobo.231.1">
     message to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.232.1">
      Store
     </span>
    </strong>
    <span class="koboSpan" id="kobo.233.1">
     and identify the invalid property with a delegate,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.234.1">
      () =&gt; Model.Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.235.1">
     .
    </span>
    <span class="koboSpan" id="kobo.235.2">
     Under the hood, Blazor breaks down this delegate into the object (
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.236.1">
      Model
     </span>
    </strong>
    <span class="koboSpan" id="kobo.237.1">
     ) and the property path string (
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.238.1">
      Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.239.1">
     ) to efficiently track and manage validation and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.240.1">
      error association.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.241.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.242.1">
      step 7
     </span>
    </em>
    <span class="koboSpan" id="kobo.243.1">
     , we override the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.244.1">
      OnInitialized()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.245.1">
     life cycle method to set up the form’s underlying logic.
    </span>
    <span class="koboSpan" id="kobo.245.2">
     We resolve the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.246.1">
      Model
     </span>
    </strong>
    <span class="koboSpan" id="kobo.247.1">
     value, supporting the pattern for the parameter with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.248.1">
      SupplyParameterFromForm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.249.1">
     attribute.
    </span>
    <span class="koboSpan" id="kobo.249.2">
     We then initialize
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.250.1">
      Context
     </span>
    </strong>
    <span class="koboSpan" id="kobo.251.1">
     with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.252.1">
      Model
     </span>
    </strong>
    <span class="koboSpan" id="kobo.253.1">
     object and subscribe
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.254.1">
      ValidateForm()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.255.1">
     to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.256.1">
      OnValidationRequested
     </span>
    </strong>
    <span class="koboSpan" id="kobo.257.1">
     event handler that
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.258.1">
      Context
     </span>
    </strong>
    <span class="koboSpan" id="kobo.259.1">
     exposes.
    </span>
    <span class="koboSpan" id="kobo.259.2">
     With that, Blazor will automatically invoke
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.260.1">
      ValidateForm()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.261.1">
     every time the user submits the form.
    </span>
    <span class="koboSpan" id="kobo.261.2">
     Finally, we initialize
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.262.1">
      Store
     </span>
    </strong>
    <span class="koboSpan" id="kobo.263.1">
     by passing
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.264.1">
      Context
     </span>
    </strong>
    <span class="koboSpan" id="kobo.265.1">
     , so the validation container can access the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.266.1">
      Model
     </span>
    </strong>
    <span class="koboSpan" id="kobo.267.1">
     fields.
    </span>
    <span class="koboSpan" id="kobo.267.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.268.1">
      step 8
     </span>
    </em>
    <span class="koboSpan" id="kobo.269.1">
     , we wrap up the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.270.1">
      @code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.271.1">
     block by implementing the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.272.1">
      Dispose()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.273.1">
     method, adhering to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.274.1">
      IDisposable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.275.1">
     pattern.
    </span>
    <span class="koboSpan" id="kobo.275.2">
     Within
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.276.1">
      Dispose()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.277.1">
     , we safely unsubscribe
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.278.1">
      ValidateForm()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.279.1">
     from the validation trigger of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.280.1">
      Context
     </span>
    </strong>
    <span class="koboSpan" id="kobo.281.1">
     to prevent potential
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.282.1">
      memory leaks.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.283.1">
     Having the backend logic in place, we proceed to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.284.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.285.1">
     markup.
    </span>
    <span class="koboSpan" id="kobo.285.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.286.1">
      step 9
     </span>
    </em>
    <span class="koboSpan" id="kobo.287.1">
     , we add an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.288.1">
      EditForm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.289.1">
     component, but instead of attaching the backing
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.290.1">
      Model
     </span>
    </strong>
    <span class="koboSpan" id="kobo.291.1">
     instance directly, we attach
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.292.1">
      Context
     </span>
    </strong>
    <span class="koboSpan" id="kobo.293.1">
     to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.294.1">
      EditContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.295.1">
     parameter.
    </span>
    <span class="koboSpan" id="kobo.295.2">
     Blazor will not allow attaching both
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.296.1">
      Model
     </span>
    </strong>
    <span class="koboSpan" id="kobo.297.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.298.1">
      EditContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.299.1">
     since
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.300.1">
      Context
     </span>
    </strong>
    <span class="koboSpan" id="kobo.301.1">
     already encompasses an instance of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.302.1">
      Model
     </span>
    </strong>
    <span class="koboSpan" id="kobo.303.1">
     .
    </span>
    <span class="koboSpan" id="kobo.303.2">
     We also use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.304.1">
      OnValidSubmit
     </span>
    </strong>
    <span class="koboSpan" id="kobo.305.1">
     callback rather than the standard
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.306.1">
      OnSubmit
     </span>
    </strong>
    <span class="koboSpan" id="kobo.307.1">
     .
    </span>
    <span class="koboSpan" id="kobo.307.2">
     Blazor invokes
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.308.1">
      OnValidSumbit
     </span>
    </strong>
    <span class="koboSpan" id="kobo.309.1">
     only when all validations pass successfully, making it ideal for our needs.
    </span>
    <span class="koboSpan" id="kobo.309.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.310.1">
      step 10
     </span>
    </em>
    <span class="koboSpan" id="kobo.311.1">
     , within
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.312.1">
      EditForm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.313.1">
     , we place an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.314.1">
      InputText
     </span>
    </strong>
    <span class="koboSpan" id="kobo.315.1">
     component and bind it to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.316.1">
      Model.Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.317.1">
     property, enabling the user to provide the required event name.
    </span>
    <span class="koboSpan" id="kobo.317.2">
     Alongside
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.318.1">
      InputText
     </span>
    </strong>
    <span class="koboSpan" id="kobo.319.1">
     , we position a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.320.1">
      ValidationMessage
     </span>
    </strong>
    <span class="koboSpan" id="kobo.321.1">
     component that displays validation messages for the specific form field.
    </span>
    <span class="koboSpan" id="kobo.321.2">
     As
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.322.1">
      ValidationMessage
     </span>
    </strong>
    <span class="koboSpan" id="kobo.323.1">
     requires a delegate to retrieve messages from the container, we leverage the same delegate we used in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.324.1">
      ValidateForm()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.325.1">
     for seeding a validation message into
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.326.1">
      Store
     </span>
    </strong>
    <span class="koboSpan" id="kobo.327.1">
     .
    </span>
    <span class="koboSpan" id="kobo.327.2">
     Finally, in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.328.1">
      step 11
     </span>
    </em>
    <span class="koboSpan" id="kobo.329.1">
     , we complete the form implementation by adding a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.330.1">
      submit button.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.331.1">
     When the user submits the form, Blazor triggers the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.332.1">
      OnValidationRequested
     </span>
    </strong>
    <span class="koboSpan" id="kobo.333.1">
     event handler first.
    </span>
    <span class="koboSpan" id="kobo.333.2">
     If
    </span>
    <a id="_idIndexMarker330">
    </a>
    <span class="koboSpan" id="kobo.334.1">
     validation results in errors, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.335.1">
      Save()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.336.1">
     method is not
    </span>
    <a id="_idIndexMarker331">
    </a>
    <span class="koboSpan" id="kobo.337.1">
     activated, ensuring that only valid data
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.338.1">
      is processed.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.339.1">
     Here’s what the validation error looks like in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.340.1">
      our form:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer028">
     <span class="koboSpan" id="kobo.341.1">
      <img alt="Figure 7.1: Validation message when user submits the form without providing the name" src="image/B22020_07_1.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.342.1">
     Figure 7.1: Validation message when user submits the form without providing the name
    </span>
   </p>
   <h2 id="_idParaDest-243">
    <a id="_idTextAnchor243">
    </a>
    <span class="koboSpan" id="kobo.343.1">
     There’s more…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.344.1">
     With the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.345.1">
      ValidationMessage
     </span>
    </strong>
    <span class="koboSpan" id="kobo.346.1">
     component, we
    </span>
    <a id="_idIndexMarker332">
    </a>
    <span class="koboSpan" id="kobo.347.1">
     can control where Blazor renders validation messages for each field, providing granular feedback directly next to individual form elements.
    </span>
    <span class="koboSpan" id="kobo.347.2">
     However, you might want to display a consolidated validation summary rather than scattered messages.
    </span>
    <span class="koboSpan" id="kobo.347.3">
     That’s where the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.348.1">
      ValidationSummary
     </span>
    </strong>
    <span class="koboSpan" id="kobo.349.1">
     component comes in handy.
    </span>
    <span class="koboSpan" id="kobo.349.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.350.1">
      ValidationSummary
     </span>
    </strong>
    <span class="koboSpan" id="kobo.351.1">
     component gathers and displays all validation messages within one container.
    </span>
    <span class="koboSpan" id="kobo.351.2">
     You can see such summaries at the top or bottom of the forms or even as part of a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.352.1">
      validation popup.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.353.1">
     To implement a summary in
    </span>
    <a id="_idIndexMarker333">
    </a>
    <span class="koboSpan" id="kobo.354.1">
     our
    </span>
    <a id="_idIndexMarker334">
    </a>
    <span class="koboSpan" id="kobo.355.1">
     form, we only need to replace
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.356.1">
      ValidationMessage
     </span>
    </strong>
    <span class="koboSpan" id="kobo.357.1">
     with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.358.1">
      ValidationSummary
     </span>
    </strong>
    <span class="koboSpan" id="kobo.359.1">
     and add a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.360.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.361.1">
     component within
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.362.1">
      the form:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.363.1">
&lt;EditForm EditContext="@Context" 
          FormName="forEvent-form"
          OnValidSubmit="@Save"&gt;
    &lt;DataAnnotationsValidator /&gt;
    &lt;p&gt;Name: &lt;InputText @bind-Value="@Model.Name" /&gt;&lt;/p&gt;
    &lt;p&gt;&lt;ValidationSummary /&gt;&lt;/p&gt;
    &lt;button type="submit"&gt;Save&lt;/button&gt;
&lt;/EditForm&gt;</span></pre>
   <p>
    <span class="koboSpan" id="kobo.364.1">
     We must embed
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.365.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.366.1">
     as it triggers the population and re-render of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.367.1">
      ValidationSummary
     </span>
    </strong>
    <span class="koboSpan" id="kobo.368.1">
     .
    </span>
    <span class="koboSpan" id="kobo.368.2">
     Without the validator, will get the red input styling, indicating that the value provided is invalid, but
    </span>
    <a id="_idIndexMarker335">
    </a>
    <span class="koboSpan" id="kobo.369.1">
     no
    </span>
    <a id="_idIndexMarker336">
    </a>
    <span class="koboSpan" id="kobo.370.1">
     message
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.371.1">
      explaining why.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.372.1">
     We explore
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.373.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.374.1">
     further in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.375.1">
      next recipe.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-244">
    <a id="_idTextAnchor244">
    </a>
    <span class="koboSpan" id="kobo.376.1">
     Leveraging data annotations for form validation
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.377.1">
     In this recipe, we
    </span>
    <a id="_idIndexMarker337">
    </a>
    <span class="koboSpan" id="kobo.378.1">
     explore
    </span>
    <a id="_idIndexMarker338">
    </a>
    <span class="koboSpan" id="kobo.379.1">
     the role of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.380.1">
      data annotations
     </span>
    </strong>
    <span class="koboSpan" id="kobo.381.1">
     in streamlining and enhancing the validation processes in a form in Blazor.
    </span>
    <span class="koboSpan" id="kobo.381.2">
     Data annotations are attributes applied directly to model properties that enable a declarative way of specifying validation rules.
    </span>
    <span class="koboSpan" id="kobo.381.3">
     By implementing data annotations, you can significantly simplify the validation logic and encapsulate it within the model rather than coupling it with any specific form.
    </span>
    <span class="koboSpan" id="kobo.381.4">
     Such separation ensures that validation is consistently enforced across different parts of your application regardless of the context in which you use the model.
    </span>
    <span class="koboSpan" id="kobo.381.5">
     Blazor has a built-in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.382.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.383.1">
     component that seamlessly integrates data annotations into a form.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.384.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.385.1">
     checks the data annotations applied to the model and produces validation results without
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.386.1">
      additional coding.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.387.1">
     Let’s convert an explicit validation logic in a form into data annotations and leverage Blazor’s native support to handle
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.388.1">
      validation efficiently.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-245">
    <a id="_idTextAnchor245">
    </a>
    <span class="koboSpan" id="kobo.389.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.390.1">
     Before we encapsulate the validation logic into a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.391.1">
      separate component:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.392.1">
      Create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.393.1">
       Chapter07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.394.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.395.1">
       Recipe02
      </span>
     </strong>
     <span class="koboSpan" id="kobo.396.1">
      directory – this will be your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.397.1">
       working directory
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.398.1">
      Copy
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.399.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.400.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.401.1">
       Event
      </span>
     </strong>
     <span class="koboSpan" id="kobo.402.1">
      from the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.403.1">
       Adding validation to a form
      </span>
     </em>
     <span class="koboSpan" id="kobo.404.1">
      recipe or from the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.405.1">
       Chapter07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.406.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.407.1">
       Recipe01
      </span>
     </strong>
     <span class="koboSpan" id="kobo.408.1">
      directory in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.409.1">
       GitHub repository
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-246">
    <a id="_idTextAnchor246">
    </a>
    <span class="koboSpan" id="kobo.410.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.411.1">
     Follow these steps
    </span>
    <a id="_idIndexMarker339">
    </a>
    <span class="koboSpan" id="kobo.412.1">
     to
    </span>
    <a id="_idIndexMarker340">
    </a>
    <span class="koboSpan" id="kobo.413.1">
     leverage data annotations for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.414.1">
      model validation:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.415.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.416.1">
       Event
      </span>
     </strong>
     <span class="koboSpan" id="kobo.417.1">
      class and decorate the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.418.1">
       Name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.419.1">
      property with the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.420.1">
       Required
      </span>
     </strong>
     <span class="koboSpan" id="kobo.421.1">
      attribute with a user-friendly error message.
     </span>
     <span class="koboSpan" id="kobo.421.2">
      You must reference a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.422.1">
       System.ComponentModel.DataAnnotations
      </span>
     </strong>
     <span class="koboSpan" id="kobo.423.1">
      namespace, but your IDE might include
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.424.1">
       it automatically:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.425.1">
[Required(ErrorMessage = "You must provide a name.")]
public string Name { get; set; }</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.426.1">
      Move to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.427.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.428.1">
      component and remove the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.429.1">
       IDisposable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.430.1">
      declaration from the top of the file.
     </span>
     <span class="koboSpan" id="kobo.430.2">
      You should have only a route
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.431.1">
       declaration left.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.432.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.433.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.434.1">
      markup, locate
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.435.1">
       EditForm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.436.1">
      and embed the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.437.1">
       DataAnnotationsValidator
      </span>
     </strong>
     <span class="koboSpan" id="kobo.438.1">
      component just below the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.439.1">
       submission button:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.440.1">
&lt;EditForm EditContext="@Context"
          event-form="event-forEvent"
          OnValidSubmit="@Save"&gt;
    @* ... </span><span class="koboSpan" id="kobo.440.2">existing form body ... </span><span class="koboSpan" id="kobo.440.3">*@
    &lt;button type="submit"&gt;Save&lt;/button&gt;
    &lt;DataAnnotationsValidator /&gt;
&lt;/EditForm&gt;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.441.1">
      Jump to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.442.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.443.1">
      block of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.444.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.445.1">
      and do
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.446.1">
       some cleanup:
      </span>
     </span>
     <ul>
      <li>
       <span class="koboSpan" id="kobo.447.1">
        Remove the subscription to the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.448.1">
         OnValidationRequested
        </span>
       </strong>
       <span class="koboSpan" id="kobo.449.1">
        event handler from the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.450.1">
         OnInitialized()
        </span>
       </strong>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.451.1">
         method implementation
        </span>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.452.1">
        Remove the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.453.1">
         Dispose()
        </span>
       </strong>
       <span class="koboSpan" id="kobo.454.1">
        and
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.455.1">
         ValidateForm()
        </span>
       </strong>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.456.1">
         methods entirely
        </span>
       </span>
      </li>
     </ul>
    </li>
   </ol>
   <h2 id="_idParaDest-247">
    <a id="_idTextAnchor247">
    </a>
    <span class="koboSpan" id="kobo.457.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.458.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.459.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.460.1">
     , we
    </span>
    <a id="_idIndexMarker341">
    </a>
    <span class="koboSpan" id="kobo.461.1">
     enhance
    </span>
    <a id="_idIndexMarker342">
    </a>
    <span class="koboSpan" id="kobo.462.1">
     the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.463.1">
      Event
     </span>
    </strong>
    <span class="koboSpan" id="kobo.464.1">
     class by implementing data annotations to enforce input validation.
    </span>
    <span class="koboSpan" id="kobo.464.2">
     We decorate the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.465.1">
      Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.466.1">
     property with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.467.1">
      Required
     </span>
    </strong>
    <span class="koboSpan" id="kobo.468.1">
     attribute to ensure a user always provides that value.
    </span>
    <span class="koboSpan" id="kobo.468.2">
     Data annotations also accept the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.469.1">
      ErrorMessage
     </span>
    </strong>
    <span class="koboSpan" id="kobo.470.1">
     parameter, where we can pass in a user-friendly validation message, so we extend the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.471.1">
      Required
     </span>
    </strong>
    <span class="koboSpan" id="kobo.472.1">
     attribute with the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.473.1">
      You must provide a name.
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.474.1">
      error message.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.475.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.476.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.477.1">
     , we move to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.478.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.479.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.479.2">
     With data annotations in place, we no longer need explicit event handling.
    </span>
    <span class="koboSpan" id="kobo.479.3">
     Consequently, we remove the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.480.1">
      IDisposable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.481.1">
     declaration from the top of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.482.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.483.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.483.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.484.1">
      step 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.485.1">
     , we enhance the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.486.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.487.1">
     markup and embed the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.488.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.489.1">
     component at the end of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.490.1">
      EditForm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.491.1">
     , just below the submission button.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.492.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.493.1">
     operates seamlessly within the form, carrying no distinct markup and relying on the cascading
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.494.1">
      EditContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.495.1">
     for validation operations.
    </span>
    <span class="koboSpan" id="kobo.495.2">
     We placed
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.496.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.497.1">
     at the end of the form, but you can put it anywhere as long as it’s within the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.498.1">
      EditForm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.499.1">
     tags.
    </span>
    <span class="koboSpan" id="kobo.499.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.500.1">
      step 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.501.1">
     , we update the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.502.1">
      @code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.503.1">
     block of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.504.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.505.1">
     .
    </span>
    <span class="koboSpan" id="kobo.505.2">
     With data annotations now managing validation, we can simplify the component code by removing most of the previously necessary validation logic.
    </span>
    <span class="koboSpan" id="kobo.505.3">
     We remove the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.506.1">
      OnValidationRequested
     </span>
    </strong>
    <span class="koboSpan" id="kobo.507.1">
     subscription within the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.508.1">
      OnInitialized()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.509.1">
     method, as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.510.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.511.1">
     now automatically monitors the validation state.
    </span>
    <span class="koboSpan" id="kobo.511.2">
     Following this, we also eliminate the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.512.1">
      ValidateForm()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.513.1">
     method, as the management of the validation message store and error messages has shifted to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.514.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.515.1">
     as well.
    </span>
    <span class="koboSpan" id="kobo.515.2">
     Lastly, we remove the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.516.1">
      Dispose()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.517.1">
     method because
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.518.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.519.1">
     no longer implements the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.520.1">
      IDisposable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.521.1">
     interface or listens to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.522.1">
      any events.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.523.1">
     With these few adjustments, we achieve the same validation scope as in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.524.1">
      Adding validation to a form
     </span>
    </em>
    <span class="koboSpan" id="kobo.525.1">
     recipe
    </span>
    <a id="_idIndexMarker343">
    </a>
    <span class="koboSpan" id="kobo.526.1">
     but with significantly
    </span>
    <a id="_idIndexMarker344">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.527.1">
      less code!
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-248">
    <a id="_idTextAnchor248">
    </a>
    <span class="koboSpan" id="kobo.528.1">
     There’s more…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.529.1">
     With
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.530.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.531.1">
     in place, Blazor can perform two types
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.532.1">
      of validation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.533.1">
      The first type is
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.534.1">
       full-model validation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.535.1">
      – Blazor
     </span>
     <a id="_idIndexMarker345">
     </a>
     <span class="koboSpan" id="kobo.536.1">
      executes when the user submits the form.
     </span>
     <span class="koboSpan" id="kobo.536.2">
      This validation occurs when you click the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.537.1">
       Save
      </span>
     </strong>
     <span class="koboSpan" id="kobo.538.1">
      button on the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.539.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.540.1">
      form.
     </span>
     <span class="koboSpan" id="kobo.540.2">
      It involves checking every validation rule across all fields in the model, ensuring that all data meets the specified criteria before the form is processed.
     </span>
     <span class="koboSpan" id="kobo.540.3">
      As we’re working in the SSR render mode, which has inherently limited interactivity, only full-model validation
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.541.1">
       is supported.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.542.1">
      However, should you opt to render
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.543.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.544.1">
      in an interactive mode,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.545.1">
       DataAnnotationsValidator
      </span>
     </strong>
     <span class="koboSpan" id="kobo.546.1">
      can execute another layer of validation –
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.547.1">
       field validation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.548.1">
      .
     </span>
     <span class="koboSpan" id="kobo.548.2">
      Blazor
     </span>
     <a id="_idIndexMarker346">
     </a>
     <span class="koboSpan" id="kobo.549.1">
      triggers field validation when the user moves the focus away from an individual form field, displaying immediate feedback on the input provided in
     </span>
     <a id="_idIndexMarker347">
     </a>
     <span class="koboSpan" id="kobo.550.1">
      that
     </span>
     <a id="_idIndexMarker348">
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.551.1">
       specific field.
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-249">
    <a id="_idTextAnchor249">
    </a>
    <span class="koboSpan" id="kobo.552.1">
     Implementing custom validation attributes
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.553.1">
     In this recipe, we dive
    </span>
    <a id="_idIndexMarker349">
    </a>
    <span class="koboSpan" id="kobo.554.1">
     into the flexibility of customizing validation attributes.
    </span>
    <span class="koboSpan" id="kobo.554.2">
     While built-in data annotations simplify validation logic, they cover only the most commonly used validation rules.
    </span>
    <span class="koboSpan" id="kobo.554.3">
     You might find yourself missing the coverage for your specific needs.
    </span>
    <span class="koboSpan" id="kobo.554.4">
     Fortunately, you can implement custom data validation attributes with unique rules beyond the standard validations provided by .NET.
    </span>
    <span class="koboSpan" id="kobo.554.5">
     Additionally, Blazor’s native
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.555.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.556.1">
     component seamlessly integrates with any
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.557.1">
      custom attributes.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.558.1">
     Let’s implement an event name validation attribute that checks whether the user provided the event name and scans for any
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.559.1">
      forbidden keywords.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-250">
    <a id="_idTextAnchor250">
    </a>
    <span class="koboSpan" id="kobo.560.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.561.1">
     Before we implement a custom validation attribute, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.562.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.563.1">
      Create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.564.1">
       Chapter07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.565.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.566.1">
       Recipe03
      </span>
     </strong>
     <span class="koboSpan" id="kobo.567.1">
      directory – this will be your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.568.1">
       working directory
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.569.1">
      Copy
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.570.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.571.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.572.1">
       Event
      </span>
     </strong>
     <span class="koboSpan" id="kobo.573.1">
      from the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.574.1">
       Leveraging data annotations for form validation
      </span>
     </em>
     <span class="koboSpan" id="kobo.575.1">
      recipe or from the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.576.1">
       Chapter07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.577.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.578.1">
       Recipe02
      </span>
     </strong>
     <span class="koboSpan" id="kobo.579.1">
      directory in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.580.1">
       GitHub repository
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-251">
    <a id="_idTextAnchor251">
    </a>
    <span class="koboSpan" id="kobo.581.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.582.1">
     Follow these instructions to implement a custom
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.583.1">
      validation attribute:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.584.1">
      Create a new
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.585.1">
       EventNameValidationAttribute
      </span>
     </strong>
     <span class="koboSpan" id="kobo.586.1">
      class that inherits from a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.587.1">
       ValidationAttribute
      </span>
     </strong>
     <span class="koboSpan" id="kobo.588.1">
      class.
     </span>
     <span class="koboSpan" id="kobo.588.2">
      You must reference the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.589.1">
       System.ComponentModel.DataAnnotations
      </span>
     </strong>
     <span class="koboSpan" id="kobo.590.1">
      assembly, but your IDE might include
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.591.1">
       it automatically:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.592.1">
using System.ComponentModel.DataAnnotations;
public class EventNameValidationAttribute
    : ValidationAttribute
{
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.593.1">
      Inside the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.594.1">
       EventNameValidationAttribute
      </span>
     </strong>
     <span class="koboSpan" id="kobo.595.1">
      class, declare a private variable,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.596.1">
       _forbidden
      </span>
     </strong>
     <span class="koboSpan" id="kobo.597.1">
      , and initialize it with the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.598.1">
        event
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.599.1">
       value:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.600.1">
private const string _forbidden = "event";</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.601.1">
      Below the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.602.1">
       _forbidden
      </span>
     </strong>
     <span class="koboSpan" id="kobo.603.1">
      variable, implement a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.604.1">
       Failure()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.605.1">
      method that accepts
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.606.1">
       message
      </span>
     </strong>
     <span class="koboSpan" id="kobo.607.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.608.1">
       member
      </span>
     </strong>
     <span class="koboSpan" id="kobo.609.1">
      parameters and returns an instance
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.610.1">
       of
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.611.1">
        ValidationResult
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.612.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.613.1">
private static ValidationResult Failure(
    string message, string member)
    =&gt; new(message, [member]);</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.614.1">
      Complete
     </span>
     <a id="_idIndexMarker350">
     </a>
     <span class="koboSpan" id="kobo.615.1">
      the implementation of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.616.1">
       EventNameValidationAttribute
      </span>
     </strong>
     <span class="koboSpan" id="kobo.617.1">
      by overriding the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.618.1">
       IsValid()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.619.1">
      method, which returns a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.620.1">
       ValidationResult
      </span>
     </strong>
     <span class="koboSpan" id="kobo.621.1">
      object.
     </span>
     <span class="koboSpan" id="kobo.621.2">
      Return the result of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.622.1">
       Failure()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.623.1">
      invocation if the incoming
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.624.1">
       value
      </span>
     </strong>
     <span class="koboSpan" id="kobo.625.1">
      was not provided or it contains the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.626.1">
       _forbidden
      </span>
     </strong>
     <span class="koboSpan" id="kobo.627.1">
      keyword.
     </span>
     <span class="koboSpan" id="kobo.627.2">
      Otherwise, return the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.628.1">
       default
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.629.1">
        ValidationResult.Success
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.630.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.631.1">
protected override ValidationResult IsValid(
    object value, ValidationContext validationContext)
{
    var text = value?.ToString();
    if (string.IsNullOrWhiteSpace(text))
        return Failure("You must provide a name.",
            validationContext.MemberName);
    if (text.Contains(_forbidden,
        StringComparison.InvariantCultureIgnoreCase))
        return Failure(
            "You mustn't use the 'event' keyword.",
                validationContext.MemberName);
    return ValidationResult.Success;
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.632.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.633.1">
       Event
      </span>
     </strong>
     <span class="koboSpan" id="kobo.634.1">
      class and update the decoration of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.635.1">
       Name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.636.1">
      property by replacing the
     </span>
     <a id="_idIndexMarker351">
     </a>
     <span class="koboSpan" id="kobo.637.1">
      existing
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.638.1">
       Required
      </span>
     </strong>
     <span class="koboSpan" id="kobo.639.1">
      attribute with the newly implemented
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.640.1">
        EventNameValidation
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.641.1">
       attribute:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.642.1">
[EventNameValidation]
public string Name { get; set; }</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-252">
    <a id="_idTextAnchor252">
    </a>
    <span class="koboSpan" id="kobo.643.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.644.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.645.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.646.1">
     , we create an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.647.1">
      EventNameValidationAttribute
     </span>
    </strong>
    <span class="koboSpan" id="kobo.648.1">
     class, inheriting from
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.649.1">
      ValidationAttribute
     </span>
    </strong>
    <span class="koboSpan" id="kobo.650.1">
     .
    </span>
    <span class="koboSpan" id="kobo.650.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.651.1">
      ValidationAttribute
     </span>
    </strong>
    <span class="koboSpan" id="kobo.652.1">
     class is a base class for validation attributes, providing a framework for implementing custom validation rules in .NET applications.
    </span>
    <span class="koboSpan" id="kobo.652.2">
     It allows for defining specific conditions that data must meet before being processed further.
    </span>
    <span class="koboSpan" id="kobo.652.3">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.653.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.654.1">
     , we declare a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.655.1">
      _forbidden
     </span>
    </strong>
    <span class="koboSpan" id="kobo.656.1">
     variable within our custom validation attribute class to store the forbidden keyword to check against the input value.
    </span>
    <span class="koboSpan" id="kobo.656.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.657.1">
      step 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.658.1">
     , we implement a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.659.1">
      Failure()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.660.1">
     method that accepts the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.661.1">
      message
     </span>
    </strong>
    <span class="koboSpan" id="kobo.662.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.663.1">
      member
     </span>
    </strong>
    <span class="koboSpan" id="kobo.664.1">
     parameters.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.665.1">
      Failure()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.666.1">
     creates and returns an instance of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.667.1">
      ValidationResult
     </span>
    </strong>
    <span class="koboSpan" id="kobo.668.1">
     , representing a failure in validation.
    </span>
    <span class="koboSpan" id="kobo.668.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.669.1">
      member
     </span>
    </strong>
    <span class="koboSpan" id="kobo.670.1">
     parameter allows associating the error message with specific fields, enhancing the clarity of feedback provided to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.671.1">
      the user.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.672.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.673.1">
      step 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.674.1">
     , we implement the custom validation logic by overriding the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.675.1">
      IsValid()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.676.1">
     method from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.677.1">
      ValidationAttribute
     </span>
    </strong>
    <span class="koboSpan" id="kobo.678.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.678.2">
     Blazor triggers
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.679.1">
      IsValid()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.680.1">
     when it validates the form model.
    </span>
    <span class="koboSpan" id="kobo.680.2">
     We choose to override the overload that returns a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.681.1">
      ValidationResult
     </span>
    </strong>
    <span class="koboSpan" id="kobo.682.1">
     object rather than a simple
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.683.1">
      bool
     </span>
    </strong>
    <span class="koboSpan" id="kobo.684.1">
     , as we want to provide detailed feedback on validation issues.
    </span>
    <span class="koboSpan" id="kobo.684.2">
     We first convert the incoming
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.685.1">
      value
     </span>
    </strong>
    <span class="koboSpan" id="kobo.686.1">
     to a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.687.1">
      text
     </span>
    </strong>
    <span class="koboSpan" id="kobo.688.1">
     variable.
    </span>
    <span class="koboSpan" id="kobo.688.2">
     If
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.689.1">
      text
     </span>
    </strong>
    <span class="koboSpan" id="kobo.690.1">
     doesn’t carry a meaningful value, we call the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.691.1">
      Failure()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.692.1">
     method to return a validation error with the message
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.693.1">
      You must provide a name.
     </span>
    </strong>
    <span class="koboSpan" id="kobo.694.1">
     .
    </span>
    <span class="koboSpan" id="kobo.694.2">
     But
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.695.1">
      Failure()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.696.1">
     also requires providing a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.697.1">
      member
     </span>
    </strong>
    <span class="koboSpan" id="kobo.698.1">
     name.
    </span>
    <span class="koboSpan" id="kobo.698.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.699.1">
      IsValid()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.700.1">
     method accepts another parameter of type
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.701.1">
      ValidationContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.702.1">
     , which provides context about the validation operation, including
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.703.1">
      MemberName
     </span>
    </strong>
    <span class="koboSpan" id="kobo.704.1">
     identifying the validated field.
    </span>
    <span class="koboSpan" id="kobo.704.2">
     With
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.705.1">
      MemberName
     </span>
    </strong>
    <span class="koboSpan" id="kobo.706.1">
     , we can conform to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.707.1">
      Failure()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.708.1">
     method signature.
    </span>
    <span class="koboSpan" id="kobo.708.2">
     We then check whether
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.709.1">
      text
     </span>
    </strong>
    <span class="koboSpan" id="kobo.710.1">
     contains the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.711.1">
      _forbidden
     </span>
    </strong>
    <span class="koboSpan" id="kobo.712.1">
     keyword, ignoring case and culture differences.
    </span>
    <span class="koboSpan" id="kobo.712.2">
     If the forbidden keyword is found, we invoke
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.713.1">
      Failure()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.714.1">
     again with the message
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.715.1">
      You mustn’t use the ‘event’ keyword.
     </span>
    </strong>
    <span class="koboSpan" id="kobo.716.1">
     .
    </span>
    <span class="koboSpan" id="kobo.716.2">
     Lastly, if all checks pass successfully, we return
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.717.1">
      ValidationResult.Success
     </span>
    </strong>
    <span class="koboSpan" id="kobo.718.1">
     – a success indicator encapsulated inside the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.719.1">
       ValidationResult
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.720.1">
      class.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.721.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.722.1">
      step 5
     </span>
    </em>
    <span class="koboSpan" id="kobo.723.1">
     , we navigate to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.724.1">
      Event
     </span>
    </strong>
    <span class="koboSpan" id="kobo.725.1">
     class and replace the existing
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.726.1">
      Required
     </span>
    </strong>
    <span class="koboSpan" id="kobo.727.1">
     attribute on the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.728.1">
      Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.729.1">
     property
    </span>
    <a id="_idIndexMarker352">
    </a>
    <span class="koboSpan" id="kobo.730.1">
     with our newly created
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.731.1">
      EventNameValidation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.732.1">
     attribute.
    </span>
    <span class="koboSpan" id="kobo.732.2">
     Thanks to code generators and the C# and Blazor compilers, we can reference custom attributes using the class name without the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.733.1">
       Attribute
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.734.1">
      suffix.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.735.1">
     Now, we validate not only whether the user provides the event name but also whether they use the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.736.1">
      forbidden keyword:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer029">
     <span class="koboSpan" id="kobo.737.1">
      <img alt="Figure 7.2: Validation message when user submits a value containing a forbidden keyword" src="image/B22020_07_2.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.738.1">
     Figure 7.2: Validation message when user submits a value containing a forbidden keyword
    </span>
   </p>
   <h2 id="_idParaDest-253">
    <a id="_idTextAnchor253">
    </a>
    <span class="koboSpan" id="kobo.739.1">
     There’s more…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.740.1">
     When building multilingual applications, you might need to translate user-friendly error messages.
    </span>
    <span class="koboSpan" id="kobo.740.2">
     Additionally, with continuous delivery trends, you may need to conditionally enable validation rules based on feature flags or application settings.
    </span>
    <span class="koboSpan" id="kobo.740.3">
     You will require access to the dependency injection container to support such advanced scenarios.
    </span>
    <span class="koboSpan" id="kobo.740.4">
     While in a class based on
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.741.1">
      ValidationAttribute
     </span>
    </strong>
    <span class="koboSpan" id="kobo.742.1">
     , you can reach dependency injection through the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.743.1">
      ValidationContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.744.1">
     parameter, which encapsulates the behavior of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.745.1">
      IServiceProvider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.746.1">
     and exposes all the standard dependency injection methods available
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.747.1">
      in .NET.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.748.1">
     For example, assuming that you’ve registered an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.749.1">
      Api
     </span>
    </strong>
    <span class="koboSpan" id="kobo.750.1">
     service in the service container, you can inject this
    </span>
    <a id="_idIndexMarker353">
    </a>
    <span class="koboSpan" id="kobo.751.1">
     dependency within your attribute in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.752.1">
      following way:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.753.1">
protected override ValidationResult IsValid(object value,
    ValidationContext validationContext)
{
    var api = validationContext.GetRequiredService&lt;Api&gt;();
    //...
</span><span class="koboSpan" id="kobo.753.2">}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.754.1">
     We override the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.755.1">
      IsValid()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.756.1">
     method, inherited from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.757.1">
      ValidationAttribute
     </span>
    </strong>
    <span class="koboSpan" id="kobo.758.1">
     class, and we get an instance of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.759.1">
      ValidationContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.760.1">
     .
    </span>
    <span class="koboSpan" id="kobo.760.2">
     As
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.761.1">
      ValidationContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.762.1">
     implements the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.763.1">
      IServiceProvider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.764.1">
     interface, we leverage the built-in generic
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.765.1">
      GetRequiredService()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.766.1">
     extension method to retrieve an instance of our
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.767.1">
       Api
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.768.1">
      service.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.769.1">
     It’s important to note that custom validation attributes in .NET do not support asynchronous validation.
    </span>
    <span class="koboSpan" id="kobo.769.2">
     This limitation is crucial to consider when designing your validation strategy to
    </span>
    <a id="_idIndexMarker354">
    </a>
    <span class="koboSpan" id="kobo.770.1">
     ensure performance and user experience are not
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.771.1">
      adversely affected.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-254">
    <a id="_idTextAnchor254">
    </a>
    <span class="koboSpan" id="kobo.772.1">
     Validating complex data models
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.773.1">
     In this recipe, we
    </span>
    <a id="_idIndexMarker355">
    </a>
    <span class="koboSpan" id="kobo.774.1">
     tackle the validation of complex forms and data models.
    </span>
    <span class="koboSpan" id="kobo.774.2">
     Having well-structured and modularized code makes the code base easier to maintain and reduces the likelihood of errors by clearly defining and isolating each component’s responsibilities.
    </span>
    <span class="koboSpan" id="kobo.774.3">
     In forms, complex models segment the data into manageable parts, each with its validation logic, making it easier to maintain the overall form’s state and ensuring each segment adheres to specific business rules.
    </span>
    <span class="koboSpan" id="kobo.774.4">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.775.1">
      Microsoft.AspNetCore.Components.DataAnnotations.Validation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.776.1">
     package, although experimental, exposes Blazor-native validators and offers enhanced data annotations that integrate smoothly with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.777.1">
      complex models.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.778.1">
     Let’s extend the event creation form to include a nested object that encapsulates details about the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.779.1">
      event location.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-255">
    <a id="_idTextAnchor255">
    </a>
    <span class="koboSpan" id="kobo.780.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.781.1">
     Before we set up nested, complex model validation, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.782.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.783.1">
      Create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.784.1">
       Chapter07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.785.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.786.1">
       Recipe04
      </span>
     </strong>
     <span class="koboSpan" id="kobo.787.1">
      directory – this will be your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.788.1">
       working directory
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.789.1">
      Copy
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.790.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.791.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.792.1">
       Event
      </span>
     </strong>
     <span class="koboSpan" id="kobo.793.1">
      , and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.794.1">
       EventNameValidationAttribute
      </span>
     </strong>
     <span class="koboSpan" id="kobo.795.1">
      from the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.796.1">
       Implementing custom validation attributes
      </span>
     </em>
     <span class="koboSpan" id="kobo.797.1">
      recipe or from the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.798.1">
       Chapter07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.799.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.800.1">
       Recipe03
      </span>
     </strong>
     <span class="koboSpan" id="kobo.801.1">
      directory
     </span>
     <a id="_idIndexMarker356">
     </a>
     <span class="koboSpan" id="kobo.802.1">
      in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.803.1">
       GitHub repository
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-256">
    <a id="_idTextAnchor256">
    </a>
    <span class="koboSpan" id="kobo.804.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.805.1">
     Follow these steps to enable validation of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.806.1">
      nested model:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.807.1">
      Add a reference to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.808.1">
       Microsoft.AspNetCore.Components.DataAnnotations.Validation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.809.1">
      package to your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.810.1">
       project file:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.811.1">
&lt;ItemGroup&gt;
  &lt;PackageReference
    Include="Microsoft.AspNetCore.Components
      .DataAnnotations.Validation"
    Version="3.2.0-rc1.20223.4" /&gt;
&lt;/ItemGroup&gt;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.812.1">
      Create a new
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.813.1">
       EventLocation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.814.1">
      class and define two properties within it –
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.815.1">
       Venue
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.816.1">
       and
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.817.1">
        Capacity
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.818.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.819.1">
public class EventLocation
{
    public string Venue { get; set; }
    public int Capacity { get; set; }
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.820.1">
      Apply the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.821.1">
       Required
      </span>
     </strong>
     <span class="koboSpan" id="kobo.822.1">
      attribute to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.823.1">
       Venue
      </span>
     </strong>
     <span class="koboSpan" id="kobo.824.1">
      property and include a meaningful error message when a user leaves the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.825.1">
       field blank:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.826.1">
[Required(ErrorMessage = "You must provide a venue.")]
public string Venue { get; set; }</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.827.1">
      For the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.828.1">
       Capacity
      </span>
     </strong>
     <span class="koboSpan" id="kobo.829.1">
      property, decorate it with both the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.830.1">
       Required
      </span>
     </strong>
     <span class="koboSpan" id="kobo.831.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.832.1">
       Range
      </span>
     </strong>
     <span class="koboSpan" id="kobo.833.1">
      attributes and provide a meaningful error message to ensure the user inputs only valid
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.834.1">
       capacity
      </span>
     </span>
     <span class="No-Break">
      <a id="_idIndexMarker357">
      </a>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.835.1">
       values:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.836.1">
[Required, Range(1, 1000,
    ErrorMessage =
        "Capacity must be between 1 and 1000.")]
public int Capacity { get; set; }</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.837.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.838.1">
       Event
      </span>
     </strong>
     <span class="koboSpan" id="kobo.839.1">
      class and add a new
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.840.1">
       Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.841.1">
      property.
     </span>
     <span class="koboSpan" id="kobo.841.2">
      Decorate
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.842.1">
       Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.843.1">
      with a
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.844.1">
        ValidateComplexType
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.845.1">
       attribute:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.846.1">
[ValidateComplexType]
public EventLocation Location { get; set; } = new();</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.847.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.848.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.849.1">
      component, locate
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.850.1">
       EditForm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.851.1">
      within
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.852.1">
       the markup.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.853.1">
      Inside
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.854.1">
       EditForm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.855.1">
      , directly below the input field for
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.856.1">
       Name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.857.1">
      , add a new paragraph with an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.858.1">
       InputText
      </span>
     </strong>
     <span class="koboSpan" id="kobo.859.1">
      component bound to the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.860.1">
        Model.Location.Venue
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.861.1">
       property:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.862.1">
&lt;p&gt;
    Venue:
    &lt;InputText @bind-Value="@Model.Location.Venue" /&gt;
&lt;/p&gt;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.863.1">
      Below the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.864.1">
       Venue
      </span>
     </strong>
     <span class="koboSpan" id="kobo.865.1">
      input field, add another paragraph containing an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.866.1">
       InputNumber
      </span>
     </strong>
     <span class="koboSpan" id="kobo.867.1">
      component
     </span>
     <a id="_idIndexMarker358">
     </a>
     <span class="koboSpan" id="kobo.868.1">
      bound to the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.869.1">
        Model.Location.Capacity
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.870.1">
       property:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.871.1">
&lt;p&gt;
    Capacity:
    &lt;InputNumber
        @bind-Value="@Model.Location.Capacity" /&gt;
&lt;/p&gt;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.872.1">
      Still within
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.873.1">
       EditForm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.874.1">
      , replace the existing
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.875.1">
       ValidationMessage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.876.1">
      for the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.877.1">
       Model.Name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.878.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.879.1">
       with
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.880.1">
        ValidationSummary
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.881.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.882.1">
&lt;p&gt;&lt;ValidationSummary  /&gt;&lt;/p&gt;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.883.1">
      Lastly, swap out the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.884.1">
       DataAnnotationsValidator
      </span>
     </strong>
     <span class="koboSpan" id="kobo.885.1">
      component
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.886.1">
       for
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.887.1">
        ObjectGraphDataAnnotationsValidator
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.888.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.889.1">
&lt;ObjectGraphDataAnnotationsValidator /&gt;</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-257">
    <a id="_idTextAnchor257">
    </a>
    <span class="koboSpan" id="kobo.890.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.891.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.892.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.893.1">
     , we open the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.894.1">
      csproj
     </span>
    </strong>
    <span class="koboSpan" id="kobo.895.1">
     file of our project and add a reference to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.896.1">
      Microsoft.AspNetCore.Components.DataAnnotations.Validation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.897.1">
     package that contains all the extensions required for seamless validation of complex, nested
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.898.1">
      data models.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.899.1">
     Next, in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.900.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.901.1">
     , we create a new
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.902.1">
      EventLocation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.903.1">
     class with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.904.1">
      Venue
     </span>
    </strong>
    <span class="koboSpan" id="kobo.905.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.906.1">
      Capacity
     </span>
    </strong>
    <span class="koboSpan" id="kobo.907.1">
     properties, representing event location details.
    </span>
    <span class="koboSpan" id="kobo.907.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.908.1">
      step 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.909.1">
     , we decorate the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.910.1">
      Venue
     </span>
    </strong>
    <span class="koboSpan" id="kobo.911.1">
     property with a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.912.1">
      Required
     </span>
    </strong>
    <span class="koboSpan" id="kobo.913.1">
     attribute to ensure that users cannot submit the form without filling in the venue description.
    </span>
    <span class="koboSpan" id="kobo.913.2">
     Should they forget to enter a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.914.1">
      Venue
     </span>
    </strong>
    <span class="koboSpan" id="kobo.915.1">
     value, they will see a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.916.1">
      You must provide a venue.
     </span>
    </strong>
    <span class="koboSpan" id="kobo.917.1">
     validation message to guide them.
    </span>
    <span class="koboSpan" id="kobo.917.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.918.1">
      step 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.919.1">
     , we add validation to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.920.1">
      Capacity
     </span>
    </strong>
    <span class="koboSpan" id="kobo.921.1">
     property by applying both the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.922.1">
      Required
     </span>
    </strong>
    <span class="koboSpan" id="kobo.923.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.924.1">
      Range
     </span>
    </strong>
    <span class="koboSpan" id="kobo.925.1">
     attributes.
    </span>
    <span class="koboSpan" id="kobo.925.2">
     We enforce that users fill the capacity value and that it falls within a specified range (1 to 1,000).
    </span>
    <span class="koboSpan" id="kobo.925.3">
     Users will receive a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.926.1">
      Capacity must be between 1 and 1000.
     </span>
    </strong>
    <span class="koboSpan" id="kobo.927.1">
     error message if they enter a value outside the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.928.1">
      declared range.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.929.1">
     For
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.930.1">
      step 5
     </span>
    </em>
    <span class="koboSpan" id="kobo.931.1">
     , we turn to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.932.1">
      Event
     </span>
    </strong>
    <span class="koboSpan" id="kobo.933.1">
     class and extend it with a new property –
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.934.1">
      Location
     </span>
    </strong>
    <span class="koboSpan" id="kobo.935.1">
     , of type
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.936.1">
      EventLocation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.937.1">
     .
    </span>
    <span class="koboSpan" id="kobo.937.2">
     To ensure Blazor understands that this property represents a complex type requiring nested validation, we decorate it with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.938.1">
      ValidateComplexType
     </span>
    </strong>
    <span class="koboSpan" id="kobo.939.1">
     attribute.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.940.1">
      ValidateComplexType
     </span>
    </strong>
    <span class="koboSpan" id="kobo.941.1">
     comes with the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.942.1">
       Microsoft.AspNetCore.Components.DataAnnotations.Validation
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.943.1">
      package.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.944.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.945.1">
      step 6
     </span>
    </em>
    <span class="koboSpan" id="kobo.946.1">
     , we proceed
    </span>
    <a id="_idIndexMarker359">
    </a>
    <span class="koboSpan" id="kobo.947.1">
     to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.948.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.949.1">
     component and locate the existing
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.950.1">
      EditForm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.951.1">
     within the markup.
    </span>
    <span class="koboSpan" id="kobo.951.2">
     We will extend the form to include fields for entering the event location details.
    </span>
    <span class="koboSpan" id="kobo.951.3">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.952.1">
      step 7
     </span>
    </em>
    <span class="koboSpan" id="kobo.953.1">
     , we embed a new paragraph just below the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.954.1">
      Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.955.1">
     field where we insert an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.956.1">
      InputText
     </span>
    </strong>
    <span class="koboSpan" id="kobo.957.1">
     component bound to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.958.1">
      Model.Location.Venue
     </span>
    </strong>
    <span class="koboSpan" id="kobo.959.1">
     to allow users to input the venue details.
    </span>
    <span class="koboSpan" id="kobo.959.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.960.1">
      step 8
     </span>
    </em>
    <span class="koboSpan" id="kobo.961.1">
     , we add another paragraph, this time incorporating an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.962.1">
      InputNumber
     </span>
    </strong>
    <span class="koboSpan" id="kobo.963.1">
     component bound to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.964.1">
      Model.Location.Capacity
     </span>
    </strong>
    <span class="koboSpan" id="kobo.965.1">
     to allow users to specify the spots available in a given venue.
    </span>
    <span class="koboSpan" id="kobo.965.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.966.1">
      step 9
     </span>
    </em>
    <span class="koboSpan" id="kobo.967.1">
     , aiming to streamline the display of validation messages, we replace the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.968.1">
      ValidationMessage
     </span>
    </strong>
    <span class="koboSpan" id="kobo.969.1">
     component previously dedicated to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.970.1">
      Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.971.1">
     property with a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.972.1">
      ValidationSummary
     </span>
    </strong>
    <span class="koboSpan" id="kobo.973.1">
     instance.
    </span>
    <span class="koboSpan" id="kobo.973.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.974.1">
      ValidationSummary
     </span>
    </strong>
    <span class="koboSpan" id="kobo.975.1">
     component consolidates all form validation messages into one area.
    </span>
    <span class="koboSpan" id="kobo.975.2">
     Finally, in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.976.1">
      step 10
     </span>
    </em>
    <span class="koboSpan" id="kobo.977.1">
     , we enhance our validation setup by replacing the standard
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.978.1">
      DataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.979.1">
     with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.980.1">
      ObjectGraphDataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.981.1">
     .
    </span>
    <span class="koboSpan" id="kobo.981.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.982.1">
      ObjectGraphDataAnnotationsValidator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.983.1">
     component is an advanced component capable of validating nested object graphs, allowing Blazor to trigger validation on every part of our complex
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.984.1">
       Event
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.985.1">
      model.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-258">
    <a id="_idTextAnchor258">
    </a>
    <span class="koboSpan" id="kobo.986.1">
     There’s more…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.987.1">
     When working with Blazor’s built-in input components, you get an additional layer of flexibility.
    </span>
    <span class="koboSpan" id="kobo.987.2">
     Any default input component, inheriting from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.988.1">
      InputBase
     </span>
    </strong>
    <span class="koboSpan" id="kobo.989.1">
     class, such as the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.990.1">
      InputNumber
     </span>
    </strong>
    <span class="koboSpan" id="kobo.991.1">
     component we’ve used in this recipe, automatically intercepts any unmatched parameters and attaches them directly to the underlying HTML
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.992.1">
      input
     </span>
    </strong>
    <span class="koboSpan" id="kobo.993.1">
     element as attributes.
    </span>
    <span class="koboSpan" id="kobo.993.2">
     With that, you can easily enhance the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.994.1">
      InputNumber
     </span>
    </strong>
    <span class="koboSpan" id="kobo.995.1">
     component used for
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.996.1">
      Model.Location.Capacity
     </span>
    </strong>
    <span class="koboSpan" id="kobo.997.1">
     by declaring
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.998.1">
      min
     </span>
    </strong>
    <span class="koboSpan" id="kobo.999.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1000.1">
      max
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1001.1">
     attributes and disallowing users from manually increasing or decreasing the value beyond the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1002.1">
      specified range:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.1003.1">
Capacity:
    &lt;InputNumber min="1" max="1000"
        @bind-Value="@Model.Location.Capacity" /&gt;</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1004.1">
     By adding
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1005.1">
      min
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1006.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1007.1">
      max
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1008.1">
     attributes to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1009.1">
      InputNumber
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1010.1">
     component in the form and declaring their values to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1011.1">
      1
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1012.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1013.1">
      1000
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1014.1">
     , respectively, we ensure users won’t be able to reduce the value in the input below
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1015.1">
      1
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1016.1">
     nor increment it above
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1017.1">
      1000
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1018.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1018.2">
     They can still type an invalid value by
    </span>
    <a id="_idIndexMarker360">
    </a>
    <span class="koboSpan" id="kobo.1019.1">
     hand, but they’ll trigger validation on the model properties.
    </span>
    <span class="koboSpan" id="kobo.1019.2">
     Following that example, you can leverage any other HTML input attributes you’re
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1020.1">
      familiar with.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-259">
    <a id="_idTextAnchor259">
    </a>
    <span class="koboSpan" id="kobo.1021.1">
     Styling validation messages
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.1022.1">
     In this recipe, we
    </span>
    <a id="_idIndexMarker361">
    </a>
    <span class="koboSpan" id="kobo.1023.1">
     explore the styling of form validation in Blazor.
    </span>
    <span class="koboSpan" id="kobo.1023.2">
     You’ve probably noticed in previous recipes that Blazor automatically applies validation classes to form fields during validation.
    </span>
    <span class="koboSpan" id="kobo.1023.3">
     Default validation CSS classes align with default Bootstrap styles, where invalid fields get a red accent and valid ones get a green accent.
    </span>
    <span class="koboSpan" id="kobo.1023.4">
     While the default settings increase the delivery velocity, in most cases, you will still have to customize the visual feedback to suit your application branding or functional requirements.
    </span>
    <span class="koboSpan" id="kobo.1023.5">
     Fortunately, Blazor allows customizing styling and classes appended to fields upon validation.
    </span>
    <span class="koboSpan" id="kobo.1023.6">
     This customization maintains the integrity of your application’s modular and loosely coupled architecture, ensuring that enhancements do not compromise the maintainability of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1024.1">
      your code.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1025.1">
     Let’s implement a custom validation class provider, making Blazor mark missing labels in red while missing location capacity
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1026.1">
      in yellow.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-260">
    <a id="_idTextAnchor260">
    </a>
    <span class="koboSpan" id="kobo.1027.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1028.1">
     Before implementing a custom validation class provider, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1029.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1030.1">
      Create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1031.1">
       Chapter07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1032.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1033.1">
       Recipe05
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1034.1">
      directory – this will be your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1035.1">
       working directory
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1036.1">
      Copy
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1037.1">
       Event
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1038.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1039.1">
       EventLocation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1040.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1041.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1042.1">
      , and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1043.1">
       EventNameValidationAttribute
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1044.1">
      from the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1045.1">
       Validating complex data models
      </span>
     </em>
     <span class="koboSpan" id="kobo.1046.1">
      recipe or from the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1047.1">
       Chapter07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1048.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1049.1">
       Recipe04
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1050.1">
      directory in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1051.1">
       GitHub repository
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-261">
    <a id="_idTextAnchor261">
    </a>
    <span class="koboSpan" id="kobo.1052.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1053.1">
     Execute the following steps to add a custom validation
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1054.1">
      class provider:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1055.1">
      Add a new
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1056.1">
       EventManager.razor.css
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1057.1">
      file to the working directory.
     </span>
     <span class="koboSpan" id="kobo.1057.2">
      Your IDE might automatically nest that CSS file
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1058.1">
       under
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1059.1">
        EventManager.razor
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1060.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1061.1">
      Within
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1062.1">
       EventManager.razor.css
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1063.1">
      , define an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1064.1">
       invalid-warning
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1065.1">
      style class that adds an
     </span>
     <a id="_idIndexMarker362">
     </a>
     <span class="koboSpan" id="kobo.1066.1">
      orange outline to any element we apply
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1067.1">
       it to:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1068.1">
::deep .invalid-warning {
    outline: 1px solid orange;
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1069.1">
      Create a new
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1070.1">
       TypeValidationClassProvider
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1071.1">
      class, inheriting from
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1072.1">
       FieldCssClassProvider
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1073.1">
      available under the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1074.1">
        Microsoft.AspNetCore.Components.Forms
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1075.1">
       namespace:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1076.1">
public class TypeValidationClassProvider
    : FieldCssClassProvider { }</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1077.1">
      In
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1078.1">
       TypeValidationClassProvider
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1079.1">
      , declare a private
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1080.1">
       _capacity
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1081.1">
      field holding the name of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1082.1">
       Capacity
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1083.1">
      property from the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1084.1">
        EventLocation
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1085.1">
       class:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1086.1">
private static readonly string
    _capacity = nameof(EventLocation.Capacity);</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1087.1">
      To finalize the implementation of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1088.1">
       TypeValidationClassProvider
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1089.1">
      , override the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1090.1">
       GetFieldCssClass()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1091.1">
      method and implement logic to return the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1092.1">
       invalid-warning
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1093.1">
      class when the current field’s value is invalid and corresponds
     </span>
     <a id="_idIndexMarker363">
     </a>
     <span class="koboSpan" id="kobo.1094.1">
      to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1095.1">
       _capacity
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1096.1">
      property; otherwise, fall back to the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1097.1">
        base
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1098.1">
       implementation:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1099.1">
public override string GetFieldCssClass(
    EditContext editContext,
    in FieldIdentifier fieldIdentifier)
{
    var isValid =
        editContext.IsValid(fieldIdentifier);
    var isCapacity =
        fieldIdentifier.FieldName == _capacity;
    if (!isValid &amp;&amp; isCapacity)
        return "invalid-warning";
    return base.GetFieldCssClass(
        editContext, fieldIdentifier);
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1100.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1101.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1102.1">
      component and find the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1103.1">
       OnInitialized()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1104.1">
      method.
     </span>
     <span class="koboSpan" id="kobo.1104.2">
      After the existing setup, use the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1105.1">
       SetFieldCssClassProvider()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1106.1">
      extension method of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1107.1">
       EditContext
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1108.1">
      and attach
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1109.1">
       TypeValidationClassProvider
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1110.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1111.1">
        Context
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1112.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1113.1">
protected override void OnInitialized()
{
    // ... </span><span class="koboSpan" id="kobo.1113.2">existing form context building ...
</span><span class="koboSpan" id="kobo.1113.3">    Context.SetFieldCssClassProvider(
        new TypeValidationClassProvider());
}</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-262">
    <a id="_idTextAnchor262">
    </a>
    <span class="koboSpan" id="kobo.1114.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1115.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1116.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.1117.1">
     , we add a new CSS file to our working directory, specifically naming it
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1118.1">
      EventManager.razor.css
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1119.1">
     to adhere to the CSS isolation requirements and match the name of the component it will style.
    </span>
    <span class="koboSpan" id="kobo.1119.2">
     In
    </span>
    <a id="_idIndexMarker364">
    </a>
    <span class="koboSpan" id="kobo.1120.1">
     Blazor,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1121.1">
      CSS isolation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1122.1">
     allows styles defined in a component-specific CSS file to affect only that component, preventing styles from leaking.
    </span>
    <span class="koboSpan" id="kobo.1122.2">
     If you enable the file nesting in your IDE, you will see isolated CSS files wrapped under the parent component file.
    </span>
    <span class="koboSpan" id="kobo.1122.3">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1123.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.1124.1">
     , within
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1125.1">
      EventManager.razor.css
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1126.1">
     , we introduce a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1127.1">
      .invalid-warning
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1128.1">
     class, which applies an orange outline to fields we attach it to.
    </span>
    <span class="koboSpan" id="kobo.1128.2">
     We use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1129.1">
      ::deep
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1130.1">
     combinator to ensure that styling penetrates DOM-like encapsulations and affects
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1131.1">
      nested components.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1132.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1133.1">
      step 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.1134.1">
     , we initiate our custom validation class provider by creating a new
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1135.1">
      TypeValidationClassProvider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1136.1">
     class, which inherits from
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1137.1">
      FieldCssClassProvider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1138.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1138.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1139.1">
      FieldCssClassProvider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1140.1">
     class provides the necessary API to customize CSS classes that Blazor applies based on field validation states.
    </span>
    <span class="koboSpan" id="kobo.1140.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1141.1">
      step 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.1142.1">
     , we
    </span>
    <a id="_idIndexMarker365">
    </a>
    <span class="koboSpan" id="kobo.1143.1">
     persist the name of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1144.1">
      Capacity
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1145.1">
     field in a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1146.1">
      _capacity
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1147.1">
     variable within
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1148.1">
      TypeValidationClassProvider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1149.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1149.2">
     By declaring it as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1150.1">
      private
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1151.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1152.1">
      static
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1153.1">
     , we ensure that this value remains unchanged and consumes minimal memory throughout the application’s life cycle, effectively becoming a singleton instance.
    </span>
    <span class="koboSpan" id="kobo.1153.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1154.1">
      step 5
     </span>
    </em>
    <span class="koboSpan" id="kobo.1155.1">
     , we complete our custom provider by overriding the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1156.1">
      GetFieldCssClass()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1157.1">
     method, which Blazor calls whenever it needs to determine the appropriate CSS class based on the validation state of a field.
    </span>
    <span class="koboSpan" id="kobo.1157.2">
     In our implementation, we first check whether the field’s current state is valid and its name matches the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1158.1">
      _capacity
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1159.1">
     value.
    </span>
    <span class="koboSpan" id="kobo.1159.2">
     If the field is invalid and refers to the capacity, we return
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1160.1">
      invalid-warning
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1161.1">
     , instructing Blazor to apply the orange outline to highlight the error.
    </span>
    <span class="koboSpan" id="kobo.1161.2">
     Otherwise, we default to the base implementation by returning the result of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1162.1">
      base.GetFieldCssClass()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1163.1">
     call, preserving standard behavior for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1164.1">
      other fields.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1165.1">
     Finally, in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1166.1">
      step 6
     </span>
    </em>
    <span class="koboSpan" id="kobo.1167.1">
     , we jump to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1168.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1169.1">
     component and locate the overridden
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1170.1">
      OnInitialized()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1171.1">
     life cycle method, where we initialize the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1172.1">
      Context
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1173.1">
     variable.
    </span>
    <span class="koboSpan" id="kobo.1173.2">
     After the initial configurations, we utilize the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1174.1">
      SetFieldCssClassProvider()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1175.1">
     extension method of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1176.1">
      EditContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1177.1">
     to configure
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1178.1">
      Context
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1179.1">
     to employ our
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1180.1">
      TypeValidationClassProvider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1181.1">
     for resolving CSS classes based on field validation.
    </span>
    <span class="koboSpan" id="kobo.1181.2">
     Our custom styling logic is now
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1182.1">
      in place.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-263">
    <a id="_idTextAnchor263">
    </a>
    <span class="koboSpan" id="kobo.1183.1">
     There’s more…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1184.1">
     We’ve implemented a custom CSS validation class and leveraged the CSS isolation feature that Blazor
    </span>
    <a id="_idIndexMarker366">
    </a>
    <span class="koboSpan" id="kobo.1185.1">
     offers.
    </span>
    <span class="koboSpan" id="kobo.1185.2">
     However, if you have already integrated a CSS framework into your application, you can simply use the validation classes the framework provides instead of creating
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1186.1">
      custom ones.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1187.1">
     Bootstrap, being the most common CSS framework to date, offers
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1188.1">
      border
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1189.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1190.1">
      border-warning
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1191.1">
     CSS classes, which you can use to highlight invalid input fields.
    </span>
    <span class="koboSpan" id="kobo.1191.2">
     Navigate to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1192.1">
      TypeValidationClassProvider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1193.1">
     and update the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1194.1">
      GetFieldCssClass()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1195.1">
     implementation
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1196.1">
      as follows:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.1197.1">
public override string GetFieldCssClass(
    EditContext editContext,
    in FieldIdentifier fieldIdentifier)
{
    var isValid = editContext.IsValid(fieldIdentifier);
    var isCapacity =
        fieldIdentifier.FieldName == _capacity;
    if (!isValid &amp;&amp; isCapacity)
        return "border border-warning";
    return base.GetFieldCssClass(
        editContext, fieldIdentifier);
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1198.1">
     The custom validation logic remains intact – we still check whether the validation context is valid and whether the validated field refers to the capacity.
    </span>
    <span class="koboSpan" id="kobo.1198.2">
     However, when the custom validation fails, instead of returning the custom warning class, we leverage the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1199.1">
      border border-warning
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1200.1">
     classes
    </span>
    <a id="_idIndexMarker367">
    </a>
    <span class="koboSpan" id="kobo.1201.1">
     combination and effectively delegate the styling
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1202.1">
      to Bootstrap.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-264">
    <a id="_idTextAnchor264">
    </a>
    <span class="koboSpan" id="kobo.1203.1">
     Displaying a toast when validation fails
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.1204.1">
     In this recipe, we
    </span>
    <a id="_idIndexMarker368">
    </a>
    <span class="koboSpan" id="kobo.1205.1">
     explore how to enhance form validation
    </span>
    <a id="_idIndexMarker369">
    </a>
    <span class="koboSpan" id="kobo.1206.1">
     feedback with a custom display of validation errors.
    </span>
    <span class="koboSpan" id="kobo.1206.2">
     Blazor’s
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1207.1">
      ValidationSummary
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1208.1">
     component provides a straightforward way to collect and display all validation messages from a form in a single container, typically rendered as a simple
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1209.1">
      div
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1210.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1210.2">
     While functional, this default presentation might not always align with a desired user experience or the aesthetic standards of your application.
    </span>
    <span class="koboSpan" id="kobo.1210.3">
     You can replace the standard
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1211.1">
      ValidationSummary
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1212.1">
     component with a custom implementation to make validation messages more engaging and fit seamlessly with the broader notification strategy of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1213.1">
      your application.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1214.1">
     Let’s implement a custom component that displays validation errors inside a default Bootstrap toast, making a more modern version
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1215.1">
      of
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1216.1">
       ValidationSummary
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1217.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-265">
    <a id="_idTextAnchor265">
    </a>
    <span class="koboSpan" id="kobo.1218.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1219.1">
     Before diving into the implementation of a custom validation summary, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1220.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1221.1">
      Create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1222.1">
       Chapter07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1223.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1224.1">
       Recipe06
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1225.1">
      directory – this will be your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1226.1">
       working directory
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1227.1">
      Copy
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1228.1">
       Event
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1229.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1230.1">
       EventLocation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1231.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1232.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1233.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1234.1">
       EventNameValidationAttribute
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1235.1">
      , and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1236.1">
       TypeValidationClassProvider
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1237.1">
      from the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1238.1">
       Styling validation messages
      </span>
     </em>
     <span class="koboSpan" id="kobo.1239.1">
      recipe or from the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1240.1">
       Chapter07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1241.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1242.1">
       Recipe05
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1243.1">
      directory in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1244.1">
       GitHub repository
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-266">
    <a id="_idTextAnchor266">
    </a>
    <span class="koboSpan" id="kobo.1245.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1246.1">
     Follow these steps to introduce a custom
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1247.1">
      validation summary:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1248.1">
      Create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1249.1">
       ValidationToast
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1250.1">
      component that implements the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1251.1">
        IDisposable
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1252.1">
       interface:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1253.1">
@implements IDisposable</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1254.1">
      Inside the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1255.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1256.1">
      block of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1257.1">
       ValidationToast
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1258.1">
      component, declare a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1259.1">
       CascadingParameter
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1260.1">
      parameter of type
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1261.1">
       EditContext
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1262.1">
      and an
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1263.1">
        IsDisplayed
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1264.1">
       property:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1265.1">
[CascadingParameter]
public EditContext Context { get; set; }
protected bool IsDisplayed { get; set; }</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1266.1">
      Still within the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1267.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1268.1">
      block, implement a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1269.1">
       Rerender()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1270.1">
      method, matching the signature of a subscriber of an
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1271.1">
        EventHandler&lt;ValidationStateChangedEventArgs&gt;
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1272.1">
       handler:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1273.1">
private void Rerender(object sender,
ValidationStateChangedEventArgs args) { }</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1274.1">
      Inside
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1275.1">
       Rerender()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1276.1">
      , set
     </span>
     <a id="_idIndexMarker370">
     </a>
     <span class="koboSpan" id="kobo.1277.1">
      the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1278.1">
       IsDisplayed
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1279.1">
      property
     </span>
     <a id="_idIndexMarker371">
     </a>
     <span class="koboSpan" id="kobo.1280.1">
      based on whether there are any validation messages in
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1281.1">
       Context
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1282.1">
      and invoke the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1283.1">
       StateHasChanged()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1284.1">
      to trigger a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1285.1">
       UI refresh:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1286.1">
IsDisplayed = Context.GetValidationMessages().Any();
StateHasChanged();</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1287.1">
      Below
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1288.1">
       Rerender()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1289.1">
      , override the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1290.1">
       OnInitialized()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1291.1">
      life cycle method and subscribe to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1292.1">
       OnValidationStateChanged
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1293.1">
      event
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1294.1">
       of
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1295.1">
        EditContext
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1296.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1297.1">
protected override void OnInitialized()
    =&gt; Context.OnValidationStateChanged += Rerender;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1298.1">
      Complete the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1299.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1300.1">
      block by implementing the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1301.1">
       Dispose()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1302.1">
      method and unsubscribe from the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1303.1">
        OnValidationStateChanged
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1304.1">
       event:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1305.1">
public void Dispose()
    =&gt; Context.OnValidationStateChanged -= Rerender;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1306.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1307.1">
       ValidationToast
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1308.1">
      markup, below the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1309.1">
       @implements
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1310.1">
      directive, include a fast-return clause to prevent any markup rendering based on the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1311.1">
        IsDisplayed
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1312.1">
       value:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1313.1">
@if (!IsDisplayed) return;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1314.1">
      Below the fast-return clause, construct a frame of a default Bootstrap
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1315.1">
       toast notification:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1316.1">
&lt;div class="position-fixed bottom-0 end-0 p-3"
    style="z-index: 1"&gt;
    &lt;div class="toast text-white bg-danger show"&gt;
        @* toast area *@
    &lt;/div&gt;
&lt;/div&gt;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1317.1">
      Within the toast
     </span>
     <a id="_idIndexMarker372">
     </a>
     <span class="koboSpan" id="kobo.1318.1">
      area, add
     </span>
     <a id="_idIndexMarker373">
     </a>
     <span class="koboSpan" id="kobo.1319.1">
      an empty header for aesthetics, and in the toast body, implement logic to dynamically render the list of validation messages retrieved
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1320.1">
       from
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1321.1">
        EditContext
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1322.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1323.1">
&lt;div class="toast-header" /&gt;
&lt;div class="toast-body"&gt;
    @foreach (var message in
        Context.GetValidationMessages())
    {
        &lt;div&gt;@message&lt;/div&gt;
    }
&lt;/div&gt;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1324.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1325.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1326.1">
      component, above the form submit button, and remove the existing
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1327.1">
       ValidationSummary
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1328.1">
      paragraph.
     </span>
     <span class="koboSpan" id="kobo.1328.2">
      Replace it with an instance of the new
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1329.1">
        ValidationToast
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1330.1">
       component:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1331.1">
&lt;ValidationToast /&gt;</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-267">
    <a id="_idTextAnchor267">
    </a>
    <span class="koboSpan" id="kobo.1332.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1333.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1334.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.1335.1">
     , we create a new
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1336.1">
      ValidationToast
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1337.1">
     component that implements the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1338.1">
      IDisposable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1339.1">
     interface to ensure a proper resource clean-up as we will work with an
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1340.1">
      event handler.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1341.1">
     From
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1342.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.1343.1">
     , we work on the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1344.1">
      @code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1345.1">
     block of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1346.1">
      ValidationToast
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1347.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.1347.2">
     We declare a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1348.1">
      CascadingParameter
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1349.1">
     parameter of type
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1350.1">
      EditContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1351.1">
     to gain access to the parent form’s context.
    </span>
    <span class="koboSpan" id="kobo.1351.2">
     We also declare an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1352.1">
      IsDisplayed
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1353.1">
     property, which will help us control the visibility of the toast based on validation results.
    </span>
    <span class="koboSpan" id="kobo.1353.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1354.1">
      step 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.1355.1">
     , we initialize a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1356.1">
      Rerender
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1357.1">
     method, accepting the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1358.1">
      sender
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1359.1">
     parameter and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1360.1">
      args
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1361.1">
     of type
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1362.1">
      ValidationStateChangedEventArgs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1363.1">
     , so we can subscribe it later to a matching
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1364.1">
      EventHandler
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1365.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1365.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1366.1">
      step 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.1367.1">
     , we implement the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1368.1">
      Rerender
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1369.1">
     logic, where we determine whether there are any validation messages in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1370.1">
      Context
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1371.1">
     instance and set the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1372.1">
      IsDisplayed
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1373.1">
     property, indicating
    </span>
    <a id="_idIndexMarker374">
    </a>
    <span class="koboSpan" id="kobo.1374.1">
     that there are errors to display.
    </span>
    <span class="koboSpan" id="kobo.1374.2">
     We
    </span>
    <a id="_idIndexMarker375">
    </a>
    <span class="koboSpan" id="kobo.1375.1">
     then invoke
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1376.1">
      StateHasChanged()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1377.1">
     to prompt Blazor to refresh the UI and reflect the updated state.
    </span>
    <span class="koboSpan" id="kobo.1377.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1378.1">
      step 5
     </span>
    </em>
    <span class="koboSpan" id="kobo.1379.1">
     , we override the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1380.1">
      OnInitialized()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1381.1">
     life cycle method to subscribe the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1382.1">
      Rerender()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1383.1">
     method to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1384.1">
      OnValidationStateChanged
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1385.1">
     event of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1386.1">
      EditContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1387.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1387.2">
     Blazor will execute
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1388.1">
      Rerender()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1389.1">
     every time the form’s validation state changes, allowing our toast notification to update reactively.
    </span>
    <span class="koboSpan" id="kobo.1389.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1390.1">
      step 6
     </span>
    </em>
    <span class="koboSpan" id="kobo.1391.1">
     , we implement the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1392.1">
      Dispose()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1393.1">
     method, where we unsubscribe from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1394.1">
      OnValidationStateChanged
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1395.1">
     event, ensuring that
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1396.1">
      ValidationToast
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1397.1">
     does not continue to react to events after it has been removed from the UI, thus preventing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1398.1">
      memory leaks.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1399.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1400.1">
      step 7
     </span>
    </em>
    <span class="koboSpan" id="kobo.1401.1">
     , we focus on the markup of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1402.1">
      ValidationToast
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1403.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1403.2">
     We start below the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1404.1">
      @implements
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1405.1">
     directive with a fast-return clause, based on the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1406.1">
      IsDisplayed
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1407.1">
     value, which instructs Blazor to immediately exit the rendering process when there are no validation messages.
    </span>
    <span class="koboSpan" id="kobo.1407.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1408.1">
      step 8
     </span>
    </em>
    <span class="koboSpan" id="kobo.1409.1">
     , we construct a visual frame using default Bootstrap classes to create a toast notification.
    </span>
    <span class="koboSpan" id="kobo.1409.2">
     As it’s standard Bootstrap code, we won’t analyze it deeply.
    </span>
    <span class="koboSpan" id="kobo.1409.3">
     Shortly, we position the frame fixed at the bottom end of the viewport, ensuring that it is visible but non-intrusive.
    </span>
    <span class="koboSpan" id="kobo.1409.4">
     We also make the toast red to clearly indicate that there’s a problem.
    </span>
    <span class="koboSpan" id="kobo.1409.5">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1410.1">
      step 9
     </span>
    </em>
    <span class="koboSpan" id="kobo.1411.1">
     , we implement the toast area.
    </span>
    <span class="koboSpan" id="kobo.1411.2">
     We add an empty header for visual balance and a body where we iterate over the result of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1412.1">
      Context.GetValidationMessages()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1413.1">
     call and dynamically render each
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1414.1">
      validation message.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1415.1">
     Lastly, in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1416.1">
      step 10
     </span>
    </em>
    <span class="koboSpan" id="kobo.1417.1">
     , we jump to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1418.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1419.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.1419.2">
     Here, we remove the existing
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1420.1">
      ValidationSummary
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1421.1">
     paragraph and replace it with the new
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1422.1">
      ValidationToast
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1423.1">
     component, which now handles the display of validation messages in a more interactive and visually
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1424.1">
      engaging manner.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1425.1">
     We arrive at a still simple
    </span>
    <a id="_idIndexMarker376">
    </a>
    <span class="koboSpan" id="kobo.1426.1">
     but
    </span>
    <a id="_idIndexMarker377">
    </a>
    <span class="koboSpan" id="kobo.1427.1">
     more modern validation summary that our users
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1428.1">
      will appreciate:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer030">
     <span class="koboSpan" id="kobo.1429.1">
      <img alt="Figure 7.3: Toast notification replacing a standard validation summary container" src="image/B22020_07_3.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1430.1">
     Figure 7.3: Toast notification replacing a standard validation summary container
    </span>
   </p>
   <h1 id="_idParaDest-268">
    <a id="_idTextAnchor268">
    </a>
    <span class="koboSpan" id="kobo.1431.1">
     Enabling a submit option based on the form state
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.1432.1">
     In this recipe, we
    </span>
    <a id="_idIndexMarker378">
    </a>
    <span class="koboSpan" id="kobo.1433.1">
     dive into a strategy to enhance
    </span>
    <a id="_idIndexMarker379">
    </a>
    <span class="koboSpan" id="kobo.1434.1">
     the user experience by dynamically controlling the state of the form’s submit button.
    </span>
    <span class="koboSpan" id="kobo.1434.2">
     We use forms not only when creating a new object but also when modifying an existing one as well.
    </span>
    <span class="koboSpan" id="kobo.1434.3">
     It makes sense that we would prevent the form submission when a user didn’t make any changes or if some input is invalid.
    </span>
    <span class="koboSpan" id="kobo.1434.4">
     Having that feature in place, we improve the user experience, conserve memory usage, and reduce unnecessary
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1435.1">
      server requests.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1436.1">
     Let’s enhance a form with a mechanism that enables form saving only when there have been changes to the form data and all inputs
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1437.1">
      are valid.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-269">
    <a id="_idTextAnchor269">
    </a>
    <span class="koboSpan" id="kobo.1438.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1439.1">
     Before making the form submit button react to the form state, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1440.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1441.1">
      Create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1442.1">
       Chapter07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1443.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1444.1">
       Recipe07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1445.1">
      directory – this will be your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1446.1">
       working directory
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1447.1">
      Copy
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1448.1">
       Event
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1449.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1450.1">
       EventLocation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1451.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1452.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1453.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1454.1">
       EventNameValidationAttribute
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1455.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1456.1">
       TypeValidationClassProvider
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1457.1">
      , and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1458.1">
       ValidationToast
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1459.1">
      from the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1460.1">
       Displaying toast when validation fails
      </span>
     </em>
     <span class="koboSpan" id="kobo.1461.1">
      recipe or from the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1462.1">
       Chapter07
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1463.1">
      /
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1464.1">
       Recipe06
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1465.1">
      directory in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1466.1">
       GitHub repository
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-270">
    <a id="_idTextAnchor270">
    </a>
    <span class="koboSpan" id="kobo.1467.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1468.1">
     Follow these steps to
    </span>
    <a id="_idIndexMarker380">
    </a>
    <span class="koboSpan" id="kobo.1469.1">
     make
    </span>
    <a id="_idIndexMarker381">
    </a>
    <span class="koboSpan" id="kobo.1470.1">
     the form submit button reactive to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1471.1">
      form state:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1472.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1473.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1474.1">
      component and update it to implement the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1475.1">
       IDisposable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1476.1">
      interface and to render mode
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1477.1">
       in
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1478.1">
        InteractiveWebAssembly
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1479.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1480.1">
@rendermode InteractiveWebAssembly
@implements IDisposable</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1481.1">
      Within the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1482.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1483.1">
      block of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1484.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1485.1">
      , introduce an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1486.1">
       IsSubmittable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1487.1">
      variable of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1488.1">
       type
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1489.1">
        bool
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1490.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1491.1">
protected bool IsSubmittable;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1492.1">
      Still in the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1493.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1494.1">
      block, add a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1495.1">
       FieldChanged()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1496.1">
      method that conforms to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1497.1">
       EventHandler&lt;FieldChangedEventArgs&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1498.1">
      response pattern and resolve the form’s current state into the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1499.1">
        IsSubmittable
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1500.1">
       variable:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1501.1">
private void FieldChanged(
    object sender, FieldChangedEventArgs args)
{
    IsSubmittable =
        Context.Validate() &amp;&amp; Context.IsModified();
    StateHasChanged();
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1502.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1503.1">
       OnInitialized()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1504.1">
      method, initiate a default value for the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1505.1">
       Model
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1506.1">
      instance to simulate a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1507.1">
       data-editing scenario:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1508.1">
Model ??= new()
{
    Name = "Packt Party",
    Location = new()
    {
        Venue = "Packt Room",
        Capacity = 150
    }
};</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1509.1">
      At the
     </span>
     <a id="_idIndexMarker382">
     </a>
     <span class="koboSpan" id="kobo.1510.1">
      end
     </span>
     <a id="_idIndexMarker383">
     </a>
     <span class="koboSpan" id="kobo.1511.1">
      of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1512.1">
       OnInitialized()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1513.1">
      method, subscribe the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1514.1">
       FieldChanged()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1515.1">
      method to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1516.1">
       OnFieldChanged
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1517.1">
      event, exposed by the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1518.1">
        EditContext
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1519.1">
       API:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1520.1">
Context.OnFieldChanged += FieldChanged;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1521.1">
      Complete the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1522.1">
       IDisposable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1523.1">
      implementation by adding a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1524.1">
       Dispose()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1525.1">
      method at the end of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1526.1">
       @code
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1527.1">
      block and unsubscribe
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1528.1">
       FieldChanged()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1529.1">
      from the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1530.1">
        OnFieldChanged
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1531.1">
       handler:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1532.1">
public void Dispose()
    =&gt; Context.OnFieldChanged -= FieldChanged;</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1533.1">
      Switch to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1534.1">
       EventManager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1535.1">
      markup and locate the submit button.
     </span>
     <span class="koboSpan" id="kobo.1535.2">
      Set the button’s
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1536.1">
       disabled
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1537.1">
      attribute to the negated value of the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1538.1">
        IsSubmittable
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1539.1">
       variable:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1540.1">
&lt;button type="submit" disabled="@(!IsSubmittable)"&gt;
    Save
&lt;/button&gt;</span></pre>
    </li>
   </ol>
   <h2 id="_idParaDest-271">
    <a id="_idTextAnchor271">
    </a>
    <span class="koboSpan" id="kobo.1541.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1542.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1543.1">
      step 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.1544.1">
     , we start by enhancing the interactivity of our form located in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1545.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1546.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1546.2">
     We configure
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1547.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1548.1">
     to render in an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1549.1">
      InteractiveWebAssembly
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1550.1">
     mode, enabling component interactivity, and we declare that it will implement the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1551.1">
      IDisposable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1552.1">
     interface allowing a custom
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1553.1">
      cleanup implementation.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1554.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1555.1">
      step 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.1556.1">
     , we move to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1557.1">
      @code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1558.1">
     block of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1559.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1560.1">
     and declare an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1561.1">
      IsSubmittable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1562.1">
     variable that we will leverage in managing the state of the form’s submit button.
    </span>
    <span class="koboSpan" id="kobo.1562.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1563.1">
      step 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.1564.1">
     , we implement a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1565.1">
      FieldChanged()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1566.1">
     method that takes the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1567.1">
      sender
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1568.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1569.1">
      args
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1570.1">
     parameters of type
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1571.1">
      FieldChangedEventArgs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1572.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1572.2">
     Inside
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1573.1">
      FieldChanged()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1574.1">
     , we utilize the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1575.1">
      EditContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1576.1">
     API through the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1577.1">
      Context
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1578.1">
     instance to dynamically evaluate the form’s state.
    </span>
    <span class="koboSpan" id="kobo.1578.2">
     We set the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1579.1">
      IsSubmittable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1580.1">
     variable by checking whether
    </span>
    <a id="_idIndexMarker384">
    </a>
    <span class="koboSpan" id="kobo.1581.1">
     all
    </span>
    <a id="_idIndexMarker385">
    </a>
    <span class="koboSpan" id="kobo.1582.1">
     form fields are valid, using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1583.1">
      Context.Validate()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1584.1">
     , and the form was modified, using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1585.1">
      Context.IsModified()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1586.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1586.2">
     Given that this operation can affect the state of the form’s submit button, we call
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1587.1">
      StateHasChanged()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1588.1">
     to notify Blazor that the UI might
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1589.1">
      need updating.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1590.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1591.1">
      step 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.1592.1">
     , we adjust how
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1593.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1594.1">
     initializes.
    </span>
    <span class="koboSpan" id="kobo.1594.2">
     Instead of resetting the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1595.1">
      Model
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1596.1">
     object to a new instance, we simulate editing an existing model by setting initial properties, reflecting a typical data-editing scenario.
    </span>
    <span class="koboSpan" id="kobo.1596.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1597.1">
      step 5
     </span>
    </em>
    <span class="koboSpan" id="kobo.1598.1">
     , as part of the initialization process, we also subscribe
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1599.1">
      FieldChanged()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1600.1">
     to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1601.1">
      Context.OnFieldChanged
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1602.1">
     event handler.
    </span>
    <span class="koboSpan" id="kobo.1602.2">
     Blazor triggers
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1603.1">
      OnFieldChanged
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1604.1">
     whenever the form field’s value changes, ensuring our form responds to every edit.
    </span>
    <span class="koboSpan" id="kobo.1604.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1605.1">
      step 6
     </span>
    </em>
    <span class="koboSpan" id="kobo.1606.1">
     , we finalize the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1607.1">
      IDisposable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1608.1">
     implementation.
    </span>
    <span class="koboSpan" id="kobo.1608.2">
     We implement the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1609.1">
      Dispose()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1610.1">
     method, where we unsubscribe
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1611.1">
      FieldChanged()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1612.1">
     from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1613.1">
      OnFieldChanged
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1614.1">
     event handler to prevent memory leaks and ensure that the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1615.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1616.1">
     component is disposed of gracefully when it is no
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1617.1">
      longer needed.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1618.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1619.1">
      step 7
     </span>
    </em>
    <span class="koboSpan" id="kobo.1620.1">
     , we jump to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1621.1">
      EventManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1622.1">
     markup to reflect our backend logic in the UI.
    </span>
    <span class="koboSpan" id="kobo.1622.2">
     We locate the form’s submit button and attach a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1623.1">
      disabled
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1624.1">
     attribute, setting its value to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1625.1">
      IsSubmittable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1626.1">
     negation.
    </span>
    <span class="koboSpan" id="kobo.1626.2">
     Whenever the user changes focus between fields in the form, we will recalculate the value of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1627.1">
      IsSubmittable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1628.1">
     – and since
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1629.1">
      IsSubmittable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1630.1">
     indicates whether the user made changes and the form is in a valid state, negating this value determines when the submit button should be disabled, preventing unnecessary submission until all conditions for a valid and modified form
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1631.1">
      are met.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-272">
    <a id="_idTextAnchor272">
    </a>
    <span class="koboSpan" id="kobo.1632.1">
     There’s more…
    </span>
   </h2>
   <p>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1633.1">
      EditContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1634.1">
     in Blazor plays a
    </span>
    <a id="_idIndexMarker386">
    </a>
    <span class="koboSpan" id="kobo.1635.1">
     crucial role in
    </span>
    <a id="_idIndexMarker387">
    </a>
    <span class="koboSpan" id="kobo.1636.1">
     managing form
    </span>
    <a id="_idIndexMarker388">
    </a>
    <span class="koboSpan" id="kobo.1637.1">
     states and validations but has some limitations.
    </span>
    <span class="koboSpan" id="kobo.1637.2">
     One significant caveat is that it does not track the initial state of model properties.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1638.1">
      EditContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1639.1">
     monitors changes to input fields, marking them as modified when their values change.
    </span>
    <span class="koboSpan" id="kobo.1639.2">
     However, if the user reverts a field’s value to its original state,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1640.1">
      EditContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1641.1">
     still considers it modified.
    </span>
    <span class="koboSpan" id="kobo.1641.2">
     This behavior can lead to scenarios where forms may incorrectly allow submission or display validation states because they do not recognize that the field value has returned to its
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1642.1">
      initial state.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1643.1">
     To address this limitation and refine the behavior of form modifications, you must implement an equality comparer, inheriting from
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1644.1">
      IEqualityComparer&lt;T&gt;
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1645.1">
     to customize how equality for reference types is determined.
    </span>
    <span class="koboSpan" id="kobo.1645.2">
     Having an explicit comparison logic, we can persist the initial value of the model in an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1646.1">
      _initialModel
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1647.1">
     variable and replace the standard
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1648.1">
      Context.IsModified()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1649.1">
     check with an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1650.1">
      _initialModel != Model
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1651.1">
     evaluation.
    </span>
    <span class="koboSpan" id="kobo.1651.2">
     Blazor will disable the submit button when the user’s input returns to the initial values, ensuring that the form is only submittable with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1652.1">
      actual changes.
     </span>
    </span>
   </p>
  </div>
 </body></html>