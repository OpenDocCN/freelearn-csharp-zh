<html><head></head><body><div class="chapter" title="Chapter&#xA0;6.&#xA0;Atlas and Font Customization"><div class="titlepage"><div><div><h1 class="title"><a id="ch06"/>Chapter 6. Atlas and Font Customization</h1></div></div></div><p>In this chapter, we will learn how to create a new atlas and add our own assets. At the end of this chapter, you will know how to handle normal, sliced, and tiled sprites.</p><p>We will use these new assets to add icons to our powers and selected powers. We will also change the backgrounds of our different windows, and add a new font to our project.</p><p>A small exercise will let you customize your main menu as you see fit before we move on to the final chapter. First, we need to learn how to create our own <span class="strong"><strong>Game</strong></span> atlas.</p><div class="section" title="The Atlas prefab"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec44"/>The Atlas prefab</h1></div></div></div><p>With NGUI, an <a id="id263" class="indexterm"/>Atlas prefab is used to contain sprites and fonts. It is<a id="id264" class="indexterm"/> composed of the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A large texture file containing all sprites and fonts</li><li class="listitem" style="list-style-type: disc">A material with this texture file assigned, and a specific shader</li></ul></div><p>The Atlas prefab has a <span class="strong"><strong>UIAtlas</strong></span> component attached to it. Its purpose is to contain information about your sprites' positions and sizes in the large texture.</p><p>It is much more efficient to use only one large texture that holds all our sprites, instead of having separate multiple small textures.</p></div></div>
<div class="section" title="Creating a new Atlas"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec45"/>Creating a new Atlas</h1></div></div></div><p>Let's create our own<a id="id265" class="indexterm"/> Atlas to hold our sprites and new fonts. First, open our <span class="strong"><strong>Menu</strong></span> scene. In order to do this, we will use the <span class="strong"><strong>Atlas Maker</strong></span> wizard.</p><p>Navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Atlas Maker</strong></span>, or press <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>M</em></span> to bring up the following screen:</p><div class="mediaobject"><img src="graphics/8667OT_06_01.jpg" alt="Creating a new Atlas"/></div><p>To create<a id="id266" class="indexterm"/> the Atlas, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the first field, type in the new atlas' name as <code class="literal">Game</code>.</li><li class="listitem">Click on the green <span class="strong"><strong>Create</strong></span> button.</li></ol></div><p>Our new <span class="strong"><strong>Game</strong></span> atlas has been created, and it is selected in the <span class="strong"><strong>Atlas Maker</strong></span> wizard. It is empty for now. Let's change this.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note19"/>Note</h3><p>You may have as many Atlases as you want, but remember that rendering multiple Atlases simultaneously will increase the number of draw calls.</p></div></div></div>
<div class="section" title="Adding sprites to Atlas"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec46"/>Adding sprites to Atlas</h1></div></div></div><p>Let's add <a id="id267" class="indexterm"/>some sprites to our new <span class="strong"><strong>Game</strong></span> atlas. We will add the following <a id="id268" class="indexterm"/>three different types:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Simple</strong></span> sprite: As its name suggests, it is simply an image displayed on screen</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Sliced</strong></span> sprite: In this, the image is sliced in nine parts and it is resizable without stretching corners</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Tiled</strong></span> sprite: In this, the tiling pattern is repeatable indefinitely</li></ul></div><p>Let's start with the <span class="strong"><strong>Simple</strong></span> sprites.</p><div class="section" title="Simple sprites"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec61"/>Simple sprites</h2></div></div></div><p>It is time<a id="id269" class="indexterm"/> to <a id="id270" class="indexterm"/>create two sprites, Bomb and Time, which will illustrate our powers. First, we need to create the sprites and add them to our <span class="strong"><strong>Game</strong></span> atlas. They will look as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_06_02.jpg" alt="Simple sprites"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note20"/>Note</h3><p>You may either create them yourself, or download the <code class="literal">Assets.zip</code> file from <a class="ulink" href="http://goo.gl/bZu4mF">http://goo.gl/bZu4mF</a>.</p></div></div><p>If you wish<a id="id271" class="indexterm"/> to create your own sprites, a size of 128 x 128 will be enough. You can save them either as <code class="literal">.png</code> to support transparency, or as <code class="literal">.psd</code> files—they will be converted to the correct format when they will be imported in the Unity project.</p><div class="section" title="Adding sprites to Atlas"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec21"/>Adding sprites to Atlas</h3></div></div></div><p>When your Bomb and Time sprites are ready, or downloaded from the previous link, place them in a new <code class="literal">Assets</code>/<code class="literal">Textures</code> folder in your project. Then, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open <span class="strong"><strong>Atlas Maker</strong></span> from <span class="strong"><strong>NGUI</strong></span>, or <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>M</em></span>.</li><li class="listitem">Make sure that our new <span class="strong"><strong>Game</strong></span> Atlas is selected, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/8667OT_06_03.jpg" alt="Adding sprites to Atlas"/></div></li><li class="listitem">In the <span class="strong"><strong>Project</strong></span> view, select both our new <span class="strong"><strong>Bomb</strong></span> and <span class="strong"><strong>Time</strong></span> textures.</li><li class="listitem">Click on the <span class="strong"><strong>Add/Update All</strong></span> button in <span class="strong"><strong>Atlas Maker</strong></span>.</li></ol></div><p>Good. Our two new sprites have been added to the <span class="strong"><strong>Game</strong></span> atlas.</p></div><div class="section" title="Available powers icons"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec22"/>Available powers icons</h3></div></div></div><p>Let's add the icons to<a id="id272" class="indexterm"/> our <span class="strong"><strong>Time</strong></span> and <span class="strong"><strong>Bomb</strong></span> prefabs on the scene and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the <span class="strong"><strong>Hierarchy</strong></span> view, select <span class="strong"><strong>Background</strong></span> by navigating to <span class="strong"><strong>PowersContainer</strong></span> | <span class="strong"><strong>Grid</strong></span> | <span class="strong"><strong>Bomb</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Duplicate it.</li><li class="listitem">Rename this new duplicate as <code class="literal">Icon</code>.</li><li class="listitem">Change its <span class="strong"><strong>Sprite Type</strong></span> parameter in <span class="strong"><strong>UISprite</strong></span> to <span class="strong"><strong>Simple</strong></span>.</li><li class="listitem">Set its <span class="strong"><strong>Depth</strong></span> to <code class="literal">6</code> so that it can be displayed over the background.</li></ol></div></li><li class="listitem">Click on the <span class="strong"><strong>Atlas</strong></span> button in <span class="strong"><strong>UISprite</strong></span> and in the pop-up window, select our new <span class="strong"><strong>Game</strong></span> atlas.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note21"/>Note</h3><p>If the new <span class="strong"><strong>Game</strong></span> Atlas is not visible in the list, drag it from the <span class="strong"><strong>Project</strong></span> view in the field next to the <span class="strong"><strong>Atlas</strong></span> button.</p></div></div></li><li class="listitem">Click on the <span class="strong"><strong>Sprite</strong></span> button in <span class="strong"><strong>UISprite</strong></span> and in the pop-up window, select our <span class="strong"><strong>Bomb</strong></span> sprite.</li><li class="listitem">Select the <span class="strong"><strong>Label</strong></span> GameObject from <span class="strong"><strong>Bomb</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Delete it—the icon and tool tip are enough!</li><li class="listitem">A pop-up window appears, asking you if you want to continue because you will lose the prefab connection. Click on <span class="strong"><strong>Continue</strong></span>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Bomb</strong></span> GameObject from our <span class="strong"><strong>Grid</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Apply</strong></span> button in the <span class="strong"><strong>Inspector</strong></span> view to update the prefab.</li></ol></div><p>Good, our <span class="strong"><strong>Bomb</strong></span> prefab is up to date with its new icon. Let's add the icon for the <span class="strong"><strong>Time</strong></span> prefab by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select our <span class="strong"><strong>Icon</strong></span> GameObject <span class="strong"><strong>Bomb</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Duplicate it.</li><li class="listitem">Drag this duplicate inside the <span class="strong"><strong>Time</strong></span> GameObject.</li><li class="listitem">Reset its <span class="strong"><strong>Transform</strong></span> position to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Change its <span class="strong"><strong>Sprite</strong></span> parameter to our own <span class="strong"><strong>Time</strong></span> sprite.</li><li class="listitem">Change its <span class="strong"><strong>Dimensions</strong></span> to <code class="literal">75</code> x <code class="literal">75</code>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Label</strong></span> GameObject from <span class="strong"><strong>Time</strong></span> and then perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Delete it—the icon and tool tip are enough!</li><li class="listitem">A pop-up window appears, asking you if you want to continue because you will lose the prefab connection. Click on <span class="strong"><strong>Continue</strong></span>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Time</strong></span> GameObject from <span class="strong"><strong>Grid</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Apply</strong></span> button in the <span class="strong"><strong>Inspector</strong></span> view to update the prefab.</li></ol></div><p>Ok, our <a id="id273" class="indexterm"/>draggable powers prefabs now have their own icons.</p></div><div class="section" title="Selected powers icons"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec23"/>Selected powers icons</h3></div></div></div><p>Let's<a id="id274" class="indexterm"/> also add icons for our <span class="strong"><strong>SelectedBomb</strong></span> and <span class="strong"><strong>SelectedTime</strong></span> prefabs so that they look nicer:</p><div class="mediaobject"><img src="graphics/8667OT_06_04.jpg" alt="Selected powers icons"/></div><p>Perform the following steps to achieve this:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">From the <span class="strong"><strong>Project</strong></span> view, drag the <span class="strong"><strong>SelectedBomb</strong></span> prefab in our <span class="strong"><strong>Surface</strong></span> GameObject.</li><li class="listitem">In the <span class="strong"><strong>Hierarchy</strong></span> view, select our <span class="strong"><strong>Icon</strong></span> GameObject from <span class="strong"><strong>Grid</strong></span>/<span class="strong"><strong>Bomb</strong></span> and perform the given steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Duplicate it.</li><li class="listitem">Drag this duplicate inside our new <span class="strong"><strong>SelectedBomb</strong></span> instance.</li><li class="listitem">Reset its <span class="strong"><strong>Transform</strong></span> position to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Set its <span class="strong"><strong>Depth</strong></span> to <code class="literal">5</code>.</li><li class="listitem">Change its <span class="strong"><strong>Dimensions</strong></span> to <code class="literal">120</code> x <code class="literal">120</code>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Label</strong></span> GameObject from <span class="strong"><strong>SelectedBomb</strong></span> and delete it.</li><li class="listitem">Select the <span class="strong"><strong>SelectedBomb</strong></span> GameObject from <span class="strong"><strong>Surface</strong></span> and perform the given steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Click on the <span class="strong"><strong>Apply</strong></span> button in the <span class="strong"><strong>Inspector</strong></span> view to update the prefab.</li><li class="listitem">Delete the <span class="strong"><strong>SelectedBomb</strong></span> instance from the scene.</li></ol></div></li></ol></div><p>Let's follow<a id="id275" class="indexterm"/> the same steps for our <span class="strong"><strong>SelectedTime</strong></span> prefab:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">From the <span class="strong"><strong>Project</strong></span> view, drag the <span class="strong"><strong>SelectedTime</strong></span> prefab in our <span class="strong"><strong>Surface</strong></span> GameObject.</li><li class="listitem">In the <span class="strong"><strong>Hierarchy</strong></span> view, select our <span class="strong"><strong>Icon</strong></span> GameObject from <span class="strong"><strong>Time</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Duplicate it.</li><li class="listitem">Drag this duplicate inside our new <span class="strong"><strong>SelectedTime</strong></span> instance.</li><li class="listitem">Reset its <span class="strong"><strong>Transform</strong></span> position to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Set its <span class="strong"><strong>Depth</strong></span> to <code class="literal">5</code>.</li><li class="listitem">Change its <span class="strong"><strong>Dimensions</strong></span> to <code class="literal">100</code> x <code class="literal">100</code>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Label</strong></span> GameObject from <span class="strong"><strong>SelectedTime</strong></span>, and delete it.</li><li class="listitem">Select the <span class="strong"><strong>SelectedTime</strong></span> GameObject from <span class="strong"><strong>Surface</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Click on the <span class="strong"><strong>Apply</strong></span> button in the <span class="strong"><strong>Inspector</strong></span> view to update the prefab.</li><li class="listitem">Delete the <span class="strong"><strong>SelectedTime</strong></span> instance from the scene.</li></ol></div></li></ol></div><p>That's it. We have our own two icons for our powers. Now, we can learn how to create and configure our own nine-sliced sprite.</p></div></div><div class="section" title="Sliced sprites"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec62"/>Sliced sprites</h2></div></div></div><p>We used<a id="id276" class="indexterm"/> the <a id="id277" class="indexterm"/>dark sliced sprite all along this book. Let's create our own. Then, we will change the power selection box and the background sprites of <span class="strong"><strong>Main Menu</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_06_05.jpg" alt="Sliced sprites"/></div><div class="section" title="Adding a sprite to Atlas"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec24"/>Adding a sprite to Atlas</h3></div></div></div><p>You can use a<a id="id278" class="indexterm"/> 16 x 16 square sprite, such as the dark sprite. If you wish to have larger corners or add more details, simply use a larger texture size. You can also use the 64 x 64 <code class="literal">Window.png</code> file available in my <code class="literal">Assets.zip</code> archive.</p><p>When your new Window sprite is ready, place it in the <code class="literal">Assets/Textures</code> folder and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open <span class="strong"><strong>Atlas Maker</strong></span> by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Atlas Maker</strong></span>, or <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>M</em></span> and make sure our new <span class="strong"><strong>Game</strong></span> atlas is selected.</li><li class="listitem">Select the new <code class="literal">Window.png</code> sprite file from <span class="strong"><strong>Textures</strong></span> in the <span class="strong"><strong>Project</strong></span> view.</li><li class="listitem">Click on the green <span class="strong"><strong>Add/Update All</strong></span> button in the <span class="strong"><strong>Atlas Maker</strong></span> window.</li></ol></div><p>Ok, <code class="literal">Window.png</code> has been added to our <span class="strong"><strong>Game</strong></span> atlas, but it isn't configured. Yet.</p></div><div class="section" title="Configuring a sliced sprite"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec25"/>Configuring a sliced sprite</h3></div></div></div><p>The Window sprite has<a id="id279" class="indexterm"/> been added to the atlas, but we still need to indicate the <span class="strong"><strong>UIAtlas</strong></span> component where the slicing must occur on the sprite. Let's replace our <span class="strong"><strong>Background</strong></span> of <span class="strong"><strong>Powers</strong></span>, and configure its slicing parameters.</p><p>In the <span class="strong"><strong>Hierarchy</strong></span> view, select the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Powers</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Change its <span class="strong"><strong>Atlas</strong></span> parameter in <span class="strong"><strong>UISprite</strong></span> to our <span class="strong"><strong>Game</strong></span> Atlas.</li><li class="listitem">Change its <span class="strong"><strong>Sprite</strong></span> to our new <span class="strong"><strong>Window</strong></span> sprite.</li><li class="listitem">Click on the <span class="strong"><strong>Edit</strong></span> button next to the <span class="strong"><strong>Sprite</strong></span> field, as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="graphics/8667OT_06_06.jpg" alt="Configuring a sliced sprite"/></div><p>We are now<a id="id280" class="indexterm"/> in the sprite's parameter window. Here, we can configure its <span class="strong"><strong>Dimensions</strong></span>, <span class="strong"><strong>Border</strong></span>, and <span class="strong"><strong>Padding</strong></span>. Set these <span class="strong"><strong>Border</strong></span> values to define the slicing lines:</p><div class="mediaobject"><img src="graphics/8667OT_06_07.jpg" alt="Configuring a sliced sprite"/></div><p>The values shown in the previous screenshot might be different if you created your own sprite.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note22"/>Note</h3><p>As you change the <span class="strong"><strong>Border</strong></span> values, dotted lines appear on the sprite at the bottom of the <span class="strong"><strong>Inspector</strong></span> view in the <span class="strong"><strong>Preview</strong></span> window.</p></div></div><p>The <span class="strong"><strong>Window</strong></span> sprite should be sliced (as shown in the following screenshot) in the <span class="strong"><strong>Preview</strong></span> window:</p><div class="mediaobject"><img src="graphics/8667OT_06_08.jpg" alt="Configuring a sliced sprite"/></div><p>When you have entered your four values, you can click on the green <span class="strong"><strong>Return to Background</strong></span> button in order to go back to where we were.</p><p>We now have<a id="id281" class="indexterm"/> a functional sliced sprite, but we need to adjust the  title position of the powers. In the <span class="strong"><strong>Hierarchy</strong></span> view, select our <span class="strong"><strong>TitleLabel</strong></span> GameObject from <span class="strong"><strong>Powers</strong></span>, and change its <span class="strong"><strong>Pixel Offset</strong></span> in <span class="strong"><strong>UIAnchor</strong></span> to {<code class="literal">0</code>, <code class="literal">-18</code>}.</p><p>Good! We configured our first sliced sprite and changed the power selection box's background sprite with it.</p></div><div class="section" title="The Main Menu window"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec26"/>The Main Menu window</h3></div></div></div><p>Let's change our <a id="id282" class="indexterm"/>
<span class="strong"><strong>Window</strong></span> sprite <span class="strong"><strong>Main Menu</strong></span> too. In the <span class="strong"><strong>Hierarchy</strong></span> view, select our <span class="strong"><strong>Window</strong></span> GameObject from <span class="strong"><strong>Container</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Change its <span class="strong"><strong>Atlas</strong></span> to our <span class="strong"><strong>Game</strong></span> Atlas.</li><li class="listitem">Change its <span class="strong"><strong>Sprite</strong></span> to our new <span class="strong"><strong>Window</strong></span> sprite.</li></ol></div><p>The <span class="strong"><strong>Main Menu</strong></span> title is not placed exactly inside the title bar. Let's change this by performing the following steps.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Title</strong></span> GameObject from <span class="strong"><strong>Container</strong></span>, and change its <span class="strong"><strong>Pixel Offset</strong></span> value in <span class="strong"><strong>UIAnchor</strong></span> to {<code class="literal">0</code>, <code class="literal">10</code>}.</li><li class="listitem">Select the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Title</strong></span> and deactivate it for now.</li><li class="listitem">Select the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Container</strong></span> and then perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Change its <span class="strong"><strong>Relative Size</strong></span> in <span class="strong"><strong>UIStretch</strong></span> to {<code class="literal">1</code>, <code class="literal">0.95</code>}.</li><li class="listitem">Change its <span class="strong"><strong>Pixel Offset</strong></span> in <span class="strong"><strong>UIAnchor</strong></span> to {<code class="literal">0</code>, <code class="literal">-17</code>}.</li></ol></div></li></ol></div><p>Great. That looks better. If you wish, you may change the nickname box's background sprites with our new Window sprite. You can even change the buttons by using the sliced sprite <code class="literal">Button.png</code> included in the <code class="literal">Assets.zip</code> file.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note23"/>Note</h3><p>The <code class="literal">Button.png</code> file can be used for non-button backgrounds too, such as the notification or tool tip backgrounds. Try it out!</p></div></div></div></div><div class="section" title="Tiled sprites"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec63"/>Tiled sprites</h2></div></div></div><p>Let's <a id="id283" class="indexterm"/>add a<a id="id284" class="indexterm"/> tiled sprite to create a space background for our <span class="strong"><strong>Game</strong></span> scene.</p><p>You can use the <code class="literal">Space.jpg</code> file from the <code class="literal">Assets.zip</code> archive, or you may create a 256 x 256 tiling sprite representing stars in space. Place the <code class="literal">Space.jpg</code> sprite in the <code class="literal">Assets/Textures</code> folder, and then perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open our <span class="strong"><strong>Game</strong></span> scene.</li><li class="listitem">Open <span class="strong"><strong>Atlas Maker</strong></span> by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Atlas Maker</strong></span>, or <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>M</em></span>. Then perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the <span class="strong"><strong>Project</strong></span> view, select our new <code class="literal">Space.jpg</code> file from <span class="strong"><strong>Textures</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Add/Update All</strong></span> button of the <span class="strong"><strong>Atlas Maker</strong></span> window.</li></ol></div></li></ol></div><p>Ok, the new <code class="literal">Space.jpg</code> sprite has now been added to our <span class="strong"><strong>Game</strong></span> Atlas. Let's change our <span class="strong"><strong>Game</strong></span> scene's background to make it look like we're in space.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Viewport</strong></span>.</li><li class="listitem">Change its <span class="strong"><strong>Atlas</strong></span> to our <span class="strong"><strong>Game</strong></span> Atlas.</li><li class="listitem">Change its <span class="strong"><strong>Sprite</strong></span> to our new <span class="strong"><strong>Space</strong></span> sprite.</li><li class="listitem">Change its <span class="strong"><strong>Color Tint</strong></span> to {<code class="literal">140</code>, <code class="literal">200</code>, <code class="literal">200</code>, <code class="literal">255</code>}.</li></ol></div><p>That's it! Small stars are now tiling in the background. Now, it is time to add a font.</p></div></div>
<div class="section" title="Adding a font"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec47"/>Adding a font</h1></div></div></div><p>For optimization, NGUI uses bitmaps<a id="id285" class="indexterm"/> instead of true type fonts.<a id="id286" class="indexterm"/> We need to export our <code class="literal">.ttf</code> or <code class="literal">.otf</code> fonts to a bitmap using a free third-party tool called <span class="strong"><strong>BMFont</strong></span>
<a id="id287" class="indexterm"/>, which was created by <span class="strong"><strong>AngelCode</strong></span>.</p><p>Then, we will need a <code class="literal">.txt</code> file that will contain information about where each glyph is located in the exported font's bitmap. You can download the BMFont <a id="id288" class="indexterm"/>from <a class="ulink" href="http://www.angelcode.com/products/bmfont/">www.angelcode.com/products/bmfont/</a>. Free-to-use fonts are available at <a class="ulink" href="http://www.openfontlibrary.org/">www.openfontlibrary.org/</a>.</p><p>For our first font, we will use the Pacaya font created by <span class="emphasis"><em>Daniel Johnson</em></span>—it is included in the <code class="literal">Assets.zip</code> archive. Download, install, and launch BMFont. Install the font now by right-clicking on the <code class="literal">Pacaya.otf</code> file and then selecting <span class="strong"><strong>Install</strong></span>.</p><div class="section" title="Exporting a font using BMFont"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec64"/>Exporting a font using BMFont</h2></div></div></div><p>Once BMFont <a id="id289" class="indexterm"/>is launched and the Pacaya font is installed, go to <span class="strong"><strong>Options</strong></span> | <span class="strong"><strong>Font Settings</strong></span>. You can now select the Pacaya font in the <span class="strong"><strong>Font</strong></span> field. The <span class="strong"><strong>Size(px)</strong></span> field defines the font's size at export in pixels—set it to <code class="literal">24</code> and click on <span class="strong"><strong>OK</strong></span>.</p><p>Our <code class="literal">.otf</code> file is loaded, and we can visualize and select the characters that we want to export with a left-click or click-and-drag. Select them all with <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>A</em></span>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note24"/>Note</h3><p>If you want to export a selection of characters, don't forget to select the empty character—it's your space character.</p></div></div><p>Go to <span class="strong"><strong>Options</strong></span> | <span class="strong"><strong>Export</strong></span> options. Here, you must set the <span class="strong"><strong>Bit</strong></span> depth to <code class="literal">32</code>. Now, the only thing you need to check is the <span class="strong"><strong>Width</strong></span> and <span class="strong"><strong>Height</strong></span> value of the bitmap.</p><p>To see if it's currently big enough, click on <span class="strong"><strong>OK</strong></span> and go to <span class="strong"><strong>Options</strong></span> | <span class="strong"><strong>Visualize</strong></span>. The window shown in the following screenshot appears:</p><div class="mediaobject"><img src="graphics/8667OT_06_09.jpg" alt="Exporting a font using BMFont"/></div><p>The red space represents wasted space. As you can see, we have a large amount of wasted space. You must try to set the bitmap size to reduce this red space as much as possible, while making sure you have enough space for all characters.</p><p>If your bitmap<a id="id290" class="indexterm"/> size is too small and can't hold all your characters, the <span class="strong"><strong>Preview</strong></span> window's title will show <span class="strong"><strong>Preview : 1/2</strong></span> instead of <span class="strong"><strong>Preview : 1/1</strong></span>, as shown in the following screenshot. Then, you should increase the bitmap size utile it displays <span class="strong"><strong>Preview : 1/1</strong></span>. For the Pacaya font with all characters selected, enter <code class="literal">256</code> x <code class="literal">128</code>. It should look as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_06_10.jpg" alt="Exporting a font using BMFont"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip06"/>Tip</h3><p>For optimization, you should keep its dimensions as powers of two.</p></div></div><p>Once you have set the correct bitmap size, go back to <span class="strong"><strong>Options</strong></span> | <span class="strong"><strong>Export Options</strong></span>. Then, make sure the <span class="strong"><strong>Presets</strong></span> field is set to <span class="strong"><strong>White text with alpha</strong></span> in order to have <span class="strong"><strong>R</strong></span>, <span class="strong"><strong>G</strong></span>, and <span class="strong"><strong>B</strong></span> channel values at <span class="strong"><strong>one</strong></span> and the <span class="strong"><strong>glyph</strong></span> in channel <span class="strong"><strong>A</strong></span>:</p><div class="mediaobject"><img src="graphics/8667OT_06_11.jpg" alt="Exporting a font using BMFont"/></div><p>When you've done that, go to <span class="strong"><strong>Options</strong></span> | <span class="strong"><strong>Save bitmap font as…</strong></span> and name it <code class="literal">Pacaya</code>. The <code class="literal">.fnt</code> file extension will be added automatically. Inside the output folder you selected, you should have a <code class="literal">Pacaya_0.tga</code> file—the actual font bitmap—and a <code class="literal">.fnt</code> file.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note25"/>Note</h3><p>You must have only one <code class="literal">.tga</code> file along with your <code class="literal">.fnt</code> file. Otherwise, your bitmap size is too small, and you need to make it larger before you re-export.</p></div></div><p>Ok, now copy these two files in a new <code class="literal">Assets/Fonts/Sources</code> folder.</p></div><div class="section" title="Creating a font in Unity"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec65"/>Creating a font in Unity</h2></div></div></div><p>We have<a id="id291" class="indexterm"/> our new font files. We must now create a new font for NGUI using these files.</p><p>In Unity, perform<a id="id292" class="indexterm"/> the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <span class="strong"><strong>Font Maker</strong></span> window by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Font Maker</strong></span>, or <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>F</em></span>.</li><li class="listitem">In the <span class="strong"><strong>Project</strong></span> view, browse to your <code class="literal">Assets/Fonts/Sources</code> folder.</li><li class="listitem">Drag your <code class="literal">Pacaya.fnt</code> file in the <span class="strong"><strong>Font Data</strong></span> field in <span class="strong"><strong>Font Maker</strong></span>.</li><li class="listitem">Drag the <code class="literal">Pacaya_0.tga</code> file in the <span class="strong"><strong>Texture</strong></span> field in <span class="strong"><strong>Font Maker</strong></span>.</li><li class="listitem">Enter <code class="literal">Pacaya</code> in the <span class="strong"><strong>Font Name</strong></span> field.</li><li class="listitem">Click on the <span class="strong"><strong>Atlas</strong></span> button and choose our <span class="strong"><strong>Game</strong></span> Atlas.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note26"/>Note</h3><p>This means the font's texture will be added to the <span class="strong"><strong>Game</strong></span> Atlas, resulting in no supplementary draw call when a label is displayed.</p></div></div></li><li class="listitem">Select any file in the <code class="literal">Sources</code> folder in the path <code class="literal">Assets/Fonts/</code> of our <span class="strong"><strong>Project</strong></span> view—our font will then be added to the current folder, but you need to actually select a file inside the desired destination for it to work.</li><li class="listitem">Click on the green <span class="strong"><strong>Create the Font</strong></span> button.</li></ol></div><p>A new Pacaya prefab has been created in the <code class="literal">Sources</code> folder in the path <code class="literal">Assets/Fonts/</code>. That's the prefab NGUI needs to display the font.</p><p>Select it in the <span class="strong"><strong>Project</strong></span> view, and drag it inside our <code class="literal">Fonts</code> folder in <code class="literal">Assets</code>. If you cannot find it, simply type your font's name in the <span class="strong"><strong>Project</strong></span> view's search bar.</p></div><div class="section" title="Assigning a new font to Label"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec66"/>Assigning a new font to Label</h2></div></div></div><p>Now that we<a id="id293" class="indexterm"/> have added a new font to our project, let's assign it to a Label:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open our <span class="strong"><strong>Menu</strong></span> scene.</li><li class="listitem">Select our <span class="strong"><strong>Label</strong></span> GameObject by navigating to <span class="strong"><strong>MainMenu</strong></span> | <span class="strong"><strong>Container</strong></span> | <span class="strong"><strong>Nickname</strong></span> | <span class="strong"><strong>Input</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Click on the <span class="strong"><strong>Font</strong></span> button in <span class="strong"><strong>UILabel</strong></span>.</li><li class="listitem">Choose our new <span class="strong"><strong>Pacaya</strong></span> font.</li></ol></div></li></ol></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note27"/>Note</h3><p>If the new font does not appear in recent fonts, find it in your <span class="strong"><strong>Project</strong></span> view and drag it manually in the <span class="strong"><strong>Font</strong></span> field in <span class="strong"><strong>UILabel</strong></span>.</p></div></div><p>Ok. We have added a new font to our project and assigned it to a label!</p></div></div>
<div class="section" title="Customizing the MainMenu"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec48"/>Customizing the MainMenu</h1></div></div></div><p>The blue<a id="id294" class="indexterm"/> background of our menu's main camera is not <a id="id295" class="indexterm"/>very nice. Let's set a black background for the camera, and add our space tiling sprite to make this better:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select our <span class="strong"><strong>MainMenu</strong></span> GameObject from <span class="strong"><strong>Anchor</strong></span>, and create a new sprite by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Sprite</strong></span>, or press <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>S</em></span>.</li><li class="listitem">Select the new <span class="strong"><strong>Sprite</strong></span> GameObject from <span class="strong"><strong>MainMenu</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">Space</code>.</li><li class="listitem">Set its <span class="strong"><strong>Atlas</strong></span> type to our <span class="strong"><strong>Game</strong></span> atlas.</li><li class="listitem">Set its <span class="strong"><strong>Sprite</strong></span> to our <span class="strong"><strong>Space</strong></span> tiling sprite.</li><li class="listitem">Set its <span class="strong"><strong>Sprite Type</strong></span> parameter to <span class="strong"><strong>Tiled</strong></span>.</li></ol></div></li><li class="listitem">Attach a <span class="strong"><strong>Stretch</strong></span> component to it by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>UI</strong></span>:</li><li class="listitem">Set its <span class="strong"><strong>Style</strong></span> parameter to <span class="strong"><strong>Both</strong></span>.</li></ol></div><p>You may notice that we have ugly lines between each repetition of the Space sprite. That is simply because there is a 1-pixel-wide border on the sprite. We can easily correct this by reducing the sprite's border value of 1 pixel.</p><p>Select our <span class="strong"><strong>Space</strong></span> GameObject from <span class="strong"><strong>MainMenu</strong></span>, and click on the <span class="strong"><strong>Edit</strong></span> button next to the <span class="strong"><strong>Sprite</strong></span> field, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_06_12.jpg" alt="Customizing the MainMenu"/></div><p>Set a value of <code class="literal">1</code> for each of the four <span class="strong"><strong>Border</strong></span> parameters as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_06_13.jpg" alt="Customizing the MainMenu"/></div><p>That's better; our tiling sprite now tiles correctly without any lines between each pattern.</p><p>Now that you <a id="id296" class="indexterm"/>have learned how to add sprites and fonts, I would like you to change our <span class="strong"><strong>Main Menu</strong></span> elements' backgrounds to make it look better. You may proceed as you wish—add more sprites if you want, change colors, and use your imagination!</p><p>The following is an example of what you can achieve with the <span class="strong"><strong>Window</strong></span> and <span class="strong"><strong>Button</strong></span> sprites:</p><div class="mediaobject"><img src="graphics/8667OT_06_14.jpg" alt="Customizing the MainMenu"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note28"/>Note</h3><p>You might have to move or resize the UI elements. Don't forget to use <span class="strong"><strong>Pixel Offset</strong></span> in <span class="strong"><strong>UIAnchor</strong></span> to move or resize instead of positions. Same for <span class="strong"><strong>Dimensions</strong></span>—don't use the scale tool of Unity if you want to keep the widgets pixel perfect.</p></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec49"/>Summary</h1></div></div></div><p>In this chapter, we learned how to create a new Atlas and add simple, sliced, and tiled sprites. Using these new sprites, we made our <span class="strong"><strong>Powers</strong></span>, <span class="strong"><strong>Selected Powers</strong></span>, and <span class="strong"><strong>Main Menu</strong></span> windows look better than before.</p><p>You now know how to use BMFont to export a font as bitmap and create a new font prefab for NGUI.</p><p>Before we move on to the final <a class="link" href="ch07.html" title="Chapter 7. Creating a Game with NGUI">Chapter 7</a>, <span class="emphasis"><em>Creating a Game with NGUI</em></span>, you should have changed the appearance of your <span class="strong"><strong>Main Menu</strong></span> to make it look nicer.</p></div></body></html>