<html><head></head><body>
  <div><h1 class="chapter-number" id="_idParaDest-15">
    <a id="_idTextAnchor014">
    </a>
    
     1
    
   </h1>
   <h1 id="_idParaDest-16">
    <a id="_idTextAnchor015">
    </a>
    
     Getting Up and Running with Minimal API Development
    
   </h1>
   <p>
    
     As
    
    <a id="_idIndexMarker000">
    </a>
    
     users, we associate interacting with an application with a
    
    <strong class="bold">
     
      User Interface
     
    </strong>
    
     (
    
    <strong class="bold">
     
      UI
     
    </strong>
    
     ).
    
    
     This interface consists of interactive elements that allow for interaction between the code and user.
    
    
     You can think of this like
    
    <a id="_idIndexMarker001">
    </a>
    
     the
    
    <em class="italic">
     
      storefront
     
    </em>
    
     , a place where you can browse the available wares or request appropriate action, for example, booking a vacation or adding items to your
    
    
     
      shopping cart.
     
    
   </p>
   <p>
    
     If the UI is where customers interact with
    
    <a id="_idIndexMarker002">
    </a>
    
     our
    
    <em class="italic">
     
      store
     
    </em>
    
     , an
    
    <strong class="bold">
     
      Application Programming Interface
     
    </strong>
    
     (
    
    <strong class="bold">
     
      API
     
    </strong>
    
     ) is the back
    
    <a id="_idIndexMarker003">
    </a>
    
     of the store.
    
    
     This is where we receive deliveries, move goods, process orders, and
    
    
     
      manage inventory.
     
    
   </p>
   <p>
    
     Most developers have some experience in interacting with or writing APIs, but what makes
    
    <strong class="bold">
     
      minimal
     
    </strong>
    
     <strong class="bold">
      
       APIs
      
     </strong>
    
    
     
      different?
     
    
   </p>
   <p>
    
     Minimal APIs
    
    <a id="_idIndexMarker004">
    </a>
    
     were introduced by Microsoft in 2021 with the release of .NET 6.
    
    
     The aim was to empower developers to create APIs with a minimum of boilerplate code, allowing them to focus on the essentials of the business logic in use between requests
    
    
     
      and responses.
     
    
   </p>
   <p>
    
     They offer a
    
    <a id="_idIndexMarker005">
    </a>
    
     lightweight solution to API development, which is often a good starting point for projects, as they require much less effort to set them up.
    
    
     This is a key advantage when you’re looking to get a system up and running quickly, or where there is a low number of dependencies.
    
    
     It can also mean that performance is better in minimal APIs thanks to the reduced overhead compared to more traditional API formats.
    
    
     In this book, we will learn how to leverage these benefits of
    
    
     
      minimal APIs.
     
    
   </p>
   <p>
    
     In this chapter, we’re going to cover the following
    
    
     
      main topics:
     
    
   </p>
   <ul>
    <li>
     
      Understanding
     
     
      
       minimal APIs
      
     
    </li>
    <li>
     
      Contrasting minimal APIs with traditional
     
     
      
       API approaches
      
     
    </li>
    <li>
     
      The significance of minimal APIs in
     
     
      
       modern development
      
     
    </li>
    <li>
     
      Installing required tools
     
     
      
       and dependencies
      
     
    </li>
    <li>
     
      Configuring
     
     
      
       development environments
      
     
    </li>
   </ul>
   <h1 id="_idParaDest-17">
    <a id="_idTextAnchor016">
    </a>
    
     Technical requirements
    
   </h1>
   <p>
    
     To follow the directions in this chapter, you’ll need to have the following installed on your Windows, macOS, or
    
    
     
      Linux machine:
     
    
   </p>
   <ul>
    <li>
     
      .NET 9.0
     
     <strong class="bold">
      
       Software Development
      
     </strong>
     
      <strong class="bold">
       
        Kit
       
      </strong>
     
     
      
       (
      
     
     
      <strong class="bold">
       
        SDK
       
      </strong>
     
     
      
       )
      
     
    </li>
    <li>
     
      Visual Studio or Visual
     
     
      
       Studio Code
      
     
    </li>
    <li>
     
      C# extension for Visual Studio Code (if you are using Visual
     
     
      
       Studio Code)
      
     
    </li>
   </ul>
   <p>
    
     If you’re working in Windows, it’s recommended that you use Visual Studio, although Visual Studio Code will still work.
    
    
     If you’re a Mac or Linux user, you should use Visual Studio Code.
    
    
     (At the time of writing, Visual Studio for Mac is set to be retired on August
    
    
     
      31, 2024.)
     
    
   </p>
   <p>
    
     The code for this chapter is available in the GitHub repository
    
    
     
      at:
     
    
    <a href="https://github.com/PacktPublishing/Minimal-APIs-in-ASP.NET-9">
     
      
       https://github.com/PacktPublishing/Minimal-APIs-in-ASP.NET-9
      
     
    </a>
    
     
      .
     
    
   </p>
   <h1 id="_idParaDest-18">
    <a id="_idTextAnchor017">
    </a>
    
     Understanding minimal APIs
    
   </h1>
   <p>
    
     When it comes to designing and building APIs, we’re spoilt for choice with varying styles, approaches, and templates.
    
    
     .NET has proven itself over the years to be a fantastic choice for general-purpose API development.
    
    
     Modern .NET provides us with two main types of API framework, one more traditional than the other.
    
    
     One of the options is, of course, the minimal API, which is still a relatively new feature within .NET compared to its predecessor, the
    
    
     
      controller-based API.
     
    
   </p>
   <p>
    
     With minimal APIs, the
    
    <a id="_idIndexMarker006">
    </a>
    
     aim is simplicity.
    
    
     Less code, less ceremony, and less complexity.
    
    
     As a result, minimal APIs are well suited to microservice architectures, where you have lots of small components all requiring a means of transferring data between
    
    
     
      each other.
     
    
   </p>
   <p>
    
     Their simplicity also makes them easier to read, as a small block of code can take care of all the classic features of an API, such as receiving HTTP requests, routing, utilizing dependencies, accessing services, and sending responses
    
    
     
      to clients.
     
    
   </p>
   <p>
    
     One of the more admirable aspects of minimal APIs is the way they lower the barrier of entry to API development.
    
    
     They provide an alternative means of structuring your code that is more accessible, easier to read, and, in most cases, more performant owing to the
    
    
     
      decreased overhead.
     
    
   </p>
   <p>
    
     A simple API can be created using
    
    <a id="_idIndexMarker007">
    </a>
    
     minimal APIs in just four lines of code.
    
    
     Here’s the classic
    
    <em class="italic">
     
      hello
     
    </em>
    
     <em class="italic">
      
       world
      
     </em>
    
    
     
      example:
     
    
   </p>
   <pre class="source-code">
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();
app.MapGet("/", () =&gt; "Hello World!");
app.Run();</pre>
   <p>
    
     Congratulations!
    
    
     You just created an API!
    
    
     Let’s dig deeper into what’s happening in
    
    
     
      the example:
     
    
   </p>
   <ul>
    <li>
     
      On the first line, we create an instance of
     
     <strong class="source-inline">
      
       WebApplicationBuilder
      
     </strong>
     
      by calling
     
     <strong class="source-inline">
      
       CreateBuilder
      
     </strong>
     
      and passing in any command-line arguments that we might need.
     
     
      Think of this as a blueprint for the API we’re creating.
     
     
      The minimal API is an ASP.NET core application like any other, and so it needs a pipeline for it to be run.
     
     <strong class="source-inline">
      
       WebApplicationBuilder
      
     </strong>
     
      provides us with
     
     
      
       this pipeline.
      
     
    </li>
    <li>
     
      Then, we call
     
     <strong class="source-inline">
      
       Build()
      
     </strong>
     
      on this instance we created, which results in an instance of
     
     <strong class="source-inline">
      
       WebApplication
      
     </strong>
     
      that we have called
     
     <strong class="source-inline">
      
       app
      
     </strong>
     
      .
     
     
      This is
     
     
      
       our API.
      
     
    </li>
    <li>
     
      The third line maps any incoming HTTP GET requests on the root path of the application:
     
     <strong class="source-inline">
      
       ("/")
      
     </strong>
     
      .
     
     
      Following this, we use a lambda statement to indicate the logic that should be executed when the request is received.
     
     
      In this case, we are returning the string
     
     
      <strong class="source-inline">
       
        Hello World!
       
      </strong>
     
     
      
       .
      
     
    </li>
    <li>
     
      Finally, the fourth line starts the application, making it listen for
     
     
      
       incoming requests.
      
     
    </li>
   </ul>
   <p>
    
     Now that you have a high-level understanding of minimal APIs, let’s compare them with more traditional
    
    
     
      API f
     
     <a id="_idTextAnchor018">
     </a>
     
      ormats.
     
    
   </p>
   <h1 id="_idParaDest-19">
    <a id="_idTextAnchor019">
    </a>
    
     Contrasting minimal APIs with traditional API approaches
    
   </h1>
   <p>
    
     The more traditional API
    
    <a id="_idIndexMarker008">
    </a>
    
     format in .NET compared to minimal APIs is
    
    <strong class="bold">
     
      controller-based APIs
     
    </strong>
    
     .
    
    
     These are more commonly seen in ASP.NET
    
    <strong class="bold">
     
      Model-View-Controller
     
    </strong>
    
     (
    
    <strong class="bold">
     
      MVC
     
    </strong>
    
     ) projects, or
    
    <a id="_idIndexMarker009">
    </a>
    
     in ASP.NET web API projects.
    
    
     However, whether you’re building an MVC project or not, both API types
    
    
     
      utilize controllers.
     
    
   </p>
   <p>
    
     Controllers are
    
    <a id="_idIndexMarker010">
    </a>
    
     simply classes, with many responsibilities within the API, such
    
    <a id="_idIndexMarker011">
    </a>
    
     as
    
    
     
      the following:
     
    
   </p>
   <ul>
    <li>
     
      Handling incoming requests via
     
     <em class="italic">
      
       actions
      
     </em>
     
      , which are interacted with using various HTTP methods, such as
     
     <strong class="source-inline">
      
       GET
      
     </strong>
     
      ,
     
     <strong class="source-inline">
      
       POST
      
     </strong>
     
      ,
     
     <strong class="source-inline">
      
       PUT
      
     </strong>
     
      ,
     
     <strong class="source-inline">
      
       DELETE
      
     </strong>
     
      ,
     
     
      
       and
      
     
     
      <strong class="source-inline">
       
        PATCH
       
      </strong>
     
     
      
       .
      
     
    </li>
    <li>
     
      Processing data sent in the request via query string parameters or within the
     
     
      
       request body.
      
     
    </li>
    <li>
     
      Interaction with data models and processing of business logic
     
     
      
       via services.
      
     
    </li>
    <li>
     
      Generation of responses to calling clients.
     
     
      These responses could be in JSON, XML, or many
     
     
      
       other formats.
      
     
     <p class="list-inset">
      
       Routing of requests to other areas of the application, that is, directing to a page at a
      
      
       
        specific URL.
       
      
     </p>
    </li>
   </ul>
   <p>
    
     When using a controller-based API, each controller tends to be focused on one specific application domain.
    
    
     For example, you may have a controller dedicated to all things
    
    <em class="italic">
     
      employees
     
    </em>
    
     , and another dedicated to
    
    <em class="italic">
     
      inventory
     
    </em>
    
     .
    
    
     This is great for segregating business logic into relevant areas, but requires a lot of ceremony, such as the need to
    
    <em class="italic">
     
      inherit
     
    </em>
    
     from a base
    
    <em class="italic">
     
      controller
     
    </em>
    
     class, the need to add attributes for defining HTTP methods, or management of folder structures for
    
    
     
      each controller.
     
    
   </p>
   <p>
    
     Here’s an
    
    <a id="_idIndexMarker012">
    </a>
    
     example of an
    
    <strong class="source-inline">
     
      Employee
     
    </strong>
    
     controller.
    
    
     Notice the use of attributes for labeling the controller type (
    
    <strong class="source-inline">
     
      [ApiController]
     
    </strong>
    
     ) and routing.
    
    
     Also observe how the class is required to derive from
    
    <strong class="source-inline">
     
      ControllerBase
     
    </strong>
    
     , along with dependency injection managed via a class constr
    
    <a id="_idTextAnchor020">
    </a>
    
     uctor to get
    
    <strong class="source-inline">
     
      IEmployeeRepository
     
    </strong>
    
     , and this is only for
    
    <em class="italic">
     
      employees
     
    </em>
    
     !
    
    
     We’d have to do it all over again in a separate class for our
    
    <em class="italic">
     
      inventory
     
    </em>
    
     controller, and so the
    
    
     
      ceremony continues:
     
    
   </p>
   <pre class="source-code">
using Microsoft.AspNetCore.Mvc;
using System.Collections.Generic;
namespace EmployeeAPI.Controllers
{
    [ApiController]
    [Route("api/[controller]")]
    public class Employees<a id="_idTextAnchor021"/>Controller : ControllerBase
    {
        private readonly IEmployeeRepository
            _employeeRepository;
        public EmployeesController(
            IEmployeeRepository employeeRepository)
        {
            _employeeRepository = employeeRepository;
        }
        [HttpGet]
        public ActionResult&lt;IEnumerable&lt;Employee&gt;&gt;
            GetEmployees()
        {
            var employees =
                _employeeRepository.GetEmployees();
            return Ok(employees);
        }
        [HttpPost]
        public ActionResult&lt;Employee&gt;
            CreateEmployee(Employee employee)
        {
            _employeeRepository.AddEmployee(employee);
            return CreatedAtAction(nameof(GetEmployees),
                new{id = employee.Id }, employee);
        }
    }
}</pre>
   <p>
    
     By contrast, you can
    
    <a id="_idIndexMarker013">
    </a>
    
     create a minimal API endpoint directly in the entry point of your application, with routing, dependency injection, and handlers all defined inline, like in the
    
    
     
      example here:
     
    
   </p>
   <pre class="source-code">
public class Program
{
    public static void Main(string[] args)
    {
        var builder = WebApplication.CreateBuilder(args);
        builder.Services.AddSingleton&lt;IEmployeeRepository,
            EmployeeRepository&gt;();
        var app = builder.Build();
        app.MapGet("/api/employees",
            (IEmployeeRepository employeeRepository) =&gt;
        {
            var employees =
                employeeRepository.GetEmployees();
            return Results.Ok(employees);
        });
        app.Run();
    }
}</pre>
   <p>
    
     As you can see, within a
    
    <a id="_idIndexMarker014">
    </a>
    
     much simpler, smaller block of code (and without the need for a separate controller class), we’ve registered a service for dependency injection, added an HTTP
    
    <strong class="source-inline">
     
      GET
     
    </strong>
    
     endpoint, injected our service, ran the required logic, and retu
    
    <a id="_idTextAnchor022">
    </a>
    
     rned
    
    
     
      a result.
     
    
   </p>
   <p class="callout-heading">
    
     Dependency injection in minimal APIs versus controllers
    
   </p>
   <p class="callout">
    
     We’ll cover dependency injection later in the book, but it’s important to know that dependency injection as shown in the example requires more configuration in a controller-based API, as you typically register your dependencies at the startup of the application in
    
    <strong class="source-inline">
     
      Startup.cs
     
    </strong>
    
     .
    
    
     minimal APIs allow you to inject dependencies in a much lighter, straightforward way, wherever they are needed, without the need for
    
    <strong class="source-inline">
     
      Startup.cs
     
    </strong>
    
     .
    
    
     It’s also important to note that for the shown examples, you would need to create your own
    
    <strong class="source-inline">
     
      IEmployeeRepository
     
    </strong>
    
     for the code
    
    
     
      to work.
     
    
   </p>
   <p>
    
     Having an overall understanding of minimal APIs and how they differ from other development approaches is critical for their optimal use.
    
    
     For more context, let us look at how minimal APIs fit within the context of modern
    
    
     
      software development.
     
    
   </p>
   <h1 id="_idParaDest-20">
    <a id="_idTextAnchor023">
    </a>
    
     The significance of minimal APIs in modern development
    
   </h1>
   <p>
    
     The concept of
    
    <a id="_idIndexMarker015">
    </a>
    
     creating more lightweight and simple APIs has been around for some time, but the adoption of minimal APIs has increased over the years.
    
    
     Flask and Express.js have historically promoted some elements of minimalism in API development within Python and Node.js, respectively, but compared to its counterparts, .NET’s recent entry into the market is specifically designed to exploit the advantages of lightweight,
    
    
     
      simple APIs.
     
    
   </p>
   <p>
    
     Now that minimal APIs have arrived and are being used in mainstream development projects, developers are enjoying the benefits of not having to perform lots of setup and configuration.
    
    
     They can have a working API up and running in two minutes and deploy it to the cloud in another two.
    
    
     This provides phenomenal advantages for industries in which getting software to market quickly is critical
    
    
     
      to success.
     
    
   </p>
   <p>
    
     In addition, the APIs you write can take advantage of .NET’s mature, cross-platform ecosystem, with robust libraries and
    
    <a id="_idIndexMarker016">
    </a>
    
     off-the-shelf security solutions for request validation,
    
    <strong class="bold">
     
      cross-site request forgery
     
    </strong>
    
     (
    
    <strong class="bold">
     
      CSRF
     
    </strong>
    
     ) protection,
    
    
     
      and authorization.
     
    
   </p>
   <p>
    
     So far, we have taken a generic look at minimal APIs and their place within modern software development.
    
    
     Moving forward, we are going to start configuring our environment for building minimal API projects.
    
    
     As with most project setups, the first things to be configured are the tools and dependencies.
    
    
     Follow the steps in the next section to start preparing your
    
    
     
      development environment.
     
    
   </p>
   <h1 id="_idParaDest-21">
    <a id="_idTextAnchor024">
    </a>
    
     Installing required tools and dependencies
    
   </h1>
   <p>
    
     For us to begin working with minimal APIs, we need to install
    
    
     
      some tools.
     
    
   </p>
   <p>
    
     Let us
    
    <a id="_idIndexMarker017">
    </a>
    
     start by installing the .NET 9.0 SDK.
    
    
     Navigate to Microsoft’s .NET SDK downloads page at
    
    <a href="https://dotnet.microsoft.com/en-us/download/dotnet">
     
      https://dotnet.microsoft.com/en-us/download/dotnet
     
    </a>
    
     .
    
    
     (This can be skipped if you already have the
    
    
     
      SDK installed.)
     
    
   </p>
   <p>
    
     At the time of writing, the SDK is available by doing
    
    
     
      the following:
     
    
   </p>
   <ol>
    <li>
     
      Choos
     
     <a id="_idTextAnchor025">
     </a>
     
      e the appropriate build for your operating system and system architecture.
     
     
      For example, if you are running 64-bit Windows, you would download
     
     <strong class="bold">
      
       x64
      
     </strong>
     
      .
     
     
      Likewise, if you were running a Mac with an ARM CPU, you would select
     
     <strong class="bold">
      
       Arm64
      
     </strong>
     
      next to
     
     <strong class="bold">
      
       macOS
      
     </strong>
     
      .
     
     
      Linux tends to be a little different because a package manager is used to obtain
     
     
      
       the SDK.
      
     
     <p class="list-inset">
      
       If you are a
      
      <a id="_idIndexMarker018">
      </a>
      
       Linux user, follow the relevant Microsoft documentation for your specific
      
      
       
        Linux distribution:
       
      
     </p>
    </li>
   </ol>
   <div><div><img alt="Figure 1.1: Choosing the right installer" src="img/B20968_01_01.jpg"/>
     
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    
     Figure 1.1: Choosing the right installer
    
   </p>
   <p class="list-inset">
    
     Before we move on, let us quickly differentiate between installers and binaries.
    
    
     When software is added to a system, it usually consists of multiple files containing code to be executed when the program runs.
    
    
     These files are binaries: libraries or modules of code that make up the overall application.
    
    
     An installer automatically places all these components in the relevant locations on the host system.
    
    
     Because binaries are managed by installers, if you simply download the binaries, you will not automatically have them placed in specific locations.
    
    
     The configuration that would normally be orchestrated by an installer will not have taken place.
    
    
     This is sometimes necessary if you want to configure an application differently from how an installer would normally
    
    
     
      do it.
     
    
   </p>
   <p class="list-inset">
    
     When you download .NET SDKs from Microsoft’s website, you usually get the choice between downloading an installer or a binary.
    
    
     The simplest option is to use an installer, as this will configure your .NET development environment for you automatically.
    
    
     It is the version used in examples shown in this book and I recommend you use
    
    
     
      it also.
     
    
   </p>
   <ol>
    <li value="2">
     
      Once the
     
     <a id="_idIndexMarker019">
     </a>
     
      installer has downloaded, open it and follow the prompts.
     
     
      You will need administrator permissions to install
     
     <a id="_idIndexMarker020">
     </a>
     
      
       the SDK.
      
     
    </li>
   </ol>
   <div><div><img alt="Figure 1.2: The .NET SDK installer" src="img/B20968_01_02.jpg"/>
     
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    
     Figure 1.2: The .NET SDK installer
    
   </p>
   <p>
    
     Now that we have the SDK installed, it’s time to install Visual Studio (on Windows) or Visual Studio Code (on macOS or Linux).
    
    
     Either application can be obtained from the Visual Studio website
    
    
     
      at
     
    
    <a href="https://visualstudio.microsoft.com/downloads">
     
      
       https://visualstudio.microsoft.com/downloads
      
     
    </a>
    
     
      .
     
    
   </p>
   <p class="callout-heading">
    
     .NET versions
    
   </p>
   <p class="callout">
    
     The version of .NET shown after installation and the version of .NET shown in this example
    
    
     
      may differ.
     
    
   </p>
   <h2 id="_idParaDest-22">
    <a id="_idTextAnchor026">
    </a>
    
     Installing Visual Studio for Windows
    
   </h2>
   <p>
    
     Follow
    
    <a id="_idIndexMarker021">
    </a>
    
     these steps to
    
    <a id="_idIndexMarker022">
    </a>
    
     install Visual Studio on
    
    
     
      your device:
     
    
   </p>
   <ol>
    <li>
     
      On the downloads page, choose your desired Visual Studio edition.
     
     
      If you don’t have a Visual Studio license, you can select the
     
     
      <strong class="bold">
       
        Community
       
      </strong>
     
     
      
       edition.
      
     
    </li>
    <li>
     
      Like when using the installer for the SDK, simply follow the prompts in the Visual Studio wizard to install to the desired location on
     
     
      
       your machine.
      
     
    </li>
    <li>
     
      You will be prompted to choose relevant workloads during the setup process.
     
     
      At a minimum, you would need to select
     
     <strong class="bold">
      
       ASP.NET and web development
      
     </strong>
     
      to develop minimal APIs.
     
     
      Following this, you will be asked about optional additions.
     
     
      None of these will be crucial for minimal API development, so you can simply click
     
     <strong class="bold">
      
       Next
      
     </strong>
     
      once you have passed the screen shown in
     
     
      <em class="italic">
       
        Figure 1
       
      </em>
     
     
      <em class="italic">
       
        .3
       
      </em>
     
     
      
       .
      
     
    </li>
   </ol>
   <div><div><img alt="Figure 1.3: Workloads selection when installing Visual Studio" src="img/B20968_01_03.jpg"/>
     
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    
     Figure 1.3: Workloads selection when installing Visual Studio
    
   </p>
   <p>
    
     Next, let’s install Visual
    
    
     
      Studio Code.
     
    
   </p>
   <h2 id="_idParaDest-23">
    <a id="_idTextAnchor027">
    </a>
    
     Installing Visual Studio Code for Mac and Linux
    
   </h2>
   <p>
    
     Visual
    
    <a id="_idIndexMarker023">
    </a>
    
     Studio Code is a free application.
    
    
     Simply
    
    <a id="_idIndexMarker024">
    </a>
    
     download the relevant installer for your target
    
    <a id="_idIndexMarker025">
    </a>
    
     operating system.
    
    
     Then, do
    
    
     
      the following:
     
    
   </p>
   <ol>
    <li>
     
      Once downloaded, run
     
     
      
       the installer.
      
     
    </li>
    <li>
     
      Open Visual Studio Code and click the
     
     <strong class="bold">
      
       Extensions
      
     </strong>
     
      button in the left ribbon (or use the keyboard shortcut,
     
     <em class="italic">
      
       Ctrl
      
     </em>
     
      +
     
     <em class="italic">
      
       Shift
      
     </em>
     
      +
     
     
      <em class="italic">
       
        X
       
      </em>
     
     
      
       ).
      
     
    </li>
    <li>
     
      In the search bar at the top of the extensions pane, search for
     
     <strong class="source-inline">
      
       C#
      
     </strong>
     
      .
     
     
      You will see an extension appear with the same name.
     
     
      This is the
     
     <strong class="bold">
      
       C# for Visual Studio Code
      
     </strong>
     
      extension, which you will need to program in C# in Visual Studio Code.
     
     
      
       Click I
      
     
     
      <strong class="bold">
       
        nstall
       
      </strong>
     
     
      
       .
      
     
    </li>
   </ol>
   <div><div><img alt="Figure 1.4: Microsoft’s official C# extension for Visual Studio Code" src="img/B20968_01_04.jpg"/>
     
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    
     Figure 1.4: Microsoft’s official C# extension for Visual Studio Code
    
   </p>
   <p>
    
     You now have all the prerequisite tools for writing minimal APIs in .NET installed.
    
    
     Next, we will set up our
    
    
     
      development environment.
     
    
   </p>
   <h1 id="_idParaDest-24">
    <a id="_idTextAnchor028">
    </a>
    
     Configuring development environments
    
   </h1>
   <p>
    
     We’ll start to develop our first minimal API in the next chapter, but before that, let’s create the project structure needed for us to start
    
    
     
      writing code.
     
    
   </p>
   <p>
    
     To build minimal APIs, we need to be working within an ASP.NET Core project.
    
    
     Depending on whether you are using Visual Studio or Visual Studio Code, there are several ways you can create this type
    
    
     
      of project.
     
    
   </p>
   <h2 id="_idParaDest-25">
    <a id="_idTextAnchor029">
    </a>
    
     Creating a project in Visual Studio
    
   </h2>
   <p>
    
     Let’s begin by
    
    <a id="_idIndexMarker026">
    </a>
    
     creating a project in
    
    <a id="_idIndexMarker027">
    </a>
    
     
      Visual Studio:
     
    
   </p>
   <ol>
    <li>
     
      Open
     
     
      
       Visual Studio.
      
     
    </li>
    <li>
     
      The screen shown in the following figure gives you the option to search for the type of project you wish to create.
     
     
      Search for
     
     <strong class="bold">
      
       ASP.NET Core Empty
      
     </strong>
     
      and select it from the list, before clicking
     
     <strong class="bold">
      
       Next
      
     </strong>
     
      .
     
     
      (Make sure you choose the C# version of the template.
     
     
      Do not use the F# version, as this is not within the scope of
     
     
      
       this book.)
      
     
    </li>
   </ol>
   <div><div><img alt="Figure 1.5: Visual Studio’s new project creation screen" src="img/B20968_01_05.jpg"/>
     
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    
     Figure 1.5: Visual Studio’s new project creation screen
    
   </p>
   <ol>
    <li value="3">
     
      Give your
     
     <a id="_idIndexMarker028">
     </a>
     
      new project a name and choose a folder location
     
     <a id="_idIndexMarker029">
     </a>
     
      in which it should be saved.
     
     
      Then,
     
     
      
       click
      
     
     
      <strong class="bold">
       
        Next
       
      </strong>
     
     
      
       .
      
     
    </li>
   </ol>
   <div><div><img alt="Figure 1.6: Project configuration (ASP.NET Core Empty) in Visual Studio" src="img/B20968_01_06.jpg"/>
     
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    
     Figure 1.6: Project configuration (ASP.NET Core Empty) in Visual Studio
    
   </p>
   <ol>
    <li value="4">
     
      Choose your
     
     <a id="_idIndexMarker030">
     </a>
     
      preferred .NET version.
     
     
      This book uses .NET 9, and
     
     <a id="_idIndexMarker031">
     </a>
     
      we have just installed the .NET 9 SDK, so select this version from the list.
     
     <strong class="bold">
      
       Configure for HTTPS
      
     </strong>
     
      should be checked by default.
     
     
      This can be left checked.
     
     
      Finally, click
     
     <strong class="bold">
      
       Create
      
     </strong>
     
      .
     
     
      Your project will then
     
     
      
       be created.
      
     
    </li>
   </ol>
   <p>
    
     Visual Studio is arguably the most used IDE for this kind of project.
    
    
     However, it is possible to create minimal API projects in newer IDEs, such as Visual Studio Code.
    
    
     Let us explore how we can set up the same project in Visual
    
    
     
      Studio Code.
     
    
   </p>
   <h2 id="_idParaDest-26">
    <a id="_idTextAnchor030">
    </a>
    
     Creating a project in Visual Studio Code
    
   </h2>
   <p>
    
     Next, let’s
    
    <a id="_idIndexMarker032">
    </a>
    
     create a
    
    <a id="_idIndexMarker033">
    </a>
    
     project in Visual Studio Code in
    
    
     
      this section:
     
    
   </p>
   <ol>
    <li>
     
      Open Visual Studio Code and open a terminal window by clicking
     
     <strong class="bold">
      
       Terminal
      
     </strong>
     
      and then
     
     <strong class="bold">
      
       New Terminal Window
      
     </strong>
     
      (or use the keyboard shortcut,
     
     <em class="italic">
      
       Ctrl
      
     </em>
     
      +
     
     
      <em class="italic">
       
        Shift
       
      </em>
     
     
      
       ).
      
     
    </li>
    <li>
     
      Enter the following commands into the terminal window, replacing
     
     <strong class="source-inline">
      
       MyProjectName
      
     </strong>
     
      with the name of
     
     
      
       your project:
      
     
     <pre class="source-code">
dotnet new web -o MyProjectName
cd MyProjectName
code -r ../MyProjectName</pre>
    </li>
    <li>
     
      When
     
     <a id="_idIndexMarker034">
     </a>
     
      presented with dialog boxes asking
     
     <a id="_idIndexMarker035">
     </a>
     
      whether you want to trust the authors and add required assets to the project,
     
     
      
       select
      
     
     
      <strong class="bold">
       
        Yes
       
      </strong>
     
     
      
       .
      
     
    </li>
   </ol>
   <p>
    
     Both project configurations will create the same minimal API example that we explored earlier in the chapter, returning
    
    <strong class="source-inline">
     
      Hello World!
     
    </strong>
    
     on an HTTP
    
    
     <strong class="source-inline">
      
       GET
      
     </strong>
    
    
     
      endpoint:
     
    
   </p>
   <pre class="source-code">
// A builder is initialized and then built.
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();
// GET endpoint mapped onto the base URL route, with a
// function body that r<a id="_idTextAnchor031"/>eturns a string.
app.MapGet("/", () =&gt; "Hello World!");
//The initialized app is started
app.Run();</pre>
   <p>
    
     You now have the basic foundations of a minimal
    
    
     
      API project.
     
    
   </p>
   <p>
    
     We can get the output from
    
    <a id="_idIndexMarker036">
    </a>
    
     this example in Visual Studio Code and Visual
    
    <a id="_idIndexMarker037">
    </a>
    
     Studio by clicking the
    
    <strong class="bold">
     
      Play
     
    </strong>
    
     button.
    
    
     This will run the project in debug mode, opening a browser window that, in the case of this example, simply displays
    
    <strong class="bold">
     
      Hello World!
     
    </strong>
    
     .
    
    
     This button is in slightly different places depending on which IDE you
    
    
     
      are using.
     
    
   </p>
   <p>
    
     In Visual Studio Code it looks like
    
    
     
      the following:
     
    
   </p>
   <div><div><img alt="Figure 1.7: Debugging the project in Visual Studio Code" src="img/B20968_01_07.jpg"/>
     
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    
     Figure 1.7: Debugging the project in Visual Studio Code
    
   </p>
   <p>
    
     While the button in Visual Studio looks like
    
    
     <em class="italic">
      
       Figure 1
      
     </em>
    
    
     <em class="italic">
      
       .8
      
     </em>
    
    
     
      :
     
    
   </p>
   <div><div><img alt="Figure 1.8: Debugging the project in Visual Studio" src="img/B20968_01_08.jpg"/>
     
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    
     Figure 1.8: Debugging the project in Visual Studio
    
   </p>
   <p>
    
     Let’s recap what we learnt in
    
    
     
      this chapter!
     
    
   </p>
   <h1 id="_idParaDest-27">
    <a id="_idTextAnchor032">
    </a>
    
     Summary
    
   </h1>
   <p>
    
     In this chapter, you learned about the role of minimal APIs in modern application development, and you should now have a good general understanding of
    
    
     
      their advantages.
     
    
   </p>
   <p>
    
     You learned how minimal APIs differ from controller-based APIs in .NET, and gained an understanding of the advantages and disadvantages of these
    
    
     
      two formats.
     
    
   </p>
   <p>
    
     You installed the basic required libraries and tools to get started on your journey and learned how to create a new project in Visual Studio or Visual
    
    
     
      Studio Code.
     
    
   </p>
   <p>
    
     The key takeaway from this chapter is that minimal APIs promote simplicity, high performance,
    
    
     
      and maintainability.
     
    
   </p>
   <p>
    
     In the next chapter, we will start writing our first Minimal API endpoints, which will be able to handle various HTTP methods on different routes.
    
    
     We will minimal build responses to send back to clients and make calls to
    
    
     
      our API.
     
    
   </p>
  </div>
 </body></html>