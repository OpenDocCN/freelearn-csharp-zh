<html><head></head><body>
  <div id="_idContainer025">
   <h1 class="chapter-number" id="_idParaDest-28">
    <a id="_idTextAnchor033">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     2
    </span>
   </h1>
   <h1 id="_idParaDest-29">
    <a id="_idTextAnchor034">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Creating Your First Minimal API
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     The convenience of the .NET ecosystem could not be more evident by the steps you took in the last chapter.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     Minimal APIs in .NET live up to their name by having not only minimal logic and dependencies but also minimal
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.4.1">
      setup requirements.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.5.1">
     Just by creating your first project, you have technically already created your first minimal API.
    </span>
    <a id="_idTextAnchor035">
    </a>
    <span class="koboSpan" id="kobo.6.1">
     It’s functional out of the box, with a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.7.1">
      GET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.8.1">
     endpoint that returns
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.9.1">
      a response.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.10.1">
     Obviously, there is more to minimal APIs than what we saw in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.11.1">
      Hello World
     </span>
    </strong>
    <span class="koboSpan" id="kobo.12.1">
     example.
    </span>
    <span class="koboSpan" id="kobo.12.2">
     There are different HTTP request methods, varying endpoints, and more advanced response generation to consider as part of a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.13.1">
      straightforward API.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.14.1">
     In this chapter,
    </span>
    <a id="_idTextAnchor036">
    </a>
    <span class="koboSpan" id="kobo.15.1">
     we’re going to cover the following
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.16.1">
      main topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.17.1">
      Project structure
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.18.1">
       and organization
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.19.1">
      Defining endpoints
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.20.1">
       and routes
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.21.1">
      Building the employee
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.22.1">
       management API
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.23.1">
      Handling
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.24.1">
       HTTP requests
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.25.1">
     By the end of the chapter, you’ll have gained experience in defining endpoints for handling HTTP requests.
    </span>
    <span class="koboSpan" id="kobo.25.2">
     You’ll also be able to implement basic HTTP request handling and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.26.1">
      response generation.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-30">
    <a id="_idTextAnchor037">
    </a>
    <span class="koboSpan" id="kobo.27.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.28.1">
     To follow the directions in this chapter, you’ll need to have the following installed on your Windows, macOS, or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.29.1">
      Linux machine:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.30.1">
      .NET 9.0
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.31.1">
       Software Development
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.32.1">
        Kit
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.33.1">
       (
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.34.1">
        SDK
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.35.1">
       )
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.36.1">
      Visual Studio or Visual
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.37.1">
       Studio Code
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.38.1">
      C# Extension for Visual Studio Code (if you are using Visual
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.39.1">
       Studio Code)
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.40.1">
     If you followed the setup guidance in
    </span>
    <a href="B20968_01.xhtml#_idTextAnchor014">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.41.1">
        Chapter 1
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.42.1">
     , then you are ready to follow the directions in this chapter.
    </span>
    <span class="koboSpan" id="kobo.42.2">
     However, if you still need to configure the preceding tools, then please follow the
    </span>
    <a href="B20968_01.xhtml#_idTextAnchor014">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.43.1">
        Chapter 1
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.44.1">
     setup instructions under the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.45.1">
      Installing required tools and dependencies
     </span>
    </em>
    <span class="koboSpan" id="kobo.46.1">
     section.
    </span>
    <span class="koboSpan" id="kobo.46.2">
     The code for this chapter is available in the GitHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.47.1">
      at:
     </span>
    </span>
    <span class="No-Break">
    </span>
    <a href="https://github.com/PacktPublishing/Minimal-APIs-in-ASP.NET-9">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.48.1">
       https://github.com/PacktPublishing/Minimal-APIs-in-ASP.NET
      </span>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.49.1">
       -9
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.50.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-31">
    <a id="_idTextAnchor038">
    </a>
    <span class="koboSpan" id="kobo.51.1">
     Project structure and organization
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.52.1">
     The rules around how a project is structured and organized are not exactly rigid, but it is important to ensure that you are organizing your projects in a cohesive and accessible manner.
    </span>
    <span class="koboSpan" id="kobo.52.2">
     With minimal APIs in general, we are aiming for simplicity.
    </span>
    <span class="koboSpan" id="kobo.52.3">
     Project structure and organization in minimal APIs specifically are no different.
    </span>
    <span class="koboSpan" id="kobo.52.4">
     Therefore, it may not come as a shock that the project structure for minimal APIs outlined in the following examples will be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.53.1">
      extremely basic.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.54.1">
     In the following three subsections, we look at the elements needed to simplify our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.55.1">
      project structure.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-32">
    <a id="_idTextAnchor039">
    </a>
    <span class="koboSpan" id="kobo.56.1">
     Endpoints
    </span>
   </h2>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.57.1">
      Endpoints
     </span>
    </strong>
    <span class="koboSpan" id="kobo.58.1">
     are
    </span>
    <a id="_idIndexMarker038">
    </a>
    <span class="koboSpan" id="kobo.59.1">
     the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.60.1">
      open doors
     </span>
    </em>
    <span class="koboSpan" id="kobo.61.1">
     to your API.
    </span>
    <span class="koboSpan" id="kobo.61.2">
     Each endpoint sits within an area of your domain (e.g., employees or inventory) and is responsible for specific actions within that domain, such as adding, updating, or removing an
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.62.1">
      inventory item.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.63.1">
     In ASP.NET
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.64.1">
      Controller
     </span>
    </strong>
    <span class="koboSpan" id="kobo.65.1">
     -based projects, you would usually distribute endpoints for each area of the domain into logical groups
    </span>
    <a id="_idIndexMarker039">
    </a>
    <span class="koboSpan" id="kobo.66.1">
     called
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.67.1">
      Controllers
     </span>
    </strong>
    <span class="koboSpan" id="kobo.68.1">
     .
    </span>
    <span class="koboSpan" id="kobo.68.2">
     Each
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.69.1">
      Controller
     </span>
    </strong>
    <span class="koboSpan" id="kobo.70.1">
     is a class containing endpoints that are relevant to that
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.71.1">
      Controller’s
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.72.1">
      domain area.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.73.1">
     However, in minimal APIs, it is normal for endpoints to simply be defined in the app’s entry-point,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.74.1">
      within
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.75.1">
       Program.cs
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.76.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-33">
    <a id="_idTextAnchor040">
    </a>
    <span class="koboSpan" id="kobo.77.1">
     Models
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.78.1">
     Just like
    </span>
    <a id="_idIndexMarker040">
    </a>
    <span class="koboSpan" id="kobo.79.1">
     in
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.80.1">
      Model-View-Controller
     </span>
    </strong>
    <span class="koboSpan" id="kobo.81.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.82.1">
      MVC
     </span>
    </strong>
    <span class="koboSpan" id="kobo.83.1">
     ) projects, a model
    </span>
    <a id="_idIndexMarker041">
    </a>
    <span class="koboSpan" id="kobo.84.1">
     in minimal APIs can be used to encapsulate domain objects.
    </span>
    <span class="koboSpan" id="kobo.84.2">
     Models are usually created as their own classes.
    </span>
    <span class="koboSpan" id="kobo.84.3">
     In the upcoming examples, which demonstrate API endpoint mappings, I will be creating logic for an API that manages employees.
    </span>
    <span class="koboSpan" id="kobo.84.4">
     Therefore, I will use a model in the form of an
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.85.1">
       Employee
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.86.1">
      class.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.87.1">
     Using a
    </span>
    <a id="_idIndexMarker042">
    </a>
    <span class="koboSpan" id="kobo.88.1">
     class to represent domain objects brings many benefits, including
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.89.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.90.1">
       Separation of concerns
      </span>
     </strong>
     <span class="koboSpan" id="kobo.91.1">
      : Models encapsulate the data for the application, separating it from the business logic, which will be found within the API layer in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.92.1">
       our case.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.93.1">
       Reusability
      </span>
     </strong>
     <span class="koboSpan" id="kobo.94.1">
      : Model objects can be reused by business logic across
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.95.1">
       the application.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.96.1">
       Loose coupling
      </span>
     </strong>
     <span class="koboSpan" id="kobo.97.1">
      : Thanks to the separation of concerns between data and business logic, changes to the API need not affect the structure of the data inadvertently.
     </span>
     <span class="koboSpan" id="kobo.97.2">
      This is particularly important in common cases where models mirror a database table’s structure through an ORM such as Entity Framework or Dapper (See
     </span>
     <a href="B20968_08.xhtml#_idTextAnchor132">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.98.1">
         Chapter 8
        </span>
       </em>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.99.1">
       ).
      </span>
     </span>
    </li>
   </ul>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.100.1">
     Staying organized
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.101.1">
     While minimal API project structures can afford to stay very simple, it’s still important to keep them organized.
    </span>
    <span class="koboSpan" id="kobo.101.2">
     It is good practice to keep all models in a dedicated
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.102.1">
      Models
     </span>
    </strong>
    <span class="koboSpan" id="kobo.103.1">
     folder and all endpoints in their own
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.104.1">
       Endpoints
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.105.1">
      folder.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.106.1">
     For the final piece in the project structure puzzle, we
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.107.1">
      have routes.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-34">
    <a id="_idTextAnchor041">
    </a>
    <span class="koboSpan" id="kobo.108.1">
     Routes
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.109.1">
     If endpoints are the open door
    </span>
    <a id="_idIndexMarker043">
    </a>
    <span class="koboSpan" id="kobo.110.1">
     into the API,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.111.1">
      routes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.112.1">
     are the address of each door.
    </span>
    <span class="koboSpan" id="kobo.112.2">
     By creating a route, you are defining the URLs that your API will respond to, and which piece of logic will be executed as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.113.1">
      a result.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.114.1">
     Routes can be standalone or contain parameters that will be passed through to the resulting
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.115.1">
      API logic.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.116.1">
     In the endpoint on the following pages, you will see routes defined in the form of strings, indicating the text that should be appended onto the application’s base URL to access
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.117.1">
      specific endpoints.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.118.1">
     For example, if our application is hosted at
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.119.1">
      getInventoryItem
     </span>
    </strong>
    <span class="koboSpan" id="kobo.120.1">
     , the full URL for that endpoint would
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.121.1">
      become
     </span>
    </span>
    <a href="https://adventureworks.com/getInventoryItem">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.122.1">
       https://adventureworks.com/getInventoryItem
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.123.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.124.1">
     We can, however, make our routes more generic.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.125.1">
      getInventoryItem
     </span>
    </strong>
    <span class="koboSpan" id="kobo.126.1">
     is certainly clear, but it is better practice to, where possible, send different kinds of requests to a generic route, with different logic firing depending on the HTTP method
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.127.1">
      in use.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.128.1">
     For example, instead of naming our route
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.129.1">
      getinventoryitem
     </span>
    </strong>
    <span class="koboSpan" id="kobo.130.1">
     , we could apply the generic name
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.131.1">
      inventoryitems
     </span>
    </strong>
    <span class="koboSpan" id="kobo.132.1">
     to as many HTTP methods as is relevant.
    </span>
    <span class="koboSpan" id="kobo.132.2">
     This means that a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.133.1">
      GET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.134.1">
     request (we will learn about these methods in the next section) to this route will get an inventory item, but a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.135.1">
      POST
     </span>
    </strong>
    <span class="koboSpan" id="kobo.136.1">
     to the same route will
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.137.1">
      create one.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.138.1">
     This is deemed to be a best
    </span>
    <a id="_idIndexMarker044">
    </a>
    <span class="koboSpan" id="kobo.139.1">
     practice for naming routes, for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.140.1">
      several reasons:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.141.1">
       Consistency
      </span>
     </strong>
     <span class="koboSpan" id="kobo.142.1">
      : Since having a generic endpoint has become an API convention, it allows your API to conform to an
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.143.1">
       agreed standard.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.144.1">
       Intuitiveness
      </span>
     </strong>
     <span class="koboSpan" id="kobo.145.1">
      : Most developers consuming an API will work to the same standard.
     </span>
     <span class="koboSpan" id="kobo.145.2">
      This means that they will be more quickly able to pick up
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.146.1">
       your API.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.147.1">
       RESTful principles
      </span>
     </strong>
     <span class="koboSpan" id="kobo.148.1">
      : Allowing the HTTP method to identify the function of an endpoint rather than the route allows us to conform to RESTful principles, which encourage good
     </span>
     <a id="_idIndexMarker045">
     </a>
     <span class="koboSpan" id="kobo.149.1">
      use of
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.150.1">
       CREATE, READ, UPDATE, DELETE
      </span>
     </strong>
     <span class="koboSpan" id="kobo.151.1">
      (
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.152.1">
       CRUD
      </span>
     </strong>
     <span class="koboSpan" id="kobo.153.1">
      ) operations, idempotency (during multiple identical requests, the server’s state is never changed, and it returns the same results for the same request each time), and the need for full coverage of the standard HTTP methods (
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.154.1">
       GET
      </span>
     </strong>
     <span class="koboSpan" id="kobo.155.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.156.1">
       POST
      </span>
     </strong>
     <span class="koboSpan" id="kobo.157.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.158.1">
       PUT
      </span>
     </strong>
     <span class="koboSpan" id="kobo.159.1">
      ,
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.160.1">
        PATCH
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.161.1">
       ,
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.162.1">
        DELETE
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.163.1">
       ).
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.164.1">
     In contrast to the list, if you have API endpoints that support an HTTP method in a very bespoke use case, you can still create routes that are more specific.
    </span>
    <span class="koboSpan" id="kobo.164.2">
     However, the customary practice is to use the generic route naming convention that
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.165.1">
      we outlined.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.166.1">
     Understanding routes is critical to minimal API development in addition to most API fram
    </span>
    <a id="_idTextAnchor042">
    </a>
    <span class="koboSpan" id="kobo.167.1">
     eworks.
    </span>
    <span class="koboSpan" id="kobo.167.2">
     Let’s turn our attention to the way in which routes and their endpoints
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.168.1">
      are defined.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-35">
    <a id="_idTextAnchor043">
    </a>
    <span class="koboSpan" id="kobo.169.1">
     Defining endpoints and routes
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.170.1">
     Like any other RESTful API framework, minimal API endpoints are accessed using different HTTP methods.
    </span>
    <span class="koboSpan" id="kobo.170.2">
     Depending on the HTTP method used to contact the API endpoint, a different result will be produced, or an action will
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.171.1">
      be executed.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.172.1">
     In the next few sections, we will look at some examples of endpoints being mapped with different
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.173.1">
      HTTP methods.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-36">
    <a id="_idTextAnchor044">
    </a>
    <span class="koboSpan" id="kobo.174.1">
     GET methods
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.175.1">
     An HTTP
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.176.1">
      GET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.177.1">
     method is a
    </span>
    <a id="_idIndexMarker046">
    </a>
    <span class="koboSpan" id="kobo.178.1">
     request for information.
    </span>
    <span class="koboSpan" id="kobo.178.2">
     On successful retrieval, the API endpoint
    </span>
    <a id="_idIndexMarker047">
    </a>
    <span class="koboSpan" id="kobo.179.1">
     returns a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.180.1">
      200 OK
     </span>
    </strong>
    <span class="koboSpan" id="kobo.181.1">
     status code, along with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.182.1">
      requested data.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.183.1">
     The example shows a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.184.1">
      GET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.185.1">
     endpoint mapped to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.186.1">
      "/employees"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.187.1">
     route.
    </span>
    <span class="koboSpan" id="kobo.187.2">
     It gets the employee ID contained within the URL and uses this to find the relevant employee data before
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.188.1">
      returning it.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.189.1">
     For example, if this API were hosted at constoso.com, a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.190.1">
      GET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.191.1">
     call to
    </span>
    <a href="https://contoso.com/employees/24">
     <span class="koboSpan" id="kobo.192.1">
      contoso.com/employees/24
     </span>
    </a>
    <span class="koboSpan" id="kobo.193.1">
     would retrieve the employee whose ID
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.194.1">
      is
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.195.1">
       24
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.196.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.197.1">
app.MapGet("/employees/{id}", (int id) =&gt;
{
    var employee = EmployeeManager.Get(id);
    return Results.Ok(employee);
});</span></pre>
   <p>
    <span class="koboSpan" id="kobo.198.1">
     Let’s look at
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.199.1">
      POST
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.200.1">
      methods now.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-37">
    <a id="_idTextAnchor045">
    </a>
    <span class="koboSpan" id="kobo.201.1">
     POST methods
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.202.1">
     An HTTP
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.203.1">
      POST
     </span>
    </strong>
    <span class="koboSpan" id="kobo.204.1">
     method is a
    </span>
    <a id="_idIndexMarker048">
    </a>
    <span class="koboSpan" id="kobo.205.1">
     request to create something.
    </span>
    <span class="koboSpan" id="kobo.205.2">
     On successful execution, the API
    </span>
    <a id="_idIndexMarker049">
    </a>
    <span class="koboSpan" id="kobo.206.1">
     endpoint usually returns a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.207.1">
      201 Created
     </span>
    </strong>
    <span class="koboSpan" id="kobo.208.1">
     status code (this is best practice, although some APIs return the standard
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.209.1">
      200 OK
     </span>
    </strong>
    <span class="koboSpan" id="kobo.210.1">
     code), along with any
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.211.1">
      relevant data.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.212.1">
     The following example shows a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.213.1">
      POST
     </span>
    </strong>
    <span class="koboSpan" id="kobo.214.1">
     method mapped to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.215.1">
      "/employees"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.216.1">
     endpoint.
    </span>
    <span class="koboSpan" id="kobo.216.2">
     It expects to receive an employee payload in JSON format.
    </span>
    <span class="koboSpan" id="kobo.216.3">
     The endpoint then converts the payload into an object of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.217.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.218.1">
     type, before calling some other back-end code to create an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.219.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.220.1">
     , using this object as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.221.1">
      a parameter.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.222.1">
     If everything worked as expected, the endpoint returns a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.223.1">
      201 Created
     </span>
    </strong>
    <span class="koboSpan" id="kobo.224.1">
     status code, along with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.225.1">
      Employee
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.226.1">
       Created
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.227.1">
      message.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.228.1">
     For example, if this API were hosted at
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.229.1">
      constoso.com
     </span>
    </strong>
    <span class="koboSpan" id="kobo.230.1">
     , a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.231.1">
      POST
     </span>
    </strong>
    <span class="koboSpan" id="kobo.232.1">
     call would execute the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.233.1">
      following code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.234.1">
app.MapPost("/employees", (Employee employee) =&gt;
{
    EmployeeManager.Create(employee);
    return Results.Created();
});</span></pre>
   <p>
    <span class="koboSpan" id="kobo.235.1">
     Up next, we look at
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.236.1">
       PUT
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.237.1">
      methods.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-38">
    <a id="_idTextAnchor046">
    </a>
    <span class="koboSpan" id="kobo.238.1">
     PUT methods
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.239.1">
     An HTTP
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.240.1">
      PUT
     </span>
    </strong>
    <span class="koboSpan" id="kobo.241.1">
     method is a request
    </span>
    <a id="_idIndexMarker050">
    </a>
    <span class="koboSpan" id="kobo.242.1">
     to update something.
    </span>
    <span class="koboSpan" id="kobo.242.2">
     It’s important to remember that
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.243.1">
      PUT
     </span>
    </strong>
    <span class="koboSpan" id="kobo.244.1">
     updates
    </span>
    <a id="_idIndexMarker051">
    </a>
    <span class="koboSpan" id="kobo.245.1">
     a resource in a particular way compared to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.246.1">
      PATCH
     </span>
    </strong>
    <span class="koboSpan" id="kobo.247.1">
     method, which has its own way
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.248.1">
      of updating.
     </span>
    </span>
   </p>
   <p>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.249.1">
      PUT
     </span>
    </strong>
    <span class="koboSpan" id="kobo.250.1">
     methods require a payload that represents the entire resource being updated.
    </span>
    <span class="koboSpan" id="kobo.250.2">
     So, in the case of our
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.251.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.252.1">
     API, if you were to use a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.253.1">
      PUT
     </span>
    </strong>
    <span class="koboSpan" id="kobo.254.1">
     endpoint to update an existing employee, the API endpoint would expect a full
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.255.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.256.1">
     object to be sent in the request.
    </span>
    <span class="koboSpan" id="kobo.256.2">
     It would then find the existing employee and replace it with the one sent in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.257.1">
      the request.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.258.1">
     On successful execution, the API endpoint returns the standard
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.259.1">
      200 OK
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.260.1">
      status code.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.261.1">
     The example shows a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.262.1">
      PUT
     </span>
    </strong>
    <span class="koboSpan" id="kobo.263.1">
     method mapped to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.264.1">
      "/employees"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.265.1">
     route.
    </span>
    <span class="koboSpan" id="kobo.265.2">
     It expects to receive an employee payload in JSON format.
    </span>
    <span class="koboSpan" id="kobo.265.3">
     Like in the preceding
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.266.1">
      POST
     </span>
    </strong>
    <span class="koboSpan" id="kobo.267.1">
     example, the endpoint converts this JSON payload into an object of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.268.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.269.1">
     type, before finding the original employee and calling a method to replace it with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.270.1">
      updated one
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.271.1">
     For example, if this
    </span>
    <a id="_idIndexMarker052">
    </a>
    <span class="koboSpan" id="kobo.272.1">
     API was hosted at constoso.com, a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.273.1">
      PUT
     </span>
    </strong>
    <span class="koboSpan" id="kobo.274.1">
     call
    </span>
    <a id="_idIndexMarker053">
    </a>
    <span class="koboSpan" id="kobo.275.1">
     would execute the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.276.1">
      following code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.277.1">
app.MapPut("/employees", (Employee employee) =&gt;
{
    EmployeeManager.Update(employee);
    return Results.Ok();
});</span></pre>
   <h2 id="_idParaDest-39">
    <a id="_idTextAnchor047">
    </a>
    <span class="koboSpan" id="kobo.278.1">
     PATCH methods
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.279.1">
     Like a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.280.1">
      PUT
     </span>
    </strong>
    <span class="koboSpan" id="kobo.281.1">
     method, an HTTP
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.282.1">
      PATCH
     </span>
    </strong>
    <span class="koboSpan" id="kobo.283.1">
     method is also a request to update something.
    </span>
    <span class="koboSpan" id="kobo.283.2">
     However, the way it does its
    </span>
    <a id="_idIndexMarker054">
    </a>
    <span class="koboSpan" id="kobo.284.1">
     update is different.
    </span>
    <span class="koboSpan" id="kobo.284.2">
     Instead of requiring a payload containing a
    </span>
    <a id="_idIndexMarker055">
    </a>
    <span class="koboSpan" id="kobo.285.1">
     representation of the entire object, a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.286.1">
      PATCH
     </span>
    </strong>
    <span class="koboSpan" id="kobo.287.1">
     method only requires that the individual values that need to be changed are sent as part of the request.
    </span>
    <span class="koboSpan" id="kobo.287.2">
     The API can then take care of updating the relevant properties on the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.288.1">
      existing object.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.289.1">
     On successful execution, the API endpoint usually returns the standard
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.290.1">
      200 OK
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.291.1">
      status code.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.292.1">
     The example shows a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.293.1">
      PATCH
     </span>
    </strong>
    <span class="koboSpan" id="kobo.294.1">
     method mapped to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.295.1">
      "/updateEmployeeName"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.296.1">
     route.
    </span>
    <span class="koboSpan" id="kobo.296.2">
     It expects to receive an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.297.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.298.1">
     object like
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.299.1">
      POST
     </span>
    </strong>
    <span class="koboSpan" id="kobo.300.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.301.1">
      PUT
     </span>
    </strong>
    <span class="koboSpan" id="kobo.302.1">
     .
    </span>
    <span class="koboSpan" id="kobo.302.2">
     However, it is only interested in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.303.1">
      Name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.304.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.305.1">
      Id
     </span>
    </strong>
    <span class="koboSpan" id="kobo.306.1">
     properties.
    </span>
    <span class="koboSpan" id="kobo.306.2">
     This means that as long as a JSON payload is sent and it contains these properties, it will work.
    </span>
    <span class="koboSpan" id="kobo.306.3">
     Using these properties, the code fetches the right object of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.307.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.308.1">
     type based on the given Id.
    </span>
    <span class="koboSpan" id="kobo.308.2">
     It then updates the name property on the retrieved employee only, without overwriting the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.309.1">
      whole object.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.310.1">
     For example, if this API was hosted at constoso.com, a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.311.1">
      P
     </span>
    </strong>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.312.1">
      ATCH
     </span>
    </strong>
    <span class="koboSpan" id="kobo.313.1">
     call would execute the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.314.1">
      following code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.315.1">
app.MapPatch("/updateEmployeeName", (Employee employee) =&gt;
{
    EmployeeManager.ChangeName(employee.Id, employee.Name);
    return Results.Ok();
});</span></pre>
   <p>
    <span class="koboSpan" id="kobo.316.1">
     The final method we will look at
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.317.1">
      is
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.318.1">
       DELETE
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.319.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-40">
    <a id="_idTextAnchor048">
    </a>
    <span class="koboSpan" id="kobo.320.1">
     DELETE method
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.321.1">
     A
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.322.1">
      DELETE
     </span>
    </strong>
    <span class="koboSpan" id="kobo.323.1">
     method is
    </span>
    <a id="_idIndexMarker056">
    </a>
    <span class="koboSpan" id="kobo.324.1">
     self-explanatory in terms of what it does.
    </span>
    <span class="koboSpan" id="kobo.324.2">
     Sending an ID for a
    </span>
    <a id="_idIndexMarker057">
    </a>
    <span class="koboSpan" id="kobo.325.1">
     resource as a parameter in the same way we did for the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.326.1">
      GET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.327.1">
     endpoint, the API can locate that specific resource and then
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.328.1">
      remove it.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.329.1">
     In most cases, on success, a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.330.1">
      DELETE
     </span>
    </strong>
    <span class="koboSpan" id="kobo.331.1">
     method will usually return the standard
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.332.1">
      200 OK
     </span>
    </strong>
    <span class="koboSpan" id="kobo.333.1">
     status code, but it may instead return
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.334.1">
      204 No Content
     </span>
    </strong>
    <span class="koboSpan" id="kobo.335.1">
     , which is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.336.1">
      also fine.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.337.1">
     The following example shows a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.338.1">
      DELETE
     </span>
    </strong>
    <span class="koboSpan" id="kobo.339.1">
     method mapped to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.340.1">
      "/employees"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.341.1">
     route.
    </span>
    <span class="koboSpan" id="kobo.341.2">
     The endpoint will use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.342.1">
      Id
     </span>
    </strong>
    <span class="koboSpan" id="kobo.343.1">
     parameter to find the corresponding object of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.344.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.345.1">
     type as the target for deletion.
    </span>
    <span class="koboSpan" id="kobo.345.2">
     After removing the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.346.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.347.1">
     object, it returns a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.348.1">
      204 No Content
     </span>
    </strong>
    <span class="koboSpan" id="kobo.349.1">
     status code to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.350.1">
      the client.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.351.1">
     If this API was hosted at constoso.com, a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.352.1">
      DELETE
     </span>
    </strong>
    <span class="koboSpan" id="kobo.353.1">
     call to
    </span>
    <a href="https://contoso.com/employees">
     <span class="koboSpan" id="kobo.354.1">
      https://contoso.com/employees
     </span>
    </a>
    <span class="koboSpan" id="kobo.355.1">
     would execute
    </span>
    <a id="_idTextAnchor049">
    </a>
    <span class="koboSpan" id="kobo.356.1">
     the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.357.1">
      following code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.358.1">
app.MapDelete("/deleteEmployee/{id}", (int id) =&gt;
{
    EmployeeManager.Delete(id);
    return Results.Ok();
});</span></pre>
   <p>
    <span class="koboSpan" id="kobo.359.1">
     Once you feel you’ve understood the different HTTP methods available to our API, turn to the next section to start building a basic minimal API based on a simple, real-world
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.360.1">
      use case.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-41">
    <a id="_idTextAnchor050">
    </a>
    <span class="koboSpan" id="kobo.361.1">
     Building the employee management API
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.362.1">
     Now that we have
    </span>
    <a id="_idIndexMarker058">
    </a>
    <span class="koboSpan" id="kobo.363.1">
     covered an overview of routing and endpoints, along with the ways in which they support the various HTTP methods, let’s start building a new minimal API project, with the use case of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.364.1">
      employee management.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.365.1">
     Our goal in this section will be to create a repository of employees on which our API can operate.
    </span>
    <span class="koboSpan" id="kobo.365.2">
     The API will then be able to get, create, update, and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.366.1">
      delete employees.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-42">
    <a id="_idTextAnchor051">
    </a>
    <span class="koboSpan" id="kobo.367.1">
     Creating the API
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.368.1">
     Follow the next few steps to
    </span>
    <a id="_idIndexMarker059">
    </a>
    <span class="koboSpan" id="kobo.369.1">
     create the employee
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.370.1">
      management API.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.371.1">
     If you haven’t followed the steps in
    </span>
    <a href="B20968_01.xhtml#_idTextAnchor014">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.372.1">
        Chapter 1
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.373.1">
     to create your ASP.NET project in Visual Studio or Visual Studio Code, follow them first, and then continue with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.374.1">
      next steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.375.1">
      You may already have this in your project, but if not, ensure that it is present at the top of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.376.1">
       Program.cs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.377.1">
      .
     </span>
     <span class="koboSpan" id="kobo.377.2">
      This will build the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.378.1">
       WebApplication
      </span>
     </strong>
     <span class="koboSpan" id="kobo.379.1">
      instance that hosts the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.380.1">
       minimal API:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.381.1">
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.382.1">
      The two lines in the previous step are enough to build the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.383.1">
       WebApplication
      </span>
     </strong>
     <span class="koboSpan" id="kobo.384.1">
      instance, but it still needs to be started.
     </span>
     <span class="koboSpan" id="kobo.384.2">
      Add this line to the bottom of your class to start
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.385.1">
       the instance:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.386.1">
app.Run();</span></pre>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.387.1">
     Now you have a runnable app, but no endpoints.
    </span>
    <span class="koboSpan" id="kobo.387.2">
     Before we define those endpoints, we need some data to work with.
    </span>
    <span class="koboSpan" id="kobo.387.3">
     We’ll come back to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.388.1">
      Program.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.389.1">
     to define the endpoints shortly.
    </span>
    <span class="koboSpan" id="kobo.389.2">
     But before that, let’s create a model of the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.390.1">
       Employee
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.391.1">
      type:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.392.1">
      In the folder structure of the project, create a new folder
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.393.1">
       called
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.394.1">
        Models
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.395.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.396.1">
      Inside the new folder, create a new class
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.397.1">
       called
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.398.1">
        Employee
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.399.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.400.1">
      Create these properties in the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.401.1">
        Employee
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.402.1">
       class:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.403.1">
    public class Employee
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public decimal Salary { get; set; }
        public string Address { get; set; }
        public </span><a id="_idTextAnchor052"/><span class="koboSpan" id="kobo.404.1">string City { get; set; }
        public st</span><a id="_idTextAnchor053"/><span class="koboSpan" id="kobo.405.1">ring Region { get; set; }
        public string</span><a id="_idTextAnchor054"/><span class="koboSpan" id="kobo.406.1"> PostalCode { get; set; }
        </span><a id="_idTextAnchor055"/><span class="koboSpan" id="kobo.407.1">public str</span><a id="_idTextAnchor056"/><span class="koboSpan" id="kobo.408.1">ing Country { get; set; }
      </span><a id="_idTextAnchor057"/><span class="koboSpan" id="kobo.409.1">  public s</span><a id="_idTextAnchor058"/><span class="koboSpan" id="kobo.410.1">tring Phone { get; set; }
    }</span></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.411.1">
       This model can be
      </span>
      <a id="_idTextAnchor059">
      </a>
      <span class="koboSpan" id="kobo.412.1">
       used to represent an
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.413.1">
        Employee
       </span>
      </strong>
      <span class="koboSpan" id="kobo.414.1">
       resource, on which the API can perform various CRUD operations.
      </span>
      <span class="koboSpan" id="kobo.414.2">
       Ordinarily, we would keep this data in a database, such as SQL, but for now, we’re going to keep it simple and store the employees in a collection.
      </span>
      <span class="koboSpan" id="kobo.414.3">
       To do this, the collection needs to be situated somewhere in which it can be accessed by the endpoints we’re about
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.415.1">
        to create.
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.416.1">
      At the top
     </span>
     <a id="_idIndexMarker060">
     </a>
     <span class="koboSpan" id="kobo.417.1">
      level of the project, (the same level as
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.418.1">
       Program.cs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.419.1">
      ), create a new class
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.420.1">
       called
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.421.1">
        EmployeeManager
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.422.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.423.1">
      We want this class to be available at any time, without the need to instantiate it, so make it a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.424.1">
       static class.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.425.1">
      Add a private
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.426.1">
       List
      </span>
     </strong>
     <span class="koboSpan" id="kobo.427.1">
      of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.428.1">
       Employee
      </span>
     </strong>
     <span class="koboSpan" id="kobo.429.1">
      type at the top of the class.
     </span>
     <span class="koboSpan" id="kobo.429.2">
      Your class should look
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.430.1">
       like this:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.431.1">
public static class EmployeeManager
{
    private static List&lt;Employee&gt; _employees =
  </span><a id="_idTextAnchor060"/><span class="koboSpan" id="kobo.432.1">      new List&lt;Employee&gt;();
}</span></pre>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.433.1">
     Now we have an easily accessible class that can store the employees.
    </span>
    <span class="koboSpan" id="kobo.433.2">
     As the collection is private, we can now add a set of methods that can be publicly exposed to the endpoints to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.434.1">
      perform operations.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.435.1">
     We’re about to
    </span>
    <a id="_idIndexMarker061">
    </a>
    <span class="koboSpan" id="kobo.436.1">
     create logic for the CRUD actions to be performed on each
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.437.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.438.1">
     in the collection.
    </span>
    <span class="koboSpan" id="kobo.438.2">
     As part of this, it will be necessary to look up each employee object in the list.
    </span>
    <span class="koboSpan" id="kobo.438.3">
     Let’s add a private function that will find this for us, for reuse on each CRUD operation.
    </span>
    <span class="koboSpan" id="kobo.438.4">
     With the private function added, the class now looks
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.439.1">
      like this:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.440.1">
public static class EmployeeManager
{
    private static List&lt;Employee&gt; _employees =
        new List&lt;Employee&gt;();
    private static int getEmployeeIndex(int id)
    {
        var employeeIndex =
            _employees.FindIndex(x =&gt; x.Id == id);
        if (employeeIndex == -1)
        {
            throw new ArgumentException(
                $"Employee with Id {id} does not exist");
        }
        return employeeIndex;
    }
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.441.1">
     Finally, update the
    </span>
    <a id="_idIndexMarker062">
    </a>
    <span class="koboSpan" id="kobo.442.1">
     class so that it contains the  CRUD methods and functions shown in this
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.443.1">
      code sni
     </span>
     <a id="_idTextAnchor061">
     </a>
     <span class="koboSpan" id="kobo.444.1">
      ppet:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.445.1">
public static void Create(Employee employee)
{
    _employees.Add(employe</span><a id="_idTextAnchor062"/><span class="koboSpan" id="kobo.446.1">e);
}
public static void Update(Employee employee)
{
    _employees[_getEmployeeIndex(employee.Id)] =
        employee;
}
public static void ChangeName(int id, string name)
{
    _employ</span><a id="_idTextAnchor063"/><span class="koboSpan" id="kobo.447.1">ees[_getEmployeeIndex(id)].Name = nam</span><a id="_idTextAnchor064"/><span class="koboSpan" id="kobo.448.1">e;
}
public static void Delete(int id)
{
    _employees.RemoveAt(_getEmployeeIndex(id));
</span><a id="_idTextAnchor065"/><span class="koboSpan" id="kobo.449.1">}
public static Employee Get(int id)
{
    var employee =
        _employees.FirstOrDefault(x =&gt; x.Id == id);
    if (employee == null)
    {
        throw new ArgumentException("Employee Id invalid");
    }
    return employee;
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.450.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.451.1">
      EmployeeManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.452.1">
     class will
    </span>
    <a id="_idIndexMarker063">
    </a>
    <span class="koboSpan" id="kobo.453.1">
     now enable our API endpoints to perform specific CRUD actions on employees in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.454.1">
      the collection.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-43">
    <a id="_idTextAnchor066">
    </a>
    <span class="koboSpan" id="kobo.455.1">
     Creating the first endpoint
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.456.1">
     The first endpoint to
    </span>
    <a id="_idIndexMarker064">
    </a>
    <span class="koboSpan" id="kobo.457.1">
     add will be the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.458.1">
      GET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.459.1">
     endpoint for retrieving a specific
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.460.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.461.1">
     object by
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.462.1">
      its ID.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.463.1">
     Create the following
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.464.1">
      GET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.465.1">
     endpoint in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.466.1">
      Program.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.467.1">
     right above the final
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.468.1">
      app.Run()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.469.1">
     line you added earlier in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.470.1">
      the chapter:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.471.1">
app.MapGet("/employees/{id}", (int id) =&gt;
{
    var employee = EmployeeManager.Get(id);
    return Results.Ok(employee);
});</span></pre>
   <p>
    <span class="koboSpan" id="kobo.472.1">
     This code starts by referencing the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.473.1">
      WebApplication
     </span>
    </strong>
    <span class="koboSpan" id="kobo.474.1">
     instance known as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.475.1">
      app
     </span>
    </strong>
    <span class="koboSpan" id="kobo.476.1">
     , calling the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.477.1">
      MapGet
     </span>
    </strong>
    <span class="koboSpan" id="kobo.478.1">
     method.
    </span>
    <span class="koboSpan" id="kobo.478.2">
     There are equivalent mapping methods in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.479.1">
      WebApplication
     </span>
    </strong>
    <span class="koboSpan" id="kobo.480.1">
     named based on the type of HTTP method.
    </span>
    <span class="koboSpan" id="kobo.480.2">
     Examples include
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.481.1">
      MapPut
     </span>
    </strong>
    <span class="koboSpan" id="kobo.482.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.483.1">
      MapPost
     </span>
    </strong>
    <span class="koboSpan" id="kobo.484.1">
     , and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.485.1">
      so on.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.486.1">
     The first parameter expected on the mapping method will be the route you wish to listen to.
    </span>
    <span class="koboSpan" id="kobo.486.2">
     In this case, we are mapping to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.487.1">
      "/employees/{id}"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.488.1">
     route, which uses a routing parame
    </span>
    <a id="_idTextAnchor067">
    </a>
    <span class="koboSpan" id="kobo.489.1">
     ter (more on this in
    </span>
    <a href="B20968_04.xhtml#_idTextAnchor081">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.490.1">
        Chapter 4
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.491.1">
     ) to capture an
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.492.1">
      employee ID.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.493.1">
     This is then followed by a second parameter in the form of a lambda expression, which uses the passed-in ID to execute the intended logic.
    </span>
    <span class="koboSpan" id="kobo.493.2">
     At this
    </span>
    <a id="_idTextAnchor068">
    </a>
    <span class="koboSpan" id="kobo.494.1">
     point, the code calls the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.495.1">
      Create()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.496.1">
     function defined in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.497.1">
      EmployeeManager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.498.1">
     class before finally returning the result to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.499.1">
      the client.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.500.1">
     Add the
    </span>
    <a id="_idIndexMarker065">
    </a>
    <span class="koboSpan" id="kobo.501.1">
     remaining endpoints to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.502.1">
      Program.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.503.1">
     below the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.504.1">
      GET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.505.1">
     endpoint we just created and above the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.506.1">
      app.Run()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.507.1">
     method.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.508.1">
      Program.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.509.1">
     should now look
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.510.1">
      like this:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.511.1">
using System.Text.Json;
using WebApplication2;
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();
app.MapGet("/employees/{id}", (int id) =&gt;
{
    var employee = EmployeeManager.Get(id);
    return Results.Ok(employee);
});
app.MapPost("/employees", (Employee employee) =&gt;
{
    EmployeeManager.Create(employee);
    return Results.Created();
});
app.MapPut("/employees", (Employee employee) =&gt;
{
    EmployeeManager.Update(employee);
    return Results.Ok();
});
app.MapPatch("/updateEmployeeName", (Employee employee) =&gt;
{
    EmployeeManager.ChangeName(employee.Id, employee.Name);
    return Results.Ok();
});
app.MapDelete("/employees/{id}", (int id) =&gt;
{
    EmployeeManager.Delete(id);
    return Results.Ok();
});
app.Run();</span></pre>
   <p>
    <span class="koboSpan" id="kobo.512.1">
     You’ll notice that all of the
    </span>
    <a id="_idIndexMarker066">
    </a>
    <span class="koboSpan" id="kobo.513.1">
     subsequent endpoints you’ve mapped follow a similar pattern to the first
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.514.1">
      GET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.515.1">
     endpoint you added.
    </span>
    <span class="koboSpan" id="kobo.515.2">
     Each of them specifies the HTTP method type that is being used, followed by the route, then by any parameters.
    </span>
    <span class="koboSpan" id="kobo.515.3">
     There is then a body that executes relevant logic before a result
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.516.1">
      is returned.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.517.1">
     At
    </span>
    <a id="_idTextAnchor069">
    </a>
    <span class="koboSpan" id="kobo.518.1">
     this point, the
    </span>
    <a id="_idIndexMarker067">
    </a>
    <span class="koboSpan" id="kobo.519.1">
     code should compile.
    </span>
    <span class="koboSpan" id="kobo.519.2">
     (If it does not, check that everything has been typed in correctly.) So, run the application (click the play button in Visual Studio or use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.520.1">
      dotnet run
     </span>
    </strong>
    <span class="koboSpan" id="kobo.521.1">
     terminal command in Visual Studio Code) and make some test requests to each of the created endpoints.
    </span>
    <span class="koboSpan" id="kobo.521.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.522.1">
      POST
     </span>
    </strong>
    <span class="koboSpan" id="kobo.523.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.524.1">
      PUT
     </span>
    </strong>
    <span class="koboSpan" id="kobo.525.1">
     ,
    </span>
    <a id="_idTextAnchor070">
    </a>
    <span class="koboSpan" id="kobo.526.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.527.1">
      PATCH
     </span>
    </strong>
    <span class="koboSpan" id="kobo.528.1">
     endpoints expect an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.529.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.530.1">
     object as a parameter, so ensure that you have sent JSON that mirrors the structure of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.531.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.532.1">
     model.
    </span>
    <span class="koboSpan" id="kobo.532.2">
     Look at
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.533.1">
      this example:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.534.1">
{
  "Id": 3,
  "Name": "Happy McHappyson",
  "Salary": 100000.00,
  "Address": "1 Sunny Lane",
  "City": "Happyville",
  "Region": "The Joyful Mountains",
  "PostalCode": "1234565",
  "Country": "Laughland",
  "Phone": "876542-2345-3242-234"
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.535.1">
     Having created an endpoint, it is time we
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.536.1">
      test it.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.537.1">
     Testing your endpoint using OpenAPI
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.538.1">
     .NET 9 introduces
    </span>
    <a id="_idIndexMarker068">
    </a>
    <span class="koboSpan" id="kobo.539.1">
     OpenAPI integration, meaning that you can simply install a package and change the configuration of your API in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.540.1">
      Program.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.541.1">
     to generate a JSON representation of your API and its endpoints.
    </span>
    <span class="koboSpan" id="kobo.541.2">
     This is useful because you can import it into API tools such as Postman, from which you can then easily test
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.542.1">
      your APIs.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.543.1">
     If you wish to test in this manner, follow
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.544.1">
      these steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.545.1">
      Install the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.546.1">
       Microsoft.AspNetCore.OpenApi
      </span>
     </strong>
     <span class="koboSpan" id="kobo.547.1">
      package
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.548.1">
       via NuGet.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.549.1">
      Update
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.550.1">
       Program.cs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.551.1">
      so that it
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.552.1">
       uses OpenApi:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.553.1">builder.Services.AddOpenApi();</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.554.1">var app = builder.Build();</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.555.1">app.MapOpenApi();</span></strong></pre>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.556.1">
     Run the API and
    </span>
    <a id="_idIndexMarker069">
    </a>
    <span class="koboSpan" id="kobo.557.1">
     navigate to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.558.1">
      openAPI/v1.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.559.1">
     route.
    </span>
    <span class="koboSpan" id="kobo.559.2">
     This will provide you with a representation of your API schema, which can be imported into API clients such as Postman
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.560.1">
      for testing.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.561.1">
     At this point in the chapter, you’ve now mapped endpoints with varying HTTP methods, provided them with routes and parameters, created models, and added logic to be executed.
    </span>
    <span class="koboSpan" id="kobo.561.2">
     The goal of the endpoint is to return a response to the client.
    </span>
    <span class="koboSpan" id="kobo.561.3">
     We now need to handle the requests by returning
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.562.1">
      a response.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-44">
    <a id="_idTextAnchor071">
    </a>
    <span class="koboSpan" id="kobo.563.1">
     Handling HTTP requests
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.564.1">
     ASP.NET provides a handy
    </span>
    <a id="_idIndexMarker070">
    </a>
    <span class="koboSpan" id="kobo.565.1">
     helper object for sending responses back to clients,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.566.1">
      called
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.567.1">
       IResult
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.568.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.569.1">
     An
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.570.1">
      IResult
     </span>
    </strong>
    <span class="koboSpan" id="kobo.571.1">
     contains properties that can be used to represent standard HTTP responses for many different scenarios.
    </span>
    <span class="koboSpan" id="kobo.571.2">
     For example, we could use IResult to return a specific status code, return JSON data, or even
    </span>
    <a id="_idIndexMarker071">
    </a>
    <span class="koboSpan" id="kobo.572.1">
     trigger
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.573.1">
      ASP.NET Identity
     </span>
    </strong>
    <span class="koboSpan" id="kobo.574.1">
     provider functionality such as challenges
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.575.1">
      and sign-in/out.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.576.1">
     We can create a new IResult easily using ASP.NET’s
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.577.1">
      Results
     </span>
    </strong>
    <span class="koboSpan" id="kobo.578.1">
     factory class.
    </span>
    <span class="koboSpan" id="kobo.578.2">
     In the preceding examples, you will have seen references to this factory class, where the API has returned status codes by calling
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.579.1">
      Results.OK()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.580.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.581.1">
      Results.Created()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.582.1">
     , to name
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.583.1">
      a few.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.584.1">
     Some of these simple HTTP status code methods have optional parameters that allow you to return strongly typed objects as JSON.
    </span>
    <span class="koboSpan" id="kobo.584.2">
     For example, while you can simply return a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.585.1">
      200
     </span>
    </strong>
    <span class="koboSpan" id="kobo.586.1">
     result by omitting any parameters in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.587.1">
      Results.OK()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.588.1">
     , you can also pass an object argument, and it will be sent back to the client.
    </span>
    <span class="koboSpan" id="kobo.588.2">
     This was done in our Employee API endpoints for the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.589.1">
       GET
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.590.1">
      endpoint:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.591.1">
app.MapGet("/employees/{id}", (int id) =&gt;
{
    var employee = EmployeeManager.Get(id);
    //RETURN 200 OK RESULT WITH THE EMPLOYEE OBJECT
    return Results.Ok(employee);
});</span></pre>
   <p>
    <span class="koboSpan" id="kobo.592.1">
     The ability to pass strongly typed .NET objects such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.593.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.594.1">
     back to the client in a helper method is one of the most powerful aspects of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.595.1">
      minimal APIs.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.596.1">
     There’ll be more detailed
    </span>
    <a id="_idIndexMarker072">
    </a>
    <span class="koboSpan" id="kobo.597.1">
     examples of handling HTTP requests in
    </span>
    <a href="B20968_04.xhtml#_idTextAnchor081">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.598.1">
        Chapter 4
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.599.1">
     .
    </span>
    <span class="koboSpan" id="kobo.599.2">
     For now, here are some examples of how
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.600.1">
      Results
     </span>
    </strong>
    <span class="koboSpan" id="kobo.601.1">
     can be used to return common
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.602.1">
      HTTP responses:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.603.1">
    //200 OK
    return Results.Ok();
    //201 CREATED
    return Results.Created();
    //202 ACCEPTED
    return Results.Accepted();
    //204 NO CONTENT
    return Results.NoContent();
    //400 BAD REQUEST
    return Results.BadRequest();
    //401 UNAUTHORIZED
    return Results.Unauthorized();
    //403 FORBIDDEN
    return Results.Forbid();
    //404 NOT FOUND
    return Results.NotFound();
    //409 CONFLICT
    return Results.Conflict();</span></pre>
   <p>
    <span class="koboSpan" id="kobo.604.1">
     After exploring
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.605.1">
      Results
     </span>
    </strong>
    <span class="koboSpan" id="kobo.606.1">
     , let’s take
    </span>
    <a id="_idIndexMarker073">
    </a>
    <span class="koboSpan" id="kobo.607.1">
     a look at one of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.608.1">
      its alternatives.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.609.1">
     Typed Results
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.610.1">
     An
    </span>
    <a id="_idIndexMarker074">
    </a>
    <span class="koboSpan" id="kobo.611.1">
     alternative to using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.612.1">
      Results
     </span>
    </strong>
    <span class="koboSpan" id="kobo.613.1">
     to return specific HTTP status codes is
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.614.1">
      TypedResults
     </span>
    </strong>
    <span class="koboSpan" id="kobo.615.1">
     , which is similar to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.616.1">
      Results
     </span>
    </strong>
    <span class="koboSpan" id="kobo.617.1">
     but where the example responses using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.618.1">
      Results
     </span>
    </strong>
    <span class="koboSpan" id="kobo.619.1">
     return an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.620.1">
      IResult
     </span>
    </strong>
    <span class="koboSpan" id="kobo.621.1">
     each time,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.622.1">
      TypedResults
     </span>
    </strong>
    <span class="koboSpan" id="kobo.623.1">
     returns a strongly typed object representing the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.624.1">
      status code.
     </span>
    </span>
   </p>
   <p>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.625.1">
      TypedResults
     </span>
    </strong>
    <span class="koboSpan" id="kobo.626.1">
     implements a factory returning the appropriate strongly typed object that implements
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.627.1">
      IResult
     </span>
    </strong>
    <span class="koboSpan" id="kobo.628.1">
     for the specified status (e.g., returning
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.629.1">
      OK&lt;string&gt;
     </span>
    </strong>
    <span class="koboSpan" id="kobo.630.1">
     for a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.631.1">
      200
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.632.1">
       OK
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.633.1">
      result).
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.634.1">
     You can use
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.635.1">
      TypedResults
     </span>
    </strong>
    <span class="koboSpan" id="kobo.636.1">
     in virtually the same way you use
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.637.1">
      Results
     </span>
    </strong>
    <span class="koboSpan" id="kobo.638.1">
     .
    </span>
    <span class="koboSpan" id="kobo.638.2">
     Here’s
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.639.1">
      an example:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.640.1">
    //200 OK
    return TypedResults.Ok();
    //201 CREATED
    return TypedResults.Created();
    //202 ACCEPTED
    return TypedResults.Accepted();
    //204 NO CONTENT
    return TypedResults.NoContent();</span></pre>
   <p>
    <span class="koboSpan" id="kobo.641.1">
     NET 9 also introduces support for
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.642.1">
      500 INTERNAL SERVER ERROR
     </span>
    </strong>
    <span class="koboSpan" id="kobo.643.1">
     responses
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.644.1">
      in
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.645.1">
       TypedResults
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.646.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.647.1">
    //204 NO CONTENT
    return TypedResults.InternalServerError();</span></pre>
   <p>
    <span class="koboSpan" id="kobo.648.1">
     At this point, you should now have a decent understanding of how to handle HTTP requests, returning the relevant HTTP status codes and strongly typed objects back to the client.
    </span>
    <span class="koboSpan" id="kobo.648.2">
     Let us sum up everything we have covered in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.649.1">
      this chapter.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-45">
    <a id="_idTextAnchor072">
    </a>
    <span class="koboSpan" id="kobo.650.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.651.1">
     In this chapter, we covered most of the introductory aspects of creating simple minimal APIs, and you created your first minimal
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.652.1">
      API project.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.653.1">
     You learned how to define endpoints, and how they act as doors into the API, each of them sitting on their respective routes.
    </span>
    <span class="koboSpan" id="kobo.653.2">
     Using the example of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.654.1">
      Employee
     </span>
    </strong>
    <span class="koboSpan" id="kobo.655.1">
     API, you gained insight into how to structure your project, splitting endpoints and data to achieve the benefits of loose coupling
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.656.1">
      and reusability.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.657.1">
     You explored the concept of models as data structures that describe the domain objects in use by the API, and you built a simple CRUD system for manipulating data
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.658.1">
      during requests.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.659.1">
     Finally, you gained a basic understanding of how to handle HTTP requests in a minimal API, using ASP.NET helper logic to compose and return responses
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.660.1">
      to clients.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.661.1">
     Armed with your foundational knowledge, turn to the next chapter, where we will explore the anatomy of a minimal API.
    </span>
    <span class="koboSpan" id="kobo.661.2">
     We’ll delve deeper and more scientifically into the key components that make up minimal APIs, and you’ll be introduced to some of the various architectural and design patterns that can be adopted to fully realise
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.662.1">
      their potential.
     </span>
    </span>
   </p>
  </div>
 </body></html>