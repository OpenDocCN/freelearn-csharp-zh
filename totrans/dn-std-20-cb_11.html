<html><head></head><body>
        

                            
                    <h1 class="header-title">Packaging and Delivery</h1>
                
            
            
                
<p class="mce-root">In this chapter, we will look at the following recipes:</p>
<ul>
<li>Creating a .NET Standard 2.0 library</li>
<li>Creating a NuGet package of your library</li>
<li>Submitting the package to NuGet package manager</li>
<li>Creating a classic Windows application and testing the NuGet package</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Technical requirements</h1>
                
            
            
                
<p>Readers should have a basic knowledge of C#. They should also have a basic knowledge of using Visual Studio, installing packages using NuGet, and referencing libraries within projects from other projects.</p>
<p class="mce-root">The code files for this chapter can be found on GitHub:<br/>
<a href="https://github.com/PacktPublishing/DotNET-Standard-2-Cookbook/tree/master/Chapter11">https://github.com/PacktPublishing/DotNET-Standard-2-Cookbook/tree/master/Chapter11</a></p>
<p class="mce-root">Check out the following video to see the code in action:<br/>
<a href="https://goo.gl/XuznM7">https://goo.gl/XuznM7</a></p>


            

            
        
    

        

                            
                    <h1 class="header-title">Introduction</h1>
                
            
            
                
<p>In this chapter, we will look at how to create a NuGet package of your library. We will create a basic library, and after that, we will create a NuGet package and submit it. Finally, we will use that package in two different applications.</p>
<p>NuGet is a package delivery tool for your .NET-based applications. It avoids the hassle of finding all the dependencies required for a package or library. For example, if you are looking for Library A, and it requires a few other libraries such as Library B and Library C, you just need to get Library A. NuGet will save you the time of searching for Libraries B and C, as well as installing and configuring them for you.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating a .NET Standard 2.0 library</h1>
                
            
            
                
<p>In this recipe, we will create a basic .NET Standard 2.0 library for packaging; for demonstration purposes, we will create a small calculator library.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>Make sure you have the latest version of Visual Studio 2017 installed and updated on your system. This recipe assumes you have a fair amount of knowledge of creating a .NET Standard 2.0 library.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Open Visual Studio 2017.</li>
<li>Click <strong>File</strong> | <strong>New</strong> | <strong>Project</strong> and, in the New Project template dialog box, select <strong>Visual Studio Solutions</strong> under <strong>Other Project Types</strong> in the left-hand pane and select Blank Solution in the right-hand pane.<br/></li>
<li>In the Name: textbox, type  <kbd>Chapter11.Packaging</kbd> as the name of the solution, as shown in the screenshot. Select a preferred location under the <strong>Location:</strong> drop-down list, or click the Browse... button and select a location. Leave the defaults as they are:</li>
</ol>
<div><img class="alignnone size-full wp-image-868 image-border" src="img/206ff752-6be6-40b0-9842-0427689800db.png" style="width:122.50em;height:22.83em;"/><br/></div>
<ol start="4">
<li>Click OK. </li>
</ol>
<ol start="5">
<li>Now, in the Solution Explorer (or press <em>Ctrl</em> + <em>Alt</em> + <em>L</em>), select <kbd>Chapter11.Packaging</kbd>. Right-click and select <strong>Add</strong> | <strong>New Project.</strong></li>
<li>In the Add New Project dialog box, expand the Visual C# node and select .NET Standard in the left-hand pane. </li>
<li>In the right-hand pane, select Class Library (.NET Standard), as shown here:</li>
</ol>
<div><img class="alignnone size-full wp-image-869 image-border" src="img/57beb1ef-5520-4fa1-b68b-8078915b8f66.png" style="width:59.58em;height:41.25em;"/></div>
<ol start="8">
<li>Now, in the <strong>Name:</strong> textbox, type <kbd>Chapter11.Packaging.CalcLib</kbd> and leave the Location: textbox as it is: </li>
</ol>
<div><img class="alignnone size-full wp-image-870 image-border" src="img/4d971afa-de14-4a36-a71b-3d7e696b3101.png" style="width:49.75em;height:7.33em;"/></div>
<ol start="9">
<li>Click OK.</li>
<li>Now, the Solution Explorer should look like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-871 image-border" src="img/69251366-42ac-48ae-833a-b2a62d016717.png" style="width:29.25em;height:11.33em;"/></div>
<ol start="11">
<li>Click on <kbd>Class1.cs</kbd> and press <em>F2</em> to rename it. Type <kbd>Calculator.cs</kbd> as the new name. </li>
<li>Select Yes to confirm the renaming of the class name, too.</li>
<li>Now, add these two public methods to the class body:</li>
</ol>
<pre>      public int Add(int num1, int num2)<br/>      {<br/>          return num1 + num2;<br/>      }<br/><br/>      public int Subtract(int num1, int num2)<br/>      {<br/>          return num1 - num2;<br/>      }</pre>
<ol start="14">
<li>Press <em>Ctrl</em> + <em>Shift</em> + <em>B</em> for a quick build.</li>
</ol>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>In steps 1 to 10, we created a blank solution and gave it a proper name. And then we added a .NET Standard 2.0 class library to the solution. In steps 11 and 12, we renamed the default <kbd>Class1.cs</kbd> to something more meaningful. Yes, you can always delete this class and create a new one. And, in step 13, we created two simple methods for the addition and subtraction of two integers.</p>
<p>Finally, we performed a quick build in step 14 for syntax checking.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating a NuGet package of your library</h1>
                
            
            
                
<p>In this recipe, we will look at how to create a NuGet package out of the library you have just built in the previous recipe. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>Make sure you have completed the previous recipe or that you have a .NET Standard library already with you. Let's get started.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Open Visual Studio 2017.</li>
<li>Now, open the solution from the previous recipe. Click File | Open | Open Project/Solution, or press <em>Ctrl</em> + <em>Shift</em> + <em>O</em>, and select the <kbd>Chapter11.Packaging</kbd> solution. </li>
<li>Now, the Solution Explorer should look like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-872 image-border" src="img/ad94e6f1-f2c5-43ef-9361-cd492b730389.png" style="width:30.58em;height:12.42em;"/></div>
<ol start="4">
<li>Now, click on the <kbd>Chapter11.Packaging.CalcLib</kbd> project label to select it.</li>
<li>Right-click and select Properties.</li>
<li>In the Properties tab, click on the Packages label:</li>
</ol>
<div><img class="alignnone size-full wp-image-873 image-border" src="img/8ddf805b-d2d3-428c-a79e-818c9f846de0.png" style="width:55.83em;height:37.58em;"/></div>
<ol start="7">
<li>Now, fill in the information and it should look like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-874 image-border" src="img/9d067ace-2868-4d55-a6b1-f14b41cc1983.png" style="width:58.00em;height:39.33em;"/></div>
<ol start="8">
<li>Now, Save and close.</li>
<li>Again, in the toolbar, select Release from the debugging area:</li>
</ol>
<div><img class="alignnone size-full wp-image-875 image-border" src="img/3ba7e866-9734-4a43-88fe-509256b94b27.png" style="width:46.92em;height:4.83em;"/></div>
<ol start="10">
<li>Now, again in the Solution Explorer, right-click on the <kbd>Chapter11.Packaging.CalcLib</kbd> label.</li>
</ol>
<ol start="11">
<li>Select Pack:</li>
</ol>
<div><img class="alignnone size-full wp-image-876 image-border" src="img/c7e5cc12-f2b8-4301-a681-d6f29a2d2908.png" style="width:31.50em;height:35.75em;"/></div>
<ol start="12">
<li>This should build and create a NuGet package in your location.</li>
<li>You can see the location in the output window, as shown:</li>
</ol>
<div><img class="alignnone size-full wp-image-877 image-border" src="img/df1e83e6-54b9-456c-adad-e512776c69d0.png" style="width:150.00em;height:15.42em;"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>The steps are self explanatory. As you follow these steps, you will be able to see the NuGet package is selected. In step 7, you can check Require License Acceptance to true, if you really want your customers to accept the license terms explicitly to your module. The most important step is step 9, in which you set the build option to Release. Make sure you have done this when you get your library up there—not the debug version, always the release version.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Submitting the package to NuGet package manager</h1>
                
            
            
                
<p>In this recipe, we will look at how to submit our NuGet package created in the previous recipe. To submit a package to NuGet, you will be required to sign in. It's easy if you have a Microsoft Live account with you, otherwise you can always create a <kbd>nuget.org</kbd> account at the NuGet site itself.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>Make sure you have completed the previous recipe and created a NuGet package. Also, it's handy to have a Microsoft Live account to make things smoother during the login process, but yes, you can always create a NuGet account.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Open your preferred browser.</li>
<li>In the address bar, type <a href="https://www.nuget.org/">www.nuget.org</a>, and press <em>Enter</em>.</li>
</ol>
<ol start="3">
<li>Now, click on the Sign in link in the top right-hand corner:</li>
</ol>
<div><img class="alignnone size-full wp-image-878 image-border" src="img/8814ebb5-0fce-4878-9c24-bf1bb663eb16.png" style="width:150.00em;height:63.50em;"/></div>
<ol start="4">
<li>Use your Microsoft account or create a NuGet account and then sign in:</li>
</ol>
<div><img class="alignnone size-full wp-image-879 image-border" src="img/0b20eba3-c8dc-4f44-ba91-0f515767fb8c.png" style="width:150.00em;height:44.50em;"/></div>
<ol start="5">
<li>After a successful sign in, click the Upload link.</li>
</ol>
<ol start="6">
<li>Now, in this screen, you can drag and drop your package or you can browse for the package:</li>
</ol>
<div><img class="alignnone size-full wp-image-880 image-border" src="img/2fa647c0-62e3-404b-97dc-7369c28f8fb2.png" style="width:150.00em;height:50.92em;"/></div>
<ol start="7">
<li>Now, click on the Browse... button and locate your package (or you can drag and drop the package here):</li>
</ol>
<div><img class="alignnone size-full wp-image-881 image-border" src="img/a00c44c2-3ab9-4566-9f8f-6e4674b6f232.png" style="width:54.83em;height:30.42em;"/></div>
<ol start="8">
<li>Click Open.</li>
<li>In the next screen, you will be asked to confirm the details of your package.</li>
<li>If you are happy with it, click on the Submit button at the bottom of the screen:</li>
</ol>
<div><img class="alignnone size-full wp-image-882 image-border" src="img/09cffbdb-84ed-415c-9694-570eb4e36fbe.png" style="width:49.50em;height:9.00em;"/></div>
<ol start="11">
<li>You should see this screen after a successful submission:</li>
</ol>
<div><img class="alignnone size-full wp-image-883 image-border" src="img/f66c2b98-551a-4b72-83e1-bfc846563a9a.png" style="width:44.50em;height:32.33em;"/></div>
<ol start="12">
<li>After a few minutes, you should see the installation instructions for your package:</li>
</ol>
<div><img class="alignnone size-full wp-image-884 image-border" src="img/e28271bb-6619-4fdb-9d83-ed5835acfa40.png" style="width:38.42em;height:27.50em;"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>All these steps explain how to create and submit your NuGet Package. You need to keep a few things in mind though, things such as proper naming, and testing before submitting a library. Always make sure you update the library with new versions, as they will contain bug fixes that allow you to deliver a very good product at the end of the day.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating a classic Windows application and testing the NuGet package</h1>
                
            
            
                
<p>In this recipe, we will look at creating a classic Windows application and using the NuGet package submitted in the previous chapter. We will create a brand new project and use the library.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>Make sure you have completed the previous recipe that submitted a NuGet package. Make sure that the package is ready for installation at <kbd>nuget.org</kbd>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Open Visual Studio 2017.</li>
<li>Click File | New <strong>|</strong> Project<strong> </strong>and select Windows Classic Desktop in the right-hand pane under Visual C#. </li>
<li>Select Windows Forms App (.NET Framework) in the right-hand pane:</li>
</ol>
<div><img class="alignnone size-full wp-image-888 image-border" src="img/0e1e1972-28a0-4157-802a-a620bbbebddd.png" style="width:156.75em;height:108.00em;"/></div>
<ol start="4">
<li>Now, in the Name: textbox, type <kbd>Chapter11.Packaging.WinAppUsage</kbd> and, under the Location: textbox, select a proper location and leave the other fields as they are:</li>
</ol>
<div><img class="alignnone size-full wp-image-889 image-border" src="img/61773209-30ad-4e65-9cb5-8989f7548e9e.png" style="width:48.00em;height:9.25em;"/></div>
<ol start="5">
<li>Click OK.</li>
<li>The Solution Explorer (<em>Ctrl</em> + <em>Alt</em> + <em>L</em>) should look like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-890 image-border" src="img/d2295717-afd2-4c11-8a03-73a79164ec4d.png" style="width:32.08em;height:16.67em;"/></div>
<ol start="7">
<li>Now, click on <kbd>Form1.cs</kbd> and change the name to <kbd>MainForm.cs</kbd>.</li>
<li>Answer Yes to confirm the change to the class name as well.</li>
<li>Now, drag two buttons to the form in the designer.</li>
<li>Change the properties of the buttons as follows:<br/>
<table style="width: 403px;height: 300px">
<tbody>
<tr>
<td><strong>Control</strong></td>
<td><strong>Property</strong></td>
<td><strong>Value</strong></td>
</tr>
<tr>
<td>Button</td>
<td>Name</td>
<td><kbd>BtnAdd</kbd></td>
</tr>
<tr>
<td>Button</td>
<td>Text</td>
<td><kbd>Add</kbd></td>
</tr>
<tr>
<td>Button</td>
<td>Name</td>
<td><kbd>BtnSub</kbd></td>
</tr>
<tr>
<td>Button</td>
<td>Text</td>
<td><kbd>Subtract</kbd></td>
</tr>
<tr>
<td>Form</td>
<td>Name</td>
<td><kbd>MainForm</kbd></td>
</tr>
<tr>
<td>Form</td>
<td>Text</td>
<td><kbd>Simple Calculator</kbd></td>
</tr>
</tbody>
</table>
</li>
<li>Now, your form should look like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-891 image-border" src="img/cfcc3913-a667-4a86-9996-e4da37755924.png" style="width:26.42em;height:19.17em;"/></div>
<ol start="12">
<li>Now, right-click on the References label.</li>
<li>Select Manage NuGet Packages<strong>.</strong></li>
<li>Click Browse and, in the search box, type the Package ID you have selected while uploading.</li>
<li>In this case, <kbd>Packt_DotNetStandard_CookBook_Chap1</kbd>, and press <em>Enter</em>:</li>
</ol>
<div><img class="alignnone size-full wp-image-892 image-border" src="img/47bd98ce-a71f-430c-9ddf-ef0acf72984c.png" style="width:45.58em;height:15.42em;"/></div>
<ol start="16">
<li>Now, click on the package.</li>
<li>Click the Install button in the right-hand pane:</li>
</ol>
<div><img class="alignnone size-full wp-image-893 image-border" src="img/e5d3b6bd-9489-4e3c-bcc1-7f63dcf721e6.png" style="width:150.00em;height:58.00em;"/></div>
<ol start="18">
<li>Click OK in the confirmation dialog box:</li>
</ol>
<div><img class="alignnone size-full wp-image-894 image-border" src="img/0e8b9c6f-6975-456c-a2f7-2a7681cbe2a1.png" style="width:28.08em;height:14.33em;"/></div>
<ol start="19">
<li>After a successful installation, the output window should look like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-895 image-border" src="img/549ec163-11b7-4853-900e-14e4a0affb60.png" style="width:161.00em;height:35.25em;"/></div>
<ol start="20">
<li>Now in the Solution Explorer, expand the References tab and you should see our library there:</li>
</ol>
<div><img class="alignnone size-full wp-image-896 image-border" src="img/f3e0a76e-6117-4988-8ad0-a9eeb62de1cf.png" style="width:24.50em;height:25.58em;"/></div>
<ol start="21">
<li>Now, double-click on the Add button to reach the code window.</li>
<li>Scroll up till you see the <kbd>using</kbd> directives.</li>
<li>Add the following directive at the end of the <kbd>using</kbd> directives.</li>
</ol>
<pre>      using Chapter11.Packaging.CalcLib;</pre>
<ol start="24">
<li>Now, scroll down till you reach the <kbd>BtnAdd_Click()</kbd> method.</li>
<li>Add the following code inside the method:</li>
</ol>
<pre>      var calculator = new Calculator();<br/>      var answer = calculator.Add(10, 20);<br/><br/>      MessageBox.Show($"The answer is {answer}");</pre>
<ol start="26">
<li>Now, double-click on the Subtract button and add the following code inside the <kbd>click</kbd> method:</li>
</ol>
<pre>      var calculator = new Calculator();<br/>      var answer = calculator.Subtract(50, 20);<br/><br/>      MessageBox.Show($"The answer is {answer}");</pre>
<ol start="27">
<li>Now, press <em>F5</em> to test the application.</li>
<li>Click on the Add button and you should see an output like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-897 image-border" src="img/5e34f41e-febf-4596-98d1-59f8f57c3531.png" style="width:25.25em;height:17.75em;"/></div>
<ol start="29">
<li>Do the same for the Subtract button.</li>
<li>Click OK and close the window.</li>
</ol>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>In steps 1 to 7, we created a classic Windows application project. And then, in steps 9 to 11, we created the UI for the Windows project. In steps 14 and 15, we opened NuGet Package Manager. And then we searched for our package and confirmed that it had loaded. In steps 18 to 20, we installed our package and confirmed that it had installed.</p>
<p>In step 24, we added the reference to our library, which is installed using NuGet Package Manager. In steps 25 and 26, we created an instance of the<kbd> Calculator</kbd> class and used its <kbd>Add()</kbd> and <kbd>Subtract()</kbd> methods. Finally, in steps 28 to 30, we tested the application.</p>
<p>Using the package manager is one way of installing a package from NuGet. But you can use the NuGet Package Manager Console to do the same. To access the package manager console, you can click Tools | NuGet Package Manager | Package Manager Console:</p>
<div><img class="alignnone size-full wp-image-898 image-border" src="img/ec4c9099-d8d4-4edf-b4ea-d468bf4ad067.png" style="width:39.92em;height:30.75em;"/></div>
<p>In the console, you can type:</p>
<pre><strong>Install-Package Packt_DotNetStandard_CookBook_Chap11 -Version 1.0.0</strong></pre>
<div><img class="alignnone size-full wp-image-899 image-border" src="img/37a6f006-8d10-4514-964e-740baf2efeb7.png" style="width:165.58em;height:33.42em;"/></div>
<p>This method will do the same and install your package to the project.</p>


            

            
        
    </body></html>