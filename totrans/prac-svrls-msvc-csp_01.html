<html><head></head><body>
<div id="_idContainer029">
<h1 class="chapterNumber"><a id="_idTextAnchor022"/><span class="koboSpan" id="kobo.1.1">1</span></h1>
<h1 class="chapterTitle" id="_idParaDest-15"><a id="_idTextAnchor023"/><span class="koboSpan" id="kobo.2.1">Demystifying Serverless Applications</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">When it comes to software development, we are living in incredible times. </span><span class="koboSpan" id="kobo.3.2">With the evolution of cloud platforms and the rise of modern technologies, being a developer nowadays is both a wonderful way to live and a challenging profession to follow. </span><span class="koboSpan" id="kobo.3.3">There are so many ways to deliver an application and so many innovative technologies to explore that we may fall into a vicious circle where we focus more on the technologies rather than the actual solution.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4.1">This chapter aims to present the serverless architecture and explore how you can use this approach to implement a microservices application. </span><span class="koboSpan" id="kobo.4.2">To achieve this, it covers the theory behind serverless and provides an understanding of how it can be a viable alternative for microservices implementation.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.5.1">The chapter also explores how Microsoft </span><a id="_idIndexMarker000"/><span class="koboSpan" id="kobo.6.1">implements </span><strong class="keyWord"><span class="koboSpan" id="kobo.7.1">Function as a Service (FaaS),</span></strong><span class="koboSpan" id="kobo.8.1"> using Azure Functions as one of the options for building microservices. </span><span class="koboSpan" id="kobo.8.2">Two alternative development platforms will be presented: Visual Studio Code and Visual Studio.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.9.1">By the end of this chapter, you will understand the different triggers available in Azure Functions and be ready to create your first function.</span></p>
<h1 class="heading-1" id="_idParaDest-16"><a id="_idTextAnchor024"/><span class="koboSpan" id="kobo.10.1">Technical requirements</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.11.1">This chapter requires Visual Studio 2022 free </span><em class="italic"><span class="koboSpan" id="kobo.12.1">Community edition </span></em><span class="koboSpan" id="kobo.13.1">or Visual Studio Code. </span><span class="koboSpan" id="kobo.13.2">During the chapter, the details about how to debug Azure Functions for each development environment will be presented in the topics. </span><span class="koboSpan" id="kobo.13.3">You will also need an Azure account to create the sample environment. </span><span class="koboSpan" id="kobo.13.4">You can find the sample code for this chapter at </span><a href="https://github.com/PacktPublishing/Practical-Serverless-and-Microservices-with-Csharp"><span class="url"><span class="koboSpan" id="kobo.14.1">https://github.com/PacktPublishing/Practical-Serverless-and-Microservices-with-Csharp</span></span></a><span class="koboSpan" id="kobo.15.1">.</span></p>
<h1 class="heading-1" id="_idParaDest-17"><a id="_idTextAnchor025"/><span class="koboSpan" id="kobo.16.1">What is serverless?</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.17.1">When someone </span><a id="_idIndexMarker001"/><span class="koboSpan" id="kobo.18.1">asks you to develop a solution, the last thing they usually care about is how the infrastructure will work. </span><span class="koboSpan" id="kobo.18.2">The truth is, even for developers, the most important thing about infrastructure is that it simply works well.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.19.1">Considering this reality, the possibility of having a cloud provider that dynamically manages server allocation and provisioning, leaving the underlying infrastructure to the provider, might be the best scenario.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.20.1">That is what serverless architecture promises: a model we can use to build and run applications and services without having to manage the underlying infrastructure ourselves! </span><span class="koboSpan" id="kobo.20.2">This approach abstracts server management entirely, allowing developers to focus on their code.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.21.1">The first cloud solution provider that presented this concept was </span><a id="_idIndexMarker002"/><span class="koboSpan" id="kobo.22.1">Amazon, with the launch of AWS Lambda</span><a id="_idIndexMarker003"/><span class="koboSpan" id="kobo.23.1"> in 2014. </span><span class="koboSpan" id="kobo.23.2">After that, Microsoft and Google also provided similar solutions with Microsoft Azure Functions and Google Cloud Functions. </span><span class="koboSpan" id="kobo.23.3">As we mentioned before, the focus of this book will </span><a id="_idIndexMarker004"/><span class="koboSpan" id="kobo.24.1">be Azure Functions.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.25.1">There are many advantages that we can consider for using serverless computing. </span><span class="koboSpan" id="kobo.25.2">The fact that you do not have to worry about scaling can be considered the main one. </span><span class="koboSpan" id="kobo.25.3">Additionally, the cloud solution provider maintains the reliability and security of the environment. </span><span class="koboSpan" id="kobo.25.4">Besides that, with this approach, you have the option to pay as you go, so you only pay for what you use, enabling a sustainable model of growth.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.26.1">Serverless can also be </span><a id="_idIndexMarker005"/><span class="koboSpan" id="kobo.27.1">considered a good approach for accelerating software development since you only focus on the code needed to deliver that program. </span><span class="koboSpan" id="kobo.27.2">On the other hand, you may have difficulty overseeing a considerable number of functions, so this organization needs to be well handed to not cause problems while creating a solution with many functions.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.28.1">Since the introduction of serverless, various kinds of functions have been created. </span><span class="koboSpan" id="kobo.28.2">These functions act as triggers that are used to start processing. </span><span class="koboSpan" id="kobo.28.3">As soon as the function is triggered, the execution can be done in different programming languages.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.29.1">Now, let us check whether functions can be considered microservices or not.</span></p>
<h1 class="heading-1" id="_idParaDest-18"><a id="_idTextAnchor026"/><span class="koboSpan" id="kobo.30.1">Is serverless a way to deliver microservices?</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.31.1">If you look at the definition</span><a id="_idIndexMarker006"/><span class="koboSpan" id="kobo.32.1"> of microservices, you will find the concept of delivering an application as loosely coupled components that represent the implementation of a business capability. </span><span class="koboSpan" id="kobo.32.2">You can build something like that with a couple of functions, so yes, serverless is a way to deliver </span><a id="_idIndexMarker007"/><span class="koboSpan" id="kobo.33.1">microservices.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.34.1">Some specialists even consider serverless architecture an evolution of microservices, since the focus of serverless architecture is to deliver scalability in a safe environment, enabling the possibility of a set of functions to independently be developed, tested, and deployed, which brings a lot of flexibility to the software architecture. </span><span class="koboSpan" id="kobo.34.2">That is exactly the main philosophy of microservices.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.35.1">Let us imagine, as an example, a </span><a id="_idIndexMarker008"/><span class="koboSpan" id="kobo.36.1">microservice responsible for authenticating users. </span><span class="koboSpan" id="kobo.36.2">You may</span><a id="_idIndexMarker009"/><span class="koboSpan" id="kobo.37.1"> create specific functions for registering, logging, and resetting passwords. </span><span class="koboSpan" id="kobo.37.2">Considering that this set of functions can be created in a single serverless project, you have both the flexibility of creating separated functions and the possibility of defining the purpose of the microservice.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.38.1">The serverless project will naturally support integration with databases, messaging queues, OpenAPI specifications, and other APIs, enabling the design patterns typically needed for a robust microservice architecture. </span><span class="koboSpan" id="kobo.38.2">It is also important to mention that keeping microservices isolated, small, and preferably reusable is a best practice worth following.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.39.1">Now that you understand that you can write microservices using serverless approaches, let us understand how Microsoft Azure presents serverless in its platform.</span></p>
<h1 class="heading-1" id="_idParaDest-19"><a id="_idTextAnchor027"/><span class="koboSpan" id="kobo.40.1">How does Microsoft Azure present serverless?</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.41.1">In 2016, Microsoft introduced </span><a id="_idIndexMarker010"/><span class="koboSpan" id="kobo.42.1">Azure Functions as a Platform-as-a-Service (PaaS) offering designed to deliver FaaS capabilities. </span><span class="koboSpan" id="kobo.42.2">This option enables innovation at a scale for business transformation. </span><span class="koboSpan" id="kobo.42.3">Today, Azure Functions gives us the opportunity to power up applications using multiple programming languages, including C#, JavaScript, F#, Java, and Python.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.43.1">One of the standout features of Azure Functions is its seamless integration with other Azure services and third-party APIs. </span><span class="koboSpan" id="kobo.43.2">For instance, it can easily connect to different Azure databases (from Azure SQL Server to Azure Cosmos DB), Azure Event Grid for event-based architecture, and Azure Logic Apps for workflow automation. </span><span class="koboSpan" id="kobo.43.3">This connectivity simplifies the process of building complex, enterprise-grade applications that leverage multiple services.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.44.1">Over the years, the possibilities with Azure Functions have evolved. </span><span class="koboSpan" id="kobo.44.2">Today, we can even manage stateful workflows and long-running operations, using Azure Durable Functions. </span><span class="koboSpan" id="kobo.44.3">With this, you can orchestrate complex processes that can be executed in multiple function executions.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.45.1">But Microsoft has not only created an environment for coding functions. </span><span class="koboSpan" id="kobo.45.2">They have also created a complete pipeline for developers, following the DevSecOps process that’s now widely discussed and used in enterprise solutions. </span><span class="koboSpan" id="kobo.45.3">Developers can use tools such as Azure Pipelines, GitHub Actions, and other CI/CD services to automate the deployment process. </span><span class="koboSpan" id="kobo.45.4">You can also monitor and diagnose events in these functions using Azure Monitor and Application Insights, which facilitate troubleshooting and optimization.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.46.1">The PaaS solution also </span><a id="_idIndexMarker011"/><span class="koboSpan" id="kobo.47.1">enables different setups to adjust scalability and security aspects. </span><span class="koboSpan" id="kobo.47.2">Depending on the hosting plan you decide to set, you can have different scaling opportunities, as you can check here:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.48.1">Consumption plan: The basic and most cost-effective option to get started with Azure Functions. </span><span class="koboSpan" id="kobo.48.2">Ideal for event-driven workloads with automatic scaling.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.49.1">Flex Consumption plan: Offers rapid, elastic scaling combined with support for private networking (VNet integration).</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.50.1">Dedicated plan (App Service plan): Suitable for long-running functions and scenarios requiring more predictable performance and resource allocation.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.51.1">Azure Container Apps plan: A solid choice for microservices-based architectures that use multiple technology stacks or require greater flexibility.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.52.1">Premium plan: Designed for high-performance scenarios with the ability to scale on demand, providing support for advanced features such as VNet, longer execution times, and pre-warmed instances.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.53.1">In summary, Microsoft Azure delivers serverless FaaS through Azure Functions, offering a powerful, flexible, and scalable platform that enhances the development and deployment of serverless applications. </span><span class="koboSpan" id="kobo.53.2">By using Azure Functions, developers can build and maintain responsive, cost-effective solutions. </span><span class="koboSpan" id="kobo.53.3">Now, let us explore how to create an Azure function in the Azure portal.</span></p>
<h1 class="heading-1" id="_idParaDest-20"><a id="_idTextAnchor028"/><span class="koboSpan" id="kobo.54.1">Creating your first serverless app in Azure</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.55.1">There </span><a id="_idIndexMarker012"/><span class="koboSpan" id="kobo.56.1">are not many steps for creating your first serverless app in Azure. </span><span class="koboSpan" id="kobo.56.2">You can </span><a id="_idIndexMarker013"/><span class="koboSpan" id="kobo.57.1">do it in a straightforward process when using the Azure portal. </span><span class="koboSpan" id="kobo.57.2">Follow these steps to get started:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.58.1">Log in to the Azure portal. </span><span class="koboSpan" id="kobo.58.2">To do so, open your web browser and navigate to the Azure portal at </span><a href="https://portal.azure.com/"><span class="url"><span class="koboSpan" id="kobo.59.1">https://portal.azure.com/</span></span></a><span class="koboSpan" id="kobo.60.1">. </span><span class="koboSpan" id="kobo.60.2">Sign in with your Azure account credentials.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.61.1">In the Azure portal, click on the </span><strong class="screenText"><span class="koboSpan" id="kobo.62.1">Create a resource</span></strong><span class="koboSpan" id="kobo.63.1"> button located in the upper-left corner.</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.64.1"><img alt="Figure 1.1: Creating a resource in the Azure portal" src="../Images/B31916_01_1.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.65.1">Figure 1.1: Creating a resource in the Azure portal</span></p>
<ol>
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.66.1">In the </span><strong class="screenText"><span class="koboSpan" id="kobo.67.1">Search services and marketplace</span></strong><span class="koboSpan" id="kobo.68.1"> window, search for </span><strong class="screenText"><span class="koboSpan" id="kobo.69.1">Function App</span></strong><span class="koboSpan" id="kobo.70.1"> and select it from the search results. </span><span class="koboSpan" id="kobo.70.2">This service will also be presented in the </span><strong class="screenText"><span class="koboSpan" id="kobo.71.1">Popular Azure services</span></strong><span class="koboSpan" id="kobo.72.1"> section.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.73.1">Click the </span><strong class="screenText"><span class="koboSpan" id="kobo.74.1">Create</span></strong><span class="koboSpan" id="kobo.75.1"> button to start the creation process.</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.76.1"><img alt=" Figure 1.2: Selecting Function App for creation" src="../Images/B31916_01_2.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.77.1"> Figure 1.2: Selecting Function App for creation</span></p>
<p class="normal-one"><span class="koboSpan" id="kobo.78.1">As soon as </span><a id="_idIndexMarker014"/><span class="koboSpan" id="kobo.79.1">you select </span><strong class="screenText"><span class="koboSpan" id="kobo.80.1">Function App</span></strong><span class="koboSpan" id="kobo.81.1">, you will be prompted to select </span><a id="_idIndexMarker015"/><span class="koboSpan" id="kobo.82.1">the required hosting plan. </span><span class="koboSpan" id="kobo.82.2">Today, we have five options for hosting plans using Azure Functions. </span><span class="koboSpan" id="kobo.82.3">These plans vary according to the scaling behavior, cold start, the possibility of usage of a virtual network, and, obviously, pricing. </span><span class="koboSpan" id="kobo.82.4">The </span><em class="italic"><span class="koboSpan" id="kobo.83.1">Consumption</span></em><span class="koboSpan" id="kobo.84.1"> plan is exactly what serverless is all about, where you have no idea of where and how your code is running, and you only pay for the execution of the code. </span><span class="koboSpan" id="kobo.84.2">On the other hand, when you select the </span><em class="italic"><span class="koboSpan" id="kobo.85.1">App Service</span></em><span class="koboSpan" id="kobo.86.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.87.1">Container Apps environment</span></em><span class="koboSpan" id="kobo.88.1"> plans, you will have more control over the hardware and consumption of resources, which means you get the flexibility of using Azure Functions in your solution, along with the management needed for larger applications.</span></p>
<p class="normal-one"><span class="koboSpan" id="kobo.89.1">The following screen will be presented to you as soon as you select to create an Azure function app. </span><span class="koboSpan" id="kobo.89.2">As we described previously, you will need to decide on the hosting plan according to your needs.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.90.1"><img alt="Figure 1.3: Function App hosting plans" src="../Images/B31916_01_3.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.91.1">Figure 1.3: Function App hosting plans</span></p>
<p class="normal-one"><span class="koboSpan" id="kobo.92.1">For the</span><a id="_idIndexMarker016"/><span class="koboSpan" id="kobo.93.1"> purpose of this chapter, we will select the </span><strong class="screenText"><span class="koboSpan" id="kobo.94.1">Consumption</span></strong><span class="koboSpan" id="kobo.95.1"> plan. </span><span class="koboSpan" id="kobo.95.2">Once you select this option, you will find a wizard to help you create the</span><a id="_idIndexMarker017"/><span class="koboSpan" id="kobo.96.1"> service. </span><span class="koboSpan" id="kobo.96.2">In this service, you will need to fill in the following information:</span></p>
<ul>
<li class="bulletList level-2"><strong class="screenText"><span class="koboSpan" id="kobo.97.1">Basics</span></strong><span class="koboSpan" id="kobo.98.1">: Fill in the required fields such as </span><strong class="screenText"><span class="koboSpan" id="kobo.99.1">Subscription</span></strong><span class="koboSpan" id="kobo.100.1">, </span><strong class="screenText"><span class="koboSpan" id="kobo.101.1">Resource Group</span></strong><span class="koboSpan" id="kobo.102.1">, </span><strong class="screenText"><span class="koboSpan" id="kobo.103.1">Function App name</span></strong><span class="koboSpan" id="kobo.104.1">, </span><strong class="screenText"><span class="koboSpan" id="kobo.105.1">Region</span></strong><span class="koboSpan" id="kobo.106.1">, and </span><strong class="screenText"><span class="koboSpan" id="kobo.107.1">Operating System</span></strong><span class="koboSpan" id="kobo.108.1">. </span><span class="koboSpan" id="kobo.108.2">Ensure that the name you choose is unique. </span><span class="koboSpan" id="kobo.108.3">In </span><strong class="screenText"><span class="koboSpan" id="kobo.109.1">Runtime stack</span></strong><span class="koboSpan" id="kobo.110.1">, select the programming language of your functions. </span><span class="koboSpan" id="kobo.110.2">We will select </span><strong class="screenText"><span class="koboSpan" id="kobo.111.1">.NET 8 Isolated</span></strong><span class="koboSpan" id="kobo.112.1"> worker model, but there are other options, as we presented before. </span><span class="koboSpan" id="kobo.112.2">It is worth mentioning that in-process models will be retired in 2026, so do not start projects using this approach.</span></li>
<li class="bulletList level-2"><strong class="screenText"><span class="koboSpan" id="kobo.113.1">Storage</span></strong><span class="koboSpan" id="kobo.114.1">: The function app needs an Azure storage account by default.</span></li>
<li class="bulletList level-2"><strong class="screenText"><span class="koboSpan" id="kobo.115.1">Networking</span></strong><span class="koboSpan" id="kobo.116.1">: This is where you will define whether the Azure function will be available for public access or not.</span></li>
<li class="bulletList level-2"><strong class="screenText"><span class="koboSpan" id="kobo.117.1">Monitoring</span></strong><span class="koboSpan" id="kobo.118.1">: Enable Application Insights to monitor your Function App for better diagnostics and performance tracking. </span><span class="koboSpan" id="kobo.118.2">Don’t forget that Azure Monitor logs will cause a cost increase.</span></li>
<li class="bulletList level-2"><strong class="screenText"><span class="koboSpan" id="kobo.119.1">Deployment</span></strong><span class="koboSpan" id="kobo.120.1">: It is also possible to initiate the setup of the deployment desired for the function app. </span><span class="koboSpan" id="kobo.120.2">This is interesting for enabling continuous deployment using GitHub Actions as default.</span></li>
<li class="bulletList level-2"><strong class="screenText"><span class="koboSpan" id="kobo.121.1">Tags</span></strong><span class="koboSpan" id="kobo.122.1">: Tagging the</span><a id="_idIndexMarker018"/><span class="koboSpan" id="kobo.123.1"> function app is considered a good</span><a id="_idIndexMarker019"/><span class="koboSpan" id="kobo.124.1"> practice for facilitating FinOps activity in professional environments.</span></li>
</ul>
<div class="packt_tip-one">
<p class="normal"><span class="koboSpan" id="kobo.125.1">In </span><a href="Chapter_2.xhtml#_idTextAnchor038"><em class="italic"><span class="koboSpan" id="kobo.126.1">Chapter 2</span></em></a><span class="koboSpan" id="kobo.127.1">, </span><em class="italic"><span class="koboSpan" id="kobo.128.1">Demystifying Microservices Applications</span></em><span class="koboSpan" id="kobo.129.1">, we will discuss the best way to interface microservices with the external world. </span><span class="koboSpan" id="kobo.129.2">For security reasons, it is not recommended that you provide functions directly to the public. </span><span class="koboSpan" id="kobo.129.3">You may decide to deliver them using an application gateway, such as Azure Application Gateway, or you can use Azure API Management as the entry for the APIs you develop using Azure Functions.</span></p>
</div>
<p class="normal-one"><span class="koboSpan" id="kobo.130.1">Once you click on </span><strong class="screenText"><span class="koboSpan" id="kobo.131.1">Review and create</span></strong><span class="koboSpan" id="kobo.132.1">, you will be able to check all the settings. </span><span class="koboSpan" id="kobo.132.2">Review your configuration and click the </span><strong class="screenText"><span class="koboSpan" id="kobo.133.1">Create</span></strong><span class="koboSpan" id="kobo.134.1"> button again to deploy your function app:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.135.1"><img alt="Figure 1.4: Reviewing the function app setup" src="../Images/B31916_01_4.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.136.1">Figure 1.4: Reviewing the function app setup</span></p>
<p class="normal"><span class="koboSpan" id="kobo.137.1">Once the</span><a id="_idIndexMarker020"/><span class="koboSpan" id="kobo.138.1"> deployment is complete, navigate to your new function app by </span><a id="_idIndexMarker021"/><span class="koboSpan" id="kobo.139.1">clicking on the </span><strong class="screenText"><span class="koboSpan" id="kobo.140.1">Go to resource</span></strong><span class="koboSpan" id="kobo.141.1"> button. </span><span class="koboSpan" id="kobo.141.2">You will find the function app running properly there:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.142.1"><img alt="Figure 1.5: Function app running" src="../Images/B31916_01_5.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.143.1">Figure 1.5: Function app running</span></p>
<p class="normal"><span class="koboSpan" id="kobo.144.1">Now, it is time to understand the possibilities for development using Azure Functions and start coding.</span></p>
<h1 class="heading-1" id="_idParaDest-21"><a id="_idTextAnchor029"/><span class="koboSpan" id="kobo.145.1">Understanding the triggers available in Azure Functions</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.146.1">The basic idea of </span><a id="_idIndexMarker022"/><span class="koboSpan" id="kobo.147.1">Azure Functions is that each function requires a trigger to start its </span><a id="_idIndexMarker023"/><span class="koboSpan" id="kobo.148.1">execution. </span><span class="koboSpan" id="kobo.148.2">Once the trigger is fired, the execution of your code will start shortly afterward. </span><span class="koboSpan" id="kobo.148.3">However, the time it takes for execution to begin can vary depending on the selected hosting plan. </span><span class="koboSpan" id="kobo.148.4">For instance, in the Consumption plan, functions may experience cold starts – that is, a delay that occurs when the platform needs to initialize resources. </span><span class="koboSpan" id="kobo.148.5">It is also important to understand that the function can trigger more than once at the same time, which enables execution in parallel.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.149.1">Azure Functions offers a variety of triggers that allow developers to execute code in response to different events. </span><span class="koboSpan" id="kobo.149.2">Here we have the most used triggers:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.150.1">HTTP Trigger: This trigger </span><a id="_idIndexMarker024"/><span class="koboSpan" id="kobo.151.1">allows the function to be executed via an HTTP</span><a id="_idIndexMarker025"/><span class="koboSpan" id="kobo.152.1"> request. </span><span class="koboSpan" id="kobo.152.2">It is useful for creating APIs and </span><a id="_idIndexMarker026"/><span class="koboSpan" id="kobo.153.1">webhooks, where the function can be called using standard HTTP methods.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.154.1">Timer Trigger: This </span><a id="_idIndexMarker027"/><span class="koboSpan" id="kobo.155.1">trigger runs the function on a schedule based on the NCRONTAB model. </span><span class="koboSpan" id="kobo.155.2">It </span><a id="_idIndexMarker028"/><span class="koboSpan" id="kobo.156.1">is ideal for tasks that need to be performed at regular intervals, such as cleanup operations, data processing, or sending out periodic reports. </span><span class="koboSpan" id="kobo.156.2">It is important to mention that the same timer trigger function does not run again until its first execution is done. </span><span class="koboSpan" id="kobo.156.3">This behavior helps prevent overlapping executions and potential conflicts.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.157.1">Blob Storage Trigger: This </span><a id="_idIndexMarker029"/><span class="koboSpan" id="kobo.158.1">trigger runs the function when a new blob is created or updated in an Azure Blob Storage</span><a id="_idIndexMarker030"/><span class="koboSpan" id="kobo.159.1"> container. </span><span class="koboSpan" id="kobo.159.2">It is useful for processing or transforming files, such as images or logs, as they are uploaded.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.160.1">Queue Storage Trigger: This</span><a id="_idIndexMarker031"/><span class="koboSpan" id="kobo.161.1"> trigger runs the function in response to </span><a id="_idIndexMarker032"/><span class="koboSpan" id="kobo.162.1">messages added to Azure Queue Storage. </span><span class="koboSpan" id="kobo.162.2">It is useful for building scalable and reliable background processing systems.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.163.1">Event Grid Trigger: This </span><a id="_idIndexMarker033"/><span class="koboSpan" id="kobo.164.1">trigger runs the function in response to events published to Azure Event Grid. </span><span class="koboSpan" id="kobo.164.2">It is </span><a id="_idIndexMarker034"/><span class="koboSpan" id="kobo.165.1">useful for reacting to events from various Azure services, such as resource creation, modification, or deletion.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.166.1">Service Bus Trigger: This trigger runs the function when messages are received in an Azure </span><a id="_idIndexMarker035"/><span class="koboSpan" id="kobo.167.1">Service Bus</span><a id="_idIndexMarker036"/><span class="koboSpan" id="kobo.168.1"> queue or topic. </span><span class="koboSpan" id="kobo.168.2">It is ideal for handling inter-application messaging and building complex workflows.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.169.1">Cosmos DB Trigger: This trigger runs the function in response to creation and updates in</span><a id="_idIndexMarker037"/><span class="koboSpan" id="kobo.170.1"> Azure Cosmos DB. </span><span class="koboSpan" id="kobo.170.2">It is</span><a id="_idIndexMarker038"/><span class="koboSpan" id="kobo.171.1"> useful for processing data changes in real time, such as updating a search index or triggering additional data processing.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.172.1">These triggers offer </span><a id="_idIndexMarker039"/><span class="koboSpan" id="kobo.173.1">flexibility and scalability, allowing developers to build event-driven applications that can respond to distinct types of events seamlessly. </span><span class="koboSpan" id="kobo.173.2">It is important to say that there are other triggers available in Azure Functions, and we will discuss them in more detail in the next chapters.</span></p>
<h1 class="heading-1" id="_idParaDest-22"><a id="_idTextAnchor030"/><span class="koboSpan" id="kobo.174.1">Coding with Azure Functions</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.175.1">The focus of this topic is to rapidly present some ways to develop Azure functions. </span><span class="koboSpan" id="kobo.175.2">During the other chapters of the book, we will present a use case related to car sharing. </span><span class="koboSpan" id="kobo.175.3">As you will see in detail in </span><a href="Chapter_2.xhtml#_idTextAnchor038"><em class="italic"><span class="koboSpan" id="kobo.176.1">Chapter 2</span></em></a><span class="koboSpan" id="kobo.177.1">, </span><em class="italic"><span class="koboSpan" id="kobo.178.1">Demystifying Microservices Applications</span></em><span class="koboSpan" id="kobo.179.1">, each microservice must have a health check endpoint. </span><span class="koboSpan" id="kobo.179.2">Let us develop a sample of this health check API.</span></p>
<h1 class="heading-1" id="_idParaDest-23"><a id="_idTextAnchor031"/><span class="koboSpan" id="kobo.180.1">Coding Azure functions using VS Code</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.181.1">Creating an</span><a id="_idIndexMarker040"/><span class="koboSpan" id="kobo.182.1"> HTTP trigger Azure function using VS Code involves </span><a id="_idIndexMarker041"/><span class="koboSpan" id="kobo.183.1">several well-defined steps. </span><span class="koboSpan" id="kobo.183.2">Here is a detailed guide to help you through the process.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.184.1">There are some prerequisites to enable the development of Azure functions using VS Code, as follows:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.185.1">Ensure you have VS Code installed on your machine. </span><span class="koboSpan" id="kobo.185.2">The use of VS Code will help you not only develop the Azure functions needed but also manage your Azure account using </span><a id="_idIndexMarker042"/><span class="koboSpan" id="kobo.186.1">the </span><strong class="keyWord"><span class="koboSpan" id="kobo.187.1">Azure Tools</span></strong><span class="koboSpan" id="kobo.188.1"> extension.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.189.1">It is recommended that you sign in to your Azure account to create the new function. </span><span class="koboSpan" id="kobo.189.2">The </span><strong class="keyWord"><span class="koboSpan" id="kobo.190.1">C# Dev Kit</span></strong><span class="koboSpan" id="kobo.191.1"> may</span><a id="_idIndexMarker043"/><span class="koboSpan" id="kobo.192.1"> also be installed.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.193.1">The GitHub Copilot extension</span></strong><span class="koboSpan" id="kobo.194.1"> can also </span><a id="_idIndexMarker044"/><span class="koboSpan" id="kobo.195.1">be installed to help you solve coding problems and, at the same time, guide you while writing code.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.196.1">Install the Azure </span><a id="_idIndexMarker045"/><span class="koboSpan" id="kobo.197.1">Functions extension for VS Code. </span><span class="koboSpan" id="kobo.197.2">This </span><a id="_idIndexMarker046"/><span class="koboSpan" id="kobo.198.1">VS Code extension will facilitate the development of functions, giving you wizards for each function trigger desired.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.199.1">Install the Azurite extension for VS Code. </span><span class="koboSpan" id="kobo.199.2">This VS Code extension is an open source Azure Storage API-compatible server for debugging Azure Functions locally.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.200.1">Make sure you have </span><a id="_idIndexMarker047"/><span class="koboSpan" id="kobo.201.1">the </span><strong class="keyWord"><span class="koboSpan" id="kobo.202.1">Azure Functions Core Tools,</span></strong><span class="koboSpan" id="kobo.203.1"> and the </span><strong class="keyWord"><span class="koboSpan" id="kobo.204.1">.NET SDK</span></strong><span class="koboSpan" id="kobo.205.1"> installed if </span><a id="_idIndexMarker048"/><span class="koboSpan" id="kobo.206.1">you are using C#.</span></li>
</ul>
<p class="normal-one"><span class="koboSpan" id="kobo.207.1">Once you have set up your environment, you will h</span><a id="_idTextAnchor032"/><span class="koboSpan" id="kobo.208.1">ave something like the following figure:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.209.1"><img alt="Figure 1.6: VS Code ready to write Azure functions" src="../Images/B31916_01_6.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.210.1">Figure 1.6: VS Code ready to write Azure functions</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.211.1">Once all the </span><a id="_idIndexMarker049"/><span class="koboSpan" id="kobo.212.1">prerequisites are set, in the </span><strong class="screenText"><span class="koboSpan" id="kobo.213.1">Azure</span></strong><span class="koboSpan" id="kobo.214.1"> tab, go</span><a id="_idIndexMarker050"/><span class="koboSpan" id="kobo.215.1"> to </span><strong class="screenText"><span class="koboSpan" id="kobo.216.1">WORKSPACE</span></strong><span class="koboSpan" id="kobo.217.1"> and select </span><strong class="screenText"><span class="koboSpan" id="kobo.218.1">Create Function Project…</span></strong><span class="koboSpan" id="kobo.219.1">. </span><span class="koboSpan" id="kobo.219.2">Next, perform the following steps:</span><ol class="numberedList level-2" style="list-style-type: decimal;">
<li class="numberedList level-2" value="1"><span class="koboSpan" id="kobo.220.1">Choose a location for your project and select your preferred programming language.</span></li>
<li class="numberedList level-2"><span class="koboSpan" id="kobo.221.1">Follow the prompts to create a new HTTP trigger function. </span><span class="koboSpan" id="kobo.221.2">You can name it </span><code class="inlineCode"><span class="koboSpan" id="kobo.222.1">Health</span></code><span class="koboSpan" id="kobo.223.1"> and call the namespace </span><code class="inlineCode"><span class="koboSpan" id="kobo.224.1">CarShare.Function.</span></code></li>
<li class="numberedList level-2"><span class="koboSpan" id="kobo.225.1">You will need to decide on the </span><strong class="keyWord"><span class="koboSpan" id="kobo.226.1">access rights</span></strong><span class="koboSpan" id="kobo.227.1"> for </span><a id="_idIndexMarker051"/><span class="koboSpan" id="kobo.228.1">this function. </span><span class="koboSpan" id="kobo.228.2">For this example, you can choose </span><strong class="screenText"><span class="koboSpan" id="kobo.229.1">Anonymous</span></strong><span class="koboSpan" id="kobo.230.1">. </span><span class="koboSpan" id="kobo.230.2">We will discuss each of the security options later.</span></li>
<li class="numberedList level-2"><span class="koboSpan" id="kobo.231.1">Open the newly created function file. </span><span class="koboSpan" id="kobo.231.2">You will see a template code for an HTTP trigger function.</span></li>
<li class="numberedList level-2"><span class="koboSpan" id="kobo.232.1">Modify the function to meet your specific requirements, which, in this case, means to respond if the function is working properly. </span><span class="koboSpan" id="kobo.232.2">Notice that this is a </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.233.1">GET</span></code><span class="koboSpan" id="kobo.234.1"> and </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.235.1">POST</span></code><span class="koboSpan" id="kobo.236.1"> function. </span><span class="koboSpan" id="kobo.236.2">For the purpose we have defined, you can change the code to only be an HTTP </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.237.1">GET</span></code><span class="koboSpan" id="kobo.238.1"> function.</span></li>
<li class="numberedList level-2"><span class="koboSpan" id="kobo.239.1">Save</span><a id="_idIndexMarker052"/><span class="koboSpan" id="kobo.240.1"> your</span><a id="_idIndexMarker053"/><span class="koboSpan" id="kobo.241.1"> changes.</span></li>
</ol>
</li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.242.1">For running and debugging locally, you just need to press </span><em class="italic"><span class="koboSpan" id="kobo.243.1">F5</span></em><span class="koboSpan" id="kobo.244.1"> or navigate to </span><strong class="screenText"><span class="koboSpan" id="kobo.245.1">Run</span></strong><span class="koboSpan" id="kobo.246.1"> &gt; </span><strong class="screenText"><span class="koboSpan" id="kobo.247.1">Start Debugging</span></strong><span class="koboSpan" id="kobo.248.1">. </span><span class="koboSpan" id="kobo.248.2">VS Code will start the Azure Functions host, and you will see the function URL in the output window. </span><span class="koboSpan" id="kobo.248.3">Then, you can use tools such as </span><strong class="keyWord"><span class="koboSpan" id="kobo.249.1">Postman</span></strong><span class="koboSpan" id="kobo.250.1"> or </span><a id="_idIndexMarker054"/><span class="koboSpan" id="kobo.251.1">your browser to send HTTP requests to your function endpoint.</span></p>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.252.1"> It is worth mentioning that for running Azure Functions locally, you will need to allow PowerShell scripts to run without being digitally signed. </span><span class="koboSpan" id="kobo.252.2">This can be a problem depending on the security policies provided by your company.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.253.1">Once the function is running, you can consider it the same as when you work on other types of software projects, and even the debugging will work properly. </span><span class="koboSpan" id="kobo.253.2">The trigger will depend on the function you set. </span><span class="koboSpan" id="kobo.253.3">The following figure shows the code of the function program, where you can see the response to the caller with a status of </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.254.1">200</span></code><span class="koboSpan" id="kobo.255.1"> by using </span><code class="inlineCode"><span class="koboSpan" id="kobo.256.1">OkObjectResult</span></code><span class="koboSpan" id="kobo.257.1"> with the message “Yes! </span><span class="koboSpan" id="kobo.257.2">The function is live!” </span><span class="koboSpan" id="kobo.257.3">and the UTC time.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.258.1"><img alt="Figure 1.7: Azure Functions running locally" src="../Images/B31916_01_7.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.259.1">Figure 1.7: Azure Functions running locally</span></p>
<p class="normal"><span class="koboSpan" id="kobo.260.1">As you have</span><a id="_idIndexMarker055"/><span class="koboSpan" id="kobo.261.1"> created a function app connected to a GitHub repository </span><a id="_idIndexMarker056"/><span class="koboSpan" id="kobo.262.1">with the deployment process handled by GitHub Actions, once you commit and pull the code to GitHub, GitHub Actions will automatically build the function and deploy it as a function app.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.263.1"><img alt="Figure 1.8: Function app deployed using GitHub Actions" src="../Images/B31916_01_8.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.264.1">Figure 1.8: Function app deployed using GitHub Actions</span></p>
<p class="normal"><span class="koboSpan" id="kobo.265.1">It is not the </span><a id="_idIndexMarker057"/><span class="koboSpan" id="kobo.266.1">purpose of this book to discuss CI/CD strategies, but you</span><a id="_idIndexMarker058"/><span class="koboSpan" id="kobo.267.1"> will certainly need to think about them when it comes to professional development.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.268.1">The result of this deployment can be checked in the Azure portal, where the function developed will be available in the list of functions. </span><span class="koboSpan" id="kobo.268.2">It is worth noting that a function app can handle more than one function at the same time.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.269.1"><img alt="Figure 1.9: Health function available in the function app" src="../Images/B31916_01_9.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.270.1">Figure 1.9: Health function available in the function app</span></p>
<p class="normal"><span class="koboSpan" id="kobo.271.1">The function</span><a id="_idIndexMarker059"/><span class="koboSpan" id="kobo.272.1"> can be executed as soon as it is published to Azure. </span><span class="koboSpan" id="kobo.272.2">As</span><a id="_idIndexMarker060"/><span class="koboSpan" id="kobo.273.1"> a result of the sample function, as this was developed as a </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.274.1">GET</span></code><span class="koboSpan" id="kobo.275.1"> HTTP trigger, we can check that the function is working by accessing the API in the web browser.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.276.1"><img alt="Figure 1.10: Health function running properly" src="../Images/B31916_01_10.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.277.1">Figure 1.10: Health function running properly</span></p>
<p class="normal"><span class="koboSpan" id="kobo.278.1">As you don’t have a live CI/CD pipeline, you can also publish your Azure function directly from the VS Code IDE. </span><span class="koboSpan" id="kobo.278.2">To do so, you may use the Azure Functions extension provided by VS Code.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.279.1">There are a </span><a id="_idIndexMarker061"/><span class="koboSpan" id="kobo.280.1">few steps to follow in this case. </span><span class="koboSpan" id="kobo.280.2">The first one is to select the </span><a id="_idIndexMarker062"/><span class="koboSpan" id="kobo.281.1">action to deploy the function in the VS Code prompt:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.282.1"><img alt="Figure 1.11: Deploying to Azure using VS Code" src="../Images/B31916_01_11.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.283.1">Figure 1.11: Deploying to Azure using VS Code</span></p>
<p class="normal"><span class="koboSpan" id="kobo.284.1">After that, you will need to select the corresponding subscription and the name of the new function app you want to deploy, considering a new function:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.285.1"><img alt="Figure 1.12: Creating a new function app" src="../Images/B31916_01_12.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.286.1">Figure 1.12: Creating a new function app</span></p>
<p class="normal"><span class="koboSpan" id="kobo.287.1">The current</span><a id="_idIndexMarker063"/><span class="koboSpan" id="kobo.288.1"> process proposed by the extension is to deploy an Azure</span><a id="_idIndexMarker064"/><span class="koboSpan" id="kobo.289.1"> function in the Flex Consumption plan. </span><span class="koboSpan" id="kobo.289.2">There are some specific locations where this option is available:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.290.1"><img alt="Figure 1.13: Defining the location for the new function app" src="../Images/B31916_01_13.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.291.1">Figure 1.13: Defining the location for the new function app</span></p>
<p class="normal"><span class="koboSpan" id="kobo.292.1">The definition of the runtime stack is also important to get the most out of your Azure function. </span><span class="koboSpan" id="kobo.292.2">In the case of the Flex Consumption plan, you will also be asked for the memory usage in the instance and the maximum number of instances available for parallel calls.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.293.1"><img alt="Figure 1.14: Defining the runtime stack for the new function app" src="../Images/B31916_01_14.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.294.1">Figure 1.14: Defining the runtime stack for the new function app</span></p>
<p class="normal"><span class="koboSpan" id="kobo.295.1">Once these sets</span><a id="_idIndexMarker065"/><span class="koboSpan" id="kobo.296.1"> are defined, your Azure function will be deployed</span><a id="_idIndexMarker066"/><span class="koboSpan" id="kobo.297.1"> correctly. </span><span class="koboSpan" id="kobo.297.2">You can also redeploy functions using the same technique later, without needing to recreate the Azure function app every single time.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.298.1"><img alt="Figure 1.15: Function app properly deployed" src="../Images/B31916_01_15.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.299.1">Figure 1.15: Function app properly deployed</span></p>
<p class="normal"><span class="koboSpan" id="kobo.300.1">Last, but not</span><a id="_idIndexMarker067"/><span class="koboSpan" id="kobo.301.1"> least, the Azure portal also gives you the possibility to</span><a id="_idIndexMarker068"/><span class="koboSpan" id="kobo.302.1"> monitor and manage the functions deployed. </span><span class="koboSpan" id="kobo.302.2">Once this process is done, you can monitor your function’s performance and log. </span><span class="koboSpan" id="kobo.302.3">By using the </span><strong class="screenText"><span class="koboSpan" id="kobo.303.1">Monitoring</span></strong><span class="koboSpan" id="kobo.304.1"> section of your function app, you can view execution details, track failures, and analyze performance metrics.</span></p>
<h1 class="heading-1" id="_idParaDest-24"><a id="_idTextAnchor033"/><span class="koboSpan" id="kobo.305.1">Coding Azure functions using Visual Studio</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.306.1">Visual Studio is one of the </span><a id="_idIndexMarker069"/><span class="koboSpan" id="kobo.307.1">best options for developing Azure functions. </span><span class="koboSpan" id="kobo.307.2">To </span><a id="_idIndexMarker070"/><span class="koboSpan" id="kobo.308.1">do so, you must set </span><strong class="screenText"><span class="koboSpan" id="kobo.309.1">Azure Development Workload</span></strong><span class="koboSpan" id="kobo.310.1">, which will help enable Azure functions development natively on the platform.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.311.1">Once you have done this, the same project you created using VS Code will be available for you to use at Visual Studio. </span><span class="koboSpan" id="kobo.311.2">The difference between VS Code and Visual Studio in this case is that Visual Studio will provide an easier setup environment for debugging and a lot of visual dialogs that can facilitate your decisions.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.312.1"><img alt="Figure 1.16: Creating a new Azure function for the function app" src="../Images/B31916_01_16.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.313.1">Figure 1.16: Creating a new Azure function for the function app</span></p>
<p class="normal"><span class="koboSpan" id="kobo.314.1">These dialogs</span><a id="_idIndexMarker071"/><span class="koboSpan" id="kobo.315.1"> simplify the development process, so if you have the </span><a id="_idIndexMarker072"/><span class="koboSpan" id="kobo.316.1">opportunity to use Visual Studio, this will be the best option.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.317.1"><img alt="Figure 1.17: Defining the Azure function trigger type" src="../Images/B31916_01_17.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.318.1">Figure 1.17: Defining the Azure function trigger type</span></p>
<p class="normal"><span class="koboSpan" id="kobo.319.1">Once again, when</span><a id="_idIndexMarker073"/><span class="koboSpan" id="kobo.320.1"> you create a Function Apps project, you can add </span><a id="_idIndexMarker074"/><span class="koboSpan" id="kobo.321.1">more than one function to this project, which is extremely useful for microservices solutions. </span><span class="koboSpan" id="kobo.321.2">In the following example, we have added a second HTTP trigger function called </span><code class="inlineCode"><span class="koboSpan" id="kobo.322.1">Status</span></code><span class="koboSpan" id="kobo.323.1"> to help you understand this possibility and to let you see how these functions work together in a single function app.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.324.1"><img alt="Figure 1.18: Function app with more than one function" src="../Images/B31916_01_18.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.325.1">Figure 1.18: Function app with more than one function</span></p>
<p class="normal"><span class="koboSpan" id="kobo.326.1">It is important to </span><a id="_idIndexMarker075"/><span class="koboSpan" id="kobo.327.1">mention that the same code developed initially using</span><a id="_idIndexMarker076"/><span class="koboSpan" id="kobo.328.1"> VS Code can continue to be maintained using Visual Studio, and vice versa. </span><span class="koboSpan" id="kobo.328.2">This is great because you can have different developers in the same team using the two environments and this will not cause a problem, at least not with Function Apps projects.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.329.1">Visual Studio is an excellent option for developing Azure functions due to its comprehensive setup environment for debugging and integrated visual dialogs, which make development easier. </span><span class="koboSpan" id="kobo.329.2">Developers can switch between VS Code and Visual Studio without compatibility issues, facilitating team collaboration. </span><span class="koboSpan" id="kobo.329.3">Multiple functions, such as HTTP triggers, can be in a single Function Apps project, supporting microservices solutions.</span></p>
<h1 class="heading-1" id="_idParaDest-25"><a id="_idTextAnchor034"/><span class="koboSpan" id="kobo.330.1">Summary</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.331.1">This chapter explored the evolution of cloud platforms and the rise of modern technologies, emphasizing the importance of focusing on solutions rather than just technologies. </span><span class="koboSpan" id="kobo.331.2">The chapter highlighted the advantages of serverless computing, such as scalability, reliability, security, and cost-effectiveness, while also addressing potential challenges. </span><span class="koboSpan" id="kobo.331.3">It discussed how serverless architecture can deliver microservices and the benefits of using Microsoft Azure Functions for building and deploying serverless applications. </span><span class="koboSpan" id="kobo.331.4">The chapter also provided practical guidance on creating and managing Azure functions using tools such as VS Code and Visual Studio.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.332.1">In the next chapter, we will discuss how microservices applications can be defined and designed in enterprise scenarios.</span></p>
<h1 class="heading-1" id="_idParaDest-26"><a id="_idTextAnchor035"/><span class="koboSpan" id="kobo.333.1">Questions</span></h1>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.334.1">What are the main advantages of using serverless computing as mentioned in the chapter?</span></li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.335.1">Serverless computing provides several advantages, including automatic scaling, cost-efficiency through a pay-as-you-go model, and reduced infrastructure management. </span><span class="koboSpan" id="kobo.335.2">Developers do not need to worry about provisioning or maintaining servers, which allows them to focus on delivering solutions faster and more efficiently.</span></p>
<p class="normal-one"><span class="koboSpan" id="kobo.336.1">It also promotes software development acceleration by letting developers focus solely on the code. </span><span class="koboSpan" id="kobo.336.2">Additionally, the environment’s reliability and security are managed by the cloud provider, enabling scalable and sustainable solutions without sacrificing performance or safety.</span></p>
<ol>
<li class="numberedList" value="2"><span class="koboSpan" id="kobo.337.1">How can serverless architecture be used to deliver microservices?</span></li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.338.1">Serverless architecture supports the microservices model by allowing developers to create independent, small, and reusable functions that represent distinct business capabilities. </span><span class="koboSpan" id="kobo.338.2">These functions can be deployed, tested, and scaled independently, following the core principles of microservices.</span></p>
<p class="normal-one"><span class="koboSpan" id="kobo.339.1">The chapter gave an example of a user authentication microservice, where separate functions such as registration, login, and password reset were implemented within a single serverless project. </span><span class="koboSpan" id="kobo.339.2">This flexibility enhances the modularity and maintainability of applications built using microservices principles.</span></p>
<ol>
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.340.1">What are the key triggers available in Azure Functions and their purposes?</span></li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.341.1">Azure Functions can be triggered by a variety of events. </span><span class="koboSpan" id="kobo.341.2">The main triggers are HTTP trigger (for web requests), timer trigger (scheduled tasks), Blob Storage trigger (file uploads or changes), Queue Storage trigger (message processing), Event Grid trigger (event handling from Azure services), Service Bus trigger (messaging between applications), and Cosmos DB trigger (database change processing).</span></p>
<p class="normal-one"><span class="koboSpan" id="kobo.342.1">Each trigger allows developers to build event-driven applications with flexibility and scalability. </span><span class="koboSpan" id="kobo.342.2">For example, timer triggers are ideal for recurring tasks, while HTTP triggers are commonly used for APIs and webhooks. </span><span class="koboSpan" id="kobo.342.3">This variety of triggers supports the development of diverse and responsive solutions.</span></p>
<ol>
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.343.1">What steps are necessary to create a serverless application in the Azure portal?</span></li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.344.1">To create a serverless application in Azure, the developer must log in to the Azure portal and create a new Function App resource. </span><span class="koboSpan" id="kobo.344.2">During the setup, they need to choose the hosting plan (e.g., Consumption plan), define project details such as region, runtime stack, storage account, and networking options, and enable monitoring via Application Insights.</span></p>
<p class="normal-one"><span class="koboSpan" id="kobo.345.1">After reviewing the configurations, the developer clicks </span><strong class="screenText"><span class="koboSpan" id="kobo.346.1">Create</span></strong><span class="koboSpan" id="kobo.347.1"> to deploy the function app. </span><span class="koboSpan" id="kobo.347.2">Once deployed, they can navigate to the resource, start coding, and manage it directly from the portal or via development tools such as Visual Studio or VS Code.</span></p>
<ol>
<li class="numberedList" value="5"><span class="koboSpan" id="kobo.348.1">How does Azure Functions integrate with other Azure services and third-party APIs?</span></li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.349.1">Azure Functions integrates seamlessly with various Azure services such as Azure SQL, Cosmos DB, Event Grid, Service Bus, and Logic Apps. </span><span class="koboSpan" id="kobo.349.2">This enables developers to build complex workflows, automate tasks, and create highly responsive applications using existing Azure infrastructure.</span></p>
<p class="normal-one"><span class="koboSpan" id="kobo.350.1">Additionally, Azure Functions can connect to third-party APIs and services, supporting hybrid architectures. </span><span class="koboSpan" id="kobo.350.2">This integration capability allows developers to extend their applications across platforms, enhancing the flexibility and scalability of cloud-native solutions.</span></p>
<h1 class="heading-1" id="_idParaDest-27"><a id="_idTextAnchor036"/><span class="koboSpan" id="kobo.351.1">Further reading</span></h1>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.352.1">Azure Functions documentation: </span><a href="https://learn.microsoft.com/en-us/azure/azure-functions/"><span class="url"><span class="koboSpan" id="kobo.353.1">https://learn.microsoft.com/en-us/azure/azure-functions/</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.354.1">Azure API Management documentation: </span><a href="https://learn.microsoft.com/en-us/azure/api-management/"><span class="url"><span class="koboSpan" id="kobo.355.1">https://learn.microsoft.com/en-us/azure/api-management/</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.356.1">Azure Application Gateway documentation: </span><a href="https://learn.microsoft.com/en-us/azure/application-gateway/overview"><span class="url"><span class="koboSpan" id="kobo.357.1">https://learn.microsoft.com/en-us/azure/application-gateway/overview</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-28"><a id="_idTextAnchor037"/><span class="koboSpan" id="kobo.358.1">Join our community on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.359.1">Join our community’s Discord space for discussions with the author and other readers:</span></p>
<p class="normal"><a href="https://packt.link/PSMCSharp"><span class="url"><span class="koboSpan" id="kobo.360.1">https://packt.link/PSMCSharp</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.361.1"><img alt="A qr code with black squares  AI-generated content may be incorrect." src="../Images/B31916_Discord-QR-Code.png"/></span></p>
</div>
</body></html>