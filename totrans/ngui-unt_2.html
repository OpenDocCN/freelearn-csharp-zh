<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;Creating Widgets"><div class="titlepage"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Creating Widgets</h1></div></div></div><p>In this chapter, we will create our first sprite widget and understand how it works. Then we will create one sample of each important widget template, and analyze their corresponding parameters so that you know how to create and configure them.</p><p>At the end of this<a id="id39" class="indexterm"/> chapter,<a id="id40" class="indexterm"/> we will have a functional main<a id="id41" class="indexterm"/> menu with most of NGUI's widgets.</p><div class="section" title="Creating our first widget"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec13"/>Creating our first widget</h1></div></div></div><p>We will create our first sprite widget to display our main menu's background window. In order to do that easily, NGUI has a <span class="strong"><strong>Widget Wizard</strong></span>
<a id="id42" class="indexterm"/> with a few templates for us.</p><div class="section" title="Widget Wizard"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec19"/>Widget Wizard</h2></div></div></div><p>The Widget Wizard <a id="id43" class="indexterm"/>can be opened by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Open</strong></span> | <span class="strong"><strong>Widget Wizard</strong></span>. It will look like the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_01.jpg" alt="Widget Wizard"/></div><p>As you can see in the previous screenshot, to create a widget, you require <span class="strong"><strong>Atlas</strong></span> and <span class="strong"><strong>Font</strong></span> to be configured. As said in <a class="link" href="ch01.html" title="Chapter 1. Getting Started with NGUI">Chapter 1</a>, <span class="emphasis"><em>Getting Started with NGUI</em></span>, an atlas is a large texture containing the sprites that you need to create your UI. For the rest of this chapter, we will use the default atlas named <span class="strong"><strong>SciFi Atlas</strong></span>
<a id="id44" class="indexterm"/>, which is included in the plugin.</p></div><div class="section" title="Selecting an atlas"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec20"/>Selecting an atlas</h2></div></div></div><p>Let's select <a id="id45" class="indexterm"/>our <a id="id46" class="indexterm"/>default SciFi atlas, which contains the necessary sprites, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the <span class="strong"><strong>Project</strong></span> view, navigate to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Examples</strong></span> | <span class="strong"><strong>Atlases</strong></span> | <span class="strong"><strong>SciFi</strong></span>.</li><li class="listitem">Drag-and-drop the prefab <code class="literal">SciFi Atlas.prefab</code> in the <span class="strong"><strong>Atlas</strong></span> field.</li><li class="listitem">Drag-and-drop the prefab <code class="literal">SciFi Font – Header.prefab</code> in the <span class="strong"><strong>Font</strong></span> field.</li></ol></div><p>We have our <span class="strong"><strong>Atlas</strong></span> and <span class="strong"><strong>Font</strong></span> prefabs selected. We can now create a widget from a template.</p></div><div class="section" title="Creating a widget from a template"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec21"/>Creating a widget from a template</h2></div></div></div><p>Let's create a widget<a id="id47" class="indexterm"/> from a template by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Click on the drop-down menu next to the <span class="strong"><strong>Template</strong></span> field.</li><li class="listitem">Select the <span class="strong"><strong>Sprite</strong></span> option as <span class="strong"><strong>Template</strong></span>.</li><li class="listitem">Click on the drop-down menu next to the <span class="strong"><strong>Sprite</strong></span> field.</li><li class="listitem">Select the sprite named <span class="strong"><strong>Dark</strong></span>.</li><li class="listitem">Leave the <span class="strong"><strong>Pivot</strong></span> option as <span class="strong"><strong>Center</strong></span>.</li><li class="listitem">Make sure you have selected <span class="strong"><strong>Panel</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> view.</li><li class="listitem">Click on the <span class="strong"><strong>Add To</strong></span> button.</li></ol></div><p>Ok, our sprite widget has been created!</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note04"/>Note</h3><p>The widget wizard adds the new widget as the child of the selected GameObject or panel. If you have selected the wrong GameObject, you can still drag-and-drop the new widget into the right GameObject after it is created.</p></div></div></div><div class="section" title="Transforming widgets"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec22"/>Transforming widgets</h2></div></div></div><p>We have created <a id="id48" class="indexterm"/>our first widget: <span class="strong"><strong>Sprite (Dark)</strong></span>. Select it in the <span class="strong"><strong>Hierarchy</strong></span> view and try the following manipulations to change its transform values.</p><div class="section" title="Moving widgets"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec07"/>Moving widgets</h3></div></div></div><p>In the <span class="strong"><strong>Scene</strong></span> view, <a id="id49" class="indexterm"/>you can use the <span class="strong"><strong>handles</strong></span> to move your widget or you may enter coordinates directly in the <span class="strong"><strong>Inspector</strong></span> view's <span class="strong"><strong>X</strong></span>, <span class="strong"><strong>Y</strong></span>, or <span class="strong"><strong>Z</strong></span> parameters. The following screenshot is of the <span class="strong"><strong>Scene</strong></span> view with the three parameters visible:</p><div class="mediaobject"><img src="graphics/8667OT_02_02.jpg" alt="Moving widgets"/></div><p>You should always leave the <span class="strong"><strong>Z</strong></span> coordinates at 0. If you need to place a widget behind or in front of another, use the <span class="strong"><strong>Back</strong></span> and <span class="strong"><strong>Forward</strong></span> buttons in the <span class="strong"><strong>Inspector</strong></span> view to control your widget's depth.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p>You may move your widget on only one axis by pressing <span class="emphasis"><em>Shift</em></span> before you click on the axis's handle.</p></div></div></div><div class="section" title="Rotating widgets"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec08"/>Rotating widgets</h3></div></div></div><p>On the <span class="strong"><strong>Scene</strong></span> view, <a id="id50" class="indexterm"/>place your mouse cursor on the outside of any blue circle surrounding your widget. Your cursor will have a rotation icon next to it. You can now keep your left mouse button pressed and move your mouse to rotate the widget.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip03"/>Tip</h3><p>By default, rotation is set to have a 15 degrees step. If you wish to have a more precise rotation—a 1 degree step—just hold <span class="emphasis"><em>Shift</em></span> while rotating.</p></div></div></div><div class="section" title="Scaling widgets"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec09"/>Scaling widgets</h3></div></div></div><p>You may have<a id="id51" class="indexterm"/> noticed that in the <span class="strong"><strong>Inspector</strong></span> view, the scale value is grayed out. That's because you should use the <span class="strong"><strong>Dimensions</strong></span> parameter of the <span class="strong"><strong>UISprite</strong></span> component instead.</p><p>On the <span class="strong"><strong>Scene</strong></span> view, place your mouse cursor on any blue circle surrounding your widget. Your cursor will have a resize icon next to it. You can now click and drag your mouse to resize the widget.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip04"/>Tip</h3><p>Using the blue handles will <span class="emphasis"><em>not</em></span> keep your widget centered to its current position. If you want to resize your widget proportionally on both sides, click on the space in front of the <span class="strong"><strong>X</strong></span> or <span class="strong"><strong>Y</strong></span> parameter of <span class="strong"><strong>Dimensions</strong></span> of the <span class="strong"><strong>UISprite</strong></span> component and drag your mouse left or right.</p></div></div><p>To keep<a id="id52" class="indexterm"/> everything pixel perfect, you should avoid scaling widgets up or down with Unity's scale tool. Try to do everything with <span class="strong"><strong>Dimensions</strong></span>. Let's see what other parameters we have for widgets.</p></div></div><div class="section" title="Common widget parameters"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec23"/>Common widget parameters</h2></div></div></div><p>Select <span class="strong"><strong>Sprite (Dark)</strong></span> and you<a id="id53" class="indexterm"/> will find the parameters seen in the following screenshot in the <span class="strong"><strong>Inspector</strong></span> view:</p><div class="mediaobject"><img src="graphics/8667OT_02_03.jpg" alt="Common widget parameters"/></div><p>These parameters exist for any type of widget. Let's see what they are:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Color Tint</strong></span>: This is the widget's alpha-enabled color.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Clipboard</strong></span>: If you click on the <span class="strong"><strong>Copy</strong></span> button, the current <span class="strong"><strong>Color Tint</strong></span> selection is copied to this parameter. If you click on the <span class="strong"><strong>Paste</strong></span> button, the <span class="strong"><strong>Clipboard</strong></span> parameter's selection will be pasted to <span class="strong"><strong>Color Tint</strong></span>.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Pivot</strong></span>: This presents two sets of buttons that can be used to choose which corner or side you want the widget's pivot to be placed.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Depth</strong></span>: This can be used to display your widget in front or behind others.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Dimensions</strong></span>: This can be used to display size in pixels instead of scaling.</li></ul></div><p>Now that we have seen the widget parameters, please enter these <span class="strong"><strong>Dimensions</strong></span> for our newly created <span class="strong"><strong>Sprite (Dark)</strong></span>: <code class="literal">1300</code> x <code class="literal">850</code>.</p><p>Our sprite window just got enormous and ugly. Why? Because it's a 15 x 15 sprite stretched to 1300 x 850! Let's talk about sprites and see how we can correct this.</p></div></div></div>
<div class="section" title="Sprites"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec14"/>Sprites</h1></div></div></div><p>We have created <a id="id54" class="indexterm"/>our first <a id="id55" class="indexterm"/>sprite and understood how to move, rotate, and change its dimensions. We actually scaled it up massively compared to its original size. But this 15 x 15 sprite has something special.</p><p>If you select the <span class="strong"><strong>Sprite (Dark)</strong></span> GameObject, you will see it has four dotted lines inside the <span class="strong"><strong>Preview</strong></span> window in the <span class="strong"><strong>Inspector</strong></span> view. This means it's a<a id="id56" class="indexterm"/> <span class="strong"><strong>sliced</strong></span> <span class="strong"><strong>sprite</strong></span>:</p><div class="mediaobject"><img src="graphics/8667OT_02_04.jpg" alt="Sprites"/></div><div class="section" title="Sliced sprites"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec24"/>Sliced sprites</h2></div></div></div><p>A<a id="id57" class="indexterm"/> <span class="strong"><strong>sliced</strong></span> sprite <a id="id58" class="indexterm"/>is an image divided in nine sections, making it resizable while conserving its corners' proportions. Sliced sprites may be scaled as you wish—they still look beautiful.</p><p>Since <span class="strong"><strong>Sprite (Dark)</strong></span> is a 9-slice sprite, we must tell our <span class="strong"><strong>UISprite</strong></span> component<a id="id59" class="indexterm"/> to treat it as such. Perform the following steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Sprite (Dark)</strong></span> GameObject.</li><li class="listitem">Click on the drop-down menu next to its <span class="strong"><strong>Sprite Type</strong></span> field.</li><li class="listitem">Select <span class="strong"><strong>Sliced</strong></span>.</li></ol></div><p>Notice how the sprite looks good now—it's not stretched anymore!</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note05"/>Note</h3><p>The <span class="strong"><strong>Fill Center</strong></span> parameter allows you to only show the sprite's borders and leave only transparency inside.</p><p>Even though sliced sprites are perfect for windows and variable size boxes, you may display regular sprites by leaving <span class="strong"><strong>Sprite Type</strong></span> as <span class="strong"><strong>Simple</strong></span>.</p></div></div></div><div class="section" title="Tiled sprites"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec25"/>Tiled sprites</h2></div></div></div><p>A <a id="id60" class="indexterm"/>tiling sprite<a id="id61" class="indexterm"/> is a pattern meant to be repeated indefinitely—it can be used to cover a large surface by repeating the same texture. Let's try it right now:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the <span class="strong"><strong>Hierarchy</strong></span> view, rename <span class="strong"><strong>Sprite (Dark)</strong></span> as <code class="literal">Window</code>.</li><li class="listitem">Select our <span class="strong"><strong>Window</strong></span> GameObject and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Make sure it is at {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>} position and has a scale of {<code class="literal">1</code>, <code class="literal">1</code>, <code class="literal">1</code>}.</li><li class="listitem">Make sure <span class="strong"><strong>Depth</strong></span> is set to <code class="literal">0</code>.</li><li class="listitem">In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">115</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">240</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">255</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li></ol></div></li></ol></div><p>Ok, we have our window. Let's create a tiled background to make it look better by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select our <span class="strong"><strong>Window</strong></span> GameObject and duplicate it with <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span>.</li><li class="listitem">Rename the duplicate as <code class="literal">Background</code>.</li><li class="listitem">Select the new <span class="strong"><strong>Background</strong></span> GameObject and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Set its UISprite's <span class="strong"><strong>Depth</strong></span> parameter to <code class="literal">1</code>.</li><li class="listitem">Click on the drop-down menu next to the <span class="strong"><strong>Sprite Type</strong></span> field.</li><li class="listitem">Select <span class="strong"><strong>Tiled</strong></span>. It doesn't look good because our sprite is not a tiling sprite.</li><li class="listitem">Click on the <span class="strong"><strong>Sprite</strong></span> button.</li><li class="listitem">Select the <span class="strong"><strong>Honeycomb</strong></span> sprite, which is a tiling sprite.</li><li class="listitem">In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">115</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">240</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">255</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Attach a component to it by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Stretch</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag-and-drop our <span class="strong"><strong>Window</strong></span> GameObject inside the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Set the <span class="strong"><strong>Style</strong></span> field to <span class="strong"><strong>Both</strong></span>.</li></ol></div></li><li class="listitem">Attach a component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and drag-and-drop our <span class="strong"><strong>Window</strong></span> GameObject inside the <span class="strong"><strong>Container</strong></span> field.</li></ol></div><p>That looks better! We now have a tiling sprite for our window's background, and it looks as follows:</p><div class="mediaobject"><img src="graphics/8667OT_02_05.jpg" alt="Tiled sprites"/></div><p>We used the <span class="strong"><strong>UIStretch</strong></span> component<a id="id62" class="indexterm"/>
<a id="id63" class="indexterm"/> to avoid setting dimensions manually; if you change the window's <span class="strong"><strong>Dimensions</strong></span>, the background will resize itself automatically.</p><p>The <span class="strong"><strong>UIAnchor</strong></span> component<a id="id64" class="indexterm"/> is used to make sure the background also moves with the window.</p></div><div class="section" title="Filled sprites"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec26"/>Filled sprites</h2></div></div></div><p>A<a id="id65" class="indexterm"/> filled sprite<a id="id66" class="indexterm"/> is useful to create life bars or progress bars; with this, you can set a sprite and change the <span class="strong"><strong>Fill Amount</strong></span> parameter between 0 and 1 to hide a part of it. The following screenshot shows a partially hidden progress bar:</p><div class="mediaobject"><img src="graphics/8667OT_02_06.jpg" alt="Filled sprites"/></div><p>Let's create this effect with the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select our <span class="strong"><strong>Background</strong></span> GameObject and set <span class="strong"><strong>Sprite Type</strong></span> to <span class="strong"><strong>Filled</strong></span>.</li><li class="listitem">Set <span class="strong"><strong>Fill Dir</strong></span> to <span class="strong"><strong>Horizontal</strong></span>.</li></ol></div><p>Move the<a id="id67" class="indexterm"/> <span class="strong"><strong>Fill Amount</strong></span> slider and you can see what it does on the game view. You've understood the filled sprite system. Now set the <span class="strong"><strong>Sprite Type</strong></span> field back to <span class="strong"><strong>Tiled</strong></span>.</p><p>Ok, we've seen different sprite widgets and parameters. Let's learn how to add text.</p></div></div>
<div class="section" title="Labels"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec15"/>Labels</h1></div></div></div><p>Labels are<a id="id68" class="indexterm"/> used to display text on the screen with a specific font as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_07.jpg" alt="Labels"/></div><p>Let's <a id="id69" class="indexterm"/>create a <a id="id70" class="indexterm"/>label widget with the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Panel</strong></span> GameObject.</li><li class="listitem">Navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Open</strong></span> | <span class="strong"><strong>Widget Wizard</strong></span>.</li><li class="listitem">Select the <span class="strong"><strong>Label</strong></span> template.</li><li class="listitem">We have already selected a font; it will be used for this label.</li><li class="listitem">Click on the <span class="strong"><strong>Add To</strong></span> button.</li></ol></div><p>A new label has been added to the panel and placed at the center of the screen.</p><div class="section" title="Parameters"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec27"/>Parameters</h2></div></div></div><p>With <span class="strong"><strong>Label</strong></span> selected,<a id="id71" class="indexterm"/> the <code class="literal">UILabel</code> parameters are shown in the <span class="strong"><strong>Inspector</strong></span> view. They are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Text</strong></span>: This is a large textbox that lets you type the text to be displayed.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Overflow</strong></span>: This offers four different behaviors for the widget when the text is larger than the label's <span class="strong"><strong>Dimensions</strong></span>. The four behaviors are as follows:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Shrink Content</strong></span>: This shrinks the text in order to fit</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Clamp Content</strong></span>: This ensures overflow will never happen</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Resize Freely</strong></span>: This resizes to display all the content and overflow</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Resize Height</strong></span>: This resizes height only—column style</li></ul></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Encoding</strong></span>: This must be checked if you want to change the characters' color by inserting the <code class="literal">[RRGGBB]</code> hexadecimal values.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Effect</strong></span>: This <a id="id72" class="indexterm"/>will help you add a shadow or outline effect to your label. You can adjust the <span class="strong"><strong>Distance</strong></span> and <span class="strong"><strong>Color</strong></span> values.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Max Lines</strong></span>: This is the maximum number of lines assigned for the label. For unlimited lines, leave it as <span class="strong"><strong>0</strong></span>.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Pivot</strong></span>: The pivot also defines how the text is aligned.</li></ul></div></div><div class="section" title="Creating the title bar"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec28"/>Creating the title bar</h2></div></div></div><p>Let's add a title <a id="id73" class="indexterm"/>for our window that will look like the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_08.jpg" alt="Creating the title bar"/></div><p>Please proceed with the following steps to create this title bar for our window:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select <span class="strong"><strong>Panel</strong></span> and create a new child with <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span>.</li><li class="listitem">Rename that new child as <code class="literal">Title</code>. It will be our Title bar container.</li><li class="listitem">Drag-and-drop the <span class="strong"><strong>Label</strong></span> GameObject into the <span class="strong"><strong>Title</strong></span> GameObject.</li><li class="listitem">Select our <span class="strong"><strong>Title</strong></span> GameObject.</li><li class="listitem">Navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Open</strong></span> | <span class="strong"><strong>Widget Wizard</strong></span>.</li><li class="listitem">Create a new sprite using the <span class="strong"><strong>Highlight</strong></span> sprite and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Rename this new sprite (<span class="strong"><strong>Highlight</strong></span>) as <code class="literal">Background</code>.</li><li class="listitem">Set <span class="strong"><strong>Sprite Type</strong></span> to <span class="strong"><strong>Sliced</strong></span>.</li><li class="listitem">Change the <span class="strong"><strong>Pivot</strong></span> option to <span class="strong"><strong>Top</strong></span> (the button with the up arrow).</li><li class="listitem">Reset its <span class="strong"><strong>Transform</strong></span> position to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">95</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">150</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">200</code>.</li><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">2</code>.</li></ol></div></li><li class="listitem">Attach a component to it by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Stretch</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag our <span class="strong"><strong>Window</strong></span> GameObject into the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Set <span class="strong"><strong>Style</strong></span> to <span class="strong"><strong>Horizontal</strong></span>.</li><li class="listitem">Enter its UISprite's <span class="strong"><strong>Y</strong></span> dimension as <code class="literal">62</code>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Label</strong></span> GameObject from <span class="strong"><strong>Title</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Change its text to <code class="literal">[AAFFFF]Main Menu</code>.</li><li class="listitem">Set its <span class="strong"><strong>Overflow</strong></span> parameter to <span class="strong"><strong>Resize Freely</strong></span>.</li><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">3</code>.</li></ol></div></li><li class="listitem">Attach<a id="id74" class="indexterm"/> a component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag-and-drop the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Title</strong></span> in the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Set the <span class="strong"><strong>Side</strong></span> parameter to <span class="strong"><strong>Center</strong></span>.</li></ol></div></li><li class="listitem">Select our <span class="strong"><strong>Title</strong></span> GameObject in the <span class="strong"><strong>Hierarchy</strong></span> view.</li><li class="listitem">Attach a component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag our <span class="strong"><strong>Window</strong></span> GameObject into the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Set the <span class="strong"><strong>Side</strong></span> parameter to <span class="strong"><strong>Top</strong></span>.</li></ol></div></li></ol></div><p>The <span class="strong"><strong>Hierarchy</strong></span> and <span class="strong"><strong>Inspector</strong></span> views of our <span class="strong"><strong>Title</strong></span> GameObject should look like the ones in the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_09.jpg" alt="Creating the title bar"/></div><p>We now have a <a id="id75" class="indexterm"/>window that actually looks like a window. We used anchors to avoid setting positions manually. Now let's add some buttons!</p></div></div>
<div class="section" title="Buttons"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Buttons</h1></div></div></div><p>With NGUI, buttons <a id="id76" class="indexterm"/>are easy<a id="id77" class="indexterm"/> to create and configure.</p><p>Let's create<a id="id78" class="indexterm"/> our first one by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Panel</strong></span> GameObject.</li><li class="listitem">Create a new child with <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">Buttons</code>. It will be our buttons container.</li></ol></div></li><li class="listitem">Navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Open</strong></span> | <span class="strong"><strong>Widget Wizard</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Button</strong></span> Template.</li><li class="listitem">For the <span class="strong"><strong>Background</strong></span> field, select the sprite named <span class="strong"><strong>Button</strong></span>.</li></ol></div></li><li class="listitem">With the <span class="strong"><strong>Buttons</strong></span> GameObject selected, click on the <span class="strong"><strong>Add To</strong></span> button.</li></ol></div><p>A button has<a id="id79" class="indexterm"/> just been created and centered on the screen. If you look at the <span class="strong"><strong>Hierarchy</strong></span> view, you will see that a button is composed of a container GameObject named <span class="strong"><strong>Button</strong></span> and two children: a <span class="strong"><strong>Background</strong></span> sprite and <span class="strong"><strong>Label</strong></span>. That's how NGUI works; templates are simply assembled components and widgets. If you wanted to, you could build a button from scratch using the right components on empty GameObjects.</p><p>Click on the Play button. You can see that hover and click are already set! Turn off the Play mode, select the new <span class="strong"><strong>Button</strong></span> GameObject, and look at the <span class="strong"><strong>Inspector</strong></span> view.</p><p>Interactive widgets have a box collider attached to them, and that is the case with this button. The collider is used to detect collisions with the cursor.</p><div class="section" title="Parameters"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec29"/>Parameters</h2></div></div></div><p>A button has a <code class="literal">UIButton</code>
<a id="id80" class="indexterm"/> component that handles seven button parameters:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Target</strong></span>: This GameObject is transformed and modified when the user hovers or presses the button. By default, this is <span class="strong"><strong>Background</strong></span>.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Normal</strong></span>: This is the color tint when nothing is happening.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Hover</strong></span>: This is the color tint when the user's cursor is over the button.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Pressed</strong></span>: This is the color tint when the user clicks on the button.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Disabled</strong></span>: This is the color tint when the button is disabled (can't be clicked).</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Duration</strong></span>: This<a id="id81" class="indexterm"/> is the duration of transitions between states.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Notify</strong></span>: This is the parameter that lets you choose a method to call when the button is clicked. You must first drag a GameObject into the <span class="strong"><strong>Notify</strong></span> field. A <span class="strong"><strong>Method</strong></span> field will then appear, listing the GameObject's attached script methods, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/8667OT_02_10.jpg" alt="Parameters"/></div></li></ul></div><p>In the previous example, I dragged the <span class="strong"><strong>Panel</strong></span> GameObject into the <span class="strong"><strong>Notify</strong></span> field. My <span class="strong"><strong>Panel</strong></span> GameObject has a <code class="literal">ButtonManager.cs</code> script attached to it—this script has a <code class="literal">ButtonClicked()</code> method. I can now select it in the <span class="strong"><strong>Method</strong></span> field. It will be called on click.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note06"/>Note</h3><p>Only <span class="strong"><strong>public</strong></span> methods without arguments will show in the <span class="strong"><strong>Method</strong></span> field of the <span class="strong"><strong>Notify</strong></span> parameter.</p></div></div><p>There is also a <span class="strong"><strong>PlaySound</strong></span> component attached to this button. It lets you choose an audio clip to play when the selected event occurs. You can edit the <span class="strong"><strong>Pitch</strong></span> and <span class="strong"><strong>Volume</strong></span> parameters.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note07"/>Note</h3><p>You can add as many <span class="strong"><strong>PlaySound</strong></span> components as you want if you need a sound to be played whenever the user hovers or clicks on something, for example.</p></div></div></div><div class="section" title="The play and exit buttons"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec30"/>The play and exit buttons</h2></div></div></div><p>We will now add<a id="id82" class="indexterm"/> two buttons to our window that will exit or launch the game. They will appear as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_11.jpg" alt="The play and exit buttons"/></div><p>We need a GameObject that will manage the game. It will contain the <code class="literal">GameManager.cs</code> script attached in order to manage generic behaviors <a id="id83" class="indexterm"/>such as exiting or launching the game. Let's create it first; follow these steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a <a id="id84" class="indexterm"/>new GameObject at the root of <span class="strong"><strong>Hierarchy</strong></span> with <span class="emphasis"><em>Ctlr</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">GameManager</code>.</li></ol></div></li><li class="listitem">Create and attach a new <code class="literal">GameManager.cs</code> C# script to it and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open this new <code class="literal">GameManager.cs</code> script.</li><li class="listitem">Inside this new script, add this new method called <code class="literal">ExitPressed()</code> with the following code lines:<div class="informalexample"><pre class="programlisting">public void ExitPressed()
{
  //Exit Now
  Application.Quit();
}</pre></div></li></ol></div></li></ol></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip05"/>Tip</h3><p>
<span class="strong"><strong>Downloading the example code</strong></span>
</p><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div><p>Now that the exit method is ready, let's create and configure the two buttons as shown in the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Button</strong></span> GameObject and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">Exit</code>.</li><li class="listitem">Drag the <span class="strong"><strong>GameManager</strong></span> GameObject into the <span class="strong"><strong>Notify</strong></span> field.</li><li class="listitem">Choose <span class="strong"><strong>GameManager.ExitPressed</strong></span> in the <span class="strong"><strong>Method</strong></span> field.</li><li class="listitem">In the <span class="strong"><strong>Normal</strong></span> color tint parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">185</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">255</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li><li class="listitem">In the <span class="strong"><strong>Hover</strong></span> color tint parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">0</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">220</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">255</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Attach a<a id="id85" class="indexterm"/> component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag our <span class="strong"><strong>Window</strong></span> GameObject into the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Set the <span class="strong"><strong>Side</strong></span> parameter to <span class="strong"><strong>BottomLeft</strong></span>.</li><li class="listitem">Set <span class="strong"><strong>Pixel Offset</strong></span> to {<code class="literal">135</code>, <code class="literal">60</code>}.</li></ol></div></li><li class="listitem">Select our<a id="id86" class="indexterm"/> <span class="strong"><strong>Exit</strong></span> button's child <span class="strong"><strong>Background</strong></span> GameObject and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">2</code>.</li></ol></div></li><li class="listitem">Select our <span class="strong"><strong>Exit</strong></span> button's child <span class="strong"><strong>Label</strong></span> GameObject and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Change its text to <code class="literal">Exit</code>.</li><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">3</code>.</li></ol></div></li></ol></div><p>Ok, we have our <span class="strong"><strong>Exit</strong></span> button. Let's create our <span class="strong"><strong>Play</strong></span> button as follows:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Duplicate the <span class="strong"><strong>Exit</strong></span> button and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Rename this new duplicate as <code class="literal">Play</code>.</li><li class="listitem">Click on the <span class="strong"><strong>Minus</strong></span> button next to the UIButton's <span class="strong"><strong>Notify</strong></span> field to remove the <span class="strong"><strong>GameManager</strong></span> GameObject from it.</li><li class="listitem">Set its <span class="strong"><strong>Side</strong></span> parameter to <span class="strong"><strong>BottomRight</strong></span>.</li><li class="listitem">Set <span class="strong"><strong>Pixel Offset</strong></span> to {<code class="literal">-135</code>, <code class="literal">60</code>}.</li></ol></div></li><li class="listitem">Attach a Component to it by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Examples</strong></span> | <span class="strong"><strong>Load Level On Click</strong></span>, and set its <span class="strong"><strong>Level Name</strong></span> string parameter to <span class="strong"><strong>Game</strong></span>.</li><li class="listitem">Select our <span class="strong"><strong>Play</strong></span> button's child <span class="strong"><strong>Label</strong></span> GameObject, and change its text to <code class="literal">Play</code>.</li></ol></div><p>Perfect, now if you build your scene, you will have a functional <span class="strong"><strong>Exit</strong></span> button with only one line of code! The <span class="strong"><strong>Pixel Offset</strong></span> parameter<a id="id87" class="indexterm"/> maintains our buttons at the same distance from the window's borders even if you change resolutions or the window's dimensions. We will create our game scene later.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note08"/>Note</h3><p>
<span class="strong"><strong>Image buttons</strong></span>
<a id="id88" class="indexterm"/> can also be created with the Widget Wizard. They are identical to normal buttons, except that they use images for the <span class="strong"><strong>Normal</strong></span>, <span class="strong"><strong>Hover</strong></span>, <span class="strong"><strong>Pressed</strong></span>, and <span class="strong"><strong>Disabled</strong></span> states instead of color and scale tweens.</p></div></div></div></div>
<div class="section" title="Text input"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec17"/>Text input</h1></div></div></div><p>Now we will learn <a id="id89" class="indexterm"/>how to add a<a id="id90" class="indexterm"/> text input to create a <a id="id91" class="indexterm"/>nickname box. Perform the following steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Panel</strong></span> GameObject and create a new child with <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span>. Then rename this new child as <code class="literal">Nickname</code>. It will be our nickname box container.</li><li class="listitem">Navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Open</strong></span> | <span class="strong"><strong>Widget Wizard</strong></span>.<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">From the <span class="strong"><strong>Project</strong></span> view, navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Examples</strong></span> | <span class="strong"><strong>Atlases</strong></span> | <span class="strong"><strong>SciFi</strong></span>.</li><li class="listitem">Drag the <span class="strong"><strong>SciFi Font – Normal</strong></span> prefab into the <span class="strong"><strong>Font</strong></span> field.</li><li class="listitem">Select the <span class="strong"><strong>Input</strong></span> template.</li><li class="listitem">Set <span class="strong"><strong>Sprite (Dark)</strong></span> as the <span class="strong"><strong>Background</strong></span> parameter.</li></ol></div></li><li class="listitem">With the <span class="strong"><strong>Nickname</strong></span> GameObject selected, click on the <span class="strong"><strong>Add To</strong></span> button.</li></ol></div><p>A new widget named <span class="strong"><strong>Input</strong></span> has been added to the scene.</p><div class="section" title="Parameters"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec31"/>Parameters</h2></div></div></div><p>An <span class="strong"><strong>Input</strong></span> GameObject <a id="id92" class="indexterm"/>has been created. Let's look at its <span class="strong"><strong>Inspector</strong></span> parameters:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Input Label</strong></span>: This is the text label that is to be used for this input.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Inactive Color</strong></span>: This is the text color while the text is not selected.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Active Color</strong></span>: This is the text color while the text is being edited.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Default Text</strong></span>: This is either <span class="strong"><strong>Blank</strong></span> or with the label's default text. <span class="strong"><strong>Blank</strong></span> will delete the label's text when the <span class="strong"><strong>Input</strong></span> GameObject is selected.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Keyboard Type</strong></span>: This allows the different sets of characters to be authorized. This will also change the keyboard layout on mobile platforms.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Select on Tab</strong></span>: Drag into this field the GameObject that you want to be selected when the <span class="emphasis"><em>Tab</em></span> key is pressed while editing the input.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Auto-save Key</strong></span>: This enables the label's text to be automatically saved to the specified <code class="literal">PlayerPrefs()</code> key.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Max Characters</strong></span>: This is the number of maximum characters allowed. <code class="literal">0</code> means infinite.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Carat Character</strong></span>: This is the end of text character.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Password</strong></span>: If you activate this Boolean, the label's characters will be replaced by <span class="strong"><strong>*</strong></span> on the screen.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Auto-correct</strong></span>: This enables or disables autocorrection on mobile platforms.</li></ul></div></div><div class="section" title="Creating a nickname box"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec32"/>Creating a nickname box</h2></div></div></div><p>Let's use this <a id="id93" class="indexterm"/>text input to create a nickname box that will look like the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_12.jpg" alt="Creating a nickname box"/></div><p>Let's create the nickname box seen in the preceding screenshot. Perform the following steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Duplicate the <span class="strong"><strong>Window</strong></span> GameObject and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Rename the new duplicate as <code class="literal">Background</code>.</li><li class="listitem">Drag it into the <span class="strong"><strong>Nickname</strong></span> container GameObject.</li><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">2</code>.</li><li class="listitem">Set <span class="strong"><strong>Dimensions</strong></span> to <code class="literal">440</code> x <code class="literal">120</code>.</li></ol></div></li><li class="listitem">Select our <span class="strong"><strong>Input</strong></span> GameObject and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Reset its <span class="strong"><strong>Box Collider</strong></span> component's center to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Type in <code class="literal">Nickname</code> for the <span class="strong"><strong>Auto-save Key</strong></span> parameter.</li><li class="listitem">Enter <span class="strong"><strong>Max Characters</strong></span> as <code class="literal">25</code>.</li></ol></div></li><li class="listitem">Attach a component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Nickname</strong></span> inside the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Set the <span class="strong"><strong>Pixel Offset</strong></span> to {<code class="literal">0</code>, <code class="literal">-17</code>}.</li></ol></div></li><li class="listitem">Duplicate the <span class="strong"><strong>Label</strong></span> child GameObject from <span class="strong"><strong>Title</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag it inside the <span class="strong"><strong>Nickname</strong></span> GameObject.</li><li class="listitem">Change its text to <code class="literal">[AAFFFF]Nickname</code>.</li><li class="listitem">Drag the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Nickname</strong></span> inside the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Set the <span class="strong"><strong>Side</strong></span> parameter to <span class="strong"><strong>Top</strong></span>.</li><li class="listitem">Set <span class="strong"><strong>Pixel Offset</strong></span> to {<code class="literal">0</code>, <code class="literal">-32</code>}.</li></ol></div></li><li class="listitem">Select <a id="id94" class="indexterm"/>the <span class="strong"><strong>Background</strong></span> child GameObject from <span class="strong"><strong>Input</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">3</code>.</li><li class="listitem">Set <span class="strong"><strong>Pivot</strong></span> to <span class="strong"><strong>Center</strong></span> (middle button + middle button).</li><li class="listitem">Reset the <span class="strong"><strong>Transform</strong></span> field's position to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">100</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">230</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">255</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Label</strong></span> child GameObject from <span class="strong"><strong>Input</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">4</code>.</li><li class="listitem">Set <span class="strong"><strong>Pivot</strong></span> to <span class="strong"><strong>Center</strong></span> (middle button + middle button).</li><li class="listitem">Reset the <span class="strong"><strong>Transform</strong></span> field's position to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Change the <span class="strong"><strong>Label</strong></span> GameObject's text to <code class="literal">Enter your Name Here</code>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Nickname</strong></span> container GameObject.</li><li class="listitem">Attach a component to it and navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag-and-drop our <span class="strong"><strong>Window</strong></span> GameObject inside the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Set the <span class="strong"><strong>Side</strong></span> parameter to <span class="strong"><strong>Top</strong></span>.</li><li class="listitem">Set <span class="strong"><strong>Pixel Offset</strong></span> to {<code class="literal">0</code>, <code class="literal">-220</code>}.</li></ol></div></li></ol></div><p>Ok, we have a <span class="strong"><strong>Nickname</strong></span> box. Your <span class="strong"><strong>Hierarchy</strong></span> view should look like the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_13.jpg" alt="Creating a nickname box"/></div><p>The user can enter his nickname, up to 25 characters. If you move or change the window's dimensions, our box will move to stay at the same place.</p></div></div>
<div class="section" title="Slider"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec18"/>Slider</h1></div></div></div><p>Now let's <a id="id95" class="indexterm"/>add a <a id="id96" class="indexterm"/>volume slider for the user to move and select his/her volume level.</p><p>A slider template is available, enabling you to adjust parameters easily by sliding a thumb along a bar. Perform the following steps to create a volume slider:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Panel</strong></span> GameObject and create a new child with <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span>.</li><li class="listitem">Rename that new child as <code class="literal">Volume</code>. It will be our volume settings container.</li><li class="listitem">Navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Open</strong></span> | <span class="strong"><strong>Widget Wizard</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Slider</strong></span> template.</li><li class="listitem">Set the <span class="strong"><strong>Dark</strong></span> Sprite to <span class="strong"><strong>Empty</strong></span>.</li><li class="listitem">Set the <span class="strong"><strong>Light</strong></span> Sprite to <span class="strong"><strong>Full</strong></span>.</li><li class="listitem">Set <span class="strong"><strong>Highlight</strong></span> to <span class="strong"><strong>Thumb</strong></span>.</li></ol></div></li><li class="listitem">With the <span class="strong"><strong>Volume</strong></span> GameObject selected, click on the <span class="strong"><strong>Add To</strong></span> button.</li></ol></div><div class="section" title="Parameters"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec33"/>Parameters</h2></div></div></div><p>A slider has<a id="id97" class="indexterm"/> been created. It has 6 parameters as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Value</strong></span>: This is the slider's current value, which is between 0 and 1.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Steps</strong></span>: This is the number of steps to completely fill or empty the slider.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Direction</strong></span>: This is the slider's fill direction, either <span class="strong"><strong>Horizontal</strong></span> or <span class="strong"><strong>Vertical</strong></span>.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Foreground</strong></span>: This is the sprite used to fill the slider.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Thumb</strong></span>: This is the sprite used for the handle to change the slider's value. By leaving this as <span class="strong"><strong>null</strong></span>, a simple progress bar will be created (user cannot interact).</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Notify</strong></span>: This is the GameObject that lets you choose a method to call when there is a change in the slider's value. When a GameObject is assigned, you may choose a method to call on the value change.</li></ul></div></div><div class="section" title="Creating a volume slider"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec34"/>Creating a volume slider</h2></div></div></div><p>We can use this slider to<a id="id98" class="indexterm"/> create our volume slider, which will look like the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_14.jpg" alt="Creating a volume slider"/></div><p>Proceed with the <a id="id99" class="indexterm"/>following steps to create it:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Duplicate the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Nickname</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag the duplicate inside the <span class="strong"><strong>Volume</strong></span> container GameObject.</li><li class="listitem">Set its <span class="strong"><strong>Dimensions</strong></span> to <code class="literal">320</code> x <code class="literal">135</code>.</li></ol></div></li><li class="listitem">Attach a component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag our <span class="strong"><strong>Window</strong></span> GameObject inside the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Set the <span class="strong"><strong>Pixel Offset</strong></span> to {<code class="literal">-420</code>, <code class="literal">-90</code>}.</li></ol></div></li><li class="listitem">Duplicate the <span class="strong"><strong>Label</strong></span> GameObject from <span class="strong"><strong>Nickname</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag it inside the <span class="strong"><strong>Volume</strong></span> GameObject.</li><li class="listitem">Drag our Volume's <span class="strong"><strong>Background</strong></span> GameObject inside the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Change its text to <code class="literal">[AAFFFF]Volume</code>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Slider</strong></span> GameObject.</li><li class="listitem">Attach a component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Volume</strong></span> inside the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Set <span class="strong"><strong>Pixel Offset</strong></span> to {<code class="literal">-100</code>, <code class="literal">-23</code>}.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Slider</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">3</code>.</li><li class="listitem">In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">80</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">220</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">85</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Foreground</strong></span> GameObject from <span class="strong"><strong>Slider</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">4</code>.</li><li class="listitem">In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">95</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">190</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Thumb</strong></span> GameObject from the <span class="strong"><strong>Slider</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">5</code>.</li><li class="listitem">In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">100</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">250</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li></ol></div></li></ol></div><p>Ok, we now<a id="id100" class="indexterm"/> have a nice volume slider! Your <span class="strong"><strong>Hierarchy</strong></span> view should look like the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_15.jpg" alt="Creating a volume slider"/></div><p>We will now link it to the game's volume with a new script. Let's add some music to our main menu. First, add an audio file of your choice to your Unity project as shown in the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select our <span class="strong"><strong>Main Camera</strong></span> GameObject.</li><li class="listitem">Attach a component to it by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Audio</strong></span> | <span class="strong"><strong>AudioSource</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag a music file from the <span class="strong"><strong>Project</strong></span> view to the <span class="strong"><strong>AudioSource</strong></span> parameter's <span class="strong"><strong>Audio Clip</strong></span> field.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Slider</strong></span> GameObject from <span class="strong"><strong>Volume</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create and attach a new <code class="literal">VolumeManager.cs</code> C# script to it.</li><li class="listitem">Open this new <code class="literal">VolumeManager.cs</code> script.</li></ol></div></li></ol></div><p>In this new script, we will first need to declare and initialize the necessary variables. Add the following variable declarations and the <code class="literal">Awake()</code> method:</p><div class="informalexample"><pre class="programlisting">//We will need the Slider
UISlider slider;

void Awake ()
{
  //Get the Slider
  slider = GetComponent&lt;UISlider&gt;();
  //Set the Slider's value to last saved volume
<span class="strong"><strong>  slider.value = NGUITools.soundVolume;</strong></span>
}</pre></div><p>Here we initialized<a id="id101" class="indexterm"/> the slider's value to <code class="literal">NGUITools.soundVolume</code> because this float is persistent and will be saved across scenes—even if you exit the game.</p><p>Now let's create an <code class="literal">OnVolumeChange()</code> method<a id="id102" class="indexterm"/> that will modify our AudioListener method's volume each time the slider's value is changed:</p><div class="informalexample"><pre class="programlisting">public void OnVolumeChange ()
{
  //Change NGUI's UI Sounds volume
  NGUITools.soundVolume = UISlider.current.value;
  //Change the Game AudioListener's volume
  AudioListener.volume = UISlider.current.value;
}</pre></div><p>Ok, the method is ready. We just need to call it each time the slider's value changes. Let's use the <span class="strong"><strong>UISlider</strong></span> component's <span class="strong"><strong>Notify</strong></span> field as follows:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Slider</strong></span> GameObject from <span class="strong"><strong>Volume</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag-and-drop the <span class="strong"><strong>Slider</strong></span> GameObject from <span class="strong"><strong>Volume</strong></span> into the <span class="strong"><strong>Notify</strong></span> field.</li><li class="listitem">For the <span class="strong"><strong>Method</strong></span> field, select <code class="literal">VolumeManager.OnVolumeChange</code>.</li></ol></div></li></ol></div><p>Now, each time the slider's value is modified, our method will be called.</p><p>You can hit the Play button; the game's volume will change with the slider. The volume is saved even when you exit the game and restart!</p></div></div>
<div class="section" title="Toggle"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec19"/>Toggle</h1></div></div></div><p>Now that<a id="id103" class="indexterm"/> we<a id="id104" class="indexterm"/> have a <a id="id105" class="indexterm"/>volume slider, let's add an enable/disable sound checkbox, which will turn down the volume to 0 and hide our volume slider.</p><p>First, create a toggle widget as follows:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Panel</strong></span> GameObject and create a new child with <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span>.</li><li class="listitem">Rename that new child as <code class="literal">Sound</code>. It will be our sound toggle container.</li><li class="listitem">Navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Open</strong></span> | <span class="strong"><strong>Widget Wizard</strong></span> and <a id="id106" class="indexterm"/>perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select <span class="strong"><strong>Toggle</strong></span> as <span class="strong"><strong>Template</strong></span>.</li><li class="listitem">Select the <span class="strong"><strong>Dark</strong></span> Sprite as <span class="strong"><strong>Background</strong></span>.</li><li class="listitem">Select the <span class="strong"><strong>X</strong></span> Sprite as <span class="strong"><strong>Checkmark</strong></span>.</li><li class="listitem">With the <span class="strong"><strong>Sound</strong></span> container selected, click on the <span class="strong"><strong>Add To</strong></span> button.</li></ol></div></li></ol></div><p>A checkbox with a label has just been created as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_16.jpg" alt="Toggle"/></div><div class="section" title="Parameters"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec35"/>Parameters</h2></div></div></div><p>Select our new <span class="strong"><strong>Toggle</strong></span> GameObject. Let's <a id="id107" class="indexterm"/>look at the UIToggle's <span class="strong"><strong>Inspector</strong></span> parameters:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Group</strong></span>: This is the toggle's group. Toggles of the same group will act as radio buttons; only one of them can be checked at once.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Start State</strong></span>: This defines in which state the toggle will be at the start.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Animation</strong></span>: This is the animation that will play when the checkbox changes state.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Sprite</strong></span>: This lets us choose the widget to be used as a checkmark; we should use our <span class="strong"><strong>X</strong></span> sprite here.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Transition</strong></span>: This is either <span class="strong"><strong>Smooth</strong></span> or <span class="strong"><strong>Instant</strong></span>; uses alpha fade in / fade out.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Notify</strong></span>: This is the GameObject to notify on when toggled. When a GameObject is assigned, you may choose a public method to call on a toggle event.</li></ul></div></div><div class="section" title="Creating a sound toggle"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec36"/>Creating a sound toggle</h2></div></div></div><p>We have seen the<a id="id108" class="indexterm"/> UIToggle's parameters. Now we will create this sound toggle as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_17.jpg" alt="Creating a sound toggle"/></div><p>Let's use our <a id="id109" class="indexterm"/>recently added <span class="strong"><strong>Toggle</strong></span> GameObject to create the window shown here. Follow these steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select both the <span class="strong"><strong>Background</strong></span> and <span class="strong"><strong>Label</strong></span> GameObjects from <span class="strong"><strong>Volume</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Duplicate them.</li><li class="listitem">Drag-and-drop those new duplicates inside our <span class="strong"><strong>Sound</strong></span> container.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Sound</strong></span> and enter its UIAnchor's <span class="strong"><strong>Pixel Offset</strong></span> parameter as {<code class="literal">-420</code>,<code class="literal"> 43</code>}.</li><li class="listitem">Select the <span class="strong"><strong>Label</strong></span> GameObject from <span class="strong"><strong>Sound</strong></span> and change its text to <code class="literal">[AAFFFF]Sound</code>.</li><li class="listitem">Select the <span class="strong"><strong>Toggle</strong></span> GameObject and check the <span class="strong"><strong>Start State</strong></span> Boolean in <span class="strong"><strong>UIToggle</strong></span>.</li><li class="listitem">Attach a component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Sound</strong></span> inside the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Enter its <span class="strong"><strong>Pixel Offset</strong></span> parameter as {<code class="literal">-38</code>, <code class="literal">-20</code>}.</li></ol></div></li><li class="listitem">Add a component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Interaction</strong></span> | <span class="strong"><strong>Toggled Objects</strong></span>, and drag our <span class="strong"><strong>Volume</strong></span> container GameObject into the <span class="strong"><strong>Activate</strong></span> array.</li><li class="listitem">Select the <span class="strong"><strong>Background</strong></span> sprite GameObject from <span class="strong"><strong>Toggle</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">3</code>.</li><li class="listitem">In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">130</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">130</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Checkmark</strong></span> sprite GameObject from <span class="strong"><strong>Toggle</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">4</code>.</li><li class="listitem">In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">50</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">70</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Label</strong></span> GameObject from <span class="strong"><strong>Toggle</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">3</code>.</li><li class="listitem">Change its text to <code class="literal">[AAFFFF]Enabled</code>.</li><li class="listitem">In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">200</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">250</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li></ol></div></li></ol></div><p>Hit the Play button. We have a nice <a id="id110" class="indexterm"/>sound box with a sound toggle checkbox that hides/shows the <span class="strong"><strong>Volume</strong></span> box when needed. But it does not turn off the sound yet.</p><p>We need to make some changes to our <code class="literal">VolumeManager.cs</code> script to correct this.</p><p>First, open our <code class="literal">VolumeManager.cs</code> script. We will add a new <code class="literal">OnSoundToggle()</code> method that will be called when the toggle changes state. It will set the volume directly to 0, or to the slider's value. Add this new method to <code class="literal">VolumeManager.cs</code> as shown in the following code lines:</p><div class="informalexample"><pre class="programlisting">public void OnSoundToggle()
{
  float newVolume = 0;
  //If sound toggled ON, set new volume to slider value
  if(UIToggle.current.value)
  newVolume = slider.value;
  //Apply newVolume to volumes
  AudioListener.volume = newVolume;
  NGUITools.soundVolume = newVolume;
}</pre></div><p>Ok, the previous method will set both our volumes to <code class="literal">0</code> or the slider's value, depending on the toggle's state. Let's link it to our sound's toggle by selecting our <span class="strong"><strong>Toggle</strong></span> GameObject and dragging the <span class="strong"><strong>Slider</strong></span> GameObject from <span class="strong"><strong>Volume</strong></span> inside the <span class="strong"><strong>Notify</strong></span> field in <span class="strong"><strong>UIToggle</strong></span>, below the <span class="strong"><strong>On Value Change</strong></span> section. Then, for the <span class="strong"><strong>Method</strong></span> field, select <code class="literal">VolumeManager.OnSoundToggle</code>.</p><p>Hit the Play button. That's it. When we click on the <span class="strong"><strong>Toggle</strong></span> checkbox from <span class="strong"><strong>Volume</strong></span>, the volume reacts accordingly.</p><p>But if we turn the sound off using the toggle and stop running, when we hit Play again, the checkbox is still checked and the volume slider is displayed, but the volume is at <code class="literal">0</code>.</p><p>That's because our volume is set to 0, but the checkbox is still checked at start. Let's add a simple line of code that will set the start state to <code class="literal">false</code> if the volume is at <code class="literal">0</code>:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open our <code class="literal">VolumeManager.cs</code> script.</li><li class="listitem">Declare a new global variable named <code class="literal">public UIToggle soundToggle</code>.</li><li class="listitem">At the end of the <code class="literal">Awake()</code> method, add the following lines of code:<div class="informalexample"><pre class="programlisting">//If volume is at 0, uncheck the Sound Checkbox
if(NGUITools.soundVolume == 0) soundToggle.value = false;</pre></div></li><li class="listitem">Save the script and return to Unity.</li><li class="listitem">Select the <span class="strong"><strong>Slider</strong></span> GameObject from <span class="strong"><strong>Volume</strong></span>.</li></ol></div><p>Drag the<span class="strong"><strong>Toggle</strong></span> GameObject from <span class="strong"><strong>Volume</strong></span> in the volume manager's <span class="strong"><strong>Sound Toggle</strong></span> field.</p><p>Hit the Play button. That's it.<a id="id111" class="indexterm"/> If you disable sound using the toggle and exit the Play mode and then launch it again, the checkbox stays unchecked and the volume slider is not displayed. Perfect!</p></div></div>
<div class="section" title="Popup list"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec20"/>Popup list</h1></div></div></div><p>We will now learn <a id="id112" class="indexterm"/>how to create the popup list<a id="id113" class="indexterm"/>, see its parameters, and create a difficulty selector for our game.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select the <span class="strong"><strong>Panel</strong></span> GameObject and create a new child with <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span>.</li><li class="listitem">Rename that new child as <code class="literal">Difficulty</code>. It's our difficulty box container.</li><li class="listitem">Navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Open</strong></span> | <span class="strong"><strong>Widget Wizard</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select <span class="strong"><strong>Popup List</strong></span> as <span class="strong"><strong>Template</strong></span></li><li class="listitem">Select <span class="strong"><strong>Dark</strong></span> as <span class="strong"><strong>Foreground</strong></span>.</li><li class="listitem">Select <span class="strong"><strong>Dark</strong></span> as <span class="strong"><strong>Background</strong></span>.</li><li class="listitem">Select the <span class="strong"><strong>Highlight</strong></span> sprite as <span class="strong"><strong>Highlight</strong></span>.</li></ol></div></li><li class="listitem">With our <span class="strong"><strong>Difficulty</strong></span> GameObject selected, click on the <span class="strong"><strong>Add To</strong></span> button.</li></ol></div><div class="section" title="Parameters"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec37"/>Parameters</h2></div></div></div><p>A <span class="strong"><strong>Popup List</strong></span> GameObject <a id="id114" class="indexterm"/>has just been created. Let's look at its parameters:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Atlas</strong></span>: This is the atlas used for the popup list's sprites.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Font</strong></span>: This is the font used for the popup list's options.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Text Label</strong></span>: This is the label to update when <span class="strong"><strong>Popup List</strong></span> changes selection.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Options</strong></span>: This is the list of options that will pop up—one per line.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Default</strong></span>: This is the option selected at start.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Position</strong></span>: You may force the list of options to appear <code class="literal">Above</code> or <code class="literal">Below</code> the Popup List's button. If this parameter is set to <code class="literal">Auto</code>, NGUI will choose one of both depending on the available space.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Localized</strong></span>: This<a id="id115" class="indexterm"/> enables localization on options.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Background</strong></span>: This is the background sprite for the popup list's options container.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Highlight</strong></span>: This is the sprite for the currently hovered option.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Text Color</strong></span>: This is the options list's text color tint.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Background</strong></span>: This is the popup list's background color tint.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Highlight</strong></span>: This is the hovered option's background color tint.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Padding</strong></span>: This is the padding of the <span class="strong"><strong>X</strong></span> and <span class="strong"><strong>Y</strong></span> options.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Text Scale</strong></span>: This is the options' text scale.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Animated</strong></span>: If this is unchecked, the options' display will be instantaneous.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Notify</strong></span>: This is the GameObject that lets you choose a method to call when the selected option changes.</li></ul></div><p>Below the <code class="literal">UIPopup List</code> component, we have the usual <code class="literal">UIButton</code> and <code class="literal">UIPlay Sound</code> components that we have already seen before.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note09"/>Note</h3><p>A Popup Menu template is also available in the Widget Wizard. The only difference is that the menu does not indicate which choice you have selected; the button's label is not updated.</p></div></div></div><div class="section" title="Creating a difficulty selector"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec38"/>Creating a difficulty selector</h2></div></div></div><p>We will now use <a id="id116" class="indexterm"/>our new <span class="strong"><strong>Popup List</strong></span> GameObject to select the game's difficulty level as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_18.jpg" alt="Creating a difficulty selector"/></div><p>Let's create this difficulty selector as shown in the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select <a id="id117" class="indexterm"/>the <span class="strong"><strong>Background</strong></span> and <span class="strong"><strong>Label</strong></span> GameObjects from <span class="strong"><strong>Sound</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Duplicate them.</li><li class="listitem">Drag-and-drop them into our <span class="strong"><strong>Difficulty</strong></span> container.</li></ol></div></li><li class="listitem">Select the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Difficulty</strong></span> and enter its <span class="strong"><strong>Pixel Offset</strong></span> parameter to {<code class="literal">420</code>, <code class="literal">43</code>}.</li><li class="listitem">Select the <span class="strong"><strong>Label</strong></span> GameObject from <span class="strong"><strong>Difficulty</strong></span> and change its text to <code class="literal">[AAFFFF]Difficulty.</code></li><li class="listitem">Select our <span class="strong"><strong>Popup List</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> view and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">Popup</code>.</li><li class="listitem">Type in <code class="literal">Normal</code> and <code class="literal">Hard</code> separated by a line.</li><li class="listitem">In <span class="strong"><strong>Text Color</strong></span>, change <span class="strong"><strong>R</strong></span> to <code class="literal">190</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">250</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">255</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li><li class="listitem">In <span class="strong"><strong>Background</strong></span>, change <span class="strong"><strong>R</strong></span> to <code class="literal">70</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">250</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">255</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li><li class="listitem">In <span class="strong"><strong>Highlight</strong></span>, change <span class="strong"><strong>R</strong></span> to <code class="literal">70</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">150</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li><li class="listitem">In <span class="strong"><strong>Hover</strong></span>, change <span class="strong"><strong>R</strong></span> to <code class="literal">70</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">150</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Attach a component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Difficulty</strong></span> in the <span class="strong"><strong>Container</strong></span> field.</li><li class="listitem">Enter <span class="strong"><strong>Pixel Offset</strong></span> as {<code class="literal">-76</code>, <code class="literal">-20</code>}.</li></ol></div></li><li class="listitem">Select our popup's <span class="strong"><strong>Sprite</strong></span> GameObject and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In <span class="strong"><strong>Color Tint</strong></span>, change <span class="strong"><strong>R</strong></span> to <code class="literal">170</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">190</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">3</code>.</li></ol></div></li><li class="listitem">Select our popup's <span class="strong"><strong>Label</strong></span> GameObject and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In <span class="strong"><strong>Color Tint</strong></span>, change <span class="strong"><strong>R</strong></span> to <code class="literal">135</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">170</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</li><li class="listitem">Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">4</code>.</li></ol></div></li></ol></div><p>Ok, we now have a <span class="strong"><strong>Popup List</strong></span> GameObject that lets us select the game's difficulty level. Your <span class="strong"><strong>Hierarchy</strong></span> panel should look like the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_19.jpg" alt="Creating a difficulty selector"/></div><p>Now it's time to<a id="id118" class="indexterm"/> link it to a method that will take that difficulty into account. Do this by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open our <code class="literal">GameManager.cs</code> script.</li><li class="listitem">Declare a new enum for our difficulty levels as follows:<div class="informalexample"><pre class="programlisting">public enum Difficulties
{
  Normal,
  Hard
}</pre></div></li><li class="listitem">Declare a new <code class="literal">Difficulty</code> variable to store the current difficulty as follows:<div class="informalexample"><pre class="programlisting">public static Difficulties Difficulty = Difficulties.Normal;</pre></div></li></ol></div><p>We used a static variable because it won't be destroyed when loading the game scene. By default, the difficulty level is set to <span class="strong"><strong>Normal</strong></span>.</p><p>Now we need to add the <code class="literal">OnDifficultyChange()</code> method<a id="id119" class="indexterm"/> that will change our <code class="literal">Difficulty</code> variable when <span class="strong"><strong>Popup List</strong></span> changes state as follows:</p><div class="informalexample"><pre class="programlisting">public void OnDifficultyChange()
{
  //If Difficulty changes to Normal, set Difficulties.Normal
  if(UIPopupList.current.value == "Normal")
  Difficulty = Difficulties.Normal;
  //Otherwise, set it to Hard
  else Difficulty = Difficulties.Hard;
}</pre></div><p>Our method is ready; we need to call it when <span class="strong"><strong>Popup List</strong></span> changes state. Do so by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Save all the modified scripts and return to Unity.</li><li class="listitem">Select the <span class="strong"><strong>Popup List</strong></span> GameObjectfrom <span class="strong"><strong>Difficulty</strong></span> and perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Drag our <span class="strong"><strong>GameManager</strong></span> GameObject into the <span class="strong"><strong>Notify</strong></span> field.</li><li class="listitem">For the <span class="strong"><strong>Method</strong></span> field, select <code class="literal">GameManager.OnDifficultyChange</code>.</li></ol></div></li></ol></div><p>Now, the <span class="strong"><strong>Popup List</strong></span> GameObject will change the <code class="literal">Difficulty</code> variable according to its value. We will be <a id="id120" class="indexterm"/>able to access this static variable once we're in the game.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec21"/>Summary</h1></div></div></div><p>In this chapter, we have learned how to create and configure most of NGUI's widgets—sprites, labels, buttons, text inputs, sliders, toggles, and popup lists.</p><p>We now have a main menu with interactive elements. We also used NGUI's notification event system to change variables in code and register the user's choices.</p><p>We used <span class="strong"><strong>UIAnchors</strong></span> and <span class="strong"><strong>UIStretch</strong></span> components to properly position our widgets—we just have to move each box's background sprite to move the entire element. This is much more effective than having to move each GameObject manually! You should have a main menu that looks like the following screenshot:</p><div class="mediaobject"><img src="graphics/8667OT_02_20.jpg" alt="Summary"/></div><p>Ok, now it is time to enhance our UI experience and make this better. Let's move on to <a class="link" href="ch03.html" title="Chapter 3. Enhancing your UI">Chapter 3</a>, <span class="emphasis"><em>Enhancing your UI</em></span>.</p></div></body></html>