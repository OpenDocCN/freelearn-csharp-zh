- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: If you have worked on distributed applications, infrastructure, or client libraries,
    you’ve likely encountered numerous ways in which distributed systems can break.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你曾参与过分布式应用、基础设施或客户端库的开发，你很可能遇到过许多分布式系统可能崩溃的方式。
- en: For example, a default retry policy on your service can bring it down along
    with all its dependencies. Race conditions can lead to deadlocks under certain
    load or result in data leak between user accounts. User operations that usually
    take milliseconds can significantly slow down, while service dashboards show no
    signs of other issues. Functional problems can cause obscure and inexplicable
    effects on the user’s end.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，你服务中的默认重试策略可能会使其及其所有依赖项崩溃。在特定负载下，竞争条件可能导致死锁，或者在用户账户之间导致数据泄露。通常只需毫秒的用户操作可能会显著减慢，而服务仪表板却没有任何其他问题的迹象。功能性问题可能会在用户端产生模糊和难以解释的影响。
- en: When working with distributed applications, we rely on telemetry to assess their
    performance and functionality. We need even more telemetry to identify and mitigate
    issues.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 当与分布式应用一起工作时，我们依赖遥测来评估其性能和功能。我们需要更多的遥测来识别和缓解问题。
- en: In the past, we relied on custom logs and metrics collected using vendor-specific
    SDKs. We built custom parsers, processing pipelines, and reporting tools to make
    telemetry usable.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去，我们依赖于使用供应商特定SDK收集的自定义日志和指标。我们构建了自定义解析器、处理管道和报告工具，以便使遥测数据可用。
- en: However, as applications have become more complex, we require better and more
    user-friendly approaches to understand what is happening in our systems. Personally,
    I find it unproductive to read through megabytes of logs or visually detect anomalies
    in metrics.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，随着应用的日益复杂，我们需要更好的、更用户友好的方法来理解我们系统中正在发生的事情。我个人认为，阅读数兆字节的日志或视觉检测指标中的异常是不切实际的。
- en: Distributed tracing is a technique that allows us to trace operations throughout
    the entire system. It provides correlation and causation to our telemetry, enabling
    us to retrieve all the relevant data describing a specific operation or find all
    operations based on the context, such as a requested resource or a user identifier.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 分布式跟踪是一种允许我们在整个系统中跟踪操作的技术。它为我们提供的遥测数据提供了关联性和因果关系，使我们能够检索描述特定操作的 所有相关数据，或者根据上下文（如请求的资源或用户标识符）找到所有操作。
- en: Distributed tracing alone is not enough; we need other telemetry signals such
    as metrics, events, logs, and profiles, as well as libraries to collect and export
    them to observability backends. Fortunately, we have OpenTelemetry for this purpose.
    OpenTelemetry is a cloud-native, vendor-neutral telemetry platform available in
    multiple programming languages. It offers the core components necessary to collect
    custom data along with instrumentation libraries for common technologies. OpenTelemetry
    standardizes telemetry formats for different signals ensuring correlation, consistency,
    and structure in the collected data.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 仅分布式跟踪是不够的；我们需要其他遥测信号，如指标、事件、日志和配置文件，以及收集和将它们导出到可观察性后端库。幸运的是，我们有OpenTelemetry来完成这项任务。OpenTelemetry是一个多云原生、供应商中立的遥测平台，支持多种编程语言。它提供了收集自定义数据所需的核心组件，以及针对常见技术的仪器库。OpenTelemetry为不同的信号标准化遥测格式，确保收集数据的关联性、一致性和结构。
- en: By leveraging consistent and structured telemetry, different observability vendors
    can provide tools such as service maps, trace visualizations, error classification,
    and detection of common properties contributing to failures. This essentially
    allows us to automate the error-prone and tedious parts of performance analysis
    that humans struggle with. Monitoring and debugging techniques can now become
    standardized practices across the industry, no longer relying on tribal knowledge,
    runbooks, or outdated documentation.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 通过利用一致和结构化的遥测数据，不同的可观察性供应商可以提供诸如服务图、跟踪可视化、错误分类以及检测导致故障的常见属性等工具。这本质上使我们能够自动化性能分析中人类难以处理的易出错和繁琐的部分。监控和调试技术现在可以成为整个行业的标准化实践，不再依赖于部落知识、运行手册或过时的文档。
- en: '*Modern Distributed Tracing in .NET* explores all aspects of telemetry collection
    in .NET applications, with a focus on distributed tracing and performance analysis.
    It begins with an overview of the observability challenges and solutions and then
    delves into the built-in monitoring capabilities offered by modern .NET applications.
    These capabilities become even more impressive when used alongside OpenTelemetry.
    While shared OpenTelemetry instrumentation libraries can take us a long way, sometimes
    we still need to write custom instrumentations. The book shows how to collect
    custom traces, metrics, and logs while considering performance impact and verbosity.
    It also covers the instrumentation of common cloud patterns such as network calls,
    messaging, and database interactions. Finally, it discusses the organizational
    and technical aspects of implementing and evolving observability in existing systems.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '*.NET中的现代分布式跟踪*探讨了.NET应用程序中遥测收集的所有方面，重点关注分布式跟踪和性能分析。它从可观测性挑战和解决方案的概述开始，然后深入探讨现代.NET应用程序提供的内置监控功能。当与OpenTelemetry一起使用时，这些功能变得更加引人注目。虽然共享的OpenTelemetry配置库可以带我们走很长的路，但有时我们仍然需要编写自定义配置。本书展示了如何在考虑性能影响和冗余的情况下收集自定义跟踪、指标和日志。它还涵盖了常见云模式（如网络调用、消息传递和数据库交互）的配置。最后，它讨论了在现有系统中实施和演进可观测性的组织和技术方面。'
- en: The observability field is still relatively new and rapidly evolving, which
    means there are often multiple solutions available for almost any problem. This
    book aims to explain fundamental observability concepts and provides several possible
    solutions to common problems while highlighting the associated trade-offs. It
    also helps you gain practical skills to implement and leverage tracing and observability.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 可观测性领域仍然相对较新且发展迅速，这意味着几乎任何问题都有多种解决方案。本书旨在解释基本可观测性概念，并提供几种可能的解决方案来解决常见问题，同时突出相关的权衡。它还帮助您获得实际技能，以实现和利用跟踪和可观测性。
- en: I hope you find the provided examples useful and use them as a playground for
    experimentation. I encourage you to explore new and creative approaches to making
    distributed systems more observable and to share your findings with the community!
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望您觉得提供的示例有用，并将它们用作实验的游乐场。我鼓励您探索新的和创造性的方法来使分布式系统更具可观测性，并将您的发现与社区分享！
- en: Who this book is for
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书面向对象
- en: This book is for software developers, architects, and system operators running
    .NET services who want to use modern observability tools and standards. It offers
    a holistic approach to performance analysis and end-to-end debugging. Software
    testers and support engineers will also find this book useful. Basic knowledge
    of the C# programming language and the .NET platform is assumed for grasping the
    examples of manual instrumentation, but is not necessary.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 本书面向使用现代可观测性工具和标准的.NET服务的软件开发人员、架构师和系统操作员。它提供了一种全面的方法来分析性能和端到端调试。软件测试人员和支持工程师也会发现这本书很有用。假设读者对C#编程语言和.NET平台有基本了解，以便理解手动配置的示例，但这不是必需的。
- en: What this book covers
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖内容
- en: '[*Chapter 1*](B19423_01.xhtml#_idTextAnchor016), *Observability Needs of Modern
    Applications*, provides an overview of common monitoring techniques and introduces
    distributed tracing. It covers OpenTelemetry – a vendor-agnostic telemetry platform
    and shows how it addresses observability challenges of distributed applications
    with correlated telemetry signals.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第一章*](B19423_01.xhtml#_idTextAnchor016)，*现代应用程序的可观测性需求*，概述了常见的监控技术并介绍了分布式跟踪。它涵盖了OpenTelemetry——一个供应商无关的遥测平台，并展示了它是如何通过关联的遥测信号解决分布式应用程序的可观测性挑战的。'
- en: '[*Chapter 2*](B19423_02.xhtml#_idTextAnchor038), *Native Monitoring in .NET*,
    offers an overview of the diagnostic capabilities provided by .NET out-of-the-box.
    These capabilities include structured and correlated logs and counters along with
    ad-hoc monitoring with the dotnet-monitor tool. We’ll also instrument the first
    application with OpenTelemetry and get hands-on experience with distributed tracing.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第二章*](B19423_02.xhtml#_idTextAnchor038)，*.NET中的本地监控*，概述了.NET提供的开箱即用的诊断功能。这些功能包括结构化和关联的日志和计数器，以及使用dotnet-monitor工具的临时监控。我们还将使用OpenTelemetry对第一个应用程序进行配置，并亲身体验分布式跟踪。'
- en: '[*Chapter 3*](B19423_03.xhtml#_idTextAnchor052), *The .NET Observability Ecosystem*,
    explores a broader set of tracing instrumentations and environments. We’ll learn
    how to find and evaluate instrumentation libraries, get traces from infrastructure
    such as Dapr, and finally instrument serverless applications using AWS Lambda
    and Azure Functions as examples.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第3章*](B19423_03.xhtml#_idTextAnchor052), *.NET可观察性生态系统*，探讨了更广泛的跟踪仪器化和环境。我们将学习如何查找和评估仪器库，从Dapr等基础设施获取跟踪，并最终以AWS
    Lambda和Azure Functions为例，展示如何对无服务器应用程序进行仪器化。'
- en: '[*Chapter 4*](B19423_04.xhtml#_idTextAnchor068), *Low-Level Performance Analysis
    with Diagnostic Tools*, provides an introduction into lower-level .NET diagnostics
    and performance analysis. We’ll see how to collect and analyze runtime counters
    and performance traces to get more observability within the process when distributed
    tracing does not provide enough input.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第4章*](B19423_04.xhtml#_idTextAnchor068), *使用诊断工具进行低级性能分析*，介绍了更低级别的.NET诊断和性能分析。我们将了解如何收集和分析运行时计数器和性能跟踪，以便在分布式跟踪提供不足的情况下，在进程内获得更多的可观察性。'
- en: '[*Chapter 5*](B19423_05.xhtml#_idTextAnchor083), *Configuration and Control
    Plane*, provides an overview of OpenTelemetry configuration and customization.
    We’ll explore different sampling strategies and learn how to enrich and filter
    spans or customize metrics collection. Finally, we’ll introduce OpenTelemetry
    Collector – an agent that can take care of many telemetry post-processing tasks.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第5章*](B19423_05.xhtml#_idTextAnchor083), *配置和控制平面*，概述了OpenTelemetry的配置和定制。我们将探索不同的采样策略，并学习如何丰富和过滤跨度或自定义指标收集。最后，我们将介绍OpenTelemetry
    Collector——一个可以处理许多遥测后处理任务的代理。'
- en: '[*Chapter 6*](B19423_06.xhtml#_idTextAnchor098), *Tracing Your Code*, dives
    into tracing instrumentation with .NET tracing APIs or OpenTelemetry shim. Here,
    we’ll learn about the `Activity` and `ActivitySource` classes used to collect
    spans, show how to leverage ambient context propagation within the process, and
    record events and exceptions. We’ll also cover integration testing for your instrumentation
    code.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第6章*](B19423_06.xhtml#_idTextAnchor098), *跟踪您的代码*，深入探讨了使用.NET跟踪API或OpenTelemetry
    shim的跟踪仪器化。在这里，我们将了解用于收集跨度、展示如何在进程内利用环境上下文传播以及记录事件和异常的`Activity`和`ActivitySource`类。我们还将涵盖对仪器化代码的集成测试。'
- en: '[*Chapter 7*](B19423_07.xhtml#_idTextAnchor115), *Adding Custom Metrics*, delves
    into the modern .NET metrics API. You’ll learn about available instruments - counters,
    gauges, and histograms used to aggregate measurements in different ways and get
    hands-on experience implementing and using metrics to monitor system health or
    to investigate performance issues.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第7章*](B19423_07.xhtml#_idTextAnchor115), *添加自定义指标*，深入探讨了现代.NET指标API。您将了解可用的仪器——计数器、仪表和直方图，它们用于以不同的方式聚合测量值，并获得实际操作经验，以实现和使用指标来监控系统健康或调查性能问题。'
- en: '[*Chapter 8*](B19423_08.xhtml#_idTextAnchor131), *Writing Structured and Correlated
    Logs*, provides an overview of logging in .NET focusing on `Microsoft.Extension.Logging`.
    We’ll learn to write structured and queryable logs efficiently and collect them
    with OpenTelemetry. We’ll also look into managing logging costs using OpenTelemetry
    Collector.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第8章*](B19423_08.xhtml#_idTextAnchor131), *编写结构和关联日志*，概述了.NET中的日志记录，重点关注`Microsoft.Extension.Logging`。我们将学习如何高效地编写结构和可查询的日志，并使用OpenTelemetry收集它们。我们还将探讨如何使用OpenTelemetry
    Collector来管理日志成本。'
- en: '[*Chapter 9*](B19423_09.xhtml#_idTextAnchor148), *Best Practices*, provides
    guidance on choosing most suitable telemetry signals depending on application
    needs and scenarios, and shows how to control telemetry costs with minimal impact
    on observability. It also introduces OpenTelemetry semantic conventions – telemetry
    collection recipes for common patterns and technologies.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第9章*](B19423_09.xhtml#_idTextAnchor148), *最佳实践*，提供了根据应用需求和场景选择最合适的遥测信号的建议，并展示了如何以最小的可观察性影响来控制遥测成本。它还介绍了OpenTelemetry语义约定——针对常见模式和技术的遥测收集配方。'
- en: '[*Chapter 10*](B19423_10.xhtml#_idTextAnchor161), *Tracing Network Calls*,
    explores network call instrumentation using gRPC as an example. We’ll learn how
    to instrument simple request-response calls following RPC semantic conventions
    and propagate context. We’ll also cover challenges and possible solutions when
    instrumenting streaming calls.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第10章*](B19423_10.xhtml#_idTextAnchor161), *跟踪网络调用*，以gRPC为例探讨了网络调用仪器。我们将学习如何根据RPC语义约定对简单的请求-响应调用进行仪器化，并传播上下文。我们还将涵盖在仪器化流式调用时的挑战和可能的解决方案。'
- en: '[*Chapter 11*](B19423_11.xhtml#_idTextAnchor174), *Instrumenting Messaging
    Scenarios*, explores instrumentation for asynchronous processing scenarios. We’ll
    learn how to trace messages end-to-end, instrument batching scenarios, and introduce
    messaging-specific metrics allowing to detect scaling and performance issues.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第11章*](B19423_11.xhtml#_idTextAnchor174)，*仪表化消息场景*，探讨了异步处理场景的仪表化。我们将学习如何端到端跟踪消息，仪表化批处理场景，并引入特定于消息的指标，以便检测扩展和性能问题。'
- en: '[*Chapter 12*](B19423_12.xhtml#_idTextAnchor192), *Instrumenting Database Calls*,
    explores database and cache instrumentation with tracing and metrics. We’ll also
    cover forwarding external metrics from a Redis instance into our observability
    backend and use the collected telemetry for performance analysis and caching strategy
    optimization.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第12章*](B19423_12.xhtml#_idTextAnchor192)，*仪表化数据库调用*，探讨了使用跟踪和指标进行数据库和缓存仪表化。我们还将介绍将外部指标从Redis实例转发到我们的可观测性后端，并使用收集到的遥测数据进行性能分析和缓存策略优化。'
- en: '[*Chapter 13*](B19423_13.xhtml#_idTextAnchor206), *Driving Change*, covers
    organizational and planning aspects related to observability improvements. We’ll
    discuss the cost of low observability and suggest several ways to measure them.
    We’ll come up with an onboarding plan, talk about common pitfalls, and see how
    to benefit from better observability in daily development tasks.'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第13章*](B19423_13.xhtml#_idTextAnchor206)，*推动变革*，涵盖了与可观测性改进相关的组织和规划方面。我们将讨论低可观测性的成本，并提出几种衡量方法。我们将制定一个入职计划，讨论常见陷阱，并了解如何从更好的可观测性中受益于日常开发任务。'
- en: '[*Chapter 14*](B19423_14.xhtml#_idTextAnchor220), *Creating Your Own Conventions*,
    provides suggestions on how to collect telemetry consistently across the system
    starting with a unified OpenTelemetry configuration. We’ll also learn to define
    custom semantic conventions and implement them in shared code, making it easy
    to follow them.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第14章*](B19423_14.xhtml#_idTextAnchor220)，*创建您的约定*，提供了从统一的OpenTelemetry配置开始，在整个系统中一致收集遥测数据的建议。我们还将学习如何定义自定义语义约定并在共享代码中实现它们，使其易于遵循。'
- en: '[*Chapter 15*](B19423_15.xhtml#_idTextAnchor233), *Instrumenting Brownfield
    Applications*, discusses challenges with instrumenting newer part of the system
    in presence of legacy services. We’ll suggest solutions that can minimize changes
    to legacy components and learn to leverage legacy correlation propagation formats,
    implement minimalistic pass-through context propagation, and forward telemetry
    from legacy services to the new backend.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第15章*](B19423_15.xhtml#_idTextAnchor233)，*对遗留应用程序进行仪表化*，讨论了在存在遗留服务的情况下对系统新部分进行仪表化的挑战。我们将提出可以最小化对遗留组件更改的解决方案，并学习利用遗留相关性传播格式，实现最小化传递上下文传播，并将遥测数据从遗留服务转发到新的后端。'
- en: To get the most out of this book
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为了充分利用这本书
- en: The examples in this book were developed with .NET 7.0\. Most of them are cross-platform
    and run in Docker Linux containers or with the `dotnet` CLI tools. Examples were
    tested on Windows OS with OpenTelemetry version 1.4.0\. They should work with
    future versions of .NET and OpenTelemetry libraries. We use pinned versions of
    OpenTelemetry Collector, Prometheus, Jaeger, and other external images in the
    `docker-compose` files.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的示例是用.NET 7.0开发的。大多数示例都是跨平台的，可以在Docker Linux容器中或使用`dotnet` CLI工具运行。示例在Windows操作系统上使用OpenTelemetry版本1.4.0进行了测试。它们应该与.NET和OpenTelemetry库的未来版本兼容。我们在`docker-compose`文件中使用OpenTelemetry
    Collector、Prometheus、Jaeger和其他外部图像的固定版本。
- en: In [*Chapter 3*](B19423_03.xhtml#_idTextAnchor052), *The .NET Observability
    Ecosystem*, we will experiment with AWS and Azure client libraries and serverless
    environments. AWS and/or Azure subscriptions are recommended, but not essential.
    We will stay within the free tier on AWS and within promotional credits amount
    available on Azure.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第3章*](B19423_03.xhtml#_idTextAnchor052)，*《.NET可观测性生态系统》*中，我们将尝试使用AWS和Azure客户端库和无服务器环境。建议拥有AWS和/或Azure订阅，但并非必需。我们将在AWS的免费层内和Azure的促销信用额度内进行操作。
- en: '| **Software/hardware covered in** **the book** | **Operating** **system requirements**
    |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| **本书中涵盖的软件/硬件** | **操作系统要求** |'
- en: '| --- | --- |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| .NET SDK 7.0 | Windows, macOS, or Linux |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| .NET SDK 7.0 | Windows、macOS或Linux |'
- en: '| OpenTelemetry for .NET version 1.4.0 | Windows, macOS, or Linux |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
  zh: '| OpenTelemetry for .NET版本1.4.0 | Windows、macOS或Linux |'
- en: '| Docker and `docker-compose` tools | Windows, macOS, or Linux |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| Docker和`docker-compose`工具 | Windows、macOS或Linux |'
- en: '| .NET Framework 4.6.2 (used in an example of a legacy system in [*Chapter
    15*](B19423_15.xhtml#_idTextAnchor233)) | Windows |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| .NET Framework 4.6.2（在[*第15章*](B19423_15.xhtml#_idTextAnchor233)中用于一个遗留系统的示例）
    | Windows |'
- en: '| PerfView tool (in [*Chapter 4*](B19423_04.xhtml#_idTextAnchor068)) | Windows,
    cross-platform alternatives are available |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| PerfView工具（在[*第4章*](B19423_04.xhtml#_idTextAnchor068)中） | Windows，有可用的跨平台替代方案
    |'
- en: While OpenTelemetry guarantees API compatibility in future versions, the semantic
    conventions mentioned in this book are not stable. So spans, metrics, events,
    and attributes may be renamed or changed in a different way. Please refer to OpenTelemetry
    specification repo ([https://github.com/open-telemetry/opentelemetry-specification](https://github.com/open-telemetry/opentelemetry-specification))
    to find what’s new in the semantic conventions area.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然OpenTelemetry保证未来版本中的API兼容性，但本书中提到的语义约定并不稳定。因此，跨度、指标、事件和属性可能会被重命名或以不同的方式更改。请参考OpenTelemetry规范仓库（[https://github.com/open-telemetry/opentelemetry-specification](https://github.com/open-telemetry/opentelemetry-specification)）以了解语义约定领域的最新动态。
- en: '**If you are using the digital version of this book, we advise you to type
    the code yourself or access the code from the book’s GitHub repository (a link
    is available in the next section). Doing so will help you avoid any potential
    errors related to the copying and pasting** **of code.**'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果您正在使用本书的数字版，我们建议您亲自输入代码或从本书的GitHub仓库（下一节中提供链接）获取代码。这样做将帮助您避免与代码的复制和粘贴相关的任何潜在错误。**
    ****'
- en: Download the example code files
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载示例代码文件
- en: You can download the example code files for this book from GitHub at [https://github.com/PacktPublishing/Modern-Distributed-Tracing-in-.NET](https://github.com/PacktPublishing/Modern-Distributed-Tracing-in-.NET).
    If there’s an update to the code, it will be updated in the GitHub repository.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从GitHub下载本书的示例代码文件[https://github.com/PacktPublishing/Modern-Distributed-Tracing-in-.NET](https://github.com/PacktPublishing/Modern-Distributed-Tracing-in-.NET)。如果代码有更新，它将在GitHub仓库中更新。
- en: We also have other code bundles from our rich catalog of books and videos available
    at [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/).
    Check them out!
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了来自我们丰富的书籍和视频目录中的其他代码包，可在[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)找到。查看它们吧！
- en: Code in Action
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 代码在行动
- en: The Code in Action videos for this book can be viewed at [https://packt.link/O10rj](https://packt.link/O10rj).
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 本书“代码在行动”视频可在[https://packt.link/O10rj](https://packt.link/O10rj)查看。
- en: Download the color images
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载彩色图像
- en: 'We also provide a PDF file that has color images of the screenshots and diagrams
    used in this book. You can download it here: [https://packt.link/BBBNm](https://packt.link/BBBNm).'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了一份包含本书中使用的截图和图表彩色图像的PDF文件。您可以从这里下载：[https://packt.link/BBBNm](https://packt.link/BBBNm)。
- en: Conventions used
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了多种文本约定。
- en: '`Code in text`: Indicates code words in text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: “Another option is to pass the `traceparent` value
    in W3C Trace Context format to the `StartActivity` method as a string.”'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '`Code in text`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟URL、用户输入和Twitter用户名。以下是一个示例：“另一种选择是将W3C
    Trace Context格式的`traceparent`值作为字符串传递给`StartActivity`方法。”'
- en: 'A block of code is set as follows:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块设置如下：
- en: '[PRE0]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：
- en: '[PRE1]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出都按以下方式编写：
- en: '[PRE2]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**Bold:** Indicates a new term, an important word, or words that you see onscreen.
    For instance, words in menus or dialog boxes appear in **bold**. Here is an example:
    “Let’s open the trace file with PerfView and then click on the **Thread** **Time**
    option.”'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**：表示新术语、重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词以粗体显示。以下是一个示例：“让我们用PerfView打开跟踪文件，然后单击**线程**
    **时间**选项。”'
- en: Tips or important notes
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 小贴士或重要提示
- en: Appear like this.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来像这样。
- en: Get in touch
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 联系我们
- en: Feedback from our readers is always welcome.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 我们始终欢迎读者的反馈。
- en: '**General feedback**: If you have questions about any aspect of this book,
    email us at [customercare@packtpub.com](mailto:customercare@packtpub.com) and
    mention the book title in the subject of your message.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '**一般反馈**：如果您对本书的任何方面有疑问，请通过电子邮件发送至[customercare@packtpub.com](mailto:customercare@packtpub.com)，并在邮件主题中提及书名。'
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)
    and fill in the form.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '**勘误**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将不胜感激，如果您能向我们报告。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表格。'
- en: '**Piracy**: If you come across any illegal copies of our works in any form
    on the internet, we would be grateful if you would provide us with the location
    address or website name. Please contact us at [copyright@packt.com](mailto:copyright@packt.com)
    with a link to the material.'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '**盗版**：如果您在互联网上以任何形式发现我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过[版权@packt.com](mailto:copyright@packt.com)与我们联系，并提供材料的链接。'
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in and you are interested in either writing or contributing to
    a book, please visit [authors.packtpub.com](http://authors.packtpub.com).'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。'
- en: Share Your Thoughts
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 分享您的想法
- en: Once you’ve read *Modern Distributed Tracing in .NET*, we’d love to hear your
    thoughts! Scan the QR code below to go straight to the Amazon review page for
    this book and share your feedback.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 读完*Modern Distributed Tracing in .NET*后，我们非常乐意听到您的想法！扫描下面的二维码直接进入这本书的亚马逊评论页面并分享您的反馈。
- en: '![ Share Your Thoughts](img/B19423_QR.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![分享您的想法](img/B19423_QR.jpg)'
- en: https://packt.link/r/1-837-63613-3
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: https://packt.link/r/1-837-63613-3
- en: Your review is important to us and the tech community and will help us make
    sure we’re delivering excellent quality content.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 您的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。
- en: Download a free PDF copy of this book
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载本书的免费PDF副本
- en: Thanks for purchasing this book!
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢您购买此书！
- en: Do you like to read on the go but are unable to carry your print books everywhere?
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 您喜欢随时随地阅读，但无法携带您的印刷书籍吗？
- en: Is your eBook purchase not compatible with the device of your choice?
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 您的电子书购买是否与您选择的设备不兼容？
- en: Don’t worry, now with every Packt book you get a DRM-free PDF version of that
    book at no cost.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 别担心，现在每购买一本Packt书籍，您都可以免费获得该书的DRM免费PDF版本。
- en: Read anywhere, any place, on any device. Search, copy, and paste code from your
    favorite technical books directly into your application.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。
- en: The perks don’t stop there, you can get exclusive access to discounts, newsletters,
    and great free content in your inbox daily
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 优惠不止于此，您还可以获得独家折扣、时事通讯和每日免费内容的邮箱访问权限。
- en: 'Follow these simple steps to get the benefits:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下简单步骤获取福利：
- en: Scan the QR code or visit the link below
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扫描下面的二维码或访问以下链接。
- en: '![Download a free PDF copy of this book](img/B19423_QR_Free_PDF.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![下载本书的免费PDF副本](img/B19423_QR_Free_PDF.jpg)'
- en: '[https://packt.link/free-ebook/9781837636136](https://packt.link/free-ebook/9781837636136)'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://packt.link/free-ebook/9781837636136](https://packt.link/free-ebook/9781837636136)'
- en: Submit your proof of purchase
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提交您的购买证明
- en: That’s it! We’ll send your free PDF and other benefits to your email directly
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 就这些！我们将直接将免费PDF和其他福利发送到您的邮箱。
- en: 'Part 1: Introducing Distributed Tracing'
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1部分：介绍分布式追踪
- en: In this part, we’ll introduce the core concepts of distributed tracing and demonstrate
    how it makes running cloud applications easier. We’ll auto-instrument our first
    service and explore the .NET approach to observability, built around OpenTelemetry.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在这部分，我们将介绍分布式追踪的核心概念，并展示它是如何使运行云应用变得更容易的。我们将自动为我们的第一个服务进行配置，并探索围绕OpenTelemetry构建的.NET可观察性方法。
- en: 'This part has the following chapters:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 本部分包含以下章节：
- en: '[*Chapter 1*](B19423_01.xhtml#_idTextAnchor016), *Observability Needs of Modern
    Applications*'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第1章*](B19423_01.xhtml#_idTextAnchor016)，*现代应用的可观察性需求*'
- en: '[*Chapter 2*](B19423_02.xhtml#_idTextAnchor038), *Native Monitoring in .NET*'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第2章*](B19423_02.xhtml#_idTextAnchor038)，*.NET中的原生监控*'
- en: '[*Chapter 3*](B19423_03.xhtml#_idTextAnchor052), *The .NET Observability Ecosystem*'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第3章*](B19423_03.xhtml#_idTextAnchor052)，*.NET可观察性生态系统*'
- en: '[*Chapter 4*](B19423_04.xhtml#_idTextAnchor068), *Low-Level Performance Analysis
    with Diagnostic Tools*'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第4章*](B19423_04.xhtml#_idTextAnchor068)，*使用诊断工具进行低级性能分析*'
