- en: '13'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '13'
- en: Full-Screen Effects with Post-Processing
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 带后处理的全屏效果
- en: So far, we have created different objects to alter the visuals of our scene,
    such as meshes, particles, and lights. We can tweak the settings of those objects
    here and there to improve our scene quality, but you will always feel that something
    is missing when comparing it with modern game scenes, and that is post-processing
    effects. In this chapter, you will learn how to apply effects to the final rendered
    frame, which will alter the look of the overall scene.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经创建了不同的对象来改变场景的视觉效果，例如网格、粒子或灯光。我们可以调整这些对象的设置来提高场景质量，但当你将其与现代游戏场景进行比较时，你总会觉得缺少了什么，那就是后处理效果。在本章中，你将学习如何将效果应用于最终渲染帧，这将改变整个场景的外观。
- en: 'In this chapter, we will examine the following image effect concepts:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将检查以下图像效果概念：
- en: Using post-processing
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用后处理
- en: Using advanced effects
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用高级效果
- en: Let’s start by seeing how we can apply post-processing to our scene.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们先看看我们如何将后处理应用于我们的场景。
- en: Using post-processing
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用后处理
- en: '**Post-processing** is a Unity feature that allows us to apply a stack of effects
    (several effects) one on top of the other that will alter the final look of an
    image. Each one will affect the finished frame, changing the colors in it based
    on different criteria. In *Figure 13.1*, you can see a scene before and after
    applying image effects. You will notice a dramatic difference, but that scene
    doesn’t have any change in its objects, including lights, particles, or meshes.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '**后处理** 是一个 Unity 功能，允许我们将一系列效果（多个效果）一层层地叠加，这将改变图像的最终外观。每一个都会影响最终帧，根据不同的标准改变其中的颜色。在
    *图 13.1* 中，你可以看到应用图像效果前后的场景。你会注意到一个巨大的差异，但那个场景中的对象没有任何变化，包括灯光、粒子或网格。'
- en: 'The effects applied are based on a per-pixel level. Have a look at both scenes
    here:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 应用的是基于像素级别的效果。在这里看看这两个场景：
- en: '![](img/B18585_13_01.png)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18585_13_01.png)'
- en: 'Figure 13.1: A scene without image effects (left) and the same scene with effects
    (right)'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.1：没有图像效果的场景（左）和添加了效果的相同场景（右）
- en: Something to take into account is that the previous post-processing solution,
    **Post Processing Stack version 2** (**PPv2**) won’t work on the **Universal Render
    Pipeline** (**URP**); it has its own post-processing implementation, so we will
    see that one in this chapter. They are very similar, so even if you are using
    PPv2, you can still learn something from this chapter.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 需要注意的是，之前的后处理解决方案，**后处理堆栈版本 2**（**PPv2**）在 **通用渲染管线**（**URP**）上不会工作；它有自己的后处理实现，所以我们将在本章中看到这一点。它们非常相似，所以即使你正在使用
    PPv2，你仍然可以从本章中学到一些东西。
- en: 'In this section, we will discuss the following URP Post-Processing concepts:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将讨论以下 URP 后处理概念：
- en: Setting up a profile
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置配置文件
- en: Using basic effects
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用基本效果
- en: Let’s start preparing our scene to apply effects.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始准备场景以应用效果。
- en: Setting up a profile
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置配置文件
- en: 'To start applying effects, we need to create a **profile**, which is an asset
    containing all the effects and settings we want to apply. This is a separate asset
    for the same reason the Material is: because we can share the same post-processing
    profile across different scenes and parts of scenes. When we refer to parts of
    the scenes, we are referring to volumes or areas of the game that have certain
    effects applied. We can define a global area that applies effects regardless of
    the position of the player, or we can apply different effects—for example, when
    we are outdoors or indoors.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始应用效果，我们需要创建一个 **配置文件**，这是一个包含我们想要应用的所有效果和设置的资产。这是因为与材质相同的原因：因为我们可以在不同的场景和场景的部分之间共享相同的后处理配置文件。当我们提到场景的部分时，我们指的是应用了某些效果的游戏中的区域或体积。我们可以定义一个全局区域，无论玩家的位置如何都应用效果，或者我们可以应用不同的效果——例如，当我们处于户外或室内时。
- en: 'In this case, we will use a global volume, one that we will use to apply a
    profile with our first effect, by doing the following:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个情况下，我们将使用一个全局体积，我们将用它来应用我们的第一个效果，方法如下：
- en: Create a new empty GameObject (**GameObject | Create Empty**) named `PP Volume`
    (Post-Processing Volume).
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的空 GameObject（**GameObject | 创建空对象**）命名为 `PP Volume`（后处理体积）。
- en: Add the **Volume** component to it and make sure the **Mode** is set to **Global**.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向其中添加 **体积** 组件，并确保 **模式** 设置为 **全局**。
- en: 'Click on the **New** button at the right of the **Profile** setting, which
    will generate a new `Profile` asset with the same name as the GameObject that
    was selected when clicking the button (**PPVolume** **Profile**). Move that asset
    to its own folder, which is recommended for asset organization purposes. The process
    is illustrated in the following figure:'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**配置文件**设置右侧的**新建**按钮，这将生成一个与在点击按钮时选择的 GameObject 同名的新的**配置文件**资产（**PPVolume**
    **配置文件**）。将该资产移动到其自己的文件夹中，这有助于资产组织。过程如图所示：
- en: '![](img/B18585_13_02.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18585_13_02.png)'
- en: 'Figure 13.2: Volume component'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.2：体积组件
- en: To test if the volume is working, let’s add an effect. Click the **Add Override**
    button and select the **Post-Processing | Chromatic Aberration** option.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了测试体积是否工作，让我们添加一个效果。点击**添加覆盖**按钮，并选择**后期处理 | 色差**选项。
- en: 'Check the **Intensity** checkbox in the **Chromatic Aberration** effect and
    set the intensity to `0.25`, as illustrated in the following figure:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**色差**效果的**强度**选项卡中勾选**强度**复选框，并将强度设置为`0.25`，如图所示：
- en: '![](img/B18585_13_03.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18585_13_03.png)'
- en: 'Figure 13.3: Chromatic aberration effect'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.3：色差效果
- en: 'Now, you will see an aberration effect being applied in the corners of the
    image. Remember to look at this in the **Scene** panel; we will make the effect
    applied to the Game view in the next step. This is illustrated in the following
    figure:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你将看到图像的角落应用了畸变效果。请记住在**场景**面板中查看这一点；我们将在下一步中将效果应用于游戏视图。这如图所示：
- en: '![](img/B18585_13_04.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18585_13_04.png)'
- en: 'Figure 13.4: Chromatic aberration applied to the scene'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.4：场景中应用了色差
- en: 'Now, if you hit **Play** and see the game from the view of the Main Camera,
    you will see that the effect is not being applied, and that’s because we need
    to check the **Post Processing** checkbox in the **Rendering** section of our
    Main Camera, as illustrated in the following figure:'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，如果你按下**播放**并从主相机的视角观看游戏，你会发现效果没有被应用，这是因为我们需要检查主相机**渲染**部分的**后期处理**复选框，如图所示：
- en: '![](img/B18585_13_05.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18585_13_05.png)'
- en: 'Figure 13.5: Enabling post-processing'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.5：启用后期处理
- en: So, we have created a global volume, which will apply the effects specified
    as overrides to the entire scene regardless of the player’s position.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们创建了一个全局体积，无论玩家的位置如何，都会将指定的覆盖效果应用于整个场景。
- en: Now that we have prepared our scene to use post-processing, we can start experimenting
    with different effects. Let’s start with the simplest ones in the next section.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经为使用后期处理准备好了场景，我们可以开始尝试不同的效果。让我们从下一节中最简单的效果开始。
- en: Using basic effects
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用基本效果
- en: Now that we have post-processing in our scene, the only thing needed is to start
    adding effects and set them up until we have the desired look and feel. In order
    to do that, let’s explore several simple effects included in the system.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经在场景中应用了后期处理，唯一需要做的就是开始添加效果并设置它们，直到我们得到期望的外观和感觉。为了做到这一点，让我们探索系统包含的几个简单效果。
- en: 'Let’s start with **Chromatic Aberration**, the one we just used, which, as
    with most image effects, tries to replicate a particular real-life effect. All
    game-engine rendering systems use a simple mathematical approximation of how eye
    vision really works, and because of that, we don’t have some effects that occur
    in the human eyes or camera lenses. A real camera lens works by bending light
    rays to point them toward the camera sensors, but that bending is not perfect
    in some lenses (sometimes intentionally), and, hence, you can see a distortion,
    as shown in the following screenshot:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从**色差**开始，这是我们刚刚使用的，就像大多数图像效果一样，它试图复制特定的现实生活效果。所有游戏引擎渲染系统都使用一个简单的数学近似来描述眼睛视觉的实际工作方式，正因为如此，我们无法看到在人类眼睛或相机镜头中发生的一些效果。真实的相机镜头通过弯曲光线使其指向相机传感器，但这种弯曲在某些镜头中并不完美（有时是故意的），因此你可以看到如以下截图所示的扭曲：
- en: '![](img/B18585_13_06.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18585_13_06.png)'
- en: 'Figure 13.6: Image without chromatic aberration (left) and the same image with
    chromatic aberration (right)'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.6：无色差图像（左侧）和带有色差的同图像（右侧）
- en: 'This effect will be one of several that we will add to generate a cinematic
    feeling in our game, simulating the usage of real-life cameras. Of course, this
    effect won’t look nice in every kind of game; maybe a simplistic cartoonish style
    won’t benefit from this one, but you never know: art is subjective, so it’s a
    matter of trial and error.'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 这个效果将是我们将添加的几个效果之一，以在我们的游戏中营造出电影感，模拟现实生活中的相机使用。当然，这种效果并不适合所有类型的游戏；也许简单的卡通风格不会从这种效果中受益，但你永远不知道：艺术是主观的，所以这是一个试错的过程。
- en: Also, we have exaggerated the intensity a little bit in the previous example
    to make the effect more noticeable, but I would recommend using an intensity of
    `0.25` in this scenario. It is usually recommended to be gentle with the intensity
    of the effects; it’s tempting to have intense effects, but as you will be adding
    lots of them, after a while, the image will be bloated, with too many distortions.
    So, try to add several subtle effects instead of a few intense ones. But, again,
    this depends on the target style you are looking for; there are no absolute truths
    here (but common sense still applies).
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们在之前的例子中稍微夸张了强度，以便使效果更明显，但我建议在这个场景中使用`0.25`的强度。通常建议对效果的强度要温和；虽然强烈的视觉效果很有吸引力，但因为你将添加很多效果，所以过一段时间后，图像会显得膨胀，扭曲过多。所以，尝试添加几个微妙的效果，而不是几个强烈的效果。但，再次强调，这取决于你寻找的目标风格；这里没有绝对真理（但常识仍然适用）。
- en: Finally, before moving on to discuss other effects, if you are used to using
    other kinds of post-processing effects frameworks, you will notice that this version
    of **Chromatic Aberration** has fewer settings, and that’s because the URP version
    seeks performance, so it will be as simple as possible.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在讨论其他效果之前，如果你习惯于使用其他类型的后处理效果框架，你会注意到这个版本的**色差**设置较少，这是因为URP版本追求性能，所以它会尽可能简单。
- en: The next effect we are going to discuss is **Vignette**. This is another camera-lens
    imperfection where the image intensity is lost at the edges of the lens. This
    can be applied not only to simulate older cameras but also to draw the attention
    of the user toward the center of the camera—for example, during cinematics.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我们接下来要讨论的效果是**晕影**。这是另一种相机镜头的缺陷，其中图像强度在镜头边缘丢失。这不仅可以用来自定义旧相机，还可以将用户的注意力引向相机的中心——例如，在电影场景中。
- en: 'Also, if you are developing **virtual reality** (**VR**) applications, this
    can be used to reduce motion sickness by reducing the peripheral vision of the
    player. In the following screenshot, you can see an example of vignetting on an
    old camera:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，如果你正在开发**虚拟现实**（**VR**）应用程序，这可以用来通过减少玩家的周边视野来减少运动病。在以下截图中，你可以看到一个旧相机上的晕影示例：
- en: '![Image result for vignetting](img/B18585_13_07.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![Image result for vignetting](img/B18585_13_07.png)'
- en: 'Figure 13.7: Photo taken with an old camera, with vignetting over the edges'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.7：使用旧相机拍摄的照片，边缘有晕影
- en: 'Just to try it, let’s apply some vignetting to our scene by doing the following:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 只是为了尝试一下，让我们通过以下步骤对我们的场景应用一些晕影效果：
- en: Select the `PP Volume` GameObject.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择`PP Volume`游戏对象。
- en: Add the **Postprocessing | Vignette** effect by clicking on the **Add Override**
    button.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击**添加覆盖**按钮添加**后处理 | 晕影**效果。
- en: Check the **Intensity** checkbox and set it to `0.3`, increasing the effect.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**强度**复选框，并将其设置为`0.3`，以增强效果。
- en: 'Check the **Smoothness** checkbox and set it to `0.5`; this will increase the
    spread of the effect. You can see the result in the following figure:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**平滑度**复选框，并将其设置为`0.5`；这将增加效果的扩散。你可以在以下图中看到结果：
- en: '![](img/B18585_13_08.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18585_13_08.png)'
- en: 'Figure 13.8: Vignette effect'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.8：晕影效果
- en: If you want, you can change the color by checking the **Color** checkbox and
    setting it to another value; in our case, black is okay to reinforce the rainy-day
    environment. Here, I invite you to check other properties, such as **Center**
    and **Rounded**. You can create nice effects just by playing with the values.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想，可以通过勾选**颜色**复选框并设置另一个值来更改颜色；在我们的例子中，黑色可以很好地强化雨天环境。在这里，我邀请你检查其他属性，例如**中心**和**圆角**。你只需调整数值就能创造出很好的效果。
- en: 'Another effect we are going to see is **Motion Blur**, and again, it simulates
    the way the cameras work. A real camera has an exposure time: the time it needs
    to capture photons into an image. When an object moves fast enough, the same object
    is placed in different positions during that brief exposure time, so it will appear
    blurred. In the following screenshot, you can see the effect applied to our scene.
    In the case of this image, we are rotating the camera up and down fast, with the
    following result:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我们接下来要看到的效果是**运动模糊**，同样地，它模拟了相机的工作方式。真实的相机有一个曝光时间：它需要的时间来捕捉光子到图像中。当一个物体移动得足够快时，在短暂的曝光时间内，同一个物体会放置在不同的位置，因此它看起来会模糊。在下面的屏幕截图中，您可以看到应用在我们场景中的效果。在这种情况下，我们正在快速上下旋转相机，以下结果是：
- en: '![](img/B18585_13_09.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18585_13_09.png)'
- en: 'Figure 13.9: Motion Blur being applied to our scene'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.9：运动模糊应用到我们的场景
- en: One thing to consider is that this blur will only be applied to the camera movement
    and not the movement of the objects (still camera, moving objects), due to the
    fact that this URP doesn’t support motion vectors yet.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个需要考虑的事情是，这种模糊只会应用于相机移动，而不是物体的移动（静止相机，移动物体），因为目前这个URP还不支持运动矢量。
- en: 'In order to use this effect, follow these next steps:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使用这个效果，请按照以下步骤操作：
- en: Add the **Post-processing | Motion Blur** override with the **Add override**
    button.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用**添加覆盖**按钮添加**后处理 | 运动模糊**覆盖。
- en: Check the **Intensity** checkbox and set it to `0.25`.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查**强度**复选框并将其设置为`0.25`。
- en: 'Rotate the camera while looking at the Game view (not the Scene view). You
    can click and drag the **X** property of the **Transform** of the camera (not
    the value—the **X** label), as illustrated in the following screenshot:'
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在查看游戏视图（而不是场景视图）时旋转相机。您可以通过点击并拖动相机的**变换**的**X**属性（不是值——**X**标签），如图下所示：
- en: '![](img/B18585_13_10.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18585_13_10.png)'
- en: 'Figure 13.10: Changing rotation'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.10：改变旋转
- en: As you can see, this effect cannot be seen in the Scene view, as well as other
    effects, so take that into account before concluding the effect is not working.
    Unity does this because it would be very annoying to have that effect while working
    in the scene.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，这种效果在场景视图中是不可见的，以及其他一些效果，所以在得出效果不起作用之前请考虑这一点。Unity这样做是因为在场景中工作时有这种效果会非常烦人。
- en: 'Finally, we are going to briefly discuss two final simple effects, **Film Grain**
    and **White Balance**. The first is pretty simple: add it, set the intensity to
    `1`, and you will get the famous grain effect from the old movies. You can set
    the **Type** with a different number of sizes to make it more subtle or harsh.
    **White Balance** allows you to change the color temperature, making colors warmer
    or cooler depending on how you configure it. In our case, we are working in a
    cold, dark scene, so you can add it and set the temperature to `-20` to adjust
    the appearance just slightly and improve the look and feel in this kind of scene.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将简要讨论两个最终简单的效果，**胶片颗粒**和**白平衡**。第一个很简单：添加它，将强度设置为`1`，您将得到老电影中著名的颗粒效果。您可以通过不同的数字设置**类型**来使其更微妙或更粗糙。**白平衡**允许您更改颜色温度，根据您的配置使颜色更暖或更冷。在我们的案例中，我们正在一个寒冷、昏暗的场景中工作，因此您可以添加它并将温度设置为`-20`来稍微调整外观并改善这种场景的外观和感觉。
- en: Now that we have seen a few of the simple effects, let’s check out a few of
    the remaining ones that are affected by some advanced rendering features.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经看到了一些简单效果，让我们来看看受一些高级渲染功能影响的剩余效果。
- en: Using advanced effects
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用高级效果
- en: The effects we are going to see in this section don’t differ a lot from the
    previous ones; they are just a little bit trickier and need some background to
    properly use them. So, let’s dive into them!
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 本节中我们将看到的效果与之前的效果没有太大区别；它们只是稍微复杂一些，需要一些背景知识才能正确使用。所以，让我们深入探讨它们吧！
- en: 'In this section, we are going to see the following advanced effect concepts:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将看到以下高级效果概念：
- en: High Dynamic Range (HDR) and Depth Map
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高动态范围（HDR）和深度图
- en: Applying advanced effects
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用高级效果
- en: Let’s start by discussing some requirements for some of these effects to work
    properly.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们先讨论一些效果正常工作的要求。
- en: High Dynamic Range (HDR) and Depth Map
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 高动态范围（HDR）和深度图
- en: Some effects not only work with the rendered image but also need additional
    data. We can first discuss the **Depth Map**, a concept we discussed in the previous
    chapter.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 一些效果不仅与渲染图像一起工作，还需要额外的数据。我们首先讨论**深度图**，这是一个我们在上一章讨论过的概念。
- en: 'To recap, a Depth Map is an image rendered from the point of view of the camera,
    but instead of generating a final image of the scene, it renders the scene objects’
    depth, rendering the objects in shades of gray. The darker the color, the farthest
    from the camera the pixel is, and vice versa. In the following screenshot, you
    can see an example of a Depth Map:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 总结一下，深度图是从摄像机的视角渲染的图像，但它不是生成场景的最终图像，而是渲染场景对象的深度，以灰度渲染对象。颜色越深，像素离摄像机越远，反之亦然。在以下屏幕截图中，您可以看到一个深度图的示例：
- en: '![Image result for depth buffer](img/B18585_13_11.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![深度缓冲区图像结果](img/B18585_13_11.png)'
- en: 'Figure 13.11: Depth map of a few primitive shapes'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.11：几个原始形状的深度图
- en: We will see some effects such as **Depth of Field**, which will blur some parts
    of the image based on the distance of the camera, but it can be used for several
    purposes on custom effects (not in the base URP package).
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将看到一些效果，例如**景深**，它将根据摄像机的距离模糊图像的某些部分，但可以在自定义效果中用于多种目的（不在基础 URP 包中）。
- en: Another concept to discuss here that will alter how colors are treated and,
    hence, how some effects work is **High Dynamic Range** (**HDR**). In older hardware,
    color channels (Red, Green, and Blue) were encoded in a 0 to 1 range, 0 being
    no intensity and 1 being full intensity (per channel), so all lighting and color
    calculations were done in that range. That seems okay but doesn’t reflect how
    light actually works. You can see full white (all channels set to 1) in a piece
    of paper being lit by sunlight, and you can see full white when you look directly
    at a light bulb, but even if both light and paper are of the same color, the latter
    will, firstly, irritate the eye after a while, and secondly, will have some overglow
    due to an excess of light. The problem here is that the maximum value (1) is not
    enough to represent the most intense color, so if you have a high-intensity light
    and another with even more intensity, both will generate the same color (1 in
    each channel) because calculations cannot go further than 1\. So, that’s why **HDR
    Rendering** was created.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里讨论的另一个概念是**高动态范围 (HDR**)，它将改变颜色的处理方式，从而影响某些效果的工作方式。在旧硬件中，颜色通道（红色、绿色和蓝色）被编码在
    0 到 1 的范围内，0 表示没有强度，1 表示全强度（每个通道），因此所有光照和颜色计算都在这个范围内进行。这看起来似乎没问题，但并不反映光的实际工作方式。您可以在一张被阳光照亮的纸张上看到全白（所有通道设置为
    1），您可以直接看到灯泡的全白，但即使光和纸张颜色相同，后者在一段时间后首先会刺激眼睛，其次，由于过多的光线，会有一些溢光。这里的问题是最大值（1）不足以表示最强烈的颜色，所以如果您有一个高强度的光源和另一个强度更高的光源，两者都会生成相同的颜色（每个通道的
    1），因为计算不能超过 1。这就是为什么创建了**HDR 渲染**。
- en: HDR is a way for colors to exceed the 0 to 1 range, so lighting and effects
    that work based on color intensity have better accuracy in this mode. It is the
    same idea as the new televisions models’ HDR feature, although in this case, Unity
    will do the calculations in HDR but the final image will still work using the
    previous color space (0 to 1, or **Low Dynamic Range (LDR**), so don’t confuse
    Unity’s **HDR Rendering** with the **Display’s HDR**.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: HDR 是一种让颜色超出 0 到 1 范围的方法，因此基于颜色强度工作的光照和效果在此模式下具有更好的准确性。这与新型电视机的 HDR 功能类似，尽管在这种情况下，Unity
    将在 HDR 下进行计算，但最终图像仍然使用之前颜色空间（0 到 1，或**低动态范围 (LDR**)）进行工作，所以不要混淆 Unity 的**HDR 渲染**与**显示器的
    HDR**。
- en: 'To convert the HDR calculations back to LDR, Unity (and also TVs) uses a concept
    called **tonemapping**. You can see an example of an LDR-rendered scene and tonemapping
    being used in an HDR scene in the following screenshots:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 要将 HDR 计算转换回 LDR，Unity（以及电视）使用了一个称为**色调映射**的概念。您可以在以下屏幕截图中看到 LDR 渲染场景和色调映射在
    HDR 场景中的应用示例：
- en: '![](img/B18585_13_12.png)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B18585_13_12.png)'
- en: 'Figure 13.12: An LDR-rendered scene (left) and an HDR scene with corrected
    overbrights using tonemapping (right)'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.12：使用色调映射校正过亮度的 LDR 渲染场景（左）和 HDR 场景（右）
- en: Tonemapping is a way to bring colors outside the 0-1 range back in to it. It
    basically uses curves to determine how each color channel should be mapped back.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 色调映射是一种将超出 0-1 范围的颜色带回到该范围的方法。它基本上使用曲线来确定每个颜色通道应该如何映射回去。
- en: You can clearly see this in the typical darker-to-lighter scene transition,
    such as when you exit a building without windows to go out into a bright day.
    For a time, you will see everything lighter until everything goes back to normal.
    The idea here is that calculations are not different when you are inside or outside
    the building; a white wall inside the building will have a color near the 1 intensity,
    while the same white wall outside will have a higher value (due to sunlight).
    The difference is that tonemapping will take the higher-than-1 color back to 1
    when you are outside the building, and maybe it will increase the lighting of
    the wall inside if all the scene is darker, depending on how you set it. That
    feature is called **auto-exposure**.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在典型的暗到亮的场景转换中清楚地看到这一点，例如当你从一个没有窗户的建筑中出来进入明亮的一天时。一段时间内，你会看到一切变亮，直到一切恢复正常。这里的想法是，当你身处室内或室外时，计算并没有不同；建筑内的白色墙壁将具有接近1的强度，而同一白色墙壁在室外将具有更高的值（由于阳光）。区别在于，当你身处室外时，色调映射会将高于1的颜色调整回1，如果整个场景较暗，它可能会根据你的设置增加墙壁的照明。这个功能被称为**自动曝光**。
- en: 'Even if HDR is enabled by default, let’s just see how we can check that, by
    doing the following:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 即使HDR默认启用，让我们看看如何检查它，通过以下操作：
- en: Go to **Edit** | **Project Settings**.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往**编辑** | **项目设置**。
- en: Click on the **Graphics** section in the left panel.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击左侧面板中的**图形**部分。
- en: Click the asset referenced under the **Scriptable Render Pipeline Settings**
    property.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**可脚本渲染管线设置**属性下引用的资产。
- en: Click on the highlighted asset in the **Project** panel. Ensure that this panel
    is visible before clicking the property in the **Graphics** settings. Alternatively,
    you can double-click the asset reference in the **Graphics** settings to select
    it.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**项目**面板中突出显示的资产。确保在点击**图形**设置中的属性之前，此面板是可见的。或者，你可以在**图形**设置中双击资产引用来选择它。
- en: 'Under the **Quality** section, ensure that **HDR** is checked, as illustrated
    in the following screenshot:'
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**质量**部分，确保已勾选**HDR**，如图下截图所示：
- en: '![](img/B18585_13_13.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B18585_13_13.png)'
- en: 'Figure 13.13: Enabling HDR'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.13：启用HDR
- en: Ensure that the **HDR** property of the **Camera** component in the **Main Camera**
    GameObject is set to **Use settings from Render Pipeline** to ensure the change
    in the previous steps is respected.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保**主相机**游戏对象中**相机**组件的**HDR**属性设置为**使用渲染管线设置**，以确保上一步骤中的更改得到尊重。
- en: Of course, the fact that HDR is togglable means that there are scenarios where
    you don’t want to use it. As you can guess, not all hardware supports HDR, and
    using it incurs a performance overhead, so take that into account. Luckily, most
    effects work with both HDR and LDR color ranges, so if you have HDR enabled but
    the user device doesn’t support it, you won’t get any errors, just different results
    depending on the effect, such as brighter or darker images, or exaggerated effects,
    as we will see in the next section, *Applying advanced effects*.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，HDR可切换的事实意味着存在一些你不想使用HDR的场景。正如你所猜想的，并非所有硬件都支持HDR，使用HDR会带来性能开销，因此请考虑这一点。幸运的是，大多数效果都支持HDR和LDR色彩范围，所以如果你启用了HDR但用户设备不支持，你不会收到任何错误，只是效果根据不同的效果会有不同的结果，例如图像更亮或更暗，或者效果被夸大，正如我们将在下一节*应用高级效果*中看到的。
- en: Now that we are sure we have HDR enabled, let’s explore some advanced effects
    that use this and Depth Mapping.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们确信我们已启用HDR，让我们探索一些使用此功能和深度映射的高级效果。
- en: Applying advanced effects
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 应用高级效果
- en: Let’s see certain effects that use the previously described techniques, starting
    with the commonly used **Bloom**. This effect emulates the overglow that happens
    around a heavily lit object on a camera lens or even the human eye. In *Figure
    13.14*, you can see the difference between the default version of our scene and
    an exaggerated Bloom version.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看使用之前描述的技术的一些特定效果，从常用的**辉光**开始。此效果模拟了相机镜头或甚至人眼周围被强烈光照的物体上的溢光。在*图13.14*中，你可以看到我们场景的默认版本和夸张的辉光版本的差异。
- en: 'You can observe how the effect is only applied to the brightest areas of our
    scene. Have a look at both effects here:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以观察到效果仅应用于场景中最亮的部分。看看这里两种效果：
- en: '![](img/B18585_13_14.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B18585_13_14.png)'
- en: 'Figure 13.14: The default scene (left) and the same scene with a high-intensity
    Bloom (right)'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.14：默认场景（左）和具有高亮度辉光的同一场景（右）
- en: 'This effect is actually very common and simple, but I considered it advanced
    because the results are drastically affected by HDR. This effect relies on calculating
    the intensity of each pixel’s color to detect areas where it can be applied. In
    LDR, we can have a white object that isn’t overbright, but due to the limitations
    in this color range, Bloom may cause an overglow over it. In HDR, due to its increased
    color range, we can detect if an object is white or if the object is maybe light
    blue but just overbright, generating the illusion that it is white (such as objects
    near a high-intensity lamp). In *Figure 13.15* screenshot, you can see the difference
    between our scene with HDR and without it. You will notice that the LDR version
    will have overglow in areas that are not necessarily overbright. The difference
    may be very subtle, but pay attention to the little details to note the difference.
    And remember, I exaggerated the effect here. Have a look at both scenes here:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 这个效果实际上非常常见且简单，但我认为它是高级的，因为结果会受到HDR的极大影响。这个效果依赖于计算每个像素颜色的强度来检测可以应用溢光的位置。在LDR中，我们可以有一个不是过亮的白色物体，但由于这个颜色范围的限制，模糊效果可能会在其上产生溢光。在HDR中，由于其增加的颜色范围，我们可以检测一个物体是否是白色，或者物体可能是浅蓝色但只是过亮，从而产生它是白色的错觉（例如靠近高亮度灯的物体）。在*图13.15*的屏幕截图中，你可以看到带有HDR和无HDR的我们场景之间的差异。你会注意到LDR版本将在不一定过亮的区域产生溢光。差异可能非常微妙，但请注意细节以注意差异。并且记住，我在这里夸大了效果。请看看这两个场景：
- en: '![](img/B18585_13_15.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B18585_13_15.png)'
- en: 'Figure 13.15: Bloom in an LDR scene (left) and Bloom in an HDR scene (right).
    Notice that the Bloom settings were changed to try to approximate them as much
    as possible'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.15：LDR场景中的模糊效果（左）和HDR场景中的模糊效果（右）。注意，模糊设置被更改以尽可能接近它们
- en: 'For now, let’s stick with the HDR version of the scene. In order to enable
    Bloom, do the following:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们继续使用场景的HDR版本。为了启用模糊效果，请按照以下步骤操作：
- en: Add the **Bloom** override to the profile, as usual.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照惯例，将**模糊**覆盖添加到配置文件中。
- en: Enable the **Intensity** checkbox by checking it, and set the value to `0.2`.
    This controls how much overglow will be applied.
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过勾选**强度**复选框来启用它，并将值设置为`0.2`。这控制了将应用多少溢光。
- en: Enable **Threshold** and set it to `0.7`. This value indicates the minimum intensity
    a color needs to have to be considered for overglow. In our case, our scene is
    somewhat dark, so we need to reduce this value in the Bloom effect settings to
    have more pixels included. As usual, those values need to be adjusted to your
    specific scenario.
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用**阈值**并将其设置为`0.7`。这个值表示颜色需要达到的最小强度，才能被认为是溢光。在我们的例子中，我们的场景有些昏暗，因此我们需要在模糊效果设置中降低这个值，以便包含更多的像素。像往常一样，这些值需要根据你的具体情况进行调整。
- en: 'You will notice that the difference is very subtle, but again, remember that
    you will have several effects, so all those little differences will sum up. You
    can see both effects in the following screenshots:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你会注意到差异非常微妙，但再次提醒，你将拥有几个效果，所以所有这些细微的差异都会累积起来。你可以在下面的屏幕截图中看到这两个效果：
- en: '![](img/B18585_13_16.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B18585_13_16.png)'
- en: 'Figure 13.16: Bloom effect'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.16：模糊效果
- en: As usual, it is recommended that you fiddle with the other values. Some interesting
    settings I recommend you test are the **Dirt Texture** and **Dirt Intensity**
    values, which will simulate dirty lenses in the overglow area.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 按照惯例，建议你调整其他值。我推荐你测试的一些有趣的设置是**污渍纹理**和**污渍强度**值，这些值将模拟在溢光区域中的脏镜头。
- en: Now, let’s move to another common effect, **Depth of Field**. This one relies
    on the depth map we discussed earlier. It is not that obvious to the naked eye,
    but when you focus on an object within your sight, the surrounding objects became
    blurred because they are out of focus. We can use this to focus the attention
    of the player in key moments of the gameplay. This effect will sample the Depth
    Map to see if the object is within the focus range; if it is, no blur will be
    applied, and vice versa.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们转向另一个常见的效果，**景深**。这个效果依赖于我们之前讨论过的深度图。这对肉眼来说并不明显，但当你专注于视线内的一个物体时，周围的物体因为不在焦点上而变得模糊。我们可以使用这个效果来在游戏的关键时刻吸引玩家的注意力。这个效果将采样深度图以查看物体是否在焦点范围内；如果是，则不应用模糊，反之亦然。
- en: 'In order to use it, do the following:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使用它，请按照以下步骤操作：
- en: 'This effect depends on the camera positioning of your game. To test it, in
    this case, we will put the camera near a column to try to focus on that specific
    object, as illustrated in the following screenshot:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这种效果取决于你游戏中摄像机的位置。为了测试它，在这种情况下，我们将摄像机放置在柱子附近，试图聚焦于该特定对象，如下面的截图所示：
- en: '![](img/B18585_13_17.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18585_13_17.png)'
- en: 'Figure 13.17: Camera positioning'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.17：摄像机位置
- en: Add the **Depth of Field** override.
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加**景深**覆盖。
- en: 'Enable and set the **Mode** setting to **Gaussian**: the cheapest one in terms
    of performance to use.'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用并设置**模式**设置为**高斯**：在性能方面最经济的选项。
- en: In my case, I have set **Start** to `10` and **End** to `20`, which will make
    the effect start at a distance behind the target object. The **End** setting will
    control how the blur’s intensity will increase, reaching its maximum at a distance
    of `20` meters. Remember to tweak these values to your case.
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在我的情况下，我将**开始**设置为`10`，将**结束**设置为`20`，这将使效果在目标物体后方一定距离处开始。**结束**设置将控制模糊强度如何增加，在`20`米处达到最大。请记住根据你的情况调整这些值。
- en: 'If you want to exaggerate the effect a little bit, set **Max Radius** to `1.5`.
    The result is shown in the following screenshot:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你想要稍微夸张一下效果，将**最大半径**设置为`1.5`。结果如下面的截图所示：
- en: '![](img/B18585_13_18.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18585_13_18.png)'
- en: 'Figure 13.18: Exaggerated effect'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.18：夸张效果
- en: Something to consider here is that our game will have a top-down perspective,
    and unlike the first-person camera where you can see distant objects, here, we
    will have objects near enough to not notice the effect, so we can limit the use
    of this effect just for cutscenes in our scenario.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 这里需要考虑的是，我们的游戏将采用俯视视角，与可以看见远处物体的第一人称摄像机不同，在这里，我们将有足够近的物体，以至于不会注意到效果，因此我们可以限制在场景中仅用于过场动画的效果使用。
- en: 'Now, most of the remaining effects are different ways to alter the actual colors
    of the scene. The idea is that the real color sometimes doesn’t give you the exact
    look and feel you are seeking. Maybe you need the dark zones to be darker to reinforce
    the sensation of a horror ambiance, or maybe you want to do the opposite: increase
    the dark areas to represent an open scene. Maybe you want to tint the highlights
    a little bit to get a neon effect if you are creating a futuristic game, or perhaps
    you want a sepia effect temporarily to do a flashback. We have a myriad of ways
    to do this, and in this case, I will use a simple but powerful effect called **Shadow,
    Midtones, Highlights**.'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，大多数剩余的效果都是改变场景实际颜色的不同方式。想法是，真实的颜色有时并不能给你你寻求的确切的外观和感觉。也许你需要将暗区调得更暗，以增强恐怖氛围的感觉，或者也许你想要相反：增加暗区以表示一个开阔的场景。也许你想要给高光稍微着色以获得霓虹效果，如果你正在制作未来派游戏，或者也许你想要暂时使用棕褐色效果来进行闪回。我们有无数种方法来做这件事，在这种情况下，我将使用一个简单但强大的效果，称为**阴影，中间调，高光**。
- en: 'This effect will apply different color corrections to—well —Shadows, Midtones,
    and Highlights, meaning that we can modify darker, lighter, and medium areas separately.
    Let’s try it by doing the following:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 此效果将对阴影、中间调和高光应用不同的颜色校正，这意味着我们可以分别修改较暗、较亮和中等区域。让我们通过以下步骤尝试一下：
- en: Add the **Shadow** **Midtones** **Highlights** override.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加**阴影** **中间调** **高光**覆盖。
- en: Let’s start doing some testing. Check the three **Shadows**, **Midtones**, and
    **Highlights** checkboxes.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们开始进行一些测试。检查三个**阴影**、**中间调**和**高光**复选框。
- en: 'Move the **Shadow** and **Midtones** sliders all the way to the left and the
    one for **Highlights** to the right. This will reduce the intensity of Shadows
    and Midtones and increase the intensity of Highlights. We did this so that you
    can see the areas that **Highlights** will alter, based on their intensity. You
    can do the same with the rest of the sliders to check the other two areas. You
    can see the result in the following screenshot:'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**阴影**和**中间调**滑块全部移到最左边，将**高光**滑块移到最右边。这将减少阴影和中间调的强度，并增加高光的强度。我们这样做是为了让你可以看到高光将根据其强度改变的区域。你可以用其余的滑块以同样的方式检查其他两个区域。你可以在下面的截图中看到结果：
- en: '![](img/B18585_13_19.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18585_13_19.png)'
- en: 'Figure 13.19: Isolating highlights'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.19：隔离高光
- en: 'Also, you can test moving the white circle at the center of the colored circle
    to apply a little bit of tinting to those areas. Reduce the intensity of the highlights
    by moving the slider a little bit to the left to make the tinting more noticeable.
    You can see the result in the following screenshot:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此外，你也可以测试移动彩色圆圈中心的白色圆圈，为这些区域应用一点色调。通过将滑块稍微向左移动来减少高光的强度，使色调更加明显。你可以在下面的屏幕截图中看到结果：
- en: '![](img/B18585_13_20.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B18585_13_20.png)'
- en: 'Figure 13.20: Tinting highlights'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.20：色调高光
- en: 'By doing this, you can explore how those controls work, but of course, those
    extreme values are useful for some edge cases. In our scene, the settings you
    can see in the following screenshot worked best for me. As always, it is better
    to use subtler values to not distort too much the original result, as illustrated
    here:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过这样做，你可以探索这些控制如何工作，但当然，这些极端值对于某些边缘情况是有用的。在我们的场景中，以下屏幕截图中你可以看到的设置对我来说效果最好。一如既往，使用更微妙的值来不过度扭曲原始结果会更好，正如这里所示：
- en: '![](img/B18585_13_21.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B18585_13_21.png)'
- en: 'Figure 13.21: Subtle changes'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.21：细微的变化
- en: 'You can see the before-and-after effects in the following screenshots:'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以在以下屏幕截图中看到前后效果：
- en: '![](img/B18585_13_22.png)Figure 13.22: Before-and-after effects'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B18585_13_22.png)图13.22：前后效果'
- en: You have other simpler options such as **Split Toning**, which does something
    similar but just with **Shadows** and **Highlights**, or **Color Curves**, which
    give you advanced control of how each color channel of the scene will be mapped,
    but the idea is the same—that is, to alter the actual color of the resulting scene
    to apply a specific color ambiance to your scene. If you remember the movie series
    *The Matrix* when the characters were in the Matrix, everything had subtle green
    tinting, and while outside it, the tinting was blue.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 你还有其他更简单的选项，例如**分割色调**，它做的是类似的事情，但只是针对**阴影**和**高光**，或者**颜色曲线**，它让你可以更高级地控制场景中每个颜色通道的映射方式，但理念是相同的——也就是说，改变最终场景的实际颜色，为你的场景应用特定的色彩氛围。如果你记得电影系列《黑客帝国》，当角色处于矩阵中时，一切都有细微的绿色色调，而在外面时，色调是蓝色。
- en: Remember that the results of using HDR and not using it regarding these effects
    are important, so it is better to decide sooner rather than later whether to use
    HDR, excluding certain target platforms (which may not be important to your target
    audience), or not to use it (using LDR) and have less control over your scene
    lighting levels.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，使用HDR和不使用HDR对这些效果的结果很重要，因此最好是尽早而不是事后决定是否使用HDR，排除某些目标平台（这些可能对你的目标受众并不重要），或者不使用HDR（使用LDR）并减少对场景照明级别的控制。
- en: Also, take into account that maybe you will need to tweak some objects’ settings,
    such as light intensities and material properties, because sometimes we use post-processing
    to fix graphics errors that may be caused by wrongly set objects, and that’s not
    okay. For example, increasing the `Ambient Lighting` in our scene will drastically
    change the output of the effects, and we can use that to increase the overall
    brightness instead of using an effect if we find the scene too dark.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，考虑到你可能需要调整一些对象的设置，例如光照强度和材质属性，因为有时我们使用后期处理来修复由设置错误的对象引起的图形错误，这是不合适的。例如，增加场景中的`环境光照`将极大地改变效果输出，我们可以利用这一点来提高整体亮度，而不是使用效果，如果我们发现场景太暗的话。
- en: This has covered the main image effects to use. Remember that the idea is not
    to use every single one but to use the ones that you feel are contributing to
    your scene; they are not free in terms of performance (although not that resource
    intensive), so use them wisely. Also, you can check for the already created profiles
    to apply them to your game and see how little changes can make a huge difference.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 这已经涵盖了要使用的主要图像效果。记住，理念不是使用每一个，而是使用你认为有助于你场景的效果；它们在性能方面并不是免费的（尽管不是那么资源密集），所以要明智地使用。此外，你可以检查已经创建的配置文件，将它们应用到你的游戏中，看看微小的变化可以带来巨大的差异。
- en: Summary
  id: totrans-147
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we discussed basic and advanced full-screen effects to apply
    in our scene, making it look more realistic in terms of camera-lens effects and
    more stylish in terms of color distortions. We also discussed the internals of
    HDR and Depth Maps and how they are important when using those effects, which
    can immediately increase your game’s graphic quality with minimal effort.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们讨论了在场景中应用的基本和高级全屏效果，使其在相机镜头效果方面看起来更加逼真，在色彩扭曲方面更加时尚。我们还讨论了HDR和深度图的内幕以及它们在使用这些效果时的重要性，这些效果可以以最小的努力立即提高你游戏的图形质量。
- en: Now that we have covered most of the common graphics found in Unity systems,
    let’s start looking at how to increase the immersion of our scene by using sounds.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 既然我们已经涵盖了Unity系统中大部分常见的图形，让我们开始探讨如何通过使用声音来增加场景的沉浸感。
