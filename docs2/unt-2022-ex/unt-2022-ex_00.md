# 前言

你好！Unity 游戏引擎为有志于将创意愿景变为现实的游戏开发者提供了一个激动人心的机会。本书旨在为那些致力于制作完成游戏、遵循最佳实践并希望商业发行游戏的人而设计。在完成这一全面的旅程结束时，你不仅将获得 Unity 2022 的知识和技能，还将获得成就感，知道你离实现创建和发布游戏的目标又近了一步。

本书旨在指导你有效地构建游戏项目，涵盖从代码组织到资产管理以及场景层次结构的一切。我深入探讨了基本的游戏设计原则，包括构建核心游戏循环、定义玩家动作、实现机制以及建立胜负条件。

在章节中，我们解决新手游戏开发者可能遇到的重要挑战，例如游戏设计概念上的差距、对 Unity 功能和 Scripting API 的熟悉程度，以及 C#编程的熟练度。Unity 构建游戏元素的独特方法是我们方法的核心，强调由 C#脚本驱动的基于组件的方法。

本书采用实践方法学习，我将引导你通过一系列项目。我们将从一个简单的 2D 对象收集游戏开始，逐渐过渡到沉浸式的 3D**第一人称射击**（**FPS**）和**混合现实**（**MR**）体验。每一章都建立在上一章的基础上，引入新的概念和技术，并提供实际示例、动手练习以及偶尔的挑战或额外活动。这样，你不仅会理解理论，还会获得宝贵的实践技能。

此外，我还关注了传统学习材料中常被忽视的必要方面，例如为商业化发行游戏、项目持续性和版本控制，以及在整个生命周期内支持游戏。你还将深入了解**Unity 游戏服务**（**UGS**）以及将游戏作为服务运营的过程。这种全面的方法确保你为游戏开发的各个阶段都做好了充分的准备。

在本书结束时，你将拥有 Unity 2022 的坚实基础知识，并能够以可维护和可扩展的方式构建项目以商业发行游戏。因此，让我们共同踏上这段旅程，释放你在 Unity 充满活力的生态系统中的游戏开发者潜力！

# 本书面向对象

本书面向有志成为游戏开发者的人士，特别是那些致力于在 Unity 中制作完整游戏、遵循编码最佳实践并渴望商业游戏发布的人。理想的读者已经安装了 Unity，并具备对 Unity 编辑器界面进行导航的基础知识。他们还拥有良好的文件组织技能、初级的艺术技能，以及通过 C#脚本实现基本功能的一些经验。

# 本书涵盖内容

*第一章*, *Unity 2022 基础知识*，提供了学习如何使用 Unity 2022 轻松创建游戏的入门步骤！本章涵盖了安装 Unity Hub 和探索可用的模板以启动游戏项目。它还涵盖了如何使用包管理器提供额外的功能，同时保持项目足迹小并避免不想要的工具。本章最后通过开始一个新的游戏项目，了解 GameObject，并创建一个简单的 2D 角色来结束。

*第二章*, *创建 2D 收集游戏*，深入探讨了通过添加额外的 GameObject 来扩展场景，为收集游戏的开始部分创建 2D 俯视角设置。本章涵盖了使用 Unity 的 Tilemap 功能进行高效环境创建。此外，本章还介绍了 C#编程语言的基本概念，并指导你创建自定义脚本以增强游戏环境中的功能。本章最后概述了使用 Unity 的最新基于事件的输入系统集成玩家输入。

*第三章*, *完成收集游戏*，介绍了如何使用 Unity 的**Cinemachine**（**CM**），一个强大的相机控制系统，在游戏环境中跟随玩家。它还将介绍将**用户界面**（**UI**）集成到游戏中，利用 Unity 的 UI 系统（uGUI）和自定义编写的 C#组件，包括计时器和得分跟踪等功能。

*第四章*, *创建 2D 冒险游戏*，提供了使用 Unity 2D 工具（如 Sprite Shape）创建 2D 侧视角冒险游戏的指南。本章涵盖了导入艺术作品、整合动态移动平台以及优化游戏性能。到本章结束时，你将深入理解游戏设计文档，并具备设计交互式 2D 环境的能力，包括提供次要动作的触发器，以创造更具吸引力的玩家体验。

*第五章*，*继续冒险游戏*，概述了如何使用 Unity 2D 动画包创建一个绑定和动画的 2D 玩家角色。本章将涵盖使用 PSD 导入器设置角色头像，实现输入动作映射以使用控制器脚本来控制玩家移动，以及使用 Mecanim 来动画化角色。

*第六章*，*Unity 2022 中的对象池介绍*，介绍了对象池，这是一种在游戏开发中用于维持性能和避免游戏过程中出现延迟的关键优化模式。本章利用这一模式，通过使用 Unity 的对象池 API 来维持高效的玩家射击机制。

*第七章*，*润色玩家的动作和敌人的行为*，专注于学习如何通过引入 Unity 的基于图节点着色器创作工具 Shader Graph 和轨迹渲染器组件来提高玩家角色艺术作品的视觉美学。然后，本章展示了如何使用**可脚本化对象(SOs**)来配置不同类型的敌人，创建多样化的**非玩家角色(NPC**)敌人。本章以介绍通过状态模式进行敌人行为管理作为结尾。

*第八章*，*扩展冒险游戏*，提供了建立健康管理和伤害施加机制以装备玩家、敌人和任何可破坏对象的步骤，使其拥有简单而有效的健康系统。本章还介绍了创建一个能够实现动态生成的敌人波生成器。

*第九章*，*完成冒险游戏*，介绍了创建一个全局事件系统，该系统便于不同 C#类之间的通信，并促进模块化和可扩展性。利用新创建的事件系统，下一节将涵盖开发适用于任何数量自定义任务的寻宝系统。此外，本章还涵盖了从 Unity Asset Store 集成和定制一个谜题系统，以满足游戏开发者的特定需求。

*第十章*，*创建 3D 第一人称射击游戏(FPS)*，提供了使用 ProBuilder 和预制件在 Unity 编辑器内设计和构建灰盒 3D 环境的技能。它还将涵盖如何快速集成 FPS 角色控制器与 Unity 启动资产，以及如何将现有的 2D 代码用于环境交互的优化和适应到 3D API 方法中。

*第十一章*，*继续 FPS 游戏开发*，提供了通过替换预制件和材质、抛光资产、使用 Polybrush 散布对象以及通过光照烘焙和光照探针改进光照来更新和增强上一章的 3D 环境的指导。然后介绍了应用磨损效果以增加真实感和使用贴图装饰环境的方法。

*第十二章*，*通过音频增强 FPS 游戏*，专注于通过向 Unity 游戏项目添加音频来改善玩家体验。在整个章节中，你将获得创建音频管理器和相关可重用音频播放组件的技能和知识，以播放音乐、环境声音和**声音效果**（**SFX**）。本章以实现玩家角色的脚步声和游戏关卡内的混响区域为例结束。

*第十三章*，*使用传感器、行为树和 ML-Agents 实现 AI*，介绍了使用 Unity 的 AI 导航包和上一章重构的 2D 组件来实现必要的**人工智能**（**AI**）行为和 NPC 导航。本章还涵盖了通过引入传感器和行为树来增强敌人 NPC 动态。它探讨了将**机器学习**（**ML**）工具与 Unity ML-Agents 集成，以向游戏中添加高级 AI 功能。

*第十四章*，*使用 XR 交互工具包进入混合现实*，提供了开发使用玩家的物理空间来创建沉浸式和新型游戏体验的**混合现实**（**MR**）游戏和体验的知识。本章使用 Unity XR 交互工具包在混合现实中制作最终 Boss 房间遭遇。它探讨了设计过程、与 AR Foundation 平面合作、放置交互对象和实现机制。

*第十五章*，*以商业可行性完成游戏*，通过探讨**游戏即服务**（**GaaS**）、Unity DevOps 和 LiveOps 资源、通过 Unity 版本控制进行源代码管理、游戏内经济、平台分发和 UGS 实现，提供了有效的游戏开发项目管理的基本知识。它涵盖了管理并保护项目开发生命周期、分发具有商业可行性的游戏以及触及目标玩家群体。

# 为了最大限度地利用这本书

您需要在计算机上安装 Unity Hub 和 Unity 2022 编辑器版本。如果您还没有安装 Unity，第一章将指导您安装这两个软件。所有代码示例都将与 Unity 2022.3 的最新 LTS 版本兼容。所有代码示例和可下载的项目文件都已与出版时可用的最新 Unity 2022.3 LTS 版本进行了确认。

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| Unity Hub | Windows, macOS, 或 Linux |
| Unity 2022 编辑器 | Windows, macOS, 或 Linux |
| C#版本 9 |  |
| Unity 游戏服务（UGS） |  |

要完成章节中提供的示例，您只需要一个 Unity ID 账户和一个 Unity Personal 许可证（免费）。

**如果您正在使用本书的数字版，我们建议您亲自输入代码或从本书的 GitHub 仓库（下一节中提供链接）获取代码。这样做将帮助您避免与代码的复制和粘贴相关的任何潜在错误。**

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件[`github.com/PacktPublishing/Unity-2022-by-Example`](https://github.com/PacktPublishing/Unity-2022-by-Example)。如果代码有更新，它将在 GitHub 仓库中更新。 

我们还有来自我们丰富的书籍和视频目录中的其他代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 使用的约定

本书使用了多种文本约定。

`文本中的代码`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 账号。以下是一个示例：“在`Assets/Sprites/Character`目录中创建一个新的文件夹。”

代码块设置如下：

```cs
internal class Tags
{
    // Ensure all tags are spelled correctly!
    public const string Player = "Player";
}
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词以粗体显示。以下是一个示例：“在窗口底部右边的**几何**面板中，确保**权重**已启用。”

**提示** | 最大化 Unity 窗口

要最大化 Unity 中的当前活动窗口，如*图 10.3*中场景视图窗口所示，您可以使用键盘快捷键*Shift* + 空格键。

# 联系我们

我们欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请通过电子邮件发送至 customercare@packtpub.com，并在邮件主题中提及本书标题。 

**勘误表**：尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在本书中发现错误，我们将不胜感激，如果您能向我们报告此错误。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表格。

**盗版**：如果您在互联网上以任何形式遇到我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过 mailto:copyright@packt.com 与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com.](http://authors.packtpub.com.)

# 分享您的想法

一旦您阅读了《Unity 2022 by Example》，我们很乐意听到您的想法！请[点击此处直接转到此书的 Amazon 评论页面](https://packt.link/r/1-803-23459-8)并分享您的反馈。

您的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢在旅途中阅读，但无法携带您的印刷书籍到处走吗？

您的电子书购买是否与您选择的设备不兼容？

别担心！现在，每本 Packt 书籍都附带一本免费的 DRM-free PDF 版本，无需额外费用。

在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠远不止于此，您还可以获得独家折扣、时事通讯和每日免费内容的每日电子邮件。

按照以下简单步骤获取好处：

1.  扫描二维码或访问以下链接：

![](img/B18347_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781803234595`](https://packt.link/free-ebook/9781803234595)

1.  提交您的购买证明。

1.  就这样！我们将直接将您的免费 PDF 和其他优惠发送到您的电子邮件地址。
