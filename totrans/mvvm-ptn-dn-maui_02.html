<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer031">
<h1 class="chapter-number" id="_idParaDest-37"><a id="_idTextAnchor036"/>2</h1>
<h1 id="_idParaDest-38"><a id="_idTextAnchor037"/>What is .NET MAUI?</h1>
<p>Writing mobile applications for different platforms is hard, especially when it comes to creating <a id="_idIndexMarker072"/>cross-platform apps that run smoothly on different devices and operating systems. <strong class="bold">.NET MAUI</strong> (<strong class="bold">Multi-platform App UI</strong>) is a framework that aims to simplify this process by allowing developers to build native and performant cross-platform desktop and mobile apps for iOS, macOS, Android, and Windows – all from a single <span class="No-Break">code base.</span></p>
<p>In this chapter, we’ll take a look at the .NET MAUI framework. In order to thoroughly understand what this framework is and what it does, we’ll discuss its core concept, how it works, its features, and its benefits. We will also look at what is needed to start building a .NET MAUI app, installing the necessary bits, and creating a <span class="No-Break">new app.</span></p>
<p>After reading this chapter, you will have a solid understanding of what the .NET MAUI framework is and how it works. You will also know how to install the necessary tools to start building a .NET MAUI app and be able to create a new app from scratch. With this knowledge, you’ll be well equipped to start developing cross-platform apps using the .NET <span class="No-Break">MAUI framework.</span></p>
<p>In this chapter, we will go through the following <span class="No-Break">main topics:</span></p>
<ul>
<li>.NET MAUI in <span class="No-Break">a nutshell</span></li>
<li>How does <span class="No-Break">it work?</span></li>
<li>Creating your first .NET <span class="No-Break">MAUI app</span></li>
</ul>
<p>Before we start applying MVVM to .NET MAUI, it is essential to know the <span class="No-Break">framework itself.</span></p>
<h1 id="_idParaDest-39"><a id="_idTextAnchor038"/>Technical requirements</h1>
<p>The final section of this chapter, <em class="italic">Creating your first .NET MAUI app</em>, guides you through everything you need to set up in order to create a .NET <span class="No-Break">MAUI app.</span></p>
<p>The sample code can be found on GitHub <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/MVVM-pattern-.NET-MAUI/tree/main/Chapter02"><span class="No-Break">https://github.com/PacktPublishing/MVVM-pattern-.NET-MAUI/tree/main/Chapter02</span></a><span class="No-Break">.</span></p>
<h1 id="_idParaDest-40"><a id="_idTextAnchor039"/>.NET MAUI in a nutshell</h1>
<p><strong class="bold">.NET MAUI</strong> is a framework from Microsoft for building native and <a id="_idIndexMarker073"/>performant cross-platform desktop and mobile apps for iOS, macOS, Android, and Windows, all from a single code base. Moreover, .NET MAUI’s reach extends beyond these primary platforms, thanks to Samsung’s efforts in adding support for Tizen OS. This additional support opens up possibilities for developers to target a wider variety of devices, such as smart TVs, wearables, and IoT devices that run on Tizen. However, for the purposes of this book, we’ll focus on building apps for iOS, macOS, Android, and Windows. Using .NET MAUI, developers can create native cross-platform user interfaces using XAML or C#. The key idea is to share your code, both business logic and UI, across all the supported platforms (<span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.1</em></span><span class="No-Break">).</span></p>
<div>
<div class="IMG---Figure" id="_idContainer010">
<img alt="Figure 2.1: .NET MAUI high-level overview" height="743" src="image/Image_B20941_02_01.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.1: .NET MAUI high-level overview</p>
<p>It’s important to notice that having this shared code base in .NET MAUI doesn’t restrict you from accessing native platform-specific APIs using C#. In fact, .NET MAUI is designed to allow developers to access native features while maintaining a consolidated code base. .NET MAUI’s rich library of cross-platform APIs forms an abstraction layer for common tasks that are typically platform-specific. Yet, when a certain feature requires a native platform API <a id="_idIndexMarker074"/>that is not available in .NET MAUI’s cross-platform API, you still have the ability to directly use native platform APIs via C#. Through mechanisms such as partial classes, compiler directives, or dependency injection, .NET MAUI ensures that developers can achieve the optimal level of customization and functionality for <span class="No-Break">their applications<a id="_idTextAnchor040"/>.</span></p>
<h2 id="_idParaDest-41"><a id="_idTextAnchor041"/>Reminiscent of Xamarin.Forms</h2>
<p>This might sound <a id="_idIndexMarker075"/>familiar to developers who previously have heard of or have worked <span class="No-Break">with </span><span class="No-Break"><strong class="bold">Xamarin.Forms</strong></span><span class="No-Break">.</span></p>
<p>In fact, .NET MAUI is <a id="_idIndexMarker076"/>an evolution of Xamarin.Forms with many obvious and subtle differences. One of the significant differences is its integration into .NET starting with .NET 6. This integration means that developers no longer need to install additional NuGet packages <a id="_idIndexMarker077"/>or extensions for .NET MAUI, simplifying the setup process. Once the required <strong class="bold">.NET workloads</strong> for MAUI are installed, developers can start building applications <span class="No-Break">right away.</span></p>
<p>Also, as a first-class citizen of .NET, MAUI benefits from improved tooling and developer experience in Visual Studio, making it more convenient and efficient to create mobile apps using the framework. This seamless integration and enhanced tooling help developers build cross-platform applications more easily <span class="No-Break">and effectively.</span></p>
<p>But the main core idea remains the same: enabling developers to build native and performant cross-platform applications using .NET, with a single shared code base for both business logic and UI code. This approach simplifies the development process and promotes code reusability across different platforms, while providing the flexibility to access platform-specific APIs when needed, ensuring that developers can leverage native features and customize their applications <span class="No-Break">as required.</span></p>
<p>.NET MAUI is built upon the same foundational principles as Xamarin.Forms, but additionally incorporates all the learnings from almost a decade of developer experience from its predecessor. By improving various aspects such as performance, project structure, and tooling, .NET MAUI aims to simplify the process of creating cross-platform applications while maintaining the core ideas of sharing business logic and UI code, and allowing easy <a id="_idIndexMarker078"/>access to <span class="No-Break">platform-specific APIs.</span></p>
<h2 id="_idParaDest-42"><a id="_idTextAnchor042"/>Cross-platform UI and more</h2>
<p>One of the things .NET MAUI does is, of course, allowing us to create a shared UI for mobile and <a id="_idIndexMarker079"/>desktop apps. The framework offers <a id="_idIndexMarker080"/>us concepts such as <strong class="source-inline">Grid</strong>, <strong class="source-inline">VerticalStackLayout</strong>, <strong class="source-inline">AbsoluteLayout</strong>, and so on, which gives us the ability to carry out layout controls in many different ways. As a developer, you get the choice of whether you want to define your layouts in XAML or in code. Whatever approach you choose, the same thing can be achieved with both. On top of that, we also get data binding, an essential concept for effectively doing MVVM, as we learned in the previous chapter. With built-in page types such as <strong class="source-inline">FlyoutPage</strong>, <strong class="source-inline">TabbedPage</strong>, <strong class="source-inline">NavigationPage</strong>, and others, we can create applications with advanced navigation patterns. And remember, all of this eventually gets transformed into a native app running a <span class="No-Break">native UI!</span></p>
<h3>Cross-platform APIs</h3>
<p>But let’s not forget that there is more to .NET MAUI than just the UI stuff. .NET MAUI provides <a id="_idIndexMarker081"/>cross-platform APIs that abstract away the platform-specific implementations for common tasks, enabling developers to access native <a id="_idIndexMarker082"/>device features using a single, unified API – accessing the device’s compass, geolocation, filesystem, and so on – just to name a few. This allows us to write platform-agnostic code for such tasks, further simplifying the development process and promoting code reusability across different platforms. Some of the cross-platform APIs offered by .NET MAUI include <span class="No-Break">the following:</span></p>
<ul>
<li><strong class="bold">Device Information</strong>: Retrieve device-specific information, such as model, manufacturer, platform, and <span class="No-Break">OS version.</span></li>
<li><strong class="bold">Geolocation</strong>: Access the device’s location services to obtain GPS coordinates, perform geocoding and reverse geocoding, and track the <span class="No-Break">device’s movement.</span></li>
<li><strong class="bold">Connectivity</strong>: Determine the device’s network connectivity status and monitor <span class="No-Break">for changes.</span></li>
<li><strong class="bold">Permissions</strong>: Request and manage various runtime permissions required by your application, such as location, camera, and <span class="No-Break">storage access.</span></li>
<li><strong class="bold">Sensors</strong>: Utilize device sensors such as the accelerometer, gyroscope, magnetometer, and barometer to gather data about the device’s orientation, movement, <span class="No-Break">and environment.</span></li>
<li><strong class="bold">Preferences</strong>: Store and <a id="_idIndexMarker083"/>retrieve simple key-value data for app <a id="_idIndexMarker084"/>settings and user preferences. Use the <strong class="bold">Secure Storage</strong> API to do this for sensitive data that needs to <span class="No-Break">be secured.</span></li>
<li><strong class="bold">Launcher</strong>: Launch another app using that application’s URI scheme. There is also the <strong class="bold">Browser</strong> API if you want to open a website using the OS <span class="No-Break">default browser.</span></li>
</ul>
<p>And there are many, <span class="No-Break">many more!</span></p>
<p class="callout-heading">What about Xamarin.Essentials?</p>
<p class="callout">Xamarin.Essentials is an <a id="_idIndexMarker085"/>open source library that was created to assemble cross-platform APIs for mobile applications, serving as an abstraction on top of common platform-specific tasks. With the evolution of Xamarin.Forms into .NET MAUI, these APIs are now more seamlessly integrated into the framework itself. This means the Xamarin.Essentials NuGet package is not needed in .NET <span class="No-Break">MAUI applications.</span></p>
<h3>Cross-platform life cycle events</h3>
<p>.NET MAUI introduces <a id="_idIndexMarker086"/>a <strong class="bold">uniform app life cycle</strong>, which<a id="_idIndexMarker087"/> simplifies the management of application state across different <a id="_idIndexMarker088"/>platforms. In traditional Xamarin.Forms development, each platform had its own life cycle events and patterns, which sometimes led to inconsistencies and increased complexity when dealing with <span class="No-Break">cross-platform scenarios.</span></p>
<p>Through the <strong class="source-inline">Window</strong> class, we can now react to the life cycle of our applications using a single set of events, regardless of the <span class="No-Break">target platform.</span></p>
<p>The easiest way to subscribe to these events is by getting a reference to the application window via the <strong class="source-inline">CreateMethod</strong> in your <strong class="source-inline">App</strong> class and then subscribing to the events relevant <span class="No-Break">to you.</span></p>
<p>These events allow us to handle a couple of life cycle events in a consistent manner across all supported platforms. Depending on our needs or our scenario, we can use these event handlers, for example, to stop long-running processes (in the <strong class="source-inline">Stopped</strong> event handler) or refresh the data on the current page (on the <strong class="source-inline">Resumed</strong> event). A pattern I often see in banking apps is that the app’s UI gets obfuscated or blurred when it’s put in <a id="_idIndexMarker089"/>the background or when it hasn’t got focus. This could<a id="_idIndexMarker090"/> typically be handled in a cross-platform way with the help of the <strong class="source-inline">Deactivated</strong> and <span class="No-Break"><strong class="source-inline">Activated</strong></span><span class="No-Break"> events.</span></p>
<p>As always with .NET MAUI, abstractions such as these should not prevent you from accessing <a id="_idIndexMarker091"/>platform APIs or doing platform-specific things. If you need to react to a certain platform-specific life cycle event, you can still do that. Through the <strong class="source-inline">ConfigureLifecycleEvents</strong> extension method of <strong class="source-inline">MauiAppBuilder</strong>, we can define delegates that should be invoked on the life cycle events of the <span class="No-Break">underlying platforms:</span></p>
<pre class="source-code">
public static MauiApp CreateMauiApp()
{
    var builder = MauiApp.CreateBuilder();
    return builder
        .UseMauiApp&lt;App&gt;()
        <strong class="bold">.ConfigureLifecycleEvents(lifecycle =&gt;</strong>
<strong class="bold">        {</strong>
        ...
        <strong class="bold">})</strong>.Build();
}</pre> <p>For example, if we want our app to be activated through a custom URI scheme, we might want to intercept the URL that triggered the app to open and react to that. Getting a hold on that URL can only be done on specific life cycle events on each platform: the <strong class="source-inline">OnCreate</strong> method on Android and <strong class="source-inline">OpenUrl</strong> on iOS. We can override these methods in <strong class="source-inline">MainActivity</strong> or <strong class="source-inline">AppDelegate</strong>, respectively, as we used to do with Xamarin.Forms. Alternatively, we <a id="_idIndexMarker092"/>can hook <a id="_idIndexMarker093"/>into these platform events with the <span class="No-Break">earlier-mentioned </span><span class="No-Break"><strong class="source-inline">ConfigureLifecycleEvents</strong></span><span class="No-Break">:</span></p>
<pre class="source-code">
.ConfigureLifecycleEvents(lifecycle =&gt;
{
#if ANDROID
    lifecycle.AddAndroid(android =&gt;
    {
        <strong class="bold">android.OnCreate((activity, bundle) =&gt;</strong>
<strong class="bold">        {</strong>
<strong class="bold">            //Get url activity.Intent.Data</strong>
<strong class="bold">        });</strong>
    });
#elif IOS
    <strong class="bold">lifecycle.AddiOS(ios =&gt;</strong>
<strong class="bold">    {</strong>
<strong class="bold">        ios.OpenUrl((app, url, options) =&gt;</strong>
<strong class="bold">        {</strong>
<strong class="bold">            return true;</strong>
<strong class="bold">        });</strong>
    });
#endif
})</pre> <p>Instead of having this kind of code scattered throughout your solution in platform-specific classes and files, I think the preceding solution is a lot more elegant as everything is in <a id="_idIndexMarker094"/>one place. I think this <a id="_idIndexMarker095"/>improves the readability and maintainability of your code <span class="No-Break">a lot!</span></p>
<h3>Single project structure (multi-targeting)</h3>
<p>.NET MAUI also introduces a brand-new single project structure. Instead of having different <a id="_idIndexMarker096"/>projects per targeted platform and one project for the shared code, with .NET MAUI, we can build apps for different platforms <a id="_idIndexMarker097"/>from just one project. Not only the shared code, but also the platform-specific implementations, and resources, such as images, fonts, and app icons, are included directly within this one <span class="No-Break">single project.</span></p>
<p>This is possible thanks to the <strong class="bold">multi-targeting</strong> capabilities of <strong class="source-inline">MSBuild</strong>, the build system used by .NET and .NET MAUI. With multi-targeting, we can basically put all our code in one project and define for what platforms the project should be built. These target platforms are defined in the project’s <strong class="source-inline">csproj</strong> file. By default, in .NET MAUI, it looks <span class="No-Break">like this:</span></p>
<pre class="source-code">
&lt;TargetFrameworks&gt;net8.0-android;net8.0-ios;net8.0-
  maccatalyst&lt;/TargetFrameworks&gt;
&lt;TargetFrameworks Condition="$([MSBuild]::IsOSPlatform
  ('windows'))"&gt;$(TargetFrameworks);net8.0-
    windows10.0.19041.0&lt;/TargetFrameworks&gt;</pre> <p>So, for a standard .NET MAUI project, this means we are targeting Android, iOS, Mac Catalyst, and Windows – the latter only when running <span class="No-Break">on Windows.</span></p>
<p>When compiling, <strong class="source-inline">MSBuild</strong> will build for all the configured platforms, only taking the source files that are relevant to the platform it is compiling for and handling dependencies based on the specified target framework. In other words: one project results in multiple compiled libraries or apps, which on their own only contain the source code that is relevant for the platform it is compiled for. But how does <strong class="source-inline">MSBuild</strong> know which platform-specific files to take? There are a few ways of informing the build system which sources <span class="No-Break">to take:</span></p>
<ul>
<li><strong class="bold">Preprocessor directives</strong>: You can use preprocessor directives (<strong class="source-inline">#if</strong>, <strong class="source-inline">#elif</strong>, <strong class="source-inline">#else</strong>, and <strong class="source-inline">#endif</strong>) in your code to conditionally compile platform-specific code blocks. These directives enable you to include platform-specific code within a single source file, making it easier to share code across platforms and reducing the need for multiple files. For example, code surrounded by <strong class="source-inline">#if ANDROID</strong> and <strong class="source-inline">#endif</strong> will only be included and compiled when explicitly compiling for Android. The previous code sample about handling platform-specific life cycle events also contains these directives as the code they surround is only relevant to a particular platform and uses APIs specific to <span class="No-Break">that platform.</span></li>
<li><strong class="bold">Platform-specific folders</strong>: You can use platform-specific folders to organize your platform-specific code and resources. By default, <strong class="source-inline">MSBuild</strong> will only include the contents of <strong class="source-inline">Platforms/Android</strong>, <strong class="source-inline">Platforms/iOS</strong>, <strong class="source-inline">Platforms/Windows</strong>, or <strong class="source-inline">Platforms/MacCatalyst</strong> when compiling for the corresponding platform. This allows us, without using preprocessor directives, to write platform-specific code in these folders that accesses native APIs. Proof <a id="_idIndexMarker098"/>of this is when looking at <a id="_idIndexMarker099"/>the default <strong class="source-inline">Program</strong> class in <strong class="source-inline">Platforms/iOS</strong>, there is a <strong class="source-inline">UIKit.UIApplication</strong> object being used, which is an object specific to iOS. To give an analogy, the <strong class="source-inline">MainActivity</strong> class in <strong class="source-inline">Platforms/Android</strong> uses <strong class="source-inline">Android.App.ActivityAttribute</strong>, something specifically <span class="No-Break">for Android.</span><p class="list-inset">Not only do these platform-specific folders contain platform-specific code, but they also contain resources that are unique to the specific platform –<strong class="source-inline">Package.appxmanifest</strong> in <strong class="source-inline">Platforms/Windows</strong> or <strong class="source-inline">Info.plist</strong> in <strong class="source-inline">Platforms/MacCatalyst</strong>, <span class="No-Break">for example.</span></p></li>
<li><strong class="bold">File naming conventions</strong>: You can also use file naming conventions to organize platform-specific code files. This approach is not supported by default; you need to add some additional configuration in the <strong class="source-inline">csproj</strong> file for this. This can be combined with platform-specific folders <span class="No-Break">as well.</span><p class="list-inset">Take a look at <a href="https://learn.microsoft.com/dotnet/maui/platform-integration/configure-multi-targeting">https://learn.microsoft.com/dotnet/maui/platform-integration/configure-multi-targeting</a> to get a detailed approach on how to configure filename-based multi-targeting and how to combine it with platform-specific folders. Whatever approach you want to use is mostly personal preference and is completely up to you and your team <span class="No-Break">to decide.</span></p></li>
</ul>
<p>In Visual Studio, when <a id="_idIndexMarker100"/>inside a .NET MAUI project, there is an additional dropdown available, called the <strong class="bold">Platform Selector</strong>, which allows you to select one of the target platforms. By default, this dropdown can be found in the top left of your code editor when inside a C# code file (<span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.2</em></span><span class="No-Break">):</span></p>
<div>
<div class="IMG---Figure" id="_idContainer011">
<img alt="Figure 2.2: Platform Selector" height="389" src="image/Image_B20941_02_02.jpg" width="796"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.2: Platform Selector</p>
<p>Selecting an entry in this dropdown doesn’t affect the compilation. The selected platform’s purpose is to configure the development environment for that specific platform. That means, when working with preprocessor directives, it displays platform-specific code <a id="_idIndexMarker101"/>and makes sure IntelliSense <a id="_idIndexMarker102"/>and code navigation features are adjusted to work on the <span class="No-Break">platform-specific code.</span></p>
<p><span class="No-Break"><em class="italic">Figure 2</em></span><em class="italic">.3</em> shows how the IDE grays out code that doesn’t get compiled in the selected target <span class="No-Break">platform (Android).</span></p>
<div>
<div class="IMG---Figure" id="_idContainer012">
<img alt="Figure 2.3: Android as the selected target platform" height="680" src="image/Image_B20941_02_03.jpg" width="1417"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.3: Android as the selected target platform</p>
<p>In the selected configuration, the code surrounded with <strong class="source-inline">#if ANDROID</strong> will get compiled; the iOS-specific code, however, will be ignored. Moreover, we don’t get red squiggles in the IDE even though the iOS part has an error: the <strong class="source-inline">OpenUrls</strong> method doesn’t exist, as <strong class="source-inline">OpenUrl</strong> is the correct name. This error only becomes visible when selecting iOS as the target platform in the <strong class="bold">Platform Selector</strong> dropdown (<span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.4</em></span><span class="No-Break">).</span></p>
<div>
<div class="IMG---Figure" id="_idContainer013">
<img alt="Figure 2.4: iOS as the selected target platform" height="675" src="image/Image_B20941_02_04.jpg" width="1382"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.4: iOS as the selected target platform</p>
<p>By selecting <a id="_idIndexMarker103"/>iOS as the build target, all the iOS-specific code lights up, while <a id="_idIndexMarker104"/>code specific to other platforms gets <span class="No-Break">grayed out.</span></p>
<p>This dropdown helps tremendously when writing <span class="No-Break">platform-specific code!</span></p>
<p class="callout-heading">Note</p>
<p class="callout">To conclude, .NET MAUI is <em class="italic">a modern framework for building cross-platform native applications for mobile and desktop devices</em>. It supports Android, iOS, macOS, and Windows. It offers a shared UI layer with a rich set of controls, cross-platform APIs for common tasks, unified app life cycle events across different platforms, and a single project structure that simplifies development <span class="No-Break">and deployment.</span></p>
<h1 id="_idParaDest-43"><a id="_idTextAnchor043"/>How does it work?</h1>
<p>So now that <a id="_idIndexMarker105"/>we have a good understanding of .NET MAUI, you might wonder how this actually works. How does this .NET code eventually end up as a native app with a native UI on different platforms? It’s not magic, but to understand how it works, we need to take a look under <span class="No-Break">the hood.</span></p>
<h2 id="_idParaDest-44"><a id="_idTextAnchor044"/>Native apps with .NET</h2>
<p>At compile time, native apps<a id="_idIndexMarker106"/> for each selected platform are being created. The necessary <a id="_idIndexMarker107"/>parts of the .NET <strong class="bold">Base Class Library</strong> (<strong class="bold">BCL</strong>), which <a id="_idIndexMarker108"/>contains the .NET datatypes, interfaces, and libraries, are embedded in the native app and tailored to the target platform. The BCL <a id="_idIndexMarker109"/>relies on the <strong class="bold">.NET runtime</strong> to create an execution environment for your application code. For Android, iOS, and macOS <a id="_idIndexMarker110"/>platforms, the <strong class="bold">Mono runtime</strong> serves as the .NET runtime implementation that powers the execution environment. Meanwhile, on Windows, <strong class="bold">.NET CoreCLR</strong> is responsible <a id="_idIndexMarker111"/>for providing the runtime environment for <span class="No-Break">your application.</span></p>
<p>This <a id="_idIndexMarker112"/>mechanism isn’t specific to .NET MAUI. This is actually the foundation for <strong class="bold">.NET for Android</strong>, <strong class="bold">.NET for iOS</strong>, <strong class="bold">.NET for Mac</strong>, and <strong class="bold">WinUI</strong>. These things <a id="_idIndexMarker113"/>might sound <a id="_idIndexMarker114"/>like something new, but in fact, these are the new names for <a id="_idIndexMarker115"/>the things that we previously might <a id="_idIndexMarker116"/>have known as <strong class="bold">Xamarin.Android</strong>, <strong class="bold">Xamarin.iOS</strong>, <span class="No-Break">and </span><span class="No-Break"><strong class="bold">Xamarin.Mac</strong></span><span class="No-Break">.</span></p>
<p>.NET for Android, .NET for <a id="_idIndexMarker117"/>iOS, and .NET for Mac provide bindings to platform-<a id="_idIndexMarker118"/>specific APIs, enabling developers to access specific features and controls using familiar .NET constructs. On Android, when the application is compiled, the .NET code is packaged with the Mono runtime, and the app is executed using <strong class="bold">Just-in-Time</strong> (<strong class="bold">JIT</strong>) compilation <a id="_idIndexMarker119"/>on Android devices. Due to <a id="_idIndexMarker120"/>Apple’s restrictions on JIT compilation, .NET for iOS applications is compiled using <strong class="bold">Ahead-of-Time</strong> (<strong class="bold">AOT</strong>) compilation, which translates the .NET code into native ARM code that runs directly on <span class="No-Break">iOS devices.</span></p>
<p>WinUI is a modern, native UI framework for building Windows applications using C# and XAML, using .NET. It is the <a id="_idIndexMarker121"/>latest version of <strong class="bold">Windows UI Library</strong>, which provides a set of UI controls, styles, and features for building fluent and high-performance Windows applications. Instead of the Mono runtime, it uses .NET CoreCLR as an <span class="No-Break">execution environment.</span></p>
<p>Each of these frameworks can be used to create native applications with .NET, utilizing the UI patterns and<a id="_idIndexMarker122"/> paradigms specific to each <a id="_idIndexMarker123"/>platform to build <span class="No-Break">the UI.</span></p>
<p class="callout-heading">Tip</p>
<p class="callout">Even though .NET for Android and .NET for iOS offer a way to share a significant amount of code, creating and maintaining apps with a native UI for each platform can still be very challenging. Developers need to be proficient in the specifics of each platform and have a deep understanding of the differences between them. This can lead to higher development costs, longer time-to-market, and increased <span class="No-Break">maintenance efforts.</span></p>
<h2 id="_idParaDest-45"><a id="_idTextAnchor045"/>.NET MAUI, another abstraction layer</h2>
<p>This is <a id="_idIndexMarker124"/>where .NET MAUI comes in. It provides a convenient and efficient way to create truly native mobile apps for multiple platforms using a single code base. .NET MAUI adds an abstraction layer on top of the previously mentioned .NET platforms, allowing us to build a shared UI for all of them (<span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.5</em></span><span class="No-Break">).</span></p>
<div>
<div class="IMG---Figure" id="_idContainer014">
<img alt="Figure 2.5: .NET MAUI architecture" height="774" src="image/Image_B20941_02_05.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.5: .NET MAUI architecture</p>
<p>The code <a id="_idIndexMarker125"/>in your .NET MAUI app primarily interacts with the .NET MAUI API, which in turn communicates with native platform APIs. Additionally, your .NET MAUI code can directly access platform-specific APIs to leverage unique platform features <span class="No-Break">or customizations.</span></p>
<p>Let’s explore the process of transforming a cross-platform-defined UI into a native UI specific to <span class="No-Break">each platform.</span></p>
<h3>From virtual to native view</h3>
<p>When defining <a id="_idIndexMarker126"/>a UI in .NET MAUI, the platform-agnostic <strong class="bold">controls</strong> or <strong class="bold">virtual views</strong> are mapped to native UI elements or <strong class="bold">native views</strong> on each platform at runtime. The definition of .NET MAUI controls is often the most common denominator of the native controls it represents on all supported platforms. In some cases, platform-specific functionality is made available through <span class="No-Break">platform-specific extensions.</span></p>
<p>But how do we go from a virtual view to a <span class="No-Break">native view?</span></p>
<p>The <strong class="bold">handlers</strong> architecture, introduced in .NET MAUI, manages the mapping of the virtual views <a id="_idIndexMarker127"/>to the native UI elements for each supported platform. Handlers are lightweight and performant components that replace the traditional renderers used in Xamarin.Forms. Each MAUI control has corresponding handlers that are responsible for creating, updating, and managing the native UI element on a specific platform. Handlers <a id="_idIndexMarker128"/>handle property changes, events, and platform-specific customizations, translating the shared MAUI control code into platform-specific native controls <span class="No-Break">and behaviors.</span></p>
<p><span class="No-Break"><em class="italic">Figure 2</em></span><em class="italic">.6</em> shows how an instance of <strong class="source-inline">Microsoft.Maui.Controls.Button</strong> (Virtual View) gets mapped to a specific <span class="No-Break">Native View:</span></p>
<ul>
<li>On iOS, a handler maps the button to <strong class="source-inline">UIKit.UIButton</strong>. As .NET MAUI leverages Mac Catalyst to create native macOS applications, the same <strong class="source-inline">UIKit.UIButton</strong> is used for macOS. Mac Catalyst is a technology developed by Apple that allows developers to leverage the same project and source code to create native apps across iOS, iPadOS, <span class="No-Break">and macOS.</span></li>
<li>On Android, the button is being mapped by a handler to an instance <span class="No-Break">of </span><span class="No-Break"><strong class="source-inline">AndroidX.AppCompat.Widget.AppCompatButton</strong></span><span class="No-Break">.</span></li>
<li>An instance of <strong class="source-inline">Microsoft.UI.Xaml.Controls.Button</strong> is created by a handler on Windows when mapping a .NET <span class="No-Break">MAUI button.</span></li>
</ul>
<p>As you can see in <span class="No-Break"><em class="italic">Figure 2</em></span><em class="italic">.6</em>, <strong class="source-inline">ButtonHandlers</strong> don’t have a direct reference to the <strong class="source-inline">Button</strong> implementation; neither does the <strong class="source-inline">Button</strong> implementation have a reference to <strong class="source-inline">ButtonHandlers</strong>. Instead, every control implements an interface that abstracts the control. The handlers are accessed through the control-specific interface, such as <strong class="source-inline">IButton</strong> <span class="No-Break">for </span><span class="No-Break"><strong class="source-inline">Button</strong></span><span class="No-Break">.</span></p>
<div>
<div class="IMG---Figure" id="_idContainer015">
<img alt="Figure 2.6: .NET MAUI’s handlers architecture" height="758" src="image/Image_B20941_02_06.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.6: .NET MAUI’s handlers architecture</p>
<p>We’ve talked a lot about <em class="italic">mapping</em> but that is, in essence, really what is happening in these handlers. It is not a coincidence <a id="_idIndexMarker129"/>that a handler has one or more <strong class="bold">mappers</strong>. A mapper is an object that defines what needs to happen when a property on the cross-platform control changes. It is a dictionary where the key value is the name of a property of the virtual view and the value is an action that needs to be executed whenever the property on the control changes. Per platform, the handler defines the actions that need to be executed on the native view to ensure that when <a id="_idIndexMarker130"/>a property is set on a cross-platform control, the corresponding native <a id="_idIndexMarker131"/>view updates accordingly. Aside from these <strong class="bold">property mappers</strong>, handlers often <a id="_idIndexMarker132"/>also have a <strong class="bold">command mapper</strong>, which is very similar to <strong class="source-inline">PropertyMapper</strong> but allows for an extra parameter to be passed. Handling cross-platform events such as <strong class="source-inline">ScrollTo</strong> on <strong class="source-inline">ScrollView</strong> is such an example. In order to make the native view scroll to the requested position, the position itself needs to be passed to the handler as an argument. This way, the handler can use this argument value to invoke the necessary action on the <span class="No-Break">native view.</span></p>
<p>Compared to Xamarin.Forms’ renderers implementation, the handlers’ architecture offers several benefits: improved performance, easier customization, and better maintainability, making it a significant improvement point in transitioning from Xamarin.Forms to .<span class="No-Break">NET MAUI.</span></p>
<p>Now that we’ve covered a substantial amount of theory and you understand how things work under the hood, it’s time to roll up our sleeves and start creating something tangible. I know you’re <a id="_idIndexMarker133"/>keen to dive in, so let’s embark on building our very first .NET <span class="No-Break">MAUI application!</span></p>
<h1 id="_idParaDest-46"><a id="_idTextAnchor046"/>Creating your first .NET MAUI app</h1>
<p>Let’s create our first .NET MAUI app! Before we can start writing any code, we need to set up <a id="_idIndexMarker134"/>our machine by installing some bits. So, let’s walk through these initial setup steps together and see what options we have. Once we’re set up, we’ll move on to the exciting part: creating a .NET MAUI app from scratch, step <span class="No-Break">by step.</span></p>
<h2 id="_idParaDest-47"><a id="_idTextAnchor047"/>Setting up your machine</h2>
<p>Getting <a id="_idIndexMarker135"/>started with .NET MAUI development is pretty simple, especially if you are using Visual Studio as your IDE. But even if you don’t want to use Visual Studio, the installation should be <span class="No-Break">quite straightforward.</span></p>
<h3>About .NET SDK versions and workloads</h3>
<p>.NET MAUI is available from .NET 6, and at the <a id="_idIndexMarker136"/>time of writing the book, <strong class="bold">.NET 8</strong> is the most <a id="_idIndexMarker137"/>recent version. It is important to <a id="_idIndexMarker138"/>note that every version of .NET comes with <a id="_idIndexMarker139"/>a specific support policy: there are <strong class="bold">Long-Term Support</strong> (<strong class="bold">LTS</strong>) releases, <a id="_idIndexMarker140"/>which provide 3 years of free support and patches, and there are <strong class="bold">Standard-Term Support</strong> (<strong class="bold">STS</strong>) releases, which are good for 18 months of free support and patches. However, for .NET MAUI, this doesn’t apply. Microsoft needs to make sure .NET MAUI supports the latest and greatest APIs on all of the supported platforms. New features and improvements will be mainly developed for the next version of .NET, and some may be backported to the current version. So, when it comes to .NET MAUI, the support policy is different than the general .NET support policy. It’s best to use the latest available version of .NET so you have access to the newest platform APIs and the best-performing version of .NET MAUI, regardless of whether it’s an LTS or <span class="No-Break">STS release.</span></p>
<p>.NET 6 introduced <a id="_idIndexMarker141"/>the concept of <strong class="bold">workloads</strong>. A workload is a set of tools, templates, and libraries for a particular development scenario or target platform. When installing the .NET MAUI workload, we are installing everything that is needed to build cross-platform native apps with .NET. It will install the .NET MAUI class libraries, build and runtime components, platform-specific SDKs and tools, project templates, and <span class="No-Break">so on.</span></p>
<p>The .NET <a id="_idIndexMarker142"/>MAUI workload can be installed <a id="_idIndexMarker143"/>and managed in two ways: using the Visual Studio Installer or via the command line if you choose not to work with <span class="No-Break">Visual Studio.</span></p>
<p class="callout-heading">Tip</p>
<p class="callout">In order for your .NET MAUI workload to remain in a stable state, it is important to stick with one and only one of the following options: you either install it with Visual Studio and manage it from there, or you do it from the command line. Don’t mix <span class="No-Break">the two!</span></p>
<h3>Installing Visual Studio and the .NET MAUI workload</h3>
<p>When working with Visual Studio (2022 17.3 or greater), we can use the Visual Studio Installer <a id="_idIndexMarker144"/>to install the .NET MAUI <a id="_idIndexMarker145"/>workload. This is by far the easiest way to install and manage your workloads. .NET MAUI development is supported on all versions of Visual Studio: from the free Community edition to the paid <span class="No-Break">Enterprise edition.</span></p>
<p>If Visual Studio is not yet installed on your machine, you first need to download the Visual Studio Installer by going to <a href="https://visualstudio.microsoft.com/downloads/">https://visualstudio.microsoft.com/downloads/</a>. Once the installer is downloaded, launch it, and choose <strong class="bold">Install</strong> (<span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.7</em></span><span class="No-Break">)</span></p>
<div>
<div class="IMG---Figure" id="_idContainer016">
<img alt="Figure 2.7: Installing Visual Studio" height="304" src="image/Image_B20941_02_07.jpg" width="1227"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.7: Installing Visual Studio</p>
<p>Or, if you already have Visual Studio installed, you can launch the Visual Studio Installer and select <strong class="bold">Modify</strong> (<span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.8</em></span><span class="No-Break">).</span></p>
<div>
<div class="IMG---Figure" id="_idContainer017">
<img alt="Figure 2.8: Modifying Visual Studio" height="297" src="image/Image_B20941_02_08.jpg" width="1237"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.8: Modifying Visual Studio</p>
<p>Whether <a id="_idIndexMarker146"/>you are installing <a id="_idIndexMarker147"/>Visual Studio or modifying it, in the next dialog, you can choose the workloads you want to install. As shown in <span class="No-Break"><em class="italic">Figure 2</em></span><em class="italic">.9</em>, this is where we need to check <strong class="bold">.NET Multi-platform App </strong><span class="No-Break"><strong class="bold">UI development</strong></span><span class="No-Break">.</span></p>
<div>
<div class="IMG---Figure" id="_idContainer018">
<img alt="Figure 2.9: Installing the .NET MAUI workload" height="903" src="image/Image_B20941_02_09.jpg" width="1643"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.9: Installing the .NET MAUI workload</p>
<p>This will install all the bits and pieces in order for you to be able to build .NET <span class="No-Break">MAUI apps.</span></p>
<p>Having Visual Studio freshly installed, launch it, and select <strong class="bold">Continue without code</strong> (<span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.10</em></span><span class="No-Break">).</span></p>
<div>
<div class="IMG---Figure" id="_idContainer019">
<img alt="Figure 2.10: Starting Visual Studio without code" height="889" src="image/Image_B20941_02_10.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.10: Starting Visual Studio without code</p>
<p>In order <a id="_idIndexMarker148"/>to be able to debug <a id="_idIndexMarker149"/>on an Android emulator or an iOS simulator, we need to install or configure <span class="No-Break">the following:</span></p>
<ul>
<li>Go to <strong class="bold">Tools</strong> | <strong class="bold">Android</strong> | <strong class="bold">Android Device Manager</strong>. From there, you can add Android emulators that you can use to deploy your .NET <span class="No-Break">MAUI app.</span></li>
<li>From <strong class="bold">Tools</strong> | <strong class="bold">iOS</strong> | <strong class="bold">Pair to Mac</strong>, you can follow the steps in order to connect to a Mac in your network. When connected to a Mac, you can debug your app on an iOS simulator or on a physical device plugged into <span class="No-Break">your Mac.</span></li>
</ul>
<p class="callout-heading">Hot Restart</p>
<p class="callout">Of course, you can also debug on a physical device, plugged into your PC. This is possible even on an iOS device! With<a id="_idIndexMarker150"/> Visual Studio <strong class="bold">Hot Restart</strong>, you can debug right onto your iPhone without having a Mac connected to your Windows machine. The only caveat is that <a id="_idIndexMarker151"/>you need an <strong class="bold">Apple Developer Account</strong>, an <a id="_idIndexMarker152"/>active <strong class="bold">Apple Developer Program</strong> enrollment (which is paid), and iTunes installed on your PC. As soon as you connect your iOS device to your computer and select it in Visual Studio as your debug target, Visual Studio will guide you through setting up Hot Restart, which will require you to enter your Apple Developer Account details. I would recommend heading over to <a href="https://learn.microsoft.com/dotnet/maui/ios/hot-restart">https://learn.microsoft.com/dotnet/maui/ios/hot-restart</a> to get step-by-step guidance <a id="_idIndexMarker153"/>on how to set up Hot Restart on iOS. While this is great for debugging, in order to release an iOS or macOS app, you still need a Mac to build and sign <span class="No-Break">your app!</span></p>
<h3>Installing the .NET MAUI workload with the command line</h3>
<p>Alternatively, if you are <a id="_idIndexMarker154"/>choosing an IDE other than Visual Studio, you need to install the .NET MAUI workload manually through the <span class="No-Break">command line.</span></p>
<p>But <a id="_idIndexMarker155"/>before installing .NET MAUI, you need to make sure .NET is installed on your machine. You can do this by running the <span class="No-Break">following command:</span></p>
<pre class="console">
dotnet --list-sdks</pre> <p>It should give you an overview of all .NET SDKs installed. As said earlier, .NET 6 is the minimum required .NET SDK needed to do .NET MAUI development. If the preceding command fails, as shown in <span class="No-Break"><em class="italic">Figure 2</em></span><em class="italic">.11</em>, it means .NET is not yet installed on your machine. You should go to <a href="https://dotnet.microsoft.com/download/dotnet">https://dotnet.microsoft.com/download/dotnet</a>, select the latest version of .NET, and download the appropriate installer <span class="No-Break">or binaries.</span></p>
<div>
<div class="IMG---Figure" id="_idContainer020">
<img alt="Figure 2.11: ‘dotnet’ is not recognized" height="118" src="image/Image_B20941_02_11.jpg" width="1090"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.11: ‘dotnet’ is not recognized</p>
<p>Once a recent version of .NET is installed on your machine, you can install the .NET MAUI workload via the command line by using the <span class="No-Break">following command:</span></p>
<pre class="console">
dotnet workload install maui</pre> <p>This will install everything that is needed to be able to build cross-platform apps with .NET MAUI using your <span class="No-Break">favorite IDE.</span></p>
<p>Do note that this doesn’t install any additional tools for managing Android emulators, for example, nor does it give you out-of-the-box tools that allow you to easily connect to a Mac or deploy to <span class="No-Break">an iPhone.</span></p>
<h3>Installing Visual Studio Code and the .NET MAUI extension</h3>
<p>If you <a id="_idIndexMarker156"/>prefer working with <strong class="bold">Visual Studio Code</strong>, whether it is on Windows, macOS, or even Linux, there’s some good news. The <strong class="bold">.NET MAUI extension</strong>, together with the <strong class="bold">C# Dev Kit extension</strong>, gives <a id="_idIndexMarker157"/>you everything you need to start creating MAUI apps with Visual Studio Code. The supported target platforms depend on the OS you are running. On Windows, you can create Windows and Android apps; on macOS, you are able to develop all but Windows apps; and on Linux, you can only create Android apps. Let’s see how we can get Visual Studio Code up and running for creating .NET <span class="No-Break">MAUI apps:</span></p>
<ol>
<li>Install Visual Studio Code from <a href="https://code.visualstudio.com/">https://code.visualstudio.com/</a>. Install the .NET MAUI extension from the <strong class="bold">EXTENSIONS</strong> menu in Visual Studio Code. Find it by searching for <strong class="source-inline">maui</strong>, as shown in <span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.12</em></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer021">
<img alt="Figure 2.12: .NET MAUI extension" height="260" src="image/Image_B20941_02_12.jpg" width="1009"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.12: .NET MAUI extension</p>
<ol>
<li value="2">Once the extension is installed, the <strong class="bold">Welcome</strong> page pops up in Visual <span class="No-Break">Studio Code:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer022">
<img alt="Figure 2.13: .NET MAUI extension Welcome page" height="1241" src="image/Image_B20941_02_13.jpg" width="1649"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.13: .NET MAUI extension Welcome page</p>
<p class="list-inset">This <strong class="bold">Welcome</strong> page guides you through every additional step you need to take to get your environment up and running. It covers everything from the installation of the .NET MAUI workload to downloading and installing Microsoft OpenJDK, which is essential for building and debugging Android apps. Additionally, it tells you to install Xcode and Xcode Command Line Tools on a Mac, which are needed for building and debugging iOS and <span class="No-Break">macOS applications.</span></p>
<p>Now <a id="_idIndexMarker158"/>that we have got our preferred development environment all set up, let’s create a .NET MAUI app! Note that throughout this book, the walk-throughs describe the workflow as in Visual Studio. However, it shouldn’t be an issue to follow along in your IDE <span class="No-Break">of choice.</span></p>
<h2 id="_idParaDest-48"><a id="_idTextAnchor048"/>Hello “Recipes!” app</h2>
<p>Throughout <a id="_idIndexMarker159"/>this book, we will be working on the <em class="italic">Recipes! </em>app. With this app, users add their favorite recipes and share them with the world, allowing other users to rate and <span class="No-Break">review them.</span></p>
<p>So, let’s go ahead and create a .NET MAUI app that will serve as a starting point for our <span class="No-Break"><em class="italic">Recipes!</em></span><span class="No-Break"> app.</span></p>
<h3>Creating a new project</h3>
<p>With the <a id="_idIndexMarker160"/>excitement building, we’re about to take our first steps toward developing our <em class="italic">Recipes!</em> app. To kick things off, we’ll start by creating a new project in <span class="No-Break">Visual Studio:</span></p>
<ol>
<li>Fire up Visual Studio and select <strong class="bold">Create a new project</strong>, as shown in <span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.14</em></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer023">
<img alt="Figure 2.14: Create a new project" height="512" src="image/Image_B20941_02_14.jpg" width="875"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.14: Create a new project</p>
<ol>
<li value="2">Next, select <strong class="bold">.NET MAUI App</strong> from the list of project templates. As this list can be quite long, you can type <strong class="source-inline">maui</strong> in the search bar at the top to query <span class="No-Break">the list.</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer024">
<img alt="Figure 2.15: Choosing the .NET MAUI App template" height="1093" src="image/Image_B20941_02_15.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.15: Choosing the .NET MAUI App template</p>
<ol>
<li value="3">Next, enter the relevant details for <strong class="bold">Project name</strong>, <strong class="bold">Location,</strong> and <span class="No-Break"><strong class="bold">Solution name</strong></span><span class="No-Break">.</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer025">
<img alt="Figure 2.16: Configure your new project" height="1148" src="image/Image_B20941_02_16.jpg" width="1645"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.16: Configure your new project</p>
<ol>
<li value="4">On the final screen, select <strong class="bold">.NET 8 (Long Term Support)</strong> or any other .NET framework you want <span class="No-Break">to target.</span></li>
<li>Hit the <span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break"> button.</span></li>
</ol>
<p>This <a id="_idIndexMarker161"/>creates a solution containing a .NET MAUI project with the provided names at the given location, as shown in <span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.17</em></span><span class="No-Break">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer026">
<img alt="Figure 2.17: Recipes! .NET MAUI project" height="389" src="image/Image_B20941_02_17.jpg" width="1239"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.17: Recipes! .NET MAUI project</p>
<h3>Running your app</h3>
<p>Right off <a id="_idIndexMarker162"/>the bat, you can run your brand-new cross-platform application on Windows by pressing <em class="italic">F5</em> or by clicking the <strong class="bold">run</strong> button in Visual Studio. The <strong class="bold">run</strong> button should have <strong class="bold">Windows Machine</strong> next to it, indicating you are going to run your app natively on Windows. If the button doesn’t show <strong class="bold">Windows Machine</strong>, you can click the downward-pointing arrow for additional options, as shown in <span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.18</em></span><span class="No-Break">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer027">
<img alt="Figure 2.18: Choosing a Debug target" height="547" src="image/Image_B20941_02_18.jpg" width="952"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.18: Choosing a Debug target</p>
<p>When debugging a Windows app for the first time, Visual Studio might prompt you to enable <strong class="bold">Developer Mode</strong> in Windows. After that, your shiny new app should be deployed and running <span class="No-Break">on Windows!</span></p>
<p>We can also <a id="_idIndexMarker163"/>debug right away on Android: click the arrow next to <strong class="bold">Windows Machine</strong> that points downward, select <strong class="bold">Android Emulators</strong>, and select an emulator from the list. If this is your first time running an Android app, you will get an error message inside <strong class="bold">Error List</strong> in Visual Studio, prompting you to accept the Android SDK licenses. Double-clicking the message should open <strong class="bold">Android SDK – License Agreement</strong>, which you should accept in order to continue. Hit <em class="italic">F5</em> again, or click the <strong class="bold">run</strong> button – which should contain the name of your emulator – in Visual Studio. Starting the emulator for the first time and deploying it might take a while, but after some time, you will see an emulator popping up with your native Android app running <span class="No-Break">on it.</span></p>
<p>In comparison, if you are connected to a Mac, you can select an iOS simulator as well and see your native iOS running on an iOS simulator! If you have an Android or iOS device connected to<a id="_idIndexMarker164"/> your PC, it should appear in the list as well. Selecting it and running the application should deploy your app onto your <span class="No-Break">physical device.</span></p>
<h3>.NET Hot Reload and XAML Hot Reload</h3>
<p>With <strong class="bold">.NET Hot Reload</strong>, developers <a id="_idIndexMarker165"/>can make changes <a id="_idIndexMarker166"/>to their <a id="_idIndexMarker167"/>source code while the application <a id="_idIndexMarker168"/>is running, without the need to pause or rebuild the app. It enables faster iteration and real-time feedback on code modifications. Why don’t we go ahead and make some changes to our code while the app <span class="No-Break">is running?</span></p>
<ol>
<li>Open the <span class="No-Break"><strong class="source-inline">MainPage.xaml.cs</strong></span><span class="No-Break"> file.</span></li>
<li>In the <strong class="source-inline">OnCounterClicked</strong> method, change <strong class="source-inline">count++</strong> to <strong class="source-inline">count += </strong><span class="No-Break"><strong class="source-inline">2</strong></span><span class="No-Break">.</span><p class="list-inset">Save your <a id="_idIndexMarker169"/>changes or manually hit <strong class="bold">Hot Reload </strong>(<em class="italic">Alt</em> + <em class="italic">F10</em>) in Visual Studio. In the drop-down menu of this button, you can <a id="_idIndexMarker170"/>also find a <strong class="bold">Hot Reload on File Save</strong> setting that you might want to check. Having this checked should automatically trigger <strong class="bold">Hot Reload</strong> when you save <span class="No-Break">your changes.</span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer028">
<img alt="Figure 2.19: Hot Reload" height="330" src="image/Image_B20941_02_19.jpg" width="1139"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.19: Hot Reload</p>
<ol>
<li value="3">Go back to the running app and click the button in the app and you should see that the counter is incremented by two every time you <span class="No-Break">click it.</span></li>
</ol>
<p>Additionally, with <strong class="bold">XAML Hot Reload</strong>, we can <a id="_idIndexMarker171"/>even update the XAML code while the app is running and immediately see the updated UI. So, while our app is running, let’s update some things on <span class="No-Break">the screen:</span></p>
<ol>
<li>Run your app on your platform <span class="No-Break">of choice.</span></li>
<li>While the app is running, go to Visual Studio and <span class="No-Break">open </span><span class="No-Break"><strong class="source-inline">MainPage.xaml</strong></span><span class="No-Break">.</span></li>
<li>Change the <strong class="source-inline">Text</strong> property of the first <strong class="source-inline">Label</strong> from <strong class="source-inline">"Hello, World"</strong> <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">"Recipes!"</strong></span><span class="No-Break">:</span><pre class="source-code">
&lt;Label
    FontSize="32"
    HorizontalOptions="Center"
<strong class="bold">    Text="Recipes!"</strong> /&gt;</pre><p class="list-inset">Change the <strong class="source-inline">Text</strong> property of the second <strong class="source-inline">Label</strong> to <strong class="source-inline">"Find your next </strong><span class="No-Break"><strong class="source-inline">favorite dish."</strong></span><span class="No-Break">:</span></p><pre class="source-code">&lt;Label
    FontSize="18"
    HorizontalOptions="Center"
    <strong class="bold">Text="Find your next favorite dish."</strong> /&gt;</pre></li> <li>Add a <strong class="source-inline">BackgroundColor</strong> property to <strong class="source-inline">Button</strong> and give it the value of <strong class="source-inline">"#FCB64A"</strong>, and set the <strong class="source-inline">TextColor</strong> property <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">"white"</strong></span><span class="No-Break">:</span><pre class="source-code">
&lt;Button
    x:Name="CounterBtn"
    <strong class="bold">BackgroundColor="#F8B146"</strong>
    Clicked="OnCounterClicked"
    HorizontalOptions="Center"
    Text="Click me"
    <strong class="bold">TextColor="white" </strong>/&gt;</pre></li> <li>Save the <a id="_idIndexMarker172"/>changes you have made, and you should <a id="_idIndexMarker173"/>see the UI changes immediately being reflected in your <span class="No-Break">running app.</span></li>
</ol>
<p>.NET Hot Reload and XAML Hot Reload are fantastic tools as they avoid needing to stop, rebuild, and redeploy your app for small, <span class="No-Break">incremental changes.</span></p>
<h3>Adding a splash screen and app icons</h3>
<p>With .NET MAUI’s single-project approach comes the ability to manage all of the app’s resources (<a id="_idIndexMarker174"/>such as images, icons, fonts, and so on) in that <a id="_idIndexMarker175"/>single project. During compilation, all the resources inside the relevant <strong class="source-inline">Platforms</strong> folder are picked up together with everything inside the <strong class="source-inline">Resources</strong> folder. All of this is embedded in the resulting <span class="No-Break">native app.</span></p>
<p>So, if you want, you can add a <strong class="bold">splash screen</strong> to your Android and iOS app by adding the file format required by the platform to the specific <strong class="source-inline">Platforms</strong> subfolder. The same goes for <strong class="bold">app icons</strong>: you can add them as resources in the required format and sizes to each of the <strong class="source-inline">Platforms</strong> subfolders. But, in MAUI, there is a much easier way: .NET MAUI can generate splash screens and app icons for us. Let’s <span class="No-Break">see how:</span></p>
<ol>
<li>In the <strong class="bold">Solution Explorer</strong>, go to <strong class="bold">Resources</strong> | <strong class="bold">Splash</strong> and remove the existing <span class="No-Break"><strong class="source-inline">splash.svg</strong></span><span class="No-Break"> file.</span></li>
<li>Right-click the <strong class="source-inline">Splash</strong> folder, select <strong class="bold">Add</strong> | <strong class="bold">Existing Item</strong>, and browse to the file that you want to use as an image on the app’s splash screen. Let’s take the <span class="No-Break"><strong class="source-inline">Chapter 02</strong></span><strong class="source-inline">/Assets/recipes-logo.svg</strong> file, which can be found in the code repository shared at the start of <span class="No-Break">this chapter.</span></li>
<li>Rename the file to <strong class="source-inline">splash.svg</strong> and set <strong class="bold">Build Action</strong> <span class="No-Break">to </span><span class="No-Break"><strong class="bold">MauiSplashScreen</strong></span><span class="No-Break">.</span></li>
<li>Open the project’s <strong class="source-inline">csproj</strong> file by clicking on your MAUI project in the <strong class="bold">Solution Explorer</strong>. Inside the <strong class="source-inline">csproj</strong> file, find the <strong class="source-inline">MauiSplashScreen</strong> tag. You can <a id="_idIndexMarker176"/>add a <strong class="source-inline">Color</strong> property to define <a id="_idIndexMarker177"/>the background color that needs to be used for the splash screen. The given <strong class="source-inline">svg</strong> will be centered on the splash screen with the defined <span class="No-Break">background color:</span><pre class="source-code">
<strong class="bold">&lt;MauiSplashScreen Include="Resources\Splash\splash.svg" Color="#F8B146" /&gt;</strong></pre></li> <li>Clean and rebuild your solution and run your app again. You should now see the updated splash screen, as shown in <span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.20</em></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer029">
<img alt="Figure 2.20: The Recipes! app splash screen on iOS and Android" height="1013" src="image/Image_B20941_02_20.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.20: The Recipes! app splash screen on iOS and Android</p>
<p class="callout-heading">Note</p>
<p class="callout">When <a id="_idIndexMarker178"/>deploying on a physical iOS device from your <a id="_idIndexMarker179"/>Windows PC by using Hot Restart, your splash screen will not get updated and the standard .NET splash screen will remain. This is a limitation of Hot Restart, even though you have correctly configured your custom splash screen. In order to verify your splash screen, it’s best to deploy it on a physical device that is connected to <span class="No-Break">a Mac.</span></p>
<p>Not only is .NET MAUI capable of generating a splash screen for us, but .NET MAUI can also generate app icons for our app as well! <span class="No-Break">Here’s how:</span></p>
<ol>
<li>In the <strong class="bold">Solution</strong> <strong class="bold">Explorer</strong>, go to <strong class="bold">Resources</strong> | <strong class="bold">AppIcon</strong> and delete the <strong class="source-inline">appicon.svg</strong> and <span class="No-Break"><strong class="source-inline">appiconfg.svg</strong></span><span class="No-Break"> files.</span></li>
<li>Right-click the <strong class="source-inline">Resources</strong> folder, select <strong class="bold">Add</strong> | <strong class="bold">Existing</strong> <strong class="bold">Item</strong>, and browse to the file that you want to use as the icon of your app. Let’s take the <span class="No-Break"><strong class="source-inline">Chapter </strong></span><span class="No-Break"><strong class="source-inline">02</strong></span><span class="No-Break"><strong class="source-inline">/Assets/recipes-appicon.svg</strong></span><span class="No-Break"> file.</span></li>
<li>Rename the file to <strong class="source-inline">appicon.svg</strong> and set <strong class="bold">Build Action</strong> <span class="No-Break">to </span><span class="No-Break"><strong class="bold">MauiIcon</strong></span><span class="No-Break">.</span></li>
<li>Look into the project’s <strong class="source-inline">csproj</strong> file and look for the <strong class="source-inline">MauiIcon</strong> tag. Add a <span class="No-Break"><strong class="source-inline">Color</strong></span><span class="No-Break"> property:</span><pre class="source-code">
&lt;<strong class="bold">MauiIcon</strong> Include="Resources\AppIcon\appicon.svg" <strong class="bold">Color="#F8B146"</strong> /&gt;</pre></li> </ol>
<p>Clean and rebuild your solution to make sure your app icon gets shown on your device. You might <a id="_idIndexMarker180"/>want to delete the app from your <a id="_idIndexMarker181"/>device as well prior to deploying it. Once you have deployed your app, you should see your updated <span class="No-Break">app icon:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer030">
<img alt="Figure 2.21: The Recipes! app’s icon on Android, Windows, and iOS" height="263" src="image/Image_B20941_02_21.jpg" width="1276"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.21: The Recipes! app’s icon on Android, Windows, and iOS</p>
<p>And there you have it! With very little effort, we’ve created a cross-platform app, complete with a splash screen and <span class="No-Break">app icons.</span></p>
<h1 id="_idParaDest-49"><a id="_idTextAnchor049"/>Summary</h1>
<p>In this chapter, we provided an overview of .NET MAUI: what it is, how it works, and how to get started with creating a cross-platform app using .NET MAUI. We walked through the process of creating an app, complete with a splash screen and app icons. Additionally, we examined .NET Hot Reload and XAML Hot Reload, features that enable us to update code while the app is running, dramatically increasing our efficiency. Now that you have a holistic understanding of .NET MAUI and the MVVM design pattern, we can continue our journey by exploring how to effectively apply this pattern within the .NET <span class="No-Break">MAUI framework.</span></p>
<p>In <a href="B20941_03.xhtml#_idTextAnchor051"><span class="No-Break"><em class="italic">Chapter 3</em></span></a>, <em class="italic">Data Binding Building Blocks in .NET MAUI</em>, we’ll explore the components available in .NET MAUI that enable us to build cross-platform apps using the <span class="No-Break">MVVM pattern.</span></p>
<h1 id="_idParaDest-50"><a id="_idTextAnchor050"/>Further reading</h1>
<p>To learn more about the topics that were covered in this chapter, take a look at the <span class="No-Break">following resources:</span></p>
<ul>
<li><em class="italic">Creating a splash screen in .NET </em><span class="No-Break"><em class="italic">MAUI</em></span><span class="No-Break">: </span><a href="https://learn.microsoft.com/dotnet/maui/user-interface/images/splashscreen"><span class="No-Break">https://learn.microsoft.com/dotnet/maui/user-interface/images/splashscreen</span></a></li>
<li><em class="italic">Working with app icons in .NET </em><span class="No-Break"><em class="italic">MAUI</em></span><span class="No-Break">: </span><a href="https://learn.microsoft.com/dotnet/maui/user-interface/images/app-icons"><span class="No-Break">https://learn.microsoft.com/dotnet/maui/user-interface/images/app-icons</span></a></li>
<li><em class="italic">Configure </em><span class="No-Break"><em class="italic">multi-targeting</em></span><span class="No-Break">: </span><a href="https://learn.microsoft.com/dotnet/maui/platform-integration/configure-multi-targeting"><span class="No-Break">https://learn.microsoft.com/dotnet/maui/platform-integration/configure-multi-targeting</span></a></li>
<li><em class="italic">.NET MAUI app </em><span class="No-Break"><em class="italic">lifecycle</em></span><span class="No-Break">: </span><a href="https://learn.microsoft.com/dotnet/maui/fundamentals/app-lifecycle"><span class="No-Break">https://learn.microsoft.com/dotnet/maui/fundamentals/app-lifecycle</span></a></li>
<li><em class="italic">.NET MAUI </em><span class="No-Break"><em class="italic">installation</em></span><span class="No-Break">: </span><a href="https://learn.microsoft.com/dotnet/maui/get-started/installation"><span class="No-Break">https://learn.microsoft.com/dotnet/maui/get-started/installation</span></a></li>
<li><em class="italic">Pair to </em><span class="No-Break"><em class="italic">Mac</em></span><span class="No-Break">: </span><a href="https://learn.microsoft.com/dotnet/maui/ios/pair-to-mac"><span class="No-Break">https://learn.microsoft.com/dotnet/maui/ios/pair-to-mac</span></a></li>
<li><em class="italic">Android </em><span class="No-Break"><em class="italic">emulator</em></span><span class="No-Break">: </span><a href="https://learn.microsoft.com/dotnet/maui/android/emulator/device-manager"><span class="No-Break">https://learn.microsoft.com/dotnet/maui/android/emulator/device-manager</span></a></li>
<li><em class="italic">Setting up an Android device for </em><span class="No-Break"><em class="italic">debugging</em></span><span class="No-Break">: </span><a href="https://learn.microsoft.com/dotnet/maui/android/device/setup"><span class="No-Break">https://learn.microsoft.com/dotnet/maui/android/device/setup</span></a></li>
<li><em class="italic">.NET MAUI Support </em><span class="No-Break"><em class="italic">Policy</em></span><span class="No-Break">: </span><a href="https://dotnet.microsoft.com/platform/support/policy/maui"><span class="No-Break">https://dotnet.microsoft.com/platform/support/policy/maui</span></a></li>
</ul>
</div>
</div></body></html>