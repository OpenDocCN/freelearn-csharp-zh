<html><head></head><body>
        

                            
                    <h1 class="header-title">To iOS with Xamarin</h1>
                
            
            
                
<p class="mce-root">In this chapter, we will be looking at these recipes:</p>
<ul>
<li>Installing Visual Studio for Mac</li>
<li>Hello iOS – creating a Xamarin iOS app</li>
<li>Creating the .NET Standard 2.0 library</li>
<li>Putting things together and testing the application</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Technical requirements</h1>
                
            
            
                
<p>Readers should have a basic knowledge of C#. They should also have a basic knowledge of using Visual Studio, installing packages using NuGet, and referencing libraries within projects from other projects.</p>
<p class="mce-root">The code files for this chapter can be found on GitHub:<br/>
<a href="https://github.com/PacktPublishing/DotNET-Standard-2-Cookbook/tree/master/Chapter08">https://github.com/PacktPublishing/DotNET-Standard-2-Cookbook/tree/master/Chapter08</a></p>
<p class="mce-root">Check out the following video to see the code in action:<br/>
<a href="https://goo.gl/fG1ErJ">https://goo.gl/fG1ErJ</a></p>


            

            
        
    

        

                            
                    <h1 class="header-title">Introduction</h1>
                
            
            
                
<p>Xamarin is a development platform that allows you to build native applications for iOS, Android, and Windows. The most amazing thing about Xamarin is that you can use your existing C# skills to develop these applications. At the beginning, Xamarin was called Xamarin Studio and was used for building applications in both macOS and Windows. Windows users had the extra privilege of using Visual Studio. After its acquisition by Microsoft, Xamarin Studio became Visual Studio for Mac. In this chapter, we will be using Visual Studio for Mac to build our applications, throughout the recipes. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Visual Studio for Mac</h1>
                
            
            
                
<p>In this recipe, we will be looking at how to get Visual Studio for Mac and install it. We will also be looking at setting up a few other things.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>Make sure you have a Mac to complete this recipe. Currently, I am using macOS High Sierra version 10.13.3. Also make sure you have already installed the latest version of XCode. XCode is required, alongside Visual Studio, for Mac to build iOS applications.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Let's open up your favorite browser.</li>
<li>Type <a href="https://www.xamarin.com/download">https://www.xamarin.com/download</a> in the address bar and press <em>Enter</em>.</li>
<li>You should see a screen similar to this:</li>
</ol>
<div><img class="alignnone size-full wp-image-818 image-border" src="img/14a6727e-719b-4e77-8f26-db4c38ef8f09.png" style="width:41.75em;height:35.92em;"/></div>
<ol start="4">
<li>Now, fill in your details and press the Download VS for Mac Community<strong> </strong>button. </li>
<li>This will download a file to the <kbd>Downloads</kbd> directory by default, named  <kbd>VisualStudioForMacInstaller__215259590.1517557727.dmg</kbd> or something similar (the end numbers might change when you download it.)</li>
<li>Double-click on that file.</li>
</ol>
<ol start="7">
<li>You should see a window similar to this:</li>
</ol>
<div><img class="alignnone size-full wp-image-819 image-border" src="img/b848f119-fae7-45d4-aa6e-15df9607ae24.png" style="width:17.50em;height:19.50em;"/></div>
<ol start="8">
<li>Double-click on the down arrow. In the next screen, choose the components to be installed:</li>
</ol>
<div><img class="alignnone size-full wp-image-820 image-border" src="img/f10758c4-2865-4038-8080-3b51658ac601.png" style="width:52.33em;height:28.67em;"/></div>
<ol start="9">
<li>Click the Install button to install all the components. Make sure you have selected Android and iOS.</li>
<li>After a successful installation, you should see this:</li>
</ol>
<div><img class="alignnone size-full wp-image-821 image-border" src="img/806dfbab-e7ba-4498-b11e-d29730d476fb.png" style="width:42.08em;height:28.58em;"/></div>
<ol start="11">
<li>Now, you can click Done to exit and start Visual Studio for Mac to launch the IDE:</li>
</ol>
<div><img class="alignnone size-full wp-image-822 image-border" src="img/7d6ac192-bd59-465e-9f99-0d01c7beca64.png" style="width:59.75em;height:35.50em;"/></div>
<p>Visual Studio for Mac</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>These are simple steps for installing Visual Studio for Mac. In step 8, you should see Install instead of Update. This screen appeared because I already have a version of Visual Studio for Mac installed.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Hello iOS – Creating a Xamarin iOS app</h1>
                
            
            
                
<p>In this recipe, we will be creating our first iOS application. This will be a <kbd>Hello World</kbd> type of application. Later on, we will change this application to use a .NET Standard 2.0 library.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>Make sure you have completed the previous recipe and installed Visual Studio for Mac. Also, make sure you have XCode installed alongside Visual Studio for Mac.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Open Finder.</li>
<li>Click Applications in the left-hand pane.</li>
<li>Now, double-click on the Visual Studio icon.</li>
<li>Now, click on the New Project button.</li>
<li>In the Choose a template for your project dialog box, scroll down till you reach the other section.</li>
<li>Select Miscellaneous and, under Generic, select Blank Solution:</li>
</ol>
<div><strong><img class="alignnone size-full wp-image-823 image-border" src="img/a78f2955-3fb0-4626-9a15-e6c05a57b3a5.png" style="width:42.92em;height:31.17em;"/><br/></strong></div>
<ol start="7">
<li>Now, click the Next button.</li>
<li>In the Solution Name: textbox, type <kbd>Chapter8.Xamarin</kbd>. Also make sure you have selected a proper location: </li>
</ol>
<div><img class="alignnone size-full wp-image-824 image-border" src="img/dd1fadee-247e-46c8-bafd-40b18bbcdc11.png" style="width:52.08em;height:37.83em;"/></div>
<ol start="9">
<li>Now, click Create.</li>
<li>Now, the Solution Explorer should look like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-825 image-border" src="img/1e4a4df0-0a42-4902-b963-9b16fff192f9.png" style="width:25.17em;height:7.42em;"/></div>
<ol start="11">
<li>Now, <em>Ctrl</em> + click on the Chapter8.Xamarin label and select Add  | New Project.</li>
<li>Select App under the iOS section in the left-hand pane and select Single View App in the right-hand pane.</li>
<li>Make sure C# is selected as the programming language:</li>
</ol>
<div><img class="alignnone size-full wp-image-826 image-border" src="img/7902ab69-3413-47d6-bc6f-bbebcb8ed5dd.png" style="width:49.67em;height:36.17em;"/></div>
<ol start="14">
<li>Click the Next button.</li>
<li>The New Project dialog box will be displayed.</li>
<li>Type <kbd>Chapter8.Xamarin.iOSApp</kbd> in the App Name: textbox, <kbd>com.chapter8</kbd> in the Organization Identifier: textbox, and uncheck iPad from the devices. Leave the Target: OS as it is:</li>
</ol>
<div><img class="alignnone size-full wp-image-827 image-border" src="img/846187d5-f89a-4900-a60e-2fc279bca039.png" style="width:54.83em;height:39.83em;"/></div>
<ol start="17">
<li>Click Next.</li>
<li>Leave everything as it is and click Create:</li>
</ol>
<div><img class="alignnone size-full wp-image-828 image-border" src="img/3d2f89e6-fafc-4c71-bed9-9e5ec24fe000.png" style="width:51.92em;height:37.67em;"/></div>
<ol start="19">
<li>Now, the Solution Explorer should look like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-829 image-border" src="img/a3d87b1b-ba63-478d-8234-64268c4298d2.png" style="width:28.58em;height:27.33em;"/></div>
<p>Solution Explorer</p>
<ol start="20">
<li>Now, press the <em>command</em> + <em>return</em> to debug the application or press the Play button on top of the Solution Explorer.</li>
</ol>
<ol start="21">
<li>Now, you should see the iOS emulator kicking in, which displays the first screen of the app:</li>
</ol>
<div><img class="alignnone size-full wp-image-830 image-border" src="img/fa0a3cf1-187e-4a83-95f8-814cbebff80e.png" style="width:20.08em;height:39.50em;"/></div>
<ol start="22">
<li>Congratulations! You have tested your first iOS application.</li>
<li>Now, stop the debugger by pressing <em>shift</em> + <em>command</em> + <em>return</em>.</li>
</ol>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>In steps 1 to 3, we opened Visual Studio for Mac and, in steps 6 to 9, we created a blank solution. We assigned a proper name to the solution as well. This blank solution will act as the base throughout this chapter. In steps 11 to 18, we added an iOS Single View app to the solution. In step 16, we added an Organization Identifier, which is a unique identifier for recognizing your app when you deploy to the app store. A single view app is a starter template to help developers build for iOS and has one custom <kbd>ViewController</kbd> to start with. We gave it a proper name too. At the end, in steps 20 to 23, we tested the default template generated by Visual Studio for Mac.</p>
<p>We will come back to this application in a later recipe and add a few controls and some code.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating the .NET Standard 2.0 library</h1>
                
            
            
                
<p>In this recipe, we will be building a .NET Standard 2.0 library using Visual Studio for Mac. We will be using the same solution from the previous recipe.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>Make sure you have completed the previous recipe that added an iOS project. If so, let's get started with adding the library and writing some code.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Open Finder.</li>
<li>Click Applications in the left-hand pane.</li>
<li>Now, double-click on the Visual Studio icon.</li>
</ol>
<ol start="4">
<li>Now, click on Open, locate the <kbd>Chapter8.Xamarin</kbd> solution, and open it.</li>
<li>The Solution Explorer should look like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-831 image-border" src="img/19ceee1b-11ea-491d-82fe-deef98f4065f.png" style="width:27.83em;height:26.58em;"/></div>
<ol start="6">
<li>Now, <em>control (^)</em> + click on the <kbd>Chapter8.Xamarin</kbd> label and select Add | New Project.</li>
<li>In the New Project dialog box, scroll down the left-hand pane till you see the Multi Platform section.</li>
</ol>
<ol start="8">
<li>Click on Library and select .NET Standard Library under General in the right-hand pane. Also make sure C# is selected:</li>
</ol>
<div><img class="alignnone size-full wp-image-832 image-border" src="img/ad785431-3e8c-48a9-907c-14fb3dd26ede.png" style="width:47.92em;height:34.83em;"/></div>
<ol start="9">
<li>Click Next.</li>
<li>Select Target Framework: as .NET Standard 2.0 and click Next:</li>
</ol>
<div><img class="alignnone size-full wp-image-833 image-border" src="img/baf09ab9-1b2e-42f0-b6ae-9e2f442746f6.png" style="width:48.42em;height:35.08em;"/></div>
<ol start="11">
<li>In the Project Name: textbox, type <kbd>Chapter8.Xamarin.iOSLib</kbd> as the name and leave the rest:</li>
</ol>
<div><img class="alignnone size-full wp-image-834 image-border" src="img/48bd28d9-b5d8-4753-9dee-3502097e6a8a.png" style="width:47.50em;height:34.50em;"/></div>
<ol start="12">
<li>Click Create.</li>
</ol>
<ol start="13">
<li>Now, the Solution Explorer should look like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-836 image-border" src="img/3f3a1b99-45b9-4af9-8133-6492e7c0b7d5.png" style="width:23.67em;height:28.08em;"/></div>
<ol start="14">
<li>Select the <kbd>Class1.cs</kbd> label and press <em>command</em> + <em>R</em> to rename.</li>
<li>Rename it <kbd>HelloLib.cs</kbd>.</li>
<li>Make sure you change the class name as well from <kbd>Class1</kbd> to <kbd>HelloLib</kbd>.</li>
<li>Now, inside the <kbd>HelloLib</kbd> class, add the following code:</li>
</ol>
<pre>      public string SayHello(string yourName)<br/>      {<br/>          return $"Hello {yourName}, Greetings from iOS";<br/>      }</pre>
<ol start="18">
<li>Click Build | Build All to check that all syntax is correct.</li>
</ol>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p class="mce-root">In steps 1 to 4, we opened the solution we created in the previous recipe. In steps 6 to 12, we added a .NET Standard 2.0 library to the solution. Now, the solution has two projects, an iOS project and a .NET Standard 2.0 library project. In steps 14 to 16, we renamed the class created by Visual Studio. We also renamed the actual class name to match the file name.</p>
<p>In step 17, we added a public method that takes a <kbd>string</kbd> parameter and returns a string as a welcome message. Finally, we performed a quick build to check for the correct syntax.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Putting things together and testing the application</h1>
                
            
            
                
<p>In this recipe, we will be adding some controls to the iOS application and using the .NET Standard 2.0 library created in the previous recipe.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>Make sure you have completed the previous two recipes. They are required in order to continue. If you have already completed them, let's perform a quick build and start.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Open Finder.</li>
<li>Click Applications in the left-hand pane.</li>
<li>Double-click on the Visual Studio icon.</li>
<li>Click on Open, locate the <kbd>Chapter8.Xamarin</kbd> solution, and open it.</li>
</ol>
<ol start="5">
<li>The Solution Explorer should look like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-837 image-border" src="img/3e93c5d9-975e-4daf-8a02-c9d419caee84.png" style="width:23.42em;height:27.83em;"/></div>
<ol start="6">
<li>Now, expand the <kbd>Chapter8.Xamarin.iOSApp</kbd> project node.</li>
<li>Double-click on the <kbd>Main.storyboard</kbd> file.</li>
<li>This will open the storyboard tab for your application.</li>
</ol>
<ol start="9">
<li>You should see the default layout of the iOS application as follows:</li>
</ol>
<div><img class="alignnone size-full wp-image-838 image-border" src="img/550a0a06-9990-46db-8536-d1b3cbdda88a.png" style="width:57.50em;height:34.17em;"/></div>
<p>Default layout of the iOS application</p>
<ol start="10">
<li>Now, select the Toolbox window.</li>
<li>Click inside the <kbd>search</kbd> textbox and type <kbd>Button</kbd>.</li>
<li>Now, drag a Button control to the main white area of the canvas, in the middle.</li>
<li>Select the button. In the Properties window, type <kbd>Say Hello</kbd> under the Title label and type <kbd>HelloButton</kbd> in the Name property.</li>
</ol>
<ol start="14">
<li>Now, your canvas should look like this:</li>
</ol>
<div><img class="alignnone size-full wp-image-839 image-border" src="img/dda17003-4a1c-4c10-8cf5-d19cf1f78f45.png" style="width:25.83em;height:36.08em;"/></div>
<ol start="15">
<li>Now, in the Solution Explorer, <em>control (^)</em> + click on the References label and select Edit References.</li>
<li>In the Edit References dialog box, click on the Projects tab.</li>
</ol>
<ol start="17">
<li>Check <kbd>Chapter8.Xamarin.iOSLib</kbd> in the list and click OK:</li>
</ol>
<div><img class="alignnone size-full wp-image-840 image-border" src="img/985fa586-af0d-4e88-9397-bd7f5eba14a0.png" style="width:51.17em;height:23.67em;"/></div>
<ol start="18">
<li>Now, double-click on the <kbd>VeiwController.cs</kbd> file to open its code.</li>
<li>Scroll up till you reach the <kbd>using</kbd> directives and add the following <kbd>using</kbd> directive to access the library:</li>
</ol>
<pre>      using Chapter8.Xamarin.iOSLib;<br/></pre>
<ol start="20">
<li>Now, scroll down till you reach the <kbd>ViewDidLoad()</kbd> method.</li>
<li>Add the following code next to the <kbd>base.ViewDidLoad()</kbd> line:</li>
</ol>
<pre>      HelloButton.TouchUpInside += (object sender, EventArgs e) =&gt;<br/>      {<br/>          var greetings = new HelloLib();<br/>          var message = greetings.SayHello("Fiqri Ismail");<br/><br/>          //Create an alert box    <br/>          var greetingsAlert = UIAlertController.Create("Hello", <br/>              message, UIAlertControllerStyle.Alert);<br/>          greetingsAlert.AddAction(UIAlertAction.Create("OK", <br/>              UIAlertActionStyle.Default, null));<br/><br/>          PresentViewController(greetingsAlert, true, null);<br/>       };</pre>
<ol start="22">
<li>Now, let's press <em>command</em> + <em>return</em> to debug the application.</li>
<li>You should see the following output:</li>
</ol>
<div><img class="alignnone size-full wp-image-841 image-border" src="img/52649291-6cf4-4086-864c-c20a000cd5bc.png" style="width:18.25em;height:35.92em;"/></div>
<ol start="24">
<li>Now click on the Say Hello button:</li>
</ol>
<div><img class="alignnone size-full wp-image-842 image-border" src="img/4af51ea2-746b-4464-8710-19e027003a9d.png" style="width:20.67em;height:40.58em;"/></div>
<ol start="25">
<li>Now, click OK and stop debugging.</li>
</ol>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>In steps 1 to 6, we opened an existing project solution. In steps 10 to 13, we added a simple button control to the canvas. After that, we changed the Title and Name properties of the button. In step 17, we added the reference to the library from the iOS project. Again, in step 19, we added a reference to the .NET Standard library from the code level.</p>
<p>In step 21, we added code to trigger the button touch up event. This event triggers when you touch and move up your finger on an actual device, but in the emulator it triggers when you click the button. We added the code inside the <kbd>ViewDidLoad()</kbd> method. This method triggers after the View is loaded. In the first two lines of the code, we created an instance of the <kbd>HelloLib</kbd> class from the library. Then, we executed the <kbd>SayHello</kbd> method and saved the return value in a variable.</p>
<p>Then, we created an alert box to display the Calcutta message with an OK button. Finally, in steps 23 and 24, we tested the iOS application we had just built.</p>
<p> </p>


            

            
        
    </body></html>