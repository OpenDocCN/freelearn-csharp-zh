<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer005">
<h1 id="_idParaDest-7"><a id="_idTextAnchor006"/>Preface</h1>
<p>This is a book about design patterns written in the context of the C# coding language. I know what you’re probably thinking. What does that even mean? Well, I could tell you but I’d spoil the rest of the book, and trust me, it’s a doozy!</p>
<p>Design Patterns are a codified set of best practices for software problems that come up so often that we can learn to recognize them and immediately know how to solve them. The solutions for these recurring problems found in patterns have been used for decades and they have proven to be effective.</p>
<p>Patterns also become a battle language for developers because they are so pervasive. This idea comes from the popular television and movie franchise, <em class="italic">Star Trek</em>. In <em class="italic">Star Trek</em>, the warrior race known as the Klingons has two languages. They have the regular Klingon language that they learn in Klingon kindergarten and an abbreviated version they use during combat. The phrase “<em class="italic">Load torpedo tubes 1 and 2 and fire a full spread</em>” can be reduced to one or two words. All Klingons know what that phrase means, and they win battles because they are a few seconds faster than their linguistically-challenged foes. Similarly, you can say “<em class="italic">Just use the decorator pattern</em>.” Any developer who has studied patterns will understand what to do next.</p>
<p>Patterns are not specific to the C# language. However, in order to learn patterns effectively, you need an implementation language. The original book on patterns was written by Erich Gamma, Richard Helm, Ralph Johnson, and John Vlissides, collectively known as the <strong class="bold">Gang of Four</strong>, or <strong class="bold">GoF</strong> for short. Their book, <em class="italic">Design Patterns: Elements of Reusable Object-Oriented Software</em>, is often referred to as <em class="italic">the GoF book</em>.</p>
<p>The GoF book was published in 1994, which makes it a technological dinosaur. While it may be old, the patterns explained within its pages are still very relevant. My criticism of the GoF book is it is written in a very academic format, and its implementation language is one you don’t really see anymore. The implementation language is an important detail. The GoF book covers 23 patterns, which is the same number of herbs and spices found in KFC’s original recipe. That can’t be a coincidence. This book doesn’t cover all 23 patterns, which is fine, because too much fried chicken isn’t very good for you. I’ve focused on patterns you’ll need every day in most of the projects you work on. I cover the remainder briefly in <a href="B18605_08.xhtml#_idTextAnchor152"><em class="italic">Chapter 8</em></a> at the end of the book.</p>
<p>There are some books out there that try to use pseudocode in order to be generic. I posit that such books are not useful to most people. If you’re like me, and you probably are in this regard, you’d wish for a code example that is easy to read, isn’t overly clever, and has a firm basis in the real world. Books and blog sites that try to teach you patterns with phrases such as “<strong class="source-inline">Class A</strong> inherits from <strong class="source-inline">Class B</strong>, which depends on <strong class="source-inline">Class C</strong>” are too vague to be useful. Equally annoying are books and sites that try to show you the pattern in 20 languages. They usually do a poor job with all 20 instead of focusing on doing a good job in just one. I am only using C# and the <strong class="bold">Unified Modeling Language</strong> (<strong class="bold">UML</strong>).</p>
<p>If you’ve never heard of UML before, don’t let it scare you. UML is a convention used to create diagrams. There are 14 types of UML diagrams. I only use one diagram type: class diagrams. I’ve included a primer in <a href="B18605_Appendix_2.xhtml#_idTextAnchor204"><em class="italic">Appendix 2</em></a> to help you if you are new to UML.</p>
<p>This book is about the real world, or at least a close facsimile. I’ve written this book using the same techniques that are used in real software projects. There’s realistic code in the book that solves legitimate business problems. There are also design mistakes included, along with thoughtful ways out of trouble.</p>
<p>Another issue with academic books is that they are wordy and hard to read. I have strived to take a dry subject and avoid being boring. I realize that nobody intentionally writes a boring book. Unfortunately, many have succeeded. I think the main cause of this boredom is how a lot of authors in technology view the task of writing a book. I think a lot of authors write books to prove how smart they are. These tend to be very academic. They are built to impress other academics. That’s great! The world needs academics. Most developers are not professional academics. I dare say, a great many developers have never taken a formal CS course. My aim in writing this book isn’t to prove I’m smart or capable. My wife would tell you that I am obnoxiously self-deprecating. Instead, my aim is to help you over the wall that is keeping you from moving to the next level in your coding. I had to climb this wall by myself, and for me, it wasn’t easy. However, if I can do it, you can too, with my help.</p>
<p>Instead of a dry academic treatment, this book presents a story that could actually happen in the real world. There’s just enough light science fiction involved to make it “just a story.” The circumstances in the story, though, are very real, and you’ll recognize them, even if you have a few years in the field.</p>
<p>On that point, I want to make a few things clear. The story in this book is fiction. While I am a <strong class="bold">fantastic</strong> software engineer, I am not a roboticist or a mechanical engineer, nor am I a qualified bicycle mechanic. At several points in the coming story, you may need to suspend your disbelief if these subjects are in your wheelhouse.</p>
<h1 id="_idParaDest-8"><a id="_idTextAnchor007"/>Who this book is for</h1>
<p>This book is for anyone who wants to become a better software developer. I wish I could get away with just saying that, but I probably can’t. Let me add a few thoughts on who will benefit from this book.</p>
<p>The easy answer is what I would call <em class="italic">mid-level</em> developers. These are developers who have a few years of experience with C# and are very comfortable with the basic principles of object-oriented programming. Ideally, you’ve seen a few UML class diagrams.</p>
<p>Another beneficiary of this book is a student who is learning C#. If you’re even remotely comfortable with basic OOP concepts, such as inheritance and composition, and you know your way around an <strong class="bold">integrated development environment</strong> (<strong class="bold">IDE</strong>), I want you to read this book. Sure, the mid-level developer might have an easier time, but learning patterns and SOLID principles will give you a strong foundation. You might avoid picking up some bad habits, or correct those you’ve already learned.</p>
<p>I also encourage you to read this book if you’re a recent graduate of either a university or a code boot camp. If you haven’t done a lot of C# work, but you’ve worked in other languages such as Java, C++, Python, or JavaScript, you are invited to read this book as well. I’ve tried to give you a bit of a boost by including a lengthy primer on C# and object-oriented programming concepts in <a href="B18605_Appendix_1.xhtml#_idTextAnchor178"><em class="italic">Appendix 1</em></a> of this book.</p>
<p>There is one group I want to reach most of all.</p>
<p>I especially want to encourage self-taught developers like myself. Those in this camp tend to have learned only what is absolutely necessary as a means of surviving your current sprint. If your teachers are YouTube and the blogosphere, chances are you will readily recognize the anti-patterns found in <a href="B18605_01.xhtml#_idTextAnchor016"><em class="italic">Chapter 1</em></a>, because by now, you’ve probably committed every sin relevant to software engineering. I only know this because I have too. As such, I know you stand to benefit the most from reading this book. </p>
<p>As I said, this book is for anyone who wants to become a better software developer. I guess I should have just stuck with that.</p>
<h1 id="_idParaDest-9"><a id="_idTextAnchor008"/>What this book covers</h1>
<p><a href="B18605_01.xhtml#_idTextAnchor016"><em class="italic">Chapter 1</em></a>, <em class="italic">There’s a Big Ball of Mud on Your Plate of Spaghetti</em>: Before we dive into patterns, let’s dive into why we need them. The world of software development is very messy, but it doesn’t have to be. The mess comes from a set of degenerative forces in our work that you will surely recognize.</p>
<p><a href="B18605_02.xhtml#_idTextAnchor036"><em class="italic">Chapter 2</em></a>, <em class="italic">Prepping For Practical Real-World Applications of Patterns in C#</em>: To defeat the degenerative forces mentioned in <a href="B18605_01.xhtml#_idTextAnchor016"><em class="italic">Chapter 1</em></a>, you’re going to have to step up your game. This chapter presents some rules and principles. If you can adhere to them, you will have the discipline needed to use design patterns to their greatest effect.</p>
<p><a href="B18605_03.xhtml#_idTextAnchor063"><em class="italic">Chapter 3</em></a>, <em class="italic">Getting Creative with Creational Patterns</em>: Now that you are thoroughly prepared, this chapter introduces our story. It covers patterns designed to make the instantiation of your classes more robust and more flexible. After reading this chapter, you’ll never look at the <strong class="source-inline">new</strong> keyword the same way.</p>
<p><a href="B18605_04.xhtml#_idTextAnchor078"><em class="italic">Chapter 4</em></a>, <em class="italic">Fortify Your Code with Structural Patterns</em>: This chapter covers techniques you can use to structure your classes for maximum flexibility while honoring the SOLID principles covered in <a href="B18605_02.xhtml#_idTextAnchor036"><em class="italic">Chapter 2</em></a>.</p>
<p><a href="B18605_05.xhtml#_idTextAnchor089"><em class="italic">Chapter 5</em></a>, <em class="italic">Wrangling Problem Code by Applying Behavioral Patterns</em>: Got algorithms? You need a flexible set of patterns in order to maximize their effectiveness and flexibility. You need behavioral patterns.</p>
<p><a href="B18605_06.xhtml#_idTextAnchor110"><em class="italic">Chapter 6</em></a>, <em class="italic">Step Away from the IDE! Designing with Patterns Before You Code</em>: In this chapter, we consider ways to design our code with patterns before we write a single line in our IDE. After an unfortunate turn of events in our story, we find our company drastically and rapidly changing direction. We need a new product design, and we need it last week! Let’s draw our designs in UML first! This saves a lot of time and energy and prevents the possibility of some pointy-haired boss telling us to ship a prototype.</p>
<p><a href="B18605_07.xhtml#_idTextAnchor136"><em class="italic">Chapter 7</em></a>, <em class="italic">Nothing Left but the Typing – Implementing the Wheelchair Project</em>: In the last chapter, we came up with an elegant set of design diagrams. In this chapter, we do the typing. You’ll implement the same patterns you learned earlier in the book, but this time, you’ll use them in concert with each other on a real-world project.</p>
<p><a href="B18605_08.xhtml#_idTextAnchor152"><em class="italic">Chapter 8</em></a>, <em class="italic">Now You Know Some Patterns. What Next?</em>: We’ve had a lot of fun learning patterns so far, but this is only the tip of the iceberg. There are patterns everywhere! They aren’t limited to the practice of OOP. In this chapter, we cover the GoF patterns we didn’t cover in our story. </p>
<p><em class="italic">Chapter 9</em>, <a href="B18605_Appendix_1.xhtml#_idTextAnchor178"><em class="italic">Appendix 1</em></a><em class="italic"> – A Brief Review of OOP Principles in C#</em>: This appendix is designed for those who are new to C# or maybe haven’t used it in a while, or are coming from another language.</p>
<p><em class="italic">Chapter 10</em>, <a href="B18605_Appendix_2.xhtml#_idTextAnchor204"><em class="italic">Appendix 2</em></a><em class="italic"> – A Primer on the Unified Modeling Language</em>: The Unified Modeling Language is a documentation convention used by software developers. It defines the structure of the pattern design diagrams used throughout the book. While UML has 14 different diagram types, we really only use class diagrams. Most presentations on patterns have two diagrams. I draw a generic one, and a second diagram that mirrors the project code. This appendix shows you the conventions used in the diagrams.</p>
<h1 id="_idParaDest-10"><a id="_idTextAnchor009"/>To get the most out of this book</h1>
<p>To get the most out of this book you should be familiar with C#. You need to be competent in using one of the three popular IDEs: Visual Studio, Rider, or Visual Studio Code. You should also understand basic object-oriented programming principles such as abstraction, inheritance, encapsulation, and composition. </p>
<p>I don’t spend very much time covering how to use your IDE in this book. However, I do include <a href="B18605_Appendix_1.xhtml#_idTextAnchor178"><em class="italic">Appendix 1</em></a>, which covers how to create a project just in case you’re rusty. This book isn’t designed to be a step-by-step guide through a set of projects. The code in the sample projects doesn’t matter. We’re focusing on the structure of the code, rather than the content of the classes.</p>
<p>The projects in this book are all either command-line or library projects. We won’t be working with any frontend or user interface code. This is done to reduce the level of noise in the projects. I want you focused on the structure of the classes, not what is inside them, nor even what the program is really doing.</p>
<p>I used Windows 10 to create the code in this book. If you want to follow along with the code in the book, you can probably use macOS or Linux. However, I don’t cover those operating systems explicitly, nor do I test the sample code in operating systems other than Windows.</p>
<p>If you intend to code along with our book’s heroes, you’ll need to set up your computer with an appropriate IDE, and .NET Core 6 or later. I used Rider as my IDE, but I verified the code in Visual Studio 2022 and Visual Studio Code.</p>
<table class="No-Table-Style" id="table001">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="bold">Software/hardware covered in the book</strong></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold">Operating system requirements</strong></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p>C# 10</p>
</td>
<td class="No-Table-Style">
<p>Windows</p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p>.NET Core 6</p>
</td>
<td class="No-Table-Style">
<p>Windows</p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p>Rider, Visual Studio, or Visual Studio Code</p>
</td>
<td class="No-Table-Style">
<p>Windows</p>
</td>
</tr>
</tbody>
</table>
<p><strong class="bold">If you are using the digital version of this book, we advise you to type the code yourself or access the code from the book’s GitHub repository (a link is available in the next section). Doing so will help you avoid any potential errors related to the copying and pasting of code.</strong></p>
<p>I strongly encourage you to type the code from the book by hand. You’ll learn more by typing it out, by making mistakes, and then fixing them yourself.</p>
<h1 id="_idParaDest-11"><a id="_idTextAnchor010"/>Download the example code files</h1>
<p>You can download the example code files for this book from GitHub at <a href="https://github.com/Kpackt/Real-World-Implementation-of-C-Design-Patterns">https://github.com/Kpackt/Real-World-Implementation-of-C-Design-Patterns</a>. Please note that GitHub won’t allow us to use the # character in C# so the name of the repository is slightly misleading. If there’s an update to the code, it will be updated in the GitHub repository.</p>
<p>We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing/">https://github.com/PacktPublishing/</a>. Check them out!</p>
<p>This book has a companion website developed by the author. You can find it at <a href="https://csharppatterns.dev">https://csharppatterns.dev</a>.</p>
<h1 id="_idParaDest-12"><a id="_idTextAnchor011"/>Download the images</h1>
<p>We also provide a PDF file that has color images of the screenshots and diagrams used in this book. You can download it here: <a href="https://packt.link/3KWzG">https://packt.link/3KWzG</a>.</p>
<h1 id="_idParaDest-13"><a id="_idTextAnchor012"/>Conventions used</h1>
<p>There are a number of text conventions used throughout this book.</p>
<p><strong class="source-inline">Code in text</strong>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. Here is an example: “Kitty starts by creating an abstraction for what the builders will be producing – that is, the product. She creates an interface called <strong class="source-inline">IBicycleProduct</strong>.”</p>
<p>A block of code is set as follows:</p>
<p class="source-code">public interface IBicycleProduct</p>
<p class="source-code">{</p>
<p class="source-code">  public IFrame Frame { get; set; }</p>
<p class="source-code">  public ISuspension Suspension { get; set; }</p>
<p class="source-code">  public IHandlebars Handlebars { get; set; }</p>
<p class="source-code">  public IDrivetrain Drivetrain { get; set; }</p>
<p class="source-code">  public ISeat Seat { get; set; }</p>
<p class="source-code">  public IBrakes Brakes { get; set; }</p>
<p class="source-code">}</p>
<p>When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p>
<pre class="source-code">namespace <strong class="bold">WheelchairProject</strong>;
public abstract class WheelchairComponent
{</pre>
<p>Any command-line input or output is written as follows:</p>
<p class="source-code">$ dotnet build</p>
<p class="source-code">$ dotnet run hillcrest</p>
<p class="callout-heading">Tips or important notes	</p>
<p class="callout">Appear like this.</p>
<h1 id="_idParaDest-14"><a id="_idTextAnchor013"/>Get in touch</h1>
<p>Feedback from our readers is always welcome.</p>
<p><strong class="bold">General feedback</strong>: If you have questions about any aspect of this book, email us at <a href="mailto:customercare@packtpub.com">customercare@packtpub.com</a> and mention the book title in the subject of your message.</p>
<p><strong class="bold">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you would report this to us. Please visit <a href="http://www.packtpub.com/support/errata">www.packtpub.com/support/errata</a> and fill in the form.</p>
<p><strong class="bold">Piracy</strong>: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <a href="mailto:copyright@packt.com">copyright@packt.com</a> with a link to the material.</p>
<p><strong class="bold">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com">authors.packtpub.com</a>.</p>
<h1 id="_idParaDest-15"><a id="_idTextAnchor014"/>Share Your Thoughts</h1>
<p>Once you’ve read <em class="italic">Real-World Implementation of C# Design Patterns</em>, we’d love to hear your thoughts! Please <a href="https://packt.link/r/1-803-24273-6">click here to go straight to the Amazon review page</a> for this book and share your feedback.</p>
<p>Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content.</p>
</div>
<div>
<div id="_idContainer006">
<img alt="" height="1013" src="image/part-1-big-ball-of-mud-on-you-plate-of-spaghetti-2-bw.jpg" width="1254"/>
</div>
</div>
</div>


<div id="sbo-rt-content"><div class="Content" id="_idContainer007">
<h1 id="_idParaDest-16"><a id="_idTextAnchor015"/>Part 1: Introduction to Patterns (Pasta) and Antipatterns (Antipasta)</h1>
<p>We will begin <em class="italic">Part 1</em> by describing what patterns are and where they came from and giving an overview of how they work and why you’d want to learn them.</p>
<p>This part covers the following chapters:</p>
<ul>
<li><a href="B18605_01.xhtml#_idTextAnchor016"><em class="italic">Chapter 1</em></a>, <em class="italic">There’s a Big Ball of Mud on Your Plate of Spaghetti</em></li>
<li><a href="B18605_02.xhtml#_idTextAnchor036"><em class="italic">Chapter 2</em></a>, <em class="italic">Prepping for Practical Real-World Applications of Patterns in C#</em></li>
</ul>
</div>
</div>
</body></html>