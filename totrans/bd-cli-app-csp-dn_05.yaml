- en: '5'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '5'
- en: Input/Output and File Handling
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è¾“å…¥/è¾“å‡ºå’Œæ–‡ä»¶å¤„ç†
- en: In the previous chapter, we laid out the foundations of `System.CommandLine`
    library to infuse CLI capabilities into the application.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæˆ‘ä»¬ä¸ºå°† CLI åŠŸèƒ½æ³¨å…¥åº”ç”¨ç¨‹åºå¥ å®šäº† `System.CommandLine` åº“çš„åŸºç¡€ã€‚
- en: For now, our CLI application only contains one command (`link`), which allows
    for managing bookmarks by adding new ones or listing, updating, or removing existing
    ones.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®å‰ï¼Œæˆ‘ä»¬çš„ CLI åº”ç”¨ç¨‹åºåªåŒ…å«ä¸€ä¸ªå‘½ä»¤ï¼ˆ`link`ï¼‰ï¼Œå…è®¸é€šè¿‡æ·»åŠ æ–°ä¹¦ç­¾æˆ–åˆ—å‡ºã€æ›´æ–°æˆ–åˆ é™¤ç°æœ‰ä¹¦ç­¾æ¥ç®¡ç†ä¹¦ç­¾ã€‚
- en: 'With this chapter, we are working toward two goals:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡æœ¬ç« ï¼Œæˆ‘ä»¬è‡´åŠ›äºä¸¤ä¸ªç›®æ ‡ï¼š
- en: To go a bit deeper with options to further control input values for our CLI
    applicationâ€™s command options.
  id: totrans-5
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸ºäº†è¿›ä¸€æ­¥æ§åˆ¶ CLI åº”ç”¨ç¨‹åºå‘½ä»¤é€‰é¡¹çš„è¾“å…¥å€¼ï¼Œè®©æˆ‘ä»¬æ›´æ·±å…¥åœ°æ¢è®¨é€‰é¡¹ã€‚
- en: To see how to handle input and output files in a CLI application. This might
    be handy for import and export operations, making it easier to back up and restore
    our applicationâ€™s data and share it with other applications.
  id: totrans-6
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: è¦äº†è§£å¦‚ä½•åœ¨ CLI åº”ç”¨ç¨‹åºä¸­å¤„ç†è¾“å…¥å’Œè¾“å‡ºæ–‡ä»¶ã€‚è¿™å¯èƒ½å¯¹å¯¼å…¥å’Œå¯¼å‡ºæ“ä½œå¾ˆæœ‰ç”¨ï¼Œä½¿å¤‡ä»½å’Œæ¢å¤æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ•°æ®ä»¥åŠä¸å…¶ä»–åº”ç”¨ç¨‹åºå…±äº«æ•°æ®å˜å¾—æ›´åŠ å®¹æ˜“ã€‚
- en: 'Specifically, weâ€™ll cover the following main topics:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†æ¶µç›–ä»¥ä¸‹ä¸»è¦ä¸»é¢˜ï¼š
- en: Controlling input values for an option, determining when to use required versus
    non-required options, setting default values for options, controlling the set
    of allowed values for an option, and validating input values
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ§åˆ¶é€‰é¡¹çš„è¾“å…¥å€¼ï¼Œç¡®å®šä½•æ—¶ä½¿ç”¨å¿…å¡«æˆ–éå¿…å¡«é€‰é¡¹ï¼Œè®¾ç½®é€‰é¡¹çš„é»˜è®¤å€¼ï¼Œæ§åˆ¶é€‰é¡¹å…è®¸çš„å€¼é›†åˆï¼Œä»¥åŠéªŒè¯è¾“å…¥å€¼
- en: Working with files passed as parameters to the CLI application, both as input
    and output files, which will be useful for adding import and export capabilities
    to our CLI application
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸ CLI åº”ç”¨ç¨‹åºä½œä¸ºå‚æ•°ä¼ é€’çš„æ–‡ä»¶ä¸€èµ·å·¥ä½œï¼Œè¿™äº›æ–‡ä»¶ä½œä¸ºè¾“å…¥å’Œè¾“å‡ºæ–‡ä»¶ï¼Œè¿™å°†æœ‰åŠ©äºä¸ºæˆ‘ä»¬çš„ CLI åº”ç”¨ç¨‹åºæ·»åŠ å¯¼å…¥å’Œå¯¼å‡ºåŠŸèƒ½
- en: Technical requirements
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æŠ€æœ¯è¦æ±‚
- en: The code for this chapter can be found in the GitHub repository accompanying
    this book, [https://github.com/PacktPublishing/Building-CLI-Applications-with-C-Sharp-and-.NET/tree/main/Chapter05](https://github.com/PacktPublishing/Building-CLI-Applications-with-C-Sharp-and-.NET/tree/main/Chapter05).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬ç« çš„ä»£ç å¯ä»¥åœ¨æœ¬ä¹¦é™„å¸¦çš„ GitHub ä»“åº“ä¸­æ‰¾åˆ°ï¼Œ[https://github.com/PacktPublishing/Building-CLI-Applications-with-C-Sharp-and-.NET/tree/main/Chapter05](https://github.com/PacktPublishing/Building-CLI-Applications-with-C-Sharp-and-.NET/tree/main/Chapter05)ã€‚
- en: Controlling input values for an option
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ§åˆ¶é€‰é¡¹çš„è¾“å…¥å€¼
- en: Parameters are at the heart of any application. They allow users to indicate
    what command they want to execute and provide values to the input parameters.
    This is why, in this section and its subsections, we will cover the subtleties
    of dealing with these parameters.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°æ˜¯ä»»ä½•åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒã€‚å®ƒä»¬å…è®¸ç”¨æˆ·æŒ‡ç¤ºä»–ä»¬æƒ³è¦æ‰§è¡Œå“ªä¸ªå‘½ä»¤ï¼Œå¹¶ä¸ºè¾“å…¥å‚æ•°æä¾›å€¼ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨æœ¬èŠ‚åŠå…¶å­èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¤„ç†è¿™äº›å‚æ•°çš„ç»†å¾®å·®åˆ«ã€‚
- en: Required versus non-required options
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å¿…å¡«ä¸éå¿…å¡«é€‰é¡¹
- en: In its current state, adding a new bookmark requires both the name and the URL
    to be provided, which is, obviously, what we want.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å½“å‰çŠ¶æ€ä¸‹ï¼Œæ·»åŠ æ–°ä¹¦ç­¾éœ€è¦æä¾›åç§°å’Œ URLï¼Œè¿™æ˜¾ç„¶æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚
- en: 'This means that if we call the `link add` command without passing one of these
    options or their values, we should get an error such as the following:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬è°ƒç”¨ `link add` å‘½ä»¤è€Œæ²¡æœ‰ä¼ é€’è¿™äº›é€‰é¡¹æˆ–å®ƒä»¬çš„å€¼ï¼Œæˆ‘ä»¬åº”è¯¥å¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š
- en: '![Figure 5.1 â€“ The name and URL for a bookmark should be required](img/B22400_05_01.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾ 5.1 â€“ ä¹¦ç­¾çš„åç§°å’Œ URL åº”è¯¥æ˜¯å¿…å¡«é¡¹](img/B22400_05_01.jpg)'
- en: Figure 5.1 â€“ The name and URL for a bookmark should be required
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 5.1 â€“ ä¹¦ç­¾çš„åç§°å’Œ URL åº”è¯¥æ˜¯å¿…å¡«é¡¹
- en: 'However, if we run the program without passing these two options, we currently
    get the following result:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬è¿è¡Œç¨‹åºè€Œä¸ä¼ é€’è¿™ä¸¤ä¸ªé€‰é¡¹ï¼Œæˆ‘ä»¬ç›®å‰å¾—åˆ°ä»¥ä¸‹ç»“æœï¼š
- en: '![Figure 5.2 â€“ The name and URL for the added bookmark are currently optional](img/B22400_05_02.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾ 5.2 â€“ æ·»åŠ çš„ä¹¦ç­¾çš„åç§°å’Œ URL ç›®å‰æ˜¯å¯é€‰çš„](img/B22400_05_02.jpg)'
- en: Figure 5.2 â€“ The name and URL for the added bookmark are currently optional
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 5.2 â€“ æ·»åŠ çš„ä¹¦ç­¾çš„åç§°å’Œ URL ç›®å‰æ˜¯å¯é€‰çš„
- en: Notice how a new bookmark with no name and no URL is added to the collection
    of bookmarks. This is clearly not what we want!
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„å¦‚ä½•å°†æ²¡æœ‰åç§°å’Œ URL çš„æ–°ä¹¦ç­¾æ·»åŠ åˆ°ä¹¦ç­¾é›†åˆä¸­ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼
- en: Fortunately, the `Option` class provides a Boolean value to specify whether
    it should be required or optional.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: å¹¸è¿çš„æ˜¯ï¼Œ`Option` ç±»æä¾›äº†ä¸€ä¸ªå¸ƒå°”å€¼æ¥æŒ‡å®šå®ƒåº”è¯¥æ˜¯å¿…å¡«è¿˜æ˜¯å¯é€‰çš„ã€‚
- en: 'To make the name and URL options required, letâ€™s set their respective `IsRequired`
    property to `true`:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: è¦ä½¿åç§°å’Œ URL é€‰é¡¹æˆä¸ºå¿…å¡«é¡¹ï¼Œè®©æˆ‘ä»¬å°†å®ƒä»¬å„è‡ªçš„ `IsRequired` å±æ€§è®¾ç½®ä¸º `true`ï¼š
- en: '[PRE0]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'If we now run the program without passing in an option or its value, we get
    an error message:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬ç°åœ¨è¿è¡Œç¨‹åºè€Œä¸ä¼ é€’é€‰é¡¹æˆ–å…¶å€¼ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ï¼š
- en: '![Figure 5.3 â€“ The name and URL for the added bookmark are now required](img/B22400_05_03.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾5.3 â€“ æ·»åŠ çš„ä¹¦ç­¾çš„åç§°å’ŒURLç°åœ¨æ˜¯å¿…éœ€çš„](img/B22400_05_03.jpg)'
- en: Figure 5.3 â€“ The name and URL for the added bookmark are now required
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾5.3 â€“ æ·»åŠ çš„ä¹¦ç­¾çš„åç§°å’ŒURLç°åœ¨æ˜¯å¿…éœ€çš„
- en: Also note that the help menu clearly states that these two options are required.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: è¿˜è¦æ³¨æ„ï¼Œå¸®åŠ©èœå•æ¸…æ¥šåœ°è¯´æ˜äº†è¿™ä¸¤ä¸ªé€‰é¡¹æ˜¯å¿…éœ€çš„ã€‚
- en: So far, we have two required options. Letâ€™s add an optional one.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªå¿…éœ€çš„é€‰é¡¹ã€‚è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå¯é€‰çš„é€‰é¡¹ã€‚
- en: When an option is not required (i.e., optional), the application should not
    return an error if we donâ€™t pass that option or its value.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä¸€ä¸ªé€‰é¡¹ä¸æ˜¯å¿…éœ€çš„ï¼ˆå³å¯é€‰çš„ï¼‰æ—¶ï¼Œå¦‚æœæœªä¼ é€’è¯¥é€‰é¡¹æˆ–å…¶å€¼ï¼Œåº”ç”¨ç¨‹åºä¸åº”è¿”å›é”™è¯¯ã€‚
- en: Letâ€™s take an illustrative example.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç¤ºä¾‹æ¥è¯´æ˜ã€‚
- en: Letâ€™s say we want to classify our bookmarks by category. By doing so, we can
    imagine that we may want to list only the bookmarks that belong to a specific
    category.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘ä»¬æƒ³è¦æŒ‰ç±»åˆ«å¯¹æˆ‘ä»¬çš„ä¹¦ç­¾è¿›è¡Œåˆ†ç±»ã€‚é€šè¿‡è¿™æ ·åšï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡æˆ‘ä»¬å¯èƒ½åªæƒ³åˆ—å‡ºå±äºç‰¹å®šç±»åˆ«çš„ä¹¦ç­¾ã€‚
- en: 'For that matter, we will first add a `Category` property to the `Bookmark`
    class, as follows:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆå°†ä¸€ä¸ª`Category`å±æ€§æ·»åŠ åˆ°`Bookmark`ç±»ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '[PRE1]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Then, we will add an option for the category and pass it to the `add` command:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œæˆ‘ä»¬å°†ä¸ºç±»åˆ«æ·»åŠ ä¸€ä¸ªé€‰é¡¹ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™`add`å‘½ä»¤ï¼š
- en: '[PRE2]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Next, we update the handler method and its association with the command:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ›´æ–°å¤„ç†æ–¹æ³•åŠå…¶ä¸å‘½ä»¤çš„å…³è”ï¼š
- en: '[PRE3]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Finally, do not forget to update `BookmarkService` so it handles the `Category`
    property accordingly.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œä¸è¦å¿˜è®°æ›´æ–°`BookmarkService`ï¼Œä»¥ä¾¿å®ƒç›¸åº”åœ°å¤„ç†`Category`å±æ€§ã€‚
- en: 'Now, if we execute the application without passing the category, no error is
    returned:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä¼ é€’ç±»åˆ«å°±æ‰§è¡Œåº”ç”¨ç¨‹åºï¼Œä¸ä¼šè¿”å›é”™è¯¯ï¼š
- en: '![Figure 5.4 â€“ The Category option is optional](img/B22400_05_04.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾5.4 â€“ ç±»åˆ«é€‰é¡¹æ˜¯å¯é€‰çš„](img/B22400_05_04.jpg)'
- en: Figure 5.4 â€“ The Category option is optional
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾5.4 â€“ ç±»åˆ«é€‰é¡¹æ˜¯å¯é€‰çš„
- en: And, of course, if we pass a category, it works too. ğŸ˜Š
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬ä¼ é€’ä¸€ä¸ªç±»åˆ«ï¼Œå®ƒä¹Ÿä¼šæ­£å¸¸å·¥ä½œã€‚ğŸ˜Š
- en: '![Figure 5.5 â€“ Assigning a category to the newly added bookmark](img/B22400_05_05.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾5.5 â€“ ä¸ºæ–°æ·»åŠ çš„ä¹¦ç­¾åˆ†é…ç±»åˆ«](img/B22400_05_05.jpg)'
- en: Figure 5.5 â€“ Assigning a category to the newly added bookmark
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾5.5 â€“ ä¸ºæ–°æ·»åŠ çš„ä¹¦ç­¾åˆ†é…ç±»åˆ«
- en: However, since the category is now optional, if we donâ€™t pass it, what would
    its value be?
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œç”±äºç±»åˆ«ç°åœ¨æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä¼ é€’å®ƒï¼Œå®ƒçš„å€¼ä¼šæ˜¯ä»€ä¹ˆï¼Ÿ
- en: Double or single dash?
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: åŒæ¨ªçº¿è¿˜æ˜¯å•æ¨ªçº¿ï¼Ÿ
- en: You might be wondering when we should use double versus single dashes. Do we
    even have to use both?
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½æƒ³çŸ¥é“ä½•æ—¶åº”è¯¥ä½¿ç”¨åŒæ¨ªçº¿ä¸å•æ¨ªçº¿ã€‚æˆ‘ä»¬ç”šè‡³éœ€è¦ä½¿ç”¨ä¸¤è€…å—ï¼Ÿ
- en: The answer is no! You only use both if you want to provide both a long and a
    short form for passing in an option, but you can definitely opt for only one of
    these options.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼åªæœ‰å½“ä½ æƒ³ä¸ºä¼ é€’é€‰é¡¹æä¾›é•¿æ ¼å¼å’ŒçŸ­æ ¼å¼æ—¶ï¼Œä½ æ‰éœ€è¦ä½¿ç”¨ä¸¤è€…ï¼Œä½†ä½ ç»å¯¹å¯ä»¥é€‰æ‹©å…¶ä¸­ä¹‹ä¸€ã€‚
- en: For example, while `--set-max-concurrent-requests` might be more self-explanatory
    to someone new to your CLI, if they often use your CLI application, having to
    type this long form again and again may become frustrating. Thatâ€™s why a short
    form, such as `-m`, will be more appropriate.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œè™½ç„¶`--set-max-concurrent-requests`å¯èƒ½å¯¹åˆšæ¥è§¦ä½ çš„CLIçš„ç”¨æˆ·æ¥è¯´æ›´æ˜“äºç†è§£ï¼Œä½†å¦‚æœä»–ä»¬ç»å¸¸ä½¿ç”¨ä½ çš„CLIåº”ç”¨ç¨‹åºï¼Œåå¤è¾“å…¥è¿™ç§é•¿æ ¼å¼å¯èƒ½ä¼šå˜å¾—ä»¤äººæ²®ä¸§ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç®€çŸ­çš„å½¢å¼ï¼Œå¦‚`-m`ï¼Œå°†æ›´åŠ åˆé€‚ã€‚
- en: In the real world, you will notice that users who are just starting to use your
    CLI application will rely on long-form options and gradually transition to short
    forms as they become more experienced with your CLI application.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œä½ ä¼šæ³¨æ„åˆ°åˆšå¼€å§‹ä½¿ç”¨ä½ çš„CLIåº”ç”¨ç¨‹åºçš„ç”¨æˆ·ä¼šä¾èµ–äºé•¿æ ¼å¼é€‰é¡¹ï¼Œå¹¶éšç€ä»–ä»¬å¯¹CLIåº”ç”¨ç¨‹åºçš„ç†Ÿæ‚‰ç¨‹åº¦æé«˜ï¼Œé€æ¸è¿‡æ¸¡åˆ°çŸ­æ ¼å¼ã€‚
- en: 'So, for example, a junior user of Bookmarkr will prefer this syntax:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œä¾‹å¦‚ï¼ŒBookmarkrçš„åˆçº§ç”¨æˆ·å¯èƒ½ä¼šæ›´å–œæ¬¢è¿™ç§è¯­æ³•ï¼š
- en: '`bookmarkr link add --name "Packt Publishing" --``url "https://packtpub.com"`'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '`bookmarkr link add --name "Packt Publishing" --url "https://packtpub.com"`'
- en: 'An experienced user, on the other hand, is likely to prefer this syntax:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: å¦ä¸€æ–¹é¢ï¼Œç»éªŒä¸°å¯Œçš„ç”¨æˆ·å¯èƒ½ä¼šæ›´å–œæ¬¢è¿™ç§è¯­æ³•ï¼š
- en: '`bookmarkr link add -n "Packt Publishing" -``u "https://packtpub.com"`'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '`bookmarkr link add -n "Packt Publishing" -u "https://packtpub.com"`'
- en: What about arguments?
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: é‚£ä¹ˆï¼Œå‚æ•°æ€ä¹ˆæ ·ï¼Ÿ
- en: Ah! I can see that youâ€™ve learned about arguments. Arguments are instances of
    the `Argument` class, and they represent required parameters that are essential
    to the execution of a command.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: å•Šï¼æˆ‘å¯ä»¥çœ‹å‡ºä½ å·²ç»å­¦ä¹ äº†å…³äºå‚æ•°çš„çŸ¥è¯†ã€‚å‚æ•°æ˜¯`Argument`ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒä»¬ä»£è¡¨äº†æ‰§è¡Œå‘½ä»¤æ‰€å¿…éœ€çš„å‚æ•°ã€‚
- en: But waitâ€¦ why not use arguments instead of options for required parameters?
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†ç­‰ç­‰â€¦ä¸ºä»€ä¹ˆä¸ç”¨å‚æ•°è€Œä¸æ˜¯é€‰é¡¹æ¥ä¼ é€’å¿…éœ€å‚æ•°ï¼Ÿ
- en: You could, of course! But I donâ€™t like these because they are *positional* parameters
    and not *named* parameters. This means that only their position instructs the
    user about their purpose, which, to me, sacrifices the readability of the CLI
    request.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶å¯ä»¥ï¼ä½†æˆ‘ä¸å–œæ¬¢è¿™äº›ï¼Œå› ä¸ºå®ƒä»¬æ˜¯*ä½ç½®å‚æ•°*è€Œä¸æ˜¯*å‘½åå‚æ•°*ã€‚è¿™æ„å‘³ç€åªæœ‰å®ƒä»¬çš„é¡ºåºæŒ‡å¯¼ç”¨æˆ·äº†è§£å®ƒä»¬çš„ç›®çš„ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œè¿™ç‰ºç‰²äº†CLIè¯·æ±‚çš„å¯è¯»æ€§ã€‚
- en: 'To illustrate my point, here is what the call to the `link add` command would
    look like if it relied on arguments rather than parameters:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è¯´æ˜æˆ‘çš„è§‚ç‚¹ï¼Œä»¥ä¸‹æ˜¯å°†`link add`å‘½ä»¤çš„è°ƒç”¨æ–¹å¼ï¼Œå¦‚æœå®ƒä¾èµ–äºå‚æ•°è€Œä¸æ˜¯å‚æ•°ï¼š
- en: '[PRE4]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: See how this is way less readable than our previous request (which relies on
    options)?
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: çœ‹çœ‹è¿™æ¯”æˆ‘ä»¬ä¹‹å‰çš„è¯·æ±‚ï¼ˆä¾èµ–äºé€‰é¡¹ï¼‰çš„å¯è¯»æ€§å·®å¤šå°‘ï¼Ÿ
- en: Thatâ€™s why I donâ€™t like arguments and prefer to use options, specifying which
    ones are required and which ones are optional.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¸å–œæ¬¢å‚æ•°ï¼Œè€Œæ›´å–œæ¬¢ä½¿ç”¨é€‰é¡¹ï¼ŒæŒ‡å®šå“ªäº›æ˜¯å¿…é€‰çš„ï¼Œå“ªäº›æ˜¯å¯é€‰çš„ã€‚
- en: So, letâ€™s get back to exploring options.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œè®©æˆ‘ä»¬å›åˆ°æ¢ç´¢é€‰é¡¹ã€‚
- en: Setting a default value for an option
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è®¾ç½®é€‰é¡¹çš„é»˜è®¤å€¼
- en: Well, as you may have guessed, the default value for an option will be (by default)
    the default value for its data type (are you still with me?).
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: å¥½å§ï¼Œæ­£å¦‚ä½ å¯èƒ½çŒœåˆ°çš„ï¼Œä¸€ä¸ªé€‰é¡¹çš„é»˜è®¤å€¼å°†æ˜¯ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰å…¶æ•°æ®ç±»å‹çš„é»˜è®¤å€¼ï¼ˆä½ è¿˜åœ¨å—ï¼Ÿï¼‰ã€‚
- en: Since the `Category` option is of type `string`, its default value is `null`.
    However, the `Option` class allows us to define a default value.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº`Category`é€‰é¡¹æ˜¯`string`ç±»å‹ï¼Œå…¶é»˜è®¤å€¼æ˜¯`null`ã€‚ç„¶è€Œï¼Œ`Option`ç±»å…è®¸æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªé»˜è®¤å€¼ã€‚
- en: 'Letâ€™s set the default value for the `Category` option to `"Read later"`. This
    can be done by calling the `SetDefaultValue` method and passing in the default
    value:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å°†`Category`é€‰é¡¹çš„é»˜è®¤å€¼è®¾ç½®ä¸º`"ä»¥åé˜…è¯»"`ã€‚è¿™å¯ä»¥é€šè¿‡è°ƒç”¨`SetDefaultValue`æ–¹æ³•å¹¶ä¼ å…¥é»˜è®¤å€¼æ¥å®Œæˆï¼š
- en: '[PRE5]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'If we run the program without providing a value for the `Category` option,
    we can see that its default value is used:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬ä¸æä¾›`Category`é€‰é¡¹çš„å€¼æ¥è¿è¡Œç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒå°†ä½¿ç”¨é»˜è®¤å€¼ï¼š
- en: '![Figure 5.6 â€“ Using the default value for the category option](img/B22400_05_06.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾5.6 â€“ ä½¿ç”¨ç±»åˆ«é€‰é¡¹çš„é»˜è®¤å€¼](img/B22400_05_06.jpg)'
- en: Figure 5.6 â€“ Using the default value for the category option
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾5.6 â€“ ä½¿ç”¨ç±»åˆ«é€‰é¡¹çš„é»˜è®¤å€¼
- en: 'However, if we do provide a value for the category, we can see that this value
    is actually used:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬ä¸ºç±»åˆ«æä¾›äº†å€¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®é™…ä¸Šä½¿ç”¨äº†è¿™ä¸ªå€¼ï¼š
- en: '![Figure 5.7 â€“ Using the provided value for the category option](img/B22400_05_07.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾5.7 â€“ ä½¿ç”¨æä¾›çš„ç±»åˆ«é€‰é¡¹å€¼](img/B22400_05_07.jpg)'
- en: Figure 5.7 â€“ Using the provided value for the category option
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾5.7 â€“ ä½¿ç”¨æä¾›çš„ç±»åˆ«é€‰é¡¹å€¼
- en: Should we provide default values for required options?
  id: totrans-77
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æ˜¯å¦åº”è¯¥ä¸ºå¿…é€‰é€‰é¡¹æä¾›é»˜è®¤å€¼ï¼Ÿ
- en: No, we should not! This is because if we do that, a required option will no
    longer behave as a required one but rather as an optional one.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ï¼Œæˆ‘ä»¬ä¸åº”è¯¥è¿™æ ·åšï¼è¿™æ˜¯å› ä¸ºå¦‚æœæˆ‘ä»¬è¿™æ ·åšï¼Œå¿…é€‰é€‰é¡¹å°†ä¸å†è¡¨ç°ä¸ºå¿…é€‰ï¼Œè€Œæ˜¯è¡¨ç°ä¸ºå¯é€‰ã€‚
- en: Why? Because if we do not provide a value for it, the default value will be
    used.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæˆ‘ä»¬æ²¡æœ‰æä¾›å®ƒçš„å€¼ï¼Œæ‰€ä»¥å°†ä½¿ç”¨é»˜è®¤å€¼ã€‚
- en: This is why default values should only be used with optional options.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å°±æ˜¯ä¸ºä»€ä¹ˆé»˜è®¤å€¼åº”è¯¥åªä¸å¯é€‰é€‰é¡¹ä¸€èµ·ä½¿ç”¨ã€‚
- en: Note that in the previous example, the user can specify any string value for
    the `Category` option. But what if we wanted to control the set of allowed values?
    This is where the `FromAmong` method comes in.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œåœ¨å…ˆå‰çš„ä¾‹å­ä¸­ï¼Œç”¨æˆ·å¯ä»¥ä¸º`Category`é€‰é¡¹æŒ‡å®šä»»ä½•å­—ç¬¦ä¸²å€¼ã€‚ä½†å¦‚æœæˆ‘ä»¬æƒ³æ§åˆ¶å…è®¸çš„å€¼é›†å‘¢ï¼Ÿè¿™å°±æ˜¯`FromAmong`æ–¹æ³•å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚
- en: Controlling the allowed values for an option
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ§åˆ¶é€‰é¡¹çš„å…è®¸å€¼
- en: Letâ€™s pretend for a moment that we only allow a set of categories in our application.
    Yes, in real life, we would allow users to create as many categories as they want,
    but this will serve our purpose of explaining how to only allow a specific set
    of values for an option.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å‡è®¾åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­æˆ‘ä»¬åªå…è®¸ä¸€ç»„ç±»åˆ«ã€‚æ˜¯çš„ï¼Œåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ä¼šå…è®¸ç”¨æˆ·åˆ›å»ºä»–ä»¬æƒ³è¦çš„ä»»ä½•æ•°é‡çš„ç±»åˆ«ï¼Œä½†è¿™å°†æœåŠ¡äºæˆ‘ä»¬è§£é‡Šå¦‚ä½•åªå…è®¸é€‰é¡¹çš„ä¸€ç»„ç‰¹å®šå€¼çš„ç”¨é€”ã€‚
- en: 'Letâ€™s say we allow the following categories:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘ä»¬å…è®¸ä»¥ä¸‹ç±»åˆ«ï¼š
- en: Read later (which serves as the default one)
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä»¥åé˜…è¯»ï¼ˆä½œä¸ºé»˜è®¤å€¼ï¼‰
- en: Tech books
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç§‘æŠ€ä¹¦ç±
- en: Cooking
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: çƒ¹é¥ª
- en: Social media
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¤¾äº¤åª’ä½“
- en: 'We will do this by passing these values to the `FromAmong` method as follows:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†é€šè¿‡å°†è¿™äº›å€¼ä¼ é€’ç»™`FromAmong`æ–¹æ³•æ¥å®Œæˆè¿™é¡¹å·¥ä½œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '[PRE6]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'If we run the application by passing in an allowed category, everything works
    fine:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬é€šè¿‡ä¼ é€’ä¸€ä¸ªå…è®¸çš„ç±»åˆ«æ¥è¿è¡Œåº”ç”¨ç¨‹åºï¼Œä¸€åˆ‡éƒ½ä¼šæ­£å¸¸å·¥ä½œï¼š
- en: '![Figure 5.8 â€“ Passing in an allowed value for the category](img/B22400_05_08.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾5.8 â€“ ä¸ºç±»åˆ«ä¼ é€’ä¸€ä¸ªå…è®¸å€¼](img/B22400_05_08.jpg)'
- en: Figure 5.8 â€“ Passing in an allowed value for the category
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾5.8 â€“ ä¸ºç±»åˆ«ä¼ é€’ä¸€ä¸ªå…è®¸å€¼
- en: 'However, if we do pass an unallocated category value, we will get an error
    message:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬ä¼ é€’ä¸€ä¸ªæœªåˆ†é…çš„ç±»åˆ«å€¼ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ï¼š
- en: '![Figure 5.9 â€“ Passing in an unallowed value for the category](img/B22400_05_09.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾5.9 â€“ ä¸ºç±»åˆ«ä¼ é€’ä¸å…è®¸çš„å€¼](img/B22400_05_09.jpg)'
- en: Figure 5.9 â€“ Passing in an unallowed value for the category
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾5.9 â€“ ä¸ºç±»åˆ«ä¼ é€’ä¸å…è®¸çš„å€¼
- en: 'Notice that the error message indicates the allowed values. We can also see
    the allowed values from the help menu:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œé”™è¯¯æ¶ˆæ¯æŒ‡ç¤ºäº†å…è®¸çš„å€¼ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä»å¸®åŠ©èœå•ä¸­çœ‹åˆ°å…è®¸çš„å€¼ï¼š
- en: '![Figure 5.10 â€“ Seeing the allowed values in the help menu](img/B22400_05_10.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾5.10 â€“ åœ¨å¸®åŠ©èœå•ä¸­æŸ¥çœ‹å…è®¸çš„å€¼](img/B22400_05_10.jpg)'
- en: Figure 5.10 â€“ Seeing the allowed values in the help menu
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾5.10 â€“ åœ¨å¸®åŠ©èœå•ä¸­æŸ¥çœ‹å…è®¸çš„å€¼
- en: Using `FromAmong` can be particularly useful for ensuring data integrity and
    guiding user input, especially in scenarios where options need to conform to a
    predefined set of valid values.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨`FromAmong`å¯ä»¥ç‰¹åˆ«æœ‰ç”¨ï¼Œä»¥ç¡®ä¿æ•°æ®å®Œæ•´æ€§å’ŒæŒ‡å¯¼ç”¨æˆ·è¾“å…¥ï¼Œå°¤å…¶æ˜¯åœ¨é€‰é¡¹éœ€è¦ç¬¦åˆé¢„å®šä¹‰çš„æœ‰æ•ˆå€¼é›†çš„åœºæ™¯ä¸­ã€‚
- en: Okay, so letâ€™s recap. Our CLI application has required and optional parameters.
    It specifies a default value for its optional parameter, along with allowed values.
    However, we are missing something, something important. Can you guess what it
    is?
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: å¥½çš„ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ã€‚æˆ‘ä»¬çš„CLIåº”ç”¨ç¨‹åºæœ‰å¿…éœ€å’Œå¯é€‰å‚æ•°ã€‚å®ƒä¸ºå®ƒçš„å¯é€‰å‚æ•°æŒ‡å®šäº†ä¸€ä¸ªé»˜è®¤å€¼ï¼Œä»¥åŠå…è®¸çš„å€¼ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä»ç„¶ç¼ºå°‘ä¸€äº›ä¸œè¥¿ï¼Œä¸€äº›é‡è¦çš„äº‹æƒ…ã€‚ä½ èƒ½çŒœåˆ°æ˜¯ä»€ä¹ˆå—ï¼Ÿ
- en: Yes, exactly, the ability to ensure that the provided value for a specific parameter
    is valid.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¯çš„ï¼Œæ­£æ˜¯è¿™æ ·ï¼Œç¡®ä¿ä¸ºç‰¹å®šå‚æ•°æä¾›çš„å€¼æ˜¯æœ‰æ•ˆçš„ã€‚
- en: Validating input values
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: éªŒè¯è¾“å…¥å€¼
- en: When adding a new bookmark, we need to pass a URL for it. But, until now, we
    havenâ€™t checked whether the provided value is indeed a valid URL. Letâ€™s fix this.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æ·»åŠ æ–°çš„ä¹¦ç­¾æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå…¶ä¼ é€’ä¸€ä¸ªURLã€‚ä½†æ˜¯ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰æ£€æŸ¥æä¾›çš„å€¼æ˜¯å¦ç¡®å®æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„URLã€‚è®©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
- en: The `Option` class allows us to configure a validator function. We will then
    add a validator method for `urlOption` to ensure it only gets valid URLs.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '`Option`ç±»å…è®¸æˆ‘ä»¬é…ç½®éªŒè¯å‡½æ•°ã€‚ç„¶åæˆ‘ä»¬å°†ä¸º`urlOption`æ·»åŠ ä¸€ä¸ªéªŒè¯æ–¹æ³•ï¼Œä»¥ç¡®ä¿å®ƒåªèƒ½è·å–æœ‰æ•ˆçš„URLã€‚'
- en: 'This can be achieved by calling the `AddValidator` method, as follows:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å¯ä»¥é€šè¿‡è°ƒç”¨`AddValidator`æ–¹æ³•æ¥å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '[PRE7]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: In the preceding code snippet, the `AddValidator` method uses an inline delegate
    to ensure that the value provided to `urlOption` is valid. In this case, it ensures
    that it is actually present (thatâ€™s what the `if` section is checking) and that
    it is a valid URL (thatâ€™s what the `else if` section is checking).
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å‰é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œ`AddValidator`æ–¹æ³•ä½¿ç”¨å†…è”å§”æ‰˜æ¥ç¡®ä¿æä¾›ç»™`urlOption`çš„å€¼æ˜¯æœ‰æ•ˆçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒç¡®ä¿å®ƒå®é™…ä¸Šæ˜¯å­˜åœ¨çš„ï¼ˆè¿™å°±æ˜¯`if`éƒ¨åˆ†æ£€æŸ¥çš„å†…å®¹ï¼‰å¹¶ä¸”å®ƒæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„URLï¼ˆè¿™å°±æ˜¯`else
    if`éƒ¨åˆ†æ£€æŸ¥çš„å†…å®¹ï¼‰ã€‚
- en: 'So now, if we execute the program with both an invalid and a valid URL, we
    can see that it behaves as expected:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬ç”¨æ— æ•ˆå’Œæœ‰æ•ˆçš„URLæ‰§è¡Œç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒè¡¨ç°å¦‚é¢„æœŸï¼š
- en: '![Figure 5.11 â€“ Validating the input value for the URL option](img/B22400_05_11.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾5.11 â€“ éªŒè¯URLé€‰é¡¹çš„è¾“å…¥å€¼](img/B22400_05_11.jpg)'
- en: Figure 5.11 â€“ Validating the input value for the URL option
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾5.11 â€“ éªŒè¯URLé€‰é¡¹çš„è¾“å…¥å€¼
- en: More advanced validation
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: æ›´é«˜çº§çš„éªŒè¯
- en: Validation could be more advanced than that. Our application is intended to
    collect bookmarks from everywhere on the web. However, if you would like to restrict
    its usage to, letâ€™s say, your organization only, you may want to check (in your
    validation process) that the bookmarked URLs are only referring to your corporate
    domain and dismiss everything else.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: éªŒè¯å¯èƒ½æ¯”è¿™æ›´å¤æ‚ã€‚æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ—¨åœ¨ä»ç½‘ç»œä¸Šçš„ä»»ä½•åœ°æ–¹æ”¶é›†ä¹¦ç­¾ã€‚ç„¶è€Œï¼Œå¦‚æœæ‚¨å¸Œæœ›å°†å…¶ä½¿ç”¨é™åˆ¶åœ¨ï¼Œæ¯”å¦‚è¯´ï¼Œæ‚¨çš„ç»„ç»‡å†…ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åœ¨éªŒè¯è¿‡ç¨‹ä¸­æ£€æŸ¥ä¹¦ç­¾çš„URLæ˜¯å¦ä»…æŒ‡å‘æ‚¨çš„ä¼ä¸šåŸŸåï¼Œå¹¶å¿½ç•¥å…¶ä»–æ‰€æœ‰å†…å®¹ã€‚
- en: Perfect! So now, Bookmarkr allows us to manage bookmarks, ensuring that only
    valid information can be passed to (and stored in) the CLI application.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: å®Œç¾ï¼ç°åœ¨ï¼ŒBookmarkrå…è®¸æˆ‘ä»¬ç®¡ç†ä¹¦ç­¾ï¼Œç¡®ä¿åªæœ‰æœ‰æ•ˆä¿¡æ¯å¯ä»¥è¢«ä¼ é€’åˆ°ï¼ˆå¹¶å­˜å‚¨åœ¨ï¼‰CLIåº”ç”¨ç¨‹åºä¸­ã€‚
- en: However, up to this point, we can still only add one bookmark at a time. Wouldnâ€™t
    it be nice if we could provide a set of names and URLs as part of the same request
    and have Bookmarkr add them in one go?
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä»ç„¶ä¸€æ¬¡åªèƒ½æ·»åŠ ä¸€ä¸ªä¹¦ç­¾ã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä½œä¸ºåŒä¸€è¯·æ±‚çš„ä¸€éƒ¨åˆ†æä¾›ä¸€ç»„åç§°å’ŒURLï¼Œå¹¶ä¸”è®©Bookmarkrä¸€æ¬¡æ€§æ·»åŠ å®ƒä»¬ï¼Œé‚£ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿ
- en: '`System.CommandLine` has a feature that allows us to do just that ğŸ˜‰.'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '`System.CommandLine`æœ‰ä¸€ä¸ªåŠŸèƒ½å…è®¸æˆ‘ä»¬åšåˆ°è¿™ä¸€ç‚¹ ğŸ˜‰ã€‚'
- en: Adding multiple elements in one go
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä¸€æ¬¡æ€§æ·»åŠ å¤šä¸ªå…ƒç´ 
- en: 'Letâ€™s try passing in multiple names and URLs to the same request, such as this:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å°è¯•å‘åŒä¸€ä¸ªè¯·æ±‚ä¼ é€’å¤šä¸ªåç§°å’ŒURLï¼Œä¾‹å¦‚ï¼š
- en: '[PRE8]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'But if we do this, we will get the following error:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¿™æ ·åšï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä»¥ä¸‹é”™è¯¯ï¼š
- en: '![Figure 5.12 â€“ Name and URL options expect only one value by default](img/B22400_05_12.jpg)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾ 5.12 â€“ åç§°å’Œ URL é€‰é¡¹é»˜è®¤åªæœŸæœ›ä¸€ä¸ªå€¼](img/B22400_05_12.jpg)'
- en: Figure 5.12 â€“ Name and URL options expect only one value by default
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 5.12 â€“ åç§°å’Œ URL é€‰é¡¹é»˜è®¤åªæœŸæœ›ä¸€ä¸ªå€¼
- en: This is due to the arity of these options.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯å› ä¸ºè¿™äº›é€‰é¡¹çš„å‚æ•°æ•°é‡ã€‚
- en: '**What is an** **arity, anyway?**'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '**é‚£ä¹ˆï¼Œå‚æ•°æ•°é‡ç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ**'
- en: The arity of an option represents the number of values that can be passed if
    that option is specified. It is expressed with a minimum value and a maximum value.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: é€‰é¡¹çš„å‚æ•°æ•°é‡è¡¨ç¤ºå¦‚æœæŒ‡å®šäº†è¯¥é€‰é¡¹ï¼Œå¯ä»¥ä¼ é€’çš„å€¼çš„æ•°é‡ã€‚å®ƒç”¨æœ€å°å€¼å’Œæœ€å¤§å€¼æ¥è¡¨ç¤ºã€‚
- en: This is of great importance if your CLI application supports bulk operations
    through one or many of its commands. In our example, we want to perform a bulk
    operation for adding multiple bookmarks at the same time.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ çš„ CLI åº”ç”¨ç¨‹åºé€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªå‘½ä»¤æ”¯æŒæ‰¹é‡æ“ä½œï¼Œè¿™éå¸¸é‡è¦ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦åŒæ—¶æ·»åŠ å¤šä¸ªä¹¦ç­¾çš„æ‰¹é‡æ“ä½œã€‚
- en: In the case of an option of type `string`, the minimum and maximum values are
    both set to `1`, which means that if we specify the option, we must provide a
    value.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºç±»å‹ä¸º `string` çš„é€‰é¡¹ï¼Œæœ€å°å€¼å’Œæœ€å¤§å€¼éƒ½è®¾ç½®ä¸º `1`ï¼Œè¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬æŒ‡å®šäº†é€‰é¡¹ï¼Œæˆ‘ä»¬å¿…é¡»æä¾›ä¸€ä¸ªå€¼ã€‚
- en: 'A Boolean option will have a minimum value of `0` and a maximum value of `1`
    since we donâ€™t need to pass in a value as both these syntaxes are valid:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: å¸ƒå°”é€‰é¡¹çš„æœ€å°å€¼æ˜¯ `0`ï¼Œæœ€å¤§å€¼æ˜¯ `1`ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ä¼ é€’å€¼ï¼Œå› ä¸ºè¿™ä¸¤ç§è¯­æ³•éƒ½æ˜¯æœ‰æ•ˆçš„ï¼š
- en: '[PRE9]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: In the same way, a list of elements has a minimum arity of 1 and a maximum of
    (by default) 100,000.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: åŒæ ·ï¼Œä¸€ä¸ªå…ƒç´ åˆ—è¡¨çš„æœ€å°å‚æ•°æ•°é‡ä¸º 1ï¼Œé»˜è®¤æœ€å¤§å€¼ä¸º 100,000ã€‚
- en: 'In order to specify the arity of an option, `System.CommandLine` provides an
    enumeration named `ArgumentArity`, which has these values:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†æŒ‡å®šé€‰é¡¹çš„å‚æ•°æ•°é‡ï¼Œ`System.CommandLine` æä¾›äº†ä¸€ä¸ªåä¸º `ArgumentArity` çš„æšä¸¾ï¼Œå®ƒåŒ…å«ä»¥ä¸‹å€¼ï¼š
- en: '`Zero`, meaning no values are allowed. So, `--force` would be valid but not
    `--``force true`.'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Zero`ï¼Œæ„å‘³ç€ä¸å…è®¸ä»»ä½•å€¼ã€‚æ‰€ä»¥ï¼Œ`--force` æ˜¯æœ‰æ•ˆçš„ï¼Œä½† `--force true` åˆ™ä¸æ˜¯ã€‚'
- en: '`ZeroOrOne`, meaning a minimum of zero and a maximum of one value is allowed.'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ZeroOrOne`ï¼Œæ„å‘³ç€å…è®¸é›¶ä¸ªæˆ–ä¸€ä¸ªå€¼ã€‚'
- en: '`ZeroOrMore`, meaning either zero, one, or many values are allowed.'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ZeroOrMore`ï¼Œæ„å‘³ç€å…è®¸é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ã€‚'
- en: '`ExactlyOne`, meaning a minimum of one and a maximum of one value is allowed.
    This is the case for our string options, name, and URL.'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ExactlyOne`ï¼Œæ„å‘³ç€è‡³å°‘ä¸€ä¸ªä¸”æœ€å¤šä¸€ä¸ªå€¼æ˜¯è¢«å…è®¸çš„ã€‚å¯¹äºæˆ‘ä»¬çš„å­—ç¬¦ä¸²é€‰é¡¹ï¼Œåç§°å’Œ URL å°±æ˜¯è¿™ç§æƒ…å†µã€‚'
- en: '`OneOrMore`, meaning either one or multiple values are allowed.'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`OneOrMore`ï¼Œæ„å‘³ç€å…è®¸ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ã€‚'
- en: 'To set the arity of an option, we can then use one of the values provided by
    the `ArgumentArity` enumeration, like this:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è®¾ç½®ä¸€ä¸ªé€‰é¡¹çš„å‚æ•°æ•°é‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `ArgumentArity` æšä¸¾æä¾›çš„å€¼ä¹‹ä¸€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '[PRE10]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'So now, we should be able to provide multiple values for a given option. Letâ€™s
    try this:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿä¸ºç»™å®šé€‰é¡¹æä¾›å¤šä¸ªå€¼ã€‚è®©æˆ‘ä»¬è¯•è¯•è¿™ä¸ªï¼š
- en: '![Figure 5.13 â€“ Failing to provide multiple values for a given option](img/B22400_05_13.jpg)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾ 5.13 â€“ æœªä¸ºç»™å®šé€‰é¡¹æä¾›å¤šä¸ªå€¼](img/B22400_05_13.jpg)'
- en: Figure 5.13 â€“ Failing to provide multiple values for a given option
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 5.13 â€“ æœªä¸ºç»™å®šé€‰é¡¹æä¾›å¤šä¸ªå€¼
- en: Oops, this is not what we expected, right?
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: å“å‘€ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬é¢„æœŸçš„ç»“æœï¼Œå¯¹å§ï¼Ÿ
- en: The problem here is that even though `nameOption` can accept more than one value,
    it is not clear to the program how to convert those values into a single string.
    This is why the error message is referring to a custom binder (so it is told how
    to perform such a conversion).
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œçš„é—®é¢˜åœ¨äºï¼Œå°½ç®¡ `nameOption` å¯ä»¥æ¥å—å¤šä¸ªå€¼ï¼Œä½†ç¨‹åºå¹¶ä¸æ¸…æ¥šå¦‚ä½•å°†è¿™äº›å€¼è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆé”™è¯¯ä¿¡æ¯æåˆ°äº†è‡ªå®šä¹‰ç»‘å®šå™¨ï¼ˆå› æ­¤å®ƒè¢«å‘ŠçŸ¥å¦‚ä½•æ‰§è¡Œè¿™ç§è½¬æ¢ï¼‰ã€‚
- en: 'In order to fix this problem, we need to tell the program to treat each of
    these inputs as a separate argument. This is done by setting the `AllowMultipleArgumentsPerToken`
    property to `true`, as follows:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ç¨‹åºå°†è¿™äº›è¾“å…¥è§†ä¸ºå•ç‹¬çš„å‚æ•°ã€‚è¿™æ˜¯é€šè¿‡å°† `AllowMultipleArgumentsPerToken` å±æ€§è®¾ç½®ä¸º `true`
    æ¥å®ç°çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '[PRE11]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Also, letâ€™s get rid of the arity for a moment by commenting out the corresponding
    line of code.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œè®©æˆ‘ä»¬é€šè¿‡æ³¨é‡Šæ‰ç›¸åº”çš„ä»£ç è¡Œæ¥æš‚æ—¶å»æ‰å‚æ•°æ•°é‡ã€‚
- en: Now, if we run the program, we can see that the error is gone but we are still
    not getting the expected resultâ€¦
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬è¿è¡Œç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é”™è¯¯å·²ç»æ¶ˆå¤±äº†ï¼Œä½†æˆ‘ä»¬ä»ç„¶æ²¡æœ‰å¾—åˆ°é¢„æœŸçš„ç»“æœâ€¦
- en: '![Figure 5.14 â€“ nameOption is now accepting multiple values](img/B22400_05_14.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾ 5.14 â€“ nameOption ç°åœ¨æ¥å—å¤šä¸ªå€¼](img/B22400_05_14.jpg)'
- en: Figure 5.14 â€“ nameOption is now accepting multiple values
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 5.14 â€“ nameOption ç°åœ¨æ¥å—å¤šä¸ªå€¼
- en: Notice how only the last pair of names and URLs were considered and added to
    the list of bookmarks.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œåªæœ‰æœ€åçš„ä¸€å¯¹åç§°å’Œ URL è¢«è€ƒè™‘å¹¶æ·»åŠ åˆ°ä¹¦ç­¾åˆ—è¡¨ä¸­ã€‚
- en: What happened, in fact, is that `System.CommandLine` noticed that we have two
    occurrences of the name and URL, so the last ones have overridden the first ones
    and only those last ones were actually passed to the `Handler` method. This is
    why we only get one bookmark added with the information of the last pair of names
    and URL values.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: å®é™…ä¸Šå‘ç”Ÿçš„æƒ…å†µæ˜¯ï¼Œ`System.CommandLine`æ³¨æ„åˆ°æˆ‘ä»¬æœ‰ä¸¤ä¸ªåç§°å’ŒURLçš„å‡ºç°ï¼Œæ‰€ä»¥æœ€åçš„é‚£äº›è¦†ç›–äº†ç¬¬ä¸€ä¸ªï¼Œåªæœ‰æœ€åçš„é‚£äº›å®é™…ä¸Šè¢«ä¼ é€’ç»™äº†`Handler`æ–¹æ³•ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åªæ·»åŠ äº†ä¸€ä¸ªå¸¦æœ‰æœ€åå¯¹åç§°å’ŒURLå€¼ä¿¡æ¯çš„ä¹¦ç­¾ã€‚
- en: But what if we want to be able to pass a list of names and URLs and have the
    `Handler` method add as many bookmarks as the number of name and URL pairs?
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦èƒ½å¤Ÿä¼ é€’ä¸€ä¸ªåç§°å’ŒURLçš„åˆ—è¡¨ï¼Œå¹¶ä¸”è®©`Handler`æ–¹æ³•æ·»åŠ ä¸åç§°å’ŒURLå¯¹æ•°é‡ç›¸ç­‰çš„ä¹¦ç­¾ï¼Œé‚£ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ
- en: To do this, we need two things. First, letâ€™s uncomment the lines of code that
    set the arities for `nameOption`, `urlOption`, and `categoryOption`.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤æ ·ä¸œè¥¿ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬å–æ¶ˆæ³¨é‡Šè®¾ç½®`nameOption`ã€`urlOption`å’Œ`categoryOption`çš„arityçš„ä»£ç è¡Œã€‚
- en: 'Next, letâ€™s change the declaration of the name, URL, and category options along
    with the validator and the signature of the `Handler` method so that they accept
    a list of strings rather than a single string:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ›´æ”¹åç§°ã€URLå’Œç±»åˆ«é€‰é¡¹çš„å£°æ˜ï¼Œä»¥åŠéªŒè¯å™¨å’Œ`Handler`æ–¹æ³•çš„ç­¾åï¼Œä»¥ä¾¿å®ƒä»¬æ¥å—å­—ç¬¦ä¸²åˆ—è¡¨è€Œä¸æ˜¯å•ä¸ªå­—ç¬¦ä¸²ï¼š
- en: '[PRE12]'
  id: totrans-155
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Now, if we run the program, things work (finally) as expected! ğŸ˜Š
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬è¿è¡Œç¨‹åºï¼Œäº‹æƒ…ï¼ˆç»ˆäºï¼‰æŒ‰é¢„æœŸå·¥ä½œï¼ğŸ˜Š
- en: '![Figure 5.15 â€“ Bookmarkr accepts a list of bookmarks](img/B22400_05_15.jpg)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾5.15 â€“ Bookmarkræ¥å—ä¹¦ç­¾åˆ—è¡¨](img/B22400_05_15.jpg)'
- en: Figure 5.15 â€“ Bookmarkr accepts a list of bookmarks
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾5.15 â€“ Bookmarkræ¥å—ä¹¦ç­¾åˆ—è¡¨
- en: 'Since each option accepts multiple values, letâ€™s take a look at whether we
    can simplify the following CLI request:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæ¯ä¸ªé€‰é¡¹éƒ½æ¥å—å¤šä¸ªå€¼ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬æ˜¯å¦å¯ä»¥ç®€åŒ–ä»¥ä¸‹CLIè¯·æ±‚ï¼š
- en: '[PRE13]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Weâ€™ll simplify it as follows:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†æŒ‰ä»¥ä¸‹æ–¹å¼ç®€åŒ–å®ƒï¼š
- en: '[PRE14]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Notice that we only need to specify `--name`, `--url`, and `--``category` once.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‡å®šä¸€æ¬¡`--name`ã€`--url`å’Œ`--category`ã€‚
- en: 'Since both CLI requests are equivalent, they lead to the same result:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºè¿™ä¸¤ä¸ªCLIè¯·æ±‚æ˜¯ç­‰æ•ˆçš„ï¼Œå®ƒä»¬å¯¼è‡´ç›¸åŒçš„ç»“æœï¼š
- en: '![Figure 5.16 â€“ Simplified CLI request](img/B22400_05_16.jpg)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾5.16 â€“ ç®€åŒ–çš„CLIè¯·æ±‚](img/B22400_05_16.jpg)'
- en: Figure 5.16 â€“ Simplified CLI request
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾5.16 â€“ ç®€åŒ–çš„CLIè¯·æ±‚
- en: Excellent! This works just great!
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: å¤ªæ£’äº†ï¼è¿™å·¥ä½œå¾—éå¸¸å¥½ï¼
- en: Butâ€¦ typing a list of names, URLs, and categories might quickly become tedious
    as the list grows.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æ˜¯â€¦â€¦å½“åˆ—è¡¨å¢é•¿æ—¶ï¼Œè¾“å…¥ä¸€ç³»åˆ—åç§°ã€URLå’Œç±»åˆ«å¯èƒ½ä¼šå¾ˆå¿«å˜å¾—ç¹çã€‚
- en: Wouldnâ€™t it be nice if we could simply provide the path to a file as a parameter
    that contains all the names, URLs, and categories and let the application read
    that file and create the bookmarks accordingly?
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿç®€å•åœ°æä¾›ä¸€ä¸ªåŒ…å«æ‰€æœ‰åç§°ã€URLå’Œç±»åˆ«çš„æ–‡ä»¶è·¯å¾„ä½œä¸ºå‚æ•°ï¼Œè®©åº”ç”¨ç¨‹åºè¯»å–è¯¥æ–‡ä»¶å¹¶ç›¸åº”åœ°åˆ›å»ºä¹¦ç­¾ï¼Œé‚£å²‚ä¸æ˜¯å¾ˆå¥½ï¼Ÿ
- en: In the same way, wouldnâ€™t it be nice if we could specify the path to an output
    file to store all the bookmarks our CLI application is holding?
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: åŒæ ·ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤ŸæŒ‡å®šä¸€ä¸ªè¾“å‡ºæ–‡ä»¶çš„è·¯å¾„æ¥å­˜å‚¨CLIåº”ç”¨ç¨‹åºæŒæœ‰çš„æ‰€æœ‰ä¹¦ç­¾ï¼Œé‚£å²‚ä¸æ˜¯å¾ˆå¥½ï¼Ÿ
- en: Working with files passed in as options values
  id: totrans-171
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å¤„ç†ä½œä¸ºé€‰é¡¹å€¼ä¼ é€’çš„æ–‡ä»¶
- en: Files can be provided as options values to serve as input or output parameters.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: æ–‡ä»¶å¯ä»¥ä½œä¸ºé€‰é¡¹å€¼æä¾›ï¼Œä½œä¸ºè¾“å…¥æˆ–è¾“å‡ºå‚æ•°ã€‚
- en: As an input parameter, a fileâ€™s content can be read to import data into the
    CLI application. In our case, we could import bookmarks from other browsers, such
    as Chrome or Firefox, into Bookmarkr.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œå¯ä»¥è¯»å–æ–‡ä»¶å†…å®¹ä»¥å°†æ•°æ®å¯¼å…¥CLIåº”ç”¨ç¨‹åºã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¥è‡ªå…¶ä»–æµè§ˆå™¨ï¼ˆå¦‚Chromeæˆ–Firefoxï¼‰çš„ä¹¦ç­¾å¯¼å…¥åˆ°Bookmarkrä¸­ã€‚
- en: As an output parameter, a file can be created to export the data that is held
    by Bookmarkr, which in turn can be imported into other browsers, such as Chrome
    or Firefox.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºè¾“å‡ºå‚æ•°ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ¥å¯¼å‡ºBookmarkræŒæœ‰çš„æ•°æ®ï¼Œè¯¥æ•°æ®åè¿‡æ¥å¯ä»¥å¯¼å…¥åˆ°å…¶ä»–æµè§ˆå™¨ï¼Œå¦‚Chromeæˆ–Firefoxã€‚
- en: Together, these two capabilities can enable backup and restore but also data
    sharing and exchange scenarios.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸¤ä¸ªåŠŸèƒ½ç»“åˆåœ¨ä¸€èµ·å¯ä»¥å¯ç”¨å¤‡ä»½å’Œæ¢å¤ï¼Œä¹Ÿå¯ä»¥å®ç°æ•°æ®å…±äº«å’Œäº¤æ¢åœºæ™¯ã€‚
- en: Letâ€™s build these features into Bookmarkr!
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬æŠŠè¿™äº›åŠŸèƒ½æ„å»ºåˆ°Bookmarkrä¸­ï¼
- en: Important note
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: é‡è¦æç¤º
- en: Browsers, such as Chrome or Firefox, have their own proprietary structure to
    import and export bookmarks.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: æµè§ˆå™¨ï¼Œå¦‚Chromeæˆ–Firefoxï¼Œéƒ½æœ‰è‡ªå·±çš„ä¸“æœ‰ç»“æ„æ¥å¯¼å…¥å’Œå¯¼å‡ºä¹¦ç­¾ã€‚
- en: We wonâ€™t be performing parsing or conversion to these formats for the sake of
    simplicity. Our goal is to focus on working with input and output files as part
    of a CLI application. We will, however, import and export bookmarks in JSON format.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬ä¸ä¼šå¯¹è¿™äº›æ ¼å¼è¿›è¡Œè§£ææˆ–è½¬æ¢ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä¸“æ³¨äºå°†è¾“å…¥å’Œè¾“å‡ºæ–‡ä»¶ä½œä¸ºCLIåº”ç”¨ç¨‹åºçš„ä¸€éƒ¨åˆ†è¿›è¡Œå¤„ç†ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å°†ä»¥JSONæ ¼å¼å¯¼å…¥å’Œå¯¼å‡ºä¹¦ç­¾ã€‚
- en: Letâ€™s begin with the `export` command.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä»`export`å‘½ä»¤å¼€å§‹ã€‚
- en: This command is meant to take all bookmarks managed by Bookmarkr and save them
    in a JSON file whose path is specified as a value to the `--file` option. This
    option is, of course, required.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
- en: 'First, we will need to create an option of type `FileInfo`, and it will be
    required:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Next, we will need to create a new command and add it to the `root` command:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Then, we need to set a `Handler` method for the `export` command:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: The `Handler` method calls `BookmarkService` to get the list of all bookmarks,
    then converts them to JSON and saves that JSON content into the provided file.
    If the file already exists, it is overwritten.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
- en: 'Note that youâ€™ll need to import this namespace for the code to compile:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Now, letâ€™s try it and see whether it works as expected!
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.17 â€“ Exporting all bookmarks](img/B22400_05_17.jpg)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
- en: Figure 5.17 â€“ Exporting all bookmarks
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
- en: Perfect! This is exactly what we expected!
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
- en: But how can we ensure that the provided file has a valid name?
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
- en: 'We could certainly create a validator method to check this, but `System.CommandLine`
    already provides an extension method for that matter (and I wanted to let you
    know ğŸ˜‰):'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Letâ€™s try calling the `export` command with an invalid file:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.18 â€“ Handling invalid files](img/B22400_05_18.jpg)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
- en: Figure 5.18 â€“ Handling invalid files
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
- en: See? That error has been raised because of the call to the `LegalFileNamesOnly`
    method.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
- en: Okay! Now letâ€™s move on to adding the `import` command!
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
- en: 'As a reminder, the syntax to import bookmark data from an existing file is
    as follows:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Since many of the steps involved are very similar to the ones we followed to
    create the `export` command, letâ€™s just share the code here and discuss the differences:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: The main difference is the call to the `ExistingOnly` method. This method ensures
    that `inputfileOption` will only accept values corresponding to existing files,
    otherwise an error is raised.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
- en: 'The other difference is how the `OnImportCommand` handler method operates:
    it reads the content of the file, converts it from JSON to a list of items of
    type `Bookmark`, and then passes it to `BookmarkService` to add these items to
    the list of bookmarks it manages (by calling its `Import` method).'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
- en: Now, letâ€™s try this code!
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.19 â€“ Importing bookmarks from a file](img/B22400_05_19.jpg)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
- en: Figure 5.19 â€“ Importing bookmarks from a file
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
- en: What happens if the file doesnâ€™t exist?
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.20 â€“ Handling a non-existent file](img/B22400_05_20.jpg)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
- en: Figure 5.20 â€“ Handling a non-existent file
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
- en: Once again, we can see that we are getting the expected result! ğŸ˜Š
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
- en: And thatâ€™s a wrap! You now know how to work with input and output files in your
    CLI applications. Congratulations! Letâ€™s now conclude this chapter.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-217
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we improved our CLI application, Bookmarkr, by adding better
    control for the input values for its commandâ€™s options (by explicitly indicating
    what options are required, setting default values where appropriate, designing
    validators to ensure the input values comply with the expected type, format, or
    range of values, and enabling auto-completion to make things simpler for the user).
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ·»åŠ å¯¹å‘½ä»¤é€‰é¡¹è¾“å…¥å€¼çš„æ›´å¥½æ§åˆ¶æ¥æ”¹è¿›äº†æˆ‘ä»¬çš„CLIåº”ç”¨ç¨‹åºBookmarkrï¼ˆé€šè¿‡æ˜ç¡®æŒ‡å‡ºå“ªäº›é€‰é¡¹æ˜¯å¿…éœ€çš„ï¼Œåœ¨é€‚å½“çš„åœ°æ–¹è®¾ç½®é»˜è®¤å€¼ï¼Œè®¾è®¡éªŒè¯å™¨ä»¥ç¡®ä¿è¾“å…¥å€¼ç¬¦åˆé¢„æœŸçš„ç±»å‹ã€æ ¼å¼æˆ–å€¼èŒƒå›´ï¼Œå¹¶å¯ç”¨è‡ªåŠ¨å®Œæˆä»¥ç®€åŒ–ç”¨æˆ·æ“ä½œï¼‰ã€‚
- en: We also added the ability to import and export application data from and to
    a file. This makes it easier to back up and restore data and even share it offline.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜æ·»åŠ äº†ä»æ–‡ä»¶å¯¼å…¥å’Œå¯¼å‡ºåº”ç”¨ç¨‹åºæ•°æ®çš„åŠŸèƒ½ã€‚è¿™ä½¿å¾—å¤‡ä»½å’Œæ¢å¤æ•°æ®ä»¥åŠç¦»çº¿å…±äº«æ•°æ®å˜å¾—æ›´åŠ å®¹æ˜“ã€‚
- en: 'In the upcoming chapter, we will see how to implement a very important feature
    in every application: logging and error handling.'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•å®ç°æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½éå¸¸é‡è¦çš„åŠŸèƒ½ï¼šæ—¥å¿—è®°å½•å’Œé”™è¯¯å¤„ç†ã€‚
- en: Your turn!
  id: totrans-221
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è½®åˆ°ä½ äº†ï¼
- en: Following along with the provided code is a great way to learn through practice.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: è·Ÿéšæä¾›çš„ä»£ç æ˜¯ä¸€ç§é€šè¿‡å®è·µå­¦ä¹ çš„å¥½æ–¹æ³•ã€‚
- en: A better way is by challenging yourself to achieve tasks. Hence, I challenge
    you to improve the Bookmarkr application by adding the following features.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ç§æ›´å¥½çš„æ–¹æ³•æ˜¯æŒ‘æˆ˜è‡ªå·±å®Œæˆä»»åŠ¡ã€‚å› æ­¤ï¼Œæˆ‘æŒ‘æˆ˜ä½ é€šè¿‡æ·»åŠ ä»¥ä¸‹åŠŸèƒ½æ¥æ”¹è¿›Bookmarkråº”ç”¨ç¨‹åºã€‚
- en: 'Task #1 â€“ validating the format and the ability to access the input file'
  id: totrans-224
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 'ä»»åŠ¡ #1 â€“ éªŒè¯è¾“å…¥æ–‡ä»¶çš„æ ¼å¼å’Œè®¿é—®èƒ½åŠ›'
- en: 'As a reminder, the syntax to import bookmark data from an existing file is
    as follows:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºæé†’ï¼Œä»ç°æœ‰æ–‡ä»¶å¯¼å…¥ä¹¦ç­¾æ•°æ®çš„è¯­æ³•å¦‚ä¸‹ï¼š
- en: '[PRE22]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: If the input file cannot be accessed, or if its data is not in the expected
    format, then the application should display a corresponding error message to the
    user. Otherwise, the application should import all the bookmarks from the input
    file and display a success message to the user indicating how many bookmarks have
    been imported.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ— æ³•è®¿é—®è¾“å…¥æ–‡ä»¶ï¼Œæˆ–è€…å…¶æ•°æ®ä¸æ˜¯é¢„æœŸçš„æ ¼å¼ï¼Œé‚£ä¹ˆåº”ç”¨ç¨‹åºåº”å‘ç”¨æˆ·æ˜¾ç¤ºç›¸åº”çš„é”™è¯¯æ¶ˆæ¯ã€‚å¦åˆ™ï¼Œåº”ç”¨ç¨‹åºåº”ä»è¾“å…¥æ–‡ä»¶å¯¼å…¥æ‰€æœ‰ä¹¦ç­¾å¹¶å‘ç”¨æˆ·æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯ï¼ŒæŒ‡ç¤ºå·²å¯¼å…¥å¤šå°‘ä¸ªä¹¦ç­¾ã€‚
- en: 'Task #2 â€“ merging existing links from the input file'
  id: totrans-228
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 'ä»»åŠ¡ #2 â€“ åˆå¹¶è¾“å…¥æ–‡ä»¶ä¸­çš„ç°æœ‰é“¾æ¥'
- en: When importing bookmarks from an existing file, it is possible that some of
    them already exist in the bookmarks held by the application.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä»ç°æœ‰æ–‡ä»¶å¯¼å…¥ä¹¦ç­¾æ—¶ï¼Œå¯èƒ½å…¶ä¸­ä¸€äº›å·²ç»å­˜åœ¨äºåº”ç”¨ç¨‹åºæŒæœ‰çš„ä¹¦ç­¾ä¸­ã€‚
- en: In such a situation, it is a best practice for a CLI application to provide
    the user with an option to control whether they want to merge those existing links
    or simply discard them and not import them.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹äºCLIåº”ç”¨ç¨‹åºæ¥è¯´ï¼Œå‘ç”¨æˆ·æä¾›ä¸€ä¸ªé€‰é¡¹æ¥æ§åˆ¶ä»–ä»¬æ˜¯å¦æƒ³è¦åˆå¹¶é‚£äº›ç°æœ‰é“¾æ¥æˆ–ç®€å•åœ°ä¸¢å¼ƒå®ƒä»¬è€Œä¸å¯¼å…¥å®ƒä»¬ï¼Œæ˜¯ä¸€ç§æœ€ä½³å®è·µã€‚
- en: In this task, I challenge you to implement this best practice by adding an optional
    `--merge` option to the `import` command.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸ªä»»åŠ¡ä¸­ï¼Œæˆ‘æŒ‘æˆ˜ä½ é€šè¿‡åœ¨`import`å‘½ä»¤ä¸­æ·»åŠ ä¸€ä¸ªå¯é€‰çš„`--merge`é€‰é¡¹æ¥å®ç°è¿™ä¸€æœ€ä½³å®è·µã€‚
- en: 'Hence, the syntax for the `import` command with the `--merge` option will be
    as follows:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œå¸¦æœ‰`--merge`é€‰é¡¹çš„`import`å‘½ä»¤çš„è¯­æ³•å¦‚ä¸‹ï¼š
- en: '[PRE23]'
  id: totrans-233
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'When the `--merge` option is specified, the expected behavior of the `import`
    command is that for each bookmark in the provided input file, the following apply:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æŒ‡å®š`--merge`é€‰é¡¹æ—¶ï¼Œ`import`å‘½ä»¤çš„é¢„æœŸè¡Œä¸ºæ˜¯å¯¹äºæä¾›çš„è¾“å…¥æ–‡ä»¶ä¸­çš„æ¯ä¸ªä¹¦ç­¾ï¼Œä»¥ä¸‹é€‚ç”¨ï¼š
- en: If its URL already exists in the list of bookmarks held by the application,
    the name of the existing bookmark should be updated with the name corresponding
    to this URL in the input file
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœå…¶URLå·²å­˜åœ¨äºåº”ç”¨ç¨‹åºæŒæœ‰çš„ä¹¦ç­¾åˆ—è¡¨ä¸­ï¼Œåˆ™ç°æœ‰ä¹¦ç­¾çš„åç§°åº”æ›´æ–°ä¸ºä¸è¾“å…¥æ–‡ä»¶ä¸­æ­¤URLå¯¹åº”çš„åç§°
- en: Otherwise, the bookmark should simply be added to the list of bookmarks held
    by the application
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦åˆ™ï¼Œä¹¦ç­¾åº”ç®€å•åœ°æ·»åŠ åˆ°åº”ç”¨ç¨‹åºæŒæœ‰çš„ä¹¦ç­¾åˆ—è¡¨ä¸­
