<html><head></head><body>
<div><h1 class="chapterNumber">14</h1>
<h1 class="chapterTitle" id="_idParaDest-232">Deploying to Production</h1>
<p class="normal">In this chapter, we will take a look at the different options we have when deploying our Blazor application to production. Since there are many different options, going through them all would be a book all by itself.</p>
<p class="normal">We won’t go into detail but rather cover the different things we need to think about so that we can deploy to any provider.</p>
<p class="normal">In the end, deploying is what we need to do to make use of what we build.</p>
<p class="normal">In this chapter, we will cover the following:</p>
<ul>
<li class="bulletList">Continuous delivery options</li>
<li class="bulletList">Hosting options</li>
</ul>
<h1 class="heading-1" id="_idParaDest-233">Technical requirements</h1>
<p class="normal">This chapter is about general deployment, so we won’t need any code.</p>
<h1 class="heading-1" id="_idParaDest-234">Continuous delivery options</h1>
<p class="normal">When <a id="_idIndexMarker548"/>deploying anything to production, we should think about making sure to remove uncertain factors. For example, if we are deploying from our own machine, how do we know it’s the latest version? How do we know that our teammates didn’t recently solve a problem and we don’t have the fix in our branch? To be honest, how do we even know that the version in source control is the same in production, or if the version in production even exists in source control? You know the old saying: “Friends don’t let friends right-click and publish” (to production, that is)?</p>
<p class="normal">This is where <strong class="keyWord">Continuous Integration</strong> and <strong class="keyWord">Continuous Delivery/Deployment</strong> (<strong class="keyWord">CI/CD</strong>) come into the picture. We make<a id="_idIndexMarker549"/> sure that something else makes the deployment to production. Entire books could be written on deployment, so we won’t go that deep into the subject.</p>
<p class="normal">GitHub Actions and Azure DevOps (or Azure Pipelines) are two products from Microsoft for CI/CD. There are many more, such as Jenkins, TeamCity, and GitLab – the list is long. If the CI/CD system we are currently using supports deploying ASP.NET, it will be able to handle Blazor because, in the end, Blazor is just an ASP.NET site.</p>
<p class="normal">If we have tests (which we should have), we should also make sure to set up tests as part of our CI/CD pipeline. The nice thing is that we don’t need to add any specific hardware to test our components; it will work if our CI/CD pipeline can run unit tests.</p>
<p class="normal">Since Blazor is<a id="_idIndexMarker550"/> ASP.NET, nothing is stopping us from going even further with the automated testing of our site.</p>
<p class="normal">There is also something <a id="_idIndexMarker551"/>called <strong class="keyWord">wasm-tools</strong>, which we will take a look at in <em class="chapterRef">Chapter 16</em>, <em class="italic">Going Deeper into WebAssembly</em>.</p>
<h1 class="heading-1" id="_idParaDest-235">Hosting options</h1>
<p class="normal">When it comes to hosting Blazor, there are many options. Any cloud service that can host ASP.NET Core sites should be able to run Blazor without any problems.</p>
<p class="normal">We need to think about some things, so let’s go through the options one by one.</p>
<h2 class="heading-2" id="_idParaDest-236">Hosting Blazor Server/InteractiveServer</h2>
<p class="normal">If the cloud provider <a id="_idIndexMarker552"/>can enable/disable WebSockets, we want to <a id="_idIndexMarker553"/>enable them since that’s the protocol used by SignalR.</p>
<p class="normal">Sometimes, the cloud provider may support .NET Core 3.x but not .NET 8 out of the box. But don’t worry; by making sure to publish our application with the deployment mode as self-contained, we make sure the deployment also adds any files necessary to run the project (this might not be true for all hosting providers).</p>
<p class="normal">This is also a good thing to do to make sure that we are running on the exact framework version we expect.</p>
<h2 class="heading-2" id="_idParaDest-237">Hosting InteractiveWebAssembly</h2>
<p class="normal">InteractiveWebAssembly is using <a id="_idIndexMarker554"/>a .NET Core backend (like we do for the blog), we are hosting a .NET Core website, so the same rules apply as with hosting <a id="_idIndexMarker555"/>Blazor Server. For our blog, we also added SignalR, so we need WebSockets enabled as well.</p>
<h2 class="heading-2" id="_idParaDest-238">Hosting Blazor WebAssembly Standalone </h2>
<p class="normal">If we are using the Blazor<a id="_idIndexMarker556"/> WebAssembly Standalone<a id="_idIndexMarker557"/> template, we don’t need to think about .NET Core hosting. We can host our application in Azure Static Web Apps or even GitHub Pages. This is one of the upsides of doing a Blazor WebAssembly Standalone site.</p>
<h2 class="heading-2" id="_idParaDest-239">Hosting on IIS</h2>
<p class="normal">We can also host our application <a id="_idIndexMarker558"/>on <strong class="keyWord">Internet Information Server</strong> (<strong class="keyWord">IIS</strong>). Install the<a id="_idIndexMarker559"/> hosting bundle, and<a id="_idIndexMarker560"/> it will also make sure to include the ASP.NET Core IIS module if installed on a machine with IIS.</p>
<p class="normal">You need to make sure to enable the WebSocket protocol on the server.</p>
<p class="normal">We currently run our sites on IIS and use Azure DevOps to deploy our sites. Since we are using Blazor Server, the downtime is very evident. As soon as the web loses the SignalR connection, the site will display a reconnect message.</p>
<p class="normal">For the sites we are using, there are about 8 to 10 seconds of downtime when deploying a new version, which is pretty quick.</p>
<h1 class="heading-1" id="_idParaDest-240">Summary</h1>
<p class="normal">In this chapter, we talked about why we should use CI/CD since it makes a huge difference in ensuring the quality of the application. We looked at some of the things we need to do to run our Blazor app on any cloud provider supporting .NET 8.</p>
<p class="normal">Deploying is perhaps the most important step when it comes to an application. Without deploying our application, it’s just code. With the things we mentioned in this chapter, such as CI/CD, hosting, and deployment, we are now ready to deploy the code.</p>
<p class="normal">In the next chapter, we will dig deeper into how we can port a current site, use Blazor with other technologies, or use other technologies with Blazor.</p>
</div>
</body></html>