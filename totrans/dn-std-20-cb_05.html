<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">XML and Data</h1>
                </header>
            
            <article>
                
<p class="mce-root">In this chapter, we will be looking at these recipes:</p>
<ul>
<li>Creating a library that reads and writes to an XML file</li>
<li>Creating an ASP.NET MVC application to use the XMLLib library</li>
<li>Processing an XML file using LINQ to XML</li>
<li>Creating a .NET Core console application to use the library</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p>Readers should have a basic knowledge of C#. They should also have a basic knowledge of using Visual Studio, installing packages using NuGet, and referencing libraries within projects from other projects.</p>
<p class="mce-root">The code files for this chapter can be found on GitHub:<br/>
<a href="https://github.com/PacktPublishing/DotNET-Standard-2-Cookbook/tree/master/Chapter05">https://github.com/PacktPublishing/DotNET-Standard-2-Cookbook/tree/master/Chapter05</a></p>
<p class="mce-root">Check out the following video to see the code in action:<br/>
<a href="https://goo.gl/uQTMeB">https://goo.gl/uQTMeB</a></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Introduction</h1>
                </header>
            
            <article>
                
<p class="mce-root">XML stands for Extensible Markup Language and is similar to HTML. XML is used to store and read data. Mainly, XML is a data storage system and is also used to transport data. C# supports XML within the language using the <kbd>System.XML</kbd> namespace. You will be able to read, write, and parse XML data using this namespace. With the support of LINQ, it's much easier to work with XML-based data.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating a library that reads and writes to an XML file</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will be using a .NET Standard 2.0 library to create and write to an XML file. We will also be using the same library to write data to an XML file.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Let's fire up Visual Studio 2017 and get things done. Make sure you have the latest version of Visual Studio 2017 installed.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open Visual Studio 2017.</li>
<li>Click <span class="packt_screen">File</span> | <span class="packt_screen">New</span> | <span class="packt_screen">Project</span><strong> </strong>to create a project. </li>
<li>In the <span class="packt_screen">New Project</span> dialog box, expand the <span class="packt_screen">Other Project Types</span> node in the left-hand pane and select <span class="packt_screen">Visual Studio Solutions</span>. In the right-hand pane, select <span class="packt_screen">Blank Solution</span>.</li>
<li>In the <span class="packt_screen">Name:</span> textbox, type <kbd>Chapter5.XmlDoc</kbd> and, in the <span class="packt_screen">Location:</span> textbox, select path from the drop-down box or click on the <span class="packt_screen">Browse...</span> button to locate a path:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-723 image-border" src="assets/308964a5-35b3-47ac-b647-0fbc05f0425c.png" style="width:154.92em;height:22.33em;"/></div>
<ol start="5">
<li>Click OK.</li>
</ol>
<ol start="6">
<li>Now, the <span class="packt_screen">Solution Explorer</span> <span>(</span><em>Ctrl</em> <span>+</span> <em>Alt</em><span> +</span> <em>L</em><span>) should look like this:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-724 image-border" src="assets/96bc893c-26ec-4e4d-a96c-c360b7e456e2.png" style="width:29.00em;height:9.08em;"/></div>
<ol start="7">
<li>Now, right-click on the <kbd>Chapter5.XmlDoc</kbd> label in the <span class="packt_screen">Solution Explorer</span> and select <span class="packt_screen">Add</span> | <span class="packt_screen">New Project</span>.</li>
<li>In the <span class="packt_screen">New Project</span> dialog box, expand the <span class="packt_screen">Visual C#</span> node.</li>
<li>Select <span class="packt_screen">.NET Standard</span> in the left-hand pane and <span class="packt_screen">Class Library (.NET Standard)</span> in the right-hand pane:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-725 image-border" src="assets/b7564635-db3a-4afd-b5ca-386f3d5ed78d.png" style="width:156.67em;height:108.42em;"/></div>
<ol start="10">
<li>Now, in the <span class="packt_screen">Name:</span> textbox, type <kbd>Chapter5.XmlDoc.XmlLib</kbd>, leave the other defaults as they are, and click <span class="packt_screen">OK</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/188216b7-5008-4b33-bd0c-c82e51e5cd20.png"/></div>
<ol start="11">
<li>Now, the <span class="packt_screen">Solution Explorer</span> (<em>Ctrl</em> + <em>Alt</em> + <em>L</em>) should look like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-726 image-border" src="assets/270f9692-ea73-47d6-a722-2f160463e753.png" style="width:25.58em;height:11.17em;"/></div>
<ol start="12">
<li>Now, select <kbd>Class1.cs</kbd> in the <span class="packt_screen">Solution Explorer</span> and press <em>F2</em> to rename the file <kbd>XMLLog.cs</kbd>.</li>
<li>Answer <span class="packt_screen">Yes</span> in the confirmation dialog box that asks to rename the class name as well.</li>
<li>Now double-click on the <kbd>XMLLog.cs</kbd> label in the <span class="packt_screen">Solution Explorer</span>.</li>
<li>Scroll up until you reach the <kbd>using</kbd> directives and add these at the end of the last <kbd>using</kbd> directive:</li>
</ol>
<pre>        using System.Xml;<br/>        using System.IO;<br/>        using System.Xml.Linq;<br/>        using System.Collections.Generic;<br/>        using System.Linq;</pre>
<ol start="16">
<li>Now, scroll down and add this class variable on top of the <kbd>XMLLog</kbd> class:</li>
</ol>
<pre>        private string _xmlFile;</pre>
<ol start="17">
<li>Let's add the constructor for the <kbd>XMLLog</kbd> class:</li>
</ol>
<pre>        public XMLLog(string xmlFile)<br/>        {<br/>          _xmlFile = xmlFile;<br/>        }</pre>
<ol start="18">
<li>Add the following public method after the constructor of the class:</li>
</ol>
<pre>        public void WriteToLog(string message)<br/>        {<br/><br/>          if (!File.Exists(_xmlFile))<br/>          {<br/>            using (XmlWriter xmlWriter = XmlWriter.Create(_xmlFile))<br/>            {<br/>              xmlWriter.WriteStartDocument();<br/>              xmlWriter.WriteStartElement("Log");<br/>              xmlWriter.WriteStartElement("LogEntry");<br/>              xmlWriter.WriteElementString("LogDate", DateTime.Now.ToString());<br/>              xmlWriter.WriteElementString("Message", message);<br/>              xmlWriter.WriteEndElement();<br/>              xmlWriter.WriteEndElement();<br/>              xmlWriter.WriteEndDocument();<br/>            <br/>              xmlWriter.Flush();<br/>              xmlWriter.Close();<br/>            }<br/>          }<br/>          else<br/>          {<br/>            XDocument xDoc = XDocument.Load(_xmlFile);<br/>            XElement root = xDoc.Element("Log");<br/>            IEnumerable&lt;XElement&gt; rows = root.Descendants("LogEntry");<br/>        <br/>            XElement lastRow = rows.Last();<br/>            lastRow.AddAfterSelf(<br/>              new XElement("LogEntry",<br/>              new XElement("LogDate", DateTime.Now.ToString()),<br/>              new XElement("Message", message)));<br/><br/>            xDoc.Save(_xmlFile);<br/>          }<br/>        }</pre>
<ol start="19">
<li>Now, add this code next to the <kbd>WriteToLog()</kbd> method:</li>
</ol>
<pre>        public Dictionary&lt;string, string&gt; ReadLog()<br/>        {<br/><br/>          var xmlOutPut = new Dictionary&lt;string, string&gt;();<br/>          var line = 0;<br/> <br/>          if (File.Exists(_xmlFile))<br/>          {<br/>            using (XmlReader xmlReader = XmlReader.Create(_xmlFile))<br/>            {<br/>              while(xmlReader.Read())<br/>              {<br/><br/>                if (xmlReader.IsStartElement())<br/>                {<br/><br/>                  switch (xmlReader.Name)<br/>                  {<br/>                    case "LogDate":<br/>                      xmlOutPut.Add($"LogDate - {line}", xmlReader.ReadElementContentAsString());<br/>                      break;<br/>                    case "Message":<br/>                      xmlOutPut.Add($"Message - {line}", xmlReader.ReadElementContentAsString());<br/>                      break;    <br/>                  }<br/>                }<br/>                line++;<br/>              }<br/>            }<br/><br/>            return xmlOutPut;<br/>          }<br/>        }</pre>
<ol start="20">
<li>Let's press <em>Ctrl</em> + <em>Shift</em> + <em>B</em> for a quick build.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>We created a blank solution in steps 1 to 5 and gave the solution a proper name. Blank solutions are always a good start for a project of any scale. Then, in steps 6 to 10, we added a .NET Standard 2.0 library project to the solution. In steps 11, 12, and 13, we renamed the default class template generated from Visual Studio.</p>
<p>In step 15, we added all the required namespaces for our library. <kbd>System.Xml</kbd> and <kbd>System.Xml.Linq</kbd> are the two namespaces we are going to focus on. <kbd>System.Xml</kbd> gives you the functionality of creating and maintaining XML documents. <kbd>System.Xml.Linq</kbd> is a LINQ extension to manipulate XML data.</p>
<p>In step 16, we created a class-level private variable to store the path of the XML file. In step 17, we created the constructor for the class that takes a parameter as a string. This parameter is the filename with the path of the XML file. It also populates the private variable created in step 16. In step 18, we added a public method to write an XML file.</p>
<p>In the first line of code, we check for the existence of the XML file. If it doesn't exist, the following piece of code will take over:</p>
<pre>using (XmlWriter xmlWriter = XmlWriter.Create(_xmlFile))<br/>{<br/>    xmlWriter.WriteStartDocument();<br/>    xmlWriter.WriteStartElement("Log");<br/>    xmlWriter.WriteStartElement("LogEntry");<br/>    xmlWriter.WriteElementString("LogDate", DateTime.Now.ToString());<br/>    xmlWriter.WriteElementString("Message", message);<br/>    xmlWriter.WriteEndElement();<br/>    xmlWriter.WriteEndElement();<br/>    xmlWriter.WriteEndDocument();<br/>            <br/>    xmlWriter.Flush();<br/>    xmlWriter.Close();<br/>}</pre>
<p>We have used the <kbd>XmlWriter</kbd> class and its <kbd>Create</kbd> method to create the XML file. In this case, it is wrapped inside a <kbd>using</kbd> keyword. This is a good practice if the class is implementing an <kbd>IDisposable</kbd> interface, and when the lifetime is limited to a method. The <kbd>using</kbd> statement calls the <kbd>Dispose</kbd> method on the object in the correct way, and it also causes the object itself to go out of scope as soon as <kbd>Dispose</kbd> is called. Finally, the <kbd>XmlWriter</kbd> class's <kbd>Flush()</kbd> method will clear the buffer and the <kbd>Close()</kbd> method will close the writer stream.</p>
<p>In the next few lines of code, we started writing the document, and finally we cleared things up and closed the <kbd>XmlWriter</kbd>. If the file exists, we created a few lines of code to handle the existing XML document and append data to it. The code looks like this:</p>
<pre>XDocument xDoc = XDocument.Load(_xmlFile);<br/>XElement root = xDoc.Element("Log");<br/>IEnumerable&lt;XElement&gt; rows = root.Descendants("LogEntry");<br/>        <br/>XElement lastRow = rows.Last();<br/>lastRow.AddAfterSelf(<br/>    new XElement("LogEntry",<br/>        new XElement("LogDate", DateTime.Now.ToString()),<br/>            new XElement("Message", message)));<br/><br/>xDoc.Save(_xmlFile);</pre>
<p>In this part of the code, we created an <kbd>XDocument</kbd> class to handle the existing XML file. This class is referenced from the <kbd>System.Xml.Linq</kbd> namespace. In the first line, we loaded the existing XML file. We looked for the root element of the document in the second line. We picked up all the descendants of the root element and picked the last element from that list. This is the point at which we are going to add the new data. We have used the <kbd>AddAfterSelf()</kbd> method to add the new entry to the XML document and finally, we saved the document. </p>
<p>In step 19, we created a method to read an existing XML document. In the first line, we created a dictionary to store the data we read from the XML document. Then, we checked whether the file is there to read and created code to read the file. We used the <kbd>XmlReader()</kbd> class this time to read the data and store it in the dictionary:</p>
<pre>while(xmlReader.Read())<br/>{<br/>    if (xmlReader.IsStartElement())<br/>    {<br/><br/>        switch (xmlReader.Name)<br/>        {<br/>            case "LogDate":<br/>                xmlOutPut.Add($"LogDate - {line}", xmlReader.ReadElementContentAsString());<br/>                break;<br/>            case "Message":<br/>                xmlOutPut.Add($"Message - {line}", xmlReader.ReadElementContentAsString());</pre>
<pre>                break;    <br/>        }<br/>     }<br/>     line++;<br/> }</pre>
<p>We have used a <kbd>while</kbd> loop to go through each line of the XML document and used a <kbd>switch</kbd> statement to check for the correct element and store it in the dictionary. As you can see, by using a <kbd>counter</kbd> (<kbd>line</kbd>) variable, we have created a unique key for the dictionary as well. Finally, we returned the populated dictionary. In step 20, we performed a quick build to check for correct syntax.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating an ASP.NET MVC application to use the XMLLib library</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will be creating an ASP.NET MVC application to use the library. This time, it will be under Windows and will be using the full .NET Framework under Windows.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Let's make sure we have completed the previous recipe. In that recipe, we built a .NET Standard 2.0 library to create and read an XML document. Let's create an ASP.NET MVC application to use the library.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open Visual Studio 2017.</li>
<li>Now, open the solution from the previous recipe. Click<span> </span><span class="packt_screen">File</span><span> |</span><span> </span><span class="packt_screen">Open</span><span> |</span><span> </span><span class="packt_screen">Open Project/Solution</span><span>, </span>or press<span> </span><em>Ctrl</em> + <em>Shift</em> + <em>O</em><span>, </span>and select the <kbd>Chapter5.XmlDoc</kbd> solution.</li>
<li>Press<span> </span><em>Ctrl</em><span> </span>+<span> </span><em>Shift</em><span> </span>+<span> </span><em>B</em><span> </span>for a quick build to check that everything is fine. </li>
<li>Now, click on the <kbd>Chapter5.XmlDoc</kbd> solution label. Click<span> </span><span class="packt_screen">File</span><span> |</span><span> </span><span class="packt_screen">Add</span><span> |</span><span> </span><span class="packt_screen">New Project</span>.</li>
<li>In the<span> </span><span class="packt_screen">Add New Project</span><span> </span>template dialog box, expand the <span class="packt_screen">Visual C#</span> node in the left-hand pane. </li>
</ol>
<ol start="6">
<li>Select <span class="packt_screen">Web</span> and select <span class="packt_screen">ASP.NET Web Application (.NET Framework)</span> in the right-hand pane:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-727 image-border" src="assets/68268733-a659-4d33-a786-b736c0960b86.png" style="width:97.58em;height:67.42em;"/></div>
<ol start="7">
<li>Now, in the <span class="packt_screen">Name:</span> textbox, type <kbd>Chapter5.XmlDoc.XmlMVC</kbd> as the name and leave the <span class="packt_screen">Location:</span> textbox at its default value:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-728 image-border" src="assets/7f548e56-a535-4f90-9c9d-50eb42fd5f0f.png" style="width:154.33em;height:14.50em;"/></div>
<ol start="8">
<li>In the <span class="packt_screen">New ASP.NET Web Application</span> dialog box, select <span class="packt_screen">Empty</span> from the template list.</li>
</ol>
<ol start="9">
<li>Select <span class="packt_screen">MVC</span> in the <span class="packt_screen">Add folders and core references for:</span> option:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-729 image-border" src="assets/771c4ff1-22f6-4999-922f-fec4d72b0600.png" style="width:130.00em;height:84.83em;"/></div>
<ol start="10">
<li>Leave the rest as it is and click <span class="packt_screen">OK</span> to create the default ASP.NET MVC web application template. </li>
</ol>
<ol start="11">
<li>Now, the <span class="packt_screen">Solution Explorer</span> should look like this: </li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-730 image-border" src="assets/78b382b8-ac7d-4d9c-a240-f19fef0f749f.png" style="width:30.00em;height:31.83em;"/></div>
<ol start="12">
<li>Now, right-click on the <span class="packt_screen">References</span> label under the <kbd>Chapter5.XmlDoc.XmlMVC</kbd> project and select <span class="packt_screen">Add Reference</span>.</li>
</ol>
<ol start="13">
<li>In the <span class="packt_screen">Reference Manager</span> dialog box, select <span class="packt_screen">Projects</span> in the left-hand pane and select <kbd>Chapter5.XmlDoc.XmLib</kbd> in the right-hand pane:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-731 image-border" src="assets/23270984-2046-4736-9c77-a3e8a6f5ddfe.png" style="width:130.83em;height:89.83em;"/></div>
<ol start="14">
<li>Click <span class="packt_screen">OK</span>.</li>
<li>Now, right-click on the <kbd>Controllers</kbd> folder inside the <kbd>Chapter5.XmlDoc.XmlMVC</kbd> project. </li>
<li>Select <span class="packt_screen">Add</span> | <span class="packt_screen">Controller</span>.</li>
</ol>
<ol start="17">
<li>In the <span class="packt_screen">Add Scaffold</span> dialog box, select <span class="packt_screen">MVC 5 Controller – Empty</span> from the template list and click <span class="packt_screen">Add</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-732 image-border" src="assets/9c589a67-dbdd-4512-a1e1-9247e2af7353.png" style="width:155.42em;height:108.25em;"/></div>
<ol start="18">
<li>Now, in the <span class="packt_screen">Add Controller</span> dialog box, type <kbd>HomeController</kbd> in the <span class="packt_screen">Controller name:</span> textbox:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-733 image-border" src="assets/e8dea97a-c1bf-4e9a-8065-632b50bd4e6a.png" style="width:33.08em;height:6.50em;"/></div>
<ol start="19">
<li>Click <span class="packt_screen">Add</span>.</li>
<li>Now double-click on the <kbd>HomeController.cs</kbd> label under the <kbd>Controllers</kbd> folder.</li>
</ol>
<ol start="21">
<li>In the code window, right-click on the <kbd>Index()</kbd> method name and select <span class="packt_screen">Add View</span>.</li>
<li>Leave the defaults in the <span class="packt_screen">Add View</span> dialog box and click <span class="packt_screen">Add</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-734 image-border" src="assets/fefa72b9-9813-4ef8-bdae-de5dd42398b8.png" style="width:31.25em;height:17.58em;"/></div>
<ol start="23">
<li>Click on the <kbd>HomeController.cs</kbd> tab in the code window.</li>
<li>Add this <kbd>using</kbd> directive to the top of the code, next to the last line of the directives:</li>
</ol>
<pre>        using Chapter5.XmlDoc.XmlLib;</pre>
<ol start="25">
<li>Now, let's add this code inside the <kbd>Index()</kbd> method and before the <kbd>return</kbd> statement:</li>
</ol>
<pre>        var xmlFile = $"{Server.MapPath("~")}/testlog.xml";<br/><br/>        var xmlLog = new XMLLog(xmlFile);<br/>        xmlLog.WriteToLog("Start at the Index() method");<br/>        xmlLog.WriteToLog("Another log entry here");<br/>        xmlLog.WriteToLog("Before the return statement");</pre>
<ol start="26">
<li>Press <em>F5</em> to test our code and you should get an output like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-735 image-border" src="assets/6904df07-be57-4445-94eb-48c45fceca58.png" style="width:41.50em;height:12.67em;"/></div>
<ol start="27">
<li>Now close the browser and, in the <span class="packt_screen">Solution Explorer</span>, click on the Show All Files icon:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-736 image-border" src="assets/b4b77462-fc32-4963-9491-7d8e8c92ddc4.png" style="width:35.25em;height:13.58em;"/></div>
<ol start="28">
<li>Now you should see that the <kbd>textlog.xml</kbd> label is created and the <span class="packt_screen">Solution Explorer</span> should look like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-737 image-border" src="assets/ed2d8c18-9147-4f0c-8ed4-496a1c7acbb7.png" style="width:23.83em;height:32.50em;"/></div>
<ol start="29">
<li>Click on the <kbd>testlog.xml</kbd> label and you should see output similar to this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-738 image-border" src="assets/0f9b9cd3-ff3b-4acc-8128-c50fa291f6f2.png" style="width:32.42em;height:17.08em;"/></div>
<ol start="30">
<li>Now, let's click on the <kbd>HomeController.cs</kbd> tab and add this code next to the <kbd>Index()</kbd> method:</li>
</ol>
<pre>        public ActionResult Display()<br/>        {<br/><br/>            var xmlFile = $"{Server.MapPath("~")}/testlog.xml";<br/>            var xmlLog = new XMLLog(xmlFile);<br/><br/>            ViewBag.LogDetails = xmlLog.ReadLog();<br/><br/>            return View();<br/>        }</pre>
<ol start="31">
<li>Now, right-click on the <kbd>Display()</kbd> method name and select <span class="packt_screen">Add View</span>.</li>
<li>Follow step 22 to add the view.</li>
<li>Now, in <kbd>Display.cshtml</kbd>, add the following code next to the <kbd>&lt;h2&gt;</kbd> tags:</li>
</ol>
<pre>        @{ <br/><br/>            var xmlLogDetails = (Dictionary&lt;string, string&gt;)ViewBag.LogDetails;<br/><br/>            foreach (var log in xmlLogDetails)<br/>            {<br/>                &lt;p&gt;@log.Key.Split('-')[0]: @log.Value.Split('-')[0]&lt;/p&gt;<br/>            }<br/>        }</pre>
<ol start="34">
<li>Now, let's press <em>F5</em> to debug the code. By default, this should load <kbd>Display.chtml</kbd> in the browser; if not, type <kbd>http://locahost&lt;portnumber/Home/Display</kbd> and press <em>Enter</em>.</li>
<li>You should see output similar to this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-739 image-border" src="assets/24ccc89b-f5fc-4075-bf57-d5c7f4070818.png" style="width:149.17em;height:78.58em;"/></div>
<ol start="36">
<li>Now close your browser and we are done.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In steps 1 to 10, we opened an existing solution that contained the library for reading and writing XML files. Then, in these steps, we added an ASP.NET MVC project to that solution. In step 13, we added a reference to our library built in the previous recipe. This will allow you to access available methods from the library.</p>
<p>In steps 16 to 20, we added a controller to the project and named it <kbd>HomeController</kbd>. In step 24, we added a <kbd>using</kbd> directive to reference the library. In step 25, we created code to create an instance of the <kbd>XMLLog</kbd> class and used it in methods to create and write to the XML document. In the following line of code, w<span>e are giving the path and name of our XML file: </span></p>
<pre>var xmlFile = $"{Server.MapPath("~")}/testlog.xml";</pre>
<p><kbd>Server.MapPath("~")</kbd> guarantees the file is created at the root of our web folder. In steps 26 to 29, we confirmed our code is working and the XML file is created with the log entries. In step 30, we created a new action for our <kbd>HomeController</kbd>. We created an instance of the <kbd>XMLLog</kbd> class and used it in methods to read the information from the log file. Then we stored the values in <kbd>ViewBag</kbd>:</p>
<pre>ViewBag.LogDetails = xmlLog.ReadLog();</pre>
<p>In step 32, we created a view for the <kbd>Display</kbd> action, such as we did in step 22. Then we added code for the view in step 32, which converted <kbd>ViewBag</kbd> to a dictionary and displayed the content inside it. Finally, we tested the output in steps 34 and 35.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Processing an XML file using LINQ to XML</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will be building a .NET Standard 2.0 library that reads XML data using LINQ to XML. LINQ to XML is a LINQ enabled in-memory programming interface. It enables you to work with XML using your favorite .NET language. C# is used in this book to describe the code. In this recipe, we will mainly be looking at querying an XML document using LINQ to XML. We have used LINQ to XML to write to an XML file in the <em>A library that reads and writes to an XML file</em> recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes you have used LINQ. We are focusing on LINQ with XML documents. Let's fire up Visual Studio and get started.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open Visual Studio 2017.</li>
<li>Click <span class="packt_screen">File</span> | <span class="packt_screen">New</span> | <span class="packt_screen">Project</span><strong> </strong>to create a project. </li>
</ol>
<ol start="3">
<li>In the <span class="packt_screen">New Project</span> dialog box, expand the <span class="packt_screen">Other Project Types</span> node in the left-hand pane and select <span class="packt_screen">Visual Studio Solutions</span>. In the right-hand pane, select <span class="packt_screen">Blank Solution</span>.</li>
</ol>
<ol start="4">
<li>In the <span class="packt_screen">Name:</span> textbox, type <kbd>Chapter5.XmlLinq</kbd> and, in the <span class="packt_screen">Location:</span> textbox, select a path from the drop-down box or click on the <span class="packt_screen">Browse...</span> button to locate a path:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-740 image-border" src="assets/cb5f87f6-ad6b-4fdb-b062-b9d8047d724a.png" style="width:46.92em;height:8.17em;"/></div>
<ol start="5">
<li>Click OK.</li>
<li>Now, the <span class="packt_screen">Solution Explorer</span> (<em>Ctrl</em> + <em>Alt</em> + <em>L</em>) should look like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-741 image-border" src="assets/54bb3e4b-3592-4274-abf3-78fc9eece2dd.png" style="width:40.25em;height:11.00em;"/></div>
<ol start="7">
<li>Now, right-click on the <kbd>Chapter5.XmlLinq</kbd> label in the <span class="packt_screen">Solution Explorer</span> and select <span class="packt_screen">Add</span> | <span class="packt_screen">New Project</span>.</li>
<li>In the <span class="packt_screen">New Project</span> dialog box, expand the <span class="packt_screen">Visual C#</span> node.</li>
</ol>
<ol start="9">
<li>Select <span class="packt_screen">.NET Standard</span> in the left-hand pane and <span class="packt_screen">Class Library (.NET Standard)</span> in the right-hand pane:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-742 image-border" src="assets/93da862e-656c-4cd7-8a44-3e04475ac5ef.png" style="width:156.25em;height:108.08em;"/></div>
<ol start="10">
<li>Now, in the <span class="packt_screen">Name:</span> textbox, type <kbd>Chapter5.XmlLinq.XmlLinqLib</kbd>, leave the other defaults as they are, and click <span class="packt_screen">OK</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-743 image-border" src="assets/28b8444d-9c8f-4e26-ac5c-376c565beec2.png" style="width:154.33em;height:14.25em;"/></div>
<ol start="11">
<li>Now, the <span class="packt_screen">Solution Explorer</span> (<em>Ctrl</em> + <em>Alt</em> + <em>L</em>) should look like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-744 image-border" src="assets/7c1a78e5-a95d-4a08-9237-c771e7e1007a.png" style="width:26.50em;height:11.83em;"/></div>
<ol start="12">
<li>Now, select <kbd>Class1.cs</kbd> in the <span class="packt_screen">Solution Explorer</span> and press <em>F2</em> to rename the file <kbd>XmlBooks.cs</kbd>.</li>
<li>Answer <span class="packt_screen">Yes</span> in the confirmation dialog box that asks to rename the class name as well.</li>
<li>Now double-click on the <kbd>XmlBooks.cs</kbd> label in the <span class="packt_screen">Solution Explorer</span>.</li>
<li>Add the following <kbd>using</kbd> directives next to the last directive in the list:</li>
</ol>
<pre>        using System.Collections.Generic;<br/>        using System.Xml;<br/>        using System.Xml.Linq;</pre>
<ol start="16">
<li> Add the following private variable to store the XML filename:</li>
</ol>
<pre>        private string _xmlFile;</pre>
<ol start="17">
<li>Create the default constructor as follows:</li>
</ol>
<pre>        public XmlBooks(string xmlFile)<br/>        {<br/>            _xmlFile = xmlFile;<br/>        }</pre>
<ol start="18">
<li>Now add the following method to read the XML file:</li>
</ol>
<pre>        public List&lt;string&gt; GetBookTitles()<br/>        {<br/><br/>            var titles = new List&lt;string&gt;();<br/>            XDocument xDoc = XDocument.Load(_xmlFile);<br/><br/>            var books = xDoc.Descendants("book"); <br/><br/>            foreach (var book in books)<br/>            {<br/>                titles.Add(book.Element("title").Value);<br/>            }<br/> <br/>            return titles;<br/>        }</pre>
<ol start="19">
<li>Now, let's press <em>Ctrl</em> + <em>Shift</em> + <em>B</em> for a quick build to check that all the syntax is intact.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In steps 1 to 10, we added a blank solution and a .NET Standard 2.0 class library to the project. We assigned proper names to our solution and the class library project. Then, in step 15, we added using directives. These directives help us to get the functionality we require for generic collections and LINQ support for XML.</p>
<p>In step 16, we added a private variable to store the XML filename. Then, in step 17, we created code to populate this variable using a default constructor for the <kbd>XmlBooks</kbd> class. In step 18, we created a method to read the titles of the books contained in the XML file. This XML file will be created in the next recipe. In the code, we have used <kbd>XDocument</kbd> to load the XML file, which was supported by the <kbd>System.Xml.Linq</kbd> namespace. We stored the decedents in a variable, iterated each element, and stored them in a <kbd>List&lt;string&gt;</kbd> generic collection.</p>
<p>Finally, we built the code to check the syntax.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating a .NET Core console application to use the library</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will be creating a .NET Core console application to use the library created in the previous recipe. You can try this recipe on any platform, such as Linux or macOS, since .NET Core is a cross-platform library. In this recipe, we will be focusing on Windows.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Let's get ready by looking at the previously built .NET Standard 2.0 library that reads an XML file. Make sure you have this XML file created under your project. We will be using this file to read. This sample is from the MSDN library itself:</p>
<pre><span>&lt;?</span><span>xml</span> <span>version</span><span>=</span><span>"</span><span>1.0</span><span>"</span><span>?&gt;</span>
<span>&lt;</span><span>catalog</span><span>&gt;</span>
   <span>&lt;</span><span>book</span> <span>id</span><span>=</span><span>"</span><span>bk101</span><span>"</span><span>&gt;</span>
      <span>&lt;</span><span>author</span><span>&gt;</span>Gambardella, Matthew<span>&lt;/</span><span>author</span><span>&gt;</span>
      <span>&lt;</span><span>title</span><span>&gt;</span>XML Developer's Guide<span>&lt;/</span><span>title</span><span>&gt;</span>
      <span>&lt;</span><span>genre</span><span>&gt;</span>Computer<span>&lt;/</span><span>genre</span><span>&gt;</span>
      <span>&lt;</span><span>price</span><span>&gt;</span>44.95<span>&lt;/</span><span>price</span><span>&gt;</span>
      <span>&lt;</span><span>publish_date</span><span>&gt;</span>2000-10-01<span>&lt;/</span><span>publish_date</span><span>&gt;</span>
      <span>&lt;</span><span>description</span><span>&gt;</span>An in-depth look at creating applications 
      with XML.<span>&lt;/</span><span>description</span><span>&gt;</span>
   <span>&lt;/</span><span>book</span><span>&gt;</span>
   <span>&lt;</span><span>book</span> <span>id</span><span>=</span><span>"</span><span>bk102</span><span>"</span><span>&gt;</span>
      <span>&lt;</span><span>author</span><span>&gt;</span>Ralls, Kim<span>&lt;/</span><span>author</span><span>&gt;</span>
      <span>&lt;</span><span>title</span><span>&gt;</span>Midnight Rain<span>&lt;/</span><span>title</span><span>&gt;</span>
      <span>&lt;</span><span>genre</span><span>&gt;</span>Fantasy<span>&lt;/</span><span>genre</span><span>&gt;</span>
      <span>&lt;</span><span>price</span><span>&gt;</span>5.95<span>&lt;/</span><span>price</span><span>&gt;</span>
      <span>&lt;</span><span>publish_date</span><span>&gt;</span>2000-12-16<span>&lt;/</span><span>publish_date</span><span>&gt;</span>
      <span>&lt;</span><span>description</span><span>&gt;</span>A former architect battles corporate zombies, 
      an evil sorceress, and her own childhood to become queen 
      of the world.<span>&lt;/</span><span>description</span><span>&gt;</span>
   <span>&lt;/</span><span>book</span><span>&gt;</span>
   <span>&lt;</span><span>book</span> <span>id</span><span>=</span><span>"</span><span>bk103</span><span>"</span><span>&gt;</span>
      <span>&lt;</span><span>author</span><span>&gt;</span>Corets, Eva<span>&lt;/</span><span>author</span><span>&gt;</span>
      <span>&lt;</span><span>title</span><span>&gt;</span>Maeve Ascendant<span>&lt;/</span><span>title</span><span>&gt;</span>
      <span>&lt;</span><span>genre</span><span>&gt;</span>Fantasy<span>&lt;/</span><span>genre</span><span>&gt;</span>
      <span>&lt;</span><span>price</span><span>&gt;</span>5.95<span>&lt;/</span><span>price</span><span>&gt;</span>
      <span>&lt;</span><span>publish_date</span><span>&gt;</span>2000-11-17<span>&lt;/</span><span>publish_date</span><span>&gt;</span>
      <span>&lt;</span><span>description</span><span>&gt;</span>After the collapse of a nanotechnology 
      society in England, the young survivors lay the 
      foundation for a new society.<span>&lt;/</span><span>description</span><span>&gt;</span>
   <span>&lt;/</span><span>book</span><span>&gt;</span>
   <span>&lt;</span><span>book</span> <span>id</span><span>=</span><span>"</span><span>bk104</span><span>"</span><span>&gt;</span>
      <span>&lt;</span><span>author</span><span>&gt;</span>Corets, Eva<span>&lt;/</span><span>author</span><span>&gt;</span>
      <span>&lt;</span><span>title</span><span>&gt;</span>Oberon's Legacy<span>&lt;/</span><span>title</span><span>&gt;</span>
      <span>&lt;</span><span>genre</span><span>&gt;</span>Fantasy<span>&lt;/</span><span>genre</span><span>&gt;</span>
      <span>&lt;</span><span>price</span><span>&gt;</span>5.95<span>&lt;/</span><span>price</span><span>&gt;</span>
      <span>&lt;</span><span>publish_date</span><span>&gt;</span>2001-03-10<span>&lt;/</span><span>publish_date</span><span>&gt;</span>
      <span>&lt;</span><span>description</span><span>&gt;</span>In post-apocalypse England, the mysterious 
      agent known only as Oberon helps to create a new life 
      for the inhabitants of London. Sequel to Maeve 
      Ascendant.<span>&lt;/</span><span>description</span><span>&gt;</span>
   <span>&lt;/</span><span>book</span><span>&gt;</span>
   <span>&lt;</span><span>book</span> <span>id</span><span>=</span><span>"</span><span>bk105</span><span>"</span><span>&gt;</span>
      <span>&lt;</span><span>author</span><span>&gt;</span>Corets, Eva<span>&lt;/</span><span>author</span><span>&gt;</span>
      <span>&lt;</span><span>title</span><span>&gt;</span>The Sundered Grail<span>&lt;/</span><span>title</span><span>&gt;</span>
      <span>&lt;</span><span>genre</span><span>&gt;</span>Fantasy<span>&lt;/</span><span>genre</span><span>&gt;</span>
      <span>&lt;</span><span>price</span><span>&gt;</span>5.95<span>&lt;/</span><span>price</span><span>&gt;</span>
      <span>&lt;</span><span>publish_date</span><span>&gt;</span>2001-09-10<span>&lt;/</span><span>publish_date</span><span>&gt;</span>
      <span>&lt;</span><span>description</span><span>&gt;</span>The two daughters of Maeve, half-sisters, 
      battle one another for control of England. Sequel to 
      Oberon's Legacy.<span>&lt;/</span><span>description</span><span>&gt;</span>
   <span>&lt;/</span><span>book</span><span>&gt;</span>
<span>&lt;/</span><span>catalog</span><span>&gt;</span></pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open Visual Studio 2017.</li>
<li>Now, open the solution from the previous recipe. Click<span> </span><span class="packt_screen">File</span><span> |</span><span> </span><span class="packt_screen">Open</span><span> </span>|<span> </span><span class="packt_screen">Open Project/Solution</span><span>, </span>or press<span> </span><em>Ctrl</em> + <em>Shift</em> + <em>O</em><span>, </span>and select the <kbd>Chapter5.XmlLinq</kbd> solution. </li>
<li>Press <em>Ctrl</em> + <em>Shift</em> + <em>B</em> for a quick build to check that everything is fine. </li>
<li>Now, click on the <kbd>Chapter5.XmlLinq</kbd> solution label. Click<span> </span><span class="packt_screen">File</span><span> |</span><span> </span><span class="packt_screen">Add</span><span> |</span><span> </span><span class="packt_screen">New Project</span>.</li>
<li>In the<span> </span><span class="packt_screen">Add New Project</span><span> </span>template dialog box, expand the <span class="packt_screen">Visual C#</span> node in the left-hand pane. </li>
<li>Select<span> </span><span class="packt_screen">.NET Core</span><span> </span>and select<span> </span><span class="packt_screen"><span>Console</span> App (.NET Core)</span><span> </span>in the right-hand pane:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-745 image-border" src="assets/5180dc5f-a7ed-4d1e-9fcc-ef453a10e839.png" style="width:156.67em;height:108.17em;"/></div>
<ol start="7">
<li>Now, in the <span class="packt_screen">Name:</span> textbox, type <kbd>Chapter5.XmlLinq.XmlCore</kbd> as the name of the project. The rest of the fields can be left as they are:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-746 image-border" src="assets/ea5625b6-c6c7-46b6-a996-e71b9eec10fd.png" style="width:154.08em;height:14.50em;"/></div>
<ol start="8">
<li>Click <span class="packt_screen">OK</span>.</li>
</ol>
<ol start="9">
<li>Now, the <span class="packt_screen">Solution Explorer</span> (press <em>Ctrl</em> + <em>Alt</em> + <em>L</em>) should display like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-747 image-border" src="assets/10217c10-99bd-40ba-8163-0973c5a7962d.png" style="width:20.67em;height:12.50em;"/></div>
<ol start="10">
<li>Right-click on the <span class="packt_screen">Dependencies</span> label under <kbd>Chapter5.XmlLinq.XmlCore</kbd>.</li>
<li>Select <span class="packt_screen">Add Reference</span>.</li>
<li>In the <span class="packt_screen">Reference Manager</span>, click on the <span class="packt_screen">Projects</span> label in the right-hand pane: </li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-748 image-border" src="assets/326b7696-d278-4750-ab83-7ca506011f4c.png" style="width:130.92em;height:90.00em;"/></div>
<ol start="13">
<li>Check the <kbd>Chapter5.XmlLinq.XmlLinqLib</kbd><strong> </strong>project in the left-hand pane.</li>
<li>Click <span class="packt_screen">OK</span>.</li>
<li>Now click on the project name label of <kbd>Chapter5.XmlLinq.XmlCore</kbd> and select <span class="packt_screen">Add</span> | <span class="packt_screen">New Item</span>.</li>
<li>In the <span class="packt_screen">Add New Item</span> dialog box, in the left-hand pane, select <span class="packt_screen">Data</span> under <span class="packt_screen">Visual C# Items</span> and <span class="packt_screen">XML File</span> in the right-hand pane:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-749 image-border" src="assets/5ee93787-fe7a-4403-b860-ae957761e3a9.png" style="width:156.25em;height:108.25em;"/></div>
<ol start="17">
<li>Type <kbd>books.xml</kbd> in the <span class="packt_screen">Name:</span> textbox and click <span class="packt_screen">Add</span>.</li>
<li>Now replace the existing code with the following:</li>
</ol>
<pre><span>        &lt;?</span><span>xml</span> <span>version</span><span>=</span><span>"</span><span>1.0</span><span>"</span><span>?&gt;</span>
<span>        &lt;</span><span>catalog</span><span>&gt;</span>
          <span>&lt;</span><span>book</span> <span>id</span><span>=</span><span>"</span><span>bk101</span><span>"</span><span>&gt;</span>
              <span>&lt;</span><span>author</span><span>&gt;</span>Gambardella, Matthew<span>&lt;/</span><span>author</span><span>&gt;</span>
              <span>&lt;</span><span>title</span><span>&gt;</span>XML Developer's Guide<span>&lt;/</span><span>title</span><span>&gt;</span>
              <span>&lt;</span><span>genre</span><span>&gt;</span>Computer<span>&lt;/</span><span>genre</span><span>&gt;</span>
              <span>&lt;</span><span>price</span><span>&gt;</span>44.95<span>&lt;/</span><span>price</span><span>&gt;</span>
              <span>&lt;</span><span>publish_date</span><span>&gt;</span>2000-10-01<span>&lt;/</span><span>publish_date</span><span>&gt;</span>
              <span>&lt;</span><span>description</span><span>&gt;</span>An in-depth look at creating applications 
              with XML.<span>&lt;/</span><span>description</span><span>&gt;</span>
           <span>&lt;/</span><span>book</span><span>&gt;</span>
           <span>&lt;</span><span>book</span> <span>id</span><span>=</span><span>"</span><span>bk102</span><span>"</span><span>&gt;</span>
              <span>&lt;</span><span>author</span><span>&gt;</span>Ralls, Kim<span>&lt;/</span><span>author</span><span>&gt;</span>
              <span>&lt;</span><span>title</span><span>&gt;</span>Midnight Rain<span>&lt;/</span><span>title</span><span>&gt;</span>
              <span>&lt;</span><span>genre</span><span>&gt;</span>Fantasy<span>&lt;/</span><span>genre</span><span>&gt;</span>
              <span>&lt;</span><span>price</span><span>&gt;</span>5.95<span>&lt;/</span><span>price</span><span>&gt;</span>
              <span>&lt;</span><span>publish_date</span><span>&gt;</span>2000-12-16<span>&lt;/</span><span>publish_date</span><span>&gt;</span>
              <span>&lt;</span><span>description</span><span>&gt;</span>A former architect battles corporate zombies, 
               an evil sorceress, and her own childhood to become queen 
               of the world.<span>&lt;/</span><span>description</span><span>&gt;</span>
           <span>&lt;/</span><span>book</span><span>&gt;</span>
           <span>&lt;</span><span>book</span> <span>id</span><span>=</span><span>"</span><span>bk103</span><span>"</span><span>&gt;</span>
              <span>&lt;</span><span>author</span><span>&gt;</span>Corets, Eva<span>&lt;/</span><span>author</span><span>&gt;</span>
              <span>&lt;</span><span>title</span><span>&gt;</span>Maeve Ascendant<span>&lt;/</span><span>title</span><span>&gt;</span>
              <span>&lt;</span><span>genre</span><span>&gt;</span>Fantasy<span>&lt;/</span><span>genre</span><span>&gt;</span>
              <span>&lt;</span><span>price</span><span>&gt;</span>5.95<span>&lt;/</span><span>price</span><span>&gt;</span>
              <span>&lt;</span><span>publish_date</span><span>&gt;</span>2000-11-17<span>&lt;/</span><span>publish_date</span><span>&gt;</span>
              <span>&lt;</span><span>description</span><span>&gt;</span>After the collapse of a nanotechnology 
              society in England, the young survivors lay the 
              foundation for a new society.<span>&lt;/</span><span>description</span><span>&gt;</span>
           <span>&lt;/</span><span>book</span><span>&gt;</span>
           <span>&lt;</span><span>book</span> <span>id</span><span>=</span><span>"</span><span>bk104</span><span>"</span><span>&gt;</span>
              <span>&lt;</span><span>author</span><span>&gt;</span>Corets, Eva<span>&lt;/</span><span>author</span><span>&gt;</span>
              <span>&lt;</span><span>title</span><span>&gt;</span>Oberon's Legacy<span>&lt;/</span><span>title</span><span>&gt;</span>
              <span>&lt;</span><span>genre</span><span>&gt;</span>Fantasy<span>&lt;/</span><span>genre</span><span>&gt;</span>
              <span>&lt;</span><span>price</span><span>&gt;</span>5.95<span>&lt;/</span><span>price</span><span>&gt;</span>
              <span>&lt;</span><span>publish_date</span><span>&gt;</span>2001-03-10<span>&lt;/</span><span>publish_date</span><span>&gt;</span>
              <span>&lt;</span><span>description</span><span>&gt;</span>In post-apocalypse England, the mysterious 
              agent known only as Oberon helps to create a new life 
              for the inhabitants of London. Sequel to Maeve 
              Ascendant.<span>&lt;/</span><span>description</span><span>&gt;</span>
           <span>&lt;/</span><span>book</span><span>&gt;</span>
           <span>&lt;</span><span>book</span> <span>id</span><span>=</span><span>"</span><span>bk105</span><span>"</span><span>&gt;</span>
              <span>&lt;</span><span>author</span><span>&gt;</span>Corets, Eva<span>&lt;/</span><span>author</span><span>&gt;</span>
              <span>&lt;</span><span>title</span><span>&gt;</span>The Sundered Grail<span>&lt;/</span><span>title</span><span>&gt;</span>
              <span>&lt;</span><span>genre</span><span>&gt;</span>Fantasy<span>&lt;/</span><span>genre</span><span>&gt;</span>
              <span>&lt;</span><span>price</span><span>&gt;</span>5.95<span>&lt;/</span><span>price</span><span>&gt;</span>
              <span>&lt;</span><span>publish_date</span><span>&gt;</span>2001-09-10<span>&lt;/</span><span>publish_date</span><span>&gt;</span>
              <span>&lt;</span><span>description</span><span>&gt;</span>The two daughters of Maeve, half-sisters, 
              battle one another for control of England. Sequel to 
              Oberon's Legacy.<span>&lt;/</span><span>description</span><span>&gt;</span>
           <span>&lt;/</span><span>book</span><span>&gt;</span>
<span>        &lt;/</span><span>catalog</span><span>&gt;</span></pre>
<ol start="19">
<li>Now double-click on <kbd>Program.cs</kbd> to open the code window. </li>
<li>In the code window, scroll to the top of the screen. </li>
<li>Next to the last line of the <kbd>using</kbd> directives, add this <kbd>using</kbd> directive: </li>
</ol>
<pre>        using Chapter5.XmlLinq.XmlLinqLib;</pre>
<ol start="22">
<li>Now replace the existing code in the <kbd>Main()</kbd> method with this code:</li>
</ol>
<pre>        var xmlFile = @"C:\Projects\Chapter5\Chapter5.XmlLinq\Chapter5.XmlLinq.XmlCore\books.xml";<br/><br/>        var books = new XmlBooks(xmlFile);<br/>        var titles = books.GetBookTitles();<br/><br/>        foreach (var title in titles)<br/>        {<br/><br/>            Console.WriteLine(title);<br/>        }<br/><br/>        Console.ReadLine();</pre>
<ol start="23">
<li>Press <em>F5</em> to see the output and it should look like this:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-750 image-border" src="assets/9dfe6df0-9d14-4911-8496-a5939c46435a.png" style="width:27.42em;height:12.67em;"/></div>
<ol start="24">
<li>Press <em>Enter</em> to exit.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In steps 1 to 9, we opened an existing solution. Then, we added a .NET Core console application to the solution. During these steps, we assigned a proper name to the project. In steps 10 to 13, we added the project reference to the library we created in the previous recipe. These steps will allow you to use the available methods from the library.</p>
<p>In steps 15 to 18, we added an XML file item to the project and then we populated it with some sample data. In step 21, we referenced our library from the .NET Core console application. In step 22, we added code inside the <kbd>Main()</kbd> method of the console application. The first line stores the path of our XML file. This might vary in your setup. In the next two lines, we created an instance of the <kbd>XmlBooks</kbd> class, used its <kbd>GetBookTitles()</kbd> method, and stored it in a variable. Then, using a <kbd>foreach</kbd> statement, we iterated through the list returned from the <kbd>GetBookTitles()</kbd> method. Finally, we executed the code.</p>


            </article>

            
        </section>
    </body></html>