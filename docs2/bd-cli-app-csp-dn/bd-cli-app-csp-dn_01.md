

# CLI 应用简介

在计算领域，**命令行界面**（**CLI**）应用体现了基于文本的用户界面的持久力量和效率。与它们的图形界面版本不同，CLI 应用提供了一种简洁、无装饰的与软件交互的方法，使用户能够直接从终端执行命令、操作文件以及执行众多任务，甚至可以自动化这些任务，使得这些任务无需用户交互！

在本章中，我们将涵盖以下主题：

+   IT 专业人士的典型一天

+   CLI 应用是什么，它们的优点是什么，以及何时使用它们

+   流行的 CLI 应用

# IT 专业人士的一天

今天是个美好的星期一早晨。今天，我和我的团队开始了一个新的项目。

项目是构建一个使用**ASP.NET**的 Web 应用，其中**Entity Framework**作为**对象关系映射器**（**ORM**），**NuGet**用于管理依赖项，**Git**作为代码版本控制系统，由于应用将部署在 Azure 上，因此使用**Bicep**作为基础设施脚本语言。

几年前，我会使用 GUI 应用来做这件事，比如完整的**Visual Studio**、**GitHub Desktop**或**GitKraken**，以及**Azure 门户**。

今天，我大部分的工作都在**Visual Studio Code**及其集成的终端中进行。

因此，我使用`mkdir`命令创建我的项目目录，`cd`定位到这个目录，`dotnet new`创建我的项目，`git init`初始化 Git 仓库，`dotnet add package`将 NuGet 包作为依赖项添加到我的项目中，`dotnet ef dbcontext scaffold`生成数据库上下文以及数据库的所有实体类型类，`dotnet build`编译我的应用，以及`dotnet run`运行它。当需要将我的应用部署到 Azure 时，我使用`az login`登录我的 Azure 账户，`az account set`定位到适当的订阅，最后，使用`az deployment group create`根据我的 Bicep 脚本部署 Azure 基础设施。

当我意识到这一点时，我停下来仔细观察了情况。哇，CLI 应用无处不在！它们确实是我们日常运营的一部分，无论我们在 IT 团队中扮演什么角色。

我想知道我是怎么错过这个的……然后我恍然大悟。这可能是由于 CLI 应用有点害羞（它们没有花哨的用户界面），因此我们可能并没有总是注意到它们，所以让我来告诉你一些常见的 CLI 应用：

+   如果你是一名开发者，你肯定使用过.NET CLI（`dotnet`）、Node.js CLI（`node`）、npm 包管理器（`npm`）、Angular CLI（`ng`）、Python（`python`）、Git（`git`）、Docker（`docker`）、Kubernetes（`kubectl`）等等。

+   如果你是一名 DevOps 工程师，你可能正在使用 Git（`git`）、GitHub（`gh`）、Azure DevOps（`az devops`）、Docker（`docker`）、Kubernetes（`kubectl`）、Ansible（`ansible`）等等。

+   如果你是一名系统管理员，你可能经常在各种操作系统上使用软件包管理器，例如 Linux 上的`apt`，macOS 上的`brew`，甚至在 Windows 上的`choco`或`winget`。你也可能使用 Shell、自动化和配置工具，如 PowerShell 或 Bash。

+   如果你是一名云管理员或架构师，你可能在使用 Azure CLI（`az`）、AWS CLI（`aws`）、Terraform（`terraform`）或 Bicep（`bicep`）等工具。

+   如果你是一名数据科学家，你可能在使用 Python（`python`）、R（`R`）、Pandas（`pandas`）、SQL（`sql`）或 Jupyter Notebooks（`jupyter notebook`）。

+   如果你是一名视频或音频制作人、内容创作者，或者只是一个多媒体爱好者，你可能会使用`FFmpeg`（是的，它是一个命令行应用程序）来操作、转换和分析媒体文件。

+   并且这个列表还在继续…

然后，我开始思考为什么会这样。我们是怎么从那些色彩鲜艳、动画丰富的美丽 UI 界面，那些邀请我们执行各种任务和活动的界面，切换到终端内闪烁的光标，等待我们告诉它做什么的呢？这看起来可能像是一个很大的倒退，对吧？

我知道我挣扎过这种感觉，直到我弄清楚为什么命令行应用程序如此出色！当然，它们让我们在麻瓜朋友和亲戚面前看起来很酷、很聪明。但这并不是全部。好吧…不仅仅是这样。因为，当我们独自工作在项目上时，没有多少人可以让我们留下深刻印象。

所以…

# 为什么要关心命令行应用程序？

因为它们通过让我们专注于手头的工作来提高我们的生产力。

你看，当我们在不同应用程序之间切换上下文时，我们可能会失去对所做事情的注意力，并被一些其他无关的活动所干扰。

通过依赖命令行应用程序，我们输入并执行的命令都发生在同一个终端中，所以我们更有可能专注于我们所做的事情，从而取得更多的成果。

# 用命令行还是不用命令行？

那就是问题。答案相当简单：你不必选择。在某些情况下，命令行应用程序非常合适，而在其他情况下则不合适。想象一下使用 Microsoft Teams、Slack 或任何 Adobe Creative Suite 的工具。作为命令行应用程序与之交互有意义吗？当然没有！（除非是为了安装和配置它们）。

所以，这里的关键点是你意识到了命令行应用程序的力量，并且你开始在日常工作流程中利用它们。它们并不是用来取代那些出色的图形用户界面应用程序的。

如我的妻子、高管教练 Lamia Rarrbo 所说：“这不仅仅是一个**或**的情况，而是一个**和**的情况。”

# 命令行应用程序作为创建工作站配置文件的基础

让我给你讲一个真实的故事。几年前，我的一个客户要求我提出一个解决方案，为他们在公司内部不同角色的工作站构建配置配置文件。

你可能会说这没什么新意，你完全正确！

那么，是什么让这种情况值得提及？是什么让它变得特殊？

多年来，这通常是通过根据你在组织中的角色使用定制的操作系统镜像来实现的。然而，这需要付出代价：

+   存储成本：这些镜像通常很大，因此需要大量的磁盘空间来存储。

+   操作系统更新的成本：当推出新的操作系统版本时，IT 部门必须重新创建所有镜像。

+   工具更新的成本：当各种配置文件使用的工具的新版本推出时，IT 部门必须重新创建受影响的镜像。

+   挫折的成本：由于计算机是通过这些镜像配置的，并且这项活动完全由 IT 部门执行，这导致两端都感到沮丧。首先，用户指责 IT 部门在提供新机器方面速度慢（“*3 周来配置一台新笔记本电脑？！你在开玩笑吧！*”。我们都在某个时候听说过这种说法，对吧？）。其次，IT 人员必须配置这些计算机 *除了* 他们其他任务之外。

我提出的解决方案是利用 CLI 应用程序为用户提供更多自主权，同时确保 IT 部门仍然对工作站上部署的内容保持控制。

因此，我为每个角色编写了配置配置文件作为 PowerShell 脚本。这个脚本依赖于 *Chocolatey*（后来还依赖于 *WinGet*）来安装给定用户角色所需的所有工具。这些脚本存储在用户可以访问的文件共享上，根据他们的角色（例如，如果你是分析师，你无法访问开发者配置文件，等等）。

这个解决方案提供了多个优点：

+   现在，IT 部门只安装操作系统，配置用户账户，然后将工作站交给用户。

+   用户现在可以导航到文件共享，并开始根据他们的配置文件安装他们的软件。

+   IT 部门可以更新配置配置文件，或者提供新的配置文件，而不会对用户产生影响，也不会让他们等待。

因此，通过利用 CLI 工具，我们能够根据用户的配置文件以个性化的方式自动化工作站配置。想象一下，如果我们不得不通过每个应用程序的 GUI 助手安装每个应用程序，这将有多么繁琐！

通过依赖 CLI 工具，我们能够提高 IT 部门的效率和用户的满意度。

# 即使是重型图形应用程序也有 CLI 工具！

为什么前面的故事有趣？

这并不是因为使用了 PowerShell、WinGet 或 Chocolatey。这些显然是 CLI 工具。

这是因为我们设计了一种从命令行安装软件的方法，而不涉及任何图形用户界面。这意味着即使我们在安装图形应用程序（如微软办公套件、网络浏览器和 Adobe 套件），我们也是通过依赖它们自己的 CLI 工具来完成的。

是的，这些图形应用程序提供了一个 CLI 工具，允许我们安装（有时甚至配置）这些应用程序。

# 即使 ChatGPT 也有 CLI！

快速进行一次谷歌搜索，我发现甚至有针对 **ChatGPT** 的 CLI 应用程序！你能相信吗？!

你可以在 [`github.com/kardolus/chatgpt-cli`](https://github.com/kardolus/chatgpt-cli) 和 [`github.com/marcolardera/chatgpt-cli`](https://github.com/marcolardera/chatgpt-cli) 上查看一些。

我告诉你：CLI 应用程序确实无处不在，一旦你开始关注它们，你就会开始注意到它们在你的日常生活中有多么重要！

# 摘要

如果你从事 IT 工作，你很可能已经使用过至少一种类型的 CLI 应用程序（而且可能性很大，你使用了很多！），你可能甚至每天都在使用它。

我相信，到现在为止，你已经理解了 CLI 应用程序的价值以及它们在你日常工作中扮演的角色。

在这本书中，我们将探讨构建我们自己的 CLI 应用程序的各个方面，这些应用程序满足我们以及我们的用户和客户的需求。

感到兴奋吗？那么，拿起你的键盘，启动你的终端，让我们开始编码吧！

我们只是触及了 CLI 应用程序能做什么以及为什么它们是当今科技领域中一项基本工具的表面。我希望这本书能成为你的路线图和在这段激动人心的旅程中的指南。

哦，顺便说一下，不要只是阅读这本书，要体验它！

现在，翻到这一页，让我们继续一起的旅程。CLI 应用程序的世界在等待着你！

享受这段旅程。
