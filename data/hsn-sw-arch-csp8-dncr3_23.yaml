- en: Understanding DevOps Principles
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解DevOps原则
- en: DevOps is a process that everybody is learning and putting into practice these
    days. But as a software architect, you need to understand and propagate DevOps
    not only as a process but as a philosophy. This chapter will cover the main concepts,
    principles, and tools you need to develop and deliver your software with DevOps.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: DevOps是当今每个人都正在学习和实践的过程。但作为一名软件架构师，你需要理解并推广DevOps，不仅作为一个过程，而且作为一个哲学。本章将涵盖你需要用DevOps开发和交付软件的主要概念、原则和工具。
- en: 'The following topics will be covered in this chapter:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Describing what DevOps is and looking at a sample of how to apply it in the
    WWTravelClub project
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 描述DevOps是什么，并查看在WWTravelClub项目中如何应用的示例
- en: Understanding DevOps principles and deployment stages to leverage the deployment
    process
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解DevOps原则和部署阶段以利用部署过程
- en: Learning DevOps tools that can be used together with Azure DevOps to improve
    tests and feedback
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习可以与Azure DevOps一起使用以改进测试和反馈的DevOps工具
- en: In contrast with other chapters, the WWTravelClub project will be presented
    during the topics and we will offer a conclusion at the end of the chapter, giving
    you the opportunity to understand how this philosophy can be implemented. All
    the screenshots exemplifying the DevOps principles come from the main sample of
    the book, so you will be able to understand the DevOps principles easily.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 与其他章节不同，WWTravelClub项目将在本章节的主题中介绍，我们将在章节末尾提供一个结论，给你机会了解这一哲学如何得到实施。所有展示DevOps原则的截图都来自本书的主要样本，因此你将能够轻松理解DevOps原则。
- en: Technical requirements
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: This chapter requires the Visual Studio 2019 Community Edition or better. You
    may also need an Azure DevOps account, as described in [Chapter 3](bc26065f-b001-4123-9524-3bbfa87bfadd.xhtml),
    *Documenting Requirements with Azure DevOps*.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本章需要Visual Studio 2019社区版或更高版本。你可能还需要一个Azure DevOps账户，如[第3章](bc26065f-b001-4123-9524-3bbfa87bfadd.xhtml)中所述，*使用Azure
    DevOps记录需求*。
- en: Describing DevOps
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 描述DevOps
- en: DevOps comes from a union of the words *Development and Operations*, so this
    process simply unifies actions in these areas. However, when you start to study
    a little bit more about it, you will realize that connecting these two areas is
    not enough to achieve the true goals of this philosophy.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: DevOps一词来源于**开发**和**运维**的合并，因此这个过程简单地将这些领域的行动统一起来。然而，当你开始更深入地了解它时，你会意识到仅仅连接这两个领域还不足以实现这一哲学的真正目标。
- en: We can also say that DevOps is the process that answers the current needs of
    humanity regarding software delivery.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 我们也可以说，DevOps是回答人类当前关于软件交付需求的流程。
- en: '**Donovan Brown**, Principal DevOps Manager of Microsoft, has a spectacular
    definition of what DevOps is: [http://donovanbrown.com/post/what-is-devops](http://donovanbrown.com/post/what-is-devops).'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '**唐纳·布朗**（Donovan Brown），微软首席DevOps经理，对DevOps有一个精彩的定义：[http://donovanbrown.com/post/what-is-devops](http://donovanbrown.com/post/what-is-devops)。'
- en: A way to deliver value continuously to our end users, using process, people,
    and products—this is the best description of the DevOps philosophy. We need to
    develop and deliver customer-oriented software. As soon as all areas of the company
    understand that the key point is the end user, your task as a software architect
    is to present the technology that will facilitate the process of delivering.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 使用流程、人员和产品持续地向我们的最终用户提供价值——这是DevOps哲学的最佳描述。我们需要开发和交付以客户为导向的软件。一旦公司的所有领域都明白关键点是最终用户，作为软件架构师的你，任务就是展示将促进交付过程的技术。
- en: It is worth mentioning that all the content of this book is connected to this
    approach. It is never a matter of knowing a bunch of tools and technologies. As
    a software architect, you have to understand that it is always a way to bring
    faster solutions easily to your end user, linked to their real needs. For this
    reason, you need to learn the DevOps principles, which will be discussed during
    the chapter.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，本书的所有内容都与这一方法相关联。这从来不是知道一堆工具和技术的问题。作为一名软件架构师，你必须理解，这始终是一种将更快地满足最终用户需求的方式，与他们的实际需求相联系。因此，你需要学习DevOps原则，这些原则将在本章中讨论。
- en: Understanding DevOps principles
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解DevOps原则
- en: Considering DevOps as a philosophy, it is worth mentioning that you there some
    principles that enable the process to work well in your team. These principles
    are continuous integration, continuous delivery, and continuous feedback.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 将 DevOps 视为一个哲学，值得提到的是，有一些原则可以确保你的团队能够良好地工作。这些原则是持续集成、持续交付和持续反馈。
- en: For more information, please visit: [https://azure.microsoft.com/en-us/overview/what-is-devops/](https://azure.microsoft.com/en-us/overview/what-is-devops/).
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 更多信息，请访问：[https://azure.microsoft.com/en-us/overview/what-is-devops/](https://azure.microsoft.com/en-us/overview/what-is-devops/)。
- en: DevOps concept is represented by the symbol of infinity in many books and technical
    articles. This symbol represents the necessity to have a continuous approach in
    the software development life cycle. During the cycle, you will need to plan,
    build, continuously integrate, deploy, operate, get feedback, and start all over
    again. The process has to be a collaborative one, since everybody has the same
    focus—to deliver value to the end user. Together with these principles, you as
    a software architect will need to decide the best software development process
    that can fit this approach. We discussed these processes in [Chapter 1](14b5c5da-4042-439e-9e5a-2e19ba4c4930.xhtml),
    *Understanding the Importance of Software Architecture*.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多书籍和技术文章中，DevOps 概念用无穷大的符号表示。这个符号代表在软件开发生命周期中必须有一个持续的方法。在这个过程中，你需要规划、构建、持续集成、部署、运营、获取反馈，然后从头开始。这个过程必须是协作的，因为每个人的焦点都是相同的——向最终用户提供价值。与这些原则一起，作为软件架构师，你需要决定最适合这种方法的最佳软件开发流程。我们在[第
    1 章](14b5c5da-4042-439e-9e5a-2e19ba4c4930.xhtml)中讨论了这些流程，《理解软件架构的重要性》。
- en: Defining continuous integration
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 定义持续集成
- en: When you start building enterprise solutions, collaboration is the key to getting
    things done faster and to meeting the user needs. Version control systems, as
    we discussed in [Chapter 14](82dfe57b-5fe6-4c71-9fa9-b4526a2c6f3e.xhtml), *Best
    Practices in Coding C# 8*, are essential for this process, but the tool by itself
    does not do the job, especially if the tool is not well configured.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 当你开始构建企业级解决方案时，协作是更快完成任务和满足用户需求的关键。正如我们在[第 14 章](82dfe57b-5fe6-4c71-9fa9-b4526a2c6f3e.xhtml)中讨论的，《C#
    8 最佳实践》中的版本控制系统对于这个过程至关重要，但工具本身并不能完成这项工作，尤其是如果工具配置不当的话。
- en: As a software architect, **c****ontinuous integration** (**CI**) will help you
    to have a concrete approach for software development collaboration. When you implement
    it, as soon as a developer commits its code, the main code is automatically built
    and tested.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名软件架构师，**持续集成**（**CI**）将帮助你有一个具体的软件开发协作方法。当你实施它时，一旦开发者提交代码，主代码就会自动构建和测试。
- en: The good thing when you apply it is that you can motivate developers to merge
    their changes as fast as they can in order to minimize merge conflicts. Besides,
    they can share unit tests, which will improve the quality of software.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 当你应用它时，好处是可以激励开发者尽可能快地合并他们的更改，以最小化合并冲突。此外，他们可以共享单元测试，这将提高软件的质量。
- en: 'It is very simple to set up CI in Azure DevOps. In the build pipeline, you
    will find its option by editing the configuration, as you can see in the following
    screenshot:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Azure DevOps 中设置 CI 非常简单。在构建管道中，你可以通过编辑配置来找到它的选项，如下面的截图所示：
- en: '![](img/a4c8558a-f418-4843-8fa3-89adc2a9f79d.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/a4c8558a-f418-4843-8fa3-89adc2a9f79d.png)'
- en: It is worth mentioning that if you have a solution set with unit and functional
    tests, as soon as you commit the code, it will automatically be compiled and tested.
    This will make your master branch stable and safe in every commit from your team.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，如果你有一个包含单元测试和功能测试的解决方案集，一旦你提交代码，它就会自动编译和测试。这将使你的主分支在每次团队提交时都保持稳定和安全。
- en: The key point of CI is the ability to identify problems faster. You will have
    this opportunity when you allow the code to be tested and analyzed by others.
    The only thing the DevOps approach helps with is making sure this happens as fast
    as possible.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: CI 的关键点是能够更快地识别问题。当你允许代码被他人测试和分析时，你将有机会这样做。DevOps 方法唯一能帮助的是确保这一切尽可能快地发生。
- en: Understanding continuous delivery and multistage environment with Azure DevOps
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解 Azure DevOps 中的持续交付和多阶段环境
- en: Once every single commit of your application is built, and this code is tested
    with both unit and functional tests, you may also want to deploy it continuously.
    Doing this is not just a matter of configuring the tool. As a software architect,
    you need to be sure that the team and the process are ready to go to this step.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您的应用程序的每个提交都构建完成，并且这段代码经过单元和功能测试，您可能还希望进行持续部署。这样做不仅仅是配置工具的问题。作为一名软件架构师，您需要确保团队和流程已经准备好进入这一步骤。
- en: 'The approach associated with **c****ontinuous delivery** (**CD**) needs to
    guarantee that the production environment will be kept safe in each new deployment.
    To do so, a multistage pipeline needs to be adopted. The following screenshot
    shows an approach with common stages for this end:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 与**持续交付**（**CD**）相关的方法需要保证每次新部署时生产环境的安全。为此，需要采用多阶段管道。以下截图显示了为此目的而采用的一些常见阶段的示例：
- en: '![](img/3bf53e85-a164-4e0e-a0ef-b6c04f77a57d.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/3bf53e85-a164-4e0e-a0ef-b6c04f77a57d.png)'
- en: Release stages using Azure DevOps
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Azure DevOps的发布阶段
- en: 'As you can see, these stages were configured using the Azure DevOps release
    pipeline. Each stage has its own purpose, which will leverage the quality of the
    product delivered in the end. Let''s look at the stages:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，这些阶段是通过Azure DevOps发布管道配置的。每个阶段都有自己的目的，这将最终提高交付产品的质量。让我们看看这些阶段：
- en: '**Development/tests**: This stage is used by developers and testers to build
    new functionality. This environment will certainly be the one that''s most exposed
    to bugs and incomplete functions.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**开发/测试**：这个阶段由开发人员和测试人员用来构建新的功能。这个环境肯定会是最容易暴露出bug和不完整功能的。'
- en: '**Quality assurance**: This environment gives a brief version of new functionalities
    to areas of the team not related to development and tests. Program managers, marketing,
    vendors, and others can use it as an area of study, validation, and even preproduction.
    Besides, the development and quality teams can guarantee that the new releases
    are correctly deployed, considering both functionality and infrastructure.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**质量保证**：这个环境向与开发和测试无关的团队区域提供新功能的简要版本。项目经理、市场营销、供应商和其他人可以使用它作为研究、验证甚至预生产的区域。此外，开发和质量团队可以保证新版本正确部署，考虑到功能和基础设施。'
- en: '**Production**: This is the stage where customers have their solution running.
    The goal for a good production environment, according to CD, is to have it updated
    as quickly as possible. The frequency will vary according to team size, but there
    are some approaches where this process happens more than once a day.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**生产**：这是客户运行其解决方案的阶段。根据CD，良好生产环境的目标是尽可能快地更新。频率将根据团队规模而变化，但有一些方法，这个过程每天发生不止一次。'
- en: The adoption of three stages of deploying your application will impact on the
    quality of the solution. Besides, it will enable the team to have a safer process
    of deployment, with fewer risks and better stability of the product. This approach
    may look a bit expensive at first sight, but without it the results of bad deployment
    will generally be more expensive than this investment.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 部署您的应用程序采用三个阶段将对解决方案的质量产生影响。此外，它将使团队能够有一个更安全的部署过程，风险更少，产品稳定性更好。这种做法一开始可能看起来有点昂贵，但如果没有它，不良部署的结果通常会比这种投资更昂贵。
- en: 'Besides all the safety, you will have to consider the multistage scenario.
    You can set up the pipeline in a way where only with defined authorizations will
    you be able to transition from one stage to another:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 除了所有的安全性之外，您还必须考虑多阶段场景。您可以设置管道，只有通过定义的授权才能从一个阶段过渡到另一个阶段：
- en: '![](img/44bf8e89-abb7-4e7e-ad33-f4c10fbdf706.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/44bf8e89-abb7-4e7e-ad33-f4c10fbdf706.png)'
- en: As you can see in the preceding screenshot, it is quite simple to set up pre-deployment
    conditions, and you can see in the following screenshot that there is more than
    a single option to customize the authorization method. This gives you the possibility
    to refine the CD approach, reaching exactly the needs of the project you are dealing
    with.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 如前一个截图所示，设置预部署条件相当简单，您可以在下面的截图看到，有多个选项可以自定义授权方法。这为您提供了细化CD方法的可能性，以满足您正在处理的项目需求。
- en: 'The following screenshot shows the options provided by Azure DevOps for pre-deployment
    approval. You can define the people who can approve the stage and set policies
    for them, that is, revalidate the approver identity before completing the process.
    You, as a software architect, will need to identify the configuration that fits
    the project you are creating with this approach:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了 Azure DevOps 为预部署批准提供的选项。你可以定义可以批准阶段的人员并为他们设置策略，即在进行过程之前重新验证审批者身份。作为软件架构师，你需要确定适合你使用这种方法创建的项目配置：
- en: '![](img/09176ecc-62ef-4a47-8fac-3febc4e08411.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/09176ecc-62ef-4a47-8fac-3febc4e08411.png)'
- en: It is worth mentioning that although this approach is far better than a single-stage
    deployment, a DevOps pipeline will direct you, as a software architect, to another
    stage of monitoring. Continuous feedback will be an incredible tool for this,
    and we will discuss this approach in the next section.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，尽管这种方法远优于单阶段部署，但 DevOps 管道会指导你，作为软件架构师，进入另一个监控阶段。持续反馈将是一个不可思议的工具，我们将在下一节中讨论这种方法。
- en: Defining continuous feedback and the related DevOps tools
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 定义持续反馈和相关 DevOps 工具
- en: Once you have a solution that is running perfectly in the deployment scenario
    described in the last section, feedback will be essential for your team to understand
    the results of the release and how the version is working for the customers. To
    get this feedback some tools can help both the developers and the customers, bringing
    these people together to fast-track process of feedback. Let's have a look at
    these tools.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你在上一节描述的部署场景中运行完美的解决方案，反馈对于你的团队理解发布的结果以及版本如何为顾客工作至关重要。为了获取这些反馈，一些工具可以帮助开发者和顾客，将这些人聚集在一起以加速反馈过程。让我们来看看这些工具。
- en: Monitoring you software with Application Insights
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Application Insights 监控你的软件
- en: Application Insights is definitely the tool a software architect needs to have
    for continuous feedback on their solution. As soon as you connect your app to
    it, you start receiving feedback on each request made to the software. This enables
    you to monitor not only the requests made but your database performance, the errors
    that the application may be suffering from, and the calls that take the most time
    to process.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: Application Insights 确实是软件架构师进行持续反馈所需的工具。一旦你将应用程序连接到它，你就开始接收对软件每个请求的反馈。这使得你不仅可以监控请求，还可以监控数据库性能、应用程序可能遭受的错误以及处理时间最长的调用。
- en: 'Obviously, you will have costs relating to having this tool plugged into your
    environment, but the facilities that the tool provides will definitely be worth
    it. Besides, you need to understand that there is a very small performance cost
    since all the requests to store data in Application Insights run in a separate
    thread. The following screenshot shows how easily you can create a tool in your
    environment:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，你将会有与将此工具集成到你的环境相关的成本，但该工具提供的功能绝对物有所值。此外，你需要了解，由于所有存储数据到 Application Insights
    的请求都在一个单独的线程中运行，因此性能成本非常小。以下截图显示了你在环境中创建工具的简易性：
- en: '![](img/54b805ad-fea4-4e03-8ed4-e896d3d97ecd.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/54b805ad-fea4-4e03-8ed4-e896d3d97ecd.png)'
- en: 'For instance, let''s suppose you need to analyze the requests that take more
    time in your application. The process of attaching Application Insights to your
    web app is quite simple, considering it may be done as soon as you set up your
    web app. If you are not sure whether Application Insights is your web app, you
    can find out using the Azure portal. Navigate to App Services and look at the
    Application Insights settings, as shown in the following screenshot:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，假设你需要分析你应用程序中耗时较长的请求。将 Application Insights 附接到你的 Web 应用程序的过程相当简单，考虑到它可以在你设置
    Web 应用程序时立即完成。如果你不确定 Application Insights 是否是你的 Web 应用程序，你可以使用 Azure 门户来查找。导航到
    App Services 并查看 Application Insights 设置，如下面的截图所示：
- en: '![](img/bf663c27-23be-4afe-906f-ead9c29be904.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/bf663c27-23be-4afe-906f-ead9c29be904.png)'
- en: 'The interface will give you the opportunity to create or attach an already
    created monitor service to your web app. It is worth mentioning that you can connect
    more than one web app to the same Application Insights component. The following
    screenshot shows how to add a web app to an already created Application Insights
    resource:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 界面将为你提供创建或附加已创建的监控服务到你的 Web 应用程序的机会。值得注意的是，你可以将多个 Web 应用程序连接到同一个 Application
    Insights 组件。以下截图显示了如何将 Web 应用程序添加到已创建的 Application Insights 资源中：
- en: '![](img/f98f581d-0d3e-47fa-a426-4fcfdea839ef.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/f98f581d-0d3e-47fa-a426-4fcfdea839ef.png)'
- en: 'Once you have Application Insights configured for your web app, you will find
    the following screen in App Services:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦为您的Web应用程序配置了Application Insights，您将在App Services中找到以下屏幕：
- en: '![](img/4a37cdcd-f082-42a9-a4dd-1359dc4dc50b.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4a37cdcd-f082-42a9-a4dd-1359dc4dc50b.png)'
- en: 'Once it is connected to your solution, the data collection will happen continuously
    and you will see the results in the dashboard provided by the component. You can
    find this screen in the same place as you configured Application Insights, inside
    the web app configurations, or in the Azure portal, navigating through the Application
    Insights resource:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦连接到您的解决方案，数据收集将持续进行，您将在组件提供的仪表板中看到结果。您可以在配置Application Insights的同一位置找到此屏幕，在Web应用程序配置中，或者在Azure门户中，通过Application
    Insights资源进行导航：
- en: '![](img/146b5327-90fd-41ba-8a67-f9c0961b36ef.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/146b5327-90fd-41ba-8a67-f9c0961b36ef.png)'
- en: This dashboard gives you an idea of failed requests, server response time, and
    server requests. You may also turn on the availability check, which will make
    requests to your selected URL from any of the Azure data centers.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 此仪表板为您提供了关于失败请求、服务器响应时间和服务器请求的概览。您还可以开启可用性检查，这将从Azure数据中心中的任何一个向您选择的URL发送请求。
- en: 'But the beauty of Application Insights is related to how deeply it analyzes
    your system. In the following screenshot, for instance, it is giving you feedback
    on the number of requests done on the website. You can analyze it by ranking the
    ones that took more time to process or the ones that were called more often:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 但Application Insights的美丽之处在于它如何深入分析您的系统。例如，在下面的截图中，它正在向您反馈网站上完成的请求数量。您可以通过对处理时间较长或被调用频率较高的请求进行排名来分析它：
- en: '![](img/c08a01a8-f257-4894-bfa5-e41983ed6a94.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c08a01a8-f257-4894-bfa5-e41983ed6a94.png)'
- en: Considering this view can be filtered in different ways and you receive the
    info just after it happens in your web app, this is certainly a tool that defines
    continuous feedback. This is one of the best ways you can use the DevOps principles
    to achieve exactly what your customer needs.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到这个视图可以以不同的方式过滤，并且您在Web应用程序中接收到的信息是事件发生后立即的，这确实是一个定义持续反馈的工具。这是您可以使用DevOps原则实现客户确切需求的最佳方式之一。
- en: Application Insights is a technical tool that does exactly what you as a software
    architect need to monitor modern applications in a real analytic model. It is
    a continuous feedback approach based on the behavior of users of the system you
    are developing.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: Application Insights是一个技术工具，它完全符合您作为软件架构师在真实分析模型中监控现代应用程序的需求。它是一种基于您正在开发的系统用户行为的持续反馈方法。
- en: Using the Test and Feedback tool to enable feedback
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用测试和反馈工具来启用反馈
- en: Another really useful tool in the process of continuous feedback is the Test
    and Feedback tool, designed by Microsoft to help product owners and quality assurance
    users in the process of analyzing new features.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在持续反馈的过程中，另一个非常有用的工具是微软设计的测试和反馈工具，旨在帮助产品所有者和质量保证用户在分析新功能的过程中。
- en: 'Using Azure DevOps, you may ask for feedback to your team by selecting an option
    inside each working item, as you can see in the following screenshot:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Azure DevOps，您可以通过在每个工作项内部选择一个选项来向您的团队请求反馈，正如您在以下截图中可以看到的：
- en: '![](img/07e31f3f-97ad-4334-9f16-887e938779ed.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/07e31f3f-97ad-4334-9f16-887e938779ed.png)'
- en: Once you receive a feedback request, you may use the Test and Feedback tool
    to analyze and give the correct feedback to the team. You will be able to connect
    the tool to your Azure DevOps project, giving you more features while analyzing
    the feedback request. The following screenshot shows how to set up Azure DevOps
    project URL for the Test and Feedback tool. You can download this tool from [https://marketplace.visualstudio.com/items?itemName=ms.vss-exploratorytesting-web](https://marketplace.visualstudio.com/items?itemName=ms.vss-exploratorytesting-web).
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦收到反馈请求，您可以使用测试和反馈工具来分析和给出正确的反馈给团队。您可以将此工具连接到您的Azure DevOps项目，在分析反馈请求时获得更多功能。以下截图显示了如何为测试和反馈工具设置Azure
    DevOps项目URL。您可以从[https://marketplace.visualstudio.com/items?itemName=ms.vss-exploratorytesting-web](https://marketplace.visualstudio.com/items?itemName=ms.vss-exploratorytesting-web)下载此工具。
- en: '![](img/e50b14e1-22bd-4aec-a1f0-c4b6d0a5dd9c.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/e50b14e1-22bd-4aec-a1f0-c4b6d0a5dd9c.png)'
- en: 'The tool is quite simple. You can take screenshots, record a process, or even
    make a note. The following picture shows how easily you can write a message inside
    the screenshot:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 工具相当简单。您可以截图、记录一个过程，甚至做笔记。以下图片显示了您如何在截图内轻松地写消息：
- en: '![](img/35f60259-cb42-47f4-8954-3a0058eb4070.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![](img/35f60259-cb42-47f4-8954-3a0058eb4070.png)'
- en: 'The good thing is that you record all this analysis in a session timeline.
    As you can see in the next screenshot, you can have more feedback in the same
    session, which is good for the analyzing process:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 好处在于你可以在会话时间线上记录所有这些分析。正如您可以在下一张截图中所见，您可以在同一个会话中获得更多反馈，这对分析过程是有益的：
- en: '![](img/b47d04d2-380b-4721-986e-be158c959bb4.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b47d04d2-380b-4721-986e-be158c959bb4.png)'
- en: 'Once you have the analysis done and you are connected to Azure DevOps, you
    will be able to report a bug, create a task, or even start a new test case:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您完成了分析并且连接到Azure DevOps，您将能够报告bug、创建任务，甚至开始一个新的测试用例：
- en: '![](img/61362d4b-4950-4728-8f73-e64bc3ef1f0b.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](img/61362d4b-4950-4728-8f73-e64bc3ef1f0b.png)'
- en: The result of the bug created can be checked in the Work items board in Azure
    DevOps. It is worth mentioning that you don't need a developer license of Azure
    DevOps to have access to this area of the environment. This enables you, as a
    software architect, to spread this basic and really useful tool to many key users
    of the solution you are building.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 创建的bug的结果可以在Azure DevOps的工作项板上进行检查。值得一提的是，您不需要Azure DevOps的开发者许可证就可以访问这个环境区域。这使得您，作为一个软件架构师，可以将这个基本且非常有用的工具推广到您正在构建的解决方案的许多关键用户。
- en: 'The following screenshot shows the bug created by the tool once you have connected
    it to your Azure DevOps project:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了您将工具连接到您的Azure DevOps项目后创建的bug：
- en: '![](img/b940ebdf-4869-4bca-994c-64fa4ddaa4a3.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b940ebdf-4869-4bca-994c-64fa4ddaa4a3.png)'
- en: It is definitely important to have a tool like this to have good feedback on
    your project. But as a software architect, you may have to find the best solutions
    to accelerate this process. The tools explored in the book are good ways to do
    so. You may consider this approach every time you need to implement one more step
    in the development process.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有这样一个工具以获得项目的好反馈无疑是重要的。但作为一个软件架构师，您可能需要找到最佳解决方案来加速这一过程。书中探讨的工具是这样做的好方法。您可能每次在开发过程中需要实施更多步骤时都会考虑这种方法。
- en: The WWTravelClub project approach
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: WWTravelClub项目方法
- en: During this chapter, screenshots from the WWTravelClub project have shown the
    steps needed to implement a good DevOps cycle. The WWTravelClub team has decided
    to use Azure DevOps because they understand that the tool is essential for getting
    the best DevOps experience for the whole cycle.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，WWTravelClub项目的截图展示了实现良好的DevOps周期所需的步骤。WWTravelClub团队决定使用Azure DevOps，因为他们明白这个工具对于整个周期的最佳DevOps体验是必不可少的。
- en: The requirements were written using user stories, which can be found in the
    work items section of Azure DevOps. The code is placed in the repository of the
    Azure DevOps project. Both concepts were explained in [Chapter 3](bc26065f-b001-4123-9524-3bbfa87bfadd.xhtml),
    *Documenting Requirements with Azure DevOps*.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 需求是用用户故事编写的，这些可以在Azure DevOps的工作项部分找到。代码放在Azure DevOps项目的仓库中。这两个概念在[第3章](bc26065f-b001-4123-9524-3bbfa87bfadd.xhtml)，*使用Azure
    DevOps记录需求*中进行了解释。
- en: The management life cycle used for getting things done is Scrum, presented in
    [Chapter 1](14b5c5da-4042-439e-9e5a-2e19ba4c4930.xhtml), *Understanding the Importance
    of Software Architecture*. This approach divides the implementation into Sprints,
    which forces the need to deliver value by the end of each cycle. Using the continuous
    integration facilities we learned in this chapter, code will be compiled each
    time the team concludes a development to the master branch of the repository.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 用于完成任务的管理生命周期是Scrum，在第1章[第1章](14b5c5da-4042-439e-9e5a-2e19ba4c4930.xhtml)，*理解软件架构的重要性*中介绍。这种方法将实现分为Sprint，这迫使每个周期结束时交付价值。使用我们在本章中学到的持续集成设施，每次团队将开发成果提交到仓库的master分支时，代码都会被编译。
- en: Once the code is compiled and tested, the first stage of the deployment is done.
    The first stage is normally named Development/Test because you enable it for internal
    tests. Both Application Insights and Test and Feedback can be used to get the
    first feedback on the new release.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦代码编译并测试，部署的第一阶段就完成了。第一阶段通常被称为开发/测试，因为您为内部测试启用了它。Application Insights和测试与反馈都可以用来获取新版本的第一反馈。
- en: If the tests and the feedback of the new release pass, it is time to go to the
    second stage—Quality Assurance. Application Insights and Test and Feedback can
    be used again, but now in a more stable environment.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 如果新版本的测试和反馈通过，那么就是时候进入第二阶段——质量保证。Application Insights和测试与反馈可以再次使用，但现在是在一个更稳定的环境中。
- en: The cycle ends with the authorization to deploy in the production stage. This
    certainly is a tough decision, but DevOps indicates that you have to do it continuously
    so you can get better feedback from customers. Application Insights keeps being
    a really useful tool, since you are able to monitor the evolution of the new release
    in production, even comparing it to the past releases.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 循环以在生产阶段部署授权结束。这当然是一个艰难的决定，但DevOps表明您必须持续这样做，以便从客户那里获得更好的反馈。Application Insights仍然是一个非常有用的工具，因为您能够监控新版本在生产中的演变，甚至将其与过去版本进行比较。
- en: The WWTravelClub project approach described here can be used in many other modern
    application development life cycles. You, as a software architect, are in charge
    of making this happen. The tools are ready to go, and it depends on you to make
    things right!
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 这里描述的WWTravelClub项目方法可以用于许多其他现代应用程序开发生命周期。作为软件架构师，您负责使这一切发生。工具已经准备就绪，这取决于您来确保一切顺利进行！
- en: Summary
  id: totrans-86
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we learned how DevOps is not only a bunch of techniques and
    tools used together to deliver software continuously but a philosophy to enable
    continuous delivery of value to the end user of the project you are developing.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了DevOps不仅是一系列技术和工具的组合，用于持续交付软件，而且是一种哲学，旨在使您正在开发的项目最终用户能够持续获得价值。
- en: Considering this approach, we saw how continuous integration, continuous delivery,
    and continuous feedback are essential to the purpose of DevOps. We also saw how
    Azure, Azure DevOps, and Microsoft tools help you to achieve your goals.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到这种方法，我们看到了持续集成、持续交付和持续反馈对于DevOps目的的重要性。我们还看到了Azure、Azure DevOps和Microsoft工具如何帮助您实现目标。
- en: This chapter brought you this approach using WWTravelClub as an example, enabling
    CI/CD inside Azure DevOps, and using Application Insights and the Test and Feedback
    tool for both technical and functional feedback. In real life, these tools will
    enable you to understand the current behavior of the system you are developing
    faster, as you will have continuous feedback on it.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 本章通过使用WWTravelClub作为示例，向您介绍了这种方法，在Azure DevOps内部实现CI/CD，并使用Application Insights和测试与反馈工具进行技术和功能反馈。在现实生活中，这些工具将使您能够更快地了解您正在开发的系统的当前行为，因为您将对其有持续的反馈。
- en: In the next chapter, we will learn about continuous integration in detail.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将详细了解持续集成。
- en: Questions
  id: totrans-91
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: What is DevOps?
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么是DevOps？
- en: What is continuous integration?
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么是持续集成？
- en: What is continuous delivery?
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么是持续交付？
- en: What is continuous feedback?
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么是持续反馈？
- en: What is the difference between the build and release pipelines?
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 构建和发布管道之间的区别是什么？
- en: What is the main purpose of Application Insights in the DevOps approach?
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在DevOps方法中，Application Insights的主要目的是什么？
- en: How can the Test and Feedback tool help in the process of DevOps?
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测试与反馈工具如何帮助DevOps的过程？
- en: Further Reading
  id: totrans-99
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'These are some websites where you will find more information on the topics
    covered in this chapter:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是一些您可以找到本章涵盖主题更多信息的网站：
- en: '[http://donovanbrown.com/](http://donovanbrown.com/)'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://donovanbrown.com/](http://donovanbrown.com/)'
- en: '[https://www.packtpub.com/networking-and-servers/devops-fundamentals-video](https://www.packtpub.com/networking-and-servers/devops-fundamentals-video)'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.packtpub.com/networking-and-servers/devops-fundamentals-video](https://www.packtpub.com/networking-and-servers/devops-fundamentals-video)'
- en: '[https://docs.microsoft.com/en-us/azure/devops/learn/what-is-devops](https://docs.microsoft.com/en-us/azure/devops/learn/what-is-devops)'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://docs.microsoft.com/en-us/azure/devops/learn/what-is-devops](https://docs.microsoft.com/en-us/azure/devops/learn/what-is-devops)'
- en: '[https://azuredevopslabs.com/labs/devopsserver/exploratorytesting/](https://azuredevopslabs.com/labs/devopsserver/exploratorytesting/)'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://azuredevopslabs.com/labs/devopsserver/exploratorytesting/](https://azuredevopslabs.com/labs/devopsserver/exploratorytesting/)'
- en: '[https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview](https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview)'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview](https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview)'
- en: '[https://marketplace.visualstudio.com/items?itemName=ms.vss-exploratorytesting-web](https://marketplace.visualstudio.com/items?itemName=ms.vss-exploratorytesting-web)'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Visual Studio Marketplace 上的 Exploratory Testing 扩展](https://marketplace.visualstudio.com/items?itemName=ms.vss-exploratorytesting-web)'
- en: '[https://docs.microsoft.com/en-us/azure/devops/test/request-stakeholder-feedback](https://docs.microsoft.com/en-us/azure/devops/test/request-stakeholder-feedback)'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[请求利益相关者反馈](https://docs.microsoft.com/en-us/azure/devops/test/request-stakeholder-feedback)'
