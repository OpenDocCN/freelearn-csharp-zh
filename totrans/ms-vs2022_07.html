<html><head></head><body>
  <div id="_idContainer163">
   <h1 class="chapter-number" id="_idParaDest-124">
    <a id="_idTextAnchor124">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     7
    </span>
   </h1>
   <h1 id="_idParaDest-125">
    <a id="_idTextAnchor125">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Machine Learning Integration
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     In this chapter, we will embark on an exploration of integrating
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.4.1">
      machine learning
     </span>
    </strong>
    <span class="koboSpan" id="kobo.5.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.6.1">
      ML
     </span>
    </strong>
    <span class="koboSpan" id="kobo.7.1">
     ) seamlessly
    </span>
    <a id="_idIndexMarker451">
    </a>
    <span class="koboSpan" id="kobo.8.1">
     into software development workflows using Visual Studio.
    </span>
    <span class="koboSpan" id="kobo.8.2">
     As we continue to advance in the digital age, the integration of ML capabilities into applications has become increasingly pivotal, enabling intelligent decision-making and automation within our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.9.1">
      software systems.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.10.1">
     Our journey begins with an introduction to ML, demystifying its core concepts and applications.
    </span>
    <span class="koboSpan" id="kobo.10.2">
     Next, we will
    </span>
    <a id="_idIndexMarker452">
    </a>
    <span class="koboSpan" id="kobo.11.1">
     dive into the practical aspects by harnessing the power of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.12.1">
      ML.NET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.13.1">
     and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.14.1">
      Model Builder
     </span>
    </strong>
    <span class="koboSpan" id="kobo.15.1">
     within
    </span>
    <a id="_idIndexMarker453">
    </a>
    <span class="koboSpan" id="kobo.16.1">
     Visual Studio.
    </span>
    <span class="koboSpan" id="kobo.16.2">
     Through hands-on examples and guided tutorials, we’ll demonstrate how to create and train ML models directly within the familiar Visual
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.17.1">
      Studio environment.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.18.1">
     As we progress, the focus shifts toward deployment strategies for ML models.
    </span>
    <span class="koboSpan" id="kobo.18.2">
     We’ll explore how to deploy a trained model within an ASP.NET Core web API, enabling real-time inference and integration with web-based applications.
    </span>
    <span class="koboSpan" id="kobo.18.3">
     Additionally, we’ll explore deploying models within Azure Functions, leveraging serverless computing for scalable and cost-effective
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.19.1">
      deployment scenarios.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.20.1">
     Key topics covered in this chapter include
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.21.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.22.1">
      Introduction
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.23.1">
       to ML
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.24.1">
      Creating machine learning models with ML.NET and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.25.1">
       Model Builder
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.26.1">
      Deploying models in an ASP.NET Core
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.27.1">
       web API
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.28.1">
      Deploying models in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.29.1">
       Azure Functions
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.30.1">
     On this journey, we will unlock the potential of integrating ML into our software projects using Visual Studio, empowering us to build intelligent and adaptive applications that resonate with today’s
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.31.1">
      technology landscape.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-126">
    <a id="_idTextAnchor126">
    </a>
    <span class="koboSpan" id="kobo.32.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.33.1">
     I wrote this chapter with the following version of Visual Studio
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.34.1">
      in mind:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.35.1">
      Visual Studio Enterprise 2022
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.36.1">
       Version
      </span>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.37.1">
       17.12.0
      </span>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.38.1">
       Preview 1.0
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.39.1">
     The code files for this chapter can be found
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.40.1">
      at
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/Mastering-Visual-Studio-2022/tree/main/ch07">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.41.1">
       https://github.com/PacktPublishing/Mastering-Visual-Studio-2022/tree/main/ch07
      </span>
     </span>
    </a>
   </p>
   <h1 id="_idParaDest-127">
    <a id="_idTextAnchor127">
    </a>
    <span class="koboSpan" id="kobo.42.1">
     Introduction to ML
    </span>
   </h1>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.43.1">
      ML
     </span>
    </strong>
    <span class="koboSpan" id="kobo.44.1">
     is a branch of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.45.1">
      artificial intelligence
     </span>
    </strong>
    <span class="koboSpan" id="kobo.46.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.47.1">
      AI
     </span>
    </strong>
    <span class="koboSpan" id="kobo.48.1">
     ) focused on developing algorithms and statistical
    </span>
    <a id="_idIndexMarker454">
    </a>
    <span class="koboSpan" id="kobo.49.1">
     models that enable computers to perform tasks without explicit programming.
    </span>
    <span class="koboSpan" id="kobo.49.2">
     These tasks can range from basic pattern recognition to
    </span>
    <a id="_idIndexMarker455">
    </a>
    <span class="koboSpan" id="kobo.50.1">
     complex decision-making processes.
    </span>
    <span class="koboSpan" id="kobo.50.2">
     At its core, ML involves machines learning from data to improve the algorithms’  performance
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.51.1">
      over time.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.52.1">
     There are three primary types
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.53.1">
      of ML:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.54.1">
       Supervised learning
      </span>
     </strong>
     <span class="koboSpan" id="kobo.55.1">
      : This
     </span>
     <a id="_idIndexMarker456">
     </a>
     <span class="koboSpan" id="kobo.56.1">
      involves training
     </span>
     <a id="_idIndexMarker457">
     </a>
     <span class="koboSpan" id="kobo.57.1">
      a model on labeled data to predict outputs based on input data, such as regression (predicting continuous values) and classification (predicting
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.58.1">
       discrete labels)
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.59.1">
       Unsupervised learning
      </span>
     </strong>
     <span class="koboSpan" id="kobo.60.1">
      : This
     </span>
     <a id="_idIndexMarker458">
     </a>
     <span class="koboSpan" id="kobo.61.1">
      involves training a model on unlabeled data to identify patterns or structures
     </span>
     <a id="_idIndexMarker459">
     </a>
     <span class="koboSpan" id="kobo.62.1">
      within the dataset, such as clustering (grouping similar data points) and dimensionality reduction (reducing
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.63.1">
       input variables)
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.64.1">
       Reinforcement learning
      </span>
     </strong>
     <span class="koboSpan" id="kobo.65.1">
      : Models
     </span>
     <a id="_idIndexMarker460">
     </a>
     <span class="koboSpan" id="kobo.66.1">
      learn to make decisions by interacting with an environment, and receiving
     </span>
     <a id="_idIndexMarker461">
     </a>
     <span class="koboSpan" id="kobo.67.1">
      feedback in the form of rewards or penalties to maximize the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.68.1">
       cumulative reward
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.69.1">
     ML utilizes
    </span>
    <a id="_idIndexMarker462">
    </a>
    <span class="koboSpan" id="kobo.70.1">
     various algorithms such as decision trees,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.71.1">
      support vector machines
     </span>
    </strong>
    <span class="koboSpan" id="kobo.72.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.73.1">
      SVMs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.74.1">
     ), and neural networks, chosen based on specific problems, data characteristics, and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.75.1">
      desired outcomes.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.76.1">
     ML.NET, an open source, cross-platform ML framework by Microsoft, simplifies ML for .NET developers, enabling the integration of ML capabilities into applications without requiring deep expertise in ML or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.77.1">
      data science.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.78.1">
     Key features
    </span>
    <a id="_idIndexMarker463">
    </a>
    <span class="koboSpan" id="kobo.79.1">
     of ML.NET include
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.80.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.81.1">
       Cross-platform compatibility
      </span>
     </strong>
     <span class="koboSpan" id="kobo.82.1">
      : It works seamlessly on Windows, Linux,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.83.1">
       and macOS
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.84.1">
       Integration with .NET
      </span>
     </strong>
     <span class="koboSpan" id="kobo.85.1">
      : It easily incorporates ML capabilities into .
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.86.1">
       NET projects
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.87.1">
       Customizable models
      </span>
     </strong>
     <span class="koboSpan" id="kobo.88.1">
      : Developers can tailor models to their needs, including training on
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.89.1">
       custom datasets
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.90.1">
       Transparency and explainability
      </span>
     </strong>
     <span class="koboSpan" id="kobo.91.1">
      : It provides tools for understanding how models make predictions, essential for building trust
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.92.1">
       in AI
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.93.1">
       Open source and community-driven
      </span>
     </strong>
     <span class="koboSpan" id="kobo.94.1">
      : It benefits from community contributions, leading to ongoing improvements and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.95.1">
       new features
      </span>
     </span>
    </li>
   </ul>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.96.1">
      ML.NET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.97.1">
     is a versatile
    </span>
    <a id="_idIndexMarker464">
    </a>
    <span class="koboSpan" id="kobo.98.1">
     framework that simplifies the integration of ML capabilities into .NET applications.
    </span>
    <span class="koboSpan" id="kobo.98.2">
     Features
    </span>
    <a id="_idIndexMarker465">
    </a>
    <span class="koboSpan" id="kobo.99.1">
     such as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.100.1">
      automated ML
     </span>
    </strong>
    <span class="koboSpan" id="kobo.101.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.102.1">
      AutoML
     </span>
    </strong>
    <span class="koboSpan" id="kobo.103.1">
     ) and tools
    </span>
    <a id="_idIndexMarker466">
    </a>
    <span class="koboSpan" id="kobo.104.1">
     such as ML.NET CLI and Model Builder make
    </span>
    <a id="_idIndexMarker467">
    </a>
    <span class="koboSpan" id="kobo.105.1">
     the process straightforward, even for developers without extensive data science experience.
    </span>
    <span class="koboSpan" id="kobo.105.2">
     It supports cross-platform development and seamlessly integrates with popular Python libraries such as TensorFlow and ONNX
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.106.1">
      through NimbusML.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.107.1">
     The Model Builder tool within ML.NET streamlines model creation with AutoML, enabling developers to deploy models swiftly by loading their data.
    </span>
    <span class="koboSpan" id="kobo.107.2">
     This tool automates the entire model-building process, including code generation for consuming these models.
    </span>
    <span class="koboSpan" id="kobo.107.3">
     Combined with its flexibility to leverage existing ML libraries, ML.NET offers a robust solution for .NET developers seeking to incorporate ML into
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.108.1">
      their applications.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.109.1">
     Now, let’s dive
    </span>
    <a id="_idIndexMarker468">
    </a>
    <span class="koboSpan" id="kobo.110.1">
     into creating an ML model using ML.NET and the intuitive Model Builder
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.111.1">
      user
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.112.1">
       interface
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.113.1">
      (
     </span>
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.114.1">
       UI
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.115.1">
      ).
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-128">
    <a id="_idTextAnchor128">
    </a>
    <span class="koboSpan" id="kobo.116.1">
     Creating an ML model with ML.NET and the Model 
Builder UI
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.117.1">
     Initially introduced as a preview feature in Visual Studio 2019, Model Builder has transitioned to a stable feature as of 2022.
    </span>
    <span class="koboSpan" id="kobo.117.2">
     In this section, we will explore how to use Model
    </span>
    <a id="_idIndexMarker469">
    </a>
    <span class="koboSpan" id="kobo.118.1">
     Builder to create an ML model
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.119.1">
      with ML.NET.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.120.1">
     First, let’s
    </span>
    <a id="_idIndexMarker470">
    </a>
    <span class="koboSpan" id="kobo.121.1">
     ensure that the Model Builder component is installed correctly in our instance of Visual Studio.
    </span>
    <span class="koboSpan" id="kobo.121.2">
     To
    </span>
    <a id="_idIndexMarker471">
    </a>
    <span class="koboSpan" id="kobo.122.1">
     do so, we open
    </span>
    <a id="_idIndexMarker472">
    </a>
    <span class="koboSpan" id="kobo.123.1">
     the Visual Studio Installer and confirm that ML.NET Model Builder is selected under the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.124.1">
      Individual
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.125.1">
       components
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.126.1">
      tab:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer150">
     <span class="koboSpan" id="kobo.127.1">
      <img alt="Figure 7.1 – Installer – ML.NET Model Builder" src="image/B22218_07_1.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.128.1">
     Figure 7.1 – Installer – ML.NET Model Builder
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.129.1">
     Then, we can create a new empty console project as a foundation for supporting our ML process.
    </span>
    <span class="koboSpan" id="kobo.129.2">
     Now, we are all set, and we can create our ML.NET by using the file-adding menu by right-clicking on the project and selecting
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.130.1">
      Add
     </span>
    </strong>
    <span class="koboSpan" id="kobo.131.1">
     |
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.132.1">
      Machine
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.133.1">
       Learning Model…
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.134.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer151">
     <span class="koboSpan" id="kobo.135.1">
      <img alt="Figure 7.2 – Add an ML model" src="image/B22218_07_2.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.136.1">
     Figure 7.2 – Add an ML model
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.137.1">
     The
    </span>
    <a id="_idIndexMarker473">
    </a>
    <span class="koboSpan" id="kobo.138.1">
     preceding action will initiate
    </span>
    <a id="_idIndexMarker474">
    </a>
    <span class="koboSpan" id="kobo.139.1">
     the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.140.1">
      .mbconfig
     </span>
    </strong>
    <span class="koboSpan" id="kobo.141.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.141.2">
     This
    </span>
    <a id="_idIndexMarker475">
    </a>
    <span class="koboSpan" id="kobo.142.1">
     file is a JSON
    </span>
    <a id="_idIndexMarker476">
    </a>
    <span class="koboSpan" id="kobo.143.1">
     file that keeps track of the state of the UI, including the model’s configuration, data transforms, algorithm, and settings such as learning rate, number of layers, and number
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.144.1">
      of neurons.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.145.1">
     The first step prompted by Model Builder, after choosing a name for the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.146.1">
      .mbconfig
     </span>
    </strong>
    <span class="koboSpan" id="kobo.147.1">
     file, is to select a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.148.1">
      Scenario
     </span>
    </strong>
    <span class="koboSpan" id="kobo.149.1">
     option for our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.150.1">
      ML model.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer152">
     <span class="koboSpan" id="kobo.151.1">
      <img alt="Figure 7.3 – Configuring .mbconfig" src="image/B22218_07_3.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.152.1">
     Figure 7.3 – Configuring .mbconfig
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.153.1">
     The
    </span>
    <a id="_idIndexMarker477">
    </a>
    <span class="koboSpan" id="kobo.154.1">
     selection window of Model
    </span>
    <a id="_idIndexMarker478">
    </a>
    <span class="koboSpan" id="kobo.155.1">
     Builder offers several
    </span>
    <a id="_idIndexMarker479">
    </a>
    <span class="koboSpan" id="kobo.156.1">
     scenarios
    </span>
    <a id="_idIndexMarker480">
    </a>
    <span class="koboSpan" id="kobo.157.1">
     organized into three
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.158.1">
      main categories:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.159.1">
       Tabular
      </span>
     </strong>
     <span class="koboSpan" id="kobo.160.1">
      : This
     </span>
     <a id="_idIndexMarker481">
     </a>
     <span class="koboSpan" id="kobo.161.1">
      category includes scenarios for tasks such as regression, classification, and clustering, where the data is organized in a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.162.1">
       tabular format
      </span>
     </span>
    </li>
   </ul>
   <p class="IMG---Figure">
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer153">
     <span class="koboSpan" id="kobo.163.1">
      <img alt="Figure 7.4 – Tabular" src="image/B22218_07_4.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.164.1">
     Figure 7.4 – Tabular
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.165.1">
       Computer Vision
      </span>
     </strong>
     <span class="koboSpan" id="kobo.166.1">
      : This
     </span>
     <a id="_idIndexMarker482">
     </a>
     <span class="koboSpan" id="kobo.167.1">
      category encompasses scenarios related to image classification, object detection, and other computer
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.168.1">
       vision tasks
      </span>
     </span>
    </li>
   </ul>
   <div>
    <div class="IMG---Figure" id="_idContainer154">
     <span class="koboSpan" id="kobo.169.1">
      <img alt="Figure 7.5 –  Computer Vision" src="image/B22218_07_5.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.170.1">
     Figure 7.5 –  Computer Vision
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.171.1">
       Natural Language Processing
      </span>
     </strong>
     <span class="koboSpan" id="kobo.172.1">
      : This category includes scenarios for natural language
     </span>
     <a id="_idIndexMarker483">
     </a>
     <span class="koboSpan" id="kobo.173.1">
      processing tasks, such as sentiment analysis, text classification, and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.174.1">
       language translation
      </span>
     </span>
    </li>
   </ul>
   <div>
    <div class="IMG---Figure" id="_idContainer155">
     <span class="koboSpan" id="kobo.175.1">
      <img alt="Figure 7.6 – Natural Language Processing" src="image/B22218_07_6.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.176.1">
     Figure 7.6 – Natural Language Processing
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.177.1">
     In our example, we will choose the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.178.1">
      Data Classification
     </span>
    </strong>
    <span class="koboSpan" id="kobo.179.1">
     scenario under the
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.180.1">
       Tabular
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.181.1">
      category.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.182.1">
     The second step is to select the training environment.
    </span>
    <span class="koboSpan" id="kobo.182.2">
     We have the option to train our ML
    </span>
    <a id="_idIndexMarker484">
    </a>
    <span class="koboSpan" id="kobo.183.1">
     model either
    </span>
    <a id="_idIndexMarker485">
    </a>
    <span class="koboSpan" id="kobo.184.1">
     locally on our machines or in the cloud on Azure, depending on the situation.
    </span>
    <span class="koboSpan" id="kobo.184.2">
     When we train locally, we
    </span>
    <a id="_idIndexMarker486">
    </a>
    <span class="koboSpan" id="kobo.185.1">
     operate within the
    </span>
    <a id="_idIndexMarker487">
    </a>
    <span class="koboSpan" id="kobo.186.1">
     limitations of our computer resources (CPU, memory, and disk).
    </span>
    <span class="koboSpan" id="kobo.186.2">
     However, when we train in the cloud, we can scale up our resources to address the requirements of our scenario, particularly for handling large datasets.
    </span>
    <span class="koboSpan" id="kobo.186.3">
     Notice that the availability of the environment depends on the scenario we choose.
    </span>
    <span class="koboSpan" id="kobo.186.4">
     Here’s a table of the current
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.187.1">
      availability combination:
     </span>
    </span>
   </p>
   <table class="No-Table-Style" id="table001-1">
    <colgroup>
     <col/>
     <col/>
     <col/>
     <col/>
    </colgroup>
    <tbody>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.188.1">
           Scenario
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.189.1">
           Local CPU
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.190.1">
           Local GPU
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.191.1">
           Azure
          </span>
         </strong>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.192.1">
          Data classification
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.193.1">
          ✔️
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.194.1">
          ❌
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.195.1">
          ❌
         </span>
        </strong>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.196.1">
          Value prediction
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.197.1">
          ✔️
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.198.1">
          ❌
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.199.1">
          ❌
         </span>
        </strong>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.200.1">
          Recommendation
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.201.1">
          ✔️
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.202.1">
          ❌
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.203.1">
          ❌
         </span>
        </strong>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.204.1">
          Forecasting
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.205.1">
          ✔️
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.206.1">
          ❌
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.207.1">
          ❌
         </span>
        </strong>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.208.1">
          Image classification
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.209.1">
          ✔️
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.210.1">
          ✔️
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.211.1">
          ✔️
         </span>
        </strong>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.212.1">
          Object detection
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.213.1">
          ❌
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.214.1">
          ❌
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.215.1">
          ✔️
         </span>
        </strong>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.216.1">
          Text classification
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.217.1">
          ✔️
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.218.1">
          ✔️
         </span>
        </strong>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.219.1">
          ❌
         </span>
        </strong>
       </p>
      </td>
     </tr>
    </tbody>
   </table>
   <p>
    <span class="koboSpan" id="kobo.220.1">
     Now that we have chosen our scenario and training environment, we must gather the data that will be used for training.
    </span>
    <span class="koboSpan" id="kobo.220.2">
     Model Builder will guide us through the process according to our selected scenario, helping us upload
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.221.1">
      the data.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.222.1">
     Finally, we can launch the training of our ML model.
    </span>
    <span class="koboSpan" id="kobo.222.2">
     We can set a specific time for training to begin.
    </span>
    <span class="koboSpan" id="kobo.222.3">
     Model Builder automatically chooses a training time based on our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.223.1">
      dataset size.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer156">
     <span class="koboSpan" id="kobo.224.1">
      <img alt="Figure 7.7 –Train" src="image/B22218_07_7.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.225.1">
     Figure 7.7 –Train
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.226.1">
     During
    </span>
    <a id="_idIndexMarker488">
    </a>
    <span class="koboSpan" id="kobo.227.1">
     the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.228.1">
      Evaluate
     </span>
    </strong>
    <span class="koboSpan" id="kobo.229.1">
     step, we’ll
    </span>
    <a id="_idIndexMarker489">
    </a>
    <span class="koboSpan" id="kobo.230.1">
     discover
    </span>
    <a id="_idIndexMarker490">
    </a>
    <span class="koboSpan" id="kobo.231.1">
     the best-performing
    </span>
    <a id="_idIndexMarker491">
    </a>
    <span class="koboSpan" id="kobo.232.1">
     algorithm and its highest accuracy, providing valuable insights into our model’s performance.
    </span>
    <span class="koboSpan" id="kobo.232.2">
     This step also enables us to experiment with the model directly within
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.233.1">
      the UI.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.234.1">
     In the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.235.1">
      Try your model
     </span>
    </strong>
    <span class="koboSpan" id="kobo.236.1">
     section, we can input sample data to generate predictions.
    </span>
    <span class="koboSpan" id="kobo.236.2">
     The textbox comes pre-filled with the first line of data from our dataset, but we have the flexibility to modify the input and click the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.237.1">
      Predict
     </span>
    </strong>
    <span class="koboSpan" id="kobo.238.1">
     button to observe different
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.239.1">
      price predictions.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer157">
     <span class="koboSpan" id="kobo.240.1">
      <img alt="Figure 7.8 – Evaluate" src="image/B22218_07_8.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.241.1">
     Figure 7.8 – Evaluate
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.242.1">
     The
    </span>
    <a id="_idIndexMarker492">
    </a>
    <span class="koboSpan" id="kobo.243.1">
     last panel of Model
    </span>
    <a id="_idIndexMarker493">
    </a>
    <span class="koboSpan" id="kobo.244.1">
     Builder is about consuming
    </span>
    <a id="_idIndexMarker494">
    </a>
    <span class="koboSpan" id="kobo.245.1">
     the model we just
    </span>
    <a id="_idIndexMarker495">
    </a>
    <span class="koboSpan" id="kobo.246.1">
     created.
    </span>
    <span class="koboSpan" id="kobo.246.2">
     Let’s explore how we can integrate our model into a web API using
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.247.1">
      Visual Studio.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-129">
    <a id="_idTextAnchor129">
    </a>
    <span class="koboSpan" id="kobo.248.1">
     Deploying a model in an ASP.NET Core web API
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.249.1">
     In this
    </span>
    <a id="_idIndexMarker496">
    </a>
    <span class="koboSpan" id="kobo.250.1">
     section, we will learn how
    </span>
    <a id="_idIndexMarker497">
    </a>
    <span class="koboSpan" id="kobo.251.1">
     to integrate our ML.NET model into an existing web API.
    </span>
    <span class="koboSpan" id="kobo.251.2">
     To do so, we will jump to the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.252.1">
      Consume
     </span>
    </strong>
    <span class="koboSpan" id="kobo.253.1">
     panel of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.254.1">
      Model Builder.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer158">
     <span class="koboSpan" id="kobo.255.1">
      <img alt="Figure 7.9 – Consume" src="image/B22218_07_9.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.256.1">
     Figure 7.9 – Consume
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.257.1">
     The
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.258.1">
      Consume
     </span>
    </strong>
    <span class="koboSpan" id="kobo.259.1">
     panel within
    </span>
    <a id="_idIndexMarker498">
    </a>
    <span class="koboSpan" id="kobo.260.1">
     Model Builder is a critical tool for integrating our trained ML models into .NET applications.
    </span>
    <span class="koboSpan" id="kobo.260.2">
     Once we’ve completed the evaluation
    </span>
    <a id="_idIndexMarker499">
    </a>
    <span class="koboSpan" id="kobo.261.1">
     phase, Model Builder
    </span>
    <a id="_idIndexMarker500">
    </a>
    <span class="koboSpan" id="kobo.262.1">
     generates a model file and the necessary code to incorporate the model into our application.
    </span>
    <span class="koboSpan" id="kobo.262.2">
     These models are saved as a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.263.1">
      .zip
     </span>
    </strong>
    <span class="koboSpan" id="kobo.264.1">
     file, and the code to load and use our model is added as a new project within our solution.
    </span>
    <span class="koboSpan" id="kobo.264.2">
     Additionally, Model Builder provides a sample console application that we can run to see our model
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.265.1">
      in action.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.266.1">
     The
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.267.1">
      Consume
     </span>
    </strong>
    <span class="koboSpan" id="kobo.268.1">
     panel gives us options to create projects that consume our model, such as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.269.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.270.1">
       Console app
      </span>
     </strong>
     <span class="koboSpan" id="kobo.271.1">
      : Generates
     </span>
     <a id="_idIndexMarker501">
     </a>
     <span class="koboSpan" id="kobo.272.1">
      a .NET console application specifically for making predictions using
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.273.1">
       our model
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.274.1">
       Web API
      </span>
     </strong>
     <span class="koboSpan" id="kobo.275.1">
      : Sets up
     </span>
     <a id="_idIndexMarker502">
     </a>
     <span class="koboSpan" id="kobo.276.1">
      an ASP.NET Core web API, allowing us to consume our model over
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.277.1">
       the internet
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.278.1">
     These projects are crucial for deploying our model in various environments, whether for local testing or web-based applications
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.279.1">
      accessible online.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.280.1">
     Let’s click on the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.281.1">
      Add web app to the solution
     </span>
    </strong>
    <span class="koboSpan" id="kobo.282.1">
     link to create the new ASP.NET Core web API exposing our model.
    </span>
    <span class="koboSpan" id="kobo.282.2">
     That will set up a working web API, enabling us to expose the model we just trained, using the minimal
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.283.1">
      API way.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.284.1">
     Now, to
    </span>
    <a id="_idIndexMarker503">
    </a>
    <span class="koboSpan" id="kobo.285.1">
     understand how it’s articulate, we
    </span>
    <a id="_idIndexMarker504">
    </a>
    <span class="koboSpan" id="kobo.286.1">
     will take a look at what the wizard generates for us.
    </span>
    <span class="koboSpan" id="kobo.286.2">
     Let’s explore the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.287.1">
      project structure:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer159">
     <span class="koboSpan" id="kobo.288.1">
      <img alt="Figure 7.10 – Generating a web API project structure" src="image/B22218_07_10.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.289.1">
     Figure 7.10 – Generating a web API project structure
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.290.1">
     The template utilizes the following packages to make ML.NET models accessible
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.291.1">
      for ML:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.292.1">
        Microsoft.ML
       </span>
      </strong>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.293.1">
        Microsoft.Extensions.ML
       </span>
      </strong>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.294.1">
     Among these libraries, in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.295.1">
      Program.cs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.296.1">
     file, we observe that Visual Studio generates a POST request.
    </span>
    <span class="koboSpan" id="kobo.296.2">
     Here’s the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.297.1">
      code snippet:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.298.1">
app.MapPost("/predict",
    async (PredictionEnginePool&lt;SampleML.ModelInput,
           SampleML.ModelOutput&gt; predictionEnginePool,
           SampleML.ModelInput input) =&gt;
        await Task.FromResult(
            predictionEnginePool.Predict(input)
        )
);</span></pre>
   <p>
    <span class="koboSpan" id="kobo.299.1">
     This
    </span>
    <a id="_idIndexMarker505">
    </a>
    <span class="koboSpan" id="kobo.300.1">
     code snippet uses the models
    </span>
    <a id="_idIndexMarker506">
    </a>
    <span class="koboSpan" id="kobo.301.1">
     generated by the model builder to set up an HTTP POST
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.302.1">
      endpoint /predict
     </span>
    </strong>
    <span class="koboSpan" id="kobo.303.1">
     in an ASP.NET Core minimal
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.304.1">
      API application.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.305.1">
     This is possible because of the following lines
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.306.1">
      of code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.307.1">
builder.Services
    .AddPredictionEnginePool&lt;SampleML.ModelInput,
        SampleML.ModelOutput&gt;()
    .FromFile("SampleML.mlnet");</span></pre>
   <p>
    <span class="koboSpan" id="kobo.308.1">
     This code is configuring an ASP.NET Core application to use an ML model stored in a file named
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.309.1">
      SampleML.mlnet
     </span>
    </strong>
    <span class="koboSpan" id="kobo.310.1">
     for making predictions.
    </span>
    <span class="koboSpan" id="kobo.310.2">
     The model expects inputs of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.311.1">
      SampleML.ModelInput
     </span>
    </strong>
    <span class="koboSpan" id="kobo.312.1">
     type and produces outputs of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.313.1">
      SampleML.ModelOutput
     </span>
    </strong>
    <span class="koboSpan" id="kobo.314.1">
     type.
    </span>
    <span class="koboSpan" id="kobo.314.2">
     This setup allows the application to efficiently manage and reuse the ML model across different parts of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.315.1">
      the application.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.316.1">
     Now, we can test the endpoints using the endpoints explorer and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.317.1">
      .http
     </span>
    </strong>
    <span class="koboSpan" id="kobo.318.1">
     file, as we saw in
    </span>
    <a href="B22218_06.xhtml#_idTextAnchor112">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.319.1">
        Chapter 6
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.320.1">
     .
    </span>
    <span class="koboSpan" id="kobo.320.2">
     Since the HTTP verb used for this endpoint is
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.321.1">
      POST
     </span>
    </strong>
    <span class="koboSpan" id="kobo.322.1">
     , we have to add a body to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.323.1">
      our request.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.324.1">
     Here’s the proper syntax to set up our working request in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.325.1">
      .
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.326.1">
       http
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.327.1">
      file:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.328.1">
@SampleML_WebApi_HostAddress = https://localhost:63555
POST {{SampleML_WebApi_HostAddress}}/predict
Content-Type: application/json
{
    "Month": "2-Jan"
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.329.1">
     Now, we
    </span>
    <a id="_idIndexMarker507">
    </a>
    <span class="koboSpan" id="kobo.330.1">
     can validate that we own
    </span>
    <a id="_idIndexMarker508">
    </a>
    <span class="koboSpan" id="kobo.331.1">
     a web API able to consume our model generated by Model Builder.
    </span>
    <span class="koboSpan" id="kobo.331.2">
     This web API can be seamlessly deployed like any other API in the .
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.332.1">
      NET ecosystem.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.333.1">
     There is another way to consume our generated ML model, and that is to consume it through
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.334.1">
      Azure Functions.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-130">
    <a id="_idTextAnchor130">
    </a>
    <span class="koboSpan" id="kobo.335.1">
     Deploying a model in Azure Functions
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.336.1">
     In this section, we will learn how to integrate the ML model generated by Model Builder into
    </span>
    <a id="_idIndexMarker509">
    </a>
    <span class="koboSpan" id="kobo.337.1">
     Azure Functions.
    </span>
    <span class="koboSpan" id="kobo.337.2">
     This
    </span>
    <a id="_idIndexMarker510">
    </a>
    <span class="koboSpan" id="kobo.338.1">
     process will be less straightforward as no template
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.339.1">
      is provided.
     </span>
    </span>
   </p>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.340.1">
      Azure Functions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.341.1">
     is a
    </span>
    <a id="_idIndexMarker511">
    </a>
    <span class="koboSpan" id="kobo.342.1">
     serverless computing service offered by Microsoft Azure.
    </span>
    <span class="koboSpan" id="kobo.342.2">
     Serverless computing is a cloud computing execution model where the cloud provider runs the server, and dynamically manages the allocation of machine resources.
    </span>
    <span class="koboSpan" id="kobo.342.3">
     Pricing is based on the actual number of resources consumed by an application, rather than pre-purchased units
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.343.1">
      of capacity.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.344.1">
     First, we need to ensure that the Azure development workload is well installed in our Visual Studio instance by navigating to the Visual
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.345.1">
      Studio Installer.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer160">
     <span class="koboSpan" id="kobo.346.1">
      <img alt="Figure 7.11 – Azure development workload" src="image/B22218_07_11.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.347.1">
     Figure 7.11 – Azure development workload
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.348.1">
     Once
    </span>
    <a id="_idIndexMarker512">
    </a>
    <span class="koboSpan" id="kobo.349.1">
     the workload
    </span>
    <a id="_idIndexMarker513">
    </a>
    <span class="koboSpan" id="kobo.350.1">
     is installed, we can start by creating a new Azure Functions project, for example, we will name it
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.351.1">
      SampleML_AzureFunction
     </span>
    </strong>
    <span class="koboSpan" id="kobo.352.1">
     , and we will keep all parameters
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.353.1">
      by default.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer161">
     <span class="koboSpan" id="kobo.354.1">
      <img alt="Figure 7.12 – Azure Functions project" src="image/B22218_07_12.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.355.1">
     Figure 7.12 – Azure Functions project
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.356.1">
     This time, we need to add both libraries by ourselves, as seen in the previous section, using the NuGet Manager.
    </span>
    <span class="koboSpan" id="kobo.356.2">
     We will open the NuGet Manager by right-clicking on the project name, selecting
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.357.1">
      Manage NuGet Packages…
     </span>
    </strong>
    <span class="koboSpan" id="kobo.358.1">
     , and then browsing for our needed libraries, to finally
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.359.1">
      install them:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.360.1">
        Microsoft.ML
       </span>
      </strong>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.361.1">
        Microsoft.Extension.ML
       </span>
      </strong>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.362.1">
     Now, to be able to use our pre-trained model, all we need to do is copy the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.363.1">
      .mbconfig
     </span>
    </strong>
    <span class="koboSpan" id="kobo.364.1">
     file to Azure Functions.
    </span>
    <span class="koboSpan" id="kobo.364.2">
     After that, to be sure you can access the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.365.1">
      .mlnet
     </span>
    </strong>
    <span class="koboSpan" id="kobo.366.1">
     package after compiling, we need to set the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.367.1">
      Copy to Output Directory
     </span>
    </strong>
    <span class="koboSpan" id="kobo.368.1">
     properties to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.369.1">
      Copy
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.370.1">
       if newer
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.371.1">
      .
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer162">
     <span class="koboSpan" id="kobo.372.1">
      <img alt="Figure 7.13 – The SampleML.Net properties" src="image/B22218_07_13.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.373.1">
     Figure 7.13 – The SampleML.Net properties
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.374.1">
     Once
    </span>
    <a id="_idIndexMarker514">
    </a>
    <span class="koboSpan" id="kobo.375.1">
     we are all set, we
    </span>
    <a id="_idIndexMarker515">
    </a>
    <span class="koboSpan" id="kobo.376.1">
     can develop our function following these
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.377.1">
      simple steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.378.1">
      Add
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.379.1">
       startup.cs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.380.1">
      to configure our Azure Functions project to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.381.1">
       use
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.382.1">
        SampleML.mlnet
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.383.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.384.1">
[assembly: FunctionsStartup(typeof(Startup))]
namespace SampleML_AzureFunction;
public class Startup : FunctionsStartup
{
    public override void Configure(
        IFunctionsHostBuilder builder)
    {
        builder.Services
            .AddPredictionEnginePool&lt;
                SampleML.ModelInput,
                SampleML.ModelOutput&gt;()
            .FromFile("SampleML.mlnet");
    }
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.385.1">
      Call
     </span>
     <a id="_idIndexMarker516">
     </a>
     <span class="koboSpan" id="kobo.386.1">
      the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.387.1">
       predict
      </span>
     </strong>
     <span class="koboSpan" id="kobo.388.1">
      method
     </span>
     <a id="_idIndexMarker517">
     </a>
     <span class="koboSpan" id="kobo.389.1">
      of the ML.NET package in the Azure’s
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.390.1">
        run
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.391.1">
       method:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.392.1">
    public class FunctionML
    {
        private PredictionEnginePool&lt;
            SampleML.ModelInput, SampleML.ModelOutput&gt;
            _predictionEnginePool;
        public FunctionML(
            PredictionEnginePool&lt;SampleML.ModelInput,
                SampleML.ModelOutput&gt;
            predictionEnginePool)
        {
            _predictionEnginePool =
                predictionEnginePool;
        }
        [FunctionName("FunctionML")]
        public async Task&lt;IActionResult&gt; Run(
            [HttpTrigger(
                AuthorizationLevel.Anonymous,
                "post",
                Route = null)] HttpRequest req)
        {
            string requestBody = await new
                StreamReader(req.Body)
                .ReadToEndAsync();
            SampleML.ModelInput input = JsonConvert
                .DeserializeObject&lt;
                    SampleML.ModelInput&gt;(
                requestBody);
            SampleML.ModelOutput responseMessage =
                await Task.FromResult(
                    _predictionEnginePool
                        .Predict(input));
            return new OkObjectResult(
                responseMessage);
        }
    }</span></pre>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.393.1">
     Finally, we can test the Azure function using the Endpoints Explorer and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.394.1">
      .http
     </span>
    </strong>
    <span class="koboSpan" id="kobo.395.1">
     , like how you tested the web API in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.396.1">
      previous section.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-131">
    <a id="_idTextAnchor131">
    </a>
    <span class="koboSpan" id="kobo.397.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.398.1">
     In this chapter, we explored the integration of ML capabilities into software development workflows using Visual Studio, equipping developers with essential skills to leverage intelligent decision-making
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.399.1">
      within applications.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.400.1">
     We began by introducing the fundamental concepts of ML, providing an overview to understand its applications and significance in modern software development.
    </span>
    <span class="koboSpan" id="kobo.400.2">
     Next, we delved into practical implementation by demonstrating how to create and train ML models using ML.NET and Model Builder within Visual Studio.
    </span>
    <span class="koboSpan" id="kobo.400.3">
     Moving forward, we explored deployment strategies for trained models, showcasing how to deploy ML models within an ASP.NET Core web API for real-time inference and integration with web applications.
    </span>
    <span class="koboSpan" id="kobo.400.4">
     Additionally, we discussed deploying models within Azure Functions to leverage serverless computing for scalable and efficient
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.401.1">
      deployment scenarios.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.402.1">
     In this chapter, you gained hands-on experience in building, training, and deploying ML models using Visual Studio, enabling you to infuse intelligent capabilities into
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.403.1">
      your applications.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.404.1">
     In the upcoming chapter, we’ll continue on track toward advanced cloud integration and services through Visual
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.405.1">
      Studio 2022.
     </span>
    </span>
   </p>
  </div>
 </body></html>