<html><head></head><body>
  <div id="_idContainer859" class="Basic-Text-Frame">
    <h1 class="chapterNumber">16</h1>
    <h1 id="_idParaDest-218" class="chapterTitle">Next-Gen UI: Creating Dynamic Interfaces with UI Toolkit</h1>
    <p class="normal">In the previous chapter, we discussed how to create user interfaces using <strong class="screenText">uGUI</strong> (also known as <strong class="screenText">Canvas</strong>), one of the most common Unity UI systems, but as we already mentioned, this is not the only one. While, so far, uGUI has been the most preferred option, Unity is working on a replacement called <strong class="screenText">UI Toolkit</strong>, and even if it doesn’t have feature parity with uGUI yet, we thought it is worth covering it in this book.</p>
    <p class="normal">The idea of this chapter is to create the same UI we created previously but with UI Toolkit, so you can get an idea of how creating a UI in Unity will look soon.</p>
    <p class="normal">In this chapter, we will examine the following UI concepts:</p>
    <ul>
      <li class="bulletList">Why learn how to use UI Toolkit?</li>
      <li class="bulletList">Creating a UI with UI Toolkit</li>
      <li class="bulletList">Making a responsive UI with UI Toolkit</li>
    </ul>
    <p class="normal">By the end of the chapter, you will learn how to use UI Toolkit to create basic UIs for our game, redoing the UI we did in the last chapter as a point of reference. So, let’s start by answering the following question first: why learn how to use UI Toolkit?</p>
    <h1 id="_idParaDest-219" class="heading-1">Why learn how to use UI Toolkit?</h1>
    <p class="normal">I know the topic of this chapter<a id="_idIndexMarker1089"/> might sound a little bit confusing; we just learned how to use a whole Unity system to create our UI, and now we are learning how to use another one! Why do we have to learn about this new one?</p>
    <p class="normal">One reason for learning both systems is that UI Toolkit, while promising, doesn’t yet match uGUI in feature completeness, which is crucial for real-world production. Another thing to take into account is that even if UI Toolkit is stable enough, it’s still a relatively new system, and there are still lots of games in development that were created on older Unity versions that don’t support it. This means that in order to land a job in this industry, we need to get a decent amount of exposure to uGUI, due to most games being created with this technology. </p>
    <p class="normal">This happens because it’s not safe or practical to update an already-tested and working game with new technologies; such changes could lead to a major rework of the game to make it compatible with the new versions. Also, this could potentially introduce tons of bugs that could delay the release of new versions—not to mention the time it would take to remake a full app with a new system.</p>
    <p class="normal">That being said, we believe it’s still worth learning the basic concepts of UI Toolkit to be prepared to use it in newer Unity versions, so let’s dive into it now.</p>
    <h1 id="_idParaDest-220" class="heading-1">Creating a UI with UI Toolkit</h1>
    <p class="normal">In this section, we are going to learn<a id="_idIndexMarker1090"/> about UI documents, a cornerstone of UI Toolkit. These assets are crucial for defining your UI’s structure and components, and we’ll learn how to create and utilize them effectively. To do this, we are going to discuss the following concepts:</p>
    <ul>
      <li class="bulletList">Creating UI Documents</li>
      <li class="bulletList">Editing UI Documents</li>
      <li class="bulletList">Creating UI Stylesheets</li>
    </ul>
    <p class="normal">Let’s start by seeing how we can create our first UI Document.</p>
    <h2 id="_idParaDest-221" class="heading-2">Creating UI Documents</h2>
    <p class="normal">When creating a UI with uGUI, we need<a id="_idIndexMarker1091"/> to create GameObjects and attach components like <strong class="screenText">Button</strong>, <strong class="screenText">Image</strong>, or <strong class="screenText">Text</strong>, but with UI Toolkit, we need to create a <strong class="screenText">UI Document</strong> instead. A UI Document is a special kind of asset that will contain the definition of the elements our UI will have and its hierarchy. We will have a GameObject with a <strong class="screenText">UI Document </strong>component (yes, it’s called the same, so pay attention here) that will reference this <strong class="screenText">UI Document</strong> asset and render its contents. It’s like a mesh asset that contains information about the mesh and the <code class="inlineCode">MeshRenderer</code> component that will render it. In this case, the elements to render are contained in an asset, and we have a component that reads the asset and renders its content (the UI in this case).</p>
    <p class="normal">Interestingly, UI Documents are plain text files at their core. This means you can open and inspect them with any standard text editor, offering a straightforward way to understand their structure. If you do that and you are familiar with HTML, you will recognize the XML-like format used to define the elements our UI will be composed of; Unity calls this format UXML. With UI Toolkit, Unity is attempting to make it easy for web developers to jump into Unity and create UIs. In the following code, you can see the typical look of a UXML document’s file contents:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">ui:UXML</span><span class="hljs-tag">&gt;</span>
   
   xsi="http://www.w3.org/2001/XMLSchema-instance"
   engine="UnityEngine.UIElements"
   editor="UnityEditor.UIElements"
   noNamespaceSchemaLocation="../../UIElementsSchema/UIElements.xsd"
   editor-extension-mode="False"&gt;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">ui:Button</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag"> </span><span class="hljs-attr">text</span><span class="hljs-tag">=</span><span class="hljs-string">"Button"</span>
<span class="hljs-tag">              </span><span class="hljs-attr">display-tooltip-when-elided</span><span class="hljs-tag">=</span><span class="hljs-string">"true"</span><span class="hljs-tag"> /&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">ui:Scroller</span><span class="hljs-tag"> </span><span class="hljs-attr">high-value</span><span class="hljs-tag">=</span><span class="hljs-string">"100"</span>
<span class="hljs-tag">                </span><span class="hljs-attr">direction</span><span class="hljs-tag">=</span><span class="hljs-string">"Horizontal"</span>
<span class="hljs-tag">                 </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"42"</span><span class="hljs-tag"> /&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">ui:VisualElement</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">ui:Label</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span>
<span class="hljs-tag">                 </span><span class="hljs-attr">text</span><span class="hljs-tag">=</span><span class="hljs-string">"Label"</span>
<span class="hljs-tag">                 </span><span class="hljs-attr">display-tooltip-when-elided</span><span class="hljs-tag">=</span><span class="hljs-string">"true"</span><span class="hljs-tag"> /&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">ui:Label</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"</span><span class="hljs-string">-1"</span>
<span class="hljs-tag">                 </span><span class="hljs-attr">text</span><span class="hljs-tag">=</span><span class="hljs-string">"Label"</span>
<span class="hljs-tag">                 </span><span class="hljs-attr">display-tooltip-when-elided</span><span class="hljs-tag">=</span><span class="hljs-string">"true"</span><span class="hljs-tag"> /&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">ui:VisualElement</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">ui:UXML</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">Don’t worry if you don’t know XML; we will explain the core concepts in this chapter. Also, don’t worry about the UXML format; later in this chapter, we will use a visual editor called <strong class="screenText">UI Builder</strong> to edit our UI without writing UXML at all, but it is worth knowing how it actually works.</p>
    <p class="normal">In order to create a UI Document<a id="_idIndexMarker1092"/> and add it to the scene, we need to do the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Click the <strong class="screenText">+ </strong>|<strong class="screenText"> UI Toolkit</strong> |<strong class="screenText"> UI Document</strong> option in the <strong class="screenText">Project</strong> view to create a <strong class="screenText">UI Document</strong> asset, and name it <code class="inlineCode">GameHUD</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_01_PE.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 16.1: Creating the UI Document asset</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="2">Click the <strong class="screenText">Game Object</strong> |<strong class="screenText"> UI Toolkit</strong> | <strong class="screenText">UI Document</strong> option to create a GameObject in your scene with the <strong class="screenText">UI Document</strong> component, which is capable of rendering the UI Document.</li>
      <li class="numberedList">Select it, and drag the <strong class="screenText">GameHUD</strong> <strong class="screenText">UI Document</strong> asset (the one created in <em class="italic">Step 1</em>) to the <strong class="screenText">Source Asset</strong> property of the <strong class="screenText">UI Document</strong> GameObject (the one created in <em class="italic">Step 2</em>):</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_02.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.2: Making the UI Document component to render our UI Document asset</p>
    <p class="normal">And that’s it! Of course, we won’t see anything <a id="_idIndexMarker1093"/>yet on our screen as the UI Document is blank, so let’s start adding elements to it.</p>
    <h2 id="_idParaDest-222" class="heading-2">Editing UI Documents</h2>
    <p class="normal">As our goal is to recreate the same UI <a id="_idIndexMarker1094"/>we created in the last chapter, let’s start with the simplest part: adding the player avatar to the top-left corner. One option would be to open the <strong class="screenText">UI Document</strong> asset with any text<a id="_idIndexMarker1095"/> editor and start writing the UXML code, but luckily, we have an easier way, which is using the <strong class="keyWord">UI Builder</strong> editor. This editor allows us to generate the UXML code visually by dragging and dropping elements.</p>
    <p class="normal">Before we jump in, let’s take a quick tour of the UI <strong class="keyWord">Builder</strong> window to see what we’re working with:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Double-click the <strong class="screenText">GameHUD</strong> asset in the <strong class="screenText">Project</strong> view to make <strong class="screenText">UI Builder</strong> open it:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_03.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.3: The UI Builder editor</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="2">In the <strong class="screenText">Hierarchy</strong> panel inside<a id="_idIndexMarker1096"/> UI Builder (<em class="italic">not</em> the <strong class="screenText">Hierarchy</strong> panel we’ve used so far in previous chapters), select <code class="inlineCode">GameHUD.uxml</code>, which is the container element of the UI.</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_04_PE.png" alt="A screenshot of a computer  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 16.4: Selecting the asset name in Hierarchy to edit the general UI settings</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="3">Look at the <strong class="screenText">Inspector</strong> panel at the right of the UI Builder window (<em class="italic">not</em> the <strong class="screenText">Inspector</strong> we’ve used so far to modify GameObjects). Set the <strong class="screenText">Size</strong> property to a <strong class="screenText">Width</strong> of <code class="inlineCode">1920</code> and a <strong class="screenText">Height</strong> of <code class="inlineCode">1080</code>. This will allow us to view how our UI will look in this resolution. You can later change this value to see how it adapts to different sizes, but more on that later:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_05_PE.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 16.5: Setting the preview UI resolution</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="4">You can pan the viewport to navigate the UI by pressing the <em class="keystroke">mouse wheel button</em> (also known as the <em class="italic">middle button</em>) and moving the mouse. On a Mac, you can also press <em class="keystroke">Option</em><em class="italic"> + </em><em class="keystroke">Command</em> and click and drag any free area of the viewport (places without our UI) to do the same.</li>
      <li class="numberedList">You can also use the <em class="italic">mouse scroll wheel</em> to zoom <a id="_idIndexMarker1097"/>in and out. Finally, you can use the zoom percentage selection at the top-left part of the viewport and the <strong class="screenText">Fit Canvas</strong> button to automatically fit the entire UI in your viewport:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_06_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.6: Setting the preview zoom</p>
    <p class="normal">Now that we know the basics of UI Builder, let’s add our image to the UI:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Drag the <strong class="screenText">VisualElement</strong> icon from <strong class="screenText">Library</strong> at the bottom left to the <strong class="screenText">Hierarchy</strong> section on the left. This will create a basic UI element capable of rendering an image and much more:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_07_PE.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 16.7: Creating a visual element</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="2">Select <strong class="screenText">VisualElement</strong> in <strong class="screenText">Hierarchy</strong> (under <code class="inlineCode">GameHUD.uxml</code>) and look at the <strong class="screenText">Inspector</strong> at the right part<a id="_idIndexMarker1098"/> of the UI Builder window (again, not the regular Unity <strong class="screenText">Inspector</strong> panel) in the <strong class="screenText">Position</strong> section. Expand it if not already expanded (using the arrow on the left).</li>
      <li class="numberedList">Set <strong class="screenText">Position</strong> to <strong class="screenText">Absolute</strong> in order to allow us to move our element freely around the UI. Later in this chapter, in the <em class="italic">Using relative positions</em> section, we will explain how the <strong class="screenText">Relative</strong> mode works:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_08_PE.png" alt="A picture containing text, screenshot, font, line  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 16.8: Setting our UI element to be freely moved around</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="4">Open the <strong class="screenText">Size</strong> section, and set <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> to <code class="inlineCode">100</code> to make our UI element have a non-zero size. This way, we can see its area in the viewport:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_09_PE.png" alt="A screenshot of a computer  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 16.9: Setting our UI element size</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="5">In the <strong class="screenText">Viewport</strong> pane, you can drag your element<a id="_idIndexMarker1099"/> around and use the blue rectangles in the corners to change its size. Position your element at the top-left corner of the UI. If you don’t see your element in the viewport, select it in <strong class="screenText">Hierarchy</strong> (the one for UI Builder):</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_10.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.10: Moving VisualElement</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="6">In order to set an exact position, you can set the <strong class="screenText">Left</strong> and <strong class="screenText">Top</strong> values of the <strong class="screenText">Position</strong> section in the <strong class="screenText">Inspector</strong> to specify the exact <em class="italic">x</em> and <em class="italic">y</em> coordinates, respectively, expressed in pixels:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_11.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.11: Setting the position</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="7">In the <strong class="screenText">Background</strong> section of the <strong class="screenText">Inspector</strong>, set the <strong class="screenText">Image</strong> mode to <strong class="screenText">Sprite</strong> using the combo box at the right of the <strong class="screenText">Image</strong> property. This allows us to apply a sprite as the background of our element.</li>
      <li class="numberedList">Drag the sprite asset (the image) of our player<a id="_idIndexMarker1100"/> avatar we imported in <em class="chapterRef">Chapter 15</em>,<em class="italic"> Interface Brilliance: Designing a User-Friendly UI</em>, from the <strong class="screenText">Project</strong> panel to the <strong class="screenText">Image</strong> property in order to set it. Also, you can use the target button (the circle button with the dot in the middle) to select the sprite asset from the picker window:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_12_PE.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 16.12: Setting the Background image of the element</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="9">Return to the regular <strong class="screenText">Game</strong> panel to see the results. If you don’t see a change, you can turn off and on the GameObject that renders our UI (the one we created with the UI Document).</li>
    </ol>
    <p class="normal">Now that we have created the player avatar, we can create the player health bar by doing the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Repeat the previous <em class="italic">steps</em> <em class="italic">1</em> to<em class="italic"> 6</em> to create a new element that will serve as the player health bar container. It won’t have an image, as it will just be the container for the rest of the elements that will compose the health bar.</li>
      <li class="numberedList">Position it right next to the player avatar, and set a width and height to resemble a classic health bar. Remember that you can do this by dragging the image and the squares at the corners or through the <strong class="screenText">Size</strong> and<strong class="screenText"> Position</strong> properties as we did before.</li>
      <li class="numberedList">Drag a new VisualElement to the Hierarchy, as we did in <em class="italic">step 1</em>, but this time, drop it over the element created in <em class="italic">step 1</em>. This will make this new element a child of it, which will make that element’s position and size depend on its parent, the same as what happened when we parented Canvas objects in <em class="chapterRef">Chapter 15</em>,<em class="italic"> Interface Brilliance: Designing a User-Friendly UI</em>.</li>
      <li class="numberedList">Select the parent VisualElement, and in the <strong class="screenText">Inspector</strong>, set the <strong class="screenText">Name</strong> property to <code class="inlineCode">PlayerHealth</code> to easily identify it. Do the same with the child element, calling it <code class="inlineCode">Filling</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_13_PE.png" alt="A picture containing text, font, screenshot, white  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 16.13: Parenting and naming visual elements</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="5">Select the <strong class="screenText">Filling</strong> element in the <strong class="screenText">Hierarchy</strong> and look at the <strong class="screenText">Inspector</strong>.</li>
      <li class="numberedList">In the <strong class="screenText">Background</strong> section, set the <strong class="screenText">Color</strong> property to red, clicking on the color box and using the <strong class="screenText">Color Picker</strong>. This will fill our UI element background with plain red instead of using an image:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_14_PE.png" alt="A picture containing text, screenshot, font, number  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 16.14: Setting a pure red background for our element</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="7">As usual, set <strong class="screenText">Position</strong> to <strong class="screenText">Absolute</strong>, and also the <strong class="screenText">Left</strong> and <strong class="screenText">Top</strong> properties to <code class="inlineCode">0</code>. As this is a child of another element, the position<a id="_idIndexMarker1101"/> will be relative to its parent position, so by specifying a <strong class="screenText">Left</strong> and <strong class="screenText">Top</strong> value of <code class="inlineCode">0</code>, we are saying that we will be at 0 pixels from the left and top sides of our parent. This means that if our parent moves, this child element will move along with it.</li>
      <li class="numberedList">Set the <strong class="screenText">Size</strong> <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> to <code class="inlineCode">100</code>, and change the unit of measurement from <strong class="screenText">px</strong> (pixels) to <strong class="screenText">%</strong> (percentage) by clicking on the <strong class="screenText">px</strong> button and selecting <strong class="screenText">%</strong>. This will make the <strong class="screenText">Filling</strong> element size the same as its parent (100 percent of the parent size):</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_15_PE.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 16.15: Setting our size as the same size as our parent element</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="9">Add a new <strong class="screenText">VisualElement</strong> as a child of <strong class="screenText">PlayerHealth</strong> (a sibling of <strong class="screenText">Filling</strong>) and call it <code class="inlineCode">Border</code>.</li>
      <li class="numberedList">Set <strong class="screenText">Position</strong> and <strong class="screenText">Size</strong> as we did in <em class="italic">steps</em> <em class="italic">7</em> and <em class="italic">8</em> for the <strong class="screenText">Filling</strong> element, but don’t set the background color.</li>
      <li class="numberedList">Set the <strong class="screenText">Background</strong> section’s <strong class="screenText">Image</strong> property to be the same border image we used in the previous chapter. Remember to set the <strong class="screenText">Image</strong> mode to <strong class="screenText">Sprite</strong> instead of <strong class="screenText">Texture</strong>.</li>
      <li class="numberedList">Set the <strong class="screenText">Slice</strong> property in the <strong class="screenText">Background</strong> section to <code class="inlineCode">15</code>. This applies the nine-slices technique we used in <em class="chapterRef">Chapter 15</em>, <em class="italic">Interface Brilliance: Designing a User-Friendly UI</em>, to expand an object without stretching it. In this case, we are giving the slice a size of 15 pixels from the outer borders of the UI element.</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_16_PE.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 16.16: Setting the nine-slice sizes in the element directly</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="13">Select the <strong class="screenText">Filling</strong> visual element<a id="_idIndexMarker1102"/> in the <strong class="screenText">Hierarchy</strong> and set its <strong class="screenText">Size</strong> section’s <strong class="screenText">Width</strong> property to simulate the <strong class="screenText">Fill Amount</strong> property of the images we used in <em class="chapterRef">Chapter 11</em>, <em class="italic">Captivating Visual Effects: Harnessing Particle Systems and VFX Graph</em>. Later, we will change the size to be directly proportional to the player’s health number via code:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_17_PE.png" alt="A picture containing screenshot, design  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 16.17: Health bar result</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="14">Repeat <em class="italic">steps</em> <em class="italic">1 </em>to<em class="italic"> 12</em> to create the bottom of the <strong class="screenText">Base Health</strong> bar. Remember that the filling must be green this time. Alternatively, you can just copy and paste the <strong class="screenText">PlayerHealth</strong> container, but I recommend you repeat the steps for learning purposes.</li>
    </ol>
    <p class="normal">In previous steps, we basically saw how to compose several UI elements to create a complex object. We needed a parent container element to drive the size of our children so that the inner elements adapt to it, especially the filling, which requires a percentage value to represent the current player’s health.</p>
    <p class="normal">Now, we have our life bar! Well, not quite yet; those red corners from the filling that our border doesn’t cover are pretty rough! We will improve that later in this chapter when discussing how to make our UI responsive, so for now, let’s keep it as is.</p>
    <p class="normal">Finally, let’s add text elements<a id="_idIndexMarker1103"/> to the UI. But first, we will need to think about fonts. If you download a TTF font, you will need to create a font asset, as we did in <em class="chapterRef">Chapter 15</em>, <em class="italic">Interface Brilliance: Designing a User-Friendly UI</em>, for it to be used in UI Toolkit. However, with the current release of UI Toolkit, the font asset we created in the last chapter is not compatible. </p>
    <p class="normal">We will need to create a font asset using the UI Toolkit Font Asset Creator instead of the TextMesh Pro one. The reason behind the existence of duplicated tools is that Unity is integrating the Text Mesh Pro package<a id="_idIndexMarker1104"/> into a new, improved one called TextCore, one of those improvements being compatibility with UI Toolkit and other Unity systems.</p>
    <p class="normal">Considering this, in order to convert the TTF to a font asset compatible with UI Toolkit, you can just right-click the TTF asset in the <strong class="screenText">Project</strong> panel and select <strong class="screenText">Create</strong> |<strong class="screenText"> Text</strong> | <strong class="screenText">Font Asset</strong>. This will create a new asset that will be the one we will use to define the font of our UI Toolkit text.</p>
    <p class="normal">Having solved this, let’s create the UI element for text, that is, <strong class="screenText">Label</strong>:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Drag the <strong class="screenText">Label</strong> icon from the <strong class="screenText">Library</strong> pane of the UI Builder window to its <strong class="screenText">Hierarchy</strong> panel. This will add a UI element capable of rendering not only an image in its background but also text (yes, you can add a background to the text if you want to).</li>
      <li class="numberedList">As usual, set its <strong class="screenText">Position</strong> and <strong class="screenText">Size</strong>, this time putting it in the top-right corner of the screen. Remember, you can simply drag the element; you don’t need to set the specific coordinates by hand (although you can if you want to).</li>
      <li class="numberedList">Change the <strong class="screenText">Text</strong> property in the <strong class="screenText">Label</strong> section of the <strong class="screenText">Inspector</strong> to the needed text; in our case, this will be <code class="inlineCode">Score: 0</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_18.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.18: Setting the text to display</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="4">Drag the <strong class="screenText">Font</strong> asset created just before these steps to the <strong class="screenText">Font Asset</strong> property in the <strong class="screenText">Text</strong> section of the <strong class="screenText">Inspector</strong>. Don’t confuse it with the <strong class="screenText">Font</strong> property (the one above <strong class="screenText">Font Asset</strong>). That one allows you to drag TTF assets directly, but that will be deprecated soon, so let’s stick with the Unity-recommended approach.</li>
      <li class="numberedList">If you notice that your <strong class="screenText">Font</strong> asset doesn’t work, try putting it in the <strong class="screenText">UI Toolkit</strong> |<strong class="screenText"> Resources</strong> |<strong class="screenText"> Fonts &amp; Materials</strong> folder in the <strong class="screenText">Project</strong> panel. While this shouldn’t be necessary in the latest Unity versions, I’ve noticed that this has solved these sorts of issues in the past. Also, there’s a bug that makes the font not recognized sometimes, which can be fixed by deleting and recreating the <strong class="screenText">Label</strong>.</li>
      <li class="numberedList">Set the <strong class="screenText">Size</strong> property of the <strong class="screenText">Text</strong> section to any size that seems appropriate:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_19.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.19: Setting the Text Font and Size of a label</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="7">Repeat <em class="italic">steps</em> <em class="italic">1 </em>to<em class="italic"> 6</em> to add all the remaining <strong class="screenText">labels</strong> to the UI.</li>
      <li class="numberedList">One last thing we need to do is save, which can be simply done by pressing <em class="keystroke">Ctrl</em><em class="italic"> + </em><em class="keystroke">S</em> (<em class="keystroke">Command</em><em class="italic"> + </em><em class="keystroke">S</em> on a Mac) or using the <strong class="screenText">File</strong> |<strong class="screenText"> Save</strong> menu in the top-left part of the <strong class="screenText">Viewport</strong> section in the <strong class="screenText">UI Builder </strong>window. Note that previous versions of UI Toolkit had a bug where this could make the viewport corrupt. Please close it and reopen UI Builder again if this happens.</li>
    </ol>
    <p class="normal">Now that we have created our UI, you probably <a id="_idIndexMarker1105"/>noticed the need to repeat several settings to make several objects look the same, like our health bars and labels. While this is perfectly viable, we could improve our workflow greatly by reusing styles, and <strong class="screenText">Stylesheets</strong> are the exact feature we need to accomplish that, so let’s see them.</p>
    <h2 id="_idParaDest-223" class="heading-2">Creating UI Stylesheets</h2>
    <p class="normal"> Imagine you’re designing various game<a id="_idIndexMarker1106"/> elements, like buttons and menus, that all share a common look – the same background, font, size, and borders. This is a common scenario in UI design, where consistency is key. When creating the UI with uGUI, one way to avoid repeat configurations for each element would be to create a Prefab for the button and create instances (and Prefab variants where necessary). Unlike uGUI, UI Toolkit doesn’t use GameObjects, so we can’t rely on Prefabs for styling. But no worries, we have a powerful alternative: <strong class="keyWord">Stylesheets</strong>.</p>
    <p class="normal"><strong class="keyWord">Stylesheets</strong> are separate assets that contain<a id="_idIndexMarker1107"/> a series of styling presets for our UI elements. We can define a set of styles (for example, background, borders, font, size, etc.) and apply those to several elements across different UI elements. This way, if we change a style in a Stylesheet asset, all UI elements using that style will change in a similar way to how materials work.</p>
    <p class="normal">There are several ways to create styles in a Stylesheet. The selector system in Stylesheets works a bit like filters – you set rules to decide which UI elements get certain styles, much like CSS in web design. A class is basically a style we can apply to any element via its name. For example, we can create a class called <code class="inlineCode">Button</code> and add that class to every button in the UI that we want to have that style. Please note that, here, the concept of class doesn’t refer to a programming class. A class is a way to label UI elements that must have specific styling.</p>
    <div class="packt_tip">
      <p class="normal">For advanced tips<a id="_idIndexMarker1108"/> on USS, please check out this link: <a href="https://docs.unity3d.com/2023.1/Documentation/Manual/UIE-USS.html"><span class="url">https://docs.unity3d.com/2023.1/Documentation/Manual/UIE-USS.html</span></a></p>
    </div>
    <p class="normal">So, in this case, let’s create a class for all the labels in our UI so that the appearance of all of them can be modified by simply changing the style:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">In the <strong class="screenText">StyleSheets</strong> panel of <strong class="screenText">UI Builder</strong>, click Add (<strong class="screenText">+</strong>) button and click <strong class="screenText">Create New USS</strong> (Unity StyleSheet). If that doesn’t work, try restarting Unity; there’s a bug in the current version of UI Toolkit that could cause this:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_20_PE.png" alt="A screenshot of a computer  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 16.20: Creating a Unity StyleSheet</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="2">Name the USS as you like (<code class="inlineCode">GameUSS</code> in my case) and save the file.</li>
      <li class="numberedList">Select one of the label elements<a id="_idIndexMarker1109"/> we have in our UI Document and look at the <strong class="screenText">Inspector</strong>.</li>
      <li class="numberedList">In the <strong class="screenText">StyleSheet</strong> pane of the <strong class="screenText">Inspector</strong>, type <code class="inlineCode">HUDText</code> in the<strong class="screenText"> Style Class List</strong> input field, but don’t press <em class="keystroke">Enter</em> yet.</li>
      <li class="numberedList">Click the <strong class="screenText">Extract Inlined Styles to New Class</strong> button. This will take all the style modifications we applied to our label (position, size, font, etc.) and save them into a new style class called <code class="inlineCode">HUDText</code>. You can observe that it was added to the list of classes applied to the element (those labels at the bottom of the <strong class="screenText">StyleSheet</strong> section in the <strong class="screenText">Inspector</strong>):</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_21_PE.png" alt="A screenshot of a computer  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 16.21: Extracting settings into a style class</p>
    <p class="normal">With these steps, we have taken a label with the style we need to apply to others and extracted it into a class named <strong class="screenText">HUDText</strong>. This way, we can simply add the <strong class="screenText">HUDText</strong> class to other elements in our UI, and we can even add the same USS asset to other UI Documents (click the <strong class="screenText">+ </strong>button on the<strong class="screenText"> StyleSheets</strong> pane | <strong class="screenText">Add Existing USS</strong>) to add this class to the elements in it.</p>
    <p class="normal">Also, if you select the label again, you will notice how properties that previously were in bold have now become normal again; that’s because properties in bold represent changed properties, and we have extracted them, so the default values<a id="_idIndexMarker1110"/> became whatever the style classes define. Luckily, not everything is extracted to the new USS class; for example, the <strong class="screenText">Text</strong> field still has our specific desired text, as it is highly unlikely you would want to put the same text in other objects.</p>
    <figure class="mediaobject"><img src="../Images/B21361_16_22_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.22: The Text property is bold, indicating it is different from the default values. On the other hand, Enable Rich Text is not bold, meaning it follows the default values and the class’s ones</p>
    <p class="normal">If you miss a style detail while extracting the class, don’t worry. You can easily adjust it afterward by selecting the class in the <strong class="keyWord">StyleSheets</strong> section and making your edits. Then, select the <strong class="keyWord">HUDText</strong> class in the list. If you don’t see it, try expanding the <strong class="keyWord">GameUSS.uss</strong> section.</p>
    <p class="normal">Once selected, you can change it in the <strong class="screenText">Inspector</strong> panel, similar to when we change the properties of a UI element:</p>
    <figure class="mediaobject"><img src="../Images/B21361_16_23_PE.png" alt="A screenshot of a computer program  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 16.23: Selecting a style class for modification</p>
    <p class="normal">This way, we have edited our <code class="inlineCode">HUDText</code> class. If other elements had this class applied, they would also have these changes applied. Consider that another option would be to create the class first, typing the name in the <strong class="screenText">StyleSheets</strong> input field, pressing <em class="italic">Enter</em>, and then applying it to UI elements. This way, you will avoid needing to revert to unwanted changes, but if you created the element first, it’s convenient to have the option to revert:</p>
    <figure class="mediaobject"><img src="../Images/B21361_16_24_PE.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 16.24: Creating a style class from scratch</p>
    <p class="normal">Now that we have our style class, let’s apply it to other elements by doing the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Select another label of our UI.</li>
      <li class="numberedList">Drag the <strong class="screenText">HUDText</strong> style from the <strong class="screenText">Stylesheet</strong> pane at the top-left part<a id="_idIndexMarker1111"/> of the UI Builder window all the way to our element in the viewport. You can also drag it to the <strong class="screenText">Hierarchy</strong> element if you prefer:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_25_PE.png" alt="A screen shot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 16.25: Applying a class to an element</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="3">Select the <strong class="screenText">Label</strong>, and check how the <strong class="screenText">HUDText</strong> class has been added to the <strong class="screenText">StyleSheet</strong> section of the <strong class="screenText">Inspector</strong>.</li>
    </ol>
    <p class="normal">Now, note that even if the element now has the class applied, the element itself has the changes to the text we made in the previous steps, overriding the style in our class. You can easily check this by selecting the class again (in the <strong class="screenText">StyleSheets</strong> section at the top-left part of the <strong class="screenText">UI Builder</strong> window), changing any setting, like the size, and seeing how not all the elements have changed. This shows how the override system works; the changes on the element take precedence over the ones in the classes it has applied.</p>
    <p class="normal">If you want to remove these overrides, you can simply select the element (not the class), right-click on the overridden properties, and unset the changes by right-clicking and then selecting<strong class="screenText"> Unset</strong>. In the case of our label, we can unset the entire <strong class="screenText">Text</strong> section and probably the <strong class="screenText">Absolute</strong> position (as the desired values are already contained in the class).</p>
    <figure class="mediaobject"><img src="../Images/B21361_16_26.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.26: Reverting an override to use the default values of the classes applied to the element</p>
    <p class="normal">So, with these steps, we created a new <strong class="screenText">StyleSheet</strong> asset and added it to the UI Document for it to use. We have created a new style class in it, extracting the changes of an existing UI element from it, and then adjusted which changes we wanted to keep. Finally, we applied that style to another element. With this, we just scratched the surface of the real power of StyleSheets. We can start doing things like combining different classes from different StyleSheets or using selectors to dynamically set styles, but that’s outside the scope of this chapter.</p>
    <p class="normal">While UI Toolkit’s documentation is still evolving, you can get a jump start on these advanced concepts by delving into CSS literature. The fundamentals and best practices of CSS offer valuable insights applicable to UI Toolkit. It won’t be exactly the same, but the basic idea and best practices still apply.</p>
    <p class="normal">Now, the UI looks almost exactly the same as<a id="_idIndexMarker1112"/> it does in <em class="chapterRef">Chapter 15</em>, <em class="italic">Interface Brilliance: Designing a User-Friendly UI</em>, but it won’t behave in the same way. If you try changing the size of the viewport (by selecting <strong class="screenText">GameHUD.uxml</strong> in the Hierarchy and changing <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> as we did at the beginning of the chapter), you will see that the UI won’t adapt properly, so let’s fix this.</p>
    <h1 id="_idParaDest-224" class="heading-1">Making a responsive UI</h1>
    <p class="normal">In this section, we are going<a id="_idIndexMarker1113"/> to learn how to make the UI we created previously adapt to different screen sizes. We are going to discuss the following concepts:</p>
    <ul>
      <li class="bulletList">Dynamic positioning and sizing</li>
      <li class="bulletList">Dynamic scaling</li>
      <li class="bulletList">Using relative positions</li>
    </ul>
    <p class="normal">Let’s start by discussing how we can make the position and size of our objects adapt to the screen size.</p>
    <h2 id="_idParaDest-225" class="heading-2">Dynamic positioning and sizing</h2>
    <p class="normal">So far, we have used<a id="_idIndexMarker1114"/> the <strong class="screenText">Left</strong> and <strong class="screenText">Top</strong> position<a id="_idIndexMarker1115"/> attributes in order<a id="_idIndexMarker1116"/> to specify<a id="_idIndexMarker1117"/> the <em class="italic">x</em> and <em class="italic">y</em> positions of our elements, with respect to the top-left corner of the screen, and then <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> to define the size. While, essentially, that’s all that’s needed to define an object’s position and size, it is not very useful in all cases, especially when we need to adapt to different screen sizes.</p>
    <p class="normal">For example, if you need to place an object in the top-right corner of the screen, knowing its size is <code class="inlineCode">100x100</code> pixels and the screen size is <code class="inlineCode">1920x1080</code> pixels, we can put the <strong class="screenText">Left</strong> and <strong class="screenText">Right</strong> position attributes as <code class="inlineCode">1820x980</code> pixels, and this will work, but only for that specific resolution.</p>
    <p class="normal">So, what happens if the user runs the game at <code class="inlineCode">1280x720</code> pixels? The object will be outside the screen. In uGUI, we used anchors to solve this issue, but we don’t have them here. Luckily, we have <strong class="screenText">Right</strong> and <strong class="screenText">Bottom</strong> to help.</p>
    <p class="normal">Like the <strong class="screenText">Left</strong> and <strong class="screenText">Top</strong> attributes, <strong class="screenText">Right</strong> and <strong class="screenText">Bottom</strong> define distances from the parent element’s sides (if there is no parent, then just from the entire screen). Right now, we have both set to <strong class="screenText">auto</strong>, meaning that the position will be driven by <strong class="screenText">Left</strong> and <strong class="screenText">Right</strong> exclusively, but interesting things can happen by changing those<a id="_idIndexMarker1118"/> values, so let’s use<a id="_idIndexMarker1119"/> them to make our <strong class="screenText">Score</strong> and <strong class="screenText">Bullet</strong> labels stick to the top-right corner<a id="_idIndexMarker1120"/> of the screen instead <a id="_idIndexMarker1121"/>by doing <a id="_idIndexMarker1122"/>the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Put the cursor in the bottom part of the UI in the viewport until a white bar appears.</li>
      <li class="numberedList">Drag that bar to resize the screen, and see how our UI adapts (or not) to the different size.</li>
      <li class="numberedList">Do the same on the laterals to also see how it adapts to different screen widths:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_27.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.27: UI not adapting to different screen sizes</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="4">Select the score label on the viewport and look at the <strong class="screenText">Inspector</strong>.</li>
      <li class="numberedList">Set the <strong class="screenText">Top</strong> and <strong class="screenText">Right</strong> values in the <strong class="screenText">Position</strong> section to <code class="inlineCode">30</code>.</li>
      <li class="numberedList">Set the <strong class="screenText">Left</strong> and <strong class="screenText">Bottom</strong> values to <strong class="screenText">auto</strong> by clicking the <strong class="screenText">px</strong> button at the right of each attribute and selecting <strong class="screenText">auto</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_28.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.28: Changing the unit type of the Position attributes to auto mode</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="7">Notice the <strong class="screenText">Right</strong> and <strong class="screenText">Top</strong><strong class="screenText"><a id="_idIndexMarker1123"/></strong> golden-colored squares at the sides of the label became<a id="_idIndexMarker1124"/> filled, while the <strong class="screenText">Left</strong> and <strong class="screenText">Bottom</strong> squares are hollow. This means<a id="_idIndexMarker1125"/> that the <strong class="screenText">Left</strong> and <strong class="screenText">Bottom</strong> squares are in <strong class="screenText">auto</strong> mode. You can also<a id="_idIndexMarker1126"/> toggle <strong class="screenText">auto</strong> mode by clicking those boxes if needed:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_29.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.29: Toggling auto mode of our element position attributes</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="8">Try changing the size of the UI container again, as we did in <em class="italic">steps</em> <em class="italic">1</em> and <em class="italic">2</em>, to see how our <strong class="screenText">Score</strong> label is always aligned to the top-right corner.</li>
      <li class="numberedList">Repeat <em class="italic">steps</em> <em class="italic">4</em> to <em class="italic">6</em> for the <strong class="screenText">Bullets</strong> label, this time setting the <strong class="screenText">Top</strong> property to <code class="inlineCode">140</code>.</li>
    </ol>
    <p class="normal">What we did with these steps was essentially make the position of the object expressed as a distance in pixels against the <strong class="screenText">Top</strong> and <strong class="screenText">Right</strong> sides of the UI or the top-right corner of the screen. We needed to set the other sides to <strong class="screenText">auto</strong> mode so that they wouldn’t participate in the position calculations.</p>
    <p class="normal">Now, we can use the <strong class="screenText">Position</strong> attributes in other ways as well. As you might imagine by now, we can start combining <strong class="screenText">Left</strong> and <strong class="screenText">Right</strong> and <strong class="screenText">Top</strong> and <strong class="screenText">Bottom</strong> if we wish. In such cases, <strong class="screenText">Left</strong> and <strong class="screenText">Top</strong> will take precedence in defining the position, but then, what do <strong class="screenText">Right</strong> and <strong class="screenText">Bottom</strong> do? They define the size of the element.</p>
    <p class="normal">For example, if we have an element with <strong class="screenText">Left</strong> and <strong class="screenText">Right</strong> attributes set to <code class="inlineCode">100px</code> each and we see our UI on a screen with a width of <code class="inlineCode">1920</code> pixels, the final width of our element will be <code class="inlineCode">1720</code> (<code class="inlineCode">1920</code> minus <code class="inlineCode">100</code> from <strong class="screenText">Left</strong> and minus <code class="inlineCode">100</code> from <strong class="screenText">Right</strong>). This way, the <strong class="screenText">Position</strong> attributes represent the distances of the sides of our element from the sides of the screen (or the parent element).</p>
    <p class="normal">Let’s see this in action by making the bottom health bar adapt to the screen width while preserving its position relative to the bottom of the screen by doing the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Select the bottom health bar parent in the <strong class="screenText">Hierarchy</strong>. Don’t select it in the viewport, as you will only be selecting its filling or border.</li>
      <li class="numberedList">Set <strong class="screenText">Left</strong>, <strong class="screenText">Right</strong>, and <strong class="screenText">Bottom</strong> to <code class="inlineCode">50px</code>.</li>
      <li class="numberedList">Set <strong class="screenText">Top</strong> to <strong class="screenText">auto</strong> (click on the <strong class="screenText">px</strong> button at the right and select <strong class="screenText">auto</strong>).</li>
      <li class="numberedList">In the <strong class="screenText">Size</strong> section, set <strong class="screenText">Width</strong> to <strong class="screenText">auto</strong> also.</li>
      <li class="numberedList">Set <strong class="screenText">Height</strong> to <code class="inlineCode">35px</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_30.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.30: Making the player’s base health bar adapt to the screen width</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="6">Change the size of the UI to see how it adapts.</li>
    </ol>
    <p class="normal">With these steps, we defined<a id="_idIndexMarker1127"/> the bar distance from the sides of the screen as <code class="inlineCode">50</code> pixels<a id="_idIndexMarker1128"/> for it to adapt to any screen width while keeping<a id="_idIndexMarker1129"/> the distance from<a id="_idIndexMarker1130"/> the border and height fixed. We basically achieved the same behavior as split anchors in uGUI! Note that we needed to set <strong class="screenText">Size</strong> <strong class="screenText">Width</strong> attributes to <strong class="screenText">auto</strong> to let the <strong class="screenText">Left</strong> and <strong class="screenText">Right</strong> attributes drive the position; if you don’t do that, the <strong class="screenText">Width</strong> attributes take precedence, and <strong class="screenText">Right</strong> won’t have any effect. I invite you to experiment with other combinations of <strong class="screenText">px</strong>/<strong class="screenText">auto</strong>.</p>
    <p class="normal">One last trick we can do here is to use negative values in the <strong class="screenText">Left</strong>, <strong class="screenText">Top</strong>, <strong class="screenText">Right</strong>, and <strong class="screenText">Bottom</strong> <strong class="screenText">Position</strong> attributes of the health bar borders to make the borders slightly bigger than the container and cover the filling borders. Just set <strong class="screenText">Left</strong>, <strong class="screenText">Top</strong>, <strong class="screenText">Right</strong>, and <strong class="screenText">Bottom</strong> to <code class="inlineCode">-15px</code> in this case, and remember to set both the <strong class="screenText">Size</strong> <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> attributes to <strong class="screenText">auto</strong>. You might want to reduce the height of the bar container (not the border) a little bit, as now it will look thicker due to this change:</p>
    <figure class="mediaobject"><img src="../Images/B21361_16_31.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.31: Using negative Position attributes to cover the filling</p>
    <p class="normal">Another mode aside from <strong class="screenText">px</strong> (pixels) or <strong class="screenText">auto</strong> mode is the percentual (<strong class="screenText">%</strong>) mode, which allows us to represent values as percentages relative to the screen (or parent element if present) size. For example, if we set <strong class="screenText">Top</strong> and <strong class="screenText">Bottom</strong> to <code class="inlineCode">25%</code>, this means that our element will be vertically centered with a size of 50% of the screen height (remember to set <strong class="screenText">Height</strong> to <strong class="screenText">auto</strong> here). We could achieve the same result if we set <strong class="screenText">Top</strong> to <code class="inlineCode">25%</code>, <strong class="screenText">Bottom</strong> to <strong class="screenText">Auto</strong>, and <strong class="screenText">Height</strong> to <code class="inlineCode">50%</code>; as you can see, we can achieve a clever combination of those values.</p>
    <p class="normal">In our case, we will use percentual values in our <strong class="screenText">Life Bar</strong> fillings so that we can express their size in percentages. We need this so, later in the code, we can specify the width of the bar as a percentage of the player’s life (for example, a player with <code class="inlineCode">25</code> life points and a max of <code class="inlineCode">100</code> points has <code class="inlineCode">25%</code> life).</p>
    <p class="normal">Now, while we solved adapting<a id="_idIndexMarker1131"/> positioning to the screen size with the usage<a id="_idIndexMarker1132"/> of the <strong class="screenText">Left</strong>, <strong class="screenText">Top</strong>, <strong class="screenText">Right</strong>, and <strong class="screenText">Bottom</strong> properties, we still<a id="_idIndexMarker1133"/> didn’t solve the<a id="_idIndexMarker1134"/> dynamic sizing of the elements. With sizing this time, we refer to screens with a different number of <strong class="screenText">DPI</strong> (<strong class="screenText">dots per inch</strong>), so let’s discuss how we can achieve that with the <strong class="screenText">Panel Settings</strong> asset.</p>
    <h2 id="_idParaDest-226" class="heading-2">Dynamic scaling</h2>
    <p class="normal">We used <code class="inlineCode">1920x1080</code> as the UI base resolution<a id="_idIndexMarker1135"/> to position and size our elements so that they look<a id="_idIndexMarker1136"/> nice in that resolution. While resizing the UI helped us understand how elements adapt their position, you might have observed a notable change in the size of the elements, appearing larger or smaller. This is an important aspect to consider in dynamic UI scaling.</p>
    <p class="normal">While having a base reference resolution is good for designing our UI, we should consider the sizing of elements on different resolutions, especially on screens with high DPI. Sometimes, you can have screens with higher resolution but the same physical size in centimeters. </p>
    <p class="normal">This means pixels are smaller in the ones with higher resolution; hence, they have a larger DPI, so elements can seem smaller if not scaled properly.</p>
    <p class="normal">Scaling in UI design ensures that your interface looks great on any screen size. Previously, in traditional Unity UI, we relied on the Canvas Scaler for this. Now, in UI Toolkit, we use a similar approach but through the <strong class="screenText">Panel Settings</strong> asset. Let’s see how this is configured to maintain consistent UI elements across different resolutions:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Look for the <strong class="screenText">Panel Settings</strong> asset in the <strong class="screenText">Project</strong> panel and select it. Another option would be to select the <code class="inlineCode">UI Document</code> GameObject in the Main Editor Hierarchy and click the asset referenced in the <strong class="screenText">Panel Settings</strong> property:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_32_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.32: Panel Settings being referenced in the UI Document component</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="2">Set <strong class="screenText">Scale Mode</strong> to<a id="_idIndexMarker1137"/> <strong class="screenText">Scale With Screen Size</strong>.</li>
      <li class="numberedList">Set <strong class="screenText">Screen Match Mode</strong> to <strong class="screenText">Match</strong><strong class="screenText"><a id="_idIndexMarker1138"/></strong><strong class="screenText"> Width Or Height</strong>.</li>
      <li class="numberedList">Set the <strong class="screenText">Reference Resolution X</strong> value to <code class="inlineCode">1920</code> and the <strong class="screenText">Y</strong> value to <code class="inlineCode">1080</code>.</li>
      <li class="numberedList">Move the <strong class="screenText">Match</strong> slider all the way to the right, toward the end labeled <strong class="screenText">Height</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_33.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.33: Setting the scaling of our UI</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="6">Observe how changing the height of the <strong class="screenText">Game</strong> panel of the Unity Editor will make the UI adapt its element sizes accordingly (i.e., change the whole Unity Editor window height).</li>
    </ol>
    <p class="normal">What we did with those changes<a id="_idIndexMarker1139"/> was first set <strong class="keyWord">Reference Resolution</strong> to whatever resolution we designed our UI for – in our case, <code class="inlineCode">1920x1080</code>. Then, we set <strong class="keyWord">Screen Match Mode</strong> to allow us to scale our elements according to one of the sides, <strong class="keyWord">Width</strong>, <strong class="keyWord">Height</strong>, or a combination of the two if we prefer. We’re focusing on <strong class="screenText">Height</strong> for scaling, as PCs typically have wider screens. This choice ensures that our UI elements maintain their visual consistency across various screen heights. This means that on different screen widths, the elements will look the same size, but on different heights, the elements will be bigger or smaller.</p>
    <p class="normal">With these settings, we can do some math to understand the values. If our screen is the same as the reference resolution (<code class="inlineCode">1920x1080</code>), the element sizes will be the same as we specified in the size of our elements in pixels, so for the case of our player avatar, it will be <code class="inlineCode">150x150</code> pixels. Remember that the physical size in centimeters depends on the DPI of the screen.</p>
    <p class="normal">With this understanding of how UI elements scale on a 4K screen, let’s put this knowledge into practice. We’ll now adjust our UI settings to effectively accommodate such high-resolution displays. Follow along with these steps to see how our UI elements respond and adapt to a 4K resolution setup.</p>
    <p class="normal">Now, imagine that we have a 4K screen, meaning a resolution of <code class="inlineCode">3840x2160</code>. As we specified that our UI matches via <strong class="screenText">Height</strong>, we can determine that our elements will double in size because our screen has a height that is double the reference resolution (<code class="inlineCode">2160</code> divided by <code class="inlineCode">1080</code>). Our player avatar, at <code class="inlineCode">300x300</code> pixels, will maintain its physical size on a 4K screen; this is achieved by the screen’s double size coupled with its double pixel density. Finally, consider an ultra-wide standard resolution of <code class="inlineCode">2560×1080</code> (yes, very wide screens), in which case the elements will be the same size, as the only change is the width; the only difference is that the elements will have more horizontal separation due to the screen size. I know these calculations can be confusing, but keep experimenting with the values of the <strong class="screenText">Panel Settings</strong> and <strong class="screenText">Game </strong>view sizes to understand them better.</p>
    <p class="normal">Great, now we really have the same HUD. We could start applying the concepts seen so far to the <strong class="screenText">Options</strong> menu, but let’s take the opportunity<a id="_idIndexMarker1140"/> to do it in a different way, using <strong class="screenText">relative</strong> <strong class="screenText">positions</strong>, a way to create<a id="_idIndexMarker1141"/> a flow of elements where the elements’ positions depend on each other.</p>
    <h2 id="_idParaDest-227" class="heading-2">Using relative positions</h2>
    <p class="normal">In the HUD of our game, each element<a id="_idIndexMarker1142"/> requires its own <strong class="screenText">Position</strong> and <strong class="screenText">Size</strong>, and the different<a id="_idIndexMarker1143"/> elements’ positions can be resized and repositioned without affecting others. We might observe the case of the player health bar and the avatar, but the changes would be trivial in this case. There are other cases where this is not that trivial, as in the case of a list of elements (for example, a list of matches to join in a multiplayer game) that needs to adapt vertically or horizontally, and here is where relative positions help us.</p>
    <p class="normal">Relative positions allow us to make the positions of the elements relative to each other; in a way, the position of one element will depend on the position of the previous one, and that one to its previous, and so on, forming a chain or <strong class="screenText">flow</strong>. This works like vertical and horizontal layouts on uGUI. In our case, we will make the <strong class="screenText">Pause</strong> label and the <strong class="screenText">Options</strong> and <strong class="screenText">Exit</strong> buttons of our options menu vertically aligned and centered along their parent using those.</p>
    <p class="normal">Let’s start creating the menu by doing the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">Create a new UI Document (click the <strong class="screenText">+</strong> button after going to<strong class="screenText"> Project View</strong> |<strong class="screenText"> UI Toolkit</strong> | <strong class="screenText">UI Document</strong>) and call it <code class="inlineCode">OptionsMenu</code>. We can work on the previous UI Document, but let’s keep those pieces of UI separated for easy activation and deactivation as well as general asset organization.</li>
      <li class="numberedList">Double-click the asset to set it as the current UI being edited by the <strong class="screenText">UI Builder</strong>.</li>
      <li class="numberedList">Select the root object (<strong class="screenText">OptionsMenu.uxml</strong> in the <strong class="screenText">Hierarchy</strong>) and set the <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> <strong class="screenText">Inspector</strong> properties to <code class="inlineCode">1920x1080</code> pixels.</li>
      <li class="numberedList">Create a new GameObject with the <strong class="screenText">UI Document</strong> component (<strong class="screenText">GameObject</strong> |<strong class="screenText"> UI Toolkit</strong> | <strong class="screenText">UI Document</strong>) and drag the asset for this object to render it (as we did with the HUD created earlier in the chapter).</li>
      <li class="numberedList">Double-click the <strong class="screenText">UI Document</strong> asset to open the <strong class="screenText">UI Builder</strong> window to edit it, and in that window, drag a new <strong class="screenText">VisualElement</strong> to the <strong class="screenText">Hierarchy</strong> or viewport and call it <code class="inlineCode">Container</code> (the <strong class="screenText">Name</strong> property in the <strong class="screenText">Inspector</strong> in <strong class="screenText">UI Builder</strong>).</li>
      <li class="numberedList">Set the <strong class="screenText">Left</strong>, <strong class="screenText">Right</strong>, <strong class="screenText">Top</strong>, and <strong class="screenText">Right</strong> <strong class="screenText">Position</strong> attributes to <code class="inlineCode">0px</code>.</li>
      <li class="numberedList">Set <strong class="screenText">Position</strong> to <strong class="screenText">Absolute</strong>.</li>
      <li class="numberedList">Set <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> in the <strong class="screenText">Size</strong> section to <strong class="screenText">auto</strong>. This will make the container fit the entire screen.</li>
      <li class="numberedList">Drag a new <strong class="screenText">VisualElement</strong> to be a child of the container and call it <code class="inlineCode">Background</code>.</li>
      <li class="numberedList">Leave <strong class="screenText">Position</strong> as <strong class="screenText">Relative</strong> this time.</li>
      <li class="numberedList">Set <strong class="screenText">Size</strong> <strong class="screenText">Width</strong> and <strong class="screenText">Height</strong> to <code class="inlineCode">500px</code>.</li>
      <li class="numberedList">Set <strong class="screenText">Background Image </strong>of the <strong class="screenText">Background</strong> object to use the same background sprite used in the previous chapter.</li>
      <li class="numberedList">Select the <strong class="screenText">Container</strong> parent object (not <strong class="screenText">Background</strong>).</li>
      <li class="numberedList">In the <strong class="screenText">Inspector</strong>, set the <strong class="screenText">Align Items</strong> property of the <strong class="screenText">Align</strong> section to <code class="inlineCode">center</code>, which is the third button. If you hover the mouse<a id="_idIndexMarker1144"/> over the icons, they will show their names<a id="_idIndexMarker1145"/> in a tooltip.</li>
      <li class="numberedList">Set <strong class="screenText">Justify Content</strong> to <strong class="screenText">Center</strong> (second button):</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_34.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.34: Preparing the UI background to host elements inside</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="16">Change the size of the UI using the white bars at the sides to see how the background is always centered.</li>
    </ol>
    <p class="normal">With just a single element in place, this is a great chance to observe how relative positioning functions in a practical setting. First, we created an empty object that will always adapt to the screen size, allowing us to make the children’s elements depend on the full-screen size. Then, we created an image element with a fixed size but with a relative position, meaning its position will be calculated by the parent container. Finally, we told the container to make its child objects aligned to its horizontal and vertical center, so the background immediately became centered, regardless of the screen size. When working with absolute positions, the <strong class="screenText">Align</strong> properties didn’t work, so this is one of the first benefits of relative<strong class="keyWord"> </strong>positioning.</p>
    <p class="normal">But relative positioning becomes more powerful with multiple elements, so let’s add the <strong class="screenText">Label</strong> and buttons to our <strong class="screenText">Background</strong> element to explore this concept further by doing the following:</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="1">From the <strong class="screenText">Library</strong> pane at the bottom left of <strong class="keyWord">UI Builder</strong>, drag a <strong class="screenText">Label</strong> and two <strong class="screenText">Button</strong> elements inside <strong class="screenText">Background</strong> in <strong class="screenText">Hierarchy</strong>. Note that there’s a bug where, sometimes, even if you drag and drop a new element inside the desired object, it won’t be its child. Just drag the one created in the Hierarchy this time:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_35_PE.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.35: Adding elements inside the menu background</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="2">Observe how, by default, the elements<a id="_idIndexMarker1146"/> became vertically aligned, one on top<a id="_idIndexMarker1147"/> of the other, due to the relative position’s default settings:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_36_PE.png" alt="A close-up of a button  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 16.36: Automatic relative vertical positioning</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="3">Select the <strong class="screenText">Background</strong> element and set <strong class="screenText">Justify Content</strong> to <code class="inlineCode">space-around</code> (the fifth button). This will spread the elements along the background.</li>
      <li class="numberedList">Set <strong class="screenText">Align Items</strong> to center (the third option) to center elements horizontally:
    <figure class="mediaobject"><img src="../Images/B21361_16_37_PE.png" alt="A screenshot of a computer screen  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 16.37: Automatic relative vertical positioning</p>
    <p class="normal">There is a similar<a id="_idIndexMarker1148"/> mode for<strong class="keyWord"> Justify Content</strong> called space-between (the fourth button in <strong class="screenText">Justify Content</strong>) that will also spread the elements along the vertical axis, but it won’t leave space on top of the first<a id="_idIndexMarker1149"/> element or at the bottom of the last one. Also, <strong class="keyWord">Align Items</strong> has an option called <strong class="keyWord">Stretch</strong> (the fifth option) that, like <strong class="keyWord">center</strong>, will not only center elements horizontally but also stretch them instead of respecting each element’s width. I recommend experimenting<a id="_idIndexMarker1150"/> with the different aligning<a id="_idIndexMarker1151"/> modes to discover all opportunities.</p></li>
    </ol>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="5">Set the <strong class="screenText">Label</strong> <strong class="screenText">Text</strong>’s <strong class="screenText">Font</strong> and <strong class="screenText">Size</strong> attributes to whatever seems fit. In my case, I used the imported font and a size of <code class="inlineCode">60px</code>. Remember to also set <strong class="screenText">Text</strong> to <code class="inlineCode">Pause</code>.</li>
      <li class="numberedList">Set the <strong class="screenText">Button</strong> <strong class="screenText">Background Image</strong> to use the same as was used for the button in the last chapter.</li>
      <li class="numberedList">Set the <strong class="screenText">Color</strong> property of the <strong class="screenText">Background</strong> section to a color with no alpha. You can achieve this by clicking the color rectangle and reducing the <strong class="screenText">A</strong> channel in the color picker to <code class="inlineCode">0</code>. The idea of this color is to act as a background for our image, but we don’t need it, so we made it completely transparent.</li>
      <li class="numberedList">Set the Button <strong class="screenText">Text</strong> <strong class="screenText">Font</strong>, <strong class="screenText">Size</strong>, and <strong class="screenText">Color</strong> to whatever seems fit to you. In my case, I’m using <code class="inlineCode">50</code> and a gray color.</li>
      <li class="numberedList">In the <strong class="screenText">Margin and Padding</strong> section, set <strong class="screenText">Padding</strong> to have some spacing between the text and the borders of the button. In my case, <code class="inlineCode">30px</code> did the trick:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B21361_16_38.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.38: Adding inner padding to the button contents (the text in this case)</p>
    <ol style="list-style-type: decimal;" class="numberedList">
      <li class="numberedList" value="10">Also, set the <strong class="screenText">Top</strong> and <strong class="screenText">Bottom</strong> <strong class="screenText">Padding</strong> of <strong class="screenText">Background</strong> to allow some space between the borders of the window and its elements. In my case, it is <code class="inlineCode">40px</code> each.</li>
    </ol>
    <p class="normal">As you can see, we changed different <a id="_idIndexMarker1152"/>settings to set the size of the elements dynamically, like font <a id="_idIndexMarker1153"/>sizes and paddings, and the relative system, along with the align settings, took the role of determining the position of the elements automatically. We can rearrange the order of the elements by dragging them in the Hierarchy, and they will be accommodated automatically. We could have also set the size of the elements with the <strong class="screenText">Size</strong> property, and we can also apply some offsets if desired using the <strong class="screenText">Position</strong> properties, but I encourage you to see how these properties behave in <strong class="screenText">Relative</strong> mode on your own.</p>
    <p class="normal">One last setting I want you to explore is the <strong class="screenText">Direction</strong> attribute of the <strong class="screenText">Flex</strong> section, which, as you can imagine, will determine the orientation the elements will follow, vertically from top to bottom or bottom to top and horizontally from left to right or right to left. For example, you could set <strong class="screenText">Direction</strong> to distribute the elements from left to right using the <strong class="screenText">Row</strong> mode (the third button) and make the background wider to have a horizontal options menu if you wish.</p>
    <figure class="mediaobject"><img src="../Images/B21361_16_39.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 16.39: Changing to a vertical orientation of elements</p>
    <p class="normal">As a side note, you might have noticed that the images for the background and buttons will look bigger than the options menu created in the last chapter. That’s because the <strong class="screenText">Pixels per Unit</strong> setting that we changed on the <strong class="screenText">Texture</strong> assets to control the scaling of the textures won’t take effect in UI Toolkit; you will need to manually change the texture file size in any image editor to give it its proper size. The best practice here would be to always create the images with a size that will look fine in our maximum supported<a id="_idIndexMarker1154"/> resolution. Usually, this is <code class="inlineCode">1920x1080</code> on a PC, but note that 4K resolutions<a id="_idIndexMarker1155"/> are becoming more popular every day.</p>
    <h1 id="_idParaDest-228" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, we were introduced to the key concepts of UI Toolkit and how to create UI Documents and Stylesheets. Regarding UI Documents, we learned how to create different elements like images, text, and buttons and how to position and size them using different methods, like absolute and relative positioning and pixel or percentual units. Also, we saw how to make the UI adapt to different sizes using different combinations of <strong class="screenText">Position</strong> attributes. Finally, we learned how to use USS Stylesheets to share styles between different elements to easily manage our whole UI skinning.</p>
    <p class="normal">Essentially, we learned again how to make UIs with a different system. Again, please note that this system is still in the experimental phase and is not recommended for real production projects. We used all these concepts to recreate the same UI created in <em class="chapterRef">Chapter 15</em>, <em class="italic">Interface Brilliance: Designing a User-Friendly UI</em>.</p>
    <p class="normal">In the next chapter, we are going to see how to add animations to our game to make our characters move. We will also see how to create cut-scenes and dynamic cameras.</p>
  </div>
  <div id="_idContainer861">
    <h1 id="_idParaDest-229" class="heading-1">Learn more on Discord</h1>
    <p class="normal">Read this book alongside other users, Unity game development experts, and the author himself. Ask questions, provide solutions to other readers, chat with the author via Ask Me Anything sessions, and much more. Scan the QR code or visit the link to join the community:</p>
    <p class="normal"><a href="https://packt.link/unitydev"><span class="url">https://packt.link/unitydev</span></a></p>
    <p class="normal"><img src="../Images/QR_Code1498477041053909218.png" alt="" role="presentation"/></p>
  </div>
</body></html>