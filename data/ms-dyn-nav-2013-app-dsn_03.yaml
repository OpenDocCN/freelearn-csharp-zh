- en: Chapter 3. Financial Management
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3章 财务管理
- en: Whether you run a company, a non-profit organization, or an educational institute,
    doing proper bookkeeping is mandatory and required by the government.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你经营的是一家公司、非营利组织还是教育机构，进行适当的簿记是强制性的，也是政府要求的。
- en: This makes the financial management the most used part of Microsoft Dynamics
    NAV and the least obvious place to make changes, as federal regulations do not
    allow much creativity in this part of the application.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 这使得财务管理成为Microsoft Dynamics NAV最常用的部分，同时也是最不明显的地方进行更改，因为联邦法规不允许在这个应用程序的这一部分有太多的创造性。
- en: The first part of this chapter is all about the look, learn, and love principle
    that we discussed in the previous chapter. We cannot integrate our application
    with financial management without knowing the basic functionality and structure
    of the tool.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的第一部分主要讲述了我们在上一章中讨论的“看、学、爱”原则。如果我们不知道工具的基本功能和结构，就无法将我们的应用程序与财务管理集成。
- en: In the second part of the chapter, we will look at some examples of how to change
    or expand the way financial management works.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的第二部分，我们将探讨一些如何更改或扩展财务管理工作方式的示例。
- en: Lastly, we will look at how to create a posting in the general ledger from a
    newly designed posting routine.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将探讨如何从新设计的过账程序中在总账中创建过账。
- en: After reading this chapter, you should be able to set up financial management
    in a new database and create basic postings to the general ledger and understand
    how to integrate financial management with your application.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在阅读本章后，你应该能够在新数据库中设置财务管理，并创建基本过账到总账，并理解如何将财务管理与你的应用程序集成。
- en: Chart of accounts
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 会计科目表
- en: A **chart of accounts** (**COA**) is a list of the accounts used by an organization
    to define each class of items for which money or the equivalent is spent or received.
    It is used to organize the finances of the entity and to segregate expenditures,
    revenue, assets, and liabilities in order to give interested parties a better
    understanding of the financial health of the entity.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '**会计科目表**（**COA**）是一个组织使用的账户列表，用于定义每一类支出或收到的资金或等价物。它用于组织实体的财务，并分离支出、收入、资产和负债，以便让相关方更好地了解实体的财务状况。'
- en: Every financial system starts with a COA and although the numbering might differ
    from country to country, we all have income statements and balance accounts.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 每个财务系统都以会计科目表（COA）开始，尽管不同国家的编号可能不同，但我们都有损益表和资产负债表。
- en: '![Chart of accounts](img/0365EN_03_01.jpg)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![会计科目表](img/0365EN_03_01.jpg)'
- en: 'Microsoft Dynamics NAV also has some other special accounts: **Heading**, **Begin-Total**,
    and **End-Total** accounts.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV还有一些其他特殊的科目：**标题**、**开始总计**和**结束总计**科目。
- en: With these accounts, you can make the COA more readable. The accounts within
    the total accounts are automatically indented.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些账户，你可以使会计科目表更易于阅读。总账科目内的账户会自动缩进。
- en: Posting accounts
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 过账科目
- en: When creating a new posting account, there are several options to choose. Most
    of them are not mandatory but they make it easier to push the end users to using
    the correct account while generating entries.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建新的过账科目时，有几个选项可以选择。大多数选项不是强制性的，但它们使得在生成条目时更容易推动最终用户使用正确的账户。
- en: 'Let''s have a look at the options by opening a **G/L Account Card**:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过打开**总账科目卡**来查看选项：
- en: '![Posting accounts](img/0365EN_03_02.jpg)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![过账科目](img/0365EN_03_02.jpg)'
- en: The first and most important decision to make is the type of account to be created.
    It can be either **Income Statement** or **Balance Sheet**. Income statement accounts
    are reset to zero every new fiscal year, while balance sheet accounts continue
    indefinitely. The total of the balance sheet accounts should always match the
    total of the income statement accounts.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 需要做的第一个也是最重要的决定是创建的账户类型。它可以是**损益表**或**资产负债表**。损益表账户在每个新的财政年度重置为零，而资产负债表账户则无限期地继续。资产负债表账户的总和应始终与损益表账户的总和相匹配。
- en: '![Posting accounts](img/0365EN_03_03.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![过账科目](img/0365EN_03_03.jpg)'
- en: Tip
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: You can create two total accounts to check whether the balance in your G/L is
    accurate. Take a total of all income statements and all balance sheets.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以创建两个总计账户来检查你的总账余额是否准确。对所有损益表和所有资产负债表进行总计。
- en: You can also force an account to only accept debit or credit postings. The **No.
    Of Blank Lines** and **New Page** fields are used when printing reports and have
    no effect on the system. **Reconciliation Account** is hardly used anymore unless,
    you do not use sub accounting.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以强制一个账户只接受借记或贷记记账。**空白行数**和**新页面**字段在打印报告时使用，对系统没有影响。**对账账户**几乎不再使用，除非您不使用子会计。
- en: '**Automatic Ext. Texts** creates the extra texts discussed in [Chapter 1](ch01.html
    "Chapter 1. Introduction to Microsoft Dynamics NAV"), *Introduction to Microsoft
    Dynamics NAV*, automatically when you use this account in a sales or purchasing
    document.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '**自动外部文本**在您使用此账户在销售或采购文档中时，会自动创建[第1章](ch01.html "第1章。Microsoft Dynamics NAV
    简介")中讨论的额外文本，*Microsoft Dynamics NAV 简介*。'
- en: '**Direct Posting** is a very important option. It is highly recommended to
    disable this option when an account is used in one of the posting setups. When
    **Direct Posting** is enabled, an end user can create entries in this account,
    disrupting the balance between the general ledger and the sub administration.
    We''ll discuss this in more detail later in this chapter.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '**直接记账**是一个非常重要的选项。强烈建议在账户用于任何记账设置之一时禁用此选项。当**直接记账**启用时，最终用户可以在此账户中创建条目，破坏总账和子管理之间的平衡。我们将在本章后面更详细地讨论这一点。'
- en: When you do allow **Direct Posting**, the fields on the **Posting** tab are
    very important.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 当您允许**直接记账**时，**记账**选项卡上的字段非常重要。
- en: '**Gen. Posting Type** determines whether the account is used for purchase and/or
    sales for the VAT calculation and filtering in the VAT statements. A more detailed
    VAT specification is determined by the VAT business and product posting group.
    The general business and product posting groups can be used to automatically populate
    these fields, when this account is used.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '**通用记账类型**确定账户是否用于增值税计算和过滤的采购和/或销售。更详细的增值税规范由增值税业务和产品记账组确定。一般业务和产品记账组可以用来自动填写这些字段，当使用此账户时。'
- en: In the **Consolidation** tab, you can populate the consolidation accounts used
    when consolidating two or more companies. We'll discuss consolidation later in
    this chapter.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在**合并**选项卡中，您可以填写在合并两个或多个公司时使用的合并账户。我们将在本章后面讨论合并。
- en: Microsoft Dynamics NAV allows an additional reporting currency to be used. This
    is an inheritance from the days before the Euro in Europe and was very popular
    in the years of Euro introduction. Today, it is used by international companies,
    for example, a company based in the USA with a Dutch Parent company. In the **Reporting**
    tab, you can determine how you want to handle exchange rate adjustments when using
    this functionality.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV 允许使用额外的报告货币。这是从欧元在欧洲之前的日子继承下来的，在欧元引入的年份非常受欢迎。今天，它被国际公司使用，例如，一家位于美国的荷兰母公司。在**报告**选项卡中，您可以确定在使用此功能时如何处理汇率调整。
- en: VAT versus sales tax
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 增值税与销售税
- en: Microsoft Dynamics NAV allows the calculation of both European VAT and North
    American Sales Tax. The examples in this book are based on European VAT.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV 允许计算欧洲增值税和北美销售税。本书中的示例基于欧洲增值税。
- en: For sales tax, the **Tax Area Code** and **Tax Group Code** fields are used
    instead of the VAT Business Posting Group and the VAT Product Posting Group.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 对于销售税，使用**税区代码**和**税组代码**字段而不是增值税业务记账组和增值税产品记账组。
- en: The entry tables
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 记录表
- en: As discussed in [Chapter 1](ch01.html "Chapter 1. Introduction to Microsoft
    Dynamics NAV"), *Introduction to Microsoft Dynamics NAV*, the entries for the
    general ledger are created in the general journals when you post a sales or purchase
    document. So, let's have a closer look at this functionality and see what we can
    do with it.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如[第1章](ch01.html "第1章。Microsoft Dynamics NAV 简介")中所述，*Microsoft Dynamics NAV
    简介*，当您记账销售或采购文档时，总账的条目是在总账日记账中创建的。因此，让我们更详细地看看这个功能，看看我们能用它做什么。
- en: Sub accounting
  id: totrans-33
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 子会计
- en: In theory, you could run Microsoft Dynamics NAV with just the G/L Entry table,
    but in accounting, we have invented sub administrations.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 理论上，您可以用总账条目表来运行 Microsoft Dynamics NAV，但在会计中，我们已经发明了子管理。
- en: Sub administrations are very old. Before computers were invented, people would
    have cards for all customers and vendors to keep track of their balance. Updating
    these cards was a manual and time-consuming process with a high probability of
    making mistakes.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 子管理非常古老。在计算机发明之前，人们会为所有客户和供应商制作卡片以跟踪他们的余额。更新这些卡片是一个手动且耗时的工作，出错的可能性很高。
- en: 'In Microsoft Dynamics NAV, this is taken care of automatically. In the general
    ledger, we have four sub administrations:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中，这会自动处理。在总账中，我们有四个子管理：
- en: '**Bank**: For every transaction on a bank account, a bank ledger entry is created.
    The total of all bank ledger entries should match your bank account''s balance.
    It allows you to quickly find payments.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**银行**：对于银行账户上的每笔交易，都会创建一个银行账簿条目。所有银行账簿条目的总和应与您的银行账户余额相符。它允许您快速找到付款。'
- en: '**Customer**: Whenever you sell something to a customer or a customer pays
    a customer ledger, an entry is created. It allows you to analyze payment history
    and send out reminders.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**客户**：无论何时向客户销售商品或客户支付客户账簿，都会创建一个条目。它允许您分析支付历史并发出提醒。'
- en: '**Vendor**: When you buy something using a vendor, the system creates a vendor
    ledger entry. We can use the vendor ledger entries to determine which invoice
    needs to be paid. The vendor ledger entries are the opposite of the customer ledger
    entries.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**供应商**：当您使用供应商购买商品时，系统会创建一个供应商账簿条目。我们可以使用供应商账簿条目来确定哪些发票需要支付。供应商账簿条目是客户账簿条目的相反。'
- en: '**VAT/TAX**: These entries help us to easily create clear VAT/TAX statements.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**增值税/税**：这些条目帮助我们轻松创建清晰的增值税/税报表。'
- en: As discussed earlier, it is very important that the total of the sub administration
    matches the general ledger. For example, when your bank account balance is **2.846,54**,
    the G/L Account should also have that amount.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，子管理总额与总账匹配非常重要。例如，当您的银行账户余额为**2.846,54**时，总账账户也应具有该金额。
- en: '![Sub accounting](img/0365EN_03_04.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![子会计](img/0365EN_03_04.jpg)'
- en: For this, you can disable the **Direct Posting** option we discussed earlier.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 对于此，您可以禁用我们之前讨论的**直接过账**选项。
- en: Working with general journals
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 与总账工作
- en: When we open a general journal, we can start making transactions. Let's discuss
    the possibilities.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们打开总账时，我们可以开始进行交易。让我们讨论一下可能性。
- en: '![Working with general journals](img/0365EN_03_05.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![与总账工作](img/0365EN_03_05.jpg)'
- en: The most important fields of a general journal are the **Posting Date** and
    the **Document No**. The total of amounts for each combination of these fields
    should always be in balance. In other words, all journal lines for any particular
    combination of **Posting Date** and **Document No.** should always add up to zero.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 总账的一般字段中最重要的字段是**过账日期**和**单据编号**。这些字段的每种组合的金额总和应该始终平衡。换句话说，任何特定组合的**过账日期**和**单据编号**的所有日记账条目总和应该始终为零。
- en: There are different account types we can post to. When we post directly to a
    **G/L Account**, it is clear what will happen; a new **G/L Entry** will be created
    for that amount. When we choose another **Account Type**, the sub administrations
    will start to work. For example, when we choose **Customer**, a **Customer Ledger
    Entry** will be created as well as a **G/L Entry**. Which **G/L account** is used
    is determined by the posting group, which we will discuss later in this chapter.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以发布到不同的账户类型。当我们直接过账到**总账账户**时，很明显会发生什么；将为该金额创建一个新的**总账条目**。当我们选择其他**账户类型**时，子管理将开始工作。例如，当我们选择**客户**时，将创建一个**客户账簿条目**以及一个**总账条目**。使用的**总账账户**由过账组决定，我们将在本章后面讨论。
- en: Here, we also see the **Gen. Posting Type**, **General Business** and **Product
    Posting** groups and **VAT Business** and **Product Posting** groups come back.
    These are inherited from the **G/L Account** we discussed earlier, but you can
    choose a different one if you want.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们还可以看到**通用过账类型**、**一般业务**和**产品过账**组以及**增值税业务**和**产品过账**组返回。这些是从我们之前讨论的**总账账户**继承的，但您可以选择不同的一个。
- en: The VAT options determine the VAT calculation that is done automatically. A
    VAT entry is created with the VAT amount and additional **G/L Entries** are created.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 增值税选项决定了自动进行的增值税计算。会创建一个包含增值税金额的增值税条目，并创建额外的**总账条目**。
- en: There are two ways of balancing a general ledger. We can create two lines with
    the same debit and credit amount or we can use the balance fields.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 平衡总账有两种方法。我们可以创建两个具有相同借方和贷方金额的条目，或者我们可以使用余额字段。
- en: Let's see some of this in an example. We have made a purchase somewhere at an
    irregular vendor. All we have is a small cash receipt with the amount and the
    VAT, which we want to bring into our company.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过一个例子来看看这些。我们在一个不规则的供应商那里购买了一些东西。我们只有一张带有金额和增值税的小收据，我们希望将其纳入我们的公司。
- en: 'The amount is 440 including 10 percent VAT, so we want to create the following
    transaction:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 金额是440元，包括10%的增值税，因此我们想要创建以下交易：
- en: '| Cost | VAT | Current account |'
  id: totrans-54
  prefs: []
  type: TYPE_TB
  zh: '| 成本 | 增值税 | 当前账户 |'
- en: '| --- | --- | --- |'
  id: totrans-55
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| 400,00 | 40,00 | 440,00 |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: '| 400,00 | 40,00 | 440,00 |'
- en: 'The transaction can also be seen in the following screenshot:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 交易也可以在以下屏幕截图中看到：
- en: '![Working with general journals](img/0365EN_03_06.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![处理总账日记账](img/0365EN_03_06.jpg)'
- en: We can see that Microsoft Dynamics NAV calculates the **VAT Amount** and by
    populating the balance account, we only need one line, which is always in balance.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，Microsoft Dynamics NAV计算了**增值税金额**，并通过填充余额账户，我们只需要一条记录，这条记录总是平衡的。
- en: When we **Navigate** this transaction, we see that we have three **G/L Entries**
    and one **VAT Entry**.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们**导航**这个交易时，我们看到我们有三个**总账分录**和一个**增值税分录**。
- en: '![Working with general journals](img/0365EN_03_07.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![处理总账日记账](img/0365EN_03_07.jpg)'
- en: Opening the **G/L Entries** shows the correct amounts.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 打开**总账分录**显示正确的金额。
- en: '![Working with general journals](img/0365EN_03_08.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![处理总账日记账](img/0365EN_03_08.jpg)'
- en: In another example, we'll create a customer payment via the bank journal.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在另一个例子中，我们将通过银行日记账创建客户付款。
- en: Entry application
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分录应用
- en: A bank journal is a general journal with a specific page ID. This allows the
    application to have a different user interface based on the same business logic.
    A specific feature of a bank journal is the possibility to easily apply payments
    to invoices.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 银行日记账是一种具有特定页面ID的总账。这使得应用程序可以根据相同的企业逻辑具有不同的用户界面。银行日记账的一个特定功能是能够轻松地将付款应用于发票。
- en: '![Entry application](img/0365EN_03_09.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![分录应用](img/0365EN_03_09.jpg)'
- en: The bank journal does not directly post to a G/L Account but uses other account
    types. In this case, the **Account Type** is **Customer** and the **Balance Account
    Type** is **Bank Account**. Instead of a list with G/L Accounts, the **Account
    No.** field now refers to the **Customers** and the **Balance Account No.** fields
    refer to the **Bank Account**. The latter is automatically populated from the
    Journal Batch definition.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 银行日记账不直接发布到总账账户，而是使用其他账户类型。在这种情况下，**账户类型**是**客户**，而**余额账户类型**是**银行账户**。而不是一个包含总账账户的列表，**账户号**字段现在指的是**客户**，而**余额账户号**字段指的是**银行账户**。后者自动从日记账批次定义中填充。
- en: We'll use the **Apply Entries** feature to determine which invoice this payment
    applies to. If we did not do this, the system would not know which invoice is
    paid.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用**应用分录**功能来确定这笔付款适用于哪张发票。如果我们没有这样做，系统将不知道哪张发票已付款。
- en: Another option would be to automatically apply entries, but when a customer
    decides to skip a payment, the system might get confused, so it is highly recommended
    to apply entries manually.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个选项是自动应用分录，但当客户决定跳过付款时，系统可能会感到困惑，因此强烈建议手动应用分录。
- en: 'When we post this journal and navigate the entries, we see that all necessary
    sub administrations are updated:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们发布这篇日志并导航条目时，我们看到所有必要的子管理都已更新：
- en: '![Entry application](img/0365EN_03_11.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![分录应用](img/0365EN_03_11.jpg)'
- en: Posting groups
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布组
- en: In the previous section, we talked about using customer numbers and bank account
    numbers as an account number in the general journal. The system can then figure
    out what G/L Account numbers to use. But how does that work?
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一节中，我们讨论了在总账中使用客户编号和银行账户编号作为账户编号。然后系统可以确定使用哪些总账账户编号。但这是如何工作的？
- en: 'This is done using the various posting group matrices. Most application parts
    that post to the general ledger have their own posting group table. There are
    two types of posting groups: single layer and matrix layer.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 这是通过使用各种发布组矩阵来完成的。大多数发布到总账的应用部分都有自己的发布组表。发布组有两种类型：单层和矩阵层。
- en: 'The single layer has direct G/L Account columns and the matrix layer has an
    additional setup table:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 单层有直接的总账账户列，而矩阵层有一个额外的设置表：
- en: '| Single layer | Matrix layer |'
  id: totrans-77
  prefs: []
  type: TYPE_TB
  zh: '| 单层 | 矩阵层 |'
- en: '| --- | --- |'
  id: totrans-78
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Customer posting groupVendor posting groupInventory posting groupJob posting
    groupBank account posting groupFA posting group | Gen. business posting groupGen.
    product posting groupVAT business posting groupVAT product posting groupInventory
    posting setup |'
  id: totrans-79
  prefs: []
  type: TYPE_TB
  zh: '| 客户过账组 供应商过账组 库存过账组 项目过账组 银行账户过账组 FA过账组 | 通用业务过账组 通用产品过账组 增值税业务过账组 增值税产品过账组
    库存过账设置 |'
- en: Note
  id: totrans-80
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Each country uses different account schedules and regulations. The G/L Accounts
    in this book are used for the CRONUS example database. These can be different
    in each country and implementation.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 每个国家使用不同的会计科目表和法规。本书中的总账科目用于CRONUS示例数据库。这些在每个国家和实施中可能都不同。
- en: 'Let''s have a look at **Customer Posting Groups**:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看**客户过账组**：
- en: '![Posting groups](img/0365EN_03_12.jpg)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![过账组](img/0365EN_03_12.jpg)'
- en: 'We see three different codes with their own accounts. So where is this code
    used? Let''s open **Customer Card**:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看到三个不同的代码及其各自的账户。那么这个代码在哪里使用？让我们打开**客户卡片**：
- en: '![Posting groups](img/0365EN_03_13.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![过账组](img/0365EN_03_13.jpg)'
- en: On the **Invoicing** tab, we see the customer posting group. So this is what
    determines the customer G/L Accounts.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在**开票**选项卡上，我们看到客户过账组。所以这就是确定客户总账科目的依据。
- en: We also see other posting groups on **Customer Card**. There is a **Gen. Bus.
    Posting Group** and a **VAT Bus. Posting Group**.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还在**客户卡片**上看到了其他过账组。有一个**通用业务过账组**和一个**增值税业务过账组**。
- en: 'In our list, they are matrix layers. So they don''t directly point to a G/L
    Account. When we open **Gen. Bus. Posting Group**, we see this:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的列表中，它们是矩阵层。因此，它们并不直接指向总账科目。当我们打开**通用业务过账组**时，我们看到如下：
- en: '![Posting groups](img/0365EN_03_14.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![过账组](img/0365EN_03_14.jpg)'
- en: Just a simple table connecting it to a **Default VAT Business Posting Group**.
    To see where the G/L Accounts are defined, we need to go to the **General Posting
    Setup**.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 只需一个简单的表格将其连接到**默认增值税业务过账组**。要查看总账科目在哪里定义，我们需要转到**一般过账设置**。
- en: '![Posting groups](img/0365EN_03_15.jpg)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![过账组](img/0365EN_03_15.jpg)'
- en: 'Here we can see that, when combined with a **Gen. Prod. Posting Group**, the
    G/L Accounts can be determined. So where does the **Gen. Prod. Posting Group**
    come from? To find out, we need to go to **Item Card**:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，当与**通用产品过账组**结合时，可以确定总账科目。那么**通用产品过账组**从哪里来？为了找出答案，我们需要转到**项目卡片**：
- en: '![Posting groups](img/0365EN_03_16.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![过账组](img/0365EN_03_16.jpg)'
- en: Here we can see the same tab, **Invoicing**, with the product posting groups.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 这里我们可以看到相同的选项卡，**开票**，与产品过账组。
- en: 'Our journey ends here, as we can see the last matrix posting group, **Inventory**.
    When we open this setup, we see that it is determined by the combination of **Inventory
    Posting Group** and **Location Code**:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的旅程在这里结束，因为我们可以看到最后一个矩阵过账组，**库存**。当我们打开这个设置时，我们看到它是通过**库存过账组**和**位置代码**的组合来确定的：
- en: '![Posting groups](img/0365EN_03_17.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![过账组](img/0365EN_03_17.jpg)'
- en: Dimensions
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 维度
- en: Apart from the general ledger and sub administrations, Microsoft Dynamics NAV
    allows a third level of posting. An unlimited number of dimensions can be attached
    to every posting and used to cross-analyze the system.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 除了总账和子科目之外，Microsoft Dynamics NAV 允许第三级过账。可以将无限数量的维度附加到每个过账中，并用于交叉分析系统。
- en: Note
  id: totrans-99
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Using more dimensions results in increased database activity during the processing
    of transactions and a more complex setup of the system. This should be carefully
    considered during the implementation.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 使用更多维度会导致在处理交易时数据库活动增加，以及系统设置的复杂性增加。在实施过程中应仔细考虑这一点。
- en: Dimensions originated from the old project code and department code functionality,
    allowing you to consolidate or differentiate costs and profits. The dimensions
    are determined via a filtering mechanism. Every master data record can have dimension
    definitions.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 维度起源于旧的项目代码和部门代码功能，允许您合并或区分成本和利润。维度是通过过滤机制确定的。每个主数据记录都可以有维度定义。
- en: 'Let''s look at the sample dimension codes and values:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看样本维度代码和值：
- en: '![Dimensions](img/0365EN_03_18.jpg)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![维度](img/0365EN_03_18.jpg)'
- en: The **Dimension Code Area** has several **Dimension Values**. Here, you can
    also have total records, just as in the general ledger.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '**维度代码区域**有几个**维度值**。在这里，您也可以有总记录，就像在总账中一样。'
- en: When more than one master data record has the same dimension code with different
    values, it is able to set priorities. It is also possible to block combination
    of dimensions to be posted.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 当多个主数据记录具有相同的维度代码但值不同时，可以设置优先级。还可以阻止发布维度的组合。
- en: Dimensions are a powerful tool for analyzing data and structuring the system
    to avoid incorrect entries. However, it requires a lot of time and special skills
    to determine these combinations and maintain the setup.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 维度是分析数据和构建系统以避免错误输入的有力工具。然而，确定这些组合并维护设置需要大量的时间和特殊技能。
- en: We'll see more of dimensions as we discuss the reporting possibilities.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们讨论报告可能性时，我们将看到更多关于维度的内容。
- en: Budgeting
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 预算
- en: Microsoft Dynamics NAV allows budgeting as well. We can create our own budgeting
    codes. A budgeting code can be a year, or a department, or just some budget we
    want to try and throw away later.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV同样允许进行预算。我们可以创建自己的预算代码。预算代码可以是一年、一个部门，或者是我们想要尝试并最终丢弃的某个预算。
- en: Budgeting can be done on G/L Accounts but also on any dimension.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 预算可以在总账科目上进行，也可以在任何维度上进行。
- en: The decision of budgeting periods is very important. If you want to compare
    monthly budgets with real figures, it does not make sense to create a yearly budget.
    Most companies use monthly budgets. It is also most likely that we want to create
    budgets for income statement accounts, not for balance sheets.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 预算期间的决策非常重要。如果您想将月度预算与实际数字进行比较，创建年度预算就没有意义了。大多数公司使用月度预算。我们很可能还想为损益表账户创建预算，而不是为资产负债表创建预算。
- en: '![Budgeting](img/0365EN_03_19.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![预算](img/0365EN_03_19.jpg)'
- en: Importing and exporting budgets to Excel is a very important feature. Here,
    we can easily copy and paste and, for example, automatically have the same values
    each month.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 将预算导入和导出到Excel是一个非常重要的功能。在这里，我们可以轻松复制和粘贴，例如，每个月自动有相同的值。
- en: Creating budget entries
  id: totrans-114
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建预算条目
- en: Budget entries are created by simply entering new amounts in the columns. In
    previous versions of Microsoft Dynamics NAV, a built-in mechanism would handle
    the creation of the entry based on deltas between the previous value and the newly
    entered value.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 通过在列中简单地输入新的金额来创建预算条目。在Microsoft Dynamics NAV的早期版本中，一个内置机制会根据前一个值和新输入值之间的差异来处理条目的创建。
- en: In Microsoft Dynamics NAV 2009, this was changed from the Role Tailored Client
    to C/AL Code. The matrix page object that handles the amount is Budget Matrix
    (9203). This page uses the Matrix Management Codeunit (9200) to simulate the classic
    built-in algorithms.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV 2009中，这从角色定制客户端更改为C/AL代码。处理金额的矩阵页面对象是预算矩阵（9203）。此页面使用矩阵管理代码单元（9200）来模拟经典内置算法。
- en: Accounting periods
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 会计期间
- en: While most companies have accounting periods from January 1 to December 31 divided
    into months, there can be exceptions to this.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然大多数公司的会计期间从1月1日到12月31日分为月份，但可能会有例外。
- en: 'This is supported by Microsoft Dynamics NAV and set up in **Accounting Periods**:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 这由Microsoft Dynamics NAV支持，并在**会计期间**中设置：
- en: '![Accounting periods](img/0365EN_03_20.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![会计期间](img/0365EN_03_20.jpg)'
- en: We are completely free to set up our own desired posting periods as long as
    there is a date algorithm.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 只要存在日期算法，我们就可以自由设置自己想要的发布期间。
- en: '![Accounting periods](img/0365EN_03_21.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![会计期间](img/0365EN_03_21.jpg)'
- en: A posting period should also be closed when appropriate. When closing a posting
    period, all Income Statement G/L Accounts are set to zero and the profit/loss
    is posted to a balance account.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 当适当的时候，也应该关闭发布期间。在关闭发布期间时，所有损益表总账科目都设置为零，利润/亏损发布到平衡账户。
- en: '![Accounting periods](img/0365EN_03_22.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![会计期间](img/0365EN_03_22.jpg)'
- en: When we run this batch, a general journal is populated with the postings. It
    is not recommended to make changes here.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们运行此批处理时，总账会填充发布。不建议在此处进行更改。
- en: Closing dates
  id: totrans-126
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 截止日期
- en: After closing the income statement, it is still possible to make transactions
    but with special posting dates called closing dates. When putting a **C** character
    in front of the posting date, the system will accept this as a special transaction
    and allow you to post it.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 在关闭损益表后，仍然可以进行交易，但需要特殊发布日期，称为截止日期。当在发布日期前加上**C**字符时，系统会将其视为特殊交易并允许您发布。
- en: '![Closing dates](img/0365EN_03_23.jpg)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![截止日期](img/0365EN_03_23.jpg)'
- en: When filtering on `01-01-2013..31-12-2013`, the system will not include the
    entries on the closing dates. Filtering on `01-01-2013..C31-12-2013` and `01-01-2013..31-01-2014`
    will include the entries on the closing dates.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 当筛选`01-01-2013..31-12-2013`时，系统将不包括结算日期的条目。筛选`01-01-2013..C31-12-2013`和`01-01-2013..31-01-2014`将包括结算日期的条目。
- en: Currencies
  id: totrans-130
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 货币
- en: Besides having the possibility of the extra reporting currency, every transaction
    in Microsoft Dynamics NAV can have its own currency. The transaction is transformed
    into **Local Currency** (**LCY**) with the current currency exchange rates.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 除了有额外报告货币的可能性外，Microsoft Dynamics NAV中的每笔交易都可以有自己的货币。交易会根据当前的汇率转换为**本地货币**（**LCY**）。
- en: Handling currency is simple, as long as the exchange rates do not change. After
    that, it can get complex. The exchange rate can change as often as you want but
    with a maximum of one per day. Before you consider implementing a daily change
    of exchange rates, you should look at the consequences.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 处理货币很简单，只要汇率不变化。之后，它可能会变得复杂。汇率可以像你希望的那样频繁变化，但每天最多只能变化一次。在考虑实施每日汇率变化之前，你应该看看后果。
- en: 'When you change the currency exchange rate, everything in the system gets adjusted,
    which can lead to a huge number of transactions in your system. Changing the currency
    exchange rate requires the following two steps:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 当你更改货币汇率时，系统中的所有内容都会进行调整，这可能导致你的系统中出现大量交易。更改货币汇率需要以下两个步骤：
- en: Enter new values. In our case, the new **USD** rate in 2010 is **60**:![Currencies](img/0365EN_03_24.jpg)
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入新值。在我们的例子中，2010年的新**美元**汇率是**60**：![货币](img/0365EN_03_24.jpg)
- en: Implement the value and generate the entries.![Currencies](img/0365EN_03_25.jpg)
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 实施价值和生成条目。![货币](img/0365EN_03_25.jpg)
- en: Consolidation
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 合并
- en: Consolidation means taking (part of) the general ledger of two or more companies
    together in one consolidated company. To handle consolidation in Microsoft Dynamics
    NAV, first the consolidation accounts have to be populated in the G/L Accounts.
    These consolidation accounts have to be valid accounts in the consolidation company.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 合并意味着将两个或多个公司的总账（部分）合并到一个合并公司中。要在Microsoft Dynamics NAV中处理合并，首先必须在G/L账户中填充合并账户。这些合并账户必须是合并公司中的有效账户。
- en: A consolidation company is a "dummy" company in the database that just exists
    for consolidation purposes. The consolidation company has a business unit for
    each consolidated company.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 合并公司是数据库中的一个“虚拟”公司，它仅存在于合并目的。合并公司为每个合并公司都有一个业务单元。
- en: The data can be exported out of the database via an XML or TXT format.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 数据可以通过XML或TXT格式从数据库中导出。
- en: '![Consolidation](img/0365EN_03_26.jpg)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![合并](img/0365EN_03_26.jpg)'
- en: The data is imported via the **Business Unit** list in the consolidation company.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 数据通过合并公司在**业务单元**列表中导入。
- en: '![Consolidation](img/0365EN_03_27.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![合并](img/0365EN_03_27.jpg)'
- en: The other option is to import it from within the database with the **Import
    Database** function.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个选项是从数据库内部使用**导入数据库**功能导入。
- en: VAT statement
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 增值税申报表
- en: Most companies can issue VAT statements to get back the VAT they paid to vendors
    and pay the VAT they've received from customers. This is done in the VAT statement.
    This is a straightforward list where we can filter on the VAT entries.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数公司可以发出增值税申报表以收回支付给供应商的增值税，并支付从客户那里收到的增值税。这是在增值税申报表中完成的。这是一个简单的列表，我们可以根据增值税条目进行筛选。
- en: '![VAT statement](img/0365EN_03_28.jpg)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![增值税申报表](img/0365EN_03_28.jpg)'
- en: Every country has its own VAT statement and many countries have localizations
    in this application area.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 每个国家都有自己的增值税申报表，许多国家在这个应用领域有本地化。
- en: Data analysis
  id: totrans-148
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据分析
- en: Some companies do bookkeeping because it is mandatory and do very little with
    the generated information, but there is a lot you can do with the information
    the system creates.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 一些公司因为强制要求而做账，但对生成的信息处理很少，但你可以用系统创建的信息做很多事情。
- en: In bigger companies, using analysis tools is often the only way to get a clear
    view on the company's assets.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 在大公司中，使用分析工具通常是获得公司资产清晰视图的唯一方法。
- en: Chart of accounts
  id: totrans-151
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 账户总表
- en: The chart of accounts is a reporting tool. The total accounts give a lot of
    information and by applying limit totals (flow filters), we can narrow down this
    information.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 账户总表是一个报告工具。总账户提供了大量信息，通过应用限制总计（流量过滤器），我们可以缩小这些信息。
- en: '![Chart of accounts](img/0365EN_03_29.jpg)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![账户总表](img/0365EN_03_29.jpg)'
- en: This example filters on G/L Account no. larger than or equal to 6000 and limits
    totals to 2014 and Department PROD.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 此示例筛选总账账户编号大于或等于6000的记录，并将总计限制在2014年和部门PROD。
- en: Tip
  id: totrans-155
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: You can save these views by clicking on the page name **Chart of Accounts**
    and then **Save View As**. By choosing a name that makes sense like Income Statement
    2010 Production, it is easy to find.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过单击页面名称**账户表**然后**另存为视图**来保存这些视图。选择一个有意义的名称，如2010年生产利润表，便于查找。
- en: Account schedules
  id: totrans-157
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 账户报表
- en: For advanced reporting requirements, we can use the account schedules. Like
    the VAT statement, it allows us to filter on the G/L Entries in this case. We
    can filter on individual G/L Accounts or use the total filter. If the filter gets
    complex, we can sum individual rows and hide the source rows. We can also apply
    up to four dimensions to each account schedule.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 对于高级报告需求，我们可以使用账户报表。就像增值税申报表一样，它允许我们在这种情况下对总账分录进行筛选。我们可以根据单个总账账户或使用总过滤。如果筛选变得复杂，我们可以对单个行进行求和并隐藏源行。我们还可以将多达四个维度应用于每个账户报表。
- en: '![Account schedules](img/0365EN_03_30.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![账户报表](img/0365EN_03_30.jpg)'
- en: The account schedules also let you define your column layout. You can use multiple
    column layouts per schedule and reuse **Column Layouts** across other schedules.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 账户报表还允许您定义列布局。您可以在每个计划中使用多个列布局，并在其他计划中重用**列布局**。
- en: '![Account schedules](img/0365EN_03_31.jpg)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![账户报表](img/0365EN_03_31.jpg)'
- en: The column layout can contain formulas and date filters. We can show either
    the budget or G/L Entries per column.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 列布局可以包含公式和日期筛选器。我们可以按列显示预算或总账分录。
- en: '![Account schedules](img/0365EN_03_32.jpg)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![账户报表](img/0365EN_03_32.jpg)'
- en: Note
  id: totrans-164
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: For very valuable information on how to use account schedules, refer to [http://dynamicsnavfinancials.com/](http://dynamicsnavfinancials.com/)
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 有关如何使用账户报表的宝贵信息，请参阅[http://dynamicsnavfinancials.com/](http://dynamicsnavfinancials.com/)
- en: Analysis by dimensions
  id: totrans-166
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 按维度分析
- en: As discussed earlier in this chapter, Microsoft Dynamics NAV allows an unlimited
    number of dimensions to be posted in the general ledger. To analyze this information,
    we need to tell the system what to compare. This is done in analysis by dimensions.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 如本章前面所述，Microsoft Dynamics NAV 允许在总账中发布无限数量的维度。为了分析这些信息，我们需要告诉系统要比较什么。这是通过按维度分析来完成的。
- en: Each analysis view gets a unique code. An analysis view can be generated for
    an ad hoc requirement and thrown away afterwards or be in the system permanently
    for periodical reporting. Analysis views generate redundant information that can
    always be discarded and regenerated.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 每个分析视图都有一个唯一的代码。分析视图可以针对临时需求生成并在之后丢弃，或者永久保留在系统中进行定期报告。分析视图生成冗余信息，这些信息始终可以丢弃并重新生成。
- en: '![Analysis by dimensions](img/0365EN_03_33.jpg)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![按维度分析](img/0365EN_03_33.jpg)'
- en: Tip
  id: totrans-170
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: It is recommended to use a copy of the database on a separate system to use
    with analysis views and to update them during the night.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 建议使用单独系统上的数据库副本来使用分析视图，并在夜间更新它们。
- en: When updated, the analysis view contains all data within the filters in the
    analysis view entries. When not properly maintained, this can be a gigantic table
    with data.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 当更新时，分析视图包含分析视图条目中筛选器内的所有数据。如果不妥善维护，这可能是一个包含大量数据的巨大表格。
- en: The result of an analysis view can be viewed in a matrix where all values can
    be used as rows, columns, and filters.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 分析视图的结果可以在矩阵中查看，其中所有值都可以用作行、列和筛选器。
- en: '![Analysis by dimensions](img/0365EN_03_34.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![按维度分析](img/0365EN_03_34.jpg)'
- en: In this example, we view the results of a sales campaign per area and sales
    person.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在本例中，我们按区域和销售人员查看销售活动的结果。
- en: The setup
  id: totrans-176
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置
- en: Financial management has a single general ledger setup table, which is important
    as many of these setup fields will determine how the core of Microsoft Dynamics
    NAV behaves.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 财务管理有一个单一的总账设置表，这很重要，因为许多这些设置字段将决定 Microsoft Dynamics NAV 的核心行为。
- en: '![The setup](img/0365EN_03_35.jpg)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![设置](img/0365EN_03_35.jpg)'
- en: 'We will discuss the setup options to find out what they do and to explore the
    possibilities of creating a flexible setup for an application:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将讨论设置选项，以了解它们的功能，并探索为应用程序创建灵活设置的可能性：
- en: '**Allow Posting From** and **Allow Posting To**: These limit the freedom of
    people to choose posting dates while posting to the general ledger. It is highly
    recommended to enable this feature to avoid posting dates like 01012090 instead
    of 01012009.'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**允许过账从**和**允许过账到**：这些限制了人们在过账到总账时选择过账日期的自由。强烈建议启用此功能以避免过账日期为01012090而不是01012009。'
- en: '**Register Time**: This allows you to create an entry in the time register
    each time a user logs in and out.'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**登记时间**：这允许您在用户每次登录和注销时在时间登记簿中创建条目。'
- en: '**Local Address Format** and **Local Cont. Addr. Format**: This refers to how
    the address should be printed for the local country. In Microsoft Dynamics NAV,
    it is best practice to leave **Country Code** and **Currency Code** blank for
    local values.'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**本地地址格式**和**本地联系人地址格式**：这指的是在本地国家打印地址的方式。在Microsoft Dynamics NAV中，对于本地值，最好将**国家代码**和**货币代码**留空。'
- en: '**Inv. Rounding Precision (LCY)** and **Inv. Rounding Type (LCY)**: These define
    how the rounding on your invoices is calculated. **Nearest** is a best practice
    and allows your customers to easily register your invoice in their system.'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**发票舍入精度（LCY）**和**发票舍入类型（LCY）**：这些定义了您的发票舍入是如何计算的。**最接近**是一种最佳实践，并允许您的客户轻松地在他们的系统中登记您的发票。'
- en: '**Allow G/L Acc Deletion Before**: This allows you to clean up closed fiscal
    years. It is hardly ever used and you should consult your partner before using
    this feature.'
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**允许在过账前删除总账科目**：这允许您清理已关闭的财政年度。这个功能几乎很少使用，在使用此功能之前您应该咨询您的合作伙伴。'
- en: '**Check G/L Account Usage**: This checks whether the G/L Account is used in
    setup tables before it is deleted.'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**检查总账科目使用情况**：在删除之前，此选项检查总账科目是否在设置表中使用。'
- en: '**EMU Currency**: This is the currency that has a fixed conversion rate to
    the Euro in the European Union. The **LCY Code** field is used when printing reports
    to indicate the companies'' local currency.'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**EMU货币**：这是在欧洲联盟中具有固定兑换率到欧元的货币。在打印报告时，**LCY代码**字段用于指示公司的本地货币。'
- en: '**Pmt. Disc. Excl. VAT**: This indicates whether or not VAT is calculated when
    you apply payment discounts. When you check this field, you need to think about
    the **Adjust for Payment Disc.** field, as this will recalculate the VAT.'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**不含增值税的付款折扣**：这表明在应用付款折扣时是否计算增值税。当您选中此字段时，您需要考虑**调整付款折扣**字段，因为这将重新计算增值税。'
- en: '**Unrealized VAT**: This should only be checked if your company has to deal
    with this issue. Otherwise, it will lead to unnecessary postings. This is VAT
    that is only valid when the customer pays the invoice rather than when the invoice
    is issued.'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**未实现增值税**：只有当您的公司必须处理此问题时才应选中此选项。否则，将导致不必要的过账。这是仅在客户支付发票而不是在开具发票时才有效的增值税。'
- en: '**Prepayment Unrealized VAT**: This should only be checked if your company
    handles **Unrealized VAT** and if you want to implement this for the prepayment
    features.'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**预付款未实现增值税**：只有当您的公司处理**未实现增值税**并且您想为预付款功能实施此选项时才应选中此选项。'
- en: '**Max. VAT Difference Allowed**: This field determines the maximum amount of
    VAT differences. Most of the time, the VAT difference will be not more than 0,
    01.'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**允许的最大增值税差异**：此字段确定最大增值税差异金额。大多数情况下，增值税差异不会超过0.01。'
- en: Tip
  id: totrans-191
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: You can post VAT differences by selecting **FULL VAT** in the **VAT Calculation
    Type** for the VAT business posting group.
  id: totrans-192
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以通过在增值税业务过账组中选择**完整增值税**来过账增值税差异。
- en: '**VAT Rounding Type**: This determines how the VAT remainder is calculated.
    It recommended **Nearest**.'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**增值税舍入类型**：这决定了增值税余数的计算方式。建议使用**最接近**。'
- en: '**Bill-to/Sell-to VAT Calc.**: This allows you to change what the source for
    the VAT business posting group is, whether it is the Bill-to Customer or Sell-to
    Customer and Pay-to Vendor or Buy-from Vendor.'
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**账单/销售至增值税计算**：这允许您更改增值税业务过账组的来源，无论是账单客户或销售客户以及付款供应商或购买供应商。'
- en: '**Print VAT specification**: This field allows VAT on your invoices to always
    be in your local currency.'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**打印增值税说明**：此字段允许您的发票上的增值税始终以您的本地货币显示。'
- en: '**Bank Account Nos.**: This is almost always number series that is manually
    determined. Most companies have up to 10 bank accounts.'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**银行账户号码**：这几乎总是由人工确定的数字序列。大多数公司有最多10个银行账户。'
- en: '**Global Dimensions**: This determines which dimensions are posted directly
    to the G/L Entries and sub administrations. These you can most often use when
    limiting totals and should be considered carefully.'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Global Dimensions**: 这决定了哪些维度直接记入总账条目和子管理。这些通常用于限制总计，应仔细考虑。'
- en: '**Shortcut Dimensions**: These are easier to access when you enter journals
    and documents. They can easily be switched later.'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Shortcut Dimensions**: 当您输入日记账和文档时，这些维度更容易访问。它们可以很容易地稍后切换。'
- en: '**Additional Reporting Currency**: This is a useful feature for international
    companies. Remember that it requires extra effort if the exchange rates change.
    You can change this later but a batch job will start, which might take a long
    time if you have a large database.'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Additional Reporting Currency**: 这是一个对跨国公司有用的功能。记住，如果汇率发生变化，这需要额外的努力。您可以稍后更改它，但将启动一个批处理作业，如果您有大型数据库，这可能需要很长时间。'
- en: '**VAT Exchange Rate Adjustment**: This makes it possible to recalculate VAT
    if the reporting currency exchange rates changes. Think about this thoroughly
    before you activate it. It is most likely to generate information that is difficult
    to analyze and use.'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VAT Exchange Rate Adjustment**: 这使得在报告货币汇率变化时重新计算增值税成为可能。在激活之前，请仔细考虑这一点。它很可能会生成难以分析和使用的信息。'
- en: '**Appln Rounding Precision**: This can be used to allow rounding differences
    when applying different currencies.'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Appln Rounding Precision**: 这可以用来允许在应用不同货币时进行舍入差异。'
- en: '**Pmt. Disc. Tolerance Warning**: This field when checked, a warning will appear
    whenever a difference is posted.'
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Pmt. Disc. Tolerance Warning**: 当此字段被勾选时，每当有差异被记入时，都会出现警告。'
- en: '**Pmt. Disc. Tolerance Posting**: This determines if the payment tolerance
    amount is posted to a special account or to the normal discount account.'
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Pmt. Disc. Tolerance Posting**: 这决定了支付容差金额是记入特殊账户还是正常折扣账户。'
- en: '**Payment Discount Grace Period**: This can be used whether you want to be
    tolerant when people are one or two days late with their payment and still deduct
    the discount amount.'
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Payment Discount Grace Period**: 这可以用来决定当人们支付延迟一两天时，是否仍然扣除折扣金额。'
- en: '**Payment Tolerance Warning**: This option will show a warning whenever there
    is a tolerance amount posted to the general ledger.'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Payment Tolerance Warning**: 当容差金额记入总账时，此选项将显示警告。'
- en: '**Payment Tolerance Posting**: This determines if a special G/L Account is
    used to post this amount.'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Payment Tolerance Posting**: 这决定了是否使用特殊总账账户来记入此金额。'
- en: '**Payment Tolerance %**: This determines the tolerance percentage. To change
    this, a batch function is used that updates open entries.'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Payment Tolerance %**: 这决定了容差百分比。要更改此值，将使用一个批处理函数来更新开放条目。'
- en: '**Max. Payment Tolerance Amount**: This field sets a maximum value to the amount
    so an invoice that is issued for 100.000 cannot have a tolerance amount of more
    than 5.000 if the percentage is set to 5 percent.'
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Max. Payment Tolerance Amount**: 此字段设置金额的最大值，因此如果百分比设置为5%，则开出的100,000欧元的发票的容差金额不能超过5,000欧元。'
- en: Customizing financial management
  id: totrans-209
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 定制财务管理
- en: As financial management is regulated by the government and the standard functionality
    is already very complete, this application area is unlikely to have many changes,
    even though we have some examples of where the functionality is changed.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 由于财务管理受政府监管，并且标准功能已经非常完整，因此这个应用领域不太可能有很多变化，尽管我们有一些功能更改的例子。
- en: Note
  id: totrans-211
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The examples in this chapter are included in the objects we used in [Chapter
    2](ch02.html "Chapter 2. A Sample Application"), *A Sample Application*.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中的示例包含在我们在[第2章](ch02.html "第2章。一个示例应用")中使用的对象中，*一个示例应用*。
- en: Sales line description to G/L Entries
  id: totrans-213
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 销售行描述到总账条目
- en: 'When we post a sales invoice, the system will generate the G/L Entries based
    on the sales lines. To avoid creating too many entries, they are compacted. This
    is done using a buffer table, the Invoice Post. Buffer:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们记入销售发票时，系统将根据销售行生成总账条目。为了避免创建过多的条目，它们被压缩。这是通过使用缓冲表，即发票记入缓冲来完成的。
- en: '![Sales line description to G/L Entries](img/0365EN_03_36.jpg)'
  id: totrans-215
  prefs: []
  type: TYPE_IMG
  zh: '![销售行描述到总账条目](img/0365EN_03_36.jpg)'
- en: Only for the combination of the preceding listed fields, a G/L Entry record
    is created. As we can see, the description is not one of these. This results in
    G/L Entries with the posting description of the sales header, which is often confusing
    for accountants when looking at the G/L Entries.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 只有在前面列出的字段的组合下，才会创建一个总账分录记录。正如我们所看到的，描述不是其中之一。这导致总账分录具有销售头部的过账描述，这在会计师查看总账分录时常常令人困惑。
- en: As an example, we will generate a sales invoice with one G/L Account line selling
    one of these books.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 作为例子，我们将生成一张销售发票，其中包含一个总账科目行，销售这些书籍之一。
- en: '![Sales line description to G/L Entries](img/0365EN_03_37.jpg)'
  id: totrans-218
  prefs: []
  type: TYPE_IMG
  zh: '![销售行描述到总账分录](img/0365EN_03_37.jpg)'
- en: When we post this invoice, we will get these G/L Entries. Note that the description
    has gone.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们过账这张发票时，我们会得到这些总账分录。注意，描述已经消失了。
- en: '![Sales line description to G/L Entries](img/0365EN_03_38.jpg)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![销售行描述到总账分录](img/0365EN_03_38.jpg)'
- en: 'To change this behavior, we have to change the **Invoice Post. Buffer** table.
    The description field needs to be part of the unique combination since the grouping
    is done using a `FIND` command in the `UpdInvPostingBuffer` function in `Sales-Post
    Codeunit (80)`:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 要改变这种行为，我们必须更改**发票过账缓冲**表。描述字段需要作为唯一组合的一部分，因为分组是在`Sales-Post Codeunit (80)`中的`UpdInvPostingBuffer`函数中使用`FIND`命令完成的：
- en: '[PRE0]'
  id: totrans-222
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'This requires the following two steps:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 这需要以下两个步骤：
- en: We need to add the description field to the table.![Sales line description to
    G/L Entries](img/0365EN_03_39.jpg)
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要将描述字段添加到表中。![销售行描述到总账分录](img/0365EN_03_39.jpg)
- en: We need to add this new field to the key.![Sales line description to G/L Entries](img/0365EN_03_40.jpg)
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要将这个新字段添加到键中。![销售行描述到总账分录](img/0365EN_03_40.jpg)
- en: Tip
  id: totrans-226
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: A key in Microsoft Dynamics NAV can only contain 252 bytes, so be careful not
    to add too many fields to this table.
  id: totrans-227
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: Microsoft Dynamics NAV中的键只能包含252个字节，所以请小心不要向这个表添加太多字段。
- en: 'When this is done, a change is required in populating the buffer table. This
    is done in the `PrepareSales` function in the table `Invoice Post. Buffer (49)`
    itself:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 当这项工作完成时，需要更改填充缓冲表的方式。这是在`Invoice Post. Buffer (49)`表本身的`PrepareSales`函数中完成的：
- en: '[PRE1]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The last change we are going to make is in the posting routine of the sales
    documents. This is the Sales-Post codeunit (80) we discussed in [Chapter 2](ch02.html
    "Chapter 2. A Sample Application"), *A Sample Application*:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将要做的最后一个更改是在销售文档的过账程序中。这是我们之前在第2章中讨论的，*一个示例应用*中的Sales-Post代码单元（80）：
- en: '[PRE2]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Instead of the posting description of the sales header, we will now use the
    new field in the buffer table. When we post the same invoice again, this is the
    changed result:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将使用缓冲表中的新字段，而不是销售头部的过账描述。当我们再次过账相同的发票时，这是更改后的结果：
- en: '![Sales line description to G/L Entries](img/0365EN_03_41.jpg)'
  id: totrans-233
  prefs: []
  type: TYPE_IMG
  zh: '![销售行描述到总账分录](img/0365EN_03_41.jpg)'
- en: This makes it a lot easier to read the general ledger.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 这使得阅读总账变得容易得多。
- en: Tip
  id: totrans-235
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Making this change might cause our system to create more G/L Entries if we have
    large invoices with different descriptions. Creating extra G/L Entries takes more
    time during a posting routine, resulting in longer running posting transactions
    and a larger database.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们有大额发票并且有不同的描述，这个更改可能会导致我们的系统创建更多的总账分录。在过账程序中创建额外的总账分录需要更多时间，从而导致过账交易运行时间更长，数据库更大。
- en: Extra fields in the G/L Entries
  id: totrans-237
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总账分录中的额外字段
- en: Although the G/L Entry table has a lot of information, some companies want to
    add extra fields to it and populate these in the posting process.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然总账分录表有很多信息，但一些公司希望在过账过程中添加额外的字段并填充这些字段。
- en: For this example, we will use the database with the squash court application
    from [Chapter 2](ch02.html "Chapter 2. A Sample Application"), *A Sample Application*.
    For this business, it might be very useful to have the **Squash Court No.** as
    a field in the G/L Entries to analyze.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个例子，我们将使用来自[第2章](ch02.html "第2章。一个示例应用")，*一个示例应用*中的网球场应用数据库。对于这个业务，将**网球场编号**作为总账分录中的一个字段来分析可能非常有用。
- en: The first step is to add the field to the G/L Entry table and make sure we have
    a table relation with the source table.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是向总账分录表添加字段，并确保我们有与源表的关系。
- en: '![Extra fields in the G/L Entries](img/0365EN_03_42.jpg)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
  zh: '![总账分录中的额外字段](img/0365EN_03_42.jpg)'
- en: We have learned that the G/L Entries are generated from the general journal
    so we need to add this field there as well. This can be done with copy and paste.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经了解到总账分录是从总账生成的，因此我们还需要在那里添加这个字段。这可以通过复制和粘贴来完成。
- en: '![Extra fields in the G/L Entries](img/0365EN_03_43.jpg)'
  id: totrans-243
  prefs: []
  type: TYPE_IMG
  zh: '![总账分录中的额外字段](img/0365EN_03_43.jpg)'
- en: The last step is to make sure we move the information from the journal to the
    ledger entry table. Like in our sample squash application, this is done in the
    `Gen. Jnl.-Post Line Codeunit (12)` only this codeunit has much more code.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一步是确保我们将信息从日记账移动到账簿分录表。就像在我们的示例挤压应用程序中一样，这是在`通用日记账过账行代码单元（12）`中完成的，只是这个代码单元有更多的代码。
- en: 'We need to find the place where the G/L Entries are created and add our field
    there. This is done in the `InitGLEntry` function, as follows:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要找到创建总账分录的地方，并将我们的字段添加到那里。这是在`InitGLEntry`函数中完成的，如下所示：
- en: '[PRE3]'
  id: totrans-246
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: This is all that is required in Microsoft Dynamics NAV to add a field to the
    financial posting process. Of course, it does not make sense to do this unless
    we use it, so a logical next step could be to add this new field to the Invoice
    Post. Buffer table from our previous example.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中，要添加一个字段到财务过账过程，这所有都是必需的。当然，除非我们使用它，否则这样做是没有意义的，所以一个合乎逻辑的下一步可能是将这个新字段添加到我们之前示例中的发票过账缓冲表。
- en: This shows how easy it is to combine solutions in Microsoft Dynamics NAV.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 这显示了在Microsoft Dynamics NAV中结合解决方案是多么容易。
- en: Integrating with financial management
  id: totrans-249
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 与财务管理集成
- en: Although it is not likely to make big changes in financial management, it might
    be necessary to create G/L Entries in a new posting routine.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然它不太可能对财务管理产生重大变化，但在新的过账程序中创建总账分录可能是必要的。
- en: In the previous chapter, we already pointed out briefly that during posting
    transactions in Microsoft Dynamics NAV, the actual journal line records are never
    really inserted in the database. They are used as temporary containers to hold
    the data during posting. Doing an actual `INSERT` would require defining a journal
    template name, journal batch name, and line no. and could cause locking in the
    database.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们简要指出，在Microsoft Dynamics NAV过账交易时，实际的日记账行记录永远不会真正插入到数据库中。它们用作过账期间的临时容器来存储数据。执行实际的`INSERT`操作需要定义日记账模板名称、日记账批次名称和行号，这可能会在数据库中引起锁定。
- en: Let's create a new codeunit that will create a G/L transaction.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们创建一个新的代码单元，用于创建总账交易。
- en: Creating a G/L transaction
  id: totrans-253
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建总账交易
- en: After creating the codeunit, we need to set up the two variables that are the
    minimum requirement to post something to the general ledger.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建代码单元后，我们需要设置两个变量，这是将事物过账到总账的最低要求。
- en: '![Creating a G/L transaction](img/0365EN_03_44.jpg)'
  id: totrans-255
  prefs: []
  type: TYPE_IMG
  zh: '![创建总账交易](img/0365EN_03_44.jpg)'
- en: 'The preceding screenshot shows two variables:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的截图显示了两个变量：
- en: '**GenJnlLine**: This is a reference to the `General Journal Line table (81)`.'
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**GenJnlLine**：这是对`通用日记账行表（81）`的引用。'
- en: '**GenJnlPostLine**: The `Gen. Jnl.-Post Line Codeunit (12)` creates the G/L
    Entries, the register, and the other financial entries.'
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**GenJnlPostLine**：`通用日记账过账行代码单元（12）`创建总账分录、登记簿和其他财务分录。'
- en: The C/AL code
  id: totrans-259
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: C/AL代码
- en: Creating a new G/L Entry requires some of mandatory fields. All the other fields
    in the general journal line are either optional for basic entries or mandatory
    in combination with more advanced postings, as we will find out later.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新的总账分录需要一些必填字段。总账日记账行中的所有其他字段要么是基本条目的可选字段，要么在更高级的过账中是必填的，正如我们稍后将了解到的。
- en: 'We will start by writing this code to the `OnRun` trigger, as follows:'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将首先将此代码写入`OnRun`触发器，如下所示：
- en: '[PRE4]'
  id: totrans-262
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'If we execute this C/AL code, we will receive the following error message,
    which indicates that our transaction will result in an unbalanced chart of accounts:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们执行此C/AL代码，我们将收到以下错误消息，这表明我们的交易将导致账户余额不平衡：
- en: '![The C/AL code](img/0365EN_03_45.jpg)'
  id: totrans-264
  prefs: []
  type: TYPE_IMG
  zh: '![C/AL代码](img/0365EN_03_45.jpg)'
- en: 'We can fix this by creating a balance transaction for `-100` in the same `OnRun`
    trigger, as follows:'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过在相同的`OnRun`触发器中创建一个`-100`的平衡交易来修复这个问题，如下所示：
- en: '[PRE5]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'After executing the codeunit, we can navigate on our document no. to see the
    G/L Entries we created:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 在执行代码单元后，我们可以导航到我们的文档编号，以查看我们创建的总账分录：
- en: '![The C/AL code](img/0365EN_03_46.jpg)'
  id: totrans-268
  prefs: []
  type: TYPE_IMG
  zh: '![C/AL代码](img/0365EN_03_46.jpg)'
- en: This was a very simple example of how to integrate with financial management;
    let's create a more advanced example.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个如何与财务管理集成的非常简单的示例；让我们创建一个更高级的示例。
- en: Advanced entries
  id: totrans-270
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 高级条目
- en: 'We will create a new customer ledger entry with dimensions. To do this, we
    should change one of the C/AL parts we created to the following code:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将创建一个新的带有维度的客户账簿分录。为此，我们应该将我们创建的C/AL部分之一更改为以下代码：
- en: '[PRE6]'
  id: totrans-272
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'But when we execute this C/AL code, we receive the following error message:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 但当我们执行此C/AL代码时，我们收到以下错误信息：
- en: '![Advanced entries](img/0365EN_03_47.jpg)'
  id: totrans-274
  prefs: []
  type: TYPE_IMG
  zh: '![高级条目](img/0365EN_03_47.jpg)'
- en: 'This means we need to implement dimensions. Let''s add the following C/AL code
    to the routine:'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着我们需要实现维度。让我们将以下C/AL代码添加到常规程序中：
- en: '[PRE7]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: This will use dimension set entry `3`, which contains the dimensions that are
    required for this transaction.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 这将使用维度集条目`3`，其中包含此交易所需的维度。
- en: Tip
  id: totrans-278
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: This article on MSDN at [http://msdn.microsoft.com/en-us/library/jj552498(v=nav.71).aspx](http://msdn.microsoft.com/en-us/library/jj552498(v=nav.71).aspx)
    explains how dimension sets are used in the Microsoft Dynamics NAV 2013 architecture.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: MSDN上的这篇文章[http://msdn.microsoft.com/en-us/library/jj552498(v=nav.71).aspx](http://msdn.microsoft.com/en-us/library/jj552498(v=nav.71).aspx)解释了维度集在Microsoft
    Dynamics NAV 2013架构中的应用。
- en: Now, when we navigate on **PACKT**, we see that the system has created a **Customer
    Ledger** entry and a **Detailed Cust. Ledg. Entry**.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，当我们导航到**PACKT**时，我们看到系统已创建了一个**客户账簿**条目和一个**详细客户账簿条目**。
- en: '![Advanced entries](img/0365EN_03_48.jpg)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![高级条目](img/0365EN_03_48.jpg)'
- en: Look, learn, and love
  id: totrans-282
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 看，学，爱
- en: 'In Microsoft Dynamics NAV, there are many examples of how to integrate with
    financial management. The following is a list of interesting codeunits that create
    general journal lines:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Dynamics NAV中，有许多如何与财务管理集成的示例。以下是一个创建总账分录的有趣代码单元列表：
- en: '`Sales-Post (80)`'
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`销售过账（80）`'
- en: '`Purch.-Post (90)`'
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`采购过账（90）`'
- en: '`Job Calculate WIP (1000)`'
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`作业计算在制品（1000）`'
- en: '`CheckManagement (367)`'
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`检查管理（367）`'
- en: '`Sales-Post Prepayments (442)`'
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`销售预付款（442）`'
- en: '`Inventory Posting To G/L (5802)`'
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`库存过账到总账（5802）`'
- en: '`Serv-Posting Journals Mgt. (5987)`'
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`服务过账日记账管理（5987）`'
- en: Go ahead and have a look inside these codeunits to learn how Microsoft does
    the integration.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 好吧，进去看看这些代码单元，了解微软是如何进行集成的。
- en: Summary
  id: totrans-292
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we looked at the financial heart of Microsoft Dynamics NAV.
    Understanding the flow of the entries is important as it is the way the posting
    groups are set up. It is important to regularly check whether the sub administrations
    are balanced with the general ledger.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们探讨了Microsoft Dynamics NAV的财务核心。理解条目流程很重要，因为它是设置过账组的方式。定期检查子管理是否与总账平衡是很重要的。
- en: The reporting possibilities offer great insight if the system is set up correctly.
    Be careful with changing the setup options on a running system.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 如果系统设置正确，报告的可能性将提供很大的洞察力。在运行系统中更改设置选项时要小心。
- en: In the next chapter, we will look at the opposite of this module; relationship
    management. While the financial management system is strict, relationship management
    system is flexible and expandable.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将探讨这个模块的相反面；关系管理。虽然财务管理系统很严格，但关系管理系统是灵活且可扩展的。
