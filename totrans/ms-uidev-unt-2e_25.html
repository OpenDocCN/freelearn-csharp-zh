<html><head></head><body>
<div id="sbo-rt-content" class="calibre1"><div id="_idContainer710" class="calibre2">
<h1 class="chapter-number" id="_idParaDest-315"><a id="_idTextAnchor513" class="pcalibre pcalibre1 calibre6"/>20</h1>
<h1 id="_idParaDest-316" class="calibre5"><a id="_idTextAnchor514" class="pcalibre pcalibre1 calibre6"/>The New Input System</h1>
<p class="calibre3"><a id="_idTextAnchor515" class="pcalibre pcalibre1 calibre6"/>Unity’s <strong class="bold">Input System</strong> (colloquially <a id="_idIndexMarker1219" class="pcalibre pcalibre1 calibre6"/>referred to as <em class="italic">the new Input System</em>) allows you to make the code concerning how your game reacts to interactions from various input devices more modular. The old Input System used the Input Manager to allow you to define various Axes that could be referenced in code (see <a href="B18327_08.xhtml#_idTextAnchor147" class="pcalibre pcalibre1 calibre6"><span><em class="italic">Chapter 8</em></span></a>). You would create checks in your <strong class="source-inline">Update()</strong> method to determine if a device received an input. This usually results in multiple if-else branches within your <strong class="source-inline">Update()</strong> method that control what happens for each <span>input received.</span></p>
<p class="calibre3">The Input System divorces the handling of individual input devices from code by using an event-based programming methodology. Instead of having to create reference to each of your input devices within your code, you create code that reacts to specific actions. The Input System then controls which Interaction from which Input devices trigger <span>these actions.</span></p>
<p class="calibre3">This separation of input handling and code allows you to make more customizable controls, more easily handle different Input Devices, and more easily handle controls from different consoles that have extremely different control schemes. Additionally, the modularity of the Input System allows you to easily copy your control schemes to other projects, since the information is all stored on <span>an asset.</span></p>
<p class="calibre3">This chapter is meant to be an introduction to the Input System and will give you an overview of the key concepts so that you can start using the Input System within <span>your projects.</span></p>
<p class="calibre3">In this chapter, I will discuss <span>the following:</span></p>
<ul class="calibre16">
<li class="calibre14">How to install the <span>Input System</span></li>
<li class="calibre14">The differences in polling <span>vs subscribing</span></li>
<li class="calibre14">The basic elements involved with the <span>Input System</span></li>
<li class="calibre14">How to write code that uses the Input System’s to control <span>your game</span></li>
<li class="calibre14">How to convert a project that uses the old Input System (the Input Manager) to one that uses the new <span>Input System</span></li>
<li class="calibre14">Two different ways to connect your Input System to <span>your code</span></li>
</ul>
<p class="calibre3">Before we begin looking at how to work with the Input System, it needs to be imported into your project. Let’s look at how to <span>do that.</span></p>
<h1 id="_idParaDest-317" class="calibre5"><a id="_idTextAnchor516" class="pcalibre pcalibre1 calibre6"/>Technical requirements</h1>
<p class="calibre3">You can find the asset files and codes of this chapter <span>here: </span><a href="https://github.com/PacktPublishing/Mastering-UI-Development-with-Unity-2nd-Edition/tree/main/Chapter%2020" class="pcalibre pcalibre1 calibre6"><span>https://github.com/PacktPublishing/Mastering-UI-Development-with-Unity-2nd-Edition/tree/main/Chapter%2020</span></a></p>
<h1 id="_idParaDest-318" class="calibre5"><a id="_idTextAnchor517" class="pcalibre pcalibre1 calibre6"/>Installing the Input System</h1>
<p class="calibre3">The Input System is<a id="_idIndexMarker1220" class="pcalibre pcalibre1 calibre6"/> no longer in preview and is officially part of Unity. However, it does not come pre-packaged in unity and must be installed. You can install the Input System into your Project via the Package Manager, by completing the <span>following steps.</span></p>
<ol class="calibre13">
<li class="calibre14">Select <strong class="bold">Unity Registry</strong> from the <span>dropdown menu.</span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer685">
<img alt="Figure 20.1: Changing the Package filter in the Package Manager" src="image/Figure_20.01_B18327.jpg" class="calibre666"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.1: Changing the Package filter in the Package Manager</p>
<ol class="calibre13">
<li value="2" class="calibre14">Search for the <strong class="bold">Input System</strong> in the list and <span>select </span><span><strong class="bold">Install</strong></span><span>.</span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer686">
<img alt="Figure 20.2: Finding the Input System in the Package Manger" src="image/Figure_20.02_B18327.jpg" class="calibre667"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.2: Finding the Input System in the Package Manger</p>
<p class="calibre3">You will see the following pop up which you must agree to in order <span>to proceed.</span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer687">
<img alt="Figure 20.3: A Warning about changing input systems" src="image/Figure_20.03_B18327.jpg" class="calibre668"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.3: A Warning about changing input systems</p>
<p class="calibre3">The warning is <a id="_idIndexMarker1221" class="pcalibre pcalibre1 calibre6"/>indicating that any code you wrote using the old Input System will no longer function. This is a destructive action and may break <span>your game.</span></p>
<p class="callout-heading">Note</p>
<p class="callout">I recommend you create a new project to explore the Input System as installing it may be destructive to your project. It will cause all code written using the Input Manager to cease functioning. Don’t install it in a pre-existing project until you are comfortable <span>doing so.</span></p>
<p class="calibre3">Once you reopen your project, you may want to return to the Package Manager and install the various Samples provided by Unity with the Package. I recommend you install the Simple Demo and UI vs <span>Game Input.</span></p>
<p class="calibre3">Since this is a new Input System, it does use a new methodology to access inputs than the old Input System. Let’s first discuss the differences in these methodologies before we begin looking<a id="_idIndexMarker1222" class="pcalibre pcalibre1 calibre6"/> at the various elements of the <span>Input System.</span></p>
<h1 id="_idParaDest-319" class="calibre5"><a id="_idTextAnchor518" class="pcalibre pcalibre1 calibre6"/>Polling vs subscribing</h1>
<p class="calibre3">We discussed<a id="_idIndexMarker1223" class="pcalibre pcalibre1 calibre6"/> the Input Manager in <a href="B18327_08.xhtml#_idTextAnchor147" class="pcalibre pcalibre1 calibre6"><span><em class="italic">Chapter 8</em></span></a> and <a id="_idIndexMarker1224" class="pcalibre pcalibre1 calibre6"/>up until<a id="_idIndexMarker1225" class="pcalibre pcalibre1 calibre6"/> recently, it was the only way to track inputs from devices in a Unity-built game. When using the Input Manager, you assign specific Axes to different input actions. You then write a C# script that constantly checks to see if that action <span>is performed.</span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer688">
<img alt="Figure 20.4: C# script watching for specific inputs defined by the Input Manager" src="image/Figure_20.04_B18327.jpg" class="calibre669"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.4: C# script watching for specific inputs defined by the Input Manager</p>
<p class="calibre3">To accomplish this, your code would look something like the <span>following pseudocode:</span></p>
<pre class="source-code">
void Update () {
     if (some input happened){
          do something
     }
}</pre> <p class="calibre3">This technique of requesting information at a regular interval, is <a id="_idIndexMarker1226" class="pcalibre pcalibre1 calibre6"/>called <strong class="bold">polling</strong>. You can use the polling pattern for accessing information from the Input System in a similar way that you could with the Input Manager. However, to make your code more modular, most of your code when using the Input <a id="_idIndexMarker1227" class="pcalibre pcalibre1 calibre6"/>System will use a <strong class="bold">publisher-subscriber </strong>(<span><strong class="bold">pub-sub</strong></span><span>) pattern.</span></p>
<p class="calibre3">Consider the following analogy: you really enjoy content from a specific YouTube content creator. You check their channel every day to see if they have released new content. However, you find this cumbersome and instead decide to subscribe to their channel. Now the YouTube channel will alert you whenever new content is posted, saving you the work. Imagine how much work you save yourself from if you had hundreds of YouTube channels you wanted to be updated on by subscribing to their channels<a id="_idIndexMarker1228" class="pcalibre pcalibre1 calibre6"/> instead <a id="_idIndexMarker1229" class="pcalibre pcalibre1 calibre6"/>of <a id="_idIndexMarker1230" class="pcalibre pcalibre1 calibre6"/>constantly checking in <span>on them.</span></p>
<p class="calibre3">Let’s tie the analogy to coding. Instead of your C# script having to constantly check in on the various inputs in the <strong class="source-inline">Update()</strong> method, you can instead <strong class="bold">subscribe</strong> to specific events defined by the <strong class="bold">Input System</strong>. In more technical speak, you will write event subscriber methods that listen for specific events raised by the <span>Input System.</span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer689">
<img alt="Figure 20.5: C# script listening for specific events defined by the New Input System" src="image/Figure_20.05_B18327.jpg" class="calibre670"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.5: C# script listening for specific events defined by the New Input System</p>
<p class="calibre3">So, when using the New Input System, your code may look something like the <span>following pseudocode:</span></p>
<pre class="source-code">
void OnEnable() {
     subscribe DoSomething() to the event
}
private DoSomething() {
     do something
}
void OnDisable() {
     unsubscribe DoSomething() from the event
}</pre> <p class="calibre3">The Input System will determine which events to call based on inputs you specify and your code will subscribe to those events, performing the appropriate functions whenever those <span>events happen.</span></p>
<p class="calibre3">So, how do you tell the Input System which events to call based on which input? And what types <a id="_idIndexMarker1231" class="pcalibre pcalibre1 calibre6"/>of <a id="_idIndexMarker1232" class="pcalibre pcalibre1 calibre6"/>events can it call from those inputs? You <a id="_idIndexMarker1233" class="pcalibre pcalibre1 calibre6"/>do this through the use of Actions, Interactions, and Input Binding. Let’s explore these <span>concepts now.</span></p>
<h1 id="_idParaDest-320" class="calibre5"><a id="_idTextAnchor519" class="pcalibre pcalibre1 calibre6"/>Input System elements</h1>
<p class="calibre3">In the Input<a id="_idIndexMarker1234" class="pcalibre pcalibre1 calibre6"/> Manager, you list various Axes and define what buttons can trigger these axes. In the Input System, you define a set of <strong class="bold">Actions</strong> and describe what <strong class="bold">Interactions</strong> the various <strong class="bold">Controls</strong> of the <strong class="bold">Input Device</strong> can trigger those Actions through <span><strong class="bold">Input Bindings</strong></span><span>.</span></p>
<p class="calibre3">For example, you could create the Input Binding that binds the Space Bar on a keyboard to a jump Action through a pressed Interaction, where the Input device would be the keyboard and the Controls would be all the keys on <span>the keyboard.</span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer690">
<img alt="Figure 20.6: An example of an Input Binding" src="image/Figure_20.06_B18327.jpg" class="calibre671"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.6: An example of an Input Binding</p>
<p class="calibre3">You can create<a id="_idIndexMarker1235" class="pcalibre pcalibre1 calibre6"/> these sets of <strong class="bold">Actions</strong> within what is known<a id="_idIndexMarker1236" class="pcalibre pcalibre1 calibre6"/> as an <strong class="bold">Action Map</strong>. Action Maps contain a list of Actions. The Actions contain the information about the Input Bindings. The general idea is to create Action Maps that contain groups of actions based on their purpose for example all character control Actions may go in one Action Map and all UI Actions may go in a <span>separate one.</span></p>
<p class="calibre3">You can view your Action Maps, Actions, Bindings, and Interactions in the Action Editor. For example, here is<a id="_idIndexMarker1237" class="pcalibre pcalibre1 calibre6"/> the <strong class="bold">Action Editor</strong> with two Action Maps called <strong class="source-inline">Player</strong> <span>and </span><span><strong class="source-inline">UI</strong></span><span>.</span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer691">
<img alt="Figure 20.7: The Action Editor" src="image/Figure_20.07_B18327.jpg" class="calibre672"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.7: The Action Editor</p>
<p class="calibre3">Within the <strong class="source-inline">Player</strong> Action<a id="_idIndexMarker1238" class="pcalibre pcalibre1 calibre6"/> Map, you can see the <strong class="source-inline">Jump</strong> Action, with the <strong class="source-inline">Space [Keyboard] </strong>Binding, and the <span><strong class="source-inline">Press</strong></span><span> Interaction.</span></p>
<p class="calibre3">To start creating your Actions and Action Maps, right click within an <strong class="source-inline">Assets</strong> folder and select <strong class="bold">Create</strong> | <strong class="bold">Input Actions</strong> and name the new Input Action Asset whatever you wish. I recommend you save these assets in a folder called <strong class="source-inline">Inputs</strong> within your <strong class="source-inline">Assets</strong> folder. When you do so, you should get something that looks like <span>the following:</span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer692">
<img alt="Figure 20.8: An Action Asset’s Inspector and icon representation" src="image/Figure_20.08_B18327.jpg" class="calibre673"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.8: An Action Asset’s Inspector and icon representation</p>
<p class="calibre3">You can either double click on the asset you just created or select <strong class="bold">Edit asset </strong>from its Inspector to view <a id="_idIndexMarker1239" class="pcalibre pcalibre1 calibre6"/>the Action Editor. The Action Editor will contain your list of Action Maps and Actions while displaying each of the <span>Action’s properties.</span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer693">
<img alt="Figure 20.9: The Action Editor of a newly created Action Asset" src="image/Figure_20.09_B18327.jpg" class="calibre674"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.9: The Action Editor of a newly created Action Asset</p>
<p class="calibre3">Selecting the <strong class="bold">+</strong> sign in the <strong class="bold">Action Maps</strong> section will create a new <span>Action Map.</span></p>
<p class="calibre3">A new Action Map will automatically come with a <strong class="bold">New action</strong>, which you <span>can rename.</span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer694">
<img alt="Figure 20.10: An Action Map with its New action" src="image/Figure_20.10_B18327.jpg" class="calibre675"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.10: An Action Map with its New action</p>
<p class="calibre3">Selecting <strong class="bold">&lt;No Binding&gt;</strong> will allow you to create an <span>Input Binding.</span></p>
<p class="calibre3">I will cover an example of how to select Binding and Interactions in the Examples section at the end of this <a id="_idIndexMarker1240" class="pcalibre pcalibre1 calibre6"/>chapter, but for now, let’s look at how you can hook these Actions to <span>your code.</span></p>
<h1 id="_idParaDest-321" class="calibre5"><a id="_idTextAnchor520" class="pcalibre pcalibre1 calibre6"/>Connecting Actions to code</h1>
<p class="calibre3">There are multiple <a id="_idIndexMarker1241" class="pcalibre pcalibre1 calibre6"/>ways to work with the Input System’s <a id="_idIndexMarker1242" class="pcalibre pcalibre1 calibre6"/>Actions in your code. In this section, I will give a general overview of the most important topics that should allow you to get started working with the <span>Input System.</span></p>
<p class="calibre3">To connect your Actions to your code, you will need to import the <strong class="source-inline">InputSystem</strong> with the <span>following statement:</span></p>
<pre class="source-code">
using UnityEngine.InputSystem;</pre> <p class="calibre3">There are two ways in which I will discuss connecting Actions to <span>your Code:</span></p>
<ul class="calibre16">
<li class="calibre14">Referencing the <span>Action Asset</span></li>
<li class="calibre14">Using the <span><strong class="source-inline">PlayerInput</strong></span><span> component</span></li>
</ul>
<p class="callout-heading">Note</p>
<p class="callout">For more information about alternate ways you can connect Actions to your code, see the following <span>Unity documentation:</span></p>
<p class="callout"><a href="https://docs.unity3d.com/Packages/com.unity.inputsystem@1.7/manual/Workflows.xhtml" class="pcalibre pcalibre1 calibre6"><span>https://docs.unity3d.com/Packages/com.unity.inputsystem@1.7/manual/Workflows.xhtml</span></a></p>
<p class="calibre3">You can reference the Action Asset creating a variable of type <strong class="source-inline">InputActionsAsset</strong> <span>like so:</span></p>
<pre class="source-code">
[SerializeField] private InputActionAsset actions;</pre> <p class="calibre3">You can then assign the value of <strong class="source-inline">actions</strong> in <span>the Inspector.</span></p>
<p class="calibre3">And to reference the specific Action within a <strong class="source-inline">InputActionAsset</strong>, you could create a variable of type <strong class="source-inline">InputAction</strong>, <span>like so:</span></p>
<pre class="source-code">
private InputAction playerAction;</pre> <p class="calibre3">You could then assign it by finding the specific Action Map and Action within the Action Asset, <span>like so:</span></p>
<pre class="source-code">
playerMoveAction = actions.FindActionMap("Player").FindAction("Move");</pre> <p class="calibre3">Once you find the<a id="_idIndexMarker1243" class="pcalibre pcalibre1 calibre6"/> reference to the Action Asset, you<a id="_idIndexMarker1244" class="pcalibre pcalibre1 calibre6"/> will need to enable and disable the appropriate Action Maps. For Example, if you had an Action Map named <strong class="source-inline">Player</strong>, you could do <span>the following:</span></p>
<pre class="source-code">
private void OnEnable()
{
    actions.FindActionMap("Player").Enable();
}
private void OnDisable()
{
    actions.FindActionMap("Player").Disable();
}</pre> <p class="calibre3">Once you have a reference to the <strong class="source-inline">InputActionAsset</strong>, you can have your methods subscribe to the various callbacks of the Action. Each Action has the following callbacks that you can <span>subscribe to:</span></p>
<ul class="calibre16">
<li class="calibre14"><strong class="source-inline">Performed</strong>: The Action’s Interaction <span>is complete</span></li>
<li class="calibre14"><strong class="source-inline">Started</strong>: The Action’s Interaction <span>has started</span></li>
<li class="calibre14"><strong class="source-inline">Waiting</strong>: The Action is enabled and waiting for an Input to cause trigger <span>an Interaction</span></li>
<li class="calibre14"><strong class="source-inline">Canceled</strong>: The Action’s Interaction has <span>been canceled</span></li>
<li class="calibre14"><strong class="source-inline">Disabled</strong>: The Action cannot receive any input as it <span>is disabled</span></li>
</ul>
<p class="calibre3">So, for example, you could subscribe to an Action named <strong class="source-inline">Jump</strong> on an Action Map named <strong class="source-inline">Player</strong> that is triggered by a button press with something like <span>the following:</span></p>
<pre class="source-code">
actions.FindActionMap("Player").FindAction("Jump").performed += OnJump;</pre> <p class="calibre3">If you wish to poll<a id="_idIndexMarker1245" class="pcalibre pcalibre1 calibre6"/> the Actions rather than subscribe to <a id="_idIndexMarker1246" class="pcalibre pcalibre1 calibre6"/>the callback events, you use the <strong class="source-inline">ReadValue&lt;TValue&gt;()</strong> method <span>like so:</span></p>
<pre class="source-code">
Vector2 moveVector = playerMoveAction.ReadValue&lt;Vector2&gt;();</pre> <p class="calibre3">If you’re not a big fan of writing code, you can instead use the <strong class="source-inline">PlayerInput</strong> component. The <strong class="source-inline">PlayerInput</strong> component will allow you to specify which methods in your C# scripts are called by the <span>various Actions.</span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer695">
<img alt="Figure 20.11: The default Player Input component" src="image/Figure_20.11_B18327.jpg" class="calibre676"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.11: The default Player Input component</p>
<p class="calibre3">Using this method vs directly referencing the Actions in your code is mostly up to preference. It takes less code, but it takes more Inspector work. As a programmer by trade, I personally prefer the method that references the Actions in code. I find it easier to debug, more customizable, and quicker to edit when there are multiple objects using Actions. However, when I am working on a project that has designers making changes in the Inspector, who don’t want to work in code, using the <strong class="source-inline">PlayerInput</strong> component is a good solution as it allows them to do things without me. You can also use a combination and it’s all based on your needs <span>and preferences.</span></p>
<p class="callout-heading">Note</p>
<p class="callout">To learn more about the various ways you can access Actions with your code, see the <span>following documentation:</span></p>
<p class="callout"><a href="https://docs.unity3d.com/Packages/com.unity.inputsystem@1.7/manual/Workflow-ActionsAsset.xhtml" class="pcalibre pcalibre1 calibre6"><span>https://docs.unity3d.com/Packages/com.unity.inputsystem@1.7/manual/Workflow-ActionsAsset.xhtml</span></a></p>
<p class="calibre3">Now that we have<a id="_idIndexMarker1247" class="pcalibre pcalibre1 calibre6"/> a general idea of how the Unity <a id="_idIndexMarker1248" class="pcalibre pcalibre1 calibre6"/>Input System works, let’s look at some examples of how to work <span>with it.</span></p>
<p class="calibre3"><span>Examples</span></p>
<p class="calibre3">Now that we’ve <a id="_idIndexMarker1249" class="pcalibre pcalibre1 calibre6"/>reviewed the basics of getting started with the Input System, let’s look at some examples of how to implement it. We’ll look at one very basic example of a character controller. We’ll start with an example that uses the old Input Manager and then adjust it to use the <span>Input System.</span></p>
<p class="callout-heading">Note</p>
<p class="callout">This is a super basic character controller. It is simplified to make the process of converting it to the Input System easier <span>to understand.</span></p>
<p class="calibre3">The example we will use is just a cat that jumps and <span>moves around.</span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer696">
<img alt="Figure 20.12: The character controller example using the old Input System" src="image/Figure_20.12_B18327.jpg" class="calibre677"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.12: The character controller example using the old Input System</p>
<p class="calibre3">Before you begin these examples, complete the <span>following steps:</span></p>
<ol class="calibre13">
<li class="calibre14">Create a new 2D <span>Unity Project.</span></li>
<li class="calibre14">Import the <span><strong class="source-inline">Chapter 20</strong></span><strong class="source-inline"> – Example 1 - Start</strong> Package provided by the book’s source code using <strong class="bold">Assets</strong> | <strong class="bold">Import Package</strong> | <span><strong class="bold">Custom Package</strong></span><span>.</span><p class="calibre3">After you’ve<a id="_idIndexMarker1250" class="pcalibre pcalibre1 calibre6"/> imported the package, play the scene <span><strong class="source-inline">Chapter 20</strong></span><strong class="source-inline"> – Example 1</strong> to get a feel of how the cat moves around. It’s nothing fancy or particularly impressive, but the cat will jump with the space bar and move back and forth with the arrow keys and <em class="italic">A</em>- <span><em class="italic">D</em></span><span> keys.</span></p></li>
<li class="calibre14">Open the <strong class="source-inline">InputManagerBasicCharacterController.cs</strong> class and review the code. The key section of code is the <span><strong class="source-inline">Update()</strong></span><span> method:</span><pre class="source-code">
void Update()
{
    movement = Input.GetAxis("Horizontal");
    catRigidbody.velocity = new Vector2(speed * movement, catRigidbody.velocity.y);
    if (grounded &amp;&amp; Input.GetButtonDown("Jump"))
    {
        catRigidbody.AddForce(new Vector2(catRigidbody.velocity.x, jumpHeight));
    }
}</pre><p class="calibre3">Notice the use of <strong class="source-inline">Input.GetAxis("Horizontal")</strong> <span>and </span><span><strong class="source-inline">Input.GetButtonDown</strong></span><strong class="source-inline">
("Jump")</strong> . These are defined within the Input Manager which you can find in <strong class="bold">Edit</strong> | <strong class="bold">Project Settings</strong> | <span><strong class="bold">Input Manager</strong></span><span>.</span></p></li> <li class="calibre14">Now that you’ve played the game. Install the Input System Package and restart when requested. See the <em class="italic">Installing the Input System</em> section <span>for steps.</span><p class="calibre3">If you try to play the game now, you will see the following error in <span>your console.</span></p><pre class="source-code">
InvalidOperationException: You are trying to read Input using the UnityEngine.Input class, but you have switched active Input handling to Input System package in Player Settings.
InputManagerBasicCharacterController.Update () (at Assets/Scripts/InputManagerBasicCharacterController.cs:20)</pre><p class="calibre3">This is because when we installed the Input System, the project stopped accepting inputs that use <strong class="source-inline">UnityEngine.Input</strong>. The cat will no longer move in response to our <span>key presses.</span></p></li> </ol>
<p class="calibre3">Ok, now that we <a id="_idIndexMarker1251" class="pcalibre pcalibre1 calibre6"/>have our project started and set up, we can convert that code to something that can be used by the Input System! Let’s start by setting up <span>our Actions.</span></p>
<h2 id="_idParaDest-322" class="calibre7"><a id="_idTextAnchor521" class="pcalibre pcalibre1 calibre6"/>Creating basic character controller Actions</h2>
<p class="calibre3">Before we start<a id="_idIndexMarker1252" class="pcalibre pcalibre1 calibre6"/> adjusting our code, we first have to set up our Action Map <span>and Actions.</span></p>
<p class="calibre3">To set up your basic character controller Actions, complete the <span>following steps:</span></p>
<ol class="calibre13">
<li class="calibre14">Create a new folder called <strong class="source-inline">Inputs</strong> within your <span><strong class="source-inline">Assets</strong></span><span> folder.</span></li>
<li class="calibre14">Right-click within the folder and select <strong class="bold">Create</strong> | <span><strong class="bold">Input Actions</strong></span><span>.</span></li>
<li class="calibre14">Rename the new Action Asset <span>to </span><span><strong class="source-inline">CatActions</strong></span><span>.</span></li>
<li class="calibre14">Double-click <strong class="source-inline">CatActions.inputActions</strong> to open the <span>Action Editor.</span></li>
<li class="calibre14">Check the <strong class="bold">Auto-Save</strong> box so that any changes you make will <span>automatically save.</span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer697">
<img alt="Figure 20.13: Selecting Auto-Save" src="image/Figure_20.13_B18327.jpg" class="calibre678"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.13: Selecting Auto-Save</p>
<ol class="calibre13">
<li value="6" class="calibre14">Now we need to add an Action Map that will hold all the Actions for our character. Create a new Action Map by selecting the plus sign and then naming the Action<a id="_idIndexMarker1253" class="pcalibre pcalibre1 calibre6"/> Map <strong class="source-inline">Player</strong>. You should now see <span>the following:</span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer698">
<img alt="Figure 20.14: The Player Action Map" src="image/Figure_20.14_B18327.jpg" class="calibre679"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.14: The Player Action Map</p>
<ol class="calibre13">
<li value="7" class="calibre14">Let’s create the <strong class="source-inline">Jump</strong> action by renaming <strong class="source-inline">New action</strong> to <strong class="source-inline">Jump</strong>. You can do so by double-clicking on the words <strong class="bold">New action</strong>. Notice that the <strong class="bold">Action Type</strong> is set to <strong class="bold">Button</strong>. This means the Jump Action will be triggered by <span>button-like inputs.</span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer699">
<img alt="Figure 20.15: The Jump Action’s properties" src="image/Figure_20.15_B18327.jpg" class="calibre680"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.15: The Jump Action’s properties</p>
<ol class="calibre13">
<li value="8" class="calibre14">Click on the arrow next to the <strong class="source-inline">Jump</strong> Action to view all of its bindings. You should see <strong class="bold">&lt;</strong><span><strong class="bold">No Binding&gt;.</strong></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer700">
<img alt="Figure 20.16: The Jump Action’s bindings" src="image/Figure_20.16_B18327.jpg" class="calibre681"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.16: The Jump Action’s bindings</p>
<ol class="calibre13">
<li value="9" class="calibre14">Click<a id="_idIndexMarker1254" class="pcalibre pcalibre1 calibre6"/> on <strong class="bold">&lt;No Binding&gt;</strong> and select the dropdown next to the <strong class="bold">Path</strong> property. Within the text field that appears, type <strong class="source-inline">Space</strong>, then select <strong class="bold">Space [Keyboard]</strong>. This will bind the spacebar on the keyboard to this Action. Notice it automatically names the binding <span>for you.</span></li>
<li class="calibre14">Now let’s tell this binding what Interaction it can accept. Select the plus sign next to <strong class="bold">Interactions</strong> and select <strong class="bold">Press</strong> from the dropdown. Your Player Action Map should now look <span>as follows:</span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer701">
<img alt="Figure 20.17: The Press Interaction on the Space [Keyboard] binding" src="image/Figure_20.17_B18327.jpg" class="calibre682"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.17: The Press Interaction on the Space [Keyboard] binding</p>
<ol class="calibre13">
<li value="11" class="calibre14">Now we want to add the Action that will be bound to the keys that were previously referenced by <strong class="source-inline">"Horizontal" </strong>in the Input Manager. Select the plus sign next to <strong class="bold">Actions</strong> to create a <strong class="bold">new Action</strong>. Call <span>it </span><span><strong class="source-inline">Move</strong></span><span>.</span></li>
<li class="calibre14">Set its <strong class="bold">Action Type</strong> to <strong class="bold">Value</strong> and its <strong class="bold">Control Type</strong> <span>to </span><span><strong class="bold">Vector2</strong></span><span>.</span></li>
<li class="calibre14">Now we <a id="_idIndexMarker1255" class="pcalibre pcalibre1 calibre6"/>need to add the key bindings. Select the plus sign next to the <strong class="source-inline">Move</strong> Action and you’ll notice, since we set <strong class="source-inline">Move</strong> as a different Action Type than <strong class="source-inline">Jump</strong>, it has different <strong class="bold">Binding Options</strong>. Select <strong class="bold">Add Up\Down\Left\Right Composite</strong>. You should now see <span>the following:</span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer702">
<img alt="Figure 20.18: The 2D vector bindings" src="image/Figure_20.18_B18327.jpg" class="calibre683"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.18: The 2D vector bindings</p>
<ol class="calibre13">
<li value="14" class="calibre14">Delete the <strong class="bold">Up</strong> and <strong class="bold">Down</strong> Bindings as well as the one marked <strong class="bold">&lt;No Binding&gt;</strong>, because we do not need<a id="_idIndexMarker1256" class="pcalibre pcalibre1 calibre6"/> them. You can do this by right-clicking on them and <span>selecting </span><span><strong class="bold">Delete</strong></span><span>.</span></li>
<li class="calibre14">Select <strong class="bold">Left: &lt;No Binding&gt;</strong>. Start typing <strong class="source-inline">Left Arrow</strong> in the <strong class="bold">Path</strong> to find <strong class="bold">Left </strong><span><strong class="bold">Arrow [Keyboard]</strong></span><span>.</span></li>
<li class="calibre14">Select <strong class="bold">Right: &lt;No Binding&gt;</strong>. Start typing <strong class="source-inline">Right Arrow</strong> in the <strong class="bold">Path</strong> to find <strong class="bold">Right Arrow [Keyboard]</strong>. You should now have the following Actions <span>and Bindings.</span>
<div class="calibre2">
<div class="img---figure" id="_idContainer703">
<img alt="Figure 20.19: The Left and Right Bindings" src="image/Figure_20.19_B18327.jpg" class="calibre684"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.19: The Left and Right Bindings</p>
<p class="calibre3">We have now bound our arrow keys to the <span>move action.</span></p></li>
</ol>
<ol class="calibre13">
<li value="17" class="calibre14">Now we need to bind the <em class="italic">A</em> and <em class="italic">D</em> keys. Duplicate the <strong class="bold">Left: Left Arrow [Keyboard] </strong>and <strong class="bold">Right: Right Arrow [Keyboard]</strong> bindings by right clicking them and <span>selecting </span><span><strong class="bold">Duplicate</strong></span><span>.</span></li>
<li class="calibre14">Select the duplicate <strong class="bold">Left: Left Arrow [Keyboard]</strong> and start typing <strong class="source-inline">a keyboard</strong> into the <strong class="bold">Path</strong> to find <span><strong class="bold">A [Keyboard]</strong></span><span>.</span></li>
<li class="calibre14">Select the duplicate <strong class="bold">Right: Right Arrow [Keyboard]</strong> and start typing <strong class="source-inline">d keyboard</strong> into the <strong class="bold">Path</strong> to find <strong class="bold">D [Keyboard]</strong>. You should now see the following<a id="_idIndexMarker1257" class="pcalibre pcalibre1 calibre6"/> Actions <span>and Bindings:</span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer704">
<img alt="Figure 20.20: All the necessary Actions and Bindings" src="image/Figure_20.20._B18327.jpg" class="calibre685"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.20: All the necessary Actions and Bindings</p>
<p class="calibre3">Now that we’re done hooking up our Actions, we can start using them with our code! I’ll show you two ways <a id="_idIndexMarker1258" class="pcalibre pcalibre1 calibre6"/>to do this: with the <strong class="source-inline">PlayerInput</strong> Component and by referencing the Action in <span>our script.</span></p>
<h2 id="_idParaDest-323" class="calibre7"><a id="_idTextAnchor522" class="pcalibre pcalibre1 calibre6"/>Creating a basic character controller with the PlayerInput Component</h2>
<p class="calibre3">Switching our<a id="_idIndexMarker1259" class="pcalibre pcalibre1 calibre6"/> code to use Actions and the <strong class="source-inline">PlayerInput</strong> component, requires a bit of code adjustment and some <span>Inspector work.</span></p>
<p class="calibre3">To use Actions with the <strong class="source-inline">PlayerInput</strong> Component, complete the <span>following steps:</span></p>
<ol class="calibre13">
<li class="calibre14">To preserve the previous example, I am going to duplicate the scene and call it <span><strong class="source-inline">Chapter 20</strong></span><strong class="source-inline"> – Example 2</strong>; duplicate the <strong class="source-inline">InputManagerBasicCharacterController.cs</strong> script; and rename the duplicate to <strong class="source-inline">PlayerInputBasicCharacterController.cs.</strong> If you’d rather just work in the same scene with the same script, you can skip this step. However, if you do want to do this, make sure to also change the name of the script in the class definition and add the script as a component to the <strong class="source-inline">Cat</strong> in your <span>new scene.</span></li>
<li class="calibre14">Let’s start by adjusting the script. We’ll be removing the code within the <strong class="source-inline">Update()</strong> method that checks for the Input Axes and instead use public methods that can be hooked up in the Inspector. Comment out all the code within the <strong class="source-inline">Update()</strong> method. Don’t delete it, b/c we’ll cut and paste some of it to other <span>methods later.</span></li>
<li class="calibre14">Add the<a id="_idIndexMarker1260" class="pcalibre pcalibre1 calibre6"/> following statement to the top of <span>your script:</span><pre class="source-code">
using UnityEngine.InputSystem;</pre></li> <li class="calibre14">Create a new method called <strong class="source-inline">OnJump()</strong>. This will be the method that is called when the <strong class="source-inline">Jump</strong> Action is triggered. It should look <span>as follows:</span><pre class="source-code">
public void OnJump(InputAction.CallbackContext context) {
}</pre></li> <li class="calibre14">We want our <strong class="source-inline">OnJump()</strong> method to perform similarly to the following statement we have commented out in our <span><strong class="source-inline">Update()</strong></span><span> method.</span><pre class="source-code">
if (grounded &amp;&amp; Input.GetButtonDown("Jump"))
{
    catRigidbody.AddForce(new Vector2(catRigidbody.velocity.x, jumpHeight));
}</pre><p class="calibre3">Cut and paste it into the <span><strong class="source-inline">OnJump()</strong></span><span> method.</span></p></li> <li class="calibre14">Remove <strong class="source-inline">&amp;&amp; Input.GetButtonDown("Jump")</strong> from the <strong class="source-inline">if</strong> statement. Your <strong class="source-inline">OnJump()</strong> method should now appear <span>as follows:</span><pre class="source-code">
public void OnJump(InputAction.CallbackContext context) {
        if (grounded) {
            catRigidbody.AddForce(new Vector2(catRigidbody.velocity.x, jumpHeight));
        }
}</pre></li> <li class="calibre14">Now let’s hook this method up in the Inspector. Select your <strong class="source-inline">Cat</strong> from the Hierarchy and add the <strong class="source-inline">PlayerInput</strong> Component. Your Cat’s Inspector should have the<a id="_idIndexMarker1261" class="pcalibre pcalibre1 calibre6"/> <span>following components:</span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer705">
<img alt="Figure 20.21: Some of the components on Cat" src="image/Figure_20.21._B18327.jpg" class="calibre686"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.21: Some of the components on Cat</p>
<ol class="calibre13">
<li value="8" class="calibre14">Now let’s add our Actions to the <strong class="bold">Player Input</strong> component. Drag your <strong class="source-inline">CatActions</strong> from the Project folder into the <strong class="bold">Actions</strong> slot. Your component should now look <span>as follows:</span>
<div class="calibre2">
<div class="img---figure" id="_idContainer706">
<img alt="Figure 20.22: Assigning CatActions to the PlayerInput component" src="image/Figure_20.22._B18327.jpg" class="calibre687"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.22: Assigning CatActions to the PlayerInput component</p>
<p class="calibre3">Notice it<a id="_idIndexMarker1262" class="pcalibre pcalibre1 calibre6"/> already found our <strong class="bold">Player</strong> Action Map and added it as the <strong class="bold">Default Map</strong>. If we had more Action Maps, there would be others in the dropdown we could <span>choose from.</span></p></li>
</ol>
<ol class="calibre13">
<li value="9" class="calibre14">From the <strong class="bold">Behavior</strong> dropdown, select <strong class="bold">Invoke Unity Events</strong>. This will add an <strong class="bold">Events</strong> setting that can be expanded to reveal a list of <strong class="bold">Player</strong> Events. Expanding <strong class="bold">Player</strong> will show the two Actions we have defined within the Player Map along with some other <span>useful Actions.</span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer707">
<img alt="Figure 20.23: The Various Player Action Events" src="image/Figure_20.23._B18327.jpg" class="calibre688"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.23: The Various Player Action Events</p>
<ol class="calibre13">
<li value="10" class="calibre14">We can hook <a id="_idIndexMarker1263" class="pcalibre pcalibre1 calibre6"/>up our <strong class="source-inline">OnJump()</strong> method to the <strong class="bold">Jump</strong> Event by selecting the plus sign under <strong class="bold">Jump(CallbackContext)</strong>, dragging the <strong class="source-inline">Cat</strong> into the Object slot, and then selecting <strong class="bold">PlayerInputBasicCharacterController</strong> | <strong class="bold">OnJump</strong>. Your <strong class="bold">Jump</strong> Event should now appear <span>as follows:</span>
<div class="calibre2">
<div class="img---figure" id="_idContainer708">
<img alt="Figure 20.24: The Player Jump Event calling our OnJump method" src="image/Figure_20.24._B18327.jpg" class="calibre689"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.24: The Player Jump Event calling our OnJump method</p>
<p class="calibre3">Play the game and you should see the cat jump when you press <span>the spacebar.</span></p>
</li>
</ol><ol class="calibre13">
<li value="11" class="calibre14">Now let’s hook up the Move Action. Return to your code and create the <span>following method:</span><pre class="source-code">
public void OnMove(InputAction.CallbackContext context) {¶}</pre></li> <li class="calibre14">Add the following variable declaration to <span>your code:</span><pre class="source-code">
private Vector2 moveVector = new Vector2();</pre></li> <li class="calibre14">When we <a id="_idIndexMarker1264" class="pcalibre pcalibre1 calibre6"/>got the <strong class="source-inline">movement</strong> variable from the Input Axis, we used the <span>following line:</span><pre class="source-code">
movement = Input.GetAxis("Horizontal");</pre><p class="calibre3">In the preceeding code, <strong class="source-inline">movement</strong> was a <strong class="source-inline">float</strong> variable. While the <strong class="source-inline">Horizontal</strong> Axis returned a <strong class="source-inline">float</strong>, the Move Action sends <strong class="source-inline">Vector2</strong> value. Add the following line to your <span><strong class="source-inline">OnMove() </strong></span><span>method:</span></p><pre class="source-code">moveVector = context.ReadValue&lt;Vector2&gt;();</pre><p class="calibre3">This will get the value of the Move Action whenever the <strong class="source-inline">OnMove()</strong> method <span>is called.</span></p></li> <li class="calibre14">Return to your <strong class="source-inline">Update()</strong> method and uncomment the remaining code. Your <strong class="source-inline">Update()</strong> method should appear <span>as follows:</span><pre class="source-code">
void Update()
{
    movement = Input.GetAxis("Horizontal");
    catRigidbody.velocity = new Vector2(speed * movement, catRigidbody.velocity.y);
}</pre></li> <li class="calibre14">Delete the following line that uses the old <span>Input System.</span><pre class="source-code">
Movement = Input.GetAxis("Horizontal");</pre></li> <li class="calibre14">Edit the remaining line to use the <strong class="source-inline">moveVector</strong> instead of the <span>movement float.</span><pre class="source-code">
catRigidbody.velocity = new Vector2(speed * moveVector.x, catRigidbody.velocity.y);</pre></li> <li class="calibre14">Remove the <strong class="source-inline">movement</strong> float variable declaration since we no longer <span>need it.</span></li>
<li class="calibre14">Return to your Inspector and add the <strong class="source-inline">OnMove() </strong>method to the <strong class="bold">Move</strong> Event by selecting the plus sign under <strong class="bold">Move(CallbackContext)</strong>, dragging the <strong class="source-inline">Cat</strong> into the <a id="_idIndexMarker1265" class="pcalibre pcalibre1 calibre6"/>Object slot, and then selecting <strong class="bold">PlayerInputBasicCharacterController</strong> | <strong class="bold">OnMove</strong>. Your Move Event should now appear <span>as follows:</span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer709">
<img alt="Figure 20.25: The Player Move Event calling our OnMove method" src="image/Figure_20.25._B18327.jpg" class="calibre690"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 20.25: The Player Move Event calling our OnMove method</p>
<p class="calibre3">Play the game and your cat should now be able to move <span>and jump!</span></p>
<p class="calibre3">Personally, I’m not a fan of using the <strong class="source-inline">PlayerInput</strong> component. Since I am a programmer by trade, I prefer to spend most of my time in my code editor rather than the Unity Editor. I find debugging code that is hooked up in the inspector difficult to debug. When I do use this functionality, I try to make life easier for my future self (or my other programming coworkers) by adding comments to the code that states what components call what methods. This can make debugging and understanding the way the code works a little easier. Using a code editor like Jetbrains Rider can relieve some of this stress, as it will indicate where code is hooked up in the Inspector, but it does not always show all necessary information and you can’t count on your coworkers also having the <a id="_idIndexMarker1266" class="pcalibre pcalibre1 calibre6"/>Rider IDE. If you have a similar preference, I will show you in the next example how to do this in a <span>code-centric way.</span></p>
<h2 id="_idParaDest-324" class="calibre7"><a id="_idTextAnchor523" class="pcalibre pcalibre1 calibre6"/>Creating a basic character controller by referencing Actions in your code</h2>
<p class="calibre3">To redo <a id="_idIndexMarker1267" class="pcalibre pcalibre1 calibre6"/>our previous example so that it references the Actions in code, complete the <span>following steps:</span></p>
<ol class="calibre13">
<li class="calibre14">To preserve the previous example, I am going to duplicate the scene and call it <span><strong class="source-inline">Chapter 20</strong></span><strong class="source-inline"> – Example 3</strong>; duplicate the <strong class="source-inline">PlayerInputBasicCharacterController.cs</strong> script; and rename the duplicate to <strong class="source-inline">ActionReferenceBasicCharacterController.cs</strong>. If you’d rather just work in the same scene with the same script, you can skip this step. However, if you do want to do this, make sure to also change the name of the script in the class definition and add the script as a component to the <strong class="source-inline">Cat</strong> in your <span>new scene.</span></li>
<li class="calibre14">Delete the <strong class="bold">PlayerInput</strong> component from your <strong class="source-inline">Cat</strong>’s Inspector. Notice if you try to play the game now, the cat will not move or jump, since we removed the component that tied the inputs to <span>our code.</span></li>
<li class="calibre14">Open the <span><strong class="source-inline">ActionReferenceBasicCharacterController.cs</strong></span><span> script.</span></li>
<li class="calibre14">Comment out the <strong class="source-inline">OnMove()</strong> method. We will not be calling this via an Event in the Inspector, so we do not need the method. However, we will write code similar to it, so I’ll comment it out for now so I can copy and paste it into the correct <span>place later.</span></li>
<li class="calibre14">The first thing we need to do is get a reference to the Action Asset that holds all of our Actions. Create the following <span>variable declaration:</span><pre class="source-code">
[SerializeField] private InputActionAsset actions;</pre></li> <li class="calibre14">We can go ahead and hook this up in the Inspector by dragging the <strong class="source-inline">CatActions</strong> asset into the <span><strong class="bold">Actions</strong></span><span> slot.</span></li>
<li class="calibre14">Return to the script. Add an empty <strong class="source-inline">OnEnable()</strong> method and <strong class="source-inline">OnDisable()</strong> method to <a id="_idIndexMarker1268" class="pcalibre pcalibre1 calibre6"/>your script. We’ll add some code to <span>them momentarily.</span><p class="calibre3">I prefer to put the <strong class="source-inline">OnEnable()</strong> method right under the <strong class="source-inline">Awake()</strong> method since it executes after it and the <strong class="source-inline">OnDisable()</strong> method at the bottom of the script since it will execute after all of our <span>other methods.</span></p></li>
<li class="calibre14">Since we are referencing our Actions via code, we will need to enable and disable our Action Map. Add the following boldened lines of code to your <strong class="source-inline">OnEnable()</strong> and <span><strong class="source-inline">OnDisable()</strong></span><span> methods.</span><pre class="source-code">
private void OnEnable()
{
    actions.FindActionMap("Player").Enable();
}
private void OnDisable()
{
    actions.FindActionMap("Player").Disable();
}</pre></li> <li class="calibre14">Now let’s hook up our Jump Action. We will accomplish this by subscribing to the Jump Action’s <strong class="source-inline">performed</strong> event. Add the following code to your <span><strong class="source-inline">OnEnable()</strong></span><span> method.</span><pre class="source-code">
actions.FindActionMap("Player").FindAction("Jump").performed += OnJump;</pre><p class="calibre3">This should be enough to get the <strong class="source-inline">OnJump()</strong> method we already wrote working with your Action Map. Play the game and you can now see the cat jump when you press the <span>space bar.</span></p></li> <li class="calibre14">While not entirely necessary for this example, I prefer to make a habit of always unsubscribing from any events I subscribe to in <strong class="source-inline">OnDisable()</strong>. Making a habit of doing it will save me from problems in the future when it is necessary. So, add the following line of code to the top of your <span><strong class="source-inline">OneDisable()</strong></span><span> method:</span><pre class="source-code">
actions.FindActionMap("Player").FindAction("Jump").performed -= OnJump;</pre></li> <li class="calibre14">Now let’s hook up our Move Action. To do this, we can create a reference to the <strong class="source-inline">InputAction</strong> that represents the Move Action to make it easily accessible via code. Add the <a id="_idIndexMarker1269" class="pcalibre pcalibre1 calibre6"/>following variable declaration to the top of <span>your code:</span><pre class="source-code">
private InputAction playerMoveAction;</pre></li> <li class="calibre14">Now let’s initialize it. Add the following line of code to your <span><strong class="source-inline">OnEnable()</strong></span><span> method.</span><pre class="source-code">
playerMoveAction = actions.FindActionMap("Player").FindAction("Move");</pre></li> <li class="calibre14">Instead of subscribing to the Move Action, we’ll poll it in our <strong class="source-inline">Update()</strong> method. Cut and paste the following code from within your commented out <strong class="source-inline">OnMove()</strong> method to the top of your <strong class="source-inline">Update()</strong> method. You can delete the <strong class="source-inline">OnMove()</strong> <span>method now.</span><pre class="source-code">
moveVector = context.ReadValue&lt;Vector2&gt;();</pre></li> <li class="calibre14">You will get an error on the <strong class="source-inline">context</strong> variable. It was a parameter for the <strong class="source-inline">OnMove()</strong> method and does not exist within the <strong class="source-inline">Update()</strong> method. Instead of reading the value of <strong class="source-inline">context</strong>, we will read the value of <strong class="source-inline">playerMoveAction</strong>. Replace <strong class="source-inline">context</strong> with <strong class="source-inline">playerMoveAction</strong> so that your <strong class="source-inline">Update()</strong> method appears <span>as follows:</span><pre class="source-code">
void Update()
{
    moveVector = playerMoveAction.ReadValue&lt;Vector2&gt;();
    catRigidbody.velocity = new Vector2(speed * moveVector.x, catRigidbody.velocity.y);
}</pre><p class="calibre3">And that should be sufficient to get our cat moving with Actions and without the <strong class="source-inline">PlayerInput</strong> component. Play the game and watch the cat move around and jump when you press the <span>appropriate keys.</span></p></li> </ol>
<p class="calibre3">I know that setting our specific project up to use the Input System rather than using the Input Manager was a lot more work and may not seem worth it. And for this tiny example, that is probably true. However, if we wanted to create a cross platform version of this project that accepted inputs from multiple types of devices, adding new Bindings to an Action within<a id="_idIndexMarker1270" class="pcalibre pcalibre1 calibre6"/> an Action Map is significantly less work than adding in a new line of code for each possible input configura<a id="_idTextAnchor524" class="pcalibre pcalibre1 calibre6"/>tion we want to <span>work with.</span></p>
<h1 id="_idParaDest-325" class="calibre5"><a id="_idTextAnchor525" class="pcalibre pcalibre1 calibre6"/>Summary</h1>
<p class="calibre3">In this chapter, we covered how to use the New Input System to collect input for your game. This allows us to make an easily customizable input system that can make controlling our game via various input devices significantly easier in the long run. It may take a bit if set work to set up, but it can save you a lot of effort in the <span>long run.</span></p>
<p class="calibre3">And so, we come to an end of the book! I have no more User Interface knowledge to impart <span>to you.</span></p>
</div>
</div></body></html>