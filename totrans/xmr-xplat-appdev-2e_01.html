<html><head></head><body>
<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch01" class="calibre1"/>Chapter 1. Setting Up Xamarin</h1></div></div></div><p class="calibre8">Xamarin's development tools have given us the power to develop native iOS, Android, and Mac applications in C#, which is one of the most popular programming languages. There are many advantages of choosing Xamarin to develop mobile applications instead of Java and Objective-C. You can share code between both the platforms and can be more productive by taking advantage of the advanced language features of C# and the .NET base class libraries. Alternatively, you would have to write the app twice for Android and iOS and lose the benefits of garbage collection when using Objective-C.</p><p class="calibre8">In comparison to other techniques of <a id="id0" class="calibre1"/>developing cross-platform applications with JavaScript and HTML, Xamarin also has some distinct advantages. C# is generally more performant than JavaScript, and Xamarin gives developers direct access to the native APIs on each platform. This allows Xamarin applications to have a native look and perform in a manner similar to their Java or Objective-C counterparts.</p><p class="calibre8">Xamarin's tooling works by compiling your C# into a native <a id="id1" class="calibre1"/><strong class="calibre2">ARM</strong> executable that can be packaged as an iOS or Android application. It bundles a stripped-down version of the Mono runtime with your application that only includes the features of the base class libraries your app uses.</p><div><img src="img/00002.jpeg" alt="Setting Up Xamarin" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">In this chapter, we'll set up everything you need to get started on developing with Xamarin. By the end of this chapter, we'll have all the proper SDKs and tools installed and all the developer accounts needed for app store submission.</p><p class="calibre8">In this chapter, we will cover:</p><div><ul class="itemizedlist"><li class="listitem">An introduction to Xamarin tools and technology</li><li class="listitem">Installing Xcode, Apple's IDE</li><li class="listitem">Setting up all Xamarin tools and software</li><li class="listitem">Setting up the Android emulator</li><li class="listitem">Enrolling in the iOS Developer Program</li><li class="listitem">Registering for Google Play</li></ul></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_1"><a id="ch01lvl1sec08" class="calibre1"/>The Xamarin tools</h1></div></div></div><p class="calibre8">Xamarin has developed three core <a id="id2" class="calibre1"/>products for developing cross-platform applications: <strong class="calibre2">Xamarin Studio</strong> (formerly MonoDevelop), <strong class="calibre2">Xamarin.iOS</strong> (formerly MonoTouch), and <strong class="calibre2">Xamarin.Android</strong> (formerly Mono for Android). These tools allow developers to<a id="id3" class="calibre1"/> leverage the native libraries on<a id="id4" class="calibre1"/> iOS and Android and are built on the Mono<a id="id5" class="calibre1"/> runtime.</p><p class="calibre8">
<strong class="calibre2">Mono</strong>, an open source<a id="id6" class="calibre1"/> implementation of C# and the .NET framework, was originally developed by Novell to be used on Linux operating systems. Since iOS and Android are similarly based on Linux, Novell was able to develop MonoTouch and Mono for Android as products to target the new mobile platforms. Shortly after their release, another company acquired Novell, and the Mono team left to form a new company. Very shortly after, Xamarin was founded to focus completely on these tools for developing with C# on iOS and Android.</p><p class="calibre8">Getting a development machine ready for cross-platform application development can take some time. And to make matters worse, Apple and Google both have their own requirements for development on their respective platforms. Let's go over what needs to be installed on your machine.</p><p class="calibre8">To get started on iOS, we'll need to install the following:</p><div><ul class="itemizedlist"><li class="listitem"><strong class="calibre2">Xcode</strong>: This is the core IDE for <a id="id7" class="calibre1"/>developing iOS and Mac applications in Objective-C</li><li class="listitem"><strong class="calibre2">Xcode Command Line Tools</strong>: These are installed inside Xcode, and provide common command-line tools and<a id="id8" class="calibre1"/> scripting languages that developers will find useful, such as Subversion, Git, Perl, and Ruby</li><li class="listitem"><strong class="calibre2">The Mono runtime for Mac</strong>: This is<a id="id9" class="calibre1"/> required for compiling and running C# programs on OS X</li><li class="listitem"><strong class="calibre2">Xamarin.iOS</strong>: This is Xamarin's<a id="id10" class="calibre1"/> core product for iOS development</li></ul></div><p class="calibre8">Android also requires the following<a id="id11" class="calibre1"/> software to be installed to get started:</p><div><ul class="itemizedlist"><li class="listitem"><strong class="calibre2">Java</strong>: This is the core runtime<a id="id12" class="calibre1"/> for running Java applications on OS X</li><li class="listitem"><strong class="calibre2">Android SDK</strong>: This <a id="id13" class="calibre1"/>contains Google's standard SDK, device drivers, and emulators for native Android development</li><li class="listitem"><strong class="calibre2">The Mono runtime for Mac</strong>: This is<a id="id14" class="calibre1"/> required for compiling and running C# programs on OS X</li><li class="listitem"><strong class="calibre2">Xamarin.Android</strong>: This is<a id="id15" class="calibre1"/> Xamarin's core product for Android development</li></ul></div><p class="calibre8">Each of these will take some time to download and install. If you can access a fast Internet connection, it will help speed up the installation and setup process. With everything ready to go, let's move ahead step-by-step, and hopefully, we can skip a few dead-ends you might otherwise run into.</p><div><h3 class="title2"><a id="tip02" class="calibre1"/>Tip</h3><p class="calibre8">It is important to note that Xamarin can also be used on Windows and Visual Studio, even though it is not covered in this book. A Mac is required for iOS development, so Windows developers must connect Visual Studio to a Mac to compile for iOS. Luckily, most of what we learn in this book can be directly applied to using Xamarin on Windows.</p></div></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec09" class="calibre1"/>Installing Xcode</h1></div></div></div><p class="calibre8">To make things <a id="id16" class="calibre1"/>progress more smoothly, let's start off by installing Xcode for Mac. Along with Apple's IDE, it will also install the most commonly used developer tools on the Mac. Make sure you have at least OS X 10.8 (Mountain Lion), and locate Xcode in the App Store, as shown in the following screenshot:</p><div><img src="img/00003.jpeg" alt="Installing Xcode" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">This will take quite some time to download and install. I'd recommend that you take the time to enjoy a nice cup of coffee or work on another project to pass the time.</p><p class="calibre8">When that is out<a id="id17" class="calibre1"/> of the way, launch Xcode for the first time and progress through the initial startup dialog. Next, navigate to <strong class="calibre2">Xcode</strong> | <strong class="calibre2">Preferences…</strong> to open Xcode's main settings dialog.</p><p class="calibre8">In the <strong class="calibre2">Downloads </strong>tab, you'll notice several additional packages you can install inside Xcode. Here, you can download the official iOS documentation, which the Xamarin installer will make use of. Optionally, you can install older iOS simulators, but we can just use the default one for the content in this book. When you're finished, your Xcode's <strong class="calibre2">Components</strong> section should look something similar to the following screenshot:</p><div><img src="img/00004.jpeg" alt="Installing Xcode" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">Installing Xcode installs the iOS SDK, which is a requirement for iOS development in general. As a restriction from Apple, the iOS SDK can only run on a Mac. Xamarin has done everything possible to<a id="id18" class="calibre1"/> make sure they follow Apple's guidelines for iOS, such as restricting dynamic code generation. Xamarin's tools also leverage features of Xcode wherever possible to avoid reinventing the wheel.</p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec10" class="calibre1"/>Installing Xamarin</h1></div></div></div><p class="calibre8">After installing Xcode, there are several other dependencies that need to be installed in order prior to developing<a id="id19" class="calibre1"/> with Xamarin's tools. Luckily, Xamarin has improved the experience by creating a neat all-in-one installer.</p><p class="calibre8">Install the free Xamarin Starter Edition by performing the following steps:</p><div><ol class="orderedlist"><li class="listitem" value="1">Go to <a class="calibre1" href="http://Xamarin.com">http://Xamarin.com</a> and click on the large <strong class="calibre2">Download now</strong> button.</li><li class="listitem" value="2">Fill out some basic information about yourself.</li><li class="listitem" value="3">Download the <code class="literal">XamarinInstaller.dmg</code> file and mount the disk image.</li><li class="listitem" value="4">Launch <code class="literal">Install Xamarin.app</code> and accept any OS X security warnings that appear.</li><li class="listitem" value="5">Progress through the installer; the default options will work fine. You can optionally install <strong class="calibre2">Xamarin.Mac</strong>, but this topic is not covered in this book.</li></ol><div></div><p class="calibre8">The Xamarin installer will <a id="id20" class="calibre1"/>download and install prerequisites such as the Mono runtime, Java, the Android SDK (including the Android emulator and tools), and everything else you need to get up and running.</p><p class="calibre8">You will end up with something similar to what is shown in the following screenshot, and we can move on to conquer bigger topics in cross-platform development:</p><div><img src="img/00005.jpeg" alt="Installing Xamarin" class="calibre9"/></div><p class="calibre10"> </p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec11" class="calibre1"/>Choosing a Xamarin license</h1></div></div></div><p class="calibre8">Xamarin's tools can seem a bit pricy to the casual observer, but I tend to think of it as how much time you will save using a more productive language such as C#. Additionally, their products will save you a good percentage of development time by enabling you to develop a cross-platform <a id="id21" class="calibre1"/>application instead of writing it twice in Java and Objective-C.</p><p class="calibre8">Xamarin has several <a id="id22" class="calibre1"/>editions, so it is good to know the differences in <a id="id23" class="calibre1"/>order to determine which license you might need to purchase. The editions are as follows:</p><div><ul class="itemizedlist"><li class="listitem"><strong class="calibre2">Starter Edition</strong>: This is available to individuals only, and it has a limit of 64 KB of compiled user code. Certain<a id="id24" class="calibre1"/> features are unavailable such as the Xamarin.Forms framework and calling into third-party native libraries.</li><li class="listitem"><strong class="calibre2">Indie Edition</strong>: This is available<a id="id25" class="calibre1"/> to individuals only, and it does not include Visual Studio support.</li><li class="listitem"><strong class="calibre2">Business Edition</strong>: This is available for <a id="id26" class="calibre1"/>companies; it adds features for Visual Studio and includes better Xamarin product support.</li><li class="listitem"><strong class="calibre2">Enterprise Edition</strong>: This<a id="id27" class="calibre1"/> includes prime components in the Xamarin Component Store for free and many more Xamarin support options such as hotfixes and less than 24 hours response time to issues.</li></ul></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec12" class="calibre1"/>Setting up the Android emulator</h1></div></div></div><p class="calibre8">The Android emulator<a id="id28" class="calibre1"/> has historically been known to be sluggish compared to developing on a physical device. To help solve this issue, Google has produced a new x86 emulator that supports hardware acceleration on desktop computers. It isn't installed by default in the <a id="id29" class="calibre1"/><strong class="calibre2">Android Virtual Device</strong> (<strong class="calibre2">AVD</strong>) Manager, so let's set that up.</p><p class="calibre8">The x86 Android emulator can be installed by performing the following steps:</p><div><ol class="orderedlist"><li class="listitem" value="1">Open Xamarin Studio.</li><li class="listitem" value="2">Navigate to <strong class="calibre2">Tools</strong> | <strong class="calibre2">Open Android SDK Manager…</strong>.</li><li class="listitem" value="3">Scroll down to <strong class="calibre2">Extras</strong>; install <strong class="calibre2">Intel x86 Emulator Accelerator (HAXM)</strong>. This will download an installer that we have to run.</li><li class="listitem" value="4">Open Finder and press <em class="calibre12">Command</em> + <em class="calibre12">Shift</em> + <em class="calibre12">G</em> to open the navigation popup.</li><li class="listitem" value="5">Navigate to <code class="literal">~/Library/Developer/Xamarin/android-sdk-macosx/extras/intel</code> and install the appropriate package (based on your Mac OS X version).</li><li class="listitem" value="6">Scroll to <strong class="calibre2">Android 4.4.2 (API 19)</strong>; install <strong class="calibre2">Intel x86 Atom System Image</strong>.</li><li class="listitem" value="7">Optionally, install any other packages you are interested in. As a shortcut, the Android SDK Manager automatically selects certain packages for you to install by default.</li><li class="listitem" value="8">Close the Android SDK Manager and switch back to Xamarin Studio.</li><li class="listitem" value="9">Navigate to <strong class="calibre2">Tools</strong> | <strong class="calibre2">Open Android Emulator Manager…</strong>.</li><li class="listitem" value="10">Click on <strong class="calibre2">Create…</strong>.</li><li class="listitem" value="11">Enter an AVD name of your choice, such as <code class="literal">x86 Emulator</code>.</li><li class="listitem" value="12">Pick a generic device that will be appropriately sized for your display, such as one with a <strong class="calibre2">4" WVGA</strong> display.</li><li class="listitem" value="13">As <strong class="calibre2">Target</strong>, make sure that you select <strong class="calibre2">Intel x86 Atom System Image</strong>.</li><li class="listitem" value="14">After creating the device, go ahead and click on <strong class="calibre2">Start…</strong> to make sure the emulator runs properly.</li></ol><div></div><p class="calibre8">The emulator will<a id="id30" class="calibre1"/> take some time to start up, so it is a good idea to leave the emulator running while performing Android development. Xamarin is using the standard Android tools here, so you would have the same issue while developing with Java. If everything starts properly, you will see an Android boot screen followed by a virtual Android device ready for deploying applications from Xamarin Studio, as shown in the following screenshot:</p><div><img src="img/00006.jpeg" alt="Setting up the Android emulator" class="calibre9"/></div><p class="calibre10"> </p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec13" class="calibre1"/>Enrolling in the iOS Developer Program</h1></div></div></div><p class="calibre8">To deploy<a id="id31" class="calibre1"/> to an iOS device, Apple requires membership to its iOS Developer Program. Membership is $99 USD per year and gives you access to deploy 200 devices for development purposes. You also get access to test servers for implementing more advanced iOS features such as in-app purchases, push notifications, and iOS Game Center. Testing your Xamarin.iOS applications on a physical device is important, so I recommend that you get an account prior to starting iOS development. Performance is very different in a simulator running on your desktop versus a real mobile device. There are also a few Xamarin-specific optimizations that only occur when running on<a id="id32" class="calibre1"/> a real device. We'll fully cover the reasons for testing your apps on devices in the later chapters.</p><p class="calibre8">Signing up for the iOS<a id="id33" class="calibre1"/> Developer Program can be performed through the following steps:</p><div><ol class="orderedlist"><li class="listitem" value="1">Go to <a class="calibre1" href="https://developer.apple.com/programs/ios">https://developer.apple.com/programs/ios</a>.</li><li class="listitem" value="2">Click on <strong class="calibre2">Enroll Now</strong>.</li><li class="listitem" value="3">Sign in with an existing iTunes account or create a new one. This can't be changed later, so choose one that is appropriate for your company.</li><li class="listitem" value="4">Enroll either as an individual or a company. Both are priced at $99; but, registering as a company will require paperwork to be faxed to Apple with the assistance of your company's accountant.</li><li class="listitem" value="5">Review the developer agreement.</li><li class="listitem" value="6">Fill out Apple's survey for developers.</li><li class="listitem" value="7">Purchase the $99 developer registration.</li><li class="listitem" value="8">Wait for a confirmation e-mail.</li></ol><div></div><p class="calibre8">You should receive an e-mail that looks something similar to the following screenshot within two business days:</p><div><img src="img/00007.jpeg" alt="Enrolling in the iOS Developer Program" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">From here, we <a id="id34" class="calibre1"/>can continue setting up your account:</p><div><ol class="orderedlist"><li class="listitem" value="1">Either click on <strong class="calibre2">Log in now</strong> from the<a id="id35" class="calibre1"/> e-mail you received or go to <a class="calibre1" href="https://itunesconnect.apple.com">https://itunesconnect.apple.com</a>.</li><li class="listitem" value="2">Log in with your earlier iTunes account.</li><li class="listitem" value="3">Agree to any additional agreements that appear on the home page of your dashboard.</li><li class="listitem" value="4">From the iTunes Connect dashboard, navigate to <strong class="calibre2">Agreements, Tax, and Banking</strong>.</li><li class="listitem" value="5">In this section, you will see three columns for <strong class="calibre2">Contact Info</strong>, <strong class="calibre2">Bank Info</strong>, and <strong class="calibre2">Tax Info</strong>.</li><li class="listitem" value="6">Fill out the appropriate information for your account in all of these sections. Assistance from an accountant will most likely be needed for a company account.</li></ol><div></div><p class="calibre8">When all is said and done, your <strong class="calibre2">Contracts, Tax, and Banking </strong>section should look something similar to the following screenshot:</p><div><img src="img/00008.jpeg" alt="Enrolling in the iOS Developer Program" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">With your iOS<a id="id36" class="calibre1"/> developer account successfully registered, you will now be able to deploy to iOS devices and publish your apps to the Apple App Store.</p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec14" class="calibre1"/>Registering as a Google Play developer</h1></div></div></div><p class="calibre8">Unlike iOS, deploying<a id="id37" class="calibre1"/> your applications to Android devices is free and just requires a few changes in your device settings. A Google Play developer account has only a one-time fee of $25 and doesn't have to be renewed each year. However, just like iOS, you will need a Google Play account to develop in-app purchases, push notifications, or Google Play game services. I would recommend that you set up an account ahead of time if you inevitably plan on submitting an app to Google Play or need to implement one of these features.</p><p class="calibre8">To register as a developer for Google Play, perform the following steps:</p><div><ol class="orderedlist"><li class="listitem" value="1">Go to <a class="calibre1" href="https://play.google.com/apps/publish">https://play.google.com/apps/publish</a>.</li><li class="listitem" value="2">Log in with an existing Google Account or create a new one. This can't be changed later, so choose one that is appropriate for your company if needed.</li><li class="listitem" value="3">Accept the agreement and enter your credit card information.</li><li class="listitem" value="4">Choose a developer name and enter other important information for your account. Again, choose names appropriate for your company to be seen by users in the app store.</li></ol><div></div><p class="calibre8">If everything is filled out correctly, you will end up with the following Google Play Developer Console:</p><div><img src="img/00009.jpeg" alt="Registering as a Google Play developer" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">If you plan on selling paid apps or in-app purchases, at this point, I would recommend that you set up your <a id="id38" class="calibre1"/><strong class="calibre2">Google merchant account</strong>. This will enable Google to pay you the proceeds toward your app sales by applying the appropriate tax laws in your country. If you are setting this up for your company, I would recommend that you get the assistance of your company's accountant or bookkeeper.</p><p class="calibre8">The following are<a id="id39" class="calibre1"/> the steps to set up a Google merchant account:</p><div><ol class="orderedlist"><li class="listitem" value="1">Click on the <strong class="calibre2">set up a merchant account</strong> button.</li><li class="listitem" value="2">Log in with your Google account a second time.</li><li class="listitem" value="3">Fill out the appropriate information for selling apps: address, phone number, tax information, and a display name to appear on your customers' credit card bill.</li></ol><div></div><p class="calibre8">When done, you will see that the help tip for setting up a merchant account is now missing from the developer console, as shown in the following screenshot:</p><div><img src="img/00010.jpeg" alt="Registering as a Google Play developer" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">At this point, one would think that our account would be fully set up, but there is one more crucial step<a id="id40" class="calibre1"/> prior to being able to sell apps: we have to enter the banking information.</p><p class="calibre8">Setting up banking for your Google merchant account can be performed with the following steps:</p><div><ol class="orderedlist"><li class="listitem" value="1">Go back to the <a id="id41" class="calibre1"/>Google Play <strong class="calibre2">Developer Console</strong> at <a class="calibre1" href="https://play.google.com/apps/publish">https://play.google.com/apps/publish</a>.</li><li class="listitem" value="2">Click on the <strong class="calibre2">Financial Reports</strong> section.</li><li class="listitem" value="3">Click on the small link titled <strong class="calibre2">Visit your merchant account for details</strong>.</li><li class="listitem" value="4">You should see a warning indicating that you do not have a bank account set up. Click on the <strong class="calibre2">Specify a Bank Account</strong> link to get started.</li><li class="listitem" value="5">Enter your banking information. Again, a company accountant might be needed.</li><li class="listitem" value="6">In a few days, look for a small deposit in your account from Google.</li><li class="listitem" value="7">Confirm the amount by going to <a class="calibre1" href="http://checkout.google.com/sell">http://checkout.google.com/sell</a>.</li><li class="listitem" value="8">Click on the <strong class="calibre2">Settings</strong> tab, then <strong class="calibre2">Financials</strong>.</li><li class="listitem" value="9">Next, click on <strong class="calibre2">Verify Account</strong>.</li><li class="listitem" value="10">Enter the amount that appeared on your bank account and click on <strong class="calibre2">Verify deposit</strong>.</li></ol><div></div><p class="calibre8">Your Google <a id="id42" class="calibre1"/>merchant account is also the place where you can cancel or refund customer orders. Google Play is different from the iOS App Store in that all customer issues are directed to the developers.</p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec15" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">In this chapter, we discussed Xamarin's core products for developing Android and iOS applications in C#: Xamarin Studio, Xamarin.iOS, and Xamarin.Android. We installed Xcode and then ran the Xamarin all-in-one installer, which installs Java, the Android SDK, Xamarin Studio, Xamarin.iOS, and Xamarin.Android. We set up the x86 Android emulator for a faster, more fluid experience when debugging applications. Finally, we set up iOS and Google Play developer accounts for distributing our applications.</p><p class="calibre8">In this chapter, you should have acquired everything you need to get started on building cross-platform applications with Xamarin. Your development computer should be ready to go and you should have all the native SDKs installed and ready for creating the next great app to take the world by storm.</p><p class="calibre8">The concepts in this chapter will set us up for more advanced topics that will require the proper software installed as well as developer accounts with Apple and Google. We will be deploying applications to real devices and implementing more advanced features such as push notifications. In the next chapter, we'll create our first iOS and Android application and cover the basics of each platform.</p></div></body></html>