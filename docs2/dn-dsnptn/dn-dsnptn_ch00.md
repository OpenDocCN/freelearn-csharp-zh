# 前言

编写现代企业级软件需要大型团队，这些团队需要紧密协作以交付高质量的产品和服务。在处理技术解决方案和工件时，团队需要一个共同的语言进行沟通，以便作为一个统一的整体来实现既定的目标。GOF 设计模式目录是朝着这个方向迈出的重要一步。随后出现了其他类似的目录，旨在为软件工程团队提供共同的共享惯用和惯例的宝库。从实际应用的角度来看，GOF 模式成为了模式的必要条件。但还有其他同样重要的目录，你可能会想要利用。

已有尝试将模式目录映射到 JEE 和.NET 等平台。J2EE 设计模式和微软的“模式与实践”目录就是这方面的尝试。函数式编程和响应式编程模型的出现和采用要求对模式进行新的审视，并将其应用于现代.NET 软件开发。这正是本书的切入点。本书提供了使用 C#/.NET 编写的详细示例，这将帮助开发者将不同模式目录中的不同结构映射到可执行代码。

你手中的这本书概述了作者关于如何利用.NET 平台将设计、架构和领域模式应用于实践的观点。涵盖的主题包括各种模式和模式目录，包括 GOF 模式、并发编程、对象/函数式编程和函数式响应式编程。最后一章讨论了本书未能涵盖，但现代程序员应该掌握以成为有效开发者的材料。

正如我们所知，学习是一个持续的过程。我们尽我们所能将工作中的学习经验传授给他人，以便让任何感兴趣的人受益。我们广泛利用代码，通过非常详细的示例来说明这一点。UML 和上下文图的设计说明伴随着概念和代码。我们概述的观点和视角大多与行业参考和标准一致。

# 本书涵盖的内容

第一章，*模式和模式目录简介*，涉及关键模式目录的概述，以及 C#编程语言的演变。本章涉及 GOF、POSA、DDD、EIP、J2EE、POEAA 以及 Arlow 和 Neustadt 模式目录的精髓。

第二章, *《为什么我们需要设计模式？》*，提供了在软件工程背景下应用模式的理由。本章讨论了一些基础原则，如 SOLID、KISS、YAGNI、DRY/WET 等，这些原则为面向模式的软件开发奠定了基础。给出了一个使用工厂方法模式、模板方法模式和契约设计的运行示例，即税收计算引擎。

第三章, *《日志库》*，实现了一个可以在多线程环境中使用的日志库。该实现利用了模板方法模式、策略模式和工厂方法模式。一个自定义的依赖注入框架动态加载类。

第四章, *《面向多个数据库》*，展示了如何在不更改应用代码的一行的情况下使用不同的持久化技术（Oracle、SQL Server、SQLite 等）。该库利用 ADO.net，并使用抽象工厂模式、工厂模式和适配器模式。

第五章, *《生成表格报告》*，展示了如何基于组合模式创建一个规范的对象模型，并通过访问者模式遍历对象模型以生成 HTML 和 PDF 文档。

第六章, *《绘制数学表达式》*，处理了一个使用组合、解释器、观察者、构建器和外观模式的库，该库可以在 Windows Presentation Foundation 上动态绘制任意数学表达式。

第七章, *《.NET 基类库中的模式》*，展示了.NET 基类库的设计者如何利用各种 GOF 模式为开发者提供一个良好的编程模型*.*

第八章, *《.NET 下的并发与并行编程》*，通过利用.NET 平台提供的结构，深入探讨了并发与并行编程这一非常重要的主题。如并发与并行、fork/join 并行、生产者-消费者模型等主题都进行了深入探讨。

第九章, *《更好状态管理的函数式编程技术》*，处理了通过利用闭包、lambda、不可变性、LINQ 和其他函数式编程技术来管理状态这一非常重要的主题。

第十章，*使用对象/函数式编程实现模式*，通过巧妙地混合函数式和面向对象编程结构，说明了 Map/Reduce、模板方法模式、迭代器模式和策略模式。

第十一章，*什么是响应式编程？*，为您提供了功能响应式编程模型及其在.NET 平台上的实现的精髓。

第十二章，*使用.NET Rx 扩展进行响应式编程*，从上一章延续并展示了功能响应式编程技术如何应用于实际世界的具体示例。

第十三章，*使用 RxJS 进行响应式编程*，提供了对 RxJS 技术和内部结构的良好介绍，用于编写基于 Web 的响应式 UI。

第十四章，*未来的道路*，揭示了学习进展路径，强调了多语言编程、领域特定语言、本体和反模式的重要性。

# 您需要这本书的内容

阅读本书的读者应至少使用 C#作为主要编程语言在.NET 平台上工作过至少一个项目。对基本面向对象编程的良好理解将帮助您更快地掌握领域。从软件角度来看，一台装有 Visual Studio 2012（或更高版本）的笔记本电脑、台式机或虚拟机，用于测试和尝试源代码。

# 这本书面向的对象

本书对任何 C#/.NET 开发者都有用，帮助他们了解企业级应用程序的设计、开发和部署。本书不是孤立地研究各种模式，而是处理模式通常结合以构建最先进应用程序的场景。使用 Java 的开发者也可以没有太大困难地遵循本书，因为这两个平台有很多共同之处。

# 习惯用法

在这本书中，您将找到多种文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名应如下显示：“此类的实例需要传递给`List<T>`实例的`Sort`例程。”

代码块应如下设置：

```cs
    class Employee 
    { 
        public String name {get;set;} 
        public int age {get;set;} 
        public double salary { get; set; } 
    }
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```cs
    return function () { 
      try { 
 return fn.apply(null, args.slice(1)); 
      }
```

任何命令行输入或输出都应如下编写：

```cs
npm install rx

```

**新术语**和**重要词汇**将以粗体显示。你在屏幕上看到的单词，例如在菜单或对话框中，将以如下方式显示：“你可以在 JSbin 中通过使用**网页编辑器中显示的“添加库”选项**来完成这项操作。”

### 备注

警告或重要注意事项将以如下方式显示在框中。

### 小贴士

小技巧和技巧看起来像这样。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢什么或不喜欢什么。读者反馈对我们非常重要，因为它帮助我们开发出您真正能从中受益的标题。要发送一般性反馈，请简单地发送电子邮件至 feedback@packtpub.com，并在邮件主题中提及书名。如果您在某个领域有专业知识，并且对撰写或为书籍做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在，您已经成为 Packt 图书的骄傲拥有者，我们有许多事情可以帮助您充分利用您的购买。

## 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)的账户下载本书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  使用您的电子邮件地址和密码登录或注册我们的网站。

1.  将鼠标指针悬停在顶部的**支持**标签上。

1.  点击**代码下载与勘误表**。

1.  在**搜索**框中输入书籍名称。

1.  选择您想要下载代码文件的书籍。

1.  从下拉菜单中选择您购买此书籍的来源。

1.  点击**代码下载**。

文件下载完成后，请确保使用最新版本解压缩或提取文件夹：

+   WinRAR / 7-Zip for Windows

+   Zipeg / iZip / UnRarX for Mac

+   7-Zip / PeaZip for Linux

该书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/.NET-Design-Patterns`](https://github.com/PacktPublishing/.NET-Design-Patterns)。我们还有其他来自我们丰富图书和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

## 勘误表

尽管我们已经尽最大努力确保内容的准确性，错误仍然可能发生。如果您在我们的书籍中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一情况，我们将不胜感激。通过这样做，您可以避免其他读者感到沮丧，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站或添加到该标题的勘误部分现有的勘误列表中。

要查看之前提交的勘误，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书籍名称。所需信息将出现在**勘误**部分下。

## 盗版

在互联网上对版权材料的盗版是一个跨所有媒体的持续问题。在 Packt，我们非常重视保护我们的版权和许可证。如果您在互联网上发现任何形式的我们作品的非法副本，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过版权@packtpub.com 与我们联系，并提供涉嫌盗版材料的链接。

我们感谢您在保护我们的作者和我们为您提供有价值内容的能力方面提供的帮助。

## 问题

如果您对本书的任何方面有问题，您可以通过 questions@packtpub.com 与我们联系，我们将尽力解决问题。
