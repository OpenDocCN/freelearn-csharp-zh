<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Creating Widgets</h1></div></div></div><p>In this chapter, we will create our first sprite widget and understand how it works. Then we will create one sample of each important widget template, and analyze their corresponding parameters so that you know how to create and configure them.</p><p>At the end of this<a id="id39" class="indexterm"/> chapter,<a id="id40" class="indexterm"/> we will have a functional main<a id="id41" class="indexterm"/> menu with most of NGUI's widgets.</p><div><div><div><div><h1 class="title"><a id="ch02lvl1sec13"/>Creating our first widget</h1></div></div></div><p>We will create our first sprite widget to display our main menu's background window. In order to do that easily, NGUI has a <strong>Widget Wizard</strong>
<a id="id42" class="indexterm"/> with a few templates for us.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec19"/>Widget Wizard</h2></div></div></div><p>The Widget Wizard <a id="id43" class="indexterm"/>can be opened by navigating to <strong>NGUI</strong> | <strong>Open</strong> | <strong>Widget Wizard</strong>. It will look like the following screenshot:</p><div><img src="img/8667OT_02_01.jpg" alt="Widget Wizard"/></div><p>As you can see in the previous screenshot, to create a widget, you require <strong>Atlas</strong> and <strong>Font</strong> to be configured. As said in <a class="link" href="ch01.html" title="Chapter 1. Getting Started with NGUI">Chapter 1</a>, <em>Getting Started with NGUI</em>, an atlas is a large texture containing the sprites that you need to create your UI. For the rest of this chapter, we will use the default atlas named <strong>SciFi Atlas</strong>
<a id="id44" class="indexterm"/>, which is included in the plugin.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec20"/>Selecting an atlas</h2></div></div></div><p>Let's select <a id="id45" class="indexterm"/>our <a id="id46" class="indexterm"/>default SciFi atlas, which contains the necessary sprites, as follows:</p><div><ol class="orderedlist arabic"><li class="listitem">In the <strong>Project</strong> view, navigate to <strong>Assets</strong> | <strong>NGUI</strong> | <strong>Examples</strong> | <strong>Atlases</strong> | <strong>SciFi</strong>.</li><li class="listitem">Drag-and-drop the prefab <code class="literal">SciFi Atlas.prefab</code> in the <strong>Atlas</strong> field.</li><li class="listitem">Drag-and-drop the prefab <code class="literal">SciFi Font – Header.prefab</code> in the <strong>Font</strong> field.</li></ol></div><p>We have our <strong>Atlas</strong> and <strong>Font</strong> prefabs selected. We can now create a widget from a template.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec21"/>Creating a widget from a template</h2></div></div></div><p>Let's create a widget<a id="id47" class="indexterm"/> from a template by performing the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Click on the drop-down menu next to the <strong>Template</strong> field.</li><li class="listitem">Select the <strong>Sprite</strong> option as <strong>Template</strong>.</li><li class="listitem">Click on the drop-down menu next to the <strong>Sprite</strong> field.</li><li class="listitem">Select the sprite named <strong>Dark</strong>.</li><li class="listitem">Leave the <strong>Pivot</strong> option as <strong>Center</strong>.</li><li class="listitem">Make sure you have selected <strong>Panel</strong> in the <strong>Hierarchy</strong> view.</li><li class="listitem">Click on the <strong>Add To</strong> button.</li></ol></div><p>Ok, our sprite widget has been created!</p><div><div><h3 class="title"><a id="note04"/>Note</h3><p>The widget wizard adds the new widget as the child of the selected GameObject or panel. If you have selected the wrong GameObject, you can still drag-and-drop the new widget into the right GameObject after it is created.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec22"/>Transforming widgets</h2></div></div></div><p>We have created <a id="id48" class="indexterm"/>our first widget: <strong>Sprite (Dark)</strong>. Select it in the <strong>Hierarchy</strong> view and try the following manipulations to change its transform values.</p><div><div><div><div><h3 class="title"><a id="ch02lvl3sec07"/>Moving widgets</h3></div></div></div><p>In the <strong>Scene</strong> view, <a id="id49" class="indexterm"/>you can use the <strong>handles</strong> to move your widget or you may enter coordinates directly in the <strong>Inspector</strong> view's <strong>X</strong>, <strong>Y</strong>, or <strong>Z</strong> parameters. The following screenshot is of the <strong>Scene</strong> view with the three parameters visible:</p><div><img src="img/8667OT_02_02.jpg" alt="Moving widgets"/></div><p>You should always leave the <strong>Z</strong> coordinates at 0. If you need to place a widget behind or in front of another, use the <strong>Back</strong> and <strong>Forward</strong> buttons in the <strong>Inspector</strong> view to control your widget's depth.</p><div><div><h3 class="title"><a id="tip02"/>Tip</h3><p>You may move your widget on only one axis by pressing <em>Shift</em> before you click on the axis's handle.</p></div></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec08"/>Rotating widgets</h3></div></div></div><p>On the <strong>Scene</strong> view, <a id="id50" class="indexterm"/>place your mouse cursor on the outside of any blue circle surrounding your widget. Your cursor will have a rotation icon next to it. You can now keep your left mouse button pressed and move your mouse to rotate the widget.</p><div><div><h3 class="title"><a id="tip03"/>Tip</h3><p>By default, rotation is set to have a 15 degrees step. If you wish to have a more precise rotation—a 1 degree step—just hold <em>Shift</em> while rotating.</p></div></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec09"/>Scaling widgets</h3></div></div></div><p>You may have<a id="id51" class="indexterm"/> noticed that in the <strong>Inspector</strong> view, the scale value is grayed out. That's because you should use the <strong>Dimensions</strong> parameter of the <strong>UISprite</strong> component instead.</p><p>On the <strong>Scene</strong> view, place your mouse cursor on any blue circle surrounding your widget. Your cursor will have a resize icon next to it. You can now click and drag your mouse to resize the widget.</p><div><div><h3 class="title"><a id="tip04"/>Tip</h3><p>Using the blue handles will <em>not</em> keep your widget centered to its current position. If you want to resize your widget proportionally on both sides, click on the space in front of the <strong>X</strong> or <strong>Y</strong> parameter of <strong>Dimensions</strong> of the <strong>UISprite</strong> component and drag your mouse left or right.</p></div></div><p>To keep<a id="id52" class="indexterm"/> everything pixel perfect, you should avoid scaling widgets up or down with Unity's scale tool. Try to do everything with <strong>Dimensions</strong>. Let's see what other parameters we have for widgets.</p></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec23"/>Common widget parameters</h2></div></div></div><p>Select <strong>Sprite (Dark)</strong> and you<a id="id53" class="indexterm"/> will find the parameters seen in the following screenshot in the <strong>Inspector</strong> view:</p><div><img src="img/8667OT_02_03.jpg" alt="Common widget parameters"/></div><p>These parameters exist for any type of widget. Let's see what they are:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Color Tint</strong>: This is the widget's alpha-enabled color.</li><li class="listitem" style="list-style-type: disc"><strong>Clipboard</strong>: If you click on the <strong>Copy</strong> button, the current <strong>Color Tint</strong> selection is copied to this parameter. If you click on the <strong>Paste</strong> button, the <strong>Clipboard</strong> parameter's selection will be pasted to <strong>Color Tint</strong>.</li><li class="listitem" style="list-style-type: disc"><strong>Pivot</strong>: This presents two sets of buttons that can be used to choose which corner or side you want the widget's pivot to be placed.</li><li class="listitem" style="list-style-type: disc"><strong>Depth</strong>: This can be used to display your widget in front or behind others.</li><li class="listitem" style="list-style-type: disc"><strong>Dimensions</strong>: This can be used to display size in pixels instead of scaling.</li></ul></div><p>Now that we have seen the widget parameters, please enter these <strong>Dimensions</strong> for our newly created <strong>Sprite (Dark)</strong>: <code class="literal">1300</code> x <code class="literal">850</code>.</p><p>Our sprite window just got enormous and ugly. Why? Because it's a 15 x 15 sprite stretched to 1300 x 850! Let's talk about sprites and see how we can correct this.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec14"/>Sprites</h1></div></div></div><p>We have created <a id="id54" class="indexterm"/>our first <a id="id55" class="indexterm"/>sprite and understood how to move, rotate, and change its dimensions. We actually scaled it up massively compared to its original size. But this 15 x 15 sprite has something special.</p><p>If you select the <strong>Sprite (Dark)</strong> GameObject, you will see it has four dotted lines inside the <strong>Preview</strong> window in the <strong>Inspector</strong> view. This means it's a<a id="id56" class="indexterm"/> <strong>sliced</strong> <strong>sprite</strong>:</p><div><img src="img/8667OT_02_04.jpg" alt="Sprites"/></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec24"/>Sliced sprites</h2></div></div></div><p>A<a id="id57" class="indexterm"/> <strong>sliced</strong> sprite <a id="id58" class="indexterm"/>is an image divided in nine sections, making it resizable while conserving its corners' proportions. Sliced sprites may be scaled as you wish—they still look beautiful.</p><p>Since <strong>Sprite (Dark)</strong> is a 9-slice sprite, we must tell our <strong>UISprite</strong> component<a id="id59" class="indexterm"/> to treat it as such. Perform the following steps to do so:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Sprite (Dark)</strong> GameObject.</li><li class="listitem">Click on the drop-down menu next to its <strong>Sprite Type</strong> field.</li><li class="listitem">Select <strong>Sliced</strong>.</li></ol></div><p>Notice how the sprite looks good now—it's not stretched anymore!</p><div><div><h3 class="title"><a id="note05"/>Note</h3><p>The <strong>Fill Center</strong> parameter allows you to only show the sprite's borders and leave only transparency inside.</p><p>Even though sliced sprites are perfect for windows and variable size boxes, you may display regular sprites by leaving <strong>Sprite Type</strong> as <strong>Simple</strong>.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec25"/>Tiled sprites</h2></div></div></div><p>A <a id="id60" class="indexterm"/>tiling sprite<a id="id61" class="indexterm"/> is a pattern meant to be repeated indefinitely—it can be used to cover a large surface by repeating the same texture. Let's try it right now:</p><div><ol class="orderedlist arabic"><li class="listitem">In the <strong>Hierarchy</strong> view, rename <strong>Sprite (Dark)</strong> as <code class="literal">Window</code>.</li><li class="listitem">Select our <strong>Window</strong> GameObject and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Make sure it is at {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>} position and has a scale of {<code class="literal">1</code>, <code class="literal">1</code>, <code class="literal">1</code>}.</li><li class="listitem">Make sure <strong>Depth</strong> is set to <code class="literal">0</code>.</li><li class="listitem">In the <strong>Color Tint</strong> parameter, change <strong>R</strong> to <code class="literal">115</code>, <strong>G</strong> to <code class="literal">240</code>, <strong>B</strong> to <code class="literal">255</code>, and <strong>A</strong> to <code class="literal">255</code>.</li></ol></div></li></ol></div><p>Ok, we have our window. Let's create a tiled background to make it look better by performing the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>Window</strong> GameObject and duplicate it with <em>Ctrl</em> + <em>D</em>.</li><li class="listitem">Rename the duplicate as <code class="literal">Background</code>.</li><li class="listitem">Select the new <strong>Background</strong> GameObject and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Set its UISprite's <strong>Depth</strong> parameter to <code class="literal">1</code>.</li><li class="listitem">Click on the drop-down menu next to the <strong>Sprite Type</strong> field.</li><li class="listitem">Select <strong>Tiled</strong>. It doesn't look good because our sprite is not a tiling sprite.</li><li class="listitem">Click on the <strong>Sprite</strong> button.</li><li class="listitem">Select the <strong>Honeycomb</strong> sprite, which is a tiling sprite.</li><li class="listitem">In the <strong>Color Tint</strong> parameter, change <strong>R</strong> to <code class="literal">115</code>, <strong>G</strong> to <code class="literal">240</code>, <strong>B</strong> to <code class="literal">255</code>, and <strong>A</strong> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Attach a component to it by navigating to <strong>Component</strong> | <strong>NGUI</strong> | <strong>UI</strong> | <strong>Stretch</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag-and-drop our <strong>Window</strong> GameObject inside the <strong>Container</strong> field.</li><li class="listitem">Set the <strong>Style</strong> field to <strong>Both</strong>.</li></ol></div></li><li class="listitem">Attach a component to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong> | <strong>Anchor</strong> and drag-and-drop our <strong>Window</strong> GameObject inside the <strong>Container</strong> field.</li></ol></div><p>That looks better! We now have a tiling sprite for our window's background, and it looks as follows:</p><div><img src="img/8667OT_02_05.jpg" alt="Tiled sprites"/></div><p>We used the <strong>UIStretch</strong> component<a id="id62" class="indexterm"/>
<a id="id63" class="indexterm"/> to avoid setting dimensions manually; if you change the window's <strong>Dimensions</strong>, the background will resize itself automatically.</p><p>The <strong>UIAnchor</strong> component<a id="id64" class="indexterm"/> is used to make sure the background also moves with the window.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec26"/>Filled sprites</h2></div></div></div><p>A<a id="id65" class="indexterm"/> filled sprite<a id="id66" class="indexterm"/> is useful to create life bars or progress bars; with this, you can set a sprite and change the <strong>Fill Amount</strong> parameter between 0 and 1 to hide a part of it. The following screenshot shows a partially hidden progress bar:</p><div><img src="img/8667OT_02_06.jpg" alt="Filled sprites"/></div><p>Let's create this effect with the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>Background</strong> GameObject and set <strong>Sprite Type</strong> to <strong>Filled</strong>.</li><li class="listitem">Set <strong>Fill Dir</strong> to <strong>Horizontal</strong>.</li></ol></div><p>Move the<a id="id67" class="indexterm"/> <strong>Fill Amount</strong> slider and you can see what it does on the game view. You've understood the filled sprite system. Now set the <strong>Sprite Type</strong> field back to <strong>Tiled</strong>.</p><p>Ok, we've seen different sprite widgets and parameters. Let's learn how to add text.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec15"/>Labels</h1></div></div></div><p>Labels are<a id="id68" class="indexterm"/> used to display text on the screen with a specific font as shown in the following screenshot:</p><div><img src="img/8667OT_02_07.jpg" alt="Labels"/></div><p>Let's <a id="id69" class="indexterm"/>create a <a id="id70" class="indexterm"/>label widget with the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Panel</strong> GameObject.</li><li class="listitem">Navigate to <strong>NGUI</strong> | <strong>Open</strong> | <strong>Widget Wizard</strong>.</li><li class="listitem">Select the <strong>Label</strong> template.</li><li class="listitem">We have already selected a font; it will be used for this label.</li><li class="listitem">Click on the <strong>Add To</strong> button.</li></ol></div><p>A new label has been added to the panel and placed at the center of the screen.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec27"/>Parameters</h2></div></div></div><p>With <strong>Label</strong> selected,<a id="id71" class="indexterm"/> the <code class="literal">UILabel</code> parameters are shown in the <strong>Inspector</strong> view. They are as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Text</strong>: This is a large textbox that lets you type the text to be displayed.</li><li class="listitem" style="list-style-type: disc"><strong>Overflow</strong>: This offers four different behaviors for the widget when the text is larger than the label's <strong>Dimensions</strong>. The four behaviors are as follows:<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Shrink Content</strong>: This shrinks the text in order to fit</li><li class="listitem" style="list-style-type: disc"><strong>Clamp Content</strong>: This ensures overflow will never happen</li><li class="listitem" style="list-style-type: disc"><strong>Resize Freely</strong>: This resizes to display all the content and overflow</li><li class="listitem" style="list-style-type: disc"><strong>Resize Height</strong>: This resizes height only—column style</li></ul></div></li><li class="listitem" style="list-style-type: disc"><strong>Encoding</strong>: This must be checked if you want to change the characters' color by inserting the <code class="literal">[RRGGBB]</code> hexadecimal values.</li><li class="listitem" style="list-style-type: disc"><strong>Effect</strong>: This <a id="id72" class="indexterm"/>will help you add a shadow or outline effect to your label. You can adjust the <strong>Distance</strong> and <strong>Color</strong> values.</li><li class="listitem" style="list-style-type: disc"><strong>Max Lines</strong>: This is the maximum number of lines assigned for the label. For unlimited lines, leave it as <strong>0</strong>.</li><li class="listitem" style="list-style-type: disc"><strong>Pivot</strong>: The pivot also defines how the text is aligned.</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec28"/>Creating the title bar</h2></div></div></div><p>Let's add a title <a id="id73" class="indexterm"/>for our window that will look like the following screenshot:</p><div><img src="img/8667OT_02_08.jpg" alt="Creating the title bar"/></div><p>Please proceed with the following steps to create this title bar for our window:</p><div><ol class="orderedlist arabic"><li class="listitem">Select <strong>Panel</strong> and create a new child with <em>Alt</em> + <em>Shift</em> + <em>N</em>.</li><li class="listitem">Rename that new child as <code class="literal">Title</code>. It will be our Title bar container.</li><li class="listitem">Drag-and-drop the <strong>Label</strong> GameObject into the <strong>Title</strong> GameObject.</li><li class="listitem">Select our <strong>Title</strong> GameObject.</li><li class="listitem">Navigate to <strong>NGUI</strong> | <strong>Open</strong> | <strong>Widget Wizard</strong>.</li><li class="listitem">Create a new sprite using the <strong>Highlight</strong> sprite and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Rename this new sprite (<strong>Highlight</strong>) as <code class="literal">Background</code>.</li><li class="listitem">Set <strong>Sprite Type</strong> to <strong>Sliced</strong>.</li><li class="listitem">Change the <strong>Pivot</strong> option to <strong>Top</strong> (the button with the up arrow).</li><li class="listitem">Reset its <strong>Transform</strong> position to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">In the <strong>Color Tint</strong> parameter, change <strong>R</strong> to <code class="literal">95</code>, <strong>G</strong> to <code class="literal">255</code>, <strong>B</strong> to <code class="literal">150</code>, and <strong>A</strong> to <code class="literal">200</code>.</li><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">2</code>.</li></ol></div></li><li class="listitem">Attach a component to it by navigating to <strong>Component</strong> | <strong>NGUI</strong> | <strong>UI</strong> | <strong>Stretch</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag our <strong>Window</strong> GameObject into the <strong>Container</strong> field.</li><li class="listitem">Set <strong>Style</strong> to <strong>Horizontal</strong>.</li><li class="listitem">Enter its UISprite's <strong>Y</strong> dimension as <code class="literal">62</code>.</li></ol></div></li><li class="listitem">Select the <strong>Label</strong> GameObject from <strong>Title</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Change its text to <code class="literal">[AAFFFF]Main Menu</code>.</li><li class="listitem">Set its <strong>Overflow</strong> parameter to <strong>Resize Freely</strong>.</li><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">3</code>.</li></ol></div></li><li class="listitem">Attach<a id="id74" class="indexterm"/> a component to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong> | <strong>Anchor</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag-and-drop the <strong>Background</strong> GameObject from <strong>Title</strong> in the <strong>Container</strong> field.</li><li class="listitem">Set the <strong>Side</strong> parameter to <strong>Center</strong>.</li></ol></div></li><li class="listitem">Select our <strong>Title</strong> GameObject in the <strong>Hierarchy</strong> view.</li><li class="listitem">Attach a component to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong> | <strong>Anchor</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag our <strong>Window</strong> GameObject into the <strong>Container</strong> field.</li><li class="listitem">Set the <strong>Side</strong> parameter to <strong>Top</strong>.</li></ol></div></li></ol></div><p>The <strong>Hierarchy</strong> and <strong>Inspector</strong> views of our <strong>Title</strong> GameObject should look like the ones in the following screenshot:</p><div><img src="img/8667OT_02_09.jpg" alt="Creating the title bar"/></div><p>We now have a <a id="id75" class="indexterm"/>window that actually looks like a window. We used anchors to avoid setting positions manually. Now let's add some buttons!</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Buttons</h1></div></div></div><p>With NGUI, buttons <a id="id76" class="indexterm"/>are easy<a id="id77" class="indexterm"/> to create and configure.</p><p>Let's create<a id="id78" class="indexterm"/> our first one by performing the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Panel</strong> GameObject.</li><li class="listitem">Create a new child with <em>Alt</em> + <em>Shift</em> + <em>N</em> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">Buttons</code>. It will be our buttons container.</li></ol></div></li><li class="listitem">Navigate to <strong>NGUI</strong> | <strong>Open</strong> | <strong>Widget Wizard</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Button</strong> Template.</li><li class="listitem">For the <strong>Background</strong> field, select the sprite named <strong>Button</strong>.</li></ol></div></li><li class="listitem">With the <strong>Buttons</strong> GameObject selected, click on the <strong>Add To</strong> button.</li></ol></div><p>A button has<a id="id79" class="indexterm"/> just been created and centered on the screen. If you look at the <strong>Hierarchy</strong> view, you will see that a button is composed of a container GameObject named <strong>Button</strong> and two children: a <strong>Background</strong> sprite and <strong>Label</strong>. That's how NGUI works; templates are simply assembled components and widgets. If you wanted to, you could build a button from scratch using the right components on empty GameObjects.</p><p>Click on the Play button. You can see that hover and click are already set! Turn off the Play mode, select the new <strong>Button</strong> GameObject, and look at the <strong>Inspector</strong> view.</p><p>Interactive widgets have a box collider attached to them, and that is the case with this button. The collider is used to detect collisions with the cursor.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec29"/>Parameters</h2></div></div></div><p>A button has a <code class="literal">UIButton</code>
<a id="id80" class="indexterm"/> component that handles seven button parameters:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Target</strong>: This GameObject is transformed and modified when the user hovers or presses the button. By default, this is <strong>Background</strong>.</li><li class="listitem" style="list-style-type: disc"><strong>Normal</strong>: This is the color tint when nothing is happening.</li><li class="listitem" style="list-style-type: disc"><strong>Hover</strong>: This is the color tint when the user's cursor is over the button.</li><li class="listitem" style="list-style-type: disc"><strong>Pressed</strong>: This is the color tint when the user clicks on the button.</li><li class="listitem" style="list-style-type: disc"><strong>Disabled</strong>: This is the color tint when the button is disabled (can't be clicked).</li><li class="listitem" style="list-style-type: disc"><strong>Duration</strong>: This<a id="id81" class="indexterm"/> is the duration of transitions between states.</li><li class="listitem" style="list-style-type: disc"><strong>Notify</strong>: This is the parameter that lets you choose a method to call when the button is clicked. You must first drag a GameObject into the <strong>Notify</strong> field. A <strong>Method</strong> field will then appear, listing the GameObject's attached script methods, as shown in the following screenshot:<div><img src="img/8667OT_02_10.jpg" alt="Parameters"/></div></li></ul></div><p>In the previous example, I dragged the <strong>Panel</strong> GameObject into the <strong>Notify</strong> field. My <strong>Panel</strong> GameObject has a <code class="literal">ButtonManager.cs</code> script attached to it—this script has a <code class="literal">ButtonClicked()</code> method. I can now select it in the <strong>Method</strong> field. It will be called on click.</p><div><div><h3 class="title"><a id="note06"/>Note</h3><p>Only <strong>public</strong> methods without arguments will show in the <strong>Method</strong> field of the <strong>Notify</strong> parameter.</p></div></div><p>There is also a <strong>PlaySound</strong> component attached to this button. It lets you choose an audio clip to play when the selected event occurs. You can edit the <strong>Pitch</strong> and <strong>Volume</strong> parameters.</p><div><div><h3 class="title"><a id="note07"/>Note</h3><p>You can add as many <strong>PlaySound</strong> components as you want if you need a sound to be played whenever the user hovers or clicks on something, for example.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec30"/>The play and exit buttons</h2></div></div></div><p>We will now add<a id="id82" class="indexterm"/> two buttons to our window that will exit or launch the game. They will appear as shown in the following screenshot:</p><div><img src="img/8667OT_02_11.jpg" alt="The play and exit buttons"/></div><p>We need a GameObject that will manage the game. It will contain the <code class="literal">GameManager.cs</code> script attached in order to manage generic behaviors <a id="id83" class="indexterm"/>such as exiting or launching the game. Let's create it first; follow these steps to do so:</p><div><ol class="orderedlist arabic"><li class="listitem">Create a <a id="id84" class="indexterm"/>new GameObject at the root of <strong>Hierarchy</strong> with <em>Ctlr</em> + <em>Shift</em> + <em>N</em> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">GameManager</code>.</li></ol></div></li><li class="listitem">Create and attach a new <code class="literal">GameManager.cs</code> C# script to it and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Open this new <code class="literal">GameManager.cs</code> script.</li><li class="listitem">Inside this new script, add this new method called <code class="literal">ExitPressed()</code> with the following code lines:<div><pre class="programlisting">public void ExitPressed()
{
  //Exit Now
  Application.Quit();
}</pre></div></li></ol></div></li></ol></div><div><div><h3 class="title"><a id="tip05"/>Tip</h3><p>
<strong>Downloading the example code</strong>
</p><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div><p>Now that the exit method is ready, let's create and configure the two buttons as shown in the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Button</strong> GameObject and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">Exit</code>.</li><li class="listitem">Drag the <strong>GameManager</strong> GameObject into the <strong>Notify</strong> field.</li><li class="listitem">Choose <strong>GameManager.ExitPressed</strong> in the <strong>Method</strong> field.</li><li class="listitem">In the <strong>Normal</strong> color tint parameter, change <strong>R</strong> to <code class="literal">185</code>, <strong>G</strong> to <code class="literal">255</code>, <strong>B</strong> to <code class="literal">255</code>, and <strong>A</strong> to <code class="literal">255</code>.</li><li class="listitem">In the <strong>Hover</strong> color tint parameter, change <strong>R</strong> to <code class="literal">0</code>, <strong>G</strong> to <code class="literal">220</code>, <strong>B</strong> to <code class="literal">255</code>, and <strong>A</strong> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Attach a<a id="id85" class="indexterm"/> component to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong> | <strong>Anchor</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag our <strong>Window</strong> GameObject into the <strong>Container</strong> field.</li><li class="listitem">Set the <strong>Side</strong> parameter to <strong>BottomLeft</strong>.</li><li class="listitem">Set <strong>Pixel Offset</strong> to {<code class="literal">135</code>, <code class="literal">60</code>}.</li></ol></div></li><li class="listitem">Select our<a id="id86" class="indexterm"/> <strong>Exit</strong> button's child <strong>Background</strong> GameObject and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">2</code>.</li></ol></div></li><li class="listitem">Select our <strong>Exit</strong> button's child <strong>Label</strong> GameObject and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Change its text to <code class="literal">Exit</code>.</li><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">3</code>.</li></ol></div></li></ol></div><p>Ok, we have our <strong>Exit</strong> button. Let's create our <strong>Play</strong> button as follows:</p><div><ol class="orderedlist arabic"><li class="listitem">Duplicate the <strong>Exit</strong> button and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Rename this new duplicate as <code class="literal">Play</code>.</li><li class="listitem">Click on the <strong>Minus</strong> button next to the UIButton's <strong>Notify</strong> field to remove the <strong>GameManager</strong> GameObject from it.</li><li class="listitem">Set its <strong>Side</strong> parameter to <strong>BottomRight</strong>.</li><li class="listitem">Set <strong>Pixel Offset</strong> to {<code class="literal">-135</code>, <code class="literal">60</code>}.</li></ol></div></li><li class="listitem">Attach a Component to it by navigating to <strong>Component</strong> | <strong>NGUI</strong> | <strong>Examples</strong> | <strong>Load Level On Click</strong>, and set its <strong>Level Name</strong> string parameter to <strong>Game</strong>.</li><li class="listitem">Select our <strong>Play</strong> button's child <strong>Label</strong> GameObject, and change its text to <code class="literal">Play</code>.</li></ol></div><p>Perfect, now if you build your scene, you will have a functional <strong>Exit</strong> button with only one line of code! The <strong>Pixel Offset</strong> parameter<a id="id87" class="indexterm"/> maintains our buttons at the same distance from the window's borders even if you change resolutions or the window's dimensions. We will create our game scene later.</p><div><div><h3 class="title"><a id="note08"/>Note</h3><p>
<strong>Image buttons</strong>
<a id="id88" class="indexterm"/> can also be created with the Widget Wizard. They are identical to normal buttons, except that they use images for the <strong>Normal</strong>, <strong>Hover</strong>, <strong>Pressed</strong>, and <strong>Disabled</strong> states instead of color and scale tweens.</p></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec17"/>Text input</h1></div></div></div><p>Now we will learn <a id="id89" class="indexterm"/>how to add a<a id="id90" class="indexterm"/> text input to create a <a id="id91" class="indexterm"/>nickname box. Perform the following steps to do so:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Panel</strong> GameObject and create a new child with <em>Alt</em> + <em>Shift</em> + <em>N</em>. Then rename this new child as <code class="literal">Nickname</code>. It will be our nickname box container.</li><li class="listitem">Navigate to <strong>NGUI</strong> | <strong>Open</strong> | <strong>Widget Wizard</strong>.<div><ol class="orderedlist arabic"><li class="listitem">From the <strong>Project</strong> view, navigate to <strong>NGUI</strong> | <strong>Examples</strong> | <strong>Atlases</strong> | <strong>SciFi</strong>.</li><li class="listitem">Drag the <strong>SciFi Font – Normal</strong> prefab into the <strong>Font</strong> field.</li><li class="listitem">Select the <strong>Input</strong> template.</li><li class="listitem">Set <strong>Sprite (Dark)</strong> as the <strong>Background</strong> parameter.</li></ol></div></li><li class="listitem">With the <strong>Nickname</strong> GameObject selected, click on the <strong>Add To</strong> button.</li></ol></div><p>A new widget named <strong>Input</strong> has been added to the scene.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec31"/>Parameters</h2></div></div></div><p>An <strong>Input</strong> GameObject <a id="id92" class="indexterm"/>has been created. Let's look at its <strong>Inspector</strong> parameters:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Input Label</strong>: This is the text label that is to be used for this input.</li><li class="listitem" style="list-style-type: disc"><strong>Inactive Color</strong>: This is the text color while the text is not selected.</li><li class="listitem" style="list-style-type: disc"><strong>Active Color</strong>: This is the text color while the text is being edited.</li><li class="listitem" style="list-style-type: disc"><strong>Default Text</strong>: This is either <strong>Blank</strong> or with the label's default text. <strong>Blank</strong> will delete the label's text when the <strong>Input</strong> GameObject is selected.</li><li class="listitem" style="list-style-type: disc"><strong>Keyboard Type</strong>: This allows the different sets of characters to be authorized. This will also change the keyboard layout on mobile platforms.</li><li class="listitem" style="list-style-type: disc"><strong>Select on Tab</strong>: Drag into this field the GameObject that you want to be selected when the <em>Tab</em> key is pressed while editing the input.</li><li class="listitem" style="list-style-type: disc"><strong>Auto-save Key</strong>: This enables the label's text to be automatically saved to the specified <code class="literal">PlayerPrefs()</code> key.</li><li class="listitem" style="list-style-type: disc"><strong>Max Characters</strong>: This is the number of maximum characters allowed. <code class="literal">0</code> means infinite.</li><li class="listitem" style="list-style-type: disc"><strong>Carat Character</strong>: This is the end of text character.</li><li class="listitem" style="list-style-type: disc"><strong>Password</strong>: If you activate this Boolean, the label's characters will be replaced by <strong>*</strong> on the screen.</li><li class="listitem" style="list-style-type: disc"><strong>Auto-correct</strong>: This enables or disables autocorrection on mobile platforms.</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec32"/>Creating a nickname box</h2></div></div></div><p>Let's use this <a id="id93" class="indexterm"/>text input to create a nickname box that will look like the following screenshot:</p><div><img src="img/8667OT_02_12.jpg" alt="Creating a nickname box"/></div><p>Let's create the nickname box seen in the preceding screenshot. Perform the following steps to do so:</p><div><ol class="orderedlist arabic"><li class="listitem">Duplicate the <strong>Window</strong> GameObject and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Rename the new duplicate as <code class="literal">Background</code>.</li><li class="listitem">Drag it into the <strong>Nickname</strong> container GameObject.</li><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">2</code>.</li><li class="listitem">Set <strong>Dimensions</strong> to <code class="literal">440</code> x <code class="literal">120</code>.</li></ol></div></li><li class="listitem">Select our <strong>Input</strong> GameObject and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Reset its <strong>Box Collider</strong> component's center to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Type in <code class="literal">Nickname</code> for the <strong>Auto-save Key</strong> parameter.</li><li class="listitem">Enter <strong>Max Characters</strong> as <code class="literal">25</code>.</li></ol></div></li><li class="listitem">Attach a component to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong> | <strong>Anchor</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag the <strong>Background</strong> GameObject from <strong>Nickname</strong> inside the <strong>Container</strong> field.</li><li class="listitem">Set the <strong>Pixel Offset</strong> to {<code class="literal">0</code>, <code class="literal">-17</code>}.</li></ol></div></li><li class="listitem">Duplicate the <strong>Label</strong> child GameObject from <strong>Title</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag it inside the <strong>Nickname</strong> GameObject.</li><li class="listitem">Change its text to <code class="literal">[AAFFFF]Nickname</code>.</li><li class="listitem">Drag the <strong>Background</strong> GameObject from <strong>Nickname</strong> inside the <strong>Container</strong> field.</li><li class="listitem">Set the <strong>Side</strong> parameter to <strong>Top</strong>.</li><li class="listitem">Set <strong>Pixel Offset</strong> to {<code class="literal">0</code>, <code class="literal">-32</code>}.</li></ol></div></li><li class="listitem">Select <a id="id94" class="indexterm"/>the <strong>Background</strong> child GameObject from <strong>Input</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">3</code>.</li><li class="listitem">Set <strong>Pivot</strong> to <strong>Center</strong> (middle button + middle button).</li><li class="listitem">Reset the <strong>Transform</strong> field's position to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">In the <strong>Color Tint</strong> parameter, change <strong>R</strong> to <code class="literal">100</code>, <strong>G</strong> to <code class="literal">230</code>, <strong>B</strong> to <code class="literal">255</code>, and <strong>A</strong> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Select the <strong>Label</strong> child GameObject from <strong>Input</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">4</code>.</li><li class="listitem">Set <strong>Pivot</strong> to <strong>Center</strong> (middle button + middle button).</li><li class="listitem">Reset the <strong>Transform</strong> field's position to {<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>}.</li><li class="listitem">Change the <strong>Label</strong> GameObject's text to <code class="literal">Enter your Name Here</code>.</li></ol></div></li><li class="listitem">Select the <strong>Nickname</strong> container GameObject.</li><li class="listitem">Attach a component to it and navigate to <strong>NGUI</strong> | <strong>Attach</strong> | <strong>Anchor</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag-and-drop our <strong>Window</strong> GameObject inside the <strong>Container</strong> field.</li><li class="listitem">Set the <strong>Side</strong> parameter to <strong>Top</strong>.</li><li class="listitem">Set <strong>Pixel Offset</strong> to {<code class="literal">0</code>, <code class="literal">-220</code>}.</li></ol></div></li></ol></div><p>Ok, we have a <strong>Nickname</strong> box. Your <strong>Hierarchy</strong> view should look like the following screenshot:</p><div><img src="img/8667OT_02_13.jpg" alt="Creating a nickname box"/></div><p>The user can enter his nickname, up to 25 characters. If you move or change the window's dimensions, our box will move to stay at the same place.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec18"/>Slider</h1></div></div></div><p>Now let's <a id="id95" class="indexterm"/>add a <a id="id96" class="indexterm"/>volume slider for the user to move and select his/her volume level.</p><p>A slider template is available, enabling you to adjust parameters easily by sliding a thumb along a bar. Perform the following steps to create a volume slider:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Panel</strong> GameObject and create a new child with <em>Alt</em> + <em>Shift</em> + <em>N</em>.</li><li class="listitem">Rename that new child as <code class="literal">Volume</code>. It will be our volume settings container.</li><li class="listitem">Navigate to <strong>NGUI</strong> | <strong>Open</strong> | <strong>Widget Wizard</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Slider</strong> template.</li><li class="listitem">Set the <strong>Dark</strong> Sprite to <strong>Empty</strong>.</li><li class="listitem">Set the <strong>Light</strong> Sprite to <strong>Full</strong>.</li><li class="listitem">Set <strong>Highlight</strong> to <strong>Thumb</strong>.</li></ol></div></li><li class="listitem">With the <strong>Volume</strong> GameObject selected, click on the <strong>Add To</strong> button.</li></ol></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec33"/>Parameters</h2></div></div></div><p>A slider has<a id="id97" class="indexterm"/> been created. It has 6 parameters as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Value</strong>: This is the slider's current value, which is between 0 and 1.</li><li class="listitem" style="list-style-type: disc"><strong>Steps</strong>: This is the number of steps to completely fill or empty the slider.</li><li class="listitem" style="list-style-type: disc"><strong>Direction</strong>: This is the slider's fill direction, either <strong>Horizontal</strong> or <strong>Vertical</strong>.</li><li class="listitem" style="list-style-type: disc"><strong>Foreground</strong>: This is the sprite used to fill the slider.</li><li class="listitem" style="list-style-type: disc"><strong>Thumb</strong>: This is the sprite used for the handle to change the slider's value. By leaving this as <strong>null</strong>, a simple progress bar will be created (user cannot interact).</li><li class="listitem" style="list-style-type: disc"><strong>Notify</strong>: This is the GameObject that lets you choose a method to call when there is a change in the slider's value. When a GameObject is assigned, you may choose a method to call on the value change.</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec34"/>Creating a volume slider</h2></div></div></div><p>We can use this slider to<a id="id98" class="indexterm"/> create our volume slider, which will look like the following screenshot:</p><div><img src="img/8667OT_02_14.jpg" alt="Creating a volume slider"/></div><p>Proceed with the <a id="id99" class="indexterm"/>following steps to create it:</p><div><ol class="orderedlist arabic"><li class="listitem">Duplicate the <strong>Background</strong> GameObject from <strong>Nickname</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag the duplicate inside the <strong>Volume</strong> container GameObject.</li><li class="listitem">Set its <strong>Dimensions</strong> to <code class="literal">320</code> x <code class="literal">135</code>.</li></ol></div></li><li class="listitem">Attach a component to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong> | <strong>Anchor</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag our <strong>Window</strong> GameObject inside the <strong>Container</strong> field.</li><li class="listitem">Set the <strong>Pixel Offset</strong> to {<code class="literal">-420</code>, <code class="literal">-90</code>}.</li></ol></div></li><li class="listitem">Duplicate the <strong>Label</strong> GameObject from <strong>Nickname</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag it inside the <strong>Volume</strong> GameObject.</li><li class="listitem">Drag our Volume's <strong>Background</strong> GameObject inside the <strong>Container</strong> field.</li><li class="listitem">Change its text to <code class="literal">[AAFFFF]Volume</code>.</li></ol></div></li><li class="listitem">Select the <strong>Slider</strong> GameObject.</li><li class="listitem">Attach a component to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong> | <strong>Anchor</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag the <strong>Background</strong> GameObject from <strong>Volume</strong> inside the <strong>Container</strong> field.</li><li class="listitem">Set <strong>Pixel Offset</strong> to {<code class="literal">-100</code>, <code class="literal">-23</code>}.</li></ol></div></li><li class="listitem">Select the <strong>Background</strong> GameObject from <strong>Slider</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">3</code>.</li><li class="listitem">In the <strong>Color Tint</strong> parameter, change <strong>R</strong> to <code class="literal">80</code>, <strong>G</strong> to <code class="literal">220</code>, <strong>B</strong> to <code class="literal">85</code>, and <strong>A</strong> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Select the <strong>Foreground</strong> GameObject from <strong>Slider</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">4</code>.</li><li class="listitem">In the <strong>Color Tint</strong> parameter, change <strong>R</strong> to <code class="literal">95</code>, <strong>G</strong> to <code class="literal">255</code>, <strong>B</strong> to <code class="literal">190</code>, and <strong>A</strong> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Select the <strong>Thumb</strong> GameObject from the <strong>Slider</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">5</code>.</li><li class="listitem">In the <strong>Color Tint</strong> parameter, change <strong>R</strong> to <code class="literal">100</code>, <strong>G</strong> to <code class="literal">255</code>, <strong>B</strong> to <code class="literal">250</code>, and <strong>A</strong> to <code class="literal">255</code>.</li></ol></div></li></ol></div><p>Ok, we now<a id="id100" class="indexterm"/> have a nice volume slider! Your <strong>Hierarchy</strong> view should look like the following screenshot:</p><div><img src="img/8667OT_02_15.jpg" alt="Creating a volume slider"/></div><p>We will now link it to the game's volume with a new script. Let's add some music to our main menu. First, add an audio file of your choice to your Unity project as shown in the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select our <strong>Main Camera</strong> GameObject.</li><li class="listitem">Attach a component to it by navigating to <strong>Component</strong> | <strong>Audio</strong> | <strong>AudioSource</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag a music file from the <strong>Project</strong> view to the <strong>AudioSource</strong> parameter's <strong>Audio Clip</strong> field.</li></ol></div></li><li class="listitem">Select the <strong>Slider</strong> GameObject from <strong>Volume</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Create and attach a new <code class="literal">VolumeManager.cs</code> C# script to it.</li><li class="listitem">Open this new <code class="literal">VolumeManager.cs</code> script.</li></ol></div></li></ol></div><p>In this new script, we will first need to declare and initialize the necessary variables. Add the following variable declarations and the <code class="literal">Awake()</code> method:</p><div><pre class="programlisting">//We will need the Slider
UISlider slider;

void Awake ()
{
  //Get the Slider
  slider = GetComponent&lt;UISlider&gt;();
  //Set the Slider's value to last saved volume
<strong>  slider.value = NGUITools.soundVolume;</strong>
}</pre></div><p>Here we initialized<a id="id101" class="indexterm"/> the slider's value to <code class="literal">NGUITools.soundVolume</code> because this float is persistent and will be saved across scenes—even if you exit the game.</p><p>Now let's create an <code class="literal">OnVolumeChange()</code> method<a id="id102" class="indexterm"/> that will modify our AudioListener method's volume each time the slider's value is changed:</p><div><pre class="programlisting">public void OnVolumeChange ()
{
  //Change NGUI's UI Sounds volume
  NGUITools.soundVolume = UISlider.current.value;
  //Change the Game AudioListener's volume
  AudioListener.volume = UISlider.current.value;
}</pre></div><p>Ok, the method is ready. We just need to call it each time the slider's value changes. Let's use the <strong>UISlider</strong> component's <strong>Notify</strong> field as follows:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Slider</strong> GameObject from <strong>Volume</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag-and-drop the <strong>Slider</strong> GameObject from <strong>Volume</strong> into the <strong>Notify</strong> field.</li><li class="listitem">For the <strong>Method</strong> field, select <code class="literal">VolumeManager.OnVolumeChange</code>.</li></ol></div></li></ol></div><p>Now, each time the slider's value is modified, our method will be called.</p><p>You can hit the Play button; the game's volume will change with the slider. The volume is saved even when you exit the game and restart!</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec19"/>Toggle</h1></div></div></div><p>Now that<a id="id103" class="indexterm"/> we<a id="id104" class="indexterm"/> have a <a id="id105" class="indexterm"/>volume slider, let's add an enable/disable sound checkbox, which will turn down the volume to 0 and hide our volume slider.</p><p>First, create a toggle widget as follows:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Panel</strong> GameObject and create a new child with <em>Alt</em> + <em>Shift</em> + <em>N</em>.</li><li class="listitem">Rename that new child as <code class="literal">Sound</code>. It will be our sound toggle container.</li><li class="listitem">Navigate to <strong>NGUI</strong> | <strong>Open</strong> | <strong>Widget Wizard</strong> and <a id="id106" class="indexterm"/>perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Select <strong>Toggle</strong> as <strong>Template</strong>.</li><li class="listitem">Select the <strong>Dark</strong> Sprite as <strong>Background</strong>.</li><li class="listitem">Select the <strong>X</strong> Sprite as <strong>Checkmark</strong>.</li><li class="listitem">With the <strong>Sound</strong> container selected, click on the <strong>Add To</strong> button.</li></ol></div></li></ol></div><p>A checkbox with a label has just been created as shown in the following screenshot:</p><div><img src="img/8667OT_02_16.jpg" alt="Toggle"/></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec35"/>Parameters</h2></div></div></div><p>Select our new <strong>Toggle</strong> GameObject. Let's <a id="id107" class="indexterm"/>look at the UIToggle's <strong>Inspector</strong> parameters:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Group</strong>: This is the toggle's group. Toggles of the same group will act as radio buttons; only one of them can be checked at once.</li><li class="listitem" style="list-style-type: disc"><strong>Start State</strong>: This defines in which state the toggle will be at the start.</li><li class="listitem" style="list-style-type: disc"><strong>Animation</strong>: This is the animation that will play when the checkbox changes state.</li><li class="listitem" style="list-style-type: disc"><strong>Sprite</strong>: This lets us choose the widget to be used as a checkmark; we should use our <strong>X</strong> sprite here.</li><li class="listitem" style="list-style-type: disc"><strong>Transition</strong>: This is either <strong>Smooth</strong> or <strong>Instant</strong>; uses alpha fade in / fade out.</li><li class="listitem" style="list-style-type: disc"><strong>Notify</strong>: This is the GameObject to notify on when toggled. When a GameObject is assigned, you may choose a public method to call on a toggle event.</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec36"/>Creating a sound toggle</h2></div></div></div><p>We have seen the<a id="id108" class="indexterm"/> UIToggle's parameters. Now we will create this sound toggle as shown in the following screenshot:</p><div><img src="img/8667OT_02_17.jpg" alt="Creating a sound toggle"/></div><p>Let's use our <a id="id109" class="indexterm"/>recently added <strong>Toggle</strong> GameObject to create the window shown here. Follow these steps to do so:</p><div><ol class="orderedlist arabic"><li class="listitem">Select both the <strong>Background</strong> and <strong>Label</strong> GameObjects from <strong>Volume</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Duplicate them.</li><li class="listitem">Drag-and-drop those new duplicates inside our <strong>Sound</strong> container.</li></ol></div></li><li class="listitem">Select the <strong>Background</strong> GameObject from <strong>Sound</strong> and enter its UIAnchor's <strong>Pixel Offset</strong> parameter as {<code class="literal">-420</code>,<code class="literal"> 43</code>}.</li><li class="listitem">Select the <strong>Label</strong> GameObject from <strong>Sound</strong> and change its text to <code class="literal">[AAFFFF]Sound</code>.</li><li class="listitem">Select the <strong>Toggle</strong> GameObject and check the <strong>Start State</strong> Boolean in <strong>UIToggle</strong>.</li><li class="listitem">Attach a component to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong> | <strong>Anchor</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag the <strong>Background</strong> GameObject from <strong>Sound</strong> inside the <strong>Container</strong> field.</li><li class="listitem">Enter its <strong>Pixel Offset</strong> parameter as {<code class="literal">-38</code>, <code class="literal">-20</code>}.</li></ol></div></li><li class="listitem">Add a component to it by navigating to <strong>NGUI</strong> | <strong>Interaction</strong> | <strong>Toggled Objects</strong>, and drag our <strong>Volume</strong> container GameObject into the <strong>Activate</strong> array.</li><li class="listitem">Select the <strong>Background</strong> sprite GameObject from <strong>Toggle</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">3</code>.</li><li class="listitem">In the <strong>Color Tint</strong> parameter, change <strong>R</strong> to <code class="literal">130</code>, <strong>G</strong> to <code class="literal">255</code>, <strong>B</strong> to <code class="literal">130</code>, and <strong>A</strong> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Select the <strong>Checkmark</strong> sprite GameObject from <strong>Toggle</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">4</code>.</li><li class="listitem">In the <strong>Color Tint</strong> parameter, change <strong>R</strong> to <code class="literal">50</code>, <strong>G</strong> to <code class="literal">255</code>, <strong>B</strong> to <code class="literal">70</code>, and <strong>A</strong> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Select the <strong>Label</strong> GameObject from <strong>Toggle</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">3</code>.</li><li class="listitem">Change its text to <code class="literal">[AAFFFF]Enabled</code>.</li><li class="listitem">In the <strong>Color Tint</strong> parameter, change <strong>R</strong> to <code class="literal">200</code>, <strong>G</strong> to <code class="literal">255</code>, <strong>B</strong> to <code class="literal">250</code>, and <strong>A</strong> to <code class="literal">255</code>.</li></ol></div></li></ol></div><p>Hit the Play button. We have a nice <a id="id110" class="indexterm"/>sound box with a sound toggle checkbox that hides/shows the <strong>Volume</strong> box when needed. But it does not turn off the sound yet.</p><p>We need to make some changes to our <code class="literal">VolumeManager.cs</code> script to correct this.</p><p>First, open our <code class="literal">VolumeManager.cs</code> script. We will add a new <code class="literal">OnSoundToggle()</code> method that will be called when the toggle changes state. It will set the volume directly to 0, or to the slider's value. Add this new method to <code class="literal">VolumeManager.cs</code> as shown in the following code lines:</p><div><pre class="programlisting">public void OnSoundToggle()
{
  float newVolume = 0;
  //If sound toggled ON, set new volume to slider value
  if(UIToggle.current.value)
  newVolume = slider.value;
  //Apply newVolume to volumes
  AudioListener.volume = newVolume;
  NGUITools.soundVolume = newVolume;
}</pre></div><p>Ok, the previous method will set both our volumes to <code class="literal">0</code> or the slider's value, depending on the toggle's state. Let's link it to our sound's toggle by selecting our <strong>Toggle</strong> GameObject and dragging the <strong>Slider</strong> GameObject from <strong>Volume</strong> inside the <strong>Notify</strong> field in <strong>UIToggle</strong>, below the <strong>On Value Change</strong> section. Then, for the <strong>Method</strong> field, select <code class="literal">VolumeManager.OnSoundToggle</code>.</p><p>Hit the Play button. That's it. When we click on the <strong>Toggle</strong> checkbox from <strong>Volume</strong>, the volume reacts accordingly.</p><p>But if we turn the sound off using the toggle and stop running, when we hit Play again, the checkbox is still checked and the volume slider is displayed, but the volume is at <code class="literal">0</code>.</p><p>That's because our volume is set to 0, but the checkbox is still checked at start. Let's add a simple line of code that will set the start state to <code class="literal">false</code> if the volume is at <code class="literal">0</code>:</p><div><ol class="orderedlist arabic"><li class="listitem">Open our <code class="literal">VolumeManager.cs</code> script.</li><li class="listitem">Declare a new global variable named <code class="literal">public UIToggle soundToggle</code>.</li><li class="listitem">At the end of the <code class="literal">Awake()</code> method, add the following lines of code:<div><pre class="programlisting">//If volume is at 0, uncheck the Sound Checkbox
if(NGUITools.soundVolume == 0) soundToggle.value = false;</pre></div></li><li class="listitem">Save the script and return to Unity.</li><li class="listitem">Select the <strong>Slider</strong> GameObject from <strong>Volume</strong>.</li></ol></div><p>Drag the<strong>Toggle</strong> GameObject from <strong>Volume</strong> in the volume manager's <strong>Sound Toggle</strong> field.</p><p>Hit the Play button. That's it.<a id="id111" class="indexterm"/> If you disable sound using the toggle and exit the Play mode and then launch it again, the checkbox stays unchecked and the volume slider is not displayed. Perfect!</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec20"/>Popup list</h1></div></div></div><p>We will now learn <a id="id112" class="indexterm"/>how to create the popup list<a id="id113" class="indexterm"/>, see its parameters, and create a difficulty selector for our game.</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Panel</strong> GameObject and create a new child with <em>Alt</em> + <em>Shift</em> + <em>N</em>.</li><li class="listitem">Rename that new child as <code class="literal">Difficulty</code>. It's our difficulty box container.</li><li class="listitem">Navigate to <strong>NGUI</strong> | <strong>Open</strong> | <strong>Widget Wizard</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Select <strong>Popup List</strong> as <strong>Template</strong></li><li class="listitem">Select <strong>Dark</strong> as <strong>Foreground</strong>.</li><li class="listitem">Select <strong>Dark</strong> as <strong>Background</strong>.</li><li class="listitem">Select the <strong>Highlight</strong> sprite as <strong>Highlight</strong>.</li></ol></div></li><li class="listitem">With our <strong>Difficulty</strong> GameObject selected, click on the <strong>Add To</strong> button.</li></ol></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec37"/>Parameters</h2></div></div></div><p>A <strong>Popup List</strong> GameObject <a id="id114" class="indexterm"/>has just been created. Let's look at its parameters:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Atlas</strong>: This is the atlas used for the popup list's sprites.</li><li class="listitem" style="list-style-type: disc"><strong>Font</strong>: This is the font used for the popup list's options.</li><li class="listitem" style="list-style-type: disc"><strong>Text Label</strong>: This is the label to update when <strong>Popup List</strong> changes selection.</li><li class="listitem" style="list-style-type: disc"><strong>Options</strong>: This is the list of options that will pop up—one per line.</li><li class="listitem" style="list-style-type: disc"><strong>Default</strong>: This is the option selected at start.</li><li class="listitem" style="list-style-type: disc"><strong>Position</strong>: You may force the list of options to appear <code class="literal">Above</code> or <code class="literal">Below</code> the Popup List's button. If this parameter is set to <code class="literal">Auto</code>, NGUI will choose one of both depending on the available space.</li><li class="listitem" style="list-style-type: disc"><strong>Localized</strong>: This<a id="id115" class="indexterm"/> enables localization on options.</li><li class="listitem" style="list-style-type: disc"><strong>Background</strong>: This is the background sprite for the popup list's options container.</li><li class="listitem" style="list-style-type: disc"><strong>Highlight</strong>: This is the sprite for the currently hovered option.</li><li class="listitem" style="list-style-type: disc"><strong>Text Color</strong>: This is the options list's text color tint.</li><li class="listitem" style="list-style-type: disc"><strong>Background</strong>: This is the popup list's background color tint.</li><li class="listitem" style="list-style-type: disc"><strong>Highlight</strong>: This is the hovered option's background color tint.</li><li class="listitem" style="list-style-type: disc"><strong>Padding</strong>: This is the padding of the <strong>X</strong> and <strong>Y</strong> options.</li><li class="listitem" style="list-style-type: disc"><strong>Text Scale</strong>: This is the options' text scale.</li><li class="listitem" style="list-style-type: disc"><strong>Animated</strong>: If this is unchecked, the options' display will be instantaneous.</li><li class="listitem" style="list-style-type: disc"><strong>Notify</strong>: This is the GameObject that lets you choose a method to call when the selected option changes.</li></ul></div><p>Below the <code class="literal">UIPopup List</code> component, we have the usual <code class="literal">UIButton</code> and <code class="literal">UIPlay Sound</code> components that we have already seen before.</p><div><div><h3 class="title"><a id="note09"/>Note</h3><p>A Popup Menu template is also available in the Widget Wizard. The only difference is that the menu does not indicate which choice you have selected; the button's label is not updated.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec38"/>Creating a difficulty selector</h2></div></div></div><p>We will now use <a id="id116" class="indexterm"/>our new <strong>Popup List</strong> GameObject to select the game's difficulty level as shown in the following screenshot:</p><div><img src="img/8667OT_02_18.jpg" alt="Creating a difficulty selector"/></div><p>Let's create this difficulty selector as shown in the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select <a id="id117" class="indexterm"/>the <strong>Background</strong> and <strong>Label</strong> GameObjects from <strong>Sound</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Duplicate them.</li><li class="listitem">Drag-and-drop them into our <strong>Difficulty</strong> container.</li></ol></div></li><li class="listitem">Select the <strong>Background</strong> GameObject from <strong>Difficulty</strong> and enter its <strong>Pixel Offset</strong> parameter to {<code class="literal">420</code>, <code class="literal">43</code>}.</li><li class="listitem">Select the <strong>Label</strong> GameObject from <strong>Difficulty</strong> and change its text to <code class="literal">[AAFFFF]Difficulty.</code></li><li class="listitem">Select our <strong>Popup List</strong> in the <strong>Hierarchy</strong> view and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Rename it as <code class="literal">Popup</code>.</li><li class="listitem">Type in <code class="literal">Normal</code> and <code class="literal">Hard</code> separated by a line.</li><li class="listitem">In <strong>Text Color</strong>, change <strong>R</strong> to <code class="literal">190</code>, <strong>G</strong> to <code class="literal">250</code>, <strong>B</strong> to <code class="literal">255</code>, and <strong>A</strong> to <code class="literal">255</code>.</li><li class="listitem">In <strong>Background</strong>, change <strong>R</strong> to <code class="literal">70</code>, <strong>G</strong> to <code class="literal">250</code>, <strong>B</strong> to <code class="literal">255</code>, and <strong>A</strong> to <code class="literal">255</code>.</li><li class="listitem">In <strong>Highlight</strong>, change <strong>R</strong> to <code class="literal">70</code>, <strong>G</strong> to <code class="literal">255</code>, <strong>B</strong> to <code class="literal">150</code>, and <strong>A</strong> to <code class="literal">255</code>.</li><li class="listitem">In <strong>Hover</strong>, change <strong>R</strong> to <code class="literal">70</code>, <strong>G</strong> to <code class="literal">255</code>, <strong>B</strong> to <code class="literal">150</code>, and <strong>A</strong> to <code class="literal">255</code>.</li></ol></div></li><li class="listitem">Attach a component to it by navigating to <strong>NGUI</strong> | <strong>Attach</strong> | <strong>Anchor</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag the <strong>Background</strong> GameObject from <strong>Difficulty</strong> in the <strong>Container</strong> field.</li><li class="listitem">Enter <strong>Pixel Offset</strong> as {<code class="literal">-76</code>, <code class="literal">-20</code>}.</li></ol></div></li><li class="listitem">Select our popup's <strong>Sprite</strong> GameObject and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">In <strong>Color Tint</strong>, change <strong>R</strong> to <code class="literal">170</code>, <strong>G</strong> to <code class="literal">255</code>, <strong>B</strong> to <code class="literal">190</code>, and <strong>A</strong> to <code class="literal">255</code>.</li><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">3</code>.</li></ol></div></li><li class="listitem">Select our popup's <strong>Label</strong> GameObject and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">In <strong>Color Tint</strong>, change <strong>R</strong> to <code class="literal">135</code>, <strong>G</strong> to <code class="literal">255</code>, <strong>B</strong> to <code class="literal">170</code>, and <strong>A</strong> to <code class="literal">255</code>.</li><li class="listitem">Enter <strong>Depth</strong> as <code class="literal">4</code>.</li></ol></div></li></ol></div><p>Ok, we now have a <strong>Popup List</strong> GameObject that lets us select the game's difficulty level. Your <strong>Hierarchy</strong> panel should look like the following screenshot:</p><div><img src="img/8667OT_02_19.jpg" alt="Creating a difficulty selector"/></div><p>Now it's time to<a id="id118" class="indexterm"/> link it to a method that will take that difficulty into account. Do this by performing the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Open our <code class="literal">GameManager.cs</code> script.</li><li class="listitem">Declare a new enum for our difficulty levels as follows:<div><pre class="programlisting">public enum Difficulties
{
  Normal,
  Hard
}</pre></div></li><li class="listitem">Declare a new <code class="literal">Difficulty</code> variable to store the current difficulty as follows:<div><pre class="programlisting">public static Difficulties Difficulty = Difficulties.Normal;</pre></div></li></ol></div><p>We used a static variable because it won't be destroyed when loading the game scene. By default, the difficulty level is set to <strong>Normal</strong>.</p><p>Now we need to add the <code class="literal">OnDifficultyChange()</code> method<a id="id119" class="indexterm"/> that will change our <code class="literal">Difficulty</code> variable when <strong>Popup List</strong> changes state as follows:</p><div><pre class="programlisting">public void OnDifficultyChange()
{
  //If Difficulty changes to Normal, set Difficulties.Normal
  if(UIPopupList.current.value == "Normal")
  Difficulty = Difficulties.Normal;
  //Otherwise, set it to Hard
  else Difficulty = Difficulties.Hard;
}</pre></div><p>Our method is ready; we need to call it when <strong>Popup List</strong> changes state. Do so by performing the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Save all the modified scripts and return to Unity.</li><li class="listitem">Select the <strong>Popup List</strong> GameObjectfrom <strong>Difficulty</strong> and perform the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Drag our <strong>GameManager</strong> GameObject into the <strong>Notify</strong> field.</li><li class="listitem">For the <strong>Method</strong> field, select <code class="literal">GameManager.OnDifficultyChange</code>.</li></ol></div></li></ol></div><p>Now, the <strong>Popup List</strong> GameObject will change the <code class="literal">Difficulty</code> variable according to its value. We will be <a id="id120" class="indexterm"/>able to access this static variable once we're in the game.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec21"/>Summary</h1></div></div></div><p>In this chapter, we have learned how to create and configure most of NGUI's widgets—sprites, labels, buttons, text inputs, sliders, toggles, and popup lists.</p><p>We now have a main menu with interactive elements. We also used NGUI's notification event system to change variables in code and register the user's choices.</p><p>We used <strong>UIAnchors</strong> and <strong>UIStretch</strong> components to properly position our widgets—we just have to move each box's background sprite to move the entire element. This is much more effective than having to move each GameObject manually! You should have a main menu that looks like the following screenshot:</p><div><img src="img/8667OT_02_20.jpg" alt="Summary"/></div><p>Ok, now it is time to enhance our UI experience and make this better. Let's move on to <a class="link" href="ch03.html" title="Chapter 3. Enhancing your UI">Chapter 3</a>, <em>Enhancing your UI</em>.</p></div></body></html>