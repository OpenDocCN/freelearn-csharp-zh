<html><head></head><body>
		<div><h1 id="_idParaDest-152" class="chapter-number"><a id="_idTextAnchor152"/>7</h1>
			<h1 id="_idParaDest-153"><a id="_idTextAnchor153"/>Fluent Design System for Windows Applications</h1>
			<p>The <strong class="bold">Fluent Design System</strong> is a<a id="_idIndexMarker495"/> set of application design principles created by Microsoft and implemented across multiple desktop, mobile, and web platforms. The Fluent Design System for Windows is a set of controls, patterns, and styles for applications built for Windows. In fact, it is the implicit styling for all WinUI controls.</p>
			<p>It is important to learn the tenets of Fluent Design and how to implement them in your WinUI applications. We will also explore <a id="_idIndexMarker496"/>the <strong class="bold">Fluent XAML Theme Editor</strong> application for Windows. This application assists developers in creating a theme for their applications, including color schemes and style elements such as borders and corners. Developers can then easily import the resources to implement the theme.</p>
			<p>In this chapter, we will cover the following topics:</p>
			<ul>
				<li>Learning the concepts of Fluent Design</li>
				<li>How to find the latest information about Fluent Design</li>
				<li>Incorporating Fluent Design concepts into WinUI applications</li>
				<li>Using the Fluent XAML Theme Editor to customize and use a UI theme</li>
				<li>Exploring the <strong class="bold">Acrylic</strong> material and <a id="_idIndexMarker497"/>the Fluent Design System</li>
				<li>Using the <strong class="bold">Mica</strong> material in<a id="_idIndexMarker498"/> WinUI applications</li>
			</ul>
			<p>By the end of this chapter, you will understand the Fluent Design System for Windows applications. You will also know how to incorporate these design standards into your WinUI applications.</p>
			<h1 id="_idParaDest-154"><a id="_idTextAnchor154"/>Technical requirements</h1>
			<p>To follow along with the examples in this chapter, the following software is required:</p>
			<ul>
				<li>Windows 10 version 1803 (version 17134) or later</li>
				<li>Visual Studio 2022 or later with the .NET Desktop Development workload installed and configured for Windows App SDK development</li>
			</ul>
			<p>The source code for this chapter is available on GitHub at this URL: <a href="https://github.com/PacktPublishing/Learn-WinUI-3-Second-Edition/tree/master/Chapter07">https://github.com/PacktPublishing/Learn-WinUI-3-Second-Edition/tree/master/Chapter07</a>.</p>
			<h1 id="_idParaDest-155"><a id="_idTextAnchor155"/>What is the Fluent Design System?</h1>
			<p>The <a id="_idIndexMarker499"/>Fluent Design System is a cross-platform system that helps developers create beautiful, intuitive applications. The website for <a id="_idIndexMarker500"/>Fluent Design (<a href="https://fluent1.microsoft.design/">https://fluent1.microsoft.design/</a>) has dedicated pages with resources for developers on many platforms:</p>
			<ul>
				<li>Android</li>
				<li>iOS</li>
				<li>macOS</li>
				<li>Web</li>
				<li>Windows</li>
				<li>Cross-platform (React Native)</li>
			</ul>
			<p class="callout-heading">Note</p>
			<p class="callout">Microsoft has started releasing their Fluent 2 design guidance<a id="_idIndexMarker501"/> at <a href="https://fluent2.microsoft.design/">https://fluent2.microsoft.design/</a>. You can think of Fluent 1 styles as Windows 10 style, whereas Fluent 2 style is similar to the look and feel of Windows 11. At the time of this writing, the Fluent 2 guidance has only been published for React web applications. Other platforms are not yet available.</p>
			<p>Fluent Design aims to be simple and intuitive. While it maintains its design philosophy across platforms, it also adapts aspects of its design to feel native on every platform. In <a href="B20908_01.xhtml#_idTextAnchor015"><em class="italic">Chapter 1</em></a><em class="italic">, Introduction to WinUI</em>, we discussed the origins of some of the current Fluent Design concepts in the <strong class="bold">Metro</strong> design<a id="_idIndexMarker502"/> that was introduced with Windows Phone. While the look and feel of Microsoft’s designs have evolved over the years, some of the principles remain. The three <a id="_idIndexMarker503"/>core principles of the Fluent Design System are the following:</p>
			<ul>
				<li><strong class="bold">Natural on every device</strong>: Software should adapt to the device where it’s running, whether it’s a PC, tablet, game console, phone, or AR/VR device</li>
				<li><strong class="bold">Intuitive and powerful</strong>: The UI anticipates users’ actions and pulls them into the experience while using the app</li>
				<li><strong class="bold">Engaging and immersive</strong>: The design pulls from real-world elements, using light, shadow, texture, and <a id="_idIndexMarker504"/>depth to create an immersive experience for the user</li>
			</ul>
			<p>The driving philosophy behind the design is to adapt and feel natural. The device and the app should feel comfortable and anticipate the user’s actions.</p>
			<p>This is a very abstract and high-level explanation so far. Let’s explore the specifics of Fluent Design for Windows in the next section.</p>
			<h2 id="_idParaDest-156"><a id="_idTextAnchor156"/>Exploring Fluent Design for Windows</h2>
			<p>For Windows <a id="_idIndexMarker505"/>applications, Fluent Design covers several areas. When compared to other<a id="_idIndexMarker506"/> design systems, Fluent is more all-encompassing. Apple’s <strong class="bold">Human Interface Guidelines</strong> (<a href="https://developer.apple.com/design/human-interface-guidelines/">https://developer.apple.com/design/human-interface-guidelines/</a>) have only been widely <a id="_idIndexMarker507"/>adopted on Apple’s platforms: iOS, iPadOS, and macOS. Google’s <strong class="bold">Material Design</strong> (<a href="https://material.io/">https://material.io/</a>) system has seen broader adoption but only has toolkits available for Android, Flutter, and the web.</p>
			<p>Fluent Design is most often compared with Material Design as they share some concepts when it comes to shapes and texture, but Fluent Design uses transparency to much greater effect than Material Design. Fluent Design provides a rich toolset that you can use in WinUI and nearly any other development platform.</p>
			<p>Let’s explore some of these design aspects and how they apply to your WinUI applications.</p>
			<h2 id="_idParaDest-157"><a id="_idTextAnchor157"/>Controls</h2>
			<p>A<a id="_idIndexMarker508"/> control equates to a single element of <em class="italic">user input</em> or <em class="italic">interaction</em>. We have already explored many of the controls available in WinUI in <a href="B20908_05.xhtml#_idTextAnchor114"><em class="italic">Chapter 5</em></a><em class="italic">, Exploring WinUI Controls</em>. This is what some of the common WinUI controls look like in light and dark modes in Windows 11:</p>
			<div><div><img src="img/B20908_07_01.jpg" alt="Figure 7.1 – Some common controls in light and dark modes"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.1 – Some common controls in light and dark modes</p>
			<p>By<a id="_idIndexMarker509"/> default, the WinUI controls make use of Fluent styles. We will see how to override the default Fluent styles in our WinUI controls later in the chapter.</p>
			<h2 id="_idParaDest-158"><a id="_idTextAnchor158"/>Patterns</h2>
			<p>Patterns are<a id="_idIndexMarker510"/> groups of related controls or a group of controls that becomes a single new element. This group could be added to a composite control for re-use. Some examples of patterns in WinUI include the following:</p>
			<ul>
				<li><strong class="bold">Search</strong>: In its simplest <a id="_idIndexMarker511"/>form, a search pattern needs to have controls for <a id="_idIndexMarker512"/>accepting input, invoking the search, and displaying the search results. An additional element may be added for suggesting searches before any input is received. Assistants such as <em class="italic">Amazon Alexa</em> do this <a id="_idIndexMarker513"/>based on a user’s calendar, contacts, news preferences, and so on. Adding an autosuggest list based on user input is a common feature of modern search controls. You could also integrate chat controls<a id="_idIndexMarker514"/> with <strong class="bold">artificial intelligence</strong> (<strong class="bold">AI</strong>) such as <a id="_idIndexMarker515"/>Microsoft’s <strong class="bold">Bot Framework</strong> or OpenAI’s <strong class="bold">ChatGPT</strong> to <a id="_idIndexMarker516"/>ask some follow-up questions based on the initial search parameters.</li>
				<li><strong class="bold">Forms</strong>: Forms<a id="_idIndexMarker517"/> are a <a id="_idIndexMarker518"/>very common control pattern. They consist of groups of related labels, input controls, and command buttons that collect a related set of data elements. Some common forms with potential for re-use are user account creation forms and forms for collecting user feedback. Forms should follow the Fluent Design guidelines for spacing, flexible <a id="_idIndexMarker519"/>layout, and using typography for creating a hierarchy (Microsoft Learn example: <a href="https://learn.microsoft.com/windows/apps/design/controls/forms">https://learn.microsoft.com/windows/apps/design/controls/forms</a>).</li>
				<li><code>ListView</code> control and a <code>SplitView</code> control to separate the list from the selected item’s details. Depending on the width of the page, the two views can either be stacked vertically or displayed side by side (Microsoft Learn<a id="_idIndexMarker522"/> example: <a href="https://learn.microsoft.com/windows/apps/design/controls/list-details">https://learn.microsoft.com/windows/apps/design/controls/list-details</a>).</li>
			</ul>
			<p>Each of these <a id="_idIndexMarker523"/>patterns encapsulates the elements of Fluent Design to create a composite control that can be reused across applications. You may have control patterns in your projects that could be added to a shared control library for ease of reuse. Shared libraries such as these can save time and ensure that good design practices are followed across teams.</p>
			<h2 id="_idParaDest-159"><a id="_idTextAnchor159"/>Layout</h2>
			<p>The layout is <a id="_idIndexMarker524"/>important to ensure that an application adapts to any screen size or orientation. Flexibility is a key tenet of a well-designed layout. When a window or page is resized, the contents can adapt by repositioning controls, adding/removing items, changing the flow of items, replacing controls with others that better fit the current available space, or simply resizing items. This is typically handled in XAML with <code>VisualState</code> for each size threshold to which your page must adapt, possibly defined as <code>VisualState</code> updates control properties to adapt to the new layout. Microsoft Learn has a great example of this at <a href="https://learn.microsoft.com/windows/apps/design/layout/layouts-with-xaml">https://learn.microsoft.com/windows/apps/design/layout/layouts-with-xaml</a>. WinUI includes several different layout panels that can help developers create the right layout for their pages and respond to changes in size, orientation, and resolution.</p>
			<h2 id="_idParaDest-160"><a id="_idTextAnchor160"/>Input</h2>
			<p>There are<a id="_idIndexMarker525"/> Fluent Design recommendations for responding to user input. There are guidelines for reacting to the traditional mouse and keyboard input that developers have been handling for decades. Modern applications can do things such as pan, zoom, rotate, or scroll based on mouse input. A keyboard may be a physical keyboard or an onscreen keyboard for mobile and touch users.</p>
			<p>Input can come in other forms with today’s hardware:</p>
			<ul>
				<li>Pen/stylus</li>
				<li>Touch</li>
				<li>Touchpad</li>
				<li>Gamepad/controller</li>
				<li>Remote control</li>
				<li>Surface Dial (see <a href="https://learn.microsoft.com/windows/apps/design/input/windows-wheel-interactions">https://learn.microsoft.com/windows/apps/design/input/windows-wheel-interactions</a>)</li>
				<li>AR/VR gestures</li>
				<li>Voice</li>
			</ul>
			<p>User <a id="_idIndexMarker526"/>input can also be simulated with the input injection APIs. An example of where this might be useful is <a id="_idIndexMarker527"/>creating a <strong class="bold">Show Me How</strong> or <strong class="bold">Guided Tour</strong> feature<a id="_idIndexMarker528"/> in your app. Your code can execute some pre-defined steps, guiding the user through performing some action on the page. This API is beyond the scope of this book. To read about an example of using input injection to intercept mouse input and turn it into touch input, read this article on Microsoft Learn: <a href="https://learn.microsoft.com/windows/apps/design/input/input-injection">https://learn.microsoft.com/windows/apps/design/input/input-injection</a>.</p>
			<h2 id="_idParaDest-161"><a id="_idTextAnchor161"/>Style</h2>
			<p>Style encompasses multiple<a id="_idIndexMarker529"/> aspects of Fluent Design:</p>
			<ul>
				<li><strong class="bold">Icons</strong>: Good icons<a id="_idIndexMarker530"/> should be simple and convey the application’s purpose.</li>
				<li><strong class="bold">Color</strong>: The color<a id="_idIndexMarker531"/> choice is important. Allowing users to customize their colors is also a great way to make your app feel personal to them. WinUI makes it easy to adapt the user’s light or dark theme choice and the Windows highlight color by using theme brushes.</li>
				<li><strong class="bold">Typography</strong>: Microsoft <a id="_idIndexMarker532"/>recommends that Windows applications all use the Segoe UI font. Selecting the font size can help convey a hierarchy within the app, such as a book or document layout. To this <a id="_idIndexMarker533"/>end, Microsoft<a id="_idIndexMarker534"/> has defined a <strong class="bold">type ramp</strong> (available at <a href="https://learn.microsoft.com/windows/apps/design/style/typography#type-ramp">https://learn.microsoft.com/windows/apps/design/style/typography#type-ramp</a>). A type ramp defines the increase in font size for different styled elements on the screen, such as <em class="italic">Body</em>, <em class="italic">Title</em>, and <em class="italic">Subtitle</em>. There are static resources that can be leveraged in WinUI to select the right size for a control’s intended use.</li>
				<li><strong class="bold">Spacing</strong>: Spacing<a id="_idIndexMarker535"/> between and within controls is important for readability and usability. WinUI controls allow a Standard or Compact density to be selected. More information about sizing and Fluent densities can be found here: <a href="https://learn.microsoft.com/windows/apps/design/style/spacing">https://learn.microsoft.com/windows/apps/design/style/spacing</a>.</li>
				<li><strong class="bold">Reveal focus</strong>: Drawing attention to focusable elements is important for larger displays, such as an Xbox or <a id="_idIndexMarker536"/>Surface Hub. This is achieved through lighting effects with Fluent.</li>
				<li><strong class="bold">Acrylic</strong>: This is a type of <a id="_idIndexMarker537"/>WinUI brush that creates texture with transparency. This texture gives a feeling of depth to the user interface. We will discuss Acrylic in more detail later in this chapter.</li>
				<li><strong class="bold">Mica</strong>: This is a dynamic material<a id="_idIndexMarker538"/> like Acrylic, but unlike Acrylic it is opaque, not transparent. It creates the background of the app by incorporating elements of the current OS theme and desktop wallpaper. We will see how to incorporate Mica into your own WinUI applications later in the chapter.</li>
				<li><strong class="bold">Corner radius</strong>: Fluent <a id="_idIndexMarker539"/>Design promotes the idea that rounded corners promote positive feelings in users. WinUI controls have a rounded corner radius consistent with Fluent Design recommendations.</li>
				<li><strong class="bold">Sound</strong>: Sound <a id="_idIndexMarker540"/>can be an integral part of crafting an immersive experience in your apps. A subtle whooshing sound when panels slide open or closed and using just the right tone and volume in the sound of an alert can immerse the app’s users.</li>
				<li><strong class="bold">Writing style</strong>: Believe <a id="_idIndexMarker541"/>it or not, writing style is part of app design. Line-of-business applications should not have the same writing style as a casual consumer app or a puzzle game. Users will be pulled into the app experience if they don’t notice the writing style at all because it fits what they expect for the application type.</li>
			</ul>
			<p>These are just some of the aspects of style defined by Fluent Design. You can read more about them on<a id="_idIndexMarker542"/> Microsoft Learn: <a href="https://learn.microsoft.com/windows/apps/design/style/">https://learn.microsoft.com/windows/apps/design/style/</a>.</p>
			<p>Many of the aspects of Fluent style are made available to our WinUI apps via XAML styles and other static resources. Next, we will look at how we can update our sample application to respond to changes in a user’s Windows theme.</p>
			<h1 id="_idParaDest-162"><a id="_idTextAnchor162"/>Incorporating Fluent Design in WinUI applications</h1>
			<p>It is time to incorporate a <a id="_idIndexMarker543"/>few of the Fluent Design principles into the <strong class="bold">My Media Collection</strong> application and polish the UI a little. Most of the WinUI controls are already designed to meet Fluent standards, but there were a few properties we modified without understanding Fluent Design.</p>
			<h2 id="_idParaDest-163"><a id="_idTextAnchor163"/>Updating the title bar</h2>
			<p>Before we even get into the <a id="_idIndexMarker544"/>XAML to improve the styles, let’s fix the application’s title bar. Until now, the title bar always read <strong class="bold">MyMediaCollection</strong> without any spaces or indication of the current page:</p>
			<ol>
				<li>First, to fix the spacing when the app is packaged and distributed, open <code>Package.appmanifest</code> from the <code>My Media Collection</code>. If you like, you can also change <strong class="bold">Description</strong>.</li>
			</ol>
			<div><div><img src="img/B20908_07_02.jpg" alt="Figure 7.2 – Updating information in Package.appmanifest"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.2 – Updating information in Package.appmanifest</p>
			<p class="list-inset">Updating <code>AppWindow</code> class.</p>
			<ol>
				<li value="2">To update the text in the app’s title bar, add the following code to <code>MainWindow.xaml.cs</code>:<pre class="source-code">
<strong class="bold">using Microsoft.UI;</strong>
<strong class="bold">using Microsoft.UI.Windowing;</strong>
using Microsoft.UI.Xaml;
<strong class="bold">using System;</strong>
<strong class="bold">using WinRT.Interop;</strong>
namespace MyMediaCollection
{
    public sealed partial class MainWindow : Window
    {
        private AppWindow _appWindow;
        private const string AppTitle = "My Media Collection";
        public MainWindow()
        {
            this.InitializeComponent();
<strong class="bold">            _appWindow = GetCurrentAppWindow();</strong>
<strong class="bold">            _appWindow.Title = AppTitle;</strong>
        }
<strong class="bold">        private AppWindow GetCurrentAppWindow()</strong>
<strong class="bold">        {</strong>
<strong class="bold">            IntPtr handle = WindowNative.GetWindowHandle(this);</strong>
<strong class="bold">            WindowId windowId = Win32Interop.GetWindowIdFromWindow(handle);</strong>
<strong class="bold">            return AppWindow.GetFromWindowId(windowId);</strong>
<strong class="bold">        }</strong>
    }
}</pre></li>				<li>Now, add <a id="_idIndexMarker546"/>an <code>internal</code> method named <code>SetPageTitle</code> so each page can append its title to the main window title:<pre class="source-code">
internal void SetPageTitle(string title)
{
    if (_appWindow == null)
    {
        _appWindow = GetCurrentWindow();
    }
    _appWindow.Title = $"{AppTitle} – {title}";
}</pre></li>				<li>In order <a id="_idIndexMarker547"/>for each page to access <code>MainWindow</code>, expose an internal member in <code>App.xaml.cs</code>:<pre class="source-code">
internal Window Window =&gt; m_window;</pre></li>				<li>Next, in <code>MainPage.xaml.cs</code>, add an event handler for the <code>Loaded</code> event of the page. In the event handler, add some code to append to the <code>Title</code> of the current window with the page title of <code>Home</code>. When we launch the application, the title bar should read <strong class="bold">My Media Collection - </strong><strong class="bold">Home</strong>:<pre class="source-code">
public MainPage()
{
    this.InitializeComponent();
    Loaded += MainPage_Loaded;
}
private void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    var mainWindow = (Application.Current as App)?.Window as MainWindow;
    if (mainWindow != null)
    {
        mainWindow.SetPageTitle("Home");
    }
}</pre></li>				<li>Finally, make the same changes in <code>ItemDetailsView.xaml.cs</code>, but set the<a id="_idIndexMarker548"/> page title to <code>Item Details</code>.</li>
			</ol>
			<p>Now, when you run the application, you should see the title bar text update as you navigate between the list of items and the item details. Let’s make some changes to the styles of <code>MainPage</code> next.</p>
			<h2 id="_idParaDest-164"><a id="_idTextAnchor164"/>Changing the style of MainPage</h2>
			<p>Currently, the main page of our <a id="_idIndexMarker549"/>application doesn’t have many styles. We set the <code>FontWeight</code> of a few <code>TextBlock</code> controls to <code>Bold</code> to set them apart as important items, but this doesn’t follow the Fluent Design guidelines for typography. There is also a purple border separating the <code>ListView</code> header from its items:</p>
			<div><div><img src="img/B20908_07_03.jpg" alt="Figure 7.3 – The current main page of My Media Collection"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.3 – The current main page of My Media Collection</p>
			<p>Hard-coding <a id="_idIndexMarker550"/>colors is not a good practice. Even if you were using custom colors as product branding, you could centralize them in <code>Application.Resources</code>. Let’s work our way through the <code>MainPage.xaml</code> file and make some improvements:</p>
			<ol>
				<li>First, update the text of the first <code>TextBlock</code> from <code>Media Collection</code> to <code>Home</code>, matching the text in the window’s title bar. Wrap it in a horizontally aligned <code>StackPanel</code> and add a preceding <code>SymbolIcon</code> control to display a <code>Style</code> attribute to import the <code>SubheaderTextBlockStyle StaticResource</code>. Those changes should look like this:<pre class="source-code">
&lt;StackPanel Orientation="Horizontal"&gt;
    &lt;SymbolIcon Symbol="Home" Margin="8"/&gt;
    &lt;TextBlock Text="Home"
               Style="{StaticResource SubheaderTextBlockStyle}"
               Margin="8"/&gt;
&lt;/StackPanel&gt;</pre></li>				<li>We should also remove the <code>FontWeight</code> attribute from the <strong class="bold">Media Type</strong> label and use a Fluent style resource:<pre class="source-code">
&lt;TextBlock Text="Media Type:" Margin="4"
           Style="{StaticResource SubtitleTextBlockStyle}"
           VerticalAlignment="Bottom"/&gt;</pre></li>				<li>Next, change the surrounding <code>Grid</code> to a <code>StackPanel</code> and remove the <code>Grid.Column</code><code> Definition</code> definitions. In addition to simplifying the layout, this will <a id="_idIndexMarker551"/>allow the <strong class="bold">Home</strong> symbol and text to appear above the rest of the controls on the page, reinforcing the hierarchy. The full block of code will look like this:<pre class="source-code">
<strong class="bold">&lt;StackPanel&gt;</strong>
<strong class="bold">    &lt;StackPanel Orientation="Horizontal"&gt;</strong>
<strong class="bold">        &lt;SymbolIcon Symbol="Home" Margin="8"/&gt;</strong>
        &lt;TextBlock <strong class="bold">Text="Home"</strong>
<strong class="bold">                   Style="{StaticResource SubheaderTextBlockStyle}"</strong>
<strong class="bold">                   Margin="8"</strong>/&gt;
    <strong class="bold">&lt;/StackPanel&gt;</strong>
    &lt;StackPanel Orientation="Horizontal"
                HorizontalAlignment="Right"&gt;
        <strong class="bold">&lt;TextBlock Text="Media Type:"</strong>
<strong class="bold">                   Margin="4"</strong>
<strong class="bold">                   Style="{StaticResource SubtitleTextBlockStyle}"</strong>
<strong class="bold">                   VerticalAlignment="Bottom"/&gt;</strong>
<strong class="bold">        &lt;ComboBox ItemsSource="{x:Bind ViewModel.Mediums}"</strong>
<strong class="bold">                  SelectedItem="{x:Bind ViewModel.SelectedMedium, Mode=TwoWay}"</strong>
<strong class="bold">                  MinWidth="120"</strong>
<strong class="bold">                  Margin="0,2,6,4"</strong>
<strong class="bold">                  VerticalAlignment="Bottom"/&gt;</strong>
    &lt;/StackPanel&gt;
<code>HeaderTemplate</code> of the <code>ListView</code> to replace the purple <code>BorderBrush</code> attributes with <code>SystemAccentColor</code> from <code>ThemeResource</code>. This will make sure that the border’s color picks up the user’s preferred accent color from their selected Windows theme. Also, change each <code>TextBlock</code> to use a built-in <code>Style</code> instead of setting <code>FontWeight</code> and change the <code>Width</code> of the first column to be <code>120</code> to accommodate the larger title font:<pre class="source-code">
&lt;ListView.HeaderTemplate&gt;
    &lt;DataTemplate&gt;
        &lt;Grid Margin="4,0,4,0"&gt;
            &lt;Grid.ColumnDefinitions&gt;
                &lt;ColumnDefinition <strong class="bold">Width="120"</strong>/&gt;
                &lt;ColumnDefinition Width="*"/&gt;
            &lt;/Grid.ColumnDefinitions&gt;
            &lt;Border <strong class="bold">BorderBrush="{ThemeResource SystemAccentColor}"</strong>
                    BorderThickness="0,0,0,1"&gt;
                &lt;TextBlock Text="Medium"
                           Margin="4,0,0,0"
                           <strong class="bold">Style="{StaticResource TitleTextBlockStyle}"</strong>/&gt;
            &lt;/Border&gt;
            &lt;Border Grid.Column="1"
                    <strong class="bold">BorderBrush="{ThemeResource SystemAccentColor}"</strong>
                    BorderThickness="0,0,0,1"&gt;
                &lt;TextBlock Text="Title"
                           Margin="4,0,0,0"
                           <strong class="bold">Style="{StaticResource TitleTextBlockStyle}"</strong>/&gt;
            &lt;/Border&gt;
        &lt;/Grid&gt;
    &lt;/DataTemplate&gt;
&lt;/ListView.HeaderTemplate&gt;</pre><p class="list-inset">Note that you will also need to change the first column <code>Width</code> to <code>120</code> in the <code>ListView.ItemTemplate</code>.</p></li>				<li>Finally, let’s<a id="_idIndexMarker553"/> define the end of the list area by adding a border between the bottom of <code>ListView</code> and the command buttons. Do this by wrapping the buttons’ <code>StackPanel</code> with a <code>Border</code> control, again using <code>SystemAccentColor</code>. <code>Margin= "4,0"</code> is shorthand that is equivalent to <code>Margin= "4,0,4,0"</code>:<pre class="source-code">
<strong class="bold">&lt;Border Grid.Row="2"</strong>
<strong class="bold">        BorderBrush="{ThemeResource SystemAccentColor}"</strong>
<strong class="bold">        BorderThickness="0,1,0,0"</strong>
<strong class="bold">        Margin="4,0"&gt;</strong>
    &lt;StackPanel Orientation="Horizontal"
                HorizontalAlignment="Right"&gt;
        &lt;Button Command="{x:Bind ViewModel.AddEditCommand}"
                Content="Add/Edit Item" Margin="8,8,0,8"/&gt;
        &lt;Button Command="{x:Bind ViewModel.DeleteCommand}"
                Content="Delete Item"
                Grid.Column="1"
                Margin="8"/&gt;
    &lt;/StackPanel&gt;
<strong class="bold">&lt;/Border&gt;</strong></pre></li>				<li>Run the application <a id="_idIndexMarker554"/>and check out the restyled user interface. It looks much better. You can now easily see the hierarchy of data, however limited it may be in our simple application:</li>
			</ol>
			<div><div><img src="img/B20908_07_04.jpg" alt="Figure 7.4 – The newly styled My Media Collection home page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.4 – The newly styled My Media Collection home page</p>
			<p>Before moving<a id="_idIndexMarker555"/> on to the details page, let’s see how the page looks if we select the dark mode in Windows. Open <strong class="bold">Windows Settings</strong>, go to <strong class="bold">Personalization | Colors</strong>, and select <strong class="bold">Dark</strong> from the <strong class="bold">Choose your color</strong> dropdown (if you normally use <strong class="bold">Dark</strong>, try changing it to <strong class="bold">Light</strong>):</p>
			<div><div><img src="img/B20908_07_05.jpg" alt="Figure 7.5 – My Media Collection running in dark mode"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.5 – My Media Collection running in dark mode</p>
			<p>Everything <a id="_idIndexMarker556"/>on the page switches to dark mode without any code changes except for the title bar. To learn more about title bar customization, including changing colors or the icon, or even completely replacing it with a custom title bar, see this topic on Microsoft Learn: <a href="https://learn.microsoft.com/windows/apps/develop/title-bar">https://learn.microsoft.com/windows/apps/develop/title-bar</a>.</p>
			<p>If you have a good reason to keep your application in light or dark mode, you can update <code>Application.xaml</code> to add a single attribute to the <code>Application</code> element using this command:</p>
			<pre class="source-code">
RequestedTheme="Dark"</pre>			<p>This will apply the <code>Dark</code> theme to the entire application. If you have a reason to only force this theme on part of the application, the <code>RequestedTheme</code> attribute can be applied to an individual <code>Page</code> or <code>Control</code>. Now, let’s apply the same types of styles to the details page.</p>
			<h2 id="_idParaDest-165"><a id="_idTextAnchor165"/>Changing the style of ItemDetailsPage</h2>
			<p>We want to <a id="_idIndexMarker557"/>update <code>ItemDetailsPage.xaml</code> to provide it with the same overall look and feel as the main page:</p>
			<ol>
				<li>Open the file and start by updating <code>Item Details</code>. Give it the same <code>Subheader</code><code> TextBlockStyle</code> that was used on <code>Home</code> and wrap it in a horizontally aligned <code>Stack</code><code> Panel</code>. Precede <code>TextBlock</code> with a <code>SymbolIcon</code>, which uses the <code>Edit</code> symbol:<pre class="source-code">
&lt;StackPanel Orientation="Horizontal"&gt;
    &lt;SymbolIcon Symbol="Edit" Margin="8"/&gt;
    &lt;TextBlock Text="Item Details"
               Style="{StaticResource SubheaderTextBlockStyle}"
               Margin="8"/&gt;
&lt;/StackPanel&gt;</pre></li>				<li>Next, modify the <code>Grid</code> that follows the new <code>StackPanel</code> to have top and bottom borders. Also, modify the <code>Margin</code> to have 4 px on either side of <code>Grid</code>:<pre class="source-code">
&lt;Grid Grid.Row="1"
      BorderBrush="{ThemeResource SystemAccentColor}"
      BorderThickness="0,1,0,1"
      Margin="4,0,4,8"&gt;</pre></li>			</ol>
			<p>That’s all we need to change on this page. Run the application again and navigate to the details page to see how it looks:</p>
			<div><div><img src="img/B20908_07_06.jpg" alt="Figure 7.6 – The restyled Item Details page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.6 – The restyled Item Details page</p>
			<p>This looks<a id="_idIndexMarker558"/> great. Now the styles of the two pages match, and the added border lines match the color of the highlighted active input field.</p>
			<p>Let’s now shift gears and review a tool that can help designers and developers when implementing Fluent Design.</p>
			<h1 id="_idParaDest-166"><a id="_idTextAnchor166"/>Using the Fluent XAML Theme Editor</h1>
			<p>We’ve seen how easy it is to adopt the default color and theme resources from the user’s Windows settings, but what if you or your company wants to create a custom theme for an application? Maybe that theme needs to be shared across a suite of applications. You could create a XAML file with <code>ResourceDictionary</code> in Visual Studio and code all the markup by hand for a new style. Visual Studio’s <strong class="bold">IntelliSense</strong> will <a id="_idIndexMarker559"/>help in some regards. However, there is an easier way.</p>
			<p>Microsoft has created an open source tool called <a id="_idIndexMarker560"/>the <code>ResourceDictionary</code> XAML file that you can drop into your projects.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The Fluent XAML Theme Editor was created to adjust the styles for UWP controls, but these same styles will also work with WinUI 3 controls.</p>
			<p>To <a id="_idIndexMarker561"/>install the application, open the <code>fluent xaml</code> in the search field, and you will find <strong class="bold">Fluent XAML Theme Editor</strong> in the search results. Click it in the search results to view the product page:</p>
			<div><div><img src="img/B20908_07_07.jpg" alt="Figure 7.7 – The Fluent XAML Theme Editor page in the Microsoft Store"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.7 – The Fluent XAML Theme Editor page in the Microsoft Store</p>
			<p>If you have already installed the app, there will be a <strong class="bold">Launch</strong> button. If it is not installed, you can click the <strong class="bold">Install</strong> button. When it completes its installation, you will find the app in your <strong class="bold">Start</strong> menu.</p>
			<p>When you first launch the app, it will launch with the default styles for a UWP app, displayed in both light and dark themes. On the right-hand panel, you will find controls for changing the colors and shapes of UI elements. <strong class="bold">Typography</strong> is listed as <strong class="bold">Coming Soon</strong>, but it’s been promising this for many years:</p>
			<div><div><img src="img/B20908_07_08.jpg" alt="Figure 7.8 – The Fluent XAML Theme Editor for Windows"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.8 – The Fluent XAML Theme Editor for Windows</p>
			<h2 id="_idParaDest-167"><a id="_idTextAnchor167"/>Colors</h2>
			<p>On the <strong class="bold">Colors</strong> tab, you <a id="_idIndexMarker562"/>can select one of the default profiles from the <strong class="bold">Color Presets</strong> dropdown. In addition to the default preset, there are <strong class="bold">Lavender</strong>, <strong class="bold">Forest</strong>, and <strong class="bold">Nighttime</strong> options. There are also options to load additional presets or to save your current color settings as a new preset. These color presets are saved in JSON format.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Any colors you specify here will override the Windows system accent color that would otherwise be picked up by WinUI applications by default. Unless your application has a good reason to follow another theme, it’s best to let WinUI use the user’s chosen accent colors. Designing a custom theme should be undertaken by an experienced design team.</p>
			<p>Clicking on <a id="_idIndexMarker563"/>any of the colors in the current preset will launch a color picker window, where you can adjust the current color:</p>
			<div><div><img src="img/B20908_07_09.jpg" alt="Figure 7.9 – Adjusting a preset color with a color picker"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.9 – Adjusting a preset color with a color picker</p>
			<p>The <strong class="bold">Region</strong>, <strong class="bold">Base</strong>, and <strong class="bold">Primary</strong> colors <a id="_idIndexMarker564"/>can each be adjusted independently to change their light and dark theme appearance.</p>
			<h2 id="_idParaDest-168"><a id="_idTextAnchor168"/>Shapes</h2>
			<p>The <strong class="bold">Shapes</strong> panel<a id="_idIndexMarker565"/> provides controls to adjust the <strong class="bold">Corner Radius</strong> of the <strong class="bold">Controls</strong> and the <strong class="bold">Overlay</strong>. This is also where you can adjust the default <strong class="bold">Border Thickness</strong> for the theme.</p>
			<p>Shape presets, like colors, can also be saved and loaded. The app comes with two presets: <strong class="bold">Default</strong> and <strong class="bold">No Rounding, Thicker Borders</strong>. The difference is subtle but noticeable:</p>
			<div><div><img src="img/B20908_07_010.jpg" alt="Figure 7.10 – Shapes with No Rounding and Thicker Borders applied"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.10 – Shapes with No Rounding and Thicker Borders applied</p>
			<p>When you are done adjusting the color and shape settings, use the <code>ResourceDictionary</code> with your theme data. You can copy the XAML and paste it into a <code>Resources</code> section in your project:</p>
			<div><div><img src="img/B20908_07_011.jpg" alt="Figure 7.11 – Exporting a theme from the Fluent XAML Theme Editor"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.11 – Exporting a theme from the Fluent XAML Theme Editor</p>
			<p>Next, let’s explore the Acrylic material, which is part of the Fluent Design System that we touched on earlier in the chapter.</p>
			<h1 id="_idParaDest-169"><a id="_idTextAnchor169"/>Acrylic material and the Fluent Design System</h1>
			<p>Acrylic<a id="_idIndexMarker566"/> is a WinUI brush that, when applied in your apps, provides a translucent texture. The texture works in both light and dark themes in Windows, and it is a great way to give users the feeling of depth when using your applications. The <code>AcrylicBrush</code> class is part of the <code>Microsoft.UI.Xaml.Media</code> namespace in the Windows App SDK, where <code>Brush</code>, <code>SolidColorBrush</code>, and <code>GradientBrush</code> are also found.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The Acrylic material is also available to UWP applications that use WinUI 2.8.x.</p>
			<p>If you want to<a id="_idIndexMarker567"/> explore the <code>AcrylicBrush</code> before <a id="_idIndexMarker568"/>deciding to use it in your own projects, you can try it in the WinUI 3 Gallery app:</p>
			<div><div><img src="img/B20908_07_012.jpg" alt="Figure 7.12 – Exploring AcrylicBrush in the WinUI 3 Gallery"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.12 – Exploring AcrylicBrush in the WinUI 3 Gallery</p>
			<p>On the gallery page, you can see the default styles of <code>AcrylicBrush</code> and how they’ll appear in the Windows light and dark themes. Additionally, the gallery page provides controls to adjust the opacity and tint of the brush. You can also set a fallback solid color for the brush. The fallback color is used on systems without the resources to load an acrylic brush.</p>
			<p>Depending on which brush is applied, the element will paint the acrylic brush based on background elements or in-app elements behind the current, overlapping element. The WinUI 3 Gallery has examples of how to apply either type of brush. This is an example of the in-app brush:</p>
			<pre class="source-code">
&lt;Rectangle Fill="{ThemeResource AcrylicInAppFillColorDefaultBrush}"/&gt;</pre>			<p>This example<a id="_idIndexMarker569"/> shows how to apply a background acrylic brush:</p>
			<pre class="source-code">
&lt;Rectangle Fill="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}"/&gt;</pre>			<p>When incorporated into your WinUI application, an acrylic brush gives users the feeling of texture and depth, which are two of the fundamental principles of Fluent Design. Another material you can choose to incorporate is Mica.</p>
			<h1 id="_idParaDest-170"><a id="_idTextAnchor170"/>Use Mica in WinUI applications</h1>
			<p><strong class="bold">Mica</strong> is <a id="_idIndexMarker570"/>another material that’s available to WinUI applications. You can think of Mica as an Acrylic background brush without the transparency. It creates the brush style based on the current desktop background color in Windows. There are two variants of the Mica<a id="_idIndexMarker571"/> material: <strong class="bold">Mica</strong> and <strong class="bold">Mica Alt</strong>. Mica Alt creates the same kind of opaque background as <a id="_idIndexMarker572"/>Mica, but it has <a id="_idIndexMarker573"/>stronger tinting.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Mica is only available in Windows 11 and later. If your app uses Mica and is installed on Windows 10, it will not apply the material.</p>
			<p>If you use the WinUI 3 Gallery and open the System Backdrops (Mica/Acrylic) page, you can launch a WinUI window and cycle through the Mica, Mica Alt, and Acrylic materials applied to the window background:</p>
			<div><div><img src="img/B20908_07_013.jpg" alt="Figure 7.13 – Viewing the same window with Mica, Mica Alt, and Acrylic"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.13 – Viewing the same window with Mica, Mica Alt, and Acrylic</p>
			<p>The code to set the <a id="_idIndexMarker574"/>system backdrop for a window is more involved than just applying a brush to the <code>Fill</code> property of a <code>Rectangle</code> or another UI element. Let’s try configuring Mica Alt in the My Media Collection app.</p>
			<h2 id="_idParaDest-171"><a id="_idTextAnchor171"/>Incorporate Mica into My Media Collection</h2>
			<p>Bringing <a id="_idIndexMarker575"/>Mica into your own apps is easy with <a id="_idIndexMarker576"/>Windows App SDK 1.3 or later. Let’s use the Mica Alt material in My Media Collection. It only takes a few steps:</p>
			<ol>
				<li>First, check that your project is using Windows App SDK 1.3 or later. If it’s not, you can use the <strong class="bold">NuGet Package Manager</strong> to upgrade it to the latest available version.</li>
				<li>Next, open <code>MainPage.xaml</code> and <code>ItemDetailsPage.xaml</code> and remove the <code>Background</code> property for each <code>Page</code> element. If the <code>Page</code> elements (or any of their children) aren’t transparent, you won’t see the Mica backdrop.</li>
				<li>Finally, open <code>MainWindow.xaml.cs</code> and add the following code to the constructor immediately after the call to <code>InitializeComponent</code>:<pre class="source-code">
SystemBackdrop = new MicaBackdrop
{
    Kind = MicaKind.BaseAlt
};</pre></li>			</ol>
			<p>That’s it. Now run<a id="_idIndexMarker577"/> the app and see how the <a id="_idIndexMarker578"/>background looks with Mica. The color in the app will vary depending on your current Windows background:</p>
			<div><div><img src="img/B20908_07_014.jpg" alt="Figure 7.14 – Styling My Media Collection with Mica"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.14 – Styling My Media Collection with Mica</p>
			<p>Notice that the title bar does not pick up the Mica material, just as it ignores theme changes. If you would like to do this on your own, you can follow the Microsoft Learn instructions for extending your window contents into the title bar area: <a href="https://learn.microsoft.com/windows/apps/develop/title-bar?tabs=wasdk#full-customization">https://learn.microsoft.com/windows/apps/develop/title-bar?tabs=wasdk#full-customization</a>. For this approach, you will need to create your own title bar control with any buttons and icons and update the title bar text there during page navigation.</p>
			<p>Now, we will take a quick<a id="_idTextAnchor172"/> look at some additional Fluent Design tools geared towa<a id="_idTextAnchor173"/>rd designers.</p>
			<h1 id="_idParaDest-172">Design resources and toolkits for Flu<a id="_idTextAnchor174"/>ent Design</h1>
			<p>While a deep dive into us<a id="_idTextAnchor175"/>er <a id="_idIndexMarker579"/>interface design is beyond the scope of this book, w<a id="_idTextAnchor176"/>e will briefly review some of the Fluent Design toolkits available for popular design tools. Design resources and examples for several of these tools can be<a id="_idIndexMarker580"/> downloaded from Microsoft Learn at <a href="https://learn.microsoft.com/windows/apps/design/downloads/">https://learn.microsoft.com/windows/apps/design/downloads/</a>:</p>
			<ul>
				<li><strong class="bold">Figma</strong>: This is <a id="_idIndexMarker581"/>a design and prototyping tool with free and paid opti<a id="_idTextAnchor178"/>ons, depending <a id="_idIndexMarker582"/>on the team and project size. You can find out more ab<a id="_idTextAnchor179"/>out Figma on its<a id="_idIndexMarker583"/> website: <a href="https://www.figma.com/">https://www.figma.com/</a>.</li>
				<li><strong class="bold">Sketch</strong>: This is <a id="_idIndexMarker584"/>another popular tool for designing and prototyping applications individually or with tea<a id="_idTextAnchor180"/>ms. There is no free plan, but Sketch<a id="_idIndexMarker585"/> does have a free trial per<a id="_idTextAnchor181"/>iod. Sketch<a id="_idIndexMarker586"/> is available at <a href="https://www.sketch.com/">https://www.sketch.com/</a>.</li>
				<li><strong class="bold">Adobe XD</strong>: XD is <a id="_idIndexMarker587"/>Adobe’s design/prototype tool<a id="_idTextAnchor182"/>. Like Figma, Adobe XD<a id="_idIndexMarker588"/> has free and paid<a id="_idIndexMarker589"/> options for designing apps with their tool. Check<a id="_idTextAnchor183"/> out XD at <a href="https://helpx.adobe.com/support/xd.html">https://helpx.adobe.com/support/xd.html</a>.</li>
				<li><strong class="bold">Adobe Illustrator</strong>: This is a<a id="_idIndexMarker590"/> powerful vector <a id="_idTextAnchor184"/>design tool from Adobe. There is a free trial available. Download and get<a id="_idIndexMarker591"/> started with Adobe Illustrator<a id="_idIndexMarker592"/> at <a href="https://www.adobe.com/products/illustrator.html">https://www.adobe.com/products/illustrator.html</a>.</li>
				<li><strong class="bold">Inkscape</strong> (<a href="https://inkscape.org/">https://inkscape.org/</a>) is a free<a id="_idIndexMarker593"/> vector image e<a id="_idTextAnchor186"/>ditor that can <a id="_idIndexMarker594"/>also<a id="_idIndexMarker595"/> work <a id="_idIndexMarker596"/>with <strong class="bold">Adobe Illustrator (</strong><strong class="bold">AI)</strong> fil<a id="_idTextAnchor187"/>es.</li>
				<li><strong class="bold">Adobe Photoshop</strong>: This is <a id="_idIndexMarker597"/>probably one of the best-known raster image<a id="_idIndexMarker598"/> editors. Adobe also<a id="_idIndexMarker599"/> has a free trial for Photoshop at <a href="https://www.adobe.com/products/photoshop.html">https://www.adobe.com/products/photoshop.html</a>.</li>
			</ul>
			<p>The Fluent Design toolkit for Phot<a id="_idTextAnchor188"/>oshop includes several PSD files. It is also possible to work with PSD files in free image <a id="_idIndexMarker600"/>editors such<a id="_idIndexMarker601"/> <a id="_idTextAnchor189"/>as <strong class="bold">GIMP</strong> (<a href="https://www.gimp.org/">https://www.gimp.org/</a>) or <strong class="bold">Paint.NET</strong> (<a href="https://www.getpaint.net/">https://www.getpaint.net/</a>). Paint.NET requires an open source plugin, available at <a href="https://www.psdplugin.com/">https://www.psdplugin.com/</a>.</p>
			<h1 id="_idParaDest-173"><a id="_idTextAnchor193"/>Summary</h1>
			<p>We have learned a lot about Fluent Design, design resources, and the tools available to WinUI developers in this chapter. You will be able to use these tools and techniques in your WinUI application design or recommend them to designers at your company. We also updated the My Media Collection app to be more compliant with Fluent Design recommendations and learned how to incorporate the Acrylic and Mica materials.</p>
			<p>In the next chapter, we w<a id="_idTextAnchor194"/><a id="_idTextAnchor195"/>ill examine how to add notifications to WinUI with the Windows App SDK notifications system.</p>
			<h1 id="_idParaDest-174"><a id="_idTextAnchor196"/>Questions</h1>
			<ol>
				<li>Which platforms have Fluent Design implementations?</li>
				<li>What is a control pattern?</li>
				<li>Which font does Microsoft recommend using for Fluent Design?</li>
				<li>Which aspect of style is specific to devices with large screens?</li>
				<li>What are the names of the two spacing densities available in Fluent Design?</li>
				<li>Which attribute can be set in <code>Application.xaml</code> to override a user’s light/dark theme selection?</li>
				<li>Which design tools have Fluent Design toolkits available?</li>
			</ol>
		</div>
	</body></html>