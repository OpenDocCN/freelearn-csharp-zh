<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch01"/>Chapter 1. A Flat World in Unity</h1></div></div></div><p>This is the beginning of our journey in to the world of 2D game development with Unity. This book is structured to guide you through the creation of an entire 2D game from scratch, in particular a tower defense game.</p><p>Despite the fact that we will focus on 2D game development, our final goal is to learn how to use Unity, and therefore this means that we will also have a glance at how Unity handles 3D. So, if later on you want to dedicate some time to 3D games, by the end of this book you will have the necessary background for doing so. In fact, the book is structured to contain as much detail as possible for each topic, and this includes historical overviews and references to further readings.</p><p>In every chapter, we will face different challenges that will improve our skills. Furthermore, this book doesn't stop by telling you just what needs to be done (like many others), but it also explains the different tools that we will encounter and how to use them. In this way, we will learn how to use and apply them in different contexts as well. Thus, you can use this book as a reference manual, in order to speed up your workflow. To help you out, I recommend that you use the index, to quickly locate each one of the specific topics we will face.</p><p>At the end of each chapter, there is a <em>Homework</em> section, which leaves you with some exercises that are related to the topics that we have dealt in that chapter. Of course, you are free to skip this section, but I recommend that you do the exercises if you feel that you need to improve your skills even more.</p><p>For now, this chapter is an introduction to the 2D world inside Unity, and what needs to be done in order to create our game. In particular, we will look at the following topics:</p><div><ul class="itemizedlist"><li class="listitem">What are 2D games?</li><li class="listitem">What does designing and developing 2D games mean?</li><li class="listitem">Where to get Unity and its different versions</li><li class="listitem">Downloading a graphical package from an external source</li><li class="listitem">How to organize a project in Unity</li><li class="listitem">Understanding Unity when it is set in 2D</li><li class="listitem">What are Sprites?</li><li class="listitem">The Sprite Renderer component</li><li class="listitem">Import settings for Sprites</li><li class="listitem">How to use the Sprite Editor with all its different modes</li><li class="listitem">Preparing the assets for our game</li><li class="listitem">Setting up scenes and proportions</li></ul></div><p>One last thing. Sometimes I'll refer to the player and to characters in order to make examples or explain concepts. As such, sometimes I'll refer to them as if they were males, and at other times as if they were females (and sometimes both). The reason derives from my personal point of view so as to not to discriminate between the two genders.</p><p>And with this said, let's get started!</p><div><div><div><div><h1 class="title"><a id="ch01lvl1sec7"/>Learning game development</h1></div></div></div><p>Game development and design are some of the most extensive works of art around. This is due to the large amount of expertise that is required to bring a game to life. You can get an idea of this by just looking at any credits in a game. They are extensive and contain a lot of names of people who have dedicated a lot of their time to the game in various roles.</p><p>Like most things in life, game development can be learned not only through practice, but iteration as well. And even when you master one of the many branches in game development, there is still something new to learn.</p><p>Regardless of your level of knowledge of Unity, I strongly suggest that you follow each step in this book, even if you think you know the topic. You just never know, there is always something new to learn!</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch01lvl1sec8"/>Tower defense games</h1></div></div></div><p>Tower defense games come in many different styles. For example, in the following screenshot of <em>Defense Grid: The Awakening</em> and <em>Unstoppable Gorg</em>, both are top-down isometric style games. However, they are set in different worlds, with different objectives. So, given this, what makes a tower defense game? For one, they are centered on the idea of defending something, whether it is buildings, resources, weapons, and so forth. This is the main mechanism that defines the genre and drives the gameplay. Secondly, most tower defense games require economic and resource management. For example, after each wave of enemies, you may obtain a certain amount of virtual currency that you must then allocate to either the purchase of new defenses (weapons, towers, and so on) or upgrades. Each has their benefits depending on a range of factors such as weak points in your defense as well as the anticipated amount and strength of enemies that will be in the next wave. The number and difficulty of enemies increases after each wave, therefore challenging the player to manage resources and build defenses strategically. The idea is to build up enough resources to upgrade your defenses and to outlast the incoming wave. Sometimes, the player must stop the enemies (or an opponent) from destroying their own base.</p><p>In other cases, the player must prevent the enemies from reaching the end, as each enemy that manages to get through cause damage to the player's health bar.</p><div><img src="img/image00316.jpeg" alt="Tower defense games"/><div><p>(Top) <em>Defense Grid: The Awakening</em> and (bottom) <em>Unstoppable Gorg</em></p></div></div><p style="clear:both; height: 1em;"> </p><p>There are many places on the Internet where you can find tower defense games. For example, Kongregate (<a class="ulink" href="http://www.kongregate.com/">http://www.kongregate.com/</a>) and Newgrounds (<a class="ulink" href="http://www.newgrounds.com/">http://www.newgrounds.com/</a>) are examples of sites where a varied array of free tower defense games exist (such as <em>Kingdom Rush</em> or <em>Bloons Tower Defense 5</em>). However, many exist for iOS (App Store) and Android (Play Store), operating systems such as Linux, OSX, and PC (for example, Steam), and consoles (Playstation, Xbox), and so on.</p></div>
<div><div><div><div><h1 class="title"><a id="ch01lvl1sec9"/>Designing our game</h1></div></div></div><p>Before you even think about turning your computer on, you need to design your game. It's not enough to have a rough idea in mind. You need to write down all your ideas before hand to start working. The first phase of game design is <strong>brainstorming</strong>. There are different techniques and methodologies of brainstorming that, unfortunately, we don't have the time, in this small section, to describe. However, the final outcome should be tons of paper with thousands of ideas written down. It's not meant to be a work of art, but the foundations upon which your game will be built.</p><div><h3 class="title"><a id="note3"/>Note</h3><p>Some information about brainstorming can be found also in a practical book, <em>Gamification with Unity</em>, by <em>Packt publishing</em>. You can find it here: <a class="ulink" href="https://www.packtpub.com/game-development/gamification-unity-5x">https://www.packtpub.com/game-development/gamification-unity-5x</a>.</p></div><p>The next step is to refine your ideas, discard (or keep for other projects) the ones that you don't need, and organize them in a coherent form.</p><p>The final result should be something like the following.</p><div><blockquote class="blockquote"><p><em>Panda Invasion is a 2D tower defense game. In fact, hungry pandas are invading to steal all the sugar from the player. He or she has to push back the pandas by using cupcake towers. There are different kinds of cupcake towers that the player can decide to place in the map. In every level, there will be a path that pandas will follow. Furthermore, they are spawned at the beginning of this path. At the end, there is the ambitious sugar castle that the player has to defend. If the pandas steal too much, bringing the sugar-meter to zero, the player has failed his or her important mission. On the contrary, if he or she is able to push all of them back, the player will gain victory. However, cupcake towers are not free. In fact, the player has to buy them by using candy. Every time that a panda is pushed back, then the player will earn a certain amount of candy. Furthermore, the player can use candy to upgrade the cupcake towers and make them even stronger!</em></p></blockquote></div><p>From this excerpt, you are now able to understand what we are going to do in this book. You also have a basic idea of how to write down your ideas. I strongly suggest that you always do this step, even when you are the only developer, and especially when you have a team.</p></div>
<div><div><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Getting ready</h1></div></div></div><p>Now that we have our idea, the next thing to do is to get Unity. It comes in different versions: Personal (which is free), Plus, Professional, and Enterprise. The last three contain more features than the Personal one. However, all the topics covered in this book can be done with the free version. In any case, you can get or buy Unity on the official website: <a class="ulink" href="http://www.unity3d.com">www.unity3d.com</a>.</p><p>This is the comparison screen between the different versions of Unity on the Unity Technologies website (if you scroll down, you will find which feature is included in which version):</p><div><img src="img/image00317.jpeg" alt="Getting ready"/></div><p style="clear:both; height: 1em;"> </p><div><h3 class="title"><a id="note4"/>Note</h3><p>This is a very short summary of how model pricing for Unity has varied in recent years. In fact, to become a developer also means to be aware of the world around you, and having basic marketing knowledge could also help.
At the beginning, the model price of Unity didn't allow developers to publish commercial games with the free version. In addition, the game engine didn't have all the features, such as the Profiler or the Movie Textures.
Epic Games, the company that owns Unreal Engine, changed its model prices by making its game engine free in March 2015, also for commercial use (although it will take in return the 5% of the game's gross revenue). After a period of time, Unity Technologies also allowed developers to publish commercial games even with the free version, but it was still watermarked. From Unity 5.x, features that were only in the Pro version became available in the free version as well.
During the beginning of 2016, Unity used to come in two different versions: Free (or Personal) and Professional. The latter contains more features than the Personal one, and here is the comparison screen of the two:
</p><div><img src="img/image00318.jpeg" alt="Getting ready"/></div><p style="clear:both; height: 1em;"> </p><p>
In June 2016, Unity changed its price model in the one described earlier.</p></div><p>Once we have installed Unity, we can begin creating new projects. If we click on the <strong>New project</strong> button in the top-right corner of the window, Unity will ask us to insert the details for our project. We can name it <code class="literal">Panda Invasion</code> and choose the destination path, which is where the files of the project will be stored. There is another an important thing to note. Unity gives us the possibility to choose between a 3D and a 2D project. This is not important decision, since it can be changed at any time. However, it is useful to already have in mind whether or not the game will be 2D or 3D. By selecting the 2D mode, Unity adapts the default settings to the game that we have in mind. We will see these settings in the following sections. For now, you should have a screen that looks like the following:</p><div><img src="img/image00319.jpeg" alt="Getting ready"/></div><p style="clear:both; height: 1em;"> </p><p>Now, we can press the <strong>Create project</strong> button, and we have successfully created our project and are ready to build it.</p><p>This book assumes that you are fairly familiar with the Unity interface and with C# code. If you are not, don't worry. There are different ways that you can learn before continuing on with this book. For example, I wrote a small free e-guide that briefly goes through the main interfaces and concepts of Unity. Don't expect to learn all you need from there, but it is a good start. You can find it at <a class="ulink" href="https://www.packtpub.com/packt/free-ebook/what-you-need-know-about-unity-5">https://www.packtpub.com/packt/free-ebook/what-you-need-know-about-unity-5</a>. If you are a complete newcomer to Unity, please read that small e-guide. I'll still be here once you have finished and we can resume our awesome journey. Furthermore, the official manual of Unity and its documentation are great companions in the Unity game development world. You can find them both on the official website, at <a class="ulink" href="https://docs.unity3d.com/Manual/index.html">https://docs.unity3d.com/Manual/index.html</a>.</p><p>Since we don't have the time to create our own graphics for the game that we are going to develop, we need to download a custom package. Of course, you are free to choose the one you like most. For this book, we are going to use the <code class="literal">Tower Defence Pack 2</code> package, which can be downloaded from <a class="ulink" href="http://player26.com/">http://player26.com/</a>.</p><div><h3 class="title"><a id="note5"/>Note</h3><p><code class="literal">Tower Defence Pack 2</code> features a delicious assortment of cupcakes ranging from infamous fluffy white frosting and colorful sprinkles, to decadent chocolate chip, not to mention an all-time favorite, lemon meringue with silver dragees. It also features the Sugar Castle, a home away from home for candy lovers! In addition to all this sugary goodness are trees, mountains, rainbows, and various other assets to populate your sugary environment. Just be beware, there are some hidden dangers among it all with the pandas, so be careful to keep your stash well protected from thieving sweet-toothed animals!</p></div><p>The package includes all the basic assets that we need to create our tower defense game. It is free, even for commercial use, and even if credits are required. There is also a premium version that contains more assets and some of the decorations in different Sprites to increase customizability. In particular, in the free version we can find:</p><div><ul class="itemizedlist"><li class="listitem">Maps designed for tower defense games</li><li class="listitem">Evil pandas (with animation)</li><li class="listitem">Three different upgrading levels for cupcakes towers</li><li class="listitem">Multiple icons for each object in the package</li><li class="listitem">And many more assets to populate the level with!</li></ul></div><p>The following image can give you an idea of the kind of graphics this package contains:</p><div><img src="img/image00320.jpeg" alt="Getting ready"/></div><p style="clear:both; height: 1em;"> </p><p>So, download this package before moving on to the next section.</p></div>
<div><div><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Remembering the past to build the future</h1></div></div></div><p>If you are new to Unity, or you have only used Unity 5.x, you can skip this section or read it just for curiosity.</p><p>In Unity 4.x (before version 4.6) and other previous versions, building 2D games was a bit harder. In fact, you needed to use a range of different methods and tricks to achieve the illusion on 2D. All the 2D objects were actually 3D objects viewed in a particular perspective or with a particular camera, which gave the illusion of a 2D object.</p><p>From Unity 4.6 on, and especially since Unity 5.x, this is not needed any more. There is built-in support for 2D games. So now, there are special components to deal with 2D objects, and the following sections will explore some of them.</p></div>
<div><div><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Organizing the project</h1></div></div></div><p>There are different ways to organize a project within Unity, therefore giving a bit more freedom. In this section, we propose one method, which we will use during the development of the project in this book.</p><p>The key idea is to organize the different assets by type (and not, as in other methods, by their position within the level).</p><p>First of all, let's understand how Unity organizes assets. All of them are placed inside a folder named <code class="literal">Assets</code>, which can be found also inside the <code class="literal">Project</code> folder. Therefore, all our assets should be contained in this folder or subfolder. In order to create a new folder, right-click on the <strong>Project </strong>panel and then <strong>Create</strong> | <strong>Folder</strong>. As a result, a new folder is created within the folder you clicked. Since we don't have any folders, it will be a subfolder of the <strong>Assets</strong> one. We have the option to rename it as we want. If you miss this, you can just select it and then click on it again (but not too fast, otherwise Unity will consider this as a double-click and it will open the folder), as shown in the following screenshot:</p><div><img src="img/image00321.jpeg" alt="Organizing the project"/></div><p style="clear:both; height: 1em;"> </p><div><h3 class="title"><a id="note6"/>Note</h3><p>It is important to note that Unity will ignore the following categories, in order to avoid importing system files:</p><p>
</p><div><ul class="itemizedlist"><li class="listitem">Hidden folders and files</li><li class="listitem">Folder and files that starts with <code class="literal">~</code> and with <code class="literal">.</code></li><li class="listitem">Folders and files named <code class="literal">cvs</code></li><li class="listitem">Files which have a <code class="literal">.tmp</code> extension</li></ul></div></div><p>We need to create the following folders (you should only create the ones in bold, since we will not use the other ones):</p><div><ul class="itemizedlist"><li class="listitem">Fonts</li><li class="listitem"><strong>Graphics</strong></li><li class="listitem">Materials</li><li class="listitem"><strong>Animations</strong> (we will see them in more detail in <a class="link" title="Chapter 4. No Longer Alone – Sweet-Toothed Pandas Strike" href="part0056.xhtml#aid-1LCVG1"> Chapter 4</a>, <em>No Longer Alone - Sweet-Toothed Pandas Strike</em>)</li><li class="listitem">Music and sounds</li><li class="listitem">Other assets (to store, for instance, <code class="literal">.txt</code> assets)</li><li class="listitem">Physical materials</li><li class="listitem"><strong>Prefabs</strong> (we will see what they are in the next chapter)</li><li class="listitem"><strong>Scenes</strong></li><li class="listitem"><strong>Scripts</strong></li></ul></div><div><h3 class="title"><a id="note7"/>Note</h3><p>If you are planning to create a 3D game, the folders will be different and they will include other kind of assets, such as 3D models and textures.</p></div><p>At the end, we should see the following in our <strong>Project</strong> panel (I'll add the <code class="literal">Animation</code> folder in <a class="link" title="Chapter 4. No Longer Alone – Sweet-Toothed Pandas Strike" href="part0056.xhtml#aid-1LCVG1">Chapter 4</a>, <em>No Longer Alone - Sweet-Toothed Pandas Strike</em>, when we will see animations, but feel free to add it immediately if you like):</p><div><img src="img/image00322.jpeg" alt="Organizing the project"/></div><p style="clear:both; height: 1em;"> </p><p>There is something else to know about the folders in your projects. If you create folders with some specific names, Unity will treat them in a special way. We are not going to use them; however, it's worth giving them a quick look:</p><div><ul class="itemizedlist"><li class="listitem"><code class="literal">Editor</code> (or a subfolder within it): This contains editor scripts rather than runtime scripts. These are designed to implement new functionality in Unity during the development of your games, and will not be included in the published game. As a result, you cannot use any of the scripts inside this folder within your <code class="literal">Scene</code>. Furthermore, it's possible to use more than one <code class="literal">Editor</code> folder in your project (even if this affects the execution order).</li><li class="listitem"><code class="literal">Editor Default Resources</code>: This contains resources that can be loaded on-demand by editor scripts by using the <code class="literal">EditorGUIUtility.Load()</code> function.</li><li class="listitem"><code class="literal">Resources</code> (or a subfolder within it): This contains all the assets that can be loaded on demand from a script by using the <code class="literal">Resources.Load()</code> function. In fact, you may need to load an asset that is not present in the scene yet. As with the <code class="literal">Editor</code> folder, you can have as many as you want in your project.</li><li class="listitem"><code class="literal">Plugins</code>: This contains native DLLs, written in C/C++, which can access third-party libraries, system calls, and other functions that Unity doesn't provide directly. As the name suggests, it is used to implement or import plugins.</li><li class="listitem"><code class="literal">StreamingAssets</code>: This contains assets that will not be included in your main game file, but that can be streamed from a script.</li><li class="listitem"><code class="literal">WebPlayerTemplates</code>: This contains custom host pages to use when the target platform is the <code class="literal">WebPlayer</code>. Scripts in this folder will not be compiled.</li></ul></div><p>Coming back to our folder, we need to import the package that we have downloaded. This can be done in a number of different ways, but the easiest way is to drag and drop the folder of the package within our <code class="literal">Graphics</code> folder.</p><p>If you need to select an asset to use, in the bottom-left corner of the <strong>Project</strong> panel, there is a slider that allows you to increase the size of the icons in the <strong>Project</strong> panel. This function is useful when there are a lot of assets and we need to find the right one without knowing the name, or when exploring new packages we don't know yet. The slider is highlighted in the following screenshot for your convenience:</p><div><img src="img/image00323.jpeg" alt="Organizing the project"/></div><p style="clear:both; height: 1em;"> </p></div>
<div><div><div><div><h1 class="title"><a id="ch01lvl1sec13"/>A 2D world</h1></div></div></div><p>There are few things to notice in our project when it is set to 2D mode, which we are going to explore in this section.</p><p>First of all, if you ever need to switch between 2D and 3D mode, you can do so by navigating to <strong>Edit</strong> | <strong>Project Settings</strong> | <strong>Editor</strong>. If you go in to the <strong>Default Behavior Mode</strong> settings, you can change the <strong>Mode</strong>, as shown in the following screenshot:</p><div><img src="img/image00324.jpeg" alt="A 2D world"/></div><p style="clear:both; height: 1em;"> </p><p>Coming back to our main interface, let's see the main differences between 2D and 3D mode. The <strong>Scene</strong> view is set by default to <strong>2D</strong>, as you can see in the following screenshot:</p><div><img src="img/image00325.jpeg" alt="A 2D world"/></div><p style="clear:both; height: 1em;"> </p><p>This allows us to have the <strong>Scene</strong> view locked on to the <em>xy</em> plane.</p><div><h3 class="title"><a id="note8"/>Note</h3><p>The <em>z</em> axis is used to determine which object should be rendered first. This decides which objects are in the foreground and which ones are in the background.</p></div><p>Then, every time we create a new scene, the default camera that comes with it is always set in <strong>Orthographic</strong> mode. Furthermore, its position is set to (<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">-10</code>), whereas in 3D mode, it is set to (<code class="literal">0</code>, <code class="literal">1</code>, <code class="literal">-10</code>). You can also check this by selecting the <strong>Main Camera</strong> in the <strong>Hierarchy</strong> panel and seeing its properties in the <strong>Inspector</strong>, as shown in the following screenshot:</p><div><img src="img/image00326.jpeg" alt="A 2D world"/></div><p style="clear:both; height: 1em;"> </p><p>Other differences are the options to use the <strong>Sprite Packer</strong> or the default objects that don't have real-time directional lights. There are also changes in the <strong>Lighting</strong> settings (you can access them from <strong>Window/Lighting</strong>). In particular, the <strong>Skybox</strong> is disabled for new scenes and <strong>Precomputed Realtime GI</strong>, <strong>Baked GI</strong>, and <strong>Auto-Building</strong> are set to off. In addition, the <strong>Ambient Source</strong> comes with a dark grey color.</p><p>In the following screenshot, you can see the default <strong>Lighting</strong> settings:</p><div><img src="img/image00327.jpeg" alt="A 2D world"/></div><p style="clear:both; height: 1em;"> </p><div><h3 class="title"><a id="note9"/>Note</h3><p>The RGB code of the color of the <strong>Ambient Source</strong> that is set by default in the 2D mode is (<code class="literal">54</code>, <code class="literal">58</code>, <code class="literal">66</code>).</p></div><p>However, the most important difference is how Unity imports new 2D assets, but we are going to see this in detail in the following sections.</p></div>
<div><div><div><div><h1 class="title"><a id="ch01lvl1sec14"/>Sprites</h1></div></div></div><p>The fundamental bricks of a 2D game in Unity are the Sprites. You can think of them as pictures, but actually as we are going to see, they are something more. In fact, one image can contain more than one Sprite. Usually, this kind of image takes the name of a Sprite Sheet. Here is an example of a Sprite Sheet within our package:</p><div><img src="img/image00328.jpeg" alt="Sprites"/></div><p style="clear:both; height: 1em;"> </p><p>There are different reasons why we want to have all the Sprites on a single image, rather than display them separately. The most important one is efficiency. Every time you want to render something on the screen, this has to be rendered by the graphics card in your computer. If all the Sprites are in separate images, the graphics card will have to process a lot of images. As a result, your game will run slowly.</p><p>Another reason for having Sprite Sheets is for animations. While 3D animations are made of data that describes how a 3D model has to be moved, 2D animations are made of frames. Like a movie or a cartoon, an animation is made of different images, or in this case, Sprites. Each of them describes a moment, and if you change them quickly enough, such as 25 per second, you can give the illusion of movement. Having all of the frames in a unique image is both efficient and well organized.</p><p>Naturally, there are other reasons for Sprite Sheets, but the two preceding reasons should be enough to convince you that Sprite Sheets are the best practice. On the other hand, there is a tradeoff to pay: the game engine needs to be able to distinguish between them on the image. We will see how Unity handles this in the following sections. But before we move on, there are other important concepts to learn about Sprites in Unity.</p><p>Like a 3D object, a Sprite also has a pivot point. Usually, this is located in the middle, but it can be changed in the Sprite Editor. The pivot point is where Unity starts to do all the calculations from. For instance, when you give a position for the Sprite to be within the Scene, Unity places the pivot point in that specific location, and then draws the Sprite around it. The pivot point is also important for rotations. Every time we rotate the Sprite, the rotation will be around the pivot point. In other words, during a rotation, the pivot point is the only point that does not change position.</p><p>This can be better explained with a screenshot, where the arrow is indicating the location of the pivot point:</p><div><img src="img/image00329.jpeg" alt="Sprites"/></div><p style="clear:both; height: 1em;"> </p><p>As you can see, there is the same Sprite rotated by 90 degrees clockwise. The one on the left has the pivot point in the middle, whereas the one on the right has it toward the left-hand side (the pivot point can be identified by the blue circle). Of course, you can make them coincide with a translation, but it is important to keep where it is in mind, especially when we code, in order to easily achieve what we want.</p><p>Now, there is another aspect to take into account about Sprites. In a 2D game, both the background and the character who is moving around the world are considered Sprites. However, we would like to render the background behind the character, and not vice versa. Therefore, the Sprites are rendered in a certain order that determines which one should render on top of the others.</p><p>In Unity there are two main ways to decide this order:</p><div><ul class="itemizedlist"><li class="listitem"><strong>Sorting Layers</strong>: Each <strong>Sprite Render</strong>, which is a component attached to a game object that renders the Sprite selected, has a variable called <strong>Sorting Layer</strong>. There, we can chose on which layer the Sprite will be rendered. The order of the different sorting layers can be determined in the Tags and Layers Settings (we will see how to access this menu later on in the chapter). Furthermore, Sorting Layers can offer an internal order for Sprites within the same layer by using the <strong>Order In Layer</strong> variable, which is always in the <strong>Sprite Render</strong> component.</li><li class="listitem"><strong>Z-Buffering</strong>: Since a 2D object only needs two coordinates to describe its position (the <em>x</em> and <em>y</em> axes), we have the <em>z</em> axis to describe depth. Unity uses depth to determine which Sprite should be rendered first. Since you need to imagine this as a depth, it's good practice to use only negative values. The greater the negative value, the closer the character or object is to the camera.</li></ul></div><p>There aren't any great differences between these methods in terms of computational efficiency. Therefore, both can be used. Actually, they can also be used together. A general approach is to use the <em>z</em> axis for visually structuring characters. Imagine a character who is carrying a weapon. Depending on which hand the weapon is held in and in which direction the character is facing, the weapon should be rendered behind the character or in front of it. Sorting Layers, instead, are used for organizing the Sprites at a higher level, such as background, foreground, player, enemies, and so on.</p><p>However, for the sake of learning, in this book we will not use Sorting Layers, but only Z-Buffering, since it can be easily changed within the code.</p><div><div><div><div><h2 class="title"><a id="ch01lvl2sec6"/>Sprite Renderer</h2></div></div></div><p>Before we mention this component, it might be worth discussing it a bit more.</p><p>This component will be automatically attached every time we add a Sprite to the scene. It should look like the following screenshot:</p><div><img src="img/image00330.jpeg" alt="Sprite Renderer"/></div><p style="clear:both; height: 1em;"> </p><p>Let's break down the different parameters:</p><div><ul class="itemizedlist"><li class="listitem"><strong>Sprite</strong>: This holds the Sprite that it has to render.</li><li class="listitem"><strong>Color</strong>: This is a color that is multiplied to the Sprite image. If you know bit about shaders and renderers, this is actual the vertex color of the rendered mesh.</li><li class="listitem"><strong>Flip</strong>: This defines on which axis the Sprite needs to be flipped. This is a new function from Unity 5.3.</li><li class="listitem"><strong>Material</strong>: This is the material Unity should use to render the Sprite. The default one is more than enough for our needs. If you are an expert in shaders, there are two kinds of built-in shader. Both are simple alpha-blended shaders, but the Diffuse one interacts with light, generating a (<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">-1</code>) front-facing normal vector.</li><li class="listitem"><strong>Sorting Layer</strong>: This is in which Sorting Layer the Sprite should be rendered (as discussed previously).</li><li class="listitem"><strong>Order in Layer</strong>: This is the order within that particular Sorting Layer (as we discussed previously).</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch01lvl2sec7"/>Importing new friends</h2></div></div></div><p>If you have downloaded and imported the package from the <em>Getting ready</em> section, we should now have all the files inside our <code class="literal">Project</code> folder. If you go to the <code class="literal">Graphics/towers</code> folder and select <code class="literal">cupcake_tower_sheet-01</code>, we should see the following in the <strong>Inspector</strong>:</p><div><img src="img/image00331.jpeg" alt="Importing new friends"/></div><p style="clear:both; height: 1em;"> </p><p>These are the <strong>Import Settings</strong>, where different options can be set. After we have changed something, we need to press the <strong>Apply</strong> button at the bottom to confirm the changes. Likewise, if we are not happy, we can press the <strong>Revert</strong> button to discard our changes.</p><p>It is important to note that the <strong>Texture Type</strong> is <strong>Sprite (2D and UI)</strong>. In 2D mode, Unity always imports image files as Sprites and not as Textures.</p><p>The other important parameter that we need to take into consideration is the <strong>Sprite Mode</strong>. By default, it is set to <strong>Single</strong>, but it can be changed to <strong>Multiple</strong> or <strong>Polygonal</strong> (only from Unity 5.3). As the names suggests, the first is used when the image contains a single Sprite, and the second mode is used when we have a Sprite Sheet with more than one Sprite. The last one is used to identify a polygonal Sprite with a custom number of edges.</p><p>Furthermore, the <strong>Pixel Per Unit</strong> parameter determines how big the Sprite will be in the Scene. It represents how many pixels are needed to have a unitary length in the <strong>Scene View</strong>. By default, it is set to <strong>100</strong>, but you should modify this value when you need to adapt your assets and change them to the right dimensions. However, if you already have a scale in mind, creating the graphics accordingly could be a useful time saver for the later stages of development.</p><p>With regard to the other settings (<strong>Packing Tag</strong>, <strong>Generate Mip Maps</strong>, <strong>Filter Mode</strong>, <strong>Max Size</strong>, and <strong>Format</strong>), we will see them in detail in the last chapter of this book, when we will talk about optimization.</p><p>Since the file that we have selected contains more than one Sprite, let's set the <strong>Sprite Mode</strong> to <strong>Multiple</strong> before we move on to the next section.</p></div><div><div><div><div><h2 class="title"><a id="ch01lvl2sec8"/>The Sprite Editor</h2></div></div></div><p>In <strong>Import Settings</strong>, there is also a button named <strong>Sprite Editor</strong>. If we press this button, a new window appears. This is the <strong>Sprite Editor</strong>, as we can see in the following screenshot:</p><div><img src="img/image00332.jpeg" alt="The Sprite Editor"/></div><p style="clear:both; height: 1em;"> </p><p>If we mess things up, we can always revert them back by clicking on the <strong>Revert</strong> button in the top-right corner of the <strong>Sprite Editor</strong>. Next to it, you can also find an <strong>Apply</strong> button, which you use to confirm your choices, so be careful which one you press!</p><p>For your own reference, they are highlighted in the next screenshot:</p><div><img src="img/image00333.jpeg" alt="The Sprite Editor"/></div><p style="clear:both; height: 1em;"> </p><p>Near these two buttons, you can find some features that might help you when working in the <strong>Sprite Editor</strong>. The first is a button that is easy to miss, but that allows you to switch from the colored asset (RGB channels) to B/W (alpha channel). This is particularly useful when you need to define contours and the image has transparency, as we will see later. So that you avoid missing it, you can find it highlighted in the following screenshot:</p><div><img src="img/image00334.jpeg" alt="The Sprite Editor"/></div><p style="clear:both; height: 1em;"> </p><p>To the right of it, there are two sliders, which allow you to either zoom in/out or increase/decrease the resolution (number of pixels). These features are shown in the following screenshot:</p><div><img src="img/image00335.jpeg" alt="The Sprite Editor"/></div><p style="clear:both; height: 1em;"> </p><p>The <strong>Sprite Editor</strong> allows you to do different things. For single sprites, it gives the possibility to change the pivot point. For Sprite Sheets, such as in this case, it is the way for Unity to understand how many Sprites there are and where they are located on the image.</p><p>Now, there are different ways to do this, so let's have a look at them in more detail.</p><div><div><div><div><h3 class="title"><a id="ch01lvl3sec0"/>Manual mode</h3></div></div></div><p>In manual mode, it's you that selects each Sprite in the image, and tells Unity where it is and how big it is.</p><p>To create a new selection, you need to click in a corner of your Sprite and drag the mouse until you have selected the whole Sprite. A green rectangle appears, showing you the selected area, and you can see how the Sprite changes in real time while dragging the mouse. If you release the mouse button, the green rectangle becomes blue and Unity will interpret everything that is inside it as a Sprite.</p><p>You can create as many selections (rectangles) as you want. Also, by clicking on them, you can move them around the image and change their dimensions. Here is an example of our Sprite Sheet with some manual selections:</p><div><img src="img/image00336.jpeg" alt="Manual mode"/></div><p style="clear:both; height: 1em;"> </p><p>If you have made a rectangle that is bigger than the Sprite, Unity can try to trim it. In the top-left corner of the Sprite Editor, there is the Trim button, as shown in the following screenshot:</p><div><img src="img/image00337.jpeg" alt="Manual mode"/></div><p style="clear:both; height: 1em;"> </p><p>It is active only when a selection is highlighted. If you don't like the final result, you can always modify the selection.</p><p>Furthermore, in the middle of each selection, there is a small blue circle. This is the Pivot Point of that selection. We are free to drag it to another position. However, other than very specific cases, having the pivot point in the middle is common and useful. So at the moment, don't worry much about it, and just leave it in the middle.</p><p>Another thing you may notice is four small green squares in the middle of each edge of the rectangle. We will need them to do 9-slice scaling in a few sections.</p><p>Once we have highlighted a selection, it is possible to modify it in more detail by using the menu that appears in the bottom-right corner of the Sprite Editor. Here is what it looks like:</p><div><img src="img/image00338.jpeg" alt="Manual mode"/></div><p style="clear:both; height: 1em;"> </p><p>From this menu, you can modify the name of the selection, which will be reflected in the name of the Sprite when we use it. By typing numeric values, you can precisely set the dimension, the position, and the Pivot Point of the selection.</p><p>To conclude, manual mode is particularly useful when the shape and the dimensions of the Sprite in the Sprite Sheet are different. Even if the designer of the picture is careful and avoids placing single Sprites close to each other, the objects can still have very different dimensions.</p></div><div><div><div><div><h3 class="title"><a id="ch01lvl3sec1"/>Automatic mode</h3></div></div></div><p>In automatic mode, Unity tries to slice the Sprites, which means it creates the different selections for you. However, to get a better result, you need to give some information about the image. In any case, once Unity has offered its selections for the image, you can still modify them as you would in manual mode.</p><p>In the top-left corner of the <strong>Sprite Editor</strong>, next to the <strong>Trim</strong> button, we can see the <strong>Slice</strong> button, as shown here:</p><div><img src="img/image00339.jpeg" alt="Automatic mode"/></div><p style="clear:both; height: 1em;"> </p><p>By clicking on it, a menu appears that looks like this:</p><div><img src="img/image00340.jpeg" alt="Automatic mode"/></div><p style="clear:both; height: 1em;"> </p><p>As you can see, we can select different types. Let's go through them.</p><p>The <strong>Automatic</strong> type is the best guess of Unity about the selections. Besides the method that we will see in a bit, and where to place the pivot points of the selections, there is nothing else to set. Unity will do everything automatically, and if we don't need our Sprites to be the same size, this way works pretty well. Here is the final result applied to our image:</p><div><img src="img/image00341.jpeg" alt="Automatic mode"/></div><p style="clear:both; height: 1em;"> </p><p>The <strong>Automatic</strong> type comes with three different methods:</p><div><ul class="itemizedlist"><li class="listitem">The <strong>Delete Existing</strong> method erases all the previous selections before slicing the image</li><li class="listitem">The <strong>Smart</strong> method tries to create selections for the Sprites that are not yet in a selection</li><li class="listitem">The <strong>Safe</strong> method creates new selections without erasing the previous ones</li></ul></div><p>The <strong>Grid By Cell Size</strong> type, instead, divides the image into a grid of selections. From the menu, you can select the dimension of each cell. As a result, the number of cells will depend on how big they are.</p><p>The <strong>Grid By Cell Count</strong> type, again, divides the image into a grid of selections. However, this time, you can set from the menu how many cells will be in the image, and their dimensions will depend on this. Here is our image sliced using a 4 x 4 grid:</p><div><img src="img/image00342.jpeg" alt="Automatic mode"/></div><p style="clear:both; height: 1em;"> </p></div><div><div><div><div><h3 class="title"><a id="ch01lvl3sec2"/>Polygonal mode</h3></div></div></div><p>From Unity 5.3, you can have access to this new feature of the Sprite Editor. In order to use it, you need to set the Sprite Mode to Polygonal in the import setting of the asset.</p><p>In this mode, Unity automatically slices the Sprite as a polygon. Once we open the Sprite Editor, we will immediately be able to set the number of sides or edges of the polygon. If we miss this, we can always press the <strong>Change Shape</strong> button in the top-left corner of the Sprite Editor, as shown here:</p><div><img src="img/image00343.jpeg" alt="Polygonal mode"/></div><p style="clear:both; height: 1em;"> </p><p>If we select an octagon (eight-sided polygon), this is the final result we would get in our image:</p><div><img src="img/image00344.jpeg" alt="Polygonal mode"/></div><p style="clear:both; height: 1em;"> </p></div><div><div><div><div><h3 class="title"><a id="ch01lvl3sec3"/>Sprite Editor for UI-9-slice scaling</h3></div></div></div><p>There is another important feature of the Sprite Editor, called 9-slice. It is used when a UI element needs different scaling in different parts of it. This feature is in the Sprite Editor because UI elements are treated as Sprites by Unity.</p><p>We will see the UI in another chapter, but let's start understanding why some UI elements need to be scaled differently. As you know, the game can run on different screens that usually have different resolutions and aspect ratios. As a result, the UI needs to be scaled properly depending on the screen. However, if you create a button with beautiful rounded corners, once it's scaled they will look completely different to how we had originally designed them, and not for the better.</p><p>The 9-slice technique avoids this problem by defining nine sections on the Sprite that will be scaled differently. In particular, corners will not be scaled at all: only edges along their axis and the central section will scale in all the directions. The following image should help in understanding these nine sections and how they scale:</p><div><img src="img/image00345.jpeg" alt="Sprite Editor for UI-9-slice scaling"/></div><p style="clear:both; height: 1em;"> </p><p>Let's take a UI image to learn how to do a 9-slice with the Sprite Editor of Unity. Select <code class="literal">ui_blank_square_icon_pink</code> in the <code class="literal">Graphics/UI</code> folder, and open it in the Sprite Editor. Since we didn't set its <strong>Sprite Mode</strong> to <strong>Multiple</strong>, we have only one selection around the entire image.</p><p>As we have already noticed, there are some green squares at the edges of our selection. If we drag them, we can divide the image into nine sections, and we are performing a 9-slice on that Sprite. Here is how the 9-slice should be done with a button:</p><div><img src="img/image00346.jpeg" alt="Sprite Editor for UI-9-slice scaling"/></div><p style="clear:both; height: 1em;"> </p><p>You need to leave the central section as big as possible, and keep the others the right size to include corners and edges.</p><p>Now, we should know a lot about the Sprite Editor. I suggest that you practice with the Sprite Editor for a bit before moving to the next section of this book. In fact, you will need to practice the methods that we have covered so far to prepare all our assets for the game we are going to build.</p></div></div><div><div><div><div><h2 class="title"><a id="ch01lvl2sec9"/>Preparing the assets</h2></div></div></div><p>In this section, you will have the chance to practice what we have learned so far. In fact, we need to prepare the assets for our game.</p><p>Let's start by selecting <code class="literal">Graphics/towers/cupcake_tower_sheet-01</code> (the same file we used before) and slice it with a 3 x 3 grid. Then, we should rename each Sprite.</p><p>In the first row, we can give them these names (from left to right):</p><div><ul class="itemizedlist"><li class="listitem"><code class="literal">Sprinkles_Cupcake_Tower_0</code></li><li class="listitem"><code class="literal">Sprinkles_Cupcake_Tower_1</code></li><li class="listitem"><code class="literal">Sprinkles_Cupcake_Tower_2</code></li></ul></div><p>In the second row, we can give them these names:</p><div><ul class="itemizedlist"><li class="listitem"><code class="literal">ChocolateChip_Cupcake_Tower_0</code></li><li class="listitem"><code class="literal">ChocolateChip_Cupcake_Tower_1</code></li><li class="listitem"><code class="literal">ChocolateChip_Cupcake_Tower_2</code></li></ul></div><p>Finally, the third row:</p><div><ul class="itemizedlist"><li class="listitem"><code class="literal">Lemon_Cupcake_Tower_0</code></li><li class="listitem"><code class="literal">Lemon_Cupcake_Tower_1</code></li><li class="listitem"><code class="literal">Lemon_Cupcake_Tower_2</code></li></ul></div><p>At the end, we should have the following in the <strong>Project</strong> panel:</p><div><img src="img/image00347.jpeg" alt="Preparing the assets"/></div><p style="clear:both; height: 1em;"> </p><p>Repeat the same process with the <code class="literal">Graphics/enemies</code> and <code class="literal">Graphics/UI</code> folders by dividing the different Sprite Sheets. Don't forget to assign meaningful names. For the rest of the book, when we refer to an asset, its name will be self-explanatory. For your convenience, the original file where the Sprite has been taken will be specified.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch01lvl1sec15"/>Scenes as levels</h1></div></div></div><p>A Unity game is made of different scenes that you can think of as levels. It's good practice to create a folder in our <strong>Project</strong> panel to store all the scenes. So, if we haven't done so already, right-click on the <strong>Project</strong> panel, then navigate to <strong>Create | Folder</strong>, and finally rename it <code class="literal">Scenes</code>.</p><p>In the toolbar menu, under <strong>File</strong>, there are options to create, save, and load scenes. Let's save the current one, even if it's empty, by navigating to <strong>File</strong> | <strong>Save Scene</strong>, as shown here:</p><div><img src="img/image00348.jpeg" alt="Scenes as levels"/></div><p style="clear:both; height: 1em;"> </p><div><h3 class="title"><a id="tip10"/>Tip</h3><p>You can also use the keyboard shortcut <em>Ctrl</em> + <em>s</em> (<em>Cmd</em> + <em>S</em> on Mac OS) to save the scene.</p></div><p>Unity will ask where to save the scene. Select the <code class="literal">Scenes</code> folder that we have just created and name the file <code class="literal">Level_01</code>. As a result, every time we save our scene, Unity will save it in this file.</p><div><div><div><div><h2 class="title"><a id="ch01lvl2sec10"/>Setting proportions</h2></div></div></div><p>When building our game, we need to think about the target platform that we are intending to develop for. Of course, we would like to adapt the game to as many devices and platforms as possible. For this reason, it's an important step in the game development process to do this adaptation.</p><p>Without going into too much detail, since it is out of the scope of this book, it is important to have the screen proportion of your target platform, and develop the game accordingly. For this book, we will stick to 16:9 since it is a common proportion, and it is easy to adapt to other proportions later, and also because the package that we have downloaded has been created for 16:9 proportions.</p><p>To change the proportion in Unity, you need to select the <strong>Game</strong> tab. In the top-left corner, there are two drop-down menus. The first is for the displays (available from Unity 5.3) and the other one is the proportion. They are highlighted in the following screenshot:</p><div><img src="img/image00349.jpeg" alt="Setting proportions"/></div><p style="clear:both; height: 1em;"> </p><div><h3 class="title"><a id="note11"/>Note</h3><p>From Unity 5.5, next to these settings, there is also a slider that allows you to zoom in and out in the scene, by changing its scale.</p></div><p>If you need a custom proportion, you can select the + button at the end of the list, and a screen like the following will appear:</p><div><img src="img/image00350.jpeg" alt="Setting proportions"/></div><p style="clear:both; height: 1em;"> </p><p>From here, it is possible to assign a label to this resolution and its dimensions. Once you have added a resolution, it will be shared among all of your projects.</p><p>Before we move on to the next section, remember to select <strong>16:9</strong> as the project's resolution.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch01lvl1sec16"/>There is more about the Unity interface</h1></div></div></div><p>From the e-guide that I suggested to you at the beginning of the chapter, you should have learned more about the Unity interface. But, I want to share a little trick with you.</p><p>Navigate from the top-bar menu and select <strong>Edit | Preferences...</strong>, as shown in the following screenshot:</p><div><img src="img/image00351.jpeg" alt="There is more about the Unity interface"/></div><p style="clear:both; height: 1em;"> </p><p>Then, from the menu that appeared, select the third tab, <strong>Colors</strong>, and in this screen you will have the possibility to change the color of the the main graphical elements (or Gizmos; see in the next chapter) of the scene view, such as the axis or the grid as shown in the following screenshot:.</p><div><img src="img/image00352.jpeg" alt="There is more about the Unity interface"/></div><p style="clear:both; height: 1em;"> </p><p>However, the trick lies in the <strong>Playmode tint</strong> setting. It allows you to change the overall tint of the interface when the game is running. You may not see the usefulness now, but it will be of great help when you want to modify parameters, and often you may forget to be in play mode. Personally, this little trick has helped me in many situations. Here is an example of how the Unity interface appears when it is in play mode with a blue tint:</p><div><img src="img/image00353.jpeg" alt="There is more about the Unity interface"/></div><p style="clear:both; height: 1em;"> </p></div>
<div><div><div><div><h1 class="title"><a id="ch01lvl1sec17"/>Homework</h1></div></div></div><p>In this chapter, you have already spent some time working with the Sprite Editor, so there is no need to do more exercises about it. However, if for some reason you want to keep practicing, you can download the standard assets from the Asset Store of Unity (<strong>Window | Asset Store</strong>), since it is free. Then, import the <code class="literal">Standard Assets/2D/Sprites</code> folder, and try to slice them from scratch using different modes to achieve the same result.</p></div>
<div><div><div><div><h1 class="title"><a id="ch01lvl1sec18"/>Summary</h1></div></div></div><p>In this chapter, we have seen the entire pipeline for importing Sprites and preparing them to use in our game. During this process we have understood what Sprites are, how to import them, and use the Sprite Editor in different ways. Furthermore, we have explored Unity when it is set in 2D and seen an introduction to 2D game development. Finally, we have learned how to set up scenes with the right screen resolution for our target platform.</p><p>I think that we have covered a lot in this chapter and now it's time to take a break. Go grab a coffee or even a cupcake before moving on to the next chapter, where we will learn about 2D game scripting.</p></div></body></html>