<html><head></head><body>
		<div id="_idContainer426">
			<h1 id="_idParaDest-187"><em class="italic"><a id="_idTextAnchor190"/>Chapter 11</em>: Storing Data and Audio Mixer</h1>
			<p>In this chapter, we will be looking at common ways of storing and sending data for our game. This will also involve us making use of Unity's ready-made <strong class="bold">Audio Mixer</strong> for us to store the player's volume settings for the game.</p>
			<p>As you may recall, in the previous chapter, we had begun making our own pause screen from scratch. We will be carrying on with this in this chapter. We still need to work on the music and sound effects slider on the pause screen. We will hold all Audio Source controls for each sound to be played in the <strong class="bold">Audio Mixer</strong>. The <strong class="bold">Audio Mixer</strong> will act as a central point for all sound and can also be manipulated via scripting, which we will also be doing in this chapter. If our game had more sound effects and more music, an <strong class="bold">Audio Mixer</strong> controlling the game's sound from one place would help us avoid getting tangled up with all the different audio source components attached to game objects.</p>
			<p>We will be making use of storing the volume settings with Unity's own <strong class="source-inline">PlayerPrefs</strong>, which stores data locally on the platform playing the game. This is also known as persistent data because we can turn off the machine that holds the volume information and when the machine is turned back on, the data remains on the system. We will introduce serializing our objects into data and deserializing the data back into objects.  This is useful if we want to send batches of data onto a database.</p>
			<p>In this chapter, we will be covering the following topics:</p>
			<ul>
				<li>Using the <strong class="bold">Audio Mixer</strong></li>
				<li>Storing data</li>
			</ul>
			<p>Let's get started!</p>
			<h1 id="_idParaDest-188"><a id="_idTextAnchor191"/>Core exam skills covered in this chapter</h1>
			<p>The following are the core exam skills that will be covered in this chapter:</p>
			<p><em class="italic">Programming core interactions</em>:</p>
			<ul>
				<li>Implement and configure game object behavior and physics.</li>
			</ul>
			<p><em class="italic">Developing application systems</em>:</p>
			<ul>
				<li>Interpret scripts for application interface flow such as menu systems, UI navigation, and application settings.</li>
				<li>Analyze scripts for user progression features such as scoring, leveling, and in-game economies utilizing technologies such as Unity Analytics and <strong class="source-inline">PlayerPrefs</strong>.</li>
				<li>Identify scripts for saving and retrieving application and user data.</li>
			</ul>
			<p><em class="italic">Programming for scene and environment design</em>:</p>
			<ul>
				<li>Determine scripts for implementing audio assets.</li>
			</ul>
			<p><em class="italic">Working in professional software development teams</em>:</p>
			<ul>
				<li>Recognize techniques for structuring scripts for modularity, readability, and reusability.</li>
			</ul>
			<h1 id="_idParaDest-189"><a id="_idTextAnchor192"/>Technical requirements</h1>
			<p>The project content for this chapter can be found at <a href="https://github.com/PacktPublishing/Unity-Certified-Programmer-Exam-Guide-Second-Edition/tree/main/Chapter_11">https://github.com/PacktPublishing/Unity-Certified-Programmer-Exam-Guide-Second-Edition/tree/main/Chapter_11</a>.</p>
			<p>You can download the entirety of each chapter's project files at <a href="https://github.com/PacktPublishing/Unity-Certified-Programmer-Exam-Guide-Second-Edition">https://github.com/PacktPublishing/Unity-Certified-Programmer-Exam-Guide-Second-Edition</a>.</p>
			<p>All content for this chapter is held in the chapter's <strong class="source-inline">unitypackage</strong> file, including a <strong class="source-inline">Complete </strong>folder that contains all of the work that we'll carry out in this chapter.</p>
			<p>Check out the following video to see the <em class="italic">Code in Action</em>: <a href="https://bit.ly/3EYHpxf">https://bit.ly/3EYHpxf</a>.</p>
			<h1 id="_idParaDest-190"><a id="_idTextAnchor193"/>Using the Audio Mixer</h1>
			<p>As the<a id="_idIndexMarker1204"/> game grows, it's useful to have a mixer channel that focuses on all the allocated volume levels and sound effects. Otherwise, if not for a separate mixer channel, we would be clicking on various game objects and adjusting each of their components in the <strong class="bold">Inspector</strong> window.</p>
			<p>For our game, we are going to keep this simple and create three <strong class="bold">Audio Groups</strong> with no added effects. Let's take a look at what each <strong class="bold">Audio Group</strong> will focus on:</p>
			<ol>
				<li><strong class="bold">Master Audio Group</strong>: Controls the master for the entire game</li>
				<li><strong class="bold">Music Audio Group</strong>: Controls the music of each level</li>
				<li><strong class="bold">Effects Audio Group</strong>: Controls the sound effects of the bullets firing from our player's ship</li>
			</ol>
			<p>The following screenshot<a id="_idIndexMarker1205"/> shows <strong class="bold">Audio Mixer</strong> and the setup for the three <strong class="bold">Audio Groups</strong>:</p>
			<div>
				<div id="_idContainer407" class="IMG---Figure">
					<img src="image/Figure_11.01_B18381.jpg" alt="Figure 11.1 – Audio Mixer window with Master, Music, and Effects Audio Groups&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.1 – Audio Mixer window with Master, Music, and Effects Audio Groups</p>
			<p class="callout-heading">Further Information</p>
			<p class="callout">If you would like to know more <a id="_idIndexMarker1206"/>about the layout of <strong class="bold">Audio Mixer</strong>, check out the documentation at <a href="https://docs.unity3d.com/Manual/AudioMixerOverview.html">https://docs.unity3d.com/Manual/AudioMixerOverview.html</a>.</p>
			<p>Let's now start <a id="_idIndexMarker1207"/>by creating the <strong class="bold">Audio Mixer</strong> within the Unity Editor, by following these steps:</p>
			<ol>
				<li value="1">In the <strong class="bold">Project</strong> window, go to <strong class="source-inline">Assets</strong> and right-click on an open space within the folder.</li>
				<li>From the drop-down menu, select <strong class="bold">Create</strong>, followed by <strong class="bold">Audio Mixer</strong>. The following screenshot shows the selection being made:</li>
			</ol>
			<div>
				<div id="_idContainer408" class="IMG---Figure">
					<img src="image/Figure_11.02_B18381.jpg" alt="Figure 11.2 – Create an Audio Mixer&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.2 – Create an Audio Mixer</p>
			<ol>
				<li value="3">With that, a new <strong class="bold">AudioMixer</strong> has been created. We are also given the opportunity<a id="_idIndexMarker1208"/> to rename this file, so let's rename it <strong class="source-inline">MasterMixer</strong>.</li>
			</ol>
			<p>Before we hook up the mixer to the <strong class="source-inline">LevelMusic</strong> and <strong class="source-inline">Player_Bullet</strong> game objects (because these are the two game objects making the sounds), we need to go into the <strong class="bold">Audio Mixer</strong> and create <strong class="bold">Music</strong> and <strong class="bold">Effects</strong> mixers first (we only have the master <strong class="bold">Audio Group</strong> on its own at the moment).</p>
			<p>Let's have a<a id="_idIndexMarker1209"/> closer look at our <strong class="bold">Audio Mixer</strong>. To view the <strong class="bold">Audio Mixer</strong> with our <strong class="source-inline">MasterMixer</strong>, double-click the <strong class="source-inline">MasterMixer</strong> file in the <strong class="bold">Project</strong> window. We will be presented with the following screen:</p>
			<div>
				<div id="_idContainer409" class="IMG---Figure">
					<img src="image/Figure_11.03_B18381.jpg" alt="Figure 11.3 – Audio Mixer window with Master Audio Group&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.3 – Audio Mixer window with Master Audio Group</p>
			<p>The previous <a id="_idIndexMarker1210"/>screenshot shows our setup for the <strong class="bold">Audio Mixer</strong>. It consists of four categories:</p>
			<ol>
				<li value="1"><strong class="bold">Mixers</strong> (top left): In<a id="_idIndexMarker1211"/> this category, we only have one <strong class="bold">Audio Group</strong> and that's <strong class="source-inline">MasterMixer</strong>.</li>
				<li><strong class="bold">Snapshots</strong>: Consider<a id="_idIndexMarker1212"/> this a save state for our mixer. We can have multiple snapshots, such as a physical Hi-Fi where we can select different saved presets (Rock, Disco, Classical, and so on). Snapshots are used in the same way as presets; it saves us time so that we don't always have to adjust the mixer settings.</li>
				<li><strong class="bold">Group</strong>: Within <a id="_idIndexMarker1213"/>our <strong class="source-inline">MasterMixer</strong> will be our two groups – one for <strong class="bold">Music</strong> and the other for <strong class="bold">Effects</strong>. We will create these soon.</li>
				<li><strong class="bold">Views</strong>: Used<a id="_idIndexMarker1214"/> to save different <strong class="bold">Audio Mixer</strong> UI layouts.</li>
			</ol>
			<p>Don't worry<a id="_idIndexMarker1215"/> too much about the details as we are going to focus mainly on <strong class="bold">groups</strong>. There is more we can do with Audio Mixers. Check the official Unity documentation to find out more at <a href="https://docs.unity3d.com/Documentation/Manual/AudioMixer.html">https://docs.unity3d.com/Documentation/Manual/AudioMixer.html</a>.</p>
			<p>To add two<a id="_idIndexMarker1216"/> extra volume mixers next to our <strong class="bold">Master</strong>, we need to do the following:</p>
			<ol>
				<li value="1">Right-click <strong class="bold">Master</strong> under the <strong class="bold">Groups</strong> section and select <strong class="bold">Add child group</strong>. We will gain a new mixer, as shown in the following screenshot:</li>
			</ol>
			<div>
				<div id="_idContainer410" class="IMG---Figure">
					<img src="image/Figure_11.04_B18381.jpg" alt="Figure 11.4 – Creating a new Audio Group&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.4 – Creating a new Audio Group</p>
			<ol>
				<li value="2">Right-click <strong class="bold">New Group</strong> (circled in the previous screenshot) and select <strong class="bold">Rename</strong> from the drop-down menu.</li>
				<li>Rename <strong class="source-inline">New Group</strong> to <strong class="source-inline">Music</strong>.</li>
				<li>Repeat <em class="italic">steps 1-3</em> to create another <strong class="bold">Audio Group</strong> and rename it <strong class="source-inline">Effects</strong>.</li>
			</ol>
			<p>The following screenshot shows <a id="_idIndexMarker1217"/>what the <strong class="bold">Audio Mixer</strong> window will look like now, with all three ASVs:</p>
			<div>
				<div id="_idContainer411" class="IMG---Figure">
					<img src="image/Figure_11.05_B18381.jpg" alt="Figure 11.5 – Audio Mixer with all three Audio Groups&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.5 – Audio Mixer with all three Audio Groups</p>
			<p>Great! Now, we can move on to hooking these <strong class="bold">audio groups</strong> to the game objects we want to affect. The first one is our <strong class="source-inline">LevelMusic</strong> game object, which is a child of the <strong class="source-inline">GameManager</strong> game object.</p>
			<p>To update our <strong class="source-inline">LevelMusic</strong> game object's <strong class="bold">Audio Source</strong> component, do the following:</p>
			<ol>
				<li value="1">Load up the <strong class="source-inline">bootUp</strong> scene from the Unity Editor.</li>
				<li>In the <strong class="bold">Hierarchy</strong> window, expand the <strong class="source-inline">GameManager</strong> game object and select the <strong class="source-inline">LevelMusic</strong> game object.</li>
				<li>Back in the <strong class="bold">Project</strong> window, click the arrow to the left of <strong class="bold">MasterMixer</strong> to expand its content.</li>
				<li>Click <a id="_idIndexMarker1218"/>the <strong class="bold">Music</strong> child group and drag it into the <strong class="bold">Output</strong> field of LevelMusic's <strong class="bold">Audio Source</strong>, as shown in the following screenshot:</li>
			</ol>
			<div>
				<div id="_idContainer412" class="IMG---Figure">
					<img src="image/Figure_11.06_B18381.jpg" alt="Figure 11.6 – Drag the Music Audio Group to the LevelMusic Audio Source Output field &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.6 – Drag the Music Audio Group to the LevelMusic Audio Source Output field </p>
			<ol>
				<li value="5">Click <strong class="bold">Overrides |Apply All </strong>in the <strong class="bold">Inspector</strong> window to update the GameManager's prefab settings.</li>
			</ol>
			<p>Now, we need to do something similar for our <strong class="source-inline">player_bullet</strong> prefab. To update its <strong class="bold">Audio Source</strong> with the <strong class="bold">Effects</strong> mixer, do the following:</p>
			<ol>
				<li value="1">In the <strong class="bold">Project</strong> window, go to the <strong class="source-inline">Assets/Prefab/Player</strong> folder. There, you should find our <strong class="source-inline">player_bullet</strong> game object.</li>
				<li>Select <strong class="source-inline">player_bullet</strong> (denoted as <strong class="bold">1</strong> in the following screenshot) and drag and drop the <strong class="bold">Effects</strong> group from <strong class="bold">MasterMixer</strong> (denoted as <strong class="bold">2</strong>) into <strong class="source-inline">player_bullet</strong> for <strong class="bold">Audio Source</strong> <strong class="bold">Output</strong> (denoted as <strong class="bold">3</strong>).</li>
			</ol>
			<p>The following screenshot shows what the <strong class="source-inline">player_bullet</strong> game object's <strong class="bold">Audio Source</strong> should look like in the <strong class="bold">Inspector</strong> window:</p>
			<div>
				<div id="_idContainer413" class="IMG---Figure">
					<img src="image/Figure_11.07_B18381.jpg" alt="Figure 11.7 – Drag the player_bullet's Audio Group Effects into the Audio Source Output field&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.7 – Drag the player_bullet's Audio Group Effects into the Audio Source Output field</p>
			<p>Now, the <strong class="bold">Audio Mixer</strong> is nearly ready to be connected to our pause screen's <strong class="bold">Music</strong> and <strong class="bold">Effects</strong> sliders. We need to do one more thing before we move on to the next section, and that is to make the <strong class="bold">audio group's</strong> volume accessible so we can make it communicate with the pause screen's audio sliders. To do this, we need to set our <strong class="bold">Audio Mixer's</strong> Attenuation Volume property to open or <strong class="bold">expose</strong> it to our scripts. </p>
			<p>To expose and name <a id="_idIndexMarker1219"/>our <strong class="bold">audio groups</strong>, we need to do the following:</p>
			<ol>
				<li value="1">In the <strong class="bold">Project</strong> window, go to <strong class="bold">MasterMixer</strong> and expand its content so that we can see its groups.</li>
				<li>Select the <strong class="bold">Music</strong> group.</li>
				<li>In the <strong class="bold">Inspector</strong> window, we are presented with the <strong class="bold">Music</strong> <strong class="bold">Group's </strong>properties. We want to expose <strong class="bold">Volume</strong> so that we can alter it with our script.</li>
				<li>Right-click <strong class="bold">Volume</strong> (In the <strong class="bold">Inspector</strong> window, under <strong class="bold">Attenuation</strong>) and select <strong class="bold">Expose 'Volume (of Music)' to script</strong>, as shown in the following screenshot:</li>
			</ol>
			<div>
				<div id="_idContainer414" class="IMG---Figure">
					<img src="image/Figure_11.08_B18381.jpg" alt="Figure 11.8 – In the Inspector window, right-click Attenuation Volume and select Expose 'Volume (of Music) to script'&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.8 – In the Inspector window, right-click Attenuation Volume and select Expose 'Volume (of Music) to script'</p>
			<p>Now, we also have the<a id="_idIndexMarker1220"/> option to give the exposed volume a reference name instead of its default name of <strong class="source-inline">MyExposedParam</strong>.</p>
			<p>To change the reference of the exposed <strong class="bold">Music</strong> <strong class="bold">Volume</strong>, do the following:</p>
			<ol>
				<li value="1">Back in the <strong class="bold">Project</strong> window, double-click the <strong class="source-inline">MasterMixer</strong> file.</li>
				<li>As you may have noticed, in the top-right corner of <strong class="bold">Audio Mixer</strong>, we are notified that we have <strong class="bold">Exposed Parameters (1)</strong> (denoted by <strong class="bold">1</strong> in the following screenshot). The <strong class="bold">1</strong> is the <strong class="bold">Music</strong> <strong class="bold">Volume</strong> that we just exposed.</li>
				<li>Click <strong class="bold">Exposed Parameters (1)</strong> (denoted by <strong class="bold">1</strong>).</li>
				<li>Right-click the <strong class="bold">MyExposedParam Volume (of Music)</strong> (denoted by <strong class="bold">2</strong>).</li>
				<li>Select <strong class="bold">Rename</strong> from the drop-down menu (denoted by <strong class="bold">3</strong>).</li>
				<li>In the parameter that appears, rename it <strong class="source-inline">musicVol</strong> (denoted by <strong class="bold">4</strong>).</li>
			</ol>
			<p>The following screenshot shows the stages we just spoke about in the preceding steps:</p>
			<div>
				<div id="_idContainer415" class="IMG---Figure">
					<img src="image/Figure_11.09_B18381.jpg" alt="Figure 11.9 – Renaming MyExposedParam to musicVol&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.9 – Renaming MyExposedParam to musicVol</p>
			<p>I hope you <a id="_idIndexMarker1221"/>understood this process well, because I want you to do it again but with the <strong class="bold">Effects</strong> group. Also, when it comes to naming the <strong class="bold">Effects</strong> reference in the last step that we just discussed, rename it <strong class="source-inline">effectsVol</strong>.</p>
			<p>Finally, we will have our exposed volume references named like so in our <strong class="bold">Audio Mixer</strong>:</p>
			<p class="figure-caption"><img src="image/Figure_11.10_B18381.png" alt="Figure 11.10 – Both of the exposed parameters are renamed&#13;&#10;"/></p>
			<p class="figure-caption">Figure 11.10 – Both of the exposed parameters are renamed</p>
			<p>Nice work! Before we move on to the next section, let's briefly recap what we have covered so far in this section:</p>
			<ul>
				<li>We introduced the <strong class="bold">Audio Mixer</strong> and its benefits.</li>
				<li>We created <strong class="bold">Audio Groups</strong> for our Mixer.</li>
				<li>We attached the <strong class="bold">Audio Mixer</strong> to our game object's Audio Source.</li>
				<li>We exposed the <strong class="bold">Audio Mixer</strong> to our scripts.</li>
			</ul>
			<p>In the next section, we are going to code our pause screen's <strong class="bold">Volume</strong> and <strong class="bold">Effects</strong> sliders.</p>
			<h2 id="_idParaDest-191"><a id="_idTextAnchor194"/>Attaching the Audio Mixer to UI sliders</h2>
			<p>In this <a id="_idIndexMarker1222"/>section, we are going to write two methods (<strong class="source-inline">SetMusicLevelFromSlider</strong> and <strong class="source-inline">SetEffectsLevelFromSlider</strong>) that <a id="_idIndexMarker1223"/>attach our pause screen's <strong class="bold">Music</strong> and <strong class="bold">Effects</strong> sliders to the <strong class="bold">Audio Mixer</strong> that we created in the previous section.</p>
			<p>Let's start by adding the <strong class="bold">Music</strong> slider to our <strong class="bold">Audio Mixer</strong> via the script, as follows:</p>
			<ol>
				<li value="1">In the <strong class="bold">Project</strong> window, go to the <strong class="source-inline">PauseComponent</strong> script, which should be located in <strong class="source-inline">Assets/Script</strong>, and open it.</li>
			</ol>
			<p>Because we are going to access the <strong class="bold">Audio Mixer</strong>, we need an extra Unity library to let this happen.</p>
			<ol>
				<li value="2">At the top of our <strong class="source-inline">PauseComponent</strong> script, add the following line of code:<p class="source-code">using UnityEngine.Audio;</p></li>
				<li>Now, add a field that will store a reference for our <strong class="bold">Audio Mixer</strong>:<p class="source-code"> [SerializeField]</p><p class="source-code"> AudioMixer masterMixer;</p></li>
				<li>We also need to add two more variables for the <strong class="bold">Music</strong> and <strong class="bold">Effects</strong> sliders. Add these below the <strong class="source-inline">masterMixer</strong> variable, as follows:<p class="source-code"> [SerializeField]</p><p class="source-code"> GameObject musicSlider;</p><p class="source-code"> [SerializeField]</p><p class="source-code"> GameObject effectsSlider;</p></li>
				<li>Save the script and return to the Unity Editor.</li>
				<li>Load up the <strong class="source-inline">level1</strong> scene where we started creating our pause screen.</li>
				<li>Select the <strong class="source-inline">PauseContainer</strong> game object from the <strong class="bold">Hierarchy</strong> window.</li>
				<li>In the <strong class="bold">Inspector</strong> window, we <a id="_idIndexMarker1224"/>will now have three empty parameters in <strong class="source-inline">PauseComponent</strong>. Here, we can drag the two sliders from the <strong class="bold">Hierarchy</strong> window and our <strong class="bold">MasterMixer</strong> from the <strong class="bold">Project</strong> window, as shown in<a id="_idIndexMarker1225"/> the following screenshot:</li>
			</ol>
			<div>
				<div id="_idContainer417" class="IMG---Figure">
					<img src="image/Figure_11.11_B18381.jpg" alt="Figure 11.11 – Dragging each game object and file into their directed fields &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.11 – Dragging each game object and file into their directed fields </p>
			<p>Now that our three references (music slider, effects slider, and master mixer) are hooked up to their parameters, we can return to our <strong class="source-inline">PauseComponent</strong> script and code in a method for each of the pause screen's volume sliders.</p>
			<p>To add functionality so that our <strong class="bold">Music</strong> slider controls the <strong class="bold">Music</strong> mixer, do the following:</p>
			<ol>
				<li value="1">In the <strong class="source-inline">PauseComponent</strong> script, add a <strong class="source-inline">public</strong> method within the <strong class="source-inline">PauseComponent</strong> class:<p class="source-code">  public void SetMusicLevelFromSlider()</p><p class="source-code">  {</p><p class="source-code">    masterMixer.SetFloat("musicVol",musicSlider.GetComponent&lt;Slider&gt;</p><p class="source-code">      ().value);</p><p class="source-code">  }</p></li>
			</ol>
			<p>The <strong class="source-inline">public</strong> method we have just entered, <strong class="source-inline">SetMusicLevelFromSlider</strong>, will <a id="_idIndexMarker1226"/>work as an event from the <strong class="bold">Music</strong> slider. Inside <a id="_idIndexMarker1227"/>the method, we have a reference to our <strong class="source-inline">masterMixer</strong>. Within this variable, we call its <strong class="source-inline">SetFloat</strong> function, which takes two parameters. The first is the reference name of the mixer (we called this <strong class="source-inline">musicVol</strong> earlier in this chapter), while the second is what value it is receiving to be changed. We are sending the value from our pause screen's <strong class="bold">Music</strong> slider.</p>
			<ol>
				<li value="2">Save the script and return to the Unity Editor.</li>
			</ol>
			<p>Next, we need to attach our <strong class="bold">Music</strong> slider's event to the <strong class="source-inline">SetMusicLevelFromSlider</strong> method. To make the <strong class="bold">Music</strong> slider communicate with the method, follow these steps:</p>
			<ol>
				<li value="1">Still in our <strong class="source-inline">level1</strong> scene, in the <strong class="bold">Hierarchy</strong> window, select the <strong class="source-inline">Music</strong> game object.</li>
				<li>In the <strong class="bold">Inspector</strong> window, click the <strong class="bold">+</strong> button at the bottom of the <strong class="bold">Inspector</strong> window to allow an event to be attached to the <strong class="bold">Slider</strong> component (denoted by <strong class="bold">1</strong> in the following screenshot).</li>
				<li>Drag the <strong class="source-inline">PauseContainer</strong> game object from the <strong class="bold">Hierarchy</strong> window to the <strong class="bold">None (Object)</strong> parameter (denoted by <strong class="bold">2</strong>).</li>
				<li>Click the <strong class="bold">No Function</strong> drop-down menu and select the method we just coded in <strong class="source-inline">SetMusicLevelFromSlider</strong> (denoted by <strong class="bold">3</strong>).</li>
			</ol>
			<p>The<a id="_idIndexMarker1228"/> following screenshot references the previous instructions for the <strong class="source-inline">Music</strong> game object in the <strong class="bold">Inspector</strong> window:</p>
			<div>
				<div id="_idContainer418" class="IMG---Figure">
					<img src="image/Figure_11.12_B18381.jpg" alt="Figure 11.12 – Three steps in updating the Music game object's music slider event&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.12 – Three steps in updating the Music game object's music slider event</p>
			<p>If we go back to the <strong class="bold">bootUp</strong> scene and click <strong class="bold">Play</strong> in the Unity Editor and then, in the <strong class="bold">Game</strong> window, click the game's pause button when it appears, we will be able to turn the music up and down with the <strong class="bold">Music</strong> slider.</p>
			<p>Now, we <a id="_idIndexMarker1229"/>need to repeat this in a similar fashion for our <strong class="bold">Effects</strong> slider volume to work:</p>
			<ol>
				<li value="1">Return to the <strong class="source-inline">PauseComponent</strong> script and enter the following method:<p class="source-code">    public void SetEffectsLevelFromSlider()</p><p class="source-code">  {</p><p class="source-code">    masterMixer.SetFloat("effectsVol",effectsSlider.    GetComponent</p><p class="source-code">       &lt;Slider&gt;().value);</p><p class="source-code">  }</p></li>
			</ol>
			<p>As we can see, the code is virtually the same as the code for <strong class="source-inline">SetMusicLevelFromSlider</strong>, apart from the variable names.</p>
			<ol>
				<li value="2">Save<a id="_idIndexMarker1230"/> the script.</li>
				<li>Return <a id="_idIndexMarker1231"/>to the Unity Editor and repeat the same procedure for dragging the <strong class="source-inline">PauseComponent</strong> game object but this time with the <strong class="source-inline">Effects</strong> game object and selecting <strong class="source-inline">SetEffectsLevelFromSlider</strong>, as shown in the following screenshot:</li>
			</ol>
			<div>
				<div id="_idContainer419" class="IMG---Figure">
					<img src="image/Figure_11.13_B18381.jpg" alt="Figure 11.13 – Updating the Effects game object audio slider&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.13 – Updating the Effects game object audio slider</p>
			<p>Finally, test to see if the <strong class="bold">Effects</strong> slider works when we run the game.</p>
			<p>This will obviously only work in <strong class="source-inline">level1</strong> as <strong class="source-inline">level2</strong> and <strong class="source-inline">level3</strong> don't have the extra game objects. In the next chapter, we will be making a new <strong class="source-inline">level3</strong>, so if you can hold on until then, it'll save going through the process of removing and adding scenes again.</p>
			<p>In this section, we covered the following functionality for the <strong class="source-inline">PauseComponent</strong> script:</p>
			<ul>
				<li>Ensuring it recognizes Audio Mixer</li>
				<li>Ensuring that the <strong class="bold">Music</strong> and <strong class="bold">Effects</strong> UI sliders alter <strong class="bold">Audio Groups</strong></li>
			</ul>
			<p>In the next section, we are going to start looking at how to store our data. We will use the pause screen one more time to show the benefit of our game remembering our volume settings.</p>
			<h1 id="_idParaDest-192"><a id="_idTextAnchor195"/>Storing data</h1>
			<p>In this section, we <a id="_idIndexMarker1232"/>are going to cover how we are going to store our data, such as the game's volume settings so that when we play our game, we don't have to keep setting the volume settings to where they were before. We want the game to remember them for us.</p>
			<p>There are multiple ways we can store data. The ones we are going to cover are the two most common choices for Unity development. They are as follows:</p>
			<ol>
				<li value="1"><strong class="bold">PlayerPrefs</strong>: This<a id="_idIndexMarker1233"/> is short for <strong class="bold">Player Preferences</strong>. We <a id="_idIndexMarker1234"/>can use this to store strings, floats, and integers on the device we are playing our game on. We will be using <strong class="source-inline">PlayerPrefs</strong> shortly to save our volume settings so that when we turn our game off and back on, it will remember our settings. <strong class="source-inline">PlayerPrefs</strong> is easily accessible from outside the game with a text file reader. When it comes to development, make sure you don't use <strong class="source-inline">PlayerPrefs</strong> to store sensitive information such as credit card details or things that would give a player an unfair advantage such as storing lives, energy, score, in-game credit, and so on. For more information<a id="_idIndexMarker1235"/> about <strong class="source-inline">PlayerPrefs</strong>, check Unity's description at <a href="https://docs.unity3d.com/Documentation/ScriptReference/PlayerPrefs.html">https://docs.unity3d.com/Documentation/ScriptReference/PlayerPrefs.html</a>.</li>
				<li><strong class="bold">JSON</strong>: This<a id="_idIndexMarker1236"/> is short for <strong class="bold">JavaScript Object Notation</strong> and is<a id="_idIndexMarker1237"/> typically used when sending and receiving data from our device to another application or even from a server online somewhere in the cloud. One of the benefits of JSON over <strong class="source-inline">PlayerPrefs</strong> is that it uses data types such as <strong class="source-inline">int</strong>, <strong class="source-inline">float</strong>, and <strong class="source-inline">string</strong>, just like <strong class="source-inline">PlayerPrefs</strong>, but also <strong class="source-inline">object</strong> (our classes act as blueprints so that we can make objects), <strong class="source-inline">array</strong>, <strong class="source-inline">bool</strong>, and <strong class="source-inline">null</strong>. </li>
			</ol>
			<p>It's wise to<a id="_idIndexMarker1238"/> use this form of <strong class="bold">application programming interface</strong> (<strong class="bold">API</strong>) for transferring game data (lives, levels, player progress, energy, and so on), but don't store highly personal details locally with regards to in-game credit, bank details, personal addresses, and emails, unless you are using some form of encryption.</p>
			<p class="callout-heading">Information</p>
			<p class="callout">An API basically tells us how applications communicate with each other.</p>
			<p>For more<a id="_idIndexMarker1239"/> information about JSON with Unity, check the documentation at <a href="https://docs.unity3d.com/Documentation/Manual/JSONSerialization.html">https://docs.unity3d.com/Documentation/Manual/JSONSerialization.html</a>.</p>
			<p>In the following sections, we are going to cover these two ways of storing data on the basis they are officially covered by Unity and are likely to be mentioned in your exam:</p>
			<ul>
				<li><strong class="source-inline">PlayerPrefs</strong> and volume settings</li>
				<li>JSON and storing game stats</li>
				<li>Adding JSON variables</li>
			</ul>
			<p>Let's make a start by looking at how to use <strong class="source-inline">PlayerPrefs</strong> and revisit our pause screen one last time.</p>
			<h2 id="_idParaDest-193"><a id="_idTextAnchor196"/>PlayerPrefs and volume settings</h2>
			<p>As we know, our<a id="_idIndexMarker1240"/> game has volume controls for its music and <a id="_idIndexMarker1241"/>sound effects on the pause screen. To make our game remember these volume settings, even when the game has been turned off and back on again, we need<a id="_idIndexMarker1242"/> to do the following:</p>
			<ol>
				<li value="1">In the <strong class="bold">Project</strong> window of the Unity Editor, go to <strong class="source-inline">Assets/Script</strong>.</li>
				<li>Double-click the <strong class="source-inline">PauseComponent</strong> script.</li>
				<li>Scroll down to the <strong class="source-inline">SetMusicLevelFromSlider</strong> method and add the following extra line of code at the bottom but within the method's scope. The following code shows what the method now looks like with the added code:<p class="source-code">  public void SetMusicLevelFromSlider()</p><p class="source-code">  {</p><p class="source-code">    masterMixer.SetFloat("musicVol",musicSlider.        GetComponent</p><p class="source-code">       &lt;Slider&gt;().value);</p><p class="source-code">    PlayerPrefs.SetFloat("musicVolume",musicSlider.        GetComponent</p><p class="source-code">       &lt;Slider&gt;().value);    // &lt;&lt; NEW CODE LINE</p><p class="source-code">  }</p></li>
			</ol>
			<p>In the preceding code, we used the <strong class="source-inline">value</strong> from our music <strong class="source-inline">&lt;Slider&gt;</strong> component and applied its <strong class="source-inline">float</strong> <strong class="source-inline">value</strong> to the <strong class="source-inline">PlayerPrefs</strong> <strong class="source-inline">float</strong> with <strong class="source-inline">musicVolume</strong> as our key (the reference name to identify the <strong class="source-inline">PlayerPrefs</strong> value).</p>
			<ol>
				<li value="4">Do the <a id="_idIndexMarker1243"/>same for the <strong class="source-inline">effects</strong> method:<p class="source-code">    public void SetEffectsLevelFromSlider()</p><p class="source-code">  {</p><p class="source-code">    masterMixer.SetFloat("effectsVol",effectsSlider.        GetComponent</p><p class="source-code">      &lt;Slider&gt;().value);</p><p class="source-code">    PlayerPrefs.SetFloat("effectsVolume",effectsSlider.        GetComponent</p><p class="source-code">      &lt;Slider&gt;().value);  // &lt;&lt; NEW CODE LINE</p><p class="source-code">  }</p></li>
			</ol>
			<p>That's our <strong class="source-inline">PlayerPrefs</strong> file ready to store the music and effects volume. The next thing to do is reapply the music/effects volume the next time we load the level from our <strong class="source-inline">PlayerPrefs</strong>.</p>
			<p>To grab the music volume setting from our <strong class="source-inline">PlayerPrefs</strong>, do the following:</p>
			<ol>
				<li value="5">Reopen the <strong class="source-inline">PauseComponent</strong> script.</li>
				<li>Within the <strong class="source-inline">PauseComponent</strong> class, enter the following code at the bottom of the <strong class="source-inline">Awake</strong> function:<p class="source-code">    masterMixer.SetFloat("musicVol",PlayerPrefs.GetFloat("musicVolume"));</p><p class="source-code">    masterMixer.SetFloat("effectsVol",PlayerPrefs.GetFloat("effectsVolume"));</p></li>
			</ol>
			<p>In the preceding code, we are reapplying our saved <strong class="source-inline">PlayerPrefs</strong> values for our music and effects volume (which are both floats) to our Audio Mixer's <strong class="bold">Audio Groups</strong>.</p>
			<p>The volumes<a id="_idIndexMarker1244"/> that we want the mixers to have are now set. The last thing we need to do is to set both volume sliders to their UI positions.</p>
			<ol>
				<li value="7">To update the <strong class="bold">Music</strong> and <strong class="bold">Effects</strong> sliders visually, we need to add the following code within our <strong class="source-inline">PauseComponent</strong>:<p class="source-code">  float GetMusicLevelFromMixer()</p><p class="source-code">  {</p><p class="source-code">    float musicMixersValue;</p><p class="source-code">    bool result = masterMixer.GetFloat("musicVol", </p><p class="source-code">       out musicMixersValue); </p><p class="source-code">    </p><p class="source-code">    if (result)</p><p class="source-code">    {</p><p class="source-code">      return musicMixersValue;</p><p class="source-code">    }</p><p class="source-code">    else</p><p class="source-code">    {</p><p class="source-code">      return 0;</p><p class="source-code">    }</p><p class="source-code">  }</p></li>
			</ol>
			<p>The preceding code is a method that returns a <strong class="source-inline">float</strong> value called <strong class="source-inline">GetMusicLevelFromMixer</strong>.</p>
			<p>Let's go through<a id="_idIndexMarker1245"/> the steps of this <strong class="source-inline">GetMusicLevelFromMixer</strong>:</p>
			<ol>
				<li>In this method, we create a <strong class="source-inline">float</strong> variable called <strong class="source-inline">musicMixersValue</strong>.</li>
				<li>The line after <strong class="source-inline">musicMixersValue</strong> checks to see whether the <strong class="source-inline">masterMixer</strong> instance contains an <strong class="bold">Audio Group</strong> called <strong class="source-inline">musicVol</strong>. We know it does because we set it earlier when we exposed each of the volume settings from the <strong class="bold">Audio Mixer</strong>, as shown in the following screenshot:</li>
			</ol>
			<p class="figure-caption"><img src="image/Figure_11.14_B18381.png" alt="Figure 11.14 – Our named exposed parameters&#13;&#10;"/></p>
			<p class="figure-caption">Figure 11.14 – Our named exposed parameters</p>
			<ol>
				<li value="3">So, if <strong class="source-inline">masterMixer</strong> does contain a <strong class="source-inline">float</strong> value with the name (key) of <strong class="source-inline">musicVol</strong>, we will store it in a <strong class="source-inline">float</strong> named <strong class="source-inline">musicMixersValue</strong>. </li>
				<li><strong class="source-inline">masterMixer.GetFloat</strong> will send a <strong class="source-inline">true</strong> or <strong class="source-inline">false</strong> value if <strong class="source-inline">masterMixer</strong> does or does not contain a <strong class="source-inline">float</strong> that is also stored in a <strong class="source-inline">bool</strong> value, respectively.</li>
				<li>If the <strong class="source-inline">bool</strong> value is <strong class="source-inline">true</strong>, the <strong class="source-inline">float</strong> value from <strong class="source-inline">masterMixer</strong> is returned from the method; otherwise, it will return <strong class="source-inline">0</strong>. </li>
			</ol>
			<p>Next, we need to call this <strong class="source-inline">GetMusicLevelFromMixer</strong> and make it so it sends its value to the music slider. Let's code this in now.</p>
			<ol>
				<li value="8">Within<a id="_idIndexMarker1246"/> the <strong class="source-inline">PauseComponent</strong> script, at the top, in the <strong class="source-inline">Awake</strong> function, add the following code below the two <strong class="source-inline">masterMixer</strong> coded lines:<p class="source-code">musicSlider.GetComponent&lt;Slider&gt;().value = GetMusicLevelFromMixer();</p></li>
			</ol>
			<p>In the preceding piece of code, we are sending the result from our <strong class="source-inline">GetMusicLevelFromMixer</strong> to the value of our <strong class="source-inline">musicSlider</strong> when the level starts.</p>
			<p>That's our music slider set. Now, we need to repeat this process for our effects slider. The process is the same, apart from using the effect slider's variables, so without repeating the same process, I want you to do the following:</p>
			<ol>
				<li>Create a <strong class="source-inline">GetEffectsLevelFromMixer</strong> method using the same code pattern as <strong class="source-inline">GetMusicLevelFromMixer</strong> but using <strong class="source-inline">effectsVol</strong> instead of <strong class="source-inline">musicVol</strong>.</li>
				<li>Assign the results of <strong class="source-inline">GetEffectsLevelFromMixer</strong> to the <strong class="source-inline">effectsSlider</strong> variable in the <strong class="source-inline">Awake</strong> function. Use the <strong class="source-inline">musicSlider</strong> variable for reference.</li>
			</ol>
			<p>Give it a go – if you're struggling, check out the <strong class="source-inline">Complete</strong> folder in this book's GitHub repository.</p>
			<p>Save the script and return to the Unity Editor. Play the first level, change the volume, quit the game, and return to the first level to see if our volume has been saved for the music and effects sliders.</p>
			<p>Now, we will move on and learn how to store and send data in a slightly different way.</p>
			<h2 id="_idParaDest-194"><a id="_idTextAnchor197"/>JSON and storing game stats</h2>
			<p>JSON is<a id="_idIndexMarker1247"/> great for creating, storing, and updating information across our game. As we mentioned earlier in this chapter, JSON is typically used for<a id="_idIndexMarker1248"/> sending data from our game to a server online where the JSON data can be delivered to another set of data.</p>
			<p>The <a id="_idIndexMarker1249"/>best way JSON was explained to me is with an analogy of me being at a restaurant, sitting at a table (my game); the waiter comes over and takes my (JSON) order, then sends it to the kitchen (the online server). Finally, the waiter returns with my food.</p>
			<p>With regards to coding JSON, we are storing variables in a single class, then serializing the class (object) into data (system memory or file). From there, we can transfer this data to an actual file or upload it to a server on a database. This whole process can also be reversed, where we take the data and return it as an object. This is called deserializing.</p>
			<p>Now, let's move on to coding some JSON values.</p>
			<h2 id="_idParaDest-195"><a id="_idTextAnchor198"/>Adding JSON variables</h2>
			<p>The<a id="_idIndexMarker1250"/> objective of working with JSON is to create a simple way of storing and updating data with JSON. In our project, we will provide a<a id="_idIndexMarker1251"/> simple example of storing statistical data for our game. When the player completes the game, we will store data and put it in JSON format.</p>
			<p>The three variables we are going to store are as follows:</p>
			<ul>
				<li><strong class="source-inline">livesLeft</strong>: How <a id="_idIndexMarker1252"/>many lives the player has left</li>
				<li><strong class="source-inline">completed</strong>: When<a id="_idIndexMarker1253"/> the player has completed the game</li>
				<li><strong class="source-inline">score</strong>: Stores <a id="_idIndexMarker1254"/>the player's score</li>
			</ul>
			<p>Let's make a start by creating a new script that will receive our game's three statistical updates. These will then be converted into JSON format. Follow these steps:</p>
			<ol>
				<li value="1">Create a new script (if you don't know how to do that, revisit the <em class="italic">Updating our camera properties via script</em> section in <a href="B18381_02_Epub.xhtml#_idTextAnchor048"><em class="italic">Chapter 2</em></a><em class="italic">,</em> <em class="italic">Adding and Manipulating Objects</em>).</li>
				<li>Call the new script <strong class="source-inline">GameStats</strong>.</li>
				<li>Before <a id="_idIndexMarker1255"/>we open the <strong class="source-inline">GameStats</strong> script, I recommend that you keep your files stored in the <strong class="source-inline">Assets/Script</strong> folder location.</li>
				<li>Next, we can open the <strong class="source-inline">GameStats</strong> script and code in the following variables:<p class="source-code">public class GameStats</p><p class="source-code">{</p><p class="source-code">    public int livesLeft;</p><p class="source-code">    public string completed;</p><p class="source-code">    public int score;</p><p class="source-code">}</p></li>
			</ol>
			<p>Notice <a id="_idIndexMarker1256"/>how the <strong class="source-inline">GameStats</strong> script doesn't require a library or need to inherit <strong class="source-inline">MonoBehaviour</strong>. We don't require either of these extra functionalities.</p>
			<p>When the player completes the game, we will take these three readings and store them in JSON format. From there, we can convert this data into a JSON file. This process is <a id="_idIndexMarker1257"/>known as <strong class="bold">serialization</strong>.</p>
			<p class="callout-heading">Serialization/Deserialization</p>
			<p class="callout">These two terms basically refer to the direction that data is stored in.</p>
			<p class="callout"><strong class="bold">Serialization</strong>: This <a id="_idIndexMarker1258"/>refers to converting an object from our script and turning it into bytes (a file, in our case).</p>
			<p class="callout"><strong class="bold">Deserialization</strong>: As you<a id="_idIndexMarker1259"/> can probably imagine, deserialization is the opposite of serialization. This means we are taking our raw data (file) and converting it into objects.</p>
			<ol>
				<li value="5">Save the script.</li>
			</ol>
			<p>Next, we <a id="_idIndexMarker1260"/>need to write some code that will update the player's lives, time and date, and score. We are going to do this when we play through the <a id="_idIndexMarker1261"/>game and complete level 3. In this case, we need to go to our <strong class="source-inline">ScenesManager</strong> and update the code.</p>
			<p>To update our <strong class="source-inline">ScenesManager</strong> so that it takes a reading of our player's stats and converts them into JSON format, we need to do the following:</p>
			<ol>
				<li value="1">In the Unity Editor, go to where our <strong class="source-inline">ScenesManager</strong> script is. This should be in the <strong class="source-inline">Assets/Script</strong> folder.</li>
				<li>Double-click the file to open it in our IDE and scroll down to the point where we check to see if the game has ended. This is located in the <strong class="source-inline">GameTimer</strong> method.</li>
			</ol>
			<p>The following screenshot shows where in the <strong class="source-inline">ScenesManager</strong> script we need to add our new method:</p>
			<div>
				<div id="_idContainer421" class="IMG---Figure">
					<img src="image/Figure_11.15_B18381.jpg" alt="Figure 11.15 – Placement marked where to add new code in our ScenesManager script&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.15 – Placement marked where to add new code in our ScenesManager script</p>
			<p>In the preceding screenshot, there is an asterisk (<strong class="bold">*</strong>) marking where we are going to enter the <a id="_idIndexMarker1262"/>name of our new method, along with a <strong class="source-inline">string</strong> parameter, which will be the name of the level we have completed.</p>
			<ol>
				<li value="3">Enter<a id="_idIndexMarker1263"/> the following method name where the <strong class="bold">*</strong> is in the previous screenshot:<p class="source-code">SendInJsonFormat(SceneManager.GetActiveScene().name);</p></li>
				<li>Next, we need to create the <strong class="source-inline">SendInJsonFormat</strong> method. Scroll down to a point in the <strong class="source-inline">ScenesManager</strong> script where we are still inside its class but not another method and enter the following:<p class="source-code">  void SendInJsonFormat(string lastLevel)</p><p class="source-code">  {</p><p class="source-code">    if (lastLevel == "level3")</p><p class="source-code">      {</p><p class="source-code">        GameStats gameStats = new GameStats();</p><p class="source-code">        gameStats.livesLeft = GameManager.playerLives;</p><p class="source-code">        gameStats.completed = System.DateTime.Now.ToString();</p><p class="source-code">         gameStats.score = GetComponent&lt;ScoreManager&gt;().             PlayersScore;</p><p class="source-code">        </p><p class="source-code">        string json = JsonUtility.ToJson(gameStats,true);</p><p class="source-code">        Debug.Log(json);</p><p class="source-code">      }</p><p class="source-code">  }</p></li>
			</ol>
			<p>In the previous code, we go through this series of steps: </p>
			<ol>
				<li>We have our <strong class="source-inline">SendInJsonFormat</strong> method, which takes a <strong class="source-inline">string</strong> parameter.</li>
				<li>Inside <a id="_idIndexMarker1264"/>the <strong class="source-inline">SendInJsonFormat</strong> method, we set an <strong class="source-inline">if</strong> statement that checks if the <strong class="source-inline">lastLevel</strong> string contains the <strong class="source-inline">level3</strong> value.</li>
				<li>If <strong class="source-inline">lastLevel</strong> is equal to the <strong class="source-inline">level3</strong> string, we go through the following steps inside the <strong class="source-inline">if</strong> statement:</li>
				<li>We <a id="_idIndexMarker1265"/>create an instance of the <strong class="source-inline">GameStats</strong> class we made earlier in this chapter.</li>
				<li>We access its <strong class="source-inline">livesLeft</strong> <strong class="source-inline">public</strong> variable and apply the static <strong class="source-inline">playerLives</strong> variable from the <strong class="source-inline">GameManager</strong> class.</li>
				<li>The next variable shows the date and time we completed the game. We send the command from the <strong class="source-inline">System</strong> library, which gives us the date and time, and we cast this as a <strong class="source-inline">string</strong> (<strong class="source-inline">ToString()</strong>). We send this result to the <strong class="source-inline">gameStats</strong> instance into the <strong class="source-inline">completed</strong> variable.</li>
				<li>The last variable we send data is the player's score. We get this from the <strong class="source-inline">playerScore</strong> <strong class="source-inline">static</strong> variable from our <strong class="source-inline">ScoreManager</strong> class.</li>
			</ol>
			<p>Now that we have applied the three variables to our <strong class="source-inline">gameStats</strong> instance, we can use Unity's <strong class="source-inline">JsonUtility</strong> class to send our <strong class="source-inline">gameStats</strong> into the <strong class="source-inline">ToJson</strong> function.</p>
			<p>We can also <a id="_idIndexMarker1266"/>make the JSON data readable by adding <strong class="source-inline">true</strong> to the parameter so that when we send a <strong class="source-inline">log</strong> command to the console to see that this has worked correctly, we can read the results.</p>
			<ol>
				<li value="5">Save the script and jump back into the Unity Editor and complete the game from the <strong class="source-inline">bootUp</strong> scene to the <strong class="source-inline">gameOver</strong> scene.</li>
			</ol>
			<p>The following screenshot shows the console log when I played through the game and completed level 3:</p>
			<div>
				<div id="_idContainer422" class="IMG---Figure">
					<img src="image/Figure_11.16_B18381.jpg" alt="Figure 11.16 – Console window giving stats about our game&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.16 – Console window giving stats about our game</p>
			<p>As you can see, we have the data from our script but displayed in JSON format.</p>
			<p>This <a id="_idIndexMarker1267"/>information can be saved to a physical file or can be sent to a server to keep a record of our player's gameplay and/or deserialize the results later on with our project (check out the following tip if you are interested in this). The point is that we are storing and carrying data that can be sent away for us or another system to pick up, store, and alter.</p>
			<p class="callout-heading">Further Information</p>
			<p class="callout">At this point, we have successfully taken the variables from our object and converted them into JSON data format (serialization).</p>
			<p class="callout">Now, imagine if we altered our data (changed its values) and wanted to bring that data back into our game's code and into a class. The reverse method would be <strong class="source-inline">GameStats loadJsonData = JsonUtility.FromJson&lt;GameStats&gt;(json);</strong>.</p>
			<p class="callout">This would update our <strong class="source-inline">GameStats</strong> variables from the JSON file. You can imagine that this would be handy for saving and loading data in games.</p>
			<p>Next, we will take the <a id="_idIndexMarker1268"/>most current JSON data file and send it to the device (the machine we play the game on). To <a id="_idIndexMarker1269"/>make and store a JSON file containing our custom-made stats, do the following:</p>
			<ol>
				<li value="1">Return to the <strong class="source-inline">ScenesManager</strong> script.</li>
				<li>Scroll to where we created the <strong class="source-inline">SendInJsonFormat</strong> method.</li>
				<li>Within the method's <strong class="source-inline">if</strong> statement, at the bottom, inside the scope of the <strong class="source-inline">if</strong> statement, add the following two lines of code:<p class="source-code">Debug.Log(Application.persistentDataPath + "/GameStatsSaved.json");</p><p class="source-code">System.IO.File.WriteAllText(Application.persistentDataPath +</p><p class="source-code">   "/GameStatsSaved.json",json);</p></li>
			</ol>
			<p>The preceding code block shows that we don't necessarily need to add <strong class="source-inline">Debug.Log</strong> and shows us where the next line of code is creating and storing our JSON file. Each platform will store data in different folders. For more information on the locations for different platforms, please refer to Unity's own documentation about <a id="_idIndexMarker1270"/>persistent data at <a href="https://docs.unity3d.com/ScriptReference/Application-persistentDataPath.html">https://docs.unity3d.com/ScriptReference/Application-persistentDataPath.html</a>.</p>
			<p>My system is a Windows PC, so <strong class="source-inline">Debug.Log</strong> will display the following location on my system:</p>
			<div>
				<div id="_idContainer423" class="IMG---Figure">
					<img src="image/Figure_11.17_B18381.jpg" alt="Figure 11.17 – Windows location of JSON file&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.17 – Windows location of JSON file</p>
			<p>The second <a id="_idIndexMarker1271"/>line of the code we just entered is using a system library and uses a function (<strong class="source-inline">Application.persistentDataPath</strong>) that will refer to our device's local storage. Then, after the function, we add the name we want to use to refer to our JSON file (<strong class="source-inline">/GameStatsSaved.json</strong>), along with the format type, which is <strong class="source-inline">json</strong>.</p>
			<ol>
				<li value="4">Save the script.</li>
				<li>Return <a id="_idIndexMarker1272"/>to the Unity Editor, play all the way to the end of the game, and go to the location that is displayed on the console screen. The following screenshot shows the location of the file that our game has made:</li>
			</ol>
			<div>
				<div id="_idContainer424" class="IMG---Figure">
					<img src="image/Figure_11.18_B18381.jpg" alt="Figure 11.18 – Windows location of our JSON file&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.18 – Windows location of our JSON file</p>
			<ol>
				<li value="6">Double-click the file to view its content. As you will see, this is where our game's stats are kept, as shown in the following screenshot:</li>
			</ol>
			<div>
				<div id="_idContainer425" class="IMG---Figure">
					<img src="image/Figure_11.19_B18381.jpg" alt="Figure 11.19 – The content of our JSON file&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 11.19 – The content of our JSON file</p>
			<p>With this, we <a id="_idIndexMarker1273"/>are now aware of how to store non-sensitive data such as our game's volume (<strong class="source-inline">PlayerPrefs</strong>), as well <a id="_idIndexMarker1274"/>as how to create, store, and send other types of data in JSON format.</p>
			<p>Now, let's summarize this chapter.</p>
			<p class="callout-heading">Further Information</p>
			<p class="callout">For more information<a id="_idIndexMarker1275"/> about all of these events, check the official Unity documentation at <a href="https://docs.unity3d.com/Manual/UnityAnalyticsEvents.html">https://docs.unity3d.com/Manual/UnityAnalyticsEvents.html</a>.</p>
			<h1 id="_idParaDest-196"><a id="_idTextAnchor199"/>Summary</h1>
			<p>This chapter covered a variety of topics, including understanding Unity's Audio Mixer, which is where we can control the sounds in our game, and altering levels with our script. Then, we moved on and looked at storing data with <strong class="source-inline">PlayerPrefs</strong> and custom storage in JSON format in order to recognize the differences between the two ways of storing data. For JSON, we converted our data from object-based data into bytes and stored the results in a file (serialization). </p>
			<p>In future projects, you will likely make use of the coding we covered in the last two chapters regarding storing and reapplying data such as music and sound effect volume sliders. Hopefully, you will also be able to go further with this data by using other components in your projects so that your game can send out data onto the cloud and monitor your players' progress as helpful feedback to improve development.</p>
			<p>In the next chapter, we are going to look at pathfinding and how to improve the overall performance of our game.  </p>
		</div>
	</body></html>